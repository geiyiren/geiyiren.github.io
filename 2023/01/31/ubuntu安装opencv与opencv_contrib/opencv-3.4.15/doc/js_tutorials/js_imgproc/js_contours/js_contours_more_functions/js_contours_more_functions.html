<h1 id="Contours-More-Functions-tutorial-js-contours-more-functions"><a href="#Contours-More-Functions-tutorial-js-contours-more-functions" class="headerlink" title="Contours : More Functions {#tutorial_js_contours_more_functions}"></a>Contours : More Functions {#tutorial_js_contours_more_functions}</h1><h2 id="Goal"><a href="#Goal" class="headerlink" title="Goal"></a>Goal</h2><ul>
<li>Convexity defects and how to find them.</li>
<li>Finding shortest distance from a point to a polygon</li>
<li>Matching different shapes</li>
</ul>
<h2 id="Theory-and-Code"><a href="#Theory-and-Code" class="headerlink" title="Theory and Code"></a>Theory and Code</h2><h3 id="1-Convexity-Defects"><a href="#1-Convexity-Defects" class="headerlink" title="1. Convexity Defects"></a>1. Convexity Defects</h3><p>We saw what is convex hull in second chapter about contours. Any deviation of the object from this<br>hull can be considered as convexity defect.We can visualize it using an image. We draw a<br>line joining start point and end point, then draw a circle at the farthest point.</p>
<p>@note Remember we have to pass returnPoints &#x3D; False while finding convex hull, in order to find<br>convexity defects.</p>
<p>We use the function: <strong>cv.convexityDefects (contour, convexhull, convexityDefect)</strong><br>@param contour              input contour.<br>@param convexhull           convex hull obtained using convexHull that should contain indices of the contour points that make the hull<br>@param convexityDefect      the output vector of convexity defects. Each convexity defect is represented as 4-element(start_index, end_index, farthest_pt_index, fixpt_depth), where indices are 0-based indices in the original contour of the convexity defect beginning, end and the farthest point, and fixpt_depth is fixed-point approximation (with 8 fractional bits) of the distance between the farthest contour point and the hull. That is, to get the floating-point value of the depth will be fixpt_depth&#x2F;256.0.</p>
<h2 id="Try-it"><a href="#Try-it" class="headerlink" title="Try it"></a>Try it</h2><p>\htmlonly</p>
<iframe src="../../js_contours_more_functions_convexityDefects.html" width="100%"
        onload="this.style.height=this.contentDocument.body.scrollHeight +'px';">
</iframe>
\endhtmlonly

<h3 id="2-Point-Polygon-Test"><a href="#2-Point-Polygon-Test" class="headerlink" title="2. Point Polygon Test"></a>2. Point Polygon Test</h3><p>This function finds the shortest distance between a point in the image and a contour. It returns the<br>distance which is negative when point is outside the contour, positive when point is inside and zero<br>if point is on the contour.</p>
<p>We use the function: <strong>cv.pointPolygonTest (contour, pt, measureDist)</strong><br>@param contour      input contour.<br>@param pt           point tested against the contour.<br>@param measureDist  if true, the function estimates the signed distance from the point to the nearest contour edge. Otherwise, the function only checks if the point is inside a contour or not.</p>
<p>@code{.js}<br>let dist &#x3D; cv.pointPolygonTest(cnt, new cv.Point(50, 50), true);<br>@endcode</p>
<h3 id="3-Match-Shapes"><a href="#3-Match-Shapes" class="headerlink" title="3. Match Shapes"></a>3. Match Shapes</h3><p>OpenCV comes with a function <strong>cv.matchShapes()</strong> which enables us to compare two shapes, or two<br>contours and returns a metric showing the similarity. The lower the result, the better match it is.<br>It is calculated based on the hu-moment values. Different measurement methods are explained in the<br>docs.</p>
<p>We use the function: <strong>cv.matchShapes (contour1, contour2, method, parameter)</strong><br>@param contour1      first contour or grayscale image.<br>@param contour2      second contour or grayscale image.<br>@param method        comparison method, see cv::ShapeMatchModes<br>@param parameter     method-specific parameter(not supported now).</p>
<h2 id="Try-it-1"><a href="#Try-it-1" class="headerlink" title="Try it"></a>Try it</h2><p>\htmlonly</p>
<iframe src="../../js_contours_more_functions_shape.html" width="100%"
        onload="this.style.height=this.contentDocument.body.scrollHeight +'px';">
</iframe>
\endhtmlonly