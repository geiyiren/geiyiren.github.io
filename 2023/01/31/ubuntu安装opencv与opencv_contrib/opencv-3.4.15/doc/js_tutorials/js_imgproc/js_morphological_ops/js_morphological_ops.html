<h1 id="Morphological-Transformations-tutorial-js-morphological-ops"><a href="#Morphological-Transformations-tutorial-js-morphological-ops" class="headerlink" title="Morphological Transformations {#tutorial_js_morphological_ops}"></a>Morphological Transformations {#tutorial_js_morphological_ops}</h1><h2 id="Goal"><a href="#Goal" class="headerlink" title="Goal"></a>Goal</h2><ul>
<li>We will learn different morphological operations like Erosion, Dilation, Opening, Closing<br>etc.</li>
<li>We will learn different functions like : <strong>cv.erode()</strong>, <strong>cv.dilate()</strong>,<br><strong>cv.morphologyEx()</strong> etc.</li>
</ul>
<h2 id="Theory"><a href="#Theory" class="headerlink" title="Theory"></a>Theory</h2><p>Morphological transformations are some simple operations based on the image shape. It is normally<br>performed on binary images. It needs two inputs, one is our original image, second one is called<br><strong>structuring element</strong> or <strong>kernel</strong> which decides the nature of operation. Two basic morphological<br>operators are Erosion and Dilation. Then its variant forms like Opening, Closing, Gradient etc also<br>comes into play. We will see them one-by-one with help of following image:</p>
<p><img src="/shape.jpg" alt="image"></p>
<h3 id="1-Erosion"><a href="#1-Erosion" class="headerlink" title="1. Erosion"></a>1. Erosion</h3><p>The basic idea of erosion is just like soil erosion only, it erodes away the boundaries of<br>foreground object (Always try to keep foreground in white). So what it does? The kernel slides<br>through the image (as in 2D convolution). A pixel in the original image (either 1 or 0) will be<br>considered 1 only if all the pixels under the kernel is 1, otherwise it is eroded (made to zero).</p>
<p>So what happends is that, all the pixels near boundary will be discarded depending upon the size of<br>kernel. So the thickness or size of the foreground object decreases or simply white region decreases<br>in the image. It is useful for removing small white noises (as we have seen in colorspace chapter),<br>detach two connected objects etc.</p>
<p>We use the function: <strong>cv.erode (src, dst, kernel, anchor &#x3D; new cv.Point(-1, -1), iterations &#x3D; 1, borderType &#x3D; cv.BORDER_CONSTANT, borderValue &#x3D; cv.morphologyDefaultBorderValue())</strong><br>@param src          input image; the number of channels can be arbitrary, but the depth should be one of cv.CV_8U, cv.CV_16U, cv.CV_16S, cv.CV_32F or cv.CV_64F.<br>@param dst          output image of the same size and type as src.<br>@param kernel       structuring element used for erosion.<br>@param anchor       position of the anchor within the element; default value new cv.Point(-1, -1) means that the anchor is at the element center.<br>@param iterations   number of times erosion is applied.<br>@param borderType   pixel extrapolation method(see cv.BorderTypes).<br>@param borderValue  border value in case of a constant border</p>
<h2 id="Try-it"><a href="#Try-it" class="headerlink" title="Try it"></a>Try it</h2><p>\htmlonly</p>
<iframe src="../../js_morphological_ops_erode.html" width="100%"
        onload="this.style.height=this.contentDocument.body.scrollHeight +'px';">
</iframe>
\endhtmlonly

<h3 id="2-Dilation"><a href="#2-Dilation" class="headerlink" title="2. Dilation"></a>2. Dilation</h3><p>It is just opposite of erosion. Here, a pixel element is ‘1’ if atleast one pixel under the kernel<br>is ‘1’. So it increases the white region in the image or size of foreground object increases.<br>Normally, in cases like noise removal, erosion is followed by dilation. Because, erosion removes<br>white noises, but it also shrinks our object. So we dilate it. Since noise is gone, they won’t come<br>back, but our object area increases. It is also useful in joining broken parts of an object.</p>
<p>We use the function: <strong>cv.dilate (src, dst, kernel, anchor &#x3D; new cv.Point(-1, -1), iterations &#x3D; 1, borderType &#x3D; cv.BORDER_CONSTANT, borderValue &#x3D; cv.morphologyDefaultBorderValue())</strong><br>@param src          input image; the number of channels can be arbitrary, but the depth should be one of cv.CV_8U, cv.CV_16U, cv.CV_16S, cv.CV_32F or cv.CV_64F.<br>@param dst          output image of the same size and type as src.<br>@param kernel       structuring element used for dilation.<br>@param anchor       position of the anchor within the element; default value new cv.Point(-1, -1) means that the anchor is at the element center.<br>@param iterations   number of times dilation is applied.<br>@param borderType   pixel extrapolation method(see cv.BorderTypes).<br>@param borderValue  border value in case of a constant border</p>
<h2 id="Try-it-1"><a href="#Try-it-1" class="headerlink" title="Try it"></a>Try it</h2><p>\htmlonly</p>
<iframe src="../../js_morphological_ops_dilate.html" width="100%"
        onload="this.style.height=this.contentDocument.body.scrollHeight +'px';">
</iframe>
\endhtmlonly

<h3 id="3-Opening"><a href="#3-Opening" class="headerlink" title="3. Opening"></a>3. Opening</h3><p>Opening is just another name of <strong>erosion followed by dilation</strong>. It is useful in removing noise.</p>
<p>We use the function: <strong>cv.morphologyEx (src, dst, op, kernel, anchor &#x3D; new cv.Point(-1, -1), iterations &#x3D; 1, borderType &#x3D; cv.BORDER_CONSTANT, borderValue &#x3D; cv.morphologyDefaultBorderValue())</strong><br>@param src          source image. The number of channels can be arbitrary. The depth should be one of cv.CV_8U, cv.CV_16U, cv.CV_16S, cv.CV_32F or cv.CV_64F<br>@param dst          destination image of the same size and type as source image.<br>@param op           type of a morphological operation, (see cv.MorphTypes).<br>@param kernel       structuring element. It can be created using cv.getStructuringElement.<br>@param anchor       anchor position with the kernel. Negative values mean that the anchor is at the kernel center.<br>@param iterations   number of times dilation is applied.<br>@param borderType   pixel extrapolation method(see cv.BorderTypes).<br>@param borderValue  border value in case of a constant border. The default value has a special meaning.</p>
<h2 id="Try-it-2"><a href="#Try-it-2" class="headerlink" title="Try it"></a>Try it</h2><p>\htmlonly</p>
<iframe src="../../js_morphological_ops_opening.html" width="100%"
        onload="this.style.height=this.contentDocument.body.scrollHeight +'px';">
</iframe>
\endhtmlonly

<h3 id="4-Closing"><a href="#4-Closing" class="headerlink" title="4. Closing"></a>4. Closing</h3><p>Closing is reverse of Opening, <strong>Dilation followed by Erosion</strong>. It is useful in closing small holes<br>inside the foreground objects, or small black points on the object.</p>
<h2 id="Try-it-3"><a href="#Try-it-3" class="headerlink" title="Try it"></a>Try it</h2><p>\htmlonly</p>
<iframe src="../../js_morphological_ops_closing.html" width="100%"
        onload="this.style.height=this.contentDocument.body.scrollHeight +'px';">
</iframe>
\endhtmlonly

<h3 id="5-Morphological-Gradient"><a href="#5-Morphological-Gradient" class="headerlink" title="5. Morphological Gradient"></a>5. Morphological Gradient</h3><p>It is the difference between dilation and erosion of an image.</p>
<p>The result will look like the outline of the object.</p>
<h2 id="Try-it-4"><a href="#Try-it-4" class="headerlink" title="Try it"></a>Try it</h2><p>\htmlonly</p>
<iframe src="../../js_morphological_ops_gradient.html" width="100%"
        onload="this.style.height=this.contentDocument.body.scrollHeight +'px';">
</iframe>
\endhtmlonly

<h3 id="6-Top-Hat"><a href="#6-Top-Hat" class="headerlink" title="6. Top Hat"></a>6. Top Hat</h3><p>It is the difference between input image and Opening of the image.</p>
<h2 id="Try-it-5"><a href="#Try-it-5" class="headerlink" title="Try it"></a>Try it</h2><p>\htmlonly</p>
<iframe src="../../js_morphological_ops_topHat.html" width="100%"
        onload="this.style.height=this.contentDocument.body.scrollHeight +'px';">
</iframe>
\endhtmlonly

<h3 id="7-Black-Hat"><a href="#7-Black-Hat" class="headerlink" title="7. Black Hat"></a>7. Black Hat</h3><p>It is the difference between the closing of the input image and input image.</p>
<h2 id="Try-it-6"><a href="#Try-it-6" class="headerlink" title="Try it"></a>Try it</h2><p>\htmlonly</p>
<iframe src="../../js_morphological_ops_blackHat.html" width="100%"
        onload="this.style.height=this.contentDocument.body.scrollHeight +'px';">
</iframe>
\endhtmlonly

<h2 id="Structuring-Element"><a href="#Structuring-Element" class="headerlink" title="Structuring Element"></a>Structuring Element</h2><p>We manually created a structuring elements in the previous examples with help of cv.Mat.ones. It is<br>rectangular shape. But in some cases, you may need elliptical&#x2F;circular shaped kernels. So for this<br>purpose, OpenCV has a function, <strong>cv.getStructuringElement()</strong>. You just pass the shape and size of<br>the kernel, you get the desired kernel.</p>
<p>We use the function: <strong>cv.getStructuringElement (shape, ksize, anchor &#x3D; new cv.Point(-1, -1))</strong><br>@param shape          element shape that could be one of cv.MorphShapes<br>@param ksize          size of the structuring element.<br>@param anchor         anchor position within the element. The default value [−1,−1] means that the anchor is at the center. Note that only the shape of a cross-shaped element depends on the anchor position. In other cases the anchor just regulates how much the result of the morphological operation is shifted.</p>
<h2 id="Try-it-7"><a href="#Try-it-7" class="headerlink" title="Try it"></a>Try it</h2><p>\htmlonly</p>
<iframe src="../../js_morphological_ops_getStructuringElement.html" width="100%"
        onload="this.style.height=this.contentDocument.body.scrollHeight +'px';">
</iframe>
\endhtmlonly