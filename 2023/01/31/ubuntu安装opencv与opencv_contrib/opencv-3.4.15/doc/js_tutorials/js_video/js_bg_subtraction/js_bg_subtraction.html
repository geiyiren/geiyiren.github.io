<h1 id="Background-Subtraction-tutorial-js-bg-subtraction"><a href="#Background-Subtraction-tutorial-js-bg-subtraction" class="headerlink" title="Background Subtraction {#tutorial_js_bg_subtraction}"></a>Background Subtraction {#tutorial_js_bg_subtraction}</h1><h2 id="Goal"><a href="#Goal" class="headerlink" title="Goal"></a>Goal</h2><ul>
<li>We will familiarize with the background subtraction methods available in OpenCV.js.</li>
</ul>
<h2 id="Basics"><a href="#Basics" class="headerlink" title="Basics"></a>Basics</h2><p>Background subtraction is a major preprocessing steps in many vision based applications. For<br>example, consider the cases like visitor counter where a static camera takes the number of visitors<br>entering or leaving the room, or a traffic camera extracting information about the vehicles etc. In<br>all these cases, first you need to extract the person or vehicles alone. Technically, you need to<br>extract the moving foreground from static background.</p>
<p>If you have an image of background alone, like image of the room without visitors, image of the road<br>without vehicles etc, it is an easy job. Just subtract the new image from the background. You get<br>the foreground objects alone. But in most of the cases, you may not have such an image, so we need<br>to extract the background from whatever images we have. It become more complicated when there is<br>shadow of the vehicles. Since shadow is also moving, simple subtraction will mark that also as<br>foreground. It complicates things.</p>
<p>OpenCV.js has implemented one algorithm for this purpose, which is very easy to use.</p>
<h2 id="BackgroundSubtractorMOG2"><a href="#BackgroundSubtractorMOG2" class="headerlink" title="BackgroundSubtractorMOG2"></a>BackgroundSubtractorMOG2</h2><p>It is a Gaussian Mixture-based Background&#x2F;Foreground Segmentation Algorithm. It is based on two<br>papers by Z.Zivkovic, “Improved adaptive Gaussian mixture model for background subtraction” in 2004<br>and “Efficient Adaptive Density Estimation per Image Pixel for the Task of Background Subtraction”<br>in 2006. One important feature of this algorithm is that it selects the appropriate number of<br>gaussian distribution for each pixel. It provides better adaptibility to varying scenes due illumination<br>changes etc.</p>
<p>While coding, we use the constructor: <strong>cv.BackgroundSubtractorMOG2 (history &#x3D; 500, varThreshold &#x3D; 16,<br>detectShadows &#x3D; true)</strong><br>@param history         Length of the history.<br>@param varThreshold    Threshold on the squared distance between the pixel and the sample to decide<br>whether a pixel is close to that sample. This parameter does not affect the background update.<br>@param detectShadows   If true, the algorithm will detect shadows and mark them. It decreases the<br>speed a bit, so if you do not need this feature, set the parameter to false.<br>@return                instance of cv.BackgroundSubtractorMOG2</p>
<p>Use <strong>apply (image, fgmask, learningRate &#x3D; -1)</strong> method to get the foreground mask<br>@param image         Next video frame. Floating point frame will be used without scaling and should<br>be in range [0,255].<br>@param fgmask        The output foreground mask as an 8-bit binary image.<br>@param learningRate  The value between 0 and 1 that indicates how fast the background model is learnt.<br>Negative parameter value makes the algorithm to use some automatically chosen learning rate. 0 means<br>that the background model is not updated at all, 1 means that the background model is completely<br>reinitialized from the last frame.</p>
<p>@note The instance of cv.BackgroundSubtractorMOG2 should be deleted manually.</p>
<h2 id="Try-it"><a href="#Try-it" class="headerlink" title="Try it"></a>Try it</h2><p>\htmlonly</p>
<iframe src="../../js_bg_subtraction.html" width="100%"
        onload="this.style.height=this.contentDocument.body.scrollHeight +'px';">
</iframe>
\endhtmlonly
