<h1 id="How-to-run-deep-networks-in-browser-tutorial-dnn-javascript"><a href="#How-to-run-deep-networks-in-browser-tutorial-dnn-javascript" class="headerlink" title="How to run deep networks in browser {#tutorial_dnn_javascript}"></a>How to run deep networks in browser {#tutorial_dnn_javascript}</h1><p>@prev_tutorial{tutorial_dnn_yolo}<br>@next_tutorial{tutorial_dnn_custom_layers}</p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>This tutorial will show us how to run deep learning models using OpenCV.js right<br>in a browser. Tutorial refers a sample of face detection and face recognition<br>models pipeline.</p>
<h2 id="Face-detection"><a href="#Face-detection" class="headerlink" title="Face detection"></a>Face detection</h2><p>Face detection network gets BGR image as input and produces set of bounding boxes<br>that might contain faces. All that we need is just select the boxes with a strong<br>confidence.</p>
<h2 id="Face-recognition"><a href="#Face-recognition" class="headerlink" title="Face recognition"></a>Face recognition</h2><p>Network is called OpenFace (project <a href="https://github.com/cmusatyalab/openface">https://github.com/cmusatyalab/openface</a>).<br>Face recognition model receives RGB face image of size <code>96x96</code>. Then it returns<br><code>128</code>-dimensional unit vector that represents input face as a point on the unit<br>multidimensional sphere. So difference between two faces is an angle between two<br>output vectors.</p>
<h2 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h2><p>All the sample is an HTML page that has JavaScript code to use OpenCV.js functionality.<br>You may see an insertion of this page below. Press <code>Start</code> button to begin a demo.<br>Press <code>Add a person</code> to name a person that is recognized as an unknown one.<br>Next weâ€™ll discuss main parts of the code.</p>
<p>@htmlinclude js_face_recognition.html</p>
<p>-# Run face detection network to detect faces on input image.<br>@snippet dnn&#x2F;js_face_recognition.html Run face detection model<br>You may play with input blob sizes to balance detection quality and efficiency.<br>The bigger input blob the smaller faces may be detected.</p>
<p>-# Run face recognition network to receive <code>128</code>-dimensional unit feature vector by input face image.<br>@snippet dnn&#x2F;js_face_recognition.html Get 128 floating points feature vector</p>
<p>-# Perform a recognition.<br>@snippet dnn&#x2F;js_face_recognition.html Recognize<br>Match a new feature vector with registered ones. Return a name of the best matched person.</p>
<p>-# The main loop.<br>@snippet dnn&#x2F;js_face_recognition.html Define frames processing<br>A main loop of our application receives a frames from a camera and makes a recognition<br>of an every detected face on the frame. We start this function ones when OpenCV.js was<br>initialized and deep learning models were downloaded.</p>
