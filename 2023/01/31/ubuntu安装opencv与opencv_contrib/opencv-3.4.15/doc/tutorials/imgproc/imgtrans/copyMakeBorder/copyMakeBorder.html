<h1 id="Adding-borders-to-your-images-tutorial-copyMakeBorder"><a href="#Adding-borders-to-your-images-tutorial-copyMakeBorder" class="headerlink" title="Adding borders to your images {#tutorial_copyMakeBorder}"></a>Adding borders to your images {#tutorial_copyMakeBorder}</h1><p>@prev_tutorial{tutorial_filter_2d}<br>@next_tutorial{tutorial_sobel_derivatives}</p>
<h2 id="Goal"><a href="#Goal" class="headerlink" title="Goal"></a>Goal</h2><p>In this tutorial you will learn how to:</p>
<ul>
<li>Use the OpenCV function <strong>copyMakeBorder()</strong> to set the borders (extra padding to your<br>image).</li>
</ul>
<h2 id="Theory"><a href="#Theory" class="headerlink" title="Theory"></a>Theory</h2><p>@note The explanation below belongs to the book <strong>Learning OpenCV</strong> by Bradski and Kaehler.</p>
<p>-#  In our previous tutorial we learned to use convolution to operate on images. One problem that<br>    naturally arises is how to handle the boundaries. How can we convolve them if the evaluated<br>    points are at the edge of the image?<br>-#  What most of OpenCV functions do is to copy a given image onto another slightly larger image and<br>    then automatically pads the boundary (by any of the methods explained in the sample code just<br>    below). This way, the convolution can be performed over the needed pixels without problems (the<br>    extra padding is cut after the operation is done).<br>-#  In this tutorial, we will briefly explore two ways of defining the extra padding (border) for an<br>    image:</p>
<pre><code>-#  **BORDER_CONSTANT**: Pad the image with a constant value (i.e. black or \f$0\f$
-#  **BORDER_REPLICATE**: The row or column at the very edge of the original is replicated to
    the extra border.

This will be seen more clearly in the Code section.
</code></pre>
<ul>
<li><strong>What does this program do?</strong><ul>
<li><p>Load an image</p>
</li>
<li><p>Let the user choose what kind of padding use in the input image. There are two options:</p>
<p>-#  <em>Constant value border</em>: Applies a padding of a constant value for the whole border.<br>This value will be updated randomly each 0.5 seconds.<br>-#  <em>Replicated border</em>: The border will be replicated from the pixel values at the edges of<br>the original image.<br>The user chooses either option by pressing ‘c’ (constant) or ‘r’ (replicate)</p>
</li>
<li><p>The program finishes when the user presses ‘ESC’</p>
</li>
</ul>
</li>
</ul>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><p>The tutorial code’s is shown lines below.</p>
<p>@add_toggle_cpp<br>You can also download it from<br><a href="https://raw.githubusercontent.com/opencv/opencv/3.4/samples/cpp/tutorial_code/ImgTrans/copyMakeBorder_demo.cpp">here</a><br>@include samples&#x2F;cpp&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;copyMakeBorder_demo.cpp<br>@end_toggle</p>
<p>@add_toggle_java<br>You can also download it from<br><a href="https://raw.githubusercontent.com/opencv/opencv/3.4/samples/java/tutorial_code/ImgTrans/MakeBorder/CopyMakeBorder.java">here</a><br>@include samples&#x2F;java&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;MakeBorder&#x2F;CopyMakeBorder.java<br>@end_toggle</p>
<p>@add_toggle_python<br>You can also download it from<br><a href="https://raw.githubusercontent.com/opencv/opencv/3.4/samples/python/tutorial_code/ImgTrans/MakeBorder/copy_make_border.py">here</a><br>@include samples&#x2F;python&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;MakeBorder&#x2F;copy_make_border.py<br>@end_toggle</p>
<h2 id="Explanation"><a href="#Explanation" class="headerlink" title="Explanation"></a>Explanation</h2><h4 id="Declare-the-variables"><a href="#Declare-the-variables" class="headerlink" title="Declare the variables"></a>Declare the variables</h4><p>First we declare the variables we are going to use:</p>
<p>@add_toggle_cpp<br>@snippet cpp&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;copyMakeBorder_demo.cpp variables<br>@end_toggle</p>
<p>@add_toggle_java<br>@snippet java&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;MakeBorder&#x2F;CopyMakeBorder.java variables<br>@end_toggle</p>
<p>@add_toggle_python<br>@snippet python&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;MakeBorder&#x2F;copy_make_border.py variables<br>@end_toggle</p>
<p>Especial attention deserves the variable <em>rng</em> which is a random number generator. We use it to<br>generate the random border color, as we will see soon.</p>
<h4 id="Load-an-image"><a href="#Load-an-image" class="headerlink" title="Load an image"></a>Load an image</h4><p>As usual we load our source image <em>src</em>:</p>
<p>@add_toggle_cpp<br>@snippet cpp&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;copyMakeBorder_demo.cpp load<br>@end_toggle</p>
<p>@add_toggle_java<br>@snippet java&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;MakeBorder&#x2F;CopyMakeBorder.java load<br>@end_toggle</p>
<p>@add_toggle_python<br>@snippet python&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;MakeBorder&#x2F;copy_make_border.py load<br>@end_toggle</p>
<h4 id="Create-a-window"><a href="#Create-a-window" class="headerlink" title="Create a window"></a>Create a window</h4><p>After giving a short intro of how to use the program, we create a window:</p>
<p>@add_toggle_cpp<br>@snippet cpp&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;copyMakeBorder_demo.cpp create_window<br>@end_toggle</p>
<p>@add_toggle_java<br>@snippet java&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;MakeBorder&#x2F;CopyMakeBorder.java create_window<br>@end_toggle</p>
<p>@add_toggle_python<br>@snippet python&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;MakeBorder&#x2F;copy_make_border.py create_window<br>@end_toggle</p>
<h4 id="Initialize-arguments"><a href="#Initialize-arguments" class="headerlink" title="Initialize arguments"></a>Initialize arguments</h4><p>Now we initialize the argument that defines the size of the borders (<em>top</em>, <em>bottom</em>, <em>left</em> and<br><em>right</em>). We give them a value of 5% the size of <em>src</em>.</p>
<p>@add_toggle_cpp<br>@snippet cpp&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;copyMakeBorder_demo.cpp init_arguments<br>@end_toggle</p>
<p>@add_toggle_java<br>@snippet java&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;MakeBorder&#x2F;CopyMakeBorder.java init_arguments<br>@end_toggle</p>
<p>@add_toggle_python<br>@snippet python&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;MakeBorder&#x2F;copy_make_border.py init_arguments<br>@end_toggle</p>
<h4 id="Loop"><a href="#Loop" class="headerlink" title="Loop"></a>Loop</h4><p>The program runs in an infinite loop while the key <strong>ESC</strong> isn’t pressed.<br>If the user presses ‘<strong>c</strong>‘ or ‘<strong>r</strong>‘, the <em>borderType</em> variable<br>takes the value of <em>BORDER_CONSTANT</em> or <em>BORDER_REPLICATE</em> respectively:</p>
<p>@add_toggle_cpp<br>@snippet cpp&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;copyMakeBorder_demo.cpp check_keypress<br>@end_toggle</p>
<p>@add_toggle_java<br>@snippet java&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;MakeBorder&#x2F;CopyMakeBorder.java check_keypress<br>@end_toggle</p>
<p>@add_toggle_python<br>@snippet python&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;MakeBorder&#x2F;copy_make_border.py check_keypress<br>@end_toggle</p>
<h4 id="Random-color"><a href="#Random-color" class="headerlink" title="Random color"></a>Random color</h4><p>In each iteration (after 0.5 seconds), the random border color (<em>value</em>) is updated…</p>
<p>@add_toggle_cpp<br>@snippet cpp&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;copyMakeBorder_demo.cpp update_value<br>@end_toggle</p>
<p>@add_toggle_java<br>@snippet java&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;MakeBorder&#x2F;CopyMakeBorder.java update_value<br>@end_toggle</p>
<p>@add_toggle_python<br>@snippet python&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;MakeBorder&#x2F;copy_make_border.py update_value<br>@end_toggle</p>
<p>This value is a set of three numbers picked randomly in the range \f$[0,255]\f$.</p>
<h4 id="Form-a-border-around-the-image"><a href="#Form-a-border-around-the-image" class="headerlink" title="Form a border around the image"></a>Form a border around the image</h4><p>Finally, we call the function <strong>copyMakeBorder()</strong> to apply the respective padding:</p>
<p>@add_toggle_cpp<br>@snippet cpp&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;copyMakeBorder_demo.cpp copymakeborder<br>@end_toggle</p>
<p>@add_toggle_java<br>@snippet java&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;MakeBorder&#x2F;CopyMakeBorder.java copymakeborder<br>@end_toggle</p>
<p>@add_toggle_python<br>@snippet python&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;MakeBorder&#x2F;copy_make_border.py copymakeborder<br>@end_toggle</p>
<ul>
<li><p>The arguments are:</p>
<p>-#  <em>src</em>: Source image<br>-#  <em>dst</em>: Destination image<br>-#  <em>top</em>, <em>bottom</em>, <em>left</em>, <em>right</em>: Length in pixels of the borders at each side of the image.<br>We define them as being 5% of the original size of the image.<br>-#  <em>borderType</em>: Define what type of border is applied. It can be constant or replicate for<br>this example.<br>-#  <em>value</em>: If <em>borderType</em> is <em>BORDER_CONSTANT</em>, this is the value used to fill the border<br>pixels.</p>
</li>
</ul>
<h4 id="Display-the-results"><a href="#Display-the-results" class="headerlink" title="Display the results"></a>Display the results</h4><p>We display our output image in the image created previously</p>
<p>@add_toggle_cpp<br>@snippet cpp&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;copyMakeBorder_demo.cpp display<br>@end_toggle</p>
<p>@add_toggle_java<br>@snippet java&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;MakeBorder&#x2F;CopyMakeBorder.java display<br>@end_toggle</p>
<p>@add_toggle_python<br>@snippet python&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;MakeBorder&#x2F;copy_make_border.py display<br>@end_toggle</p>
<h2 id="Results"><a href="#Results" class="headerlink" title="Results"></a>Results</h2><p>-#  After compiling the code above, you can execute it giving as argument the path of an image. The<br>    result should be:</p>
<pre><code>-   By default, it begins with the border set to BORDER_CONSTANT. Hence, a succession of random
    colored borders will be shown.
-   If you press &#39;r&#39;, the border will become a replica of the edge pixels.
-   If you press &#39;c&#39;, the random colored borders will appear again
-   If you press &#39;ESC&#39; the program will exit.

Below some screenshot showing how the border changes color and how the *BORDER_REPLICATE*
option looks:

![](images/CopyMakeBorder_Tutorial_Results.jpg)
</code></pre>
