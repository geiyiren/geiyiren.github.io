<h1 id="Laplace-Operator-tutorial-laplace-operator"><a href="#Laplace-Operator-tutorial-laplace-operator" class="headerlink" title="Laplace Operator {#tutorial_laplace_operator}"></a>Laplace Operator {#tutorial_laplace_operator}</h1><p>@prev_tutorial{tutorial_sobel_derivatives}<br>@next_tutorial{tutorial_canny_detector}</p>
<h2 id="Goal"><a href="#Goal" class="headerlink" title="Goal"></a>Goal</h2><p>In this tutorial you will learn how to:</p>
<ul>
<li>Use the OpenCV function <strong>Laplacian()</strong> to implement a discrete analog of the <em>Laplacian<br>operator</em>.</li>
</ul>
<h2 id="Theory"><a href="#Theory" class="headerlink" title="Theory"></a>Theory</h2><p>-#  In the previous tutorial we learned how to use the <em>Sobel Operator</em>. It was based on the fact<br>    that in the edge area, the pixel intensity shows a “jump” or a high variation of intensity.<br>    Getting the first derivative of the intensity, we observed that an edge is characterized by a<br>    maximum, as it can be seen in the figure:</p>
<pre><code>![](images/Laplace_Operator_Tutorial_Theory_Previous.jpg)
</code></pre>
<p>-#  And…what happens if we take the second derivative?</p>
<pre><code>![](images/Laplace_Operator_Tutorial_Theory_ddIntensity.jpg)

You can observe that the second derivative is zero! So, we can also use this criterion to
attempt to detect edges in an image. However, note that zeros will not only appear in edges
(they can actually appear in other meaningless locations); this can be solved by applying
filtering where needed.
</code></pre>
<h3 id="Laplacian-Operator"><a href="#Laplacian-Operator" class="headerlink" title="Laplacian Operator"></a>Laplacian Operator</h3><p>-#  From the explanation above, we deduce that the second derivative can be used to <em>detect edges</em>.<br>    Since images are “<em>2D</em>“, we would need to take the derivative in both dimensions. Here, the<br>    Laplacian operator comes handy.<br>-#  The <em>Laplacian operator</em> is defined by:</p>
<p>\f[Laplace(f) &#x3D; \dfrac{\partial^{2} f}{\partial x^{2}} + \dfrac{\partial^{2} f}{\partial y^{2}}\f]</p>
<p>-#  The Laplacian operator is implemented in OpenCV by the function <strong>Laplacian()</strong> . In fact,<br>    since the Laplacian uses the gradient of images, it calls internally the <em>Sobel</em> operator to<br>    perform its computation.</p>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><p>-#  <strong>What does this program do?</strong><br>    -   Loads an image<br>    -   Remove noise by applying a Gaussian blur and then convert the original image to grayscale<br>    -   Applies a Laplacian operator to the grayscale image and stores the output image<br>    -   Display the result in a window</p>
<p>@add_toggle_cpp<br>-#  The tutorial code’s is shown lines below. You can also download it from<br>    <a href="https://raw.githubusercontent.com/opencv/opencv/3.4/samples/cpp/tutorial_code/ImgTrans/Laplace_Demo.cpp">here</a><br>    @include samples&#x2F;cpp&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;Laplace_Demo.cpp<br>@end_toggle</p>
<p>@add_toggle_java<br>-#  The tutorial code’s is shown lines below. You can also download it from<br>    <a href="https://raw.githubusercontent.com/opencv/opencv/3.4/samples/java/tutorial_code/ImgTrans/LaPlace/LaplaceDemo.java">here</a><br>    @include samples&#x2F;java&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;LaPlace&#x2F;LaplaceDemo.java<br>@end_toggle</p>
<p>@add_toggle_python<br>-#  The tutorial code’s is shown lines below. You can also download it from<br>    <a href="https://raw.githubusercontent.com/opencv/opencv/3.4/samples/python/tutorial_code/ImgTrans/LaPlace/laplace_demo.py">here</a><br>    @include samples&#x2F;python&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;LaPlace&#x2F;laplace_demo.py<br>@end_toggle</p>
<h2 id="Explanation"><a href="#Explanation" class="headerlink" title="Explanation"></a>Explanation</h2><h4 id="Declare-variables"><a href="#Declare-variables" class="headerlink" title="Declare variables"></a>Declare variables</h4><p>@add_toggle_cpp<br>@snippet cpp&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;Laplace_Demo.cpp variables<br>@end_toggle</p>
<p>@add_toggle_java<br>@snippet samples&#x2F;java&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;LaPlace&#x2F;LaplaceDemo.java variables<br>@end_toggle</p>
<p>@add_toggle_python<br>@snippet samples&#x2F;python&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;LaPlace&#x2F;laplace_demo.py variables<br>@end_toggle</p>
<h4 id="Load-source-image"><a href="#Load-source-image" class="headerlink" title="Load source image"></a>Load source image</h4><p>@add_toggle_cpp<br>@snippet cpp&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;Laplace_Demo.cpp load<br>@end_toggle</p>
<p>@add_toggle_java<br>@snippet samples&#x2F;java&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;LaPlace&#x2F;LaplaceDemo.java load<br>@end_toggle</p>
<p>@add_toggle_python<br>@snippet samples&#x2F;python&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;LaPlace&#x2F;laplace_demo.py load<br>@end_toggle</p>
<h4 id="Reduce-noise"><a href="#Reduce-noise" class="headerlink" title="Reduce noise"></a>Reduce noise</h4><p>@add_toggle_cpp<br>@snippet cpp&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;Laplace_Demo.cpp reduce_noise<br>@end_toggle</p>
<p>@add_toggle_java<br>@snippet samples&#x2F;java&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;LaPlace&#x2F;LaplaceDemo.java reduce_noise<br>@end_toggle</p>
<p>@add_toggle_python<br>@snippet samples&#x2F;python&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;LaPlace&#x2F;laplace_demo.py reduce_noise<br>@end_toggle</p>
<h4 id="Grayscale"><a href="#Grayscale" class="headerlink" title="Grayscale"></a>Grayscale</h4><p>@add_toggle_cpp<br>@snippet cpp&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;Laplace_Demo.cpp convert_to_gray<br>@end_toggle</p>
<p>@add_toggle_java<br>@snippet samples&#x2F;java&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;LaPlace&#x2F;LaplaceDemo.java convert_to_gray<br>@end_toggle</p>
<p>@add_toggle_python<br>@snippet samples&#x2F;python&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;LaPlace&#x2F;laplace_demo.py convert_to_gray<br>@end_toggle</p>
<h4 id="Laplacian-operator"><a href="#Laplacian-operator" class="headerlink" title="Laplacian operator"></a>Laplacian operator</h4><p>@add_toggle_cpp<br>@snippet cpp&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;Laplace_Demo.cpp laplacian<br>@end_toggle</p>
<p>@add_toggle_java<br>@snippet samples&#x2F;java&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;LaPlace&#x2F;LaplaceDemo.java laplacian<br>@end_toggle</p>
<p>@add_toggle_python<br>@snippet samples&#x2F;python&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;LaPlace&#x2F;laplace_demo.py laplacian<br>@end_toggle</p>
<ul>
<li>The arguments are:<ul>
<li><em>src_gray</em>: The input image.</li>
<li><em>dst</em>: Destination (output) image</li>
<li><em>ddepth</em>: Depth of the destination image. Since our input is <em>CV_8U</em> we define <em>ddepth</em> &#x3D;<br><em>CV_16S</em> to avoid overflow</li>
<li><em>kernel_size</em>: The kernel size of the Sobel operator to be applied internally. We use 3 in<br>this example.</li>
<li><em>scale</em>, <em>delta</em> and <em>BORDER_DEFAULT</em>: We leave them as default values.</li>
</ul>
</li>
</ul>
<h4 id="Convert-output-to-a-CV-8U-image"><a href="#Convert-output-to-a-CV-8U-image" class="headerlink" title="Convert output to a CV_8U image"></a>Convert output to a <em>CV_8U</em> image</h4><p>@add_toggle_cpp<br>@snippet cpp&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;Laplace_Demo.cpp convert<br>@end_toggle</p>
<p>@add_toggle_java<br>@snippet samples&#x2F;java&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;LaPlace&#x2F;LaplaceDemo.java convert<br>@end_toggle</p>
<p>@add_toggle_python<br>@snippet samples&#x2F;python&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;LaPlace&#x2F;laplace_demo.py convert<br>@end_toggle</p>
<h4 id="Display-the-result"><a href="#Display-the-result" class="headerlink" title="Display the result"></a>Display the result</h4><p>@add_toggle_cpp<br>@snippet cpp&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;Laplace_Demo.cpp display<br>@end_toggle</p>
<p>@add_toggle_java<br>@snippet samples&#x2F;java&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;LaPlace&#x2F;LaplaceDemo.java display<br>@end_toggle</p>
<p>@add_toggle_python<br>@snippet samples&#x2F;python&#x2F;tutorial_code&#x2F;ImgTrans&#x2F;LaPlace&#x2F;laplace_demo.py display<br>@end_toggle</p>
<h2 id="Results"><a href="#Results" class="headerlink" title="Results"></a>Results</h2><p>-#  After compiling the code above, we can run it giving as argument the path to an image. For<br>    example, using as an input:</p>
<pre><code>![](images/Laplace_Operator_Tutorial_Original_Image.jpg)
</code></pre>
<p>-#  We obtain the following result. Notice how the trees and the silhouette of the cow are<br>    approximately well defined (except in areas in which the intensity are very similar, i.e. around<br>    the cow’s head). Also, note that the roof of the house behind the trees (right side) is<br>    notoriously marked. This is due to the fact that the contrast is higher in that region.</p>
<pre><code>![](images/Laplace_Operator_Tutorial_Result.jpg)
</code></pre>
