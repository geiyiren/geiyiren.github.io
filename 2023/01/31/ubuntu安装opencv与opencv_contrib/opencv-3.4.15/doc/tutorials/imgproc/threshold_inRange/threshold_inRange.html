<h1 id="Thresholding-Operations-using-inRange-tutorial-threshold-inRange"><a href="#Thresholding-Operations-using-inRange-tutorial-threshold-inRange" class="headerlink" title="Thresholding Operations using inRange {#tutorial_threshold_inRange}"></a>Thresholding Operations using inRange {#tutorial_threshold_inRange}</h1><p>@prev_tutorial{tutorial_threshold}<br>@next_tutorial{tutorial_filter_2d}</p>
<h2 id="Goal"><a href="#Goal" class="headerlink" title="Goal"></a>Goal</h2><p>In this tutorial you will learn how to:</p>
<ul>
<li>Perform basic thresholding operations using OpenCV @ref cv::inRange function.</li>
<li>Detect an object based on the range of pixel values in the HSV colorspace.</li>
</ul>
<h2 id="Theory"><a href="#Theory" class="headerlink" title="Theory"></a>Theory</h2><ul>
<li>In the previous tutorial, we learnt how to perform thresholding using @ref cv::threshold function.</li>
<li>In this tutorial, we will learn how to do it using @ref cv::inRange function.</li>
<li>The concept remains the same, but now we add a range of pixel values we need.</li>
</ul>
<h2 id="HSV-colorspace"><a href="#HSV-colorspace" class="headerlink" title="HSV colorspace"></a>HSV colorspace</h2><p><a href="https://en.wikipedia.org/wiki/HSL_and_HSV">HSV</a> (hue, saturation, value) colorspace<br>is a model to represent the colorspace similar to the RGB color model. Since the hue channel<br>models the color type, it is very useful in image processing tasks that need to segment objects<br>based on its color. Variation of the saturation goes from unsaturated to represent shades of gray and<br>fully saturated (no white component). Value channel describes the brightness or the intensity of the<br>color. Next image shows the HSV cylinder.</p>
<p><img src="/images/Threshold_inRange_HSV_colorspace.jpg" alt="By SharkDderivative work: SharkD [CC BY-SA 3.0 or GFDL], via Wikimedia Commons"></p>
<p>Since colors in the RGB colorspace are coded using the three channels, it is more difficult to segment<br>an object in the image based on its color.</p>
<p><img src="/images/Threshold_inRange_RGB_colorspace.jpg" alt="By SharkD [GFDL or CC BY-SA 4.0], from Wikimedia Commons"></p>
<p>Formulas used to convert from one colorspace to another colorspace using @ref cv::cvtColor function<br>are described in @ref imgproc_color_conversions</p>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><p>@add_toggle_cpp<br>The tutorial code’s is shown lines below. You can also download it from<br><a href="https://github.com/opencv/opencv/tree/3.4/samples/cpp/tutorial_code/ImgProc/Threshold_inRange.cpp">here</a><br>@include samples&#x2F;cpp&#x2F;tutorial_code&#x2F;ImgProc&#x2F;Threshold_inRange.cpp<br>@end_toggle</p>
<p>@add_toggle_java<br>The tutorial code’s is shown lines below. You can also download it from<br><a href="https://github.com/opencv/opencv/tree/3.4/samples/java/tutorial_code/ImgProc/threshold_inRange/ThresholdInRange.java">here</a><br>@include samples&#x2F;java&#x2F;tutorial_code&#x2F;ImgProc&#x2F;threshold_inRange&#x2F;ThresholdInRange.java<br>@end_toggle</p>
<p>@add_toggle_python<br>The tutorial code’s is shown lines below. You can also download it from<br><a href="https://github.com/opencv/opencv/tree/3.4/samples/python/tutorial_code/imgProc/threshold_inRange/threshold_inRange.py">here</a><br>@include samples&#x2F;python&#x2F;tutorial_code&#x2F;imgProc&#x2F;threshold_inRange&#x2F;threshold_inRange.py<br>@end_toggle</p>
<h2 id="Explanation"><a href="#Explanation" class="headerlink" title="Explanation"></a>Explanation</h2><p>Let’s check the general structure of the program:</p>
<ul>
<li><p>Capture the video stream from default or supplied capturing device.</p>
<p>@add_toggle_cpp<br>@snippet samples&#x2F;cpp&#x2F;tutorial_code&#x2F;ImgProc&#x2F;Threshold_inRange.cpp cap<br>@end_toggle</p>
<p>@add_toggle_java<br>@snippet samples&#x2F;java&#x2F;tutorial_code&#x2F;ImgProc&#x2F;threshold_inRange&#x2F;ThresholdInRange.java cap<br>@end_toggle</p>
<p>@add_toggle_python<br>@snippet samples&#x2F;python&#x2F;tutorial_code&#x2F;imgProc&#x2F;threshold_inRange&#x2F;threshold_inRange.py cap<br>@end_toggle</p>
</li>
<li><p>Create a window to display the default frame and the threshold frame.</p>
<p>@add_toggle_cpp<br>@snippet samples&#x2F;cpp&#x2F;tutorial_code&#x2F;ImgProc&#x2F;Threshold_inRange.cpp window<br>@end_toggle</p>
<p>@add_toggle_java<br>@snippet samples&#x2F;java&#x2F;tutorial_code&#x2F;ImgProc&#x2F;threshold_inRange&#x2F;ThresholdInRange.java window<br>@end_toggle</p>
<p>@add_toggle_python<br>@snippet samples&#x2F;python&#x2F;tutorial_code&#x2F;imgProc&#x2F;threshold_inRange&#x2F;threshold_inRange.py window<br>@end_toggle</p>
</li>
<li><p>Create the trackbars to set the range of HSV values</p>
<p>@add_toggle_cpp<br>@snippet samples&#x2F;cpp&#x2F;tutorial_code&#x2F;ImgProc&#x2F;Threshold_inRange.cpp trackbar<br>@end_toggle</p>
<p>@add_toggle_java<br>@snippet samples&#x2F;java&#x2F;tutorial_code&#x2F;ImgProc&#x2F;threshold_inRange&#x2F;ThresholdInRange.java trackbar<br>@end_toggle</p>
<p>@add_toggle_python<br>@snippet samples&#x2F;python&#x2F;tutorial_code&#x2F;imgProc&#x2F;threshold_inRange&#x2F;threshold_inRange.py trackbar<br>@end_toggle</p>
</li>
<li><p>Until the user want the program to exit do the following</p>
<p>@add_toggle_cpp<br>@snippet samples&#x2F;cpp&#x2F;tutorial_code&#x2F;ImgProc&#x2F;Threshold_inRange.cpp while<br>@end_toggle</p>
<p>@add_toggle_java<br>@snippet samples&#x2F;java&#x2F;tutorial_code&#x2F;ImgProc&#x2F;threshold_inRange&#x2F;ThresholdInRange.java while<br>@end_toggle</p>
<p>@add_toggle_python<br>@snippet samples&#x2F;python&#x2F;tutorial_code&#x2F;imgProc&#x2F;threshold_inRange&#x2F;threshold_inRange.py while<br>@end_toggle</p>
</li>
<li><p>Show the images</p>
<p>@add_toggle_cpp<br>@snippet samples&#x2F;cpp&#x2F;tutorial_code&#x2F;ImgProc&#x2F;Threshold_inRange.cpp show<br>@end_toggle</p>
<p>@add_toggle_java<br>@snippet samples&#x2F;java&#x2F;tutorial_code&#x2F;ImgProc&#x2F;threshold_inRange&#x2F;ThresholdInRange.java show<br>@end_toggle</p>
<p>@add_toggle_python<br>@snippet samples&#x2F;python&#x2F;tutorial_code&#x2F;imgProc&#x2F;threshold_inRange&#x2F;threshold_inRange.py show<br>@end_toggle</p>
</li>
<li><p>For a trackbar which controls the lower range, say for example hue value:</p>
<p>@add_toggle_cpp<br>@snippet samples&#x2F;cpp&#x2F;tutorial_code&#x2F;ImgProc&#x2F;Threshold_inRange.cpp low<br>@end_toggle</p>
<p>@add_toggle_java<br>@snippet samples&#x2F;java&#x2F;tutorial_code&#x2F;ImgProc&#x2F;threshold_inRange&#x2F;ThresholdInRange.java low<br>@end_toggle</p>
<p>@add_toggle_python<br>@snippet samples&#x2F;python&#x2F;tutorial_code&#x2F;imgProc&#x2F;threshold_inRange&#x2F;threshold_inRange.py low<br>@end_toggle<br>@snippet samples&#x2F;cpp&#x2F;tutorial_code&#x2F;ImgProc&#x2F;Threshold_inRange.cpp low</p>
</li>
<li><p>For a trackbar which controls the upper range, say for example hue value:</p>
<p>@add_toggle_cpp<br>@snippet samples&#x2F;cpp&#x2F;tutorial_code&#x2F;ImgProc&#x2F;Threshold_inRange.cpp high<br>@end_toggle</p>
<p>@add_toggle_java<br>@snippet samples&#x2F;java&#x2F;tutorial_code&#x2F;ImgProc&#x2F;threshold_inRange&#x2F;ThresholdInRange.java high<br>@end_toggle</p>
<p>@add_toggle_python<br>@snippet samples&#x2F;python&#x2F;tutorial_code&#x2F;imgProc&#x2F;threshold_inRange&#x2F;threshold_inRange.py high<br>@end_toggle</p>
</li>
<li><p>It is necessary to find the maximum and minimum value to avoid discrepancies such as<br>the high value of threshold becoming less than the low value.</p>
</li>
</ul>
<h2 id="Results"><a href="#Results" class="headerlink" title="Results"></a>Results</h2><ul>
<li><p>After compiling this program, run it. The program will open two windows</p>
</li>
<li><p>As you set the range values from the trackbar, the resulting frame will be visible in the other window.</p>
<p> <img src="/images/Threshold_inRange_Tutorial_Result_input.jpeg"><br> <img src="/images/Threshold_inRange_Tutorial_Result_output.jpeg"></p>
</li>
</ul>
