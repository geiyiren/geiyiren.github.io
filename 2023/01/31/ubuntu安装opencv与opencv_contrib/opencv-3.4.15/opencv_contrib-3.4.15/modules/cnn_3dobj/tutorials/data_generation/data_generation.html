<h1 id="Training-data-generation-using-Icosphere-tutorial-data-generation"><a href="#Training-data-generation-using-Icosphere-tutorial-data-generation" class="headerlink" title="Training data generation using Icosphere {#tutorial_data_generation}"></a>Training data generation using Icosphere {#tutorial_data_generation}</h1><h2 id="Goal"><a href="#Goal" class="headerlink" title="Goal"></a>Goal</h2><p>In this tutorial you will learn how to</p>
<ul>
<li>Conduct a point cloud of camera view on sphere.</li>
<li>Generate training images using 3D model.</li>
</ul>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><p>@include cnn_3dobj&#x2F;samples&#x2F;sphereview_data.cpp</p>
<h2 id="Explanation"><a href="#Explanation" class="headerlink" title="Explanation"></a>Explanation</h2><p>Here is the general structure of the program:</p>
<ul>
<li><p>Create a window.<br>@code{.cpp}<br>viz::Viz3d myWindow(“Coordinate Frame”);<br>@endcode</p>
</li>
<li><p>Set window size as 64*64, we use this scale as default.<br>@code{.cpp}<br>myWindow.setWindowSize(Size(64,64));<br>@endcode</p>
</li>
<li><p>Add coordinate axes.<br>@code{.cpp}<br>myWindow.showWidget(“Coordinate Widget”, viz::WCoordinateSystem());<br>myWindow.setBackgroundColor(viz::Color::gray());<br>myWindow.spin();<br>@endcode</p>
</li>
<li><p>Create a Mesh widget, loading .ply models.<br>@code{.cpp}<br>viz::Mesh objmesh &#x3D; viz::Mesh::load(plymodel);<br>@endcode</p>
</li>
<li><p>Get the center of the generated mesh widget, cause some .ply files.<br>@code{.cpp}<br>Point3d cam_focal_point &#x3D; ViewSphere.getCenter(objmesh.cloud);<br>@endcode</p>
</li>
<li><p>Get the pose of the camera using makeCameraPoses.<br>@code{.cpp}<br>Affine3f cam_pose &#x3D; viz::makeCameraPose(campos.at(pose)<em>radius+cam_focal_point, cam_focal_point, cam_y_dir</em>radius+cam_focal_point);<br>@endcode</p>
</li>
<li><p>Get the transformation matrix from camera coordinate system to global.<br>@code{.cpp}<br>Affine3f transform &#x3D; viz::makeTransformToGlobal(Vec3f(1.0f,0.0f,0.0f), Vec3f(0.0f,1.0f,0.0f), Vec3f(0.0f,0.0f,1.0f), campos.at(pose));<br>viz::WMesh mesh_widget(objmesh);<br>@endcode</p>
</li>
<li><p>Save screen shot as images.<br>@code{.cpp}<br>myWindow.saveScreenshot(filename);<br>@endcode</p>
</li>
<li><p>Write images into binary files for further using in CNN training.<br>@code{.cpp}<br>ViewSphere.writeBinaryfile(filename, binaryPath, headerPath,(int)campos.size()<em>num_class, label_class, (int)(campos.at(pose).x</em>100), (int)(campos.at(pose).y<em>100), (int)(campos.at(pose).z</em>100), rgb_use);<br>@endcode</p>
</li>
</ul>
<h2 id="Results"><a href="#Results" class="headerlink" title="Results"></a>Results</h2><p>Here is collection images created by this demo using 4 model.</p>
<p><img src="/images_all/1_8.png"></p>
