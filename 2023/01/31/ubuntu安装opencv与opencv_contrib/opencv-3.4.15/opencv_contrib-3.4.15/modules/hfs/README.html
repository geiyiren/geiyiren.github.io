<h2 id="OpenCV-Hierarchical-Feature-Selection-for-Efficient-Image-Segmentation-module"><a href="#OpenCV-Hierarchical-Feature-Selection-for-Efficient-Image-Segmentation-module" class="headerlink" title="OpenCV Hierarchical Feature Selection for Efficient Image Segmentation module"></a>OpenCV Hierarchical Feature Selection for Efficient Image Segmentation module</h2><p>Author and maintainers: Yujun Shi (<a href="mailto:&#115;&#104;&#105;&#x79;&#x75;&#x6a;&#x75;&#110;&#49;&#48;&#x31;&#54;&#x40;&#103;&#109;&#97;&#x69;&#108;&#x2e;&#99;&#x6f;&#x6d;">&#115;&#104;&#105;&#x79;&#x75;&#x6a;&#x75;&#110;&#49;&#48;&#x31;&#54;&#x40;&#103;&#109;&#97;&#x69;&#108;&#x2e;&#99;&#x6f;&#x6d;</a>), Yun Liu (<a href="mailto:&#x6e;&#107;&#x31;&#50;&#99;&#115;&#108;&#x79;&#x40;&#109;&#97;&#105;&#x6c;&#46;&#x6e;&#97;&#110;&#x6b;&#x61;&#x69;&#46;&#101;&#x64;&#x75;&#x2e;&#x63;&#x6e;">&#x6e;&#107;&#x31;&#50;&#99;&#115;&#108;&#x79;&#x40;&#109;&#97;&#105;&#x6c;&#46;&#x6e;&#97;&#110;&#x6b;&#x61;&#x69;&#46;&#101;&#x64;&#x75;&#x2e;&#x63;&#x6e;</a>).</p>
<p>Hierachical Feature Selection (HFS) is a real-time system for image segmentation. It was originally proposed in [1]. Here is the original project website: <a href="http://mmcheng.net/zh/hfs/">http://mmcheng.net/zh/hfs/</a></p>
<p>The algorithm is executed in 3 stages. In the first stage, it obtains an over-segmented image using SLIC(simple linear iterative clustering). In the last 2 stages, it iteratively merges the over-segmented  image with merging method mentioned in EGB(Efficient Graph-based Image Segmentation) and learned SVM parameters.</p>
<p>In our implementation, we wrapped these stages into one single member function of the interface class.</p>
<p>Since this module used cuda in some part of  the implementation, it has to be compiled with cuda support</p>
<p>For more details about the algorithm, please refer to the original paper: [1]</p>
<h3 id="usage"><a href="#usage" class="headerlink" title="usage"></a>usage</h3><p>c++ interface:</p>
<pre><code class="c++">// read a image
Mat img = imread(image_path), res;
int _h = img.rows, _w = img.cols;

// create engine
Ptr&lt;HfsSegment&gt; seg = HfsSegment::create( _h, _w );

// perform segmentation
// now &quot;res&quot; is a matrix of indices
// change the second parameter to &quot;True&quot; to get a rgb image for &quot;res&quot;
res = seg-&gt;performSegmentGpu(img, false);
</code></pre>
<p>python interface:</p>
<pre><code class="python">import cv2
import numpy as np

img = cv2.imread(image_path)

# create engine
engine = cv2.hfs.HfsSegment_create(img.shape[0], img.shape[1])

# perform segmentation
# now &quot;res&quot; is a matrix of indices
# change the second parameter to &quot;True&quot; to get a rgb image for &quot;res&quot;
res = engine.performSegmentGpu(img, False)
</code></pre>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p>[1]: M. cheng, Y. Liu, Q. Hou, J. Bian, P. Torr, S. Hu, Z. Tu HFS: Hierarchical Feature Selection for Efficient Image Segmentation ECCV, Oct.2016.</p>
