{"title":"手眼标定-Ros-Kinetic-Realsense-D435-AUBOi5-Ubuntu-16-04","slug":"手眼标定_Ros_Kinetic_Realsense_D435_AUBOi5_Ubuntu_16_04","date":"2022-11-23T20:59:25.000Z","updated":"2023-11-24T15:10:46.424Z","comments":true,"path":"api/articles/手眼标定_Ros_Kinetic_Realsense_D435_AUBOi5_Ubuntu_16_04.json","excerpt":null,"covers":["https://i.loli.net/2021/05/28/jShBMoz9apcKVXE.png","https://i.loli.net/2021/05/28/4Xmzb3hFrnd5R7c.jpg","https://i.loli.net/2021/05/28/Av7F6K9Gu8pfZs3.jpg","https://i.loli.net/2021/05/28/2ydewHu76InBqfs.jpg","https://i.loli.net/2021/05/28/YTKPw46HouZGpk9.jpg","https://i.loli.net/2021/05/28/gV9AWphbyU5mFlP.jpg","https://i.loli.net/2021/05/28/BgCzvN85MxAsUJV.jpg"],"content":"<h2 id=\"1-安装AUBOi5的Moveit功能包\"><a href=\"#1-安装AUBOi5的Moveit功能包\" class=\"headerlink\" title=\"1.安装AUBOi5的Moveit功能包\"></a>1.安装AUBOi5的Moveit功能包</h2><h3 id=\"1-1环境配置\"><a href=\"#1-1环境配置\" class=\"headerlink\" title=\"1.1环境配置\"></a>1.1环境配置</h3><p>下载Move-it package</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install ros-kinetic-moveit</span><br></pre></td></tr></table></figure>\n\n<p>下载moveit_visual_tools</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install ros-kinetic-moveit-visual-tools</span><br></pre></td></tr></table></figure>\n\n<p>下载industrial_core package</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install ros-kinetic-industrial-core</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-2建立ROS工作空间\"><a href=\"#1-2建立ROS工作空间\" class=\"headerlink\" title=\"1.2建立ROS工作空间\"></a>1.2建立ROS工作空间</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">source</span> /opt/ros/kinetic/setup.bash</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># catkin_ws为工作空间名称</span></span><br><span class=\"line\"><span class=\"built_in\">mkdir</span> -p ~/catkin_ws/src</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ~/catkin_ws/</span><br><span class=\"line\">catkin_make</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-2-在-catkin-ws-src-目录中下载Moveit功能包，并编译\"><a href=\"#1-2-在-catkin-ws-src-目录中下载Moveit功能包，并编译\" class=\"headerlink\" title=\"1.2 在  ~&#x2F;catkin_ws&#x2F;src  目录中下载Moveit功能包，并编译\"></a>1.2 在  ~&#x2F;catkin_ws&#x2F;src  目录中下载Moveit功能包，并编译</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~/catkin_ws/src</span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/lg609/aubo_robot.git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ~/catkin_ws/</span><br><span class=\"line\">catkin_make</span><br><span class=\"line\"><span class=\"built_in\">source</span> ~/catkin_ws/devel/setup.bash</span><br></pre></td></tr></table></figure>\n\n<p>注释：如果提示下列错误，则说明在安装Ros的时候没有安装Ros-moveit功能包：</p>\n<p><img src=\"https://i.loli.net/2021/05/28/jShBMoz9apcKVXE.png\"></p>\n<p>解决办法：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install ros-kinetic-moveit*</span><br></pre></td></tr></table></figure>\n\n<p>注：参考网址：<a href=\"https://github.com/tahsinkose/hector-moveit/issues/4\">点我查看</a></p>\n<h2 id=\"2-安装Realsense-D435相机驱动与功能包\"><a href=\"#2-安装Realsense-D435相机驱动与功能包\" class=\"headerlink\" title=\"2.安装Realsense D435相机驱动与功能包\"></a>2.安装Realsense D435相机驱动与功能包</h2><h3 id=\"2-1驱动安装\"><a href=\"#2-1驱动安装\" class=\"headerlink\" title=\"2.1驱动安装\"></a>2.1驱动安装</h3><p>官方安装教程：<a href=\"https://github.com/IntelRealSense/librealsense/blob/master/doc/distribution_linux.md\">点我查看</a></p>\n<p>参考教程：<a href=\"https://zhuanlan.zhihu.com/p/93127918\">点我查看</a></p>\n<p>注册公匙：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-key adv --keyserver keys.gnupg.net --recv-key F6E65AC044F831AC80A06380C8B3A55A6F3EFCDE || sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-key F6E65AC044F831AC80A06380C8B3A55A6F3EFCDE</span><br></pre></td></tr></table></figure>\n\n<p>添加服务器至存储列表：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo add-apt-repository <span class=\"string\">&quot;deb https://librealsense.intel.com/Debian/apt-repo xenial main&quot;</span> -u</span><br></pre></td></tr></table></figure>\n\n<p>安装所需库：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install librealsense2-dkms</span><br><span class=\"line\">sudo apt-get install librealsense2-utils</span><br></pre></td></tr></table></figure>\n\n<p>安装功能包：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install librealsense2-dev</span><br><span class=\"line\">sudo apt-get install librealsense2-dbg</span><br></pre></td></tr></table></figure>\n\n<p>启动连接界面，进行测试，若可以看到相机图像则证明驱动安装成功：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">realsense-viewer</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-2功能包安装\"><a href=\"#2-2功能包安装\" class=\"headerlink\" title=\"2.2功能包安装\"></a>2.2功能包安装</h3><p>创建工作空间：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> -p ~/catkin_ws/src &amp;&amp; <span class=\"built_in\">cd</span> ~/catkin_ws/src</span><br></pre></td></tr></table></figure>\n\n<p>下载源码，并检查依赖:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> -b 2.2.7 https://github.com/IntelRealSense/realsense-ros.git </span><br><span class=\"line\"><span class=\"built_in\">cd</span> realsense-ros/realsense2_camera git checkout `git tag | <span class=\"built_in\">sort</span> -V | grep -P <span class=\"string\">&quot;^\\d+\\.\\d+\\.\\d+&quot;</span> | <span class=\"built_in\">tail</span> -1`</span><br><span class=\"line\">sudo apt-get install ros-kinetic-ddynamic-reconfigure</span><br></pre></td></tr></table></figure>\n\n<p>编译：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~/catkin_ws</span><br><span class=\"line\">catkin_make -DCATKIN_ENABLE_TESTING=False -DCMAKE_BUILD_TYPE=Release </span><br><span class=\"line\">catkin_make install </span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;source ~/catkin_ws/devel/setup.bash&quot;</span> &gt;&gt; ~/.bashrc </span><br><span class=\"line\"><span class=\"built_in\">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure>\n\n<p>测试，启动相机节点：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">roslaunch realsense2_camera rs_camera.launch</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看发布的话题</span></span><br><span class=\"line\">rostopic list</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-安装ros-kinetic-visp依赖包\"><a href=\"#3-安装ros-kinetic-visp依赖包\" class=\"headerlink\" title=\"3.安装ros-kinetic-visp依赖包\"></a>3.安装ros-kinetic-visp依赖包</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install ros-kinetic-visp</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-安装aruco-ros二维码检测功能包\"><a href=\"#4-安装aruco-ros二维码检测功能包\" class=\"headerlink\" title=\"4.安装aruco_ros二维码检测功能包\"></a>4.安装aruco_ros二维码检测功能包</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~/catkin_ws/src</span><br><span class=\"line\">git <span class=\"built_in\">clone</span> -b kinetic-devel https://github.com/pal-robotics/aruco_ros.git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ..</span><br><span class=\"line\">catkin_make</span><br><span class=\"line\"><span class=\"built_in\">source</span> ~/catkin_ws/devel/setup.bash</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-安装visp-hand2eye-calibration\"><a href=\"#5-安装visp-hand2eye-calibration\" class=\"headerlink\" title=\"5.安装visp_hand2eye_calibration\"></a>5.安装visp_hand2eye_calibration</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~/catkin_ws/src</span><br><span class=\"line\">git <span class=\"built_in\">clone</span> -b kinetic-devel https://github.com/lagadic/vision_visp.git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ..</span><br><span class=\"line\">catkin_make --pkg visp_hand2eye_calibration</span><br><span class=\"line\"><span class=\"built_in\">source</span> ~/catkin_ws/devel/setup.bash</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6-安装easy-handeye手眼标定功能包\"><a href=\"#6-安装easy-handeye手眼标定功能包\" class=\"headerlink\" title=\"6.安装easy_handeye手眼标定功能包\"></a>6.安装easy_handeye手眼标定功能包</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~/catkin_ws/src</span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/IFL-CAMP/easy_handeye</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ..</span><br><span class=\"line\">catkin_make</span><br><span class=\"line\"><span class=\"built_in\">source</span> ~/catkin_ws/devel/setup.bash</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"7-标定方法\"><a href=\"#7-标定方法\" class=\"headerlink\" title=\"7.标定方法\"></a>7.标定方法</h2><h3 id=\"7-1眼在手上-eye-in-hand标定方法\"><a href=\"#7-1眼在手上-eye-in-hand标定方法\" class=\"headerlink\" title=\"7.1眼在手上 eye-in-hand标定方法\"></a>7.1眼在手上 eye-in-hand标定方法</h3><h4 id=\"7-1-1修改launch文件\"><a href=\"#7-1-1修改launch文件\" class=\"headerlink\" title=\"7.1.1修改launch文件\"></a>7.1.1修改launch文件</h4><p>标定过程需启动 ur5 机械臂的相关节点，realsense 节点，aruco 节点，easy_handeye 节点，可以写一个 launch 文件同时启动上述节点，也可以分别启动。easy_handeye 包中给出了用一个 launch 文件实现的示例，在如下的目录中：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~/catkin_ws/src/easy_handeye/docs/example_launch/ur5_kinect_calibration.launch</span><br></pre></td></tr></table></figure>\n\n<p>我们可以在此基础上进行修改。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 将 launch 文件拷贝到 easy_handeye 功能包的 launch 目录中，顺便改个名字</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> ~/catkin_ws/src/easy_handeye/docs/example_launch</span><br><span class=\"line\"><span class=\"built_in\">cp</span> ur5_kinect_calibration.launch ~/catkin_ws/src/easy_handeye/easy_handeye/launch/eye_in_hand_calibration.launch</span><br><span class=\"line\">gedit  ~/catkin_ws/src/easy_handeye/easy_handeye/launch/eye_in_hand_calibration.launch</span><br></pre></td></tr></table></figure>\n\n<p>修改 launch 文件如下：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">launch</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;namespace_prefix&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;aubo_i5_kinect_handeyecalibration&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- 169.254.3.20为AUBOi5机械臂的IP地址,根据实际情况修改 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_ip&quot;</span> <span class=\"attr\">doc</span>=<span class=\"string\">&quot;The IP address of the UR5 robot&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;169.254.3.20&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;marker_size&quot;</span> <span class=\"attr\">doc</span>=<span class=\"string\">&quot;Size of the ArUco marker used, in meters&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;0.1&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;marker_id&quot;</span> <span class=\"attr\">doc</span>=<span class=\"string\">&quot;The ID of the ArUco marker used&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;100&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 1. start the Realsense435 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">include</span> <span class=\"attr\">file</span>=<span class=\"string\">&quot;$(find realsense2_camera)/launch/rs_camera.launch&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 2. start ArUco --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">node</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;aruco_tracker&quot;</span> <span class=\"attr\">pkg</span>=<span class=\"string\">&quot;aruco_ros&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;single&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">remap</span> <span class=\"attr\">from</span>=<span class=\"string\">&quot;/camera_info&quot;</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/camera/color/camera_info&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">remap</span> <span class=\"attr\">from</span>=<span class=\"string\">&quot;/image&quot;</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/camera/color/image_raw&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;image_is_rectified&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;true&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;marker_size&quot;</span>        <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg marker_size)&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;marker_id&quot;</span>          <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg marker_id)&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;reference_frame&quot;</span>    <span class=\"attr\">value</span>=<span class=\"string\">&quot;camera_color_frame&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;camera_frame&quot;</span>       <span class=\"attr\">value</span>=<span class=\"string\">&quot;camera_color_frame&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;marker_frame&quot;</span>       <span class=\"attr\">value</span>=<span class=\"string\">&quot;camera_marker&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">node</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 3. start the robot --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">include</span> <span class=\"attr\">file</span>=<span class=\"string\">&quot;$(find aubo_i5_moveit_config)/launch/moveit_planning_execution.launch&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">include</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 4. start easy_handeye --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">include</span> <span class=\"attr\">file</span>=<span class=\"string\">&quot;$(find easy_handeye)/launch/calibrate.launch&quot;</span> &gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;namespace_prefix&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg namespace_prefix)&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- true：相机安装在机械臂末端 false: 相机安装在机械臂外--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;eye_on_hand&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;true&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- tracking_base_frame 为相机坐标系 camera_color_frame --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;tracking_base_frame&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;camera_color_frame&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;tracking_marker_frame&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;camera_marker&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- robot_base_frame 为机器人基座坐标系 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_base_frame&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;base_link&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- robot_effector_frame 为工具坐标系，即：与相机相连的关节名称 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_effector_frame&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;wrist3_Link&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;freehand_robot_movement&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;false&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_velocity_scaling&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;0.5&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_acceleration_scaling&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;0.2&quot;</span> /&gt;</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;move_group&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;manipulator_i5&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">include</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"7-1-2启动-launch-文件，开始标定\"><a href=\"#7-1-2启动-launch-文件，开始标定\" class=\"headerlink\" title=\"7.1.2启动 launch 文件，开始标定\"></a>7.1.2启动 launch 文件，开始标定</h4><p>启动 launch 文件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">roslaunch easy_handeye eye_to_hand_calibration.launch</span><br></pre></td></tr></table></figure>\n\n<p>成功运行后，会同时打开三个界面：</p>\n<img src=\"https://i.loli.net/2021/05/28/4Xmzb3hFrnd5R7c.jpg\" alt=\"界面1\" style=\"zoom:50%;\" />\n\n<img src=\"https://i.loli.net/2021/05/28/Av7F6K9Gu8pfZs3.jpg\"  alt=\"界面2\" style=\"zoom: 67%;\" />\n\n<p><img src=\"https://i.loli.net/2021/05/28/2ydewHu76InBqfs.jpg\" alt=\"界面3\"></p>\n<p>在界面 2 中，点击菜单栏(菜单栏在屏幕左上角)的 Plugins -&gt; Visulization -&gt; Image View，选择 &#x2F;aruco_tracker&#x2F;result 话题，界面会如下所示：</p>\n<img src=\"https://i.loli.net/2021/05/28/YTKPw46HouZGpk9.jpg\" style=\"zoom: 50%;\" />\n\n<h4 id=\"7-1-3标定步骤\"><a href=\"#7-1-3标定步骤\" class=\"headerlink\" title=\"7.1.3标定步骤\"></a>7.1.3标定步骤</h4><ol>\n<li>手动调节机械臂，使 aruco 二维码移动至相机视野中心处附近，作为 home config。在界面 3 中，点击 check starting pose，若检查成功，界面会出现： 0&#x2F;17，ready to start</li>\n<li>界面 3 中依次点击 Next Pose，Plan，Execute，机械臂会移动至新的位置，若二维码在相机视野范围内，且能检测成功，则进行下一步</li>\n<li>界面 2 中点击 Take Sample，若 Samples 对话框中出现有效信息，说明第一个点标定成功</li>\n<li>重复执行步骤 2 和步骤 3，直至 17 个点全部标定完毕</li>\n<li>界面 2 中点击 Compute，则 Result 对话框中会出现结果</li>\n<li>界面 2 中 Save，会将结果保存为一个 YAML 文件，路径为 <code>~/.ros/easy_handeye</code></li>\n</ol>\n<p><img src=\"https://i.loli.net/2021/05/28/gV9AWphbyU5mFlP.jpg\"></p>\n<h3 id=\"7-2眼在手外-eye-to-hand标定方法\"><a href=\"#7-2眼在手外-eye-to-hand标定方法\" class=\"headerlink\" title=\"7.2眼在手外 eye-to-hand标定方法\"></a>7.2眼在手外 eye-to-hand标定方法</h3><p>方法与“眼在手上”基本相同，需要修改一下 launch 文件，注意两个 launch 文件不要重名。</p>\n<p>唯一修改的地方是 easy_handeye 功能包 calibrate.launch 文件中 “eye_on_hand” 参数改成 true，如下所示</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 将 launch 文件拷贝到 easy_handeye 功能包的 launch 目录中，顺便改个名字</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> ~/catkin_ws/src/easy_handeye/docs/example_launch</span><br><span class=\"line\"><span class=\"built_in\">cp</span> ur5_kinect_calibration.launch ~/catkin_ws/src/easy_handeye/easy_handeye/launch/eye_to_hand_calibration.launch</span><br><span class=\"line\">gedit  ~/catkin_ws/src/easy_handeye/easy_handeye/launch/eye_to_hand_calibration.launch</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"8-将标定结果发送至TF树\"><a href=\"#8-将标定结果发送至TF树\" class=\"headerlink\" title=\"8.将标定结果发送至TF树\"></a>8.将标定结果发送至TF树</h2><p>easy_handeye 功能包提供了 publish.launch 文件，可以将标定好的 TF 发布出去</p>\n<h3 id=\"8-1眼在手上eye-in-hand\"><a href=\"#8-1眼在手上eye-in-hand\" class=\"headerlink\" title=\"8.1眼在手上eye-in-hand\"></a>8.1眼在手上eye-in-hand</h3><p>修改publish.launch 文件,要修改 “namespace_prefix” 参数，与眼在手上标定 launch 文件中的 “namespace_prefix” 一致，这样才能找到标定好的 YAML 文件</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">launch</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;eye_on_hand&quot;</span> <span class=\"attr\">doc</span>=<span class=\"string\">&quot;eye-on-hand instead of eye-on-base&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;true&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;namespace_prefix&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;ur5_realsense_handeyecalibration&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">if</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;namespace&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg namespace_prefix)_eye_on_hand&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">unless</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;namespace&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg namespace_prefix)_eye_on_base&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--it is possible to override the link names saved in the yaml file in case of name clashes, for example--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">if</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_effector_frame&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">unless</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_base_frame&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;tracking_base_frame&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;inverse&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;false&quot;</span> /&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">&lt;!--publish hand-eye calibration--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">group</span> <span class=\"attr\">ns</span>=<span class=\"string\">&quot;$(arg namespace)&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;eye_on_hand&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">unless</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_base_frame&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg robot_base_frame)&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">if</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_effector_frame&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg robot_effector_frame)&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;tracking_base_frame&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg tracking_base_frame)&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;inverse&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg inverse)&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">node</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;$(anon handeye_publisher)&quot;</span> <span class=\"attr\">pkg</span>=<span class=\"string\">&quot;easy_handeye&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;publish.py&quot;</span> <span class=\"attr\">output</span>=<span class=\"string\">&quot;screen&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">group</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"8-2眼在手外-eye-to-hand\"><a href=\"#8-2眼在手外-eye-to-hand\" class=\"headerlink\" title=\"8.2眼在手外 eye-to-hand\"></a>8.2眼在手外 eye-to-hand</h3><p>修改 “namespace_prefix” 外（同上），还要将 “eye_on_hand” 参数设为false</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">launch</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;eye_on_hand&quot;</span> <span class=\"attr\">doc</span>=<span class=\"string\">&quot;eye-on-hand instead of eye-on-base&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;false&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;namespace_prefix&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;ur5_realsense_handeyecalibration&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">if</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;namespace&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg namespace_prefix)_eye_on_hand&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">unless</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;namespace&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg namespace_prefix)_eye_on_base&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--it is possible to override the link names saved in the yaml file in case of name clashes, for example--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">if</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_effector_frame&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">unless</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_base_frame&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;tracking_base_frame&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;inverse&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;false&quot;</span> /&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">&lt;!--publish hand-eye calibration--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">group</span> <span class=\"attr\">ns</span>=<span class=\"string\">&quot;$(arg namespace)&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;eye_on_hand&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">unless</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_base_frame&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg robot_base_frame)&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">if</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_effector_frame&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg robot_effector_frame)&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;tracking_base_frame&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg tracking_base_frame)&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;inverse&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg inverse)&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">node</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;$(anon handeye_publisher)&quot;</span> <span class=\"attr\">pkg</span>=<span class=\"string\">&quot;easy_handeye&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;publish.py&quot;</span> <span class=\"attr\">output</span>=<span class=\"string\">&quot;screen&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">group</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"9-测试\"><a href=\"#9-测试\" class=\"headerlink\" title=\"9.测试\"></a>9.测试</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 开启 publish.luanch 文件，以眼在手上为例</span></span><br><span class=\"line\">roslaunch easy_handeye publish.launch</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看 TF（改成自己的工具坐标系与相机坐标系）</span></span><br><span class=\"line\">rosrun tf tf_echo /tool0_controller /camera_color_frame</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://i.loli.net/2021/05/28/BgCzvN85MxAsUJV.jpg\"></p>\n<p>注意：这里四元数的顺序是 [qx, qy, qz, qw]</p>\n<script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kity@2.0.4/dist/kity.min.js\"></script><script type=\"text&#x2F;javascript\" src=\"https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js\"></script><script defer=\"true\" type=\"text&#x2F;javascript\" src=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js\"></script><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css\">","more":"<h2 id=\"1-安装AUBOi5的Moveit功能包\"><a href=\"#1-安装AUBOi5的Moveit功能包\" class=\"headerlink\" title=\"1.安装AUBOi5的Moveit功能包\"></a>1.安装AUBOi5的Moveit功能包</h2><h3 id=\"1-1环境配置\"><a href=\"#1-1环境配置\" class=\"headerlink\" title=\"1.1环境配置\"></a>1.1环境配置</h3><p>下载Move-it package</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install ros-kinetic-moveit</span><br></pre></td></tr></table></figure>\n\n<p>下载moveit_visual_tools</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install ros-kinetic-moveit-visual-tools</span><br></pre></td></tr></table></figure>\n\n<p>下载industrial_core package</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install ros-kinetic-industrial-core</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-2建立ROS工作空间\"><a href=\"#1-2建立ROS工作空间\" class=\"headerlink\" title=\"1.2建立ROS工作空间\"></a>1.2建立ROS工作空间</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">source</span> /opt/ros/kinetic/setup.bash</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># catkin_ws为工作空间名称</span></span><br><span class=\"line\"><span class=\"built_in\">mkdir</span> -p ~/catkin_ws/src</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ~/catkin_ws/</span><br><span class=\"line\">catkin_make</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-2-在-catkin-ws-src-目录中下载Moveit功能包，并编译\"><a href=\"#1-2-在-catkin-ws-src-目录中下载Moveit功能包，并编译\" class=\"headerlink\" title=\"1.2 在  ~&#x2F;catkin_ws&#x2F;src  目录中下载Moveit功能包，并编译\"></a>1.2 在  ~&#x2F;catkin_ws&#x2F;src  目录中下载Moveit功能包，并编译</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~/catkin_ws/src</span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/lg609/aubo_robot.git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ~/catkin_ws/</span><br><span class=\"line\">catkin_make</span><br><span class=\"line\"><span class=\"built_in\">source</span> ~/catkin_ws/devel/setup.bash</span><br></pre></td></tr></table></figure>\n\n<p>注释：如果提示下列错误，则说明在安装Ros的时候没有安装Ros-moveit功能包：</p>\n<p><img src=\"https://i.loli.net/2021/05/28/jShBMoz9apcKVXE.png\"></p>\n<p>解决办法：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install ros-kinetic-moveit*</span><br></pre></td></tr></table></figure>\n\n<p>注：参考网址：<a href=\"https://github.com/tahsinkose/hector-moveit/issues/4\">点我查看</a></p>\n<h2 id=\"2-安装Realsense-D435相机驱动与功能包\"><a href=\"#2-安装Realsense-D435相机驱动与功能包\" class=\"headerlink\" title=\"2.安装Realsense D435相机驱动与功能包\"></a>2.安装Realsense D435相机驱动与功能包</h2><h3 id=\"2-1驱动安装\"><a href=\"#2-1驱动安装\" class=\"headerlink\" title=\"2.1驱动安装\"></a>2.1驱动安装</h3><p>官方安装教程：<a href=\"https://github.com/IntelRealSense/librealsense/blob/master/doc/distribution_linux.md\">点我查看</a></p>\n<p>参考教程：<a href=\"https://zhuanlan.zhihu.com/p/93127918\">点我查看</a></p>\n<p>注册公匙：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-key adv --keyserver keys.gnupg.net --recv-key F6E65AC044F831AC80A06380C8B3A55A6F3EFCDE || sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-key F6E65AC044F831AC80A06380C8B3A55A6F3EFCDE</span><br></pre></td></tr></table></figure>\n\n<p>添加服务器至存储列表：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo add-apt-repository <span class=\"string\">&quot;deb https://librealsense.intel.com/Debian/apt-repo xenial main&quot;</span> -u</span><br></pre></td></tr></table></figure>\n\n<p>安装所需库：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install librealsense2-dkms</span><br><span class=\"line\">sudo apt-get install librealsense2-utils</span><br></pre></td></tr></table></figure>\n\n<p>安装功能包：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install librealsense2-dev</span><br><span class=\"line\">sudo apt-get install librealsense2-dbg</span><br></pre></td></tr></table></figure>\n\n<p>启动连接界面，进行测试，若可以看到相机图像则证明驱动安装成功：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">realsense-viewer</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-2功能包安装\"><a href=\"#2-2功能包安装\" class=\"headerlink\" title=\"2.2功能包安装\"></a>2.2功能包安装</h3><p>创建工作空间：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> -p ~/catkin_ws/src &amp;&amp; <span class=\"built_in\">cd</span> ~/catkin_ws/src</span><br></pre></td></tr></table></figure>\n\n<p>下载源码，并检查依赖:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> -b 2.2.7 https://github.com/IntelRealSense/realsense-ros.git </span><br><span class=\"line\"><span class=\"built_in\">cd</span> realsense-ros/realsense2_camera git checkout `git tag | <span class=\"built_in\">sort</span> -V | grep -P <span class=\"string\">&quot;^\\d+\\.\\d+\\.\\d+&quot;</span> | <span class=\"built_in\">tail</span> -1`</span><br><span class=\"line\">sudo apt-get install ros-kinetic-ddynamic-reconfigure</span><br></pre></td></tr></table></figure>\n\n<p>编译：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~/catkin_ws</span><br><span class=\"line\">catkin_make -DCATKIN_ENABLE_TESTING=False -DCMAKE_BUILD_TYPE=Release </span><br><span class=\"line\">catkin_make install </span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;source ~/catkin_ws/devel/setup.bash&quot;</span> &gt;&gt; ~/.bashrc </span><br><span class=\"line\"><span class=\"built_in\">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure>\n\n<p>测试，启动相机节点：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">roslaunch realsense2_camera rs_camera.launch</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看发布的话题</span></span><br><span class=\"line\">rostopic list</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-安装ros-kinetic-visp依赖包\"><a href=\"#3-安装ros-kinetic-visp依赖包\" class=\"headerlink\" title=\"3.安装ros-kinetic-visp依赖包\"></a>3.安装ros-kinetic-visp依赖包</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install ros-kinetic-visp</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-安装aruco-ros二维码检测功能包\"><a href=\"#4-安装aruco-ros二维码检测功能包\" class=\"headerlink\" title=\"4.安装aruco_ros二维码检测功能包\"></a>4.安装aruco_ros二维码检测功能包</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~/catkin_ws/src</span><br><span class=\"line\">git <span class=\"built_in\">clone</span> -b kinetic-devel https://github.com/pal-robotics/aruco_ros.git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ..</span><br><span class=\"line\">catkin_make</span><br><span class=\"line\"><span class=\"built_in\">source</span> ~/catkin_ws/devel/setup.bash</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-安装visp-hand2eye-calibration\"><a href=\"#5-安装visp-hand2eye-calibration\" class=\"headerlink\" title=\"5.安装visp_hand2eye_calibration\"></a>5.安装visp_hand2eye_calibration</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~/catkin_ws/src</span><br><span class=\"line\">git <span class=\"built_in\">clone</span> -b kinetic-devel https://github.com/lagadic/vision_visp.git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ..</span><br><span class=\"line\">catkin_make --pkg visp_hand2eye_calibration</span><br><span class=\"line\"><span class=\"built_in\">source</span> ~/catkin_ws/devel/setup.bash</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6-安装easy-handeye手眼标定功能包\"><a href=\"#6-安装easy-handeye手眼标定功能包\" class=\"headerlink\" title=\"6.安装easy_handeye手眼标定功能包\"></a>6.安装easy_handeye手眼标定功能包</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~/catkin_ws/src</span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/IFL-CAMP/easy_handeye</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ..</span><br><span class=\"line\">catkin_make</span><br><span class=\"line\"><span class=\"built_in\">source</span> ~/catkin_ws/devel/setup.bash</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"7-标定方法\"><a href=\"#7-标定方法\" class=\"headerlink\" title=\"7.标定方法\"></a>7.标定方法</h2><h3 id=\"7-1眼在手上-eye-in-hand标定方法\"><a href=\"#7-1眼在手上-eye-in-hand标定方法\" class=\"headerlink\" title=\"7.1眼在手上 eye-in-hand标定方法\"></a>7.1眼在手上 eye-in-hand标定方法</h3><h4 id=\"7-1-1修改launch文件\"><a href=\"#7-1-1修改launch文件\" class=\"headerlink\" title=\"7.1.1修改launch文件\"></a>7.1.1修改launch文件</h4><p>标定过程需启动 ur5 机械臂的相关节点，realsense 节点，aruco 节点，easy_handeye 节点，可以写一个 launch 文件同时启动上述节点，也可以分别启动。easy_handeye 包中给出了用一个 launch 文件实现的示例，在如下的目录中：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~/catkin_ws/src/easy_handeye/docs/example_launch/ur5_kinect_calibration.launch</span><br></pre></td></tr></table></figure>\n\n<p>我们可以在此基础上进行修改。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 将 launch 文件拷贝到 easy_handeye 功能包的 launch 目录中，顺便改个名字</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> ~/catkin_ws/src/easy_handeye/docs/example_launch</span><br><span class=\"line\"><span class=\"built_in\">cp</span> ur5_kinect_calibration.launch ~/catkin_ws/src/easy_handeye/easy_handeye/launch/eye_in_hand_calibration.launch</span><br><span class=\"line\">gedit  ~/catkin_ws/src/easy_handeye/easy_handeye/launch/eye_in_hand_calibration.launch</span><br></pre></td></tr></table></figure>\n\n<p>修改 launch 文件如下：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">launch</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;namespace_prefix&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;aubo_i5_kinect_handeyecalibration&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- 169.254.3.20为AUBOi5机械臂的IP地址,根据实际情况修改 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_ip&quot;</span> <span class=\"attr\">doc</span>=<span class=\"string\">&quot;The IP address of the UR5 robot&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;169.254.3.20&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;marker_size&quot;</span> <span class=\"attr\">doc</span>=<span class=\"string\">&quot;Size of the ArUco marker used, in meters&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;0.1&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;marker_id&quot;</span> <span class=\"attr\">doc</span>=<span class=\"string\">&quot;The ID of the ArUco marker used&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;100&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 1. start the Realsense435 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">include</span> <span class=\"attr\">file</span>=<span class=\"string\">&quot;$(find realsense2_camera)/launch/rs_camera.launch&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 2. start ArUco --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">node</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;aruco_tracker&quot;</span> <span class=\"attr\">pkg</span>=<span class=\"string\">&quot;aruco_ros&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;single&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">remap</span> <span class=\"attr\">from</span>=<span class=\"string\">&quot;/camera_info&quot;</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/camera/color/camera_info&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">remap</span> <span class=\"attr\">from</span>=<span class=\"string\">&quot;/image&quot;</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/camera/color/image_raw&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;image_is_rectified&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;true&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;marker_size&quot;</span>        <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg marker_size)&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;marker_id&quot;</span>          <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg marker_id)&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;reference_frame&quot;</span>    <span class=\"attr\">value</span>=<span class=\"string\">&quot;camera_color_frame&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;camera_frame&quot;</span>       <span class=\"attr\">value</span>=<span class=\"string\">&quot;camera_color_frame&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;marker_frame&quot;</span>       <span class=\"attr\">value</span>=<span class=\"string\">&quot;camera_marker&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">node</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 3. start the robot --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">include</span> <span class=\"attr\">file</span>=<span class=\"string\">&quot;$(find aubo_i5_moveit_config)/launch/moveit_planning_execution.launch&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">include</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 4. start easy_handeye --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">include</span> <span class=\"attr\">file</span>=<span class=\"string\">&quot;$(find easy_handeye)/launch/calibrate.launch&quot;</span> &gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;namespace_prefix&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg namespace_prefix)&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- true：相机安装在机械臂末端 false: 相机安装在机械臂外--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;eye_on_hand&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;true&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- tracking_base_frame 为相机坐标系 camera_color_frame --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;tracking_base_frame&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;camera_color_frame&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;tracking_marker_frame&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;camera_marker&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- robot_base_frame 为机器人基座坐标系 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_base_frame&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;base_link&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- robot_effector_frame 为工具坐标系，即：与相机相连的关节名称 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_effector_frame&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;wrist3_Link&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;freehand_robot_movement&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;false&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_velocity_scaling&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;0.5&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_acceleration_scaling&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;0.2&quot;</span> /&gt;</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;move_group&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;manipulator_i5&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">include</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"7-1-2启动-launch-文件，开始标定\"><a href=\"#7-1-2启动-launch-文件，开始标定\" class=\"headerlink\" title=\"7.1.2启动 launch 文件，开始标定\"></a>7.1.2启动 launch 文件，开始标定</h4><p>启动 launch 文件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">roslaunch easy_handeye eye_to_hand_calibration.launch</span><br></pre></td></tr></table></figure>\n\n<p>成功运行后，会同时打开三个界面：</p>\n<img src=\"https://i.loli.net/2021/05/28/4Xmzb3hFrnd5R7c.jpg\" alt=\"界面1\" style=\"zoom:50%;\" />\n\n<img src=\"https://i.loli.net/2021/05/28/Av7F6K9Gu8pfZs3.jpg\"  alt=\"界面2\" style=\"zoom: 67%;\" />\n\n<p><img src=\"https://i.loli.net/2021/05/28/2ydewHu76InBqfs.jpg\" alt=\"界面3\"></p>\n<p>在界面 2 中，点击菜单栏(菜单栏在屏幕左上角)的 Plugins -&gt; Visulization -&gt; Image View，选择 &#x2F;aruco_tracker&#x2F;result 话题，界面会如下所示：</p>\n<img src=\"https://i.loli.net/2021/05/28/YTKPw46HouZGpk9.jpg\" style=\"zoom: 50%;\" />\n\n<h4 id=\"7-1-3标定步骤\"><a href=\"#7-1-3标定步骤\" class=\"headerlink\" title=\"7.1.3标定步骤\"></a>7.1.3标定步骤</h4><ol>\n<li>手动调节机械臂，使 aruco 二维码移动至相机视野中心处附近，作为 home config。在界面 3 中，点击 check starting pose，若检查成功，界面会出现： 0&#x2F;17，ready to start</li>\n<li>界面 3 中依次点击 Next Pose，Plan，Execute，机械臂会移动至新的位置，若二维码在相机视野范围内，且能检测成功，则进行下一步</li>\n<li>界面 2 中点击 Take Sample，若 Samples 对话框中出现有效信息，说明第一个点标定成功</li>\n<li>重复执行步骤 2 和步骤 3，直至 17 个点全部标定完毕</li>\n<li>界面 2 中点击 Compute，则 Result 对话框中会出现结果</li>\n<li>界面 2 中 Save，会将结果保存为一个 YAML 文件，路径为 <code>~/.ros/easy_handeye</code></li>\n</ol>\n<p><img src=\"https://i.loli.net/2021/05/28/gV9AWphbyU5mFlP.jpg\"></p>\n<h3 id=\"7-2眼在手外-eye-to-hand标定方法\"><a href=\"#7-2眼在手外-eye-to-hand标定方法\" class=\"headerlink\" title=\"7.2眼在手外 eye-to-hand标定方法\"></a>7.2眼在手外 eye-to-hand标定方法</h3><p>方法与“眼在手上”基本相同，需要修改一下 launch 文件，注意两个 launch 文件不要重名。</p>\n<p>唯一修改的地方是 easy_handeye 功能包 calibrate.launch 文件中 “eye_on_hand” 参数改成 true，如下所示</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 将 launch 文件拷贝到 easy_handeye 功能包的 launch 目录中，顺便改个名字</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> ~/catkin_ws/src/easy_handeye/docs/example_launch</span><br><span class=\"line\"><span class=\"built_in\">cp</span> ur5_kinect_calibration.launch ~/catkin_ws/src/easy_handeye/easy_handeye/launch/eye_to_hand_calibration.launch</span><br><span class=\"line\">gedit  ~/catkin_ws/src/easy_handeye/easy_handeye/launch/eye_to_hand_calibration.launch</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"8-将标定结果发送至TF树\"><a href=\"#8-将标定结果发送至TF树\" class=\"headerlink\" title=\"8.将标定结果发送至TF树\"></a>8.将标定结果发送至TF树</h2><p>easy_handeye 功能包提供了 publish.launch 文件，可以将标定好的 TF 发布出去</p>\n<h3 id=\"8-1眼在手上eye-in-hand\"><a href=\"#8-1眼在手上eye-in-hand\" class=\"headerlink\" title=\"8.1眼在手上eye-in-hand\"></a>8.1眼在手上eye-in-hand</h3><p>修改publish.launch 文件,要修改 “namespace_prefix” 参数，与眼在手上标定 launch 文件中的 “namespace_prefix” 一致，这样才能找到标定好的 YAML 文件</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">launch</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;eye_on_hand&quot;</span> <span class=\"attr\">doc</span>=<span class=\"string\">&quot;eye-on-hand instead of eye-on-base&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;true&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;namespace_prefix&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;ur5_realsense_handeyecalibration&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">if</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;namespace&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg namespace_prefix)_eye_on_hand&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">unless</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;namespace&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg namespace_prefix)_eye_on_base&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--it is possible to override the link names saved in the yaml file in case of name clashes, for example--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">if</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_effector_frame&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">unless</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_base_frame&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;tracking_base_frame&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;inverse&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;false&quot;</span> /&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">&lt;!--publish hand-eye calibration--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">group</span> <span class=\"attr\">ns</span>=<span class=\"string\">&quot;$(arg namespace)&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;eye_on_hand&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">unless</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_base_frame&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg robot_base_frame)&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">if</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_effector_frame&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg robot_effector_frame)&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;tracking_base_frame&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg tracking_base_frame)&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;inverse&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg inverse)&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">node</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;$(anon handeye_publisher)&quot;</span> <span class=\"attr\">pkg</span>=<span class=\"string\">&quot;easy_handeye&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;publish.py&quot;</span> <span class=\"attr\">output</span>=<span class=\"string\">&quot;screen&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">group</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"8-2眼在手外-eye-to-hand\"><a href=\"#8-2眼在手外-eye-to-hand\" class=\"headerlink\" title=\"8.2眼在手外 eye-to-hand\"></a>8.2眼在手外 eye-to-hand</h3><p>修改 “namespace_prefix” 外（同上），还要将 “eye_on_hand” 参数设为false</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">launch</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;eye_on_hand&quot;</span> <span class=\"attr\">doc</span>=<span class=\"string\">&quot;eye-on-hand instead of eye-on-base&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;false&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;namespace_prefix&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;ur5_realsense_handeyecalibration&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">if</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;namespace&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg namespace_prefix)_eye_on_hand&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">unless</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;namespace&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg namespace_prefix)_eye_on_base&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--it is possible to override the link names saved in the yaml file in case of name clashes, for example--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">if</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_effector_frame&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">unless</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_base_frame&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;tracking_base_frame&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">arg</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;inverse&quot;</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;false&quot;</span> /&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">&lt;!--publish hand-eye calibration--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">group</span> <span class=\"attr\">ns</span>=<span class=\"string\">&quot;$(arg namespace)&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;eye_on_hand&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">unless</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_base_frame&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg robot_base_frame)&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">if</span>=<span class=\"string\">&quot;$(arg eye_on_hand)&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;robot_effector_frame&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg robot_effector_frame)&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;tracking_base_frame&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg tracking_base_frame)&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;inverse&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$(arg inverse)&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">node</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;$(anon handeye_publisher)&quot;</span> <span class=\"attr\">pkg</span>=<span class=\"string\">&quot;easy_handeye&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;publish.py&quot;</span> <span class=\"attr\">output</span>=<span class=\"string\">&quot;screen&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">group</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"9-测试\"><a href=\"#9-测试\" class=\"headerlink\" title=\"9.测试\"></a>9.测试</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 开启 publish.luanch 文件，以眼在手上为例</span></span><br><span class=\"line\">roslaunch easy_handeye publish.launch</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看 TF（改成自己的工具坐标系与相机坐标系）</span></span><br><span class=\"line\">rosrun tf tf_echo /tool0_controller /camera_color_frame</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://i.loli.net/2021/05/28/BgCzvN85MxAsUJV.jpg\"></p>\n<p>注意：这里四元数的顺序是 [qx, qy, qz, qw]</p>\n","categories":[{"name":"机器人","path":"api/categories/机器人.json"}],"tags":[{"name":"手眼标定","path":"api/tags/手眼标定.json"},{"name":"AUBOi5","path":"api/tags/AUBOi5.json"},{"name":"Realsense","path":"api/tags/Realsense.json"}]}