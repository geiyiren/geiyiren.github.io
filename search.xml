<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>C++å¼•ç”¨è®¡æ•°</title>
      <link href="/2025/06/21/c-yin-yong-ji-shu/"/>
      <url>/2025/06/21/c-yin-yong-ji-shu/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.cnblogs.com/QG-whz/p/4777312.html">https://www.cnblogs.com/QG-whz/p/4777312.html</a></p>]]></content>
      
      
      <categories>
          
          <category> å¼•ç”¨è®¡æ•° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¼•ç”¨è®¡æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linuxè‡ªåŠ¨å‘é€é‚®ä»¶</title>
      <link href="/2025/06/21/linux-zi-dong-fa-song-you-jian/"/>
      <url>/2025/06/21/linux-zi-dong-fa-song-you-jian/</url>
      
        <content type="html"><![CDATA[<h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>apt update<br>apt install msmtp msmtp-mta</p><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><pre class="line-numbers language-none"><code class="language-none">defaultsauth           ontls            ontls_starttls   offtls_trust_file &#x2F;etc&#x2F;ssl&#x2F;certs&#x2F;ca-certificates.crtlogfile        ~&#x2F;.msmtp.logaccount workhost           smtp.exmail.qq.comport           465from           shuaiyang.wang@hopechart.comuser           shuaiyang.wang@hopechart.compassword       Wsy101728account default : work<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å‘é€é‚®ä»¶"><a href="#å‘é€é‚®ä»¶" class="headerlink" title="å‘é€é‚®ä»¶"></a>å‘é€é‚®ä»¶</h1><p>echo -e â€œSubject: Test Mail\n\nThis is the body.â€ | msmtp æ¥æ”¶è€…é‚®ç®±</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å‘é€é‚®ä»¶å‡½æ•°</span><span class="token function-name function">send_mail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token builtin class-name">local</span> <span class="token assign-left variable">recipient</span><span class="token operator">=</span><span class="token string">"<span class="token variable">$1</span>"</span>    <span class="token builtin class-name">local</span> <span class="token assign-left variable">subject</span><span class="token operator">=</span><span class="token string">"<span class="token variable">$2</span>"</span>    <span class="token builtin class-name">local</span> <span class="token assign-left variable">body</span><span class="token operator">=</span><span class="token string">"<span class="token variable">$3</span>"</span>    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">"<span class="token variable">$recipient</span>"</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">"<span class="token variable">$subject</span>"</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">"<span class="token variable">$body</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>        <span class="token builtin class-name">echo</span> <span class="token string">"[send_mail] ç¼ºå°‘å‚æ•°ã€‚ç”¨æ³•: send_mail æ”¶ä»¶äºº ä¸»é¢˜ æ­£æ–‡"</span>        <span class="token builtin class-name">return</span> <span class="token number">1</span>    <span class="token keyword">fi</span>    <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">"Subject: <span class="token variable">$subject</span><span class="token entity" title="\n">\n</span><span class="token entity" title="\n">\n</span><span class="token variable">$body</span>"</span> <span class="token operator">|</span> msmtp <span class="token parameter variable">-a</span> default <span class="token string">"<span class="token variable">$recipient</span>"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="é…ç½®è‡ªåŠ¨åŒ–ä»»åŠ¡"><a href="#é…ç½®è‡ªåŠ¨åŒ–ä»»åŠ¡" class="headerlink" title="é…ç½®è‡ªåŠ¨åŒ–ä»»åŠ¡"></a>é…ç½®è‡ªåŠ¨åŒ–ä»»åŠ¡</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span><span class="token builtin class-name">:</span> <span class="token operator">&lt;&lt;</span><span class="token string">'NOTE'è¯´æ˜: è‡ªåŠ¨åŒ–ç¨‹åºè‡ªåŠ¨åŒ–é…ç½®å¦‚ä¸‹:     crontab -e    å¢åŠ å¦‚ä¸‹å†…å®¹:    */1 * * * * /home/model_val/script/autoTest.sh >> /home/model_val/log/autoTest.txt 2>&amp;1è„šæœ¬æ‰§è¡Œé¢‘ç‡é…ç½®è¯´æ˜:â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ åˆ†é’Ÿ (0 - 59)â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å°æ—¶ (0 - 23)â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€ æ—¥ (1 - 31)â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€ æœˆ (1 - 12)â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€ æ˜ŸæœŸ (0 - 7) (0 æˆ– 7 è¡¨ç¤ºå‘¨æ—¥)â”‚ â”‚ â”‚ â”‚ â”‚â”‚ â”‚ â”‚ â”‚ â”‚* * * * * &lt;å‘½ä»¤>NOTE</span><span class="token comment"># å‘é€é‚®ä»¶å‡½æ•°</span><span class="token function-name function">send_mail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token builtin class-name">local</span> <span class="token assign-left variable">recipient</span><span class="token operator">=</span><span class="token string">"<span class="token variable">$1</span>"</span>    <span class="token builtin class-name">local</span> <span class="token assign-left variable">subject</span><span class="token operator">=</span><span class="token string">"<span class="token variable">$2</span>"</span>    <span class="token builtin class-name">local</span> <span class="token assign-left variable">body</span><span class="token operator">=</span><span class="token string">"<span class="token variable">$3</span>"</span>    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">"<span class="token variable">$recipient</span>"</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">"<span class="token variable">$subject</span>"</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">"<span class="token variable">$body</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>        <span class="token builtin class-name">echo</span> <span class="token string">"[send_mail] ç¼ºå°‘å‚æ•°ã€‚ç”¨æ³•: send_mail æ”¶ä»¶äºº ä¸»é¢˜ æ­£æ–‡"</span>        <span class="token builtin class-name">return</span> <span class="token number">1</span>    <span class="token keyword">fi</span>    <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">"Subject: <span class="token variable">$subject</span><span class="token entity" title="\n">\n</span><span class="token entity" title="\n">\n</span><span class="token variable">$body</span>"</span> <span class="token operator">|</span> msmtp <span class="token parameter variable">-a</span> default <span class="token string">"<span class="token variable">$recipient</span>"</span><span class="token punctuation">&#125;</span><span class="token comment"># æµ‹è¯•ç»“æŸåå‘é€é€šçŸ¥é‚®ä»¶</span>send_mail <span class="token string">"shuaiyang.wang@hopechart.com"</span> <span class="token string">"è‡ªåŠ¨åŒ–æµ‹è¯•ç»“æœ"</span> <span class="token string">"è¿™æ˜¯ä¸€å°æµ‹è¯•é‚®ä»¶..."</span><span class="token builtin class-name">echo</span> <span class="token string">"é‚®ä»¶å‘é€æˆåŠŸ"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> é‚®ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> è‡ªåŠ¨å‘é€ </tag>
            
            <tag> é‚®ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>32ä½ç³»ç»Ÿä¸64ä½ç³»ç»Ÿç¼–ç¨‹æ³¨æ„äº‹é¡¹</title>
      <link href="/2025/06/16/32-wei-xi-tong-yu-64-wei-xi-tong-bian-cheng-zhu-yi-shi-xiang/"/>
      <url>/2025/06/16/32-wei-xi-tong-yu-64-wei-xi-tong-bian-cheng-zhu-yi-shi-xiang/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°æ®ç±»å‹å·®å¼‚"><a href="#æ•°æ®ç±»å‹å·®å¼‚" class="headerlink" title="æ•°æ®ç±»å‹å·®å¼‚"></a>æ•°æ®ç±»å‹å·®å¼‚</h1><table><thead><tr><th>ç±»å‹</th><th>32ä½ç³»ç»Ÿ</th><th>64ä½ç³»ç»Ÿ</th></tr></thead><tbody><tr><td><code>void*</code></td><td>4 å­—èŠ‚</td><td>8 å­—èŠ‚</td></tr><tr><td><code>intptr_t</code></td><td>4 å­—èŠ‚</td><td>8 å­—èŠ‚</td></tr><tr><td><code>size_t</code></td><td>4 å­—èŠ‚</td><td>8 å­—èŠ‚</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> è·¨æ¶æ„ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 32ä½ç³»ç»Ÿ </tag>
            
            <tag> 64ä½ç³»ç»Ÿ </tag>
            
            <tag> armv7-a </tag>
            
            <tag> armv8-a </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yolov5ç»“æ„ä¸ä»£ç è§£æ</title>
      <link href="/2025/06/04/yolov5-jie-gou-yu-dai-ma-jie-xi/"/>
      <url>/2025/06/04/yolov5-jie-gou-yu-dai-ma-jie-xi/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç½‘é¡µæ¥æºï¼š<a href="https://start.oneflow.org/oneflow-yolo-doc/tutorials/01_chapter/yolov5_network_structure_analysis.html">https://start.oneflow.org/oneflow-yolo-doc/tutorials/01_chapter/yolov5_network_structure_analysis.html</a></p></blockquote><h1 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h1><p>YOLOv5é’ˆå¯¹ä¸åŒå¤§å°ï¼ˆn, s, m, l, xï¼‰çš„ç½‘ç»œæ•´ä½“æ¶æ„éƒ½æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡ä¼šåœ¨æ¯ä¸ªå­æ¨¡å—ä¸­é‡‡ç”¨ä¸åŒçš„æ·±åº¦å’Œå®½åº¦ï¼Œ</p><p>åˆ†åˆ«åº”å¯¹yamlæ–‡ä»¶ä¸­çš„depth_multipleå’Œwidth_multipleå‚æ•°ã€‚</p><p>è¿˜éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œå®˜æ–¹é™¤äº†n, s, m, l, xç‰ˆæœ¬å¤–è¿˜æœ‰n6, s6, m6, l6, x6ï¼ŒåŒºåˆ«åœ¨äºåè€…æ˜¯é’ˆå¯¹æ›´å¤§åˆ†è¾¨ç‡çš„å›¾ç‰‡æ¯”å¦‚1280x1280,</p><p>å½“ç„¶ç»“æ„ä¸Šä¹Ÿæœ‰äº›å·®å¼‚ï¼Œå‰è€…åªä¼šä¸‹é‡‡æ ·åˆ°32å€ä¸”é‡‡ç”¨3ä¸ªé¢„æµ‹ç‰¹å¾å±‚ , è€Œåè€…ä¼šä¸‹é‡‡æ ·64å€ï¼Œé‡‡ç”¨4ä¸ªé¢„æµ‹ç‰¹å¾å±‚ã€‚</p><p>æœ¬ç« å°†ä»¥ yolov5sä¸ºä¾‹ ï¼Œä»é…ç½®æ–‡ä»¶ models&#x2F;<a href="https://github.com/Oneflow-Inc/one-yolov5/blob/main/models/yolov5s.yaml">yolov5s.yaml</a> åˆ° models&#x2F;<a href="https://github.com/Oneflow-Inc/one-yolov5/blob/main/models/yolo.py">yolo.py</a> æºç è¿›è¡Œè§£è¯»ã€‚</p><h1 id="ç½‘ç»œç»“æ„é…ç½®æ–‡ä»¶è§£æ"><a href="#ç½‘ç»œç»“æ„é…ç½®æ–‡ä»¶è§£æ" class="headerlink" title="ç½‘ç»œç»“æ„é…ç½®æ–‡ä»¶è§£æ"></a>ç½‘ç»œç»“æ„é…ç½®æ–‡ä»¶è§£æ</h1><p>yolov5s.yamlğŸ‘‡</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">nc</span><span class="token punctuation">:</span> <span class="token number">80</span>  <span class="token comment"># number of classes æ•°æ®é›†ä¸­çš„ç±»åˆ«æ•°</span><span class="token key atrule">depth_multiple</span><span class="token punctuation">:</span> <span class="token number">0.33</span>  <span class="token comment"># model depth multiple  æ¨¡å‹å±‚æ•°å› å­(ç”¨æ¥è°ƒæ•´ç½‘ç»œçš„æ·±åº¦)</span><span class="token key atrule">width_multiple</span><span class="token punctuation">:</span> <span class="token number">0.50</span>  <span class="token comment"># layer channel multiple æ¨¡å‹é€šé“æ•°å› å­(ç”¨æ¥è°ƒæ•´ç½‘ç»œçš„å®½åº¦)</span><span class="token comment"># å¦‚ä½•ç†è§£è¿™ä¸ªdepth_multipleå’Œwidth_multipleå‘¢?</span><span class="token comment"># å®ƒå†³å®šçš„æ˜¯æ•´ä¸ªæ¨¡å‹ä¸­çš„æ·±åº¦ï¼ˆå±‚æ•°ï¼‰å’Œå®½åº¦ï¼ˆé€šé“æ•°ï¼‰,å…·ä½“æ€ä¹ˆè°ƒæ•´çš„ç»“åˆåé¢çš„backboneä»£ç è§£é‡Šã€‚</span><span class="token key atrule">anchors</span><span class="token punctuation">:</span> <span class="token comment"># è¡¨ç¤ºä½œç”¨äºå½“å‰ç‰¹å¾å›¾çš„Anchorå¤§å°ä¸º xxx</span><span class="token comment"># 9ä¸ªanchorï¼Œå…¶ä¸­Pè¡¨ç¤ºç‰¹å¾å›¾çš„å±‚çº§ï¼ŒP3/8è¯¥å±‚ç‰¹å¾å›¾ç¼©æ”¾ä¸º1/8,æ˜¯ç¬¬3å±‚ç‰¹å¾</span>  <span class="token punctuation">-</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">]</span>  <span class="token comment"># P3/8ï¼Œ è¡¨ç¤º[10,13],[16,30], [33,23]3ä¸ªanchor</span>  <span class="token punctuation">-</span> <span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">61</span><span class="token punctuation">,</span> <span class="token number">62</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span><span class="token number">119</span><span class="token punctuation">]</span>  <span class="token comment"># P4/16</span>  <span class="token punctuation">-</span> <span class="token punctuation">[</span><span class="token number">116</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">156</span><span class="token punctuation">,</span><span class="token number">198</span><span class="token punctuation">,</span> <span class="token number">373</span><span class="token punctuation">,</span><span class="token number">326</span><span class="token punctuation">]</span>  <span class="token comment"># P5/32</span><span class="token comment"># YOLOv5s v6.0 backbone</span><span class="token key atrule">backbone</span><span class="token punctuation">:</span>  <span class="token comment"># [from, number, module, args]</span>  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 0-P1/2</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 1-P2/4</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 3-P3/8</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 5-P4/16</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 7-P5/32</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> SPPF<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 9</span>  <span class="token punctuation">]</span><span class="token comment"># YOLOv5s v6.0 head</span><span class="token key atrule">head</span><span class="token punctuation">:</span>  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> nn.Upsample<span class="token punctuation">,</span> <span class="token punctuation">[</span>None<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'nearest'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Concat<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># cat backbone P4</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token boolean important">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 13</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> nn.Upsample<span class="token punctuation">,</span> <span class="token punctuation">[</span>None<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'nearest'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Concat<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># cat backbone P3</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token boolean important">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 17 (P3/8-small)</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Concat<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># cat head P4</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token boolean important">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 20 (P4/16-medium)</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Concat<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># cat head P5</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token boolean important">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 23 (P5/32-large)</span>   <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Detect<span class="token punctuation">,</span> <span class="token punctuation">[</span>nc<span class="token punctuation">,</span> anchors<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># Detect(P3, P4, P5)</span>  <span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="anchors-è§£è¯»"><a href="#anchors-è§£è¯»" class="headerlink" title="anchors è§£è¯»"></a>anchors è§£è¯»</h2><p>yolov5 åˆå§‹åŒ–äº† 9 ä¸ª anchorsï¼Œåˆ†åˆ«åœ¨ä¸‰ä¸ªç‰¹å¾å›¾ ï¼ˆfeature mapï¼‰ä¸­ä½¿ç”¨ï¼Œæ¯ä¸ª feature map çš„æ¯ä¸ª grid cell éƒ½æœ‰ä¸‰ä¸ª anchor è¿›è¡Œé¢„æµ‹ã€‚ åˆ†é…è§„åˆ™ï¼š</p><ul><li><p>å°ºåº¦è¶Šå¤§çš„ feature map è¶Šé å‰ï¼Œç›¸å¯¹åŸå›¾çš„ä¸‹é‡‡æ ·ç‡è¶Šå°ï¼Œæ„Ÿå—é‡è¶Šå°ï¼Œ æ‰€ä»¥ç›¸å¯¹å¯ä»¥é¢„æµ‹ä¸€äº›å°ºåº¦æ¯”è¾ƒå°çš„ç‰©ä½“(å°ç›®æ ‡)ï¼Œåˆ†é…åˆ°çš„ anchors è¶Šå°ã€‚</p></li><li><p>å°ºåº¦è¶Šå°çš„ feature map è¶Šé åï¼Œç›¸å¯¹åŸå›¾çš„ä¸‹é‡‡æ ·ç‡è¶Šå¤§ï¼Œæ„Ÿå—é‡è¶Šå¤§ï¼Œ æ‰€ä»¥å¯ä»¥é¢„æµ‹ä¸€äº›å°ºåº¦æ¯”è¾ƒå¤§çš„ç‰©ä½“(å¤§ç›®æ ‡)ï¼Œæ‰€ä»¥åˆ†é…åˆ°çš„ anchors è¶Šå¤§ã€‚</p></li><li><p>å³åœ¨å°ç‰¹å¾å›¾ï¼ˆfeature mapï¼‰ä¸Šæ£€æµ‹å¤§ç›®æ ‡ï¼Œä¸­ç­‰å¤§å°çš„ç‰¹å¾å›¾ä¸Šæ£€æµ‹ä¸­ç­‰ç›®æ ‡ï¼Œ åœ¨å¤§ç‰¹å¾å›¾ä¸Šæ£€æµ‹å°ç›®æ ‡ã€‚</p></li></ul><h1 id="backbone-amp-headè§£è¯»"><a href="#backbone-amp-headè§£è¯»" class="headerlink" title="backbone &amp; headè§£è¯»"></a>backbone &amp; headè§£è¯»</h1><h2 id="from-number-module-args-å‚æ•°"><a href="#from-number-module-args-å‚æ•°" class="headerlink" title="[from, number, module, args] å‚æ•°"></a>[from, number, module, args] å‚æ•°</h2><p>å››ä¸ªå‚æ•°çš„æ„ä¹‰åˆ†åˆ«æ˜¯ï¼š</p><ul><li><ol><li>ç¬¬ä¸€ä¸ªå‚æ•° from ï¼šä»å“ªä¸€å±‚è·å¾—è¾“å…¥ï¼Œ-1è¡¨ç¤ºä»ä¸Šä¸€å±‚è·å¾—ï¼Œ[-1, 6]è¡¨ç¤ºä»ä¸Šå±‚å’Œç¬¬6å±‚ä¸¤å±‚è·å¾—ã€‚</li></ol></li><li><ol start="2"><li>ç¬¬äºŒä¸ªå‚æ•° numberï¼šè¡¨ç¤ºæœ‰å‡ ä¸ªç›¸åŒçš„æ¨¡å—ï¼Œå¦‚æœä¸º9åˆ™è¡¨ç¤ºæœ‰9ä¸ªç›¸åŒçš„æ¨¡å—ã€‚</li></ol></li><li><ol start="3"><li>ç¬¬ä¸‰ä¸ªå‚æ•° moduleï¼šæ¨¡å—çš„åç§°ï¼Œè¿™äº›æ¨¡å—å†™åœ¨common.pyä¸­ã€‚ 4. ç¬¬å››ä¸ªå‚æ•° argsï¼šç±»çš„åˆå§‹åŒ–å‚æ•°ï¼Œç”¨äºè§£æä½œä¸º moudle çš„ä¼ å…¥å‚æ•°ã€‚</li></ol></li></ul><p>ä¸‹é¢ä»¥ç¬¬ä¸€ä¸ªæ¨¡å—Conv ä¸ºä¾‹ä»‹ç»ä¸‹common.pyä¸­çš„æ¨¡å—</p><p>Conv æ¨¡å—å®šä¹‰å¦‚ä¸‹:</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Conv</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># Standard convolution</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> c1<span class="token punctuation">,</span> c2<span class="token punctuation">,</span> k<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> s<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> p<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> g<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> act<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># ch_in, ch_out, kernel, stride, padding, groups</span>        <span class="token triple-quoted-string string">"""        @Pargm c1: è¾“å…¥é€šé“æ•°        @Pargm c2: è¾“å‡ºé€šé“æ•°        @Pargm k : å·ç§¯æ ¸å¤§å°(kernel_size)        @Pargm s : å·ç§¯æ­¥é•¿ (stride)        @Pargm p : ç‰¹å¾å›¾å¡«å……å®½åº¦ (padding)        @Pargm g : æ§åˆ¶åˆ†ç»„ï¼Œå¿…é¡»æ•´é™¤è¾“å…¥çš„é€šé“æ•°(ä¿è¯è¾“å…¥çš„é€šé“èƒ½è¢«æ­£ç¡®åˆ†ç»„)        """</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># https://oneflow.readthedocs.io/en/master/generated/oneflow.nn.Conv2d.html?highlight=Conv</span>        self<span class="token punctuation">.</span>conv <span class="token operator">=</span> nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span>c1<span class="token punctuation">,</span> c2<span class="token punctuation">,</span> k<span class="token punctuation">,</span> s<span class="token punctuation">,</span> autopad<span class="token punctuation">(</span>k<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">,</span> groups<span class="token operator">=</span>g<span class="token punctuation">,</span> bias<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>bn <span class="token operator">=</span> nn<span class="token punctuation">.</span>BatchNorm2d<span class="token punctuation">(</span>c2<span class="token punctuation">)</span>        <span class="token comment"># æ¿€æ´»å‡½æ•°é»˜è®¤ä¸ºnn.ReLUï¼Œä¹Ÿå¯ä¸ºå…¶ä»–nn.Moduleä¸­çš„æ¿€æ´»å‡½æ•°æˆ–ä¸ºç©º</span>        self<span class="token punctuation">.</span>act <span class="token operator">=</span> nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">if</span> act <span class="token keyword">is</span> <span class="token boolean">True</span> <span class="token keyword">else</span> <span class="token punctuation">(</span>act <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>act<span class="token punctuation">,</span> nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span> <span class="token keyword">else</span> nn<span class="token punctuation">.</span>Identity<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>act<span class="token punctuation">(</span>self<span class="token punctuation">.</span>bn<span class="token punctuation">(</span>self<span class="token punctuation">.</span>conv<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward_fuse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>act<span class="token punctuation">(</span>self<span class="token punctuation">.</span>conv<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å·ç§¯å±‚çš„è¿‡ç¨‹ä¸º:è¾“å…¥-&gt;å·ç§¯å±‚-&gt;å½’ä¸€åŒ–å±‚-&gt;æ¿€æ´»å±‚-&gt;è¾“å‡º</p><h2 id="å…³äºè°ƒæ•´ç½‘ç»œå¤§å°çš„è¯¦è§£è¯´æ˜"><a href="#å…³äºè°ƒæ•´ç½‘ç»œå¤§å°çš„è¯¦è§£è¯´æ˜" class="headerlink" title="å…³äºè°ƒæ•´ç½‘ç»œå¤§å°çš„è¯¦è§£è¯´æ˜"></a>å…³äºè°ƒæ•´ç½‘ç»œå¤§å°çš„è¯¦è§£è¯´æ˜</h2><p>åœ¨<a href="https://github.com/Oneflow-Inc/one-yolov5/blob/main/models/yolo.py">yolo.py</a>çš„ 286 è¡Œæœ‰å¯¹yaml æ–‡ä»¶çš„nc,depth_multipleç­‰å‚æ•°è¯»å–ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹:</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">anchors<span class="token punctuation">,</span> nc<span class="token punctuation">,</span> gd<span class="token punctuation">,</span> gw <span class="token operator">=</span> d<span class="token punctuation">[</span><span class="token string">'anchors'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">[</span><span class="token string">'nc'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">[</span><span class="token string">'depth_multiple'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">[</span><span class="token string">'width_multiple'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"activation"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>å¦‚æœæŠŠwidth_multipleè®¾ç½®ä¸ºäº†0.5ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ª [64, 6, 2, 2] å°±ä¼šè¢«è§£æä¸º [3,64*0.5&#x3D;32,6,2,2]ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ª 3 ä¸ºè¾“å…¥channelï¼Œ32 ä¸ºè¾“å‡ºchannelã€‚</p></blockquote><p>åœ¨<a href="https://github.com/Oneflow-Inc/one-yolov5/blob/main/models/yolo.py">yolo.py</a>çš„ 300 è¡Œæœ‰å¯¹å‚æ•°çš„å…·ä½“å®šä¹‰ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">n <span class="token operator">=</span> n_ <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span><span class="token builtin">round</span><span class="token punctuation">(</span>n <span class="token operator">*</span> gd<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">if</span> n <span class="token operator">></span> <span class="token number">1</span> <span class="token keyword">else</span> n  <span class="token comment"># depth gain æš‚ä¸”å°†è¿™æ®µä»£ç å½“ä½œå…¬å¼(1)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å…¶ä¸­ gd å°±æ˜¯depth_multipleçš„å€¼ï¼Œnçš„å€¼å°±æ˜¯backboneä¸­åˆ—è¡¨çš„ç¬¬äºŒä¸ªå‚æ•°ï¼š</p><p>å¾ˆå®¹æ˜“çœ‹å‡º gd å½±å“ n çš„å¤§å°ï¼Œä»è€Œå½±å“ç½‘ç»œçš„ç»“æ„å¤§å°ã€‚</p><p>åé¢å„å±‚ä¹‹é—´çš„æ¨¡å—æ•°é‡ã€å·ç§¯æ ¸å¤§å°å’Œæ•°é‡ç­‰ä¹Ÿéƒ½äº§ç”Ÿäº†å˜åŒ–ï¼ŒYOLOv5l ä¸ YOLOv5s ç›¸æ¯”è¾ƒèµ·æ¥è®­ç»ƒå‚æ•°çš„å¤§å°æˆå€æ•°å¢é•¿ï¼Œ</p><p>å…¶æ¨¡å‹çš„æ·±åº¦å’Œå®½åº¦ä¹Ÿä¼šå¤§å¾ˆå¤šï¼Œè¿™å°±ä½¿å¾— YOLOv5l çš„ ç²¾åº¦å€¼è¦æ¯” YOLOv5s å¥½å¾ˆå¤šï¼Œå› æ­¤åœ¨æœ€ç»ˆæ¨ç†æ—¶çš„æ£€æµ‹ç²¾åº¦é«˜ï¼Œä½†æ˜¯æ¨¡å‹çš„æ¨ç†é€Ÿåº¦æ›´æ…¢ã€‚</p><p>æ‰€ä»¥ YOLOv5 æä¾›äº†ä¸åŒçš„é€‰æ‹©ï¼Œå¦‚æœæƒ³è¦è¿½æ±‚æ¨ç†é€Ÿåº¦å¯é€‰ç”¨è¾ƒå°ä¸€äº›çš„æ¨¡å‹å¦‚ YOLOv5sã€YOLOv5mï¼Œå¦‚æœæƒ³è¦è¿½æ±‚ç²¾åº¦æ›´é«˜å¯¹æ¨ç†é€Ÿåº¦è¦æ±‚ä¸é«˜çš„å¯ä»¥é€‰æ‹©å…¶ä»–ä¸¤ä¸ªç¨å¤§çš„æ¨¡å‹ã€‚</p><p>å¦‚ä¸‹é¢è¿™å¼ å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yolov5%E7%BB%93%E6%9E%84%E4%B8%8E%E4%BB%A3%E7%A0%81%E8%A7%A3%E6%9E%90/image-1.png"></p><h2 id="Convæ¨¡å—è§£è¯»"><a href="#Convæ¨¡å—è§£è¯»" class="headerlink" title="Convæ¨¡å—è§£è¯»"></a>Convæ¨¡å—è§£è¯»</h2><h2 id="ç½‘ç»œç»“æ„é¢„è§ˆ"><a href="#ç½‘ç»œç»“æ„é¢„è§ˆ" class="headerlink" title="ç½‘ç»œç»“æ„é¢„è§ˆ"></a>ç½‘ç»œç»“æ„é¢„è§ˆ</h2><p>ä¸‹é¢æ˜¯æ ¹æ®<a href="https://github.com/Oneflow-Inc/one-yolov5/blob/main/models/yolov5s.yaml">yolov5s.yaml</a>ç»˜åˆ¶çš„ç½‘ç»œæ•´ä½“ç»“æ„ç®€åŒ–ç‰ˆã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yolov5%E7%BB%93%E6%9E%84%E4%B8%8E%E4%BB%A3%E7%A0%81%E8%A7%A3%E6%9E%90/image.png"></p><p> è¯¦ç»†ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š<br><a href="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogFile1/yolo/yolov5%E7%BB%93%E6%9E%84%E8%A7%A3%E6%9E%90.drawio">yolov5ç»“æ„è§£æ</a></p><p>ä¸‰ä¸ªåˆ†æ”¯çš„è¾“å‡º[1, 128, 80, 80],[1, 256, 40, 40],[1, 512, 20, 20] ä½œä¸ºè¾“å…¥ç»è¿‡Detectçš„forward, æ¥ç€flow.cat()å‡½æ•°æ‹¼æ¥æˆä¸ºoutput: [1, 25200, 85]ã€‚</p><p>Detectå±‚ç¬¬ä¸€ä¸ªæ“ä½œä¸ºäºŒç»´å·ç§¯ï¼Œå°†å¾—åˆ°çš„ä¸‰ä¸ªåˆ†æ”¯çš„è¾“å‡ºè½¬æ¢ä¸ºé€šé“æ•°ä¸º3x(ç±»åˆ«æ•°+5)çš„ç‰¹å¾å›¾ï¼Œç„¶åå°†ç‰¹å¾å›¾è¿›è¡Œviewå’Œé€šé“é¡ºåºå˜åŒ–å¹¶è¿›è¡Œæ¡†çš„ä½ç½®è§£æã€‚</p><h1 id="yolo-pyè§£è¯»"><a href="#yolo-pyè§£è¯»" class="headerlink" title="yolo.pyè§£è¯»"></a>yolo.pyè§£è¯»</h1><p>æ–‡ä»¶ä¸»è¦åŒ…å« ä¸‰å¤§éƒ¨åˆ† Detectç±»ï¼Œ Modelç±»ï¼Œå’Œ parse_model å‡½æ•°</p><h2 id="parse-modelå‡½æ•°è§£è¯»"><a href="#parse-modelå‡½æ•°è§£è¯»" class="headerlink" title="parse_modelå‡½æ•°è§£è¯»"></a>parse_modelå‡½æ•°è§£è¯»</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">parse_model</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> ch<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># model_dict, input_channels(3)</span>    <span class="token triple-quoted-string string">"""ç”¨åœ¨ä¸‹é¢Modelæ¨¡å—ä¸­    è§£ææ¨¡å‹æ–‡ä»¶(å­—å…¸å½¢å¼)ï¼Œå¹¶æ­å»ºç½‘ç»œç»“æ„    è¿™ä¸ªå‡½æ•°å…¶å®ä¸»è¦åšçš„å°±æ˜¯: æ›´æ–°å½“å‰å±‚çš„argsï¼ˆå‚æ•°ï¼‰,è®¡ç®—c2ï¼ˆå½“å‰å±‚çš„è¾“å‡ºchannelï¼‰ =>                          ä½¿ç”¨å½“å‰å±‚çš„å‚æ•°æ­å»ºå½“å‰å±‚ =>                          ç”Ÿæˆ layers + save    @Params d: model_dict æ¨¡å‹æ–‡ä»¶ å­—å…¸å½¢å¼ &#123;dict:7&#125;  [yolov5s.yaml](https://github.com/Oneflow-Inc/one-yolov5/blob/main/models/yolov5s.yaml)ä¸­çš„6ä¸ªå…ƒç´  + ch    #Params ch: è®°å½•æ¨¡å‹æ¯ä¸€å±‚çš„è¾“å‡ºchannel åˆå§‹ch=[3] åé¢ä¼šåˆ é™¤    @return nn.Sequential(*layers): ç½‘ç»œçš„æ¯ä¸€å±‚çš„å±‚ç»“æ„    @return sorted(save): æŠŠæ‰€æœ‰å±‚ç»“æ„ä¸­fromä¸æ˜¯-1çš„å€¼è®°ä¸‹ å¹¶æ’åº [4, 6, 10, 14, 17, 20, 23]    """</span>    LOGGER<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"n</span><span class="token interpolation"><span class="token punctuation">&#123;</span><span class="token string">''</span><span class="token punctuation">:</span><span class="token format-spec">>3</span><span class="token punctuation">&#125;</span></span><span class="token interpolation"><span class="token punctuation">&#123;</span><span class="token string">'from'</span><span class="token punctuation">:</span><span class="token format-spec">>18</span><span class="token punctuation">&#125;</span></span><span class="token interpolation"><span class="token punctuation">&#123;</span><span class="token string">'n'</span><span class="token punctuation">:</span><span class="token format-spec">>3</span><span class="token punctuation">&#125;</span></span><span class="token interpolation"><span class="token punctuation">&#123;</span><span class="token string">'params'</span><span class="token punctuation">:</span><span class="token format-spec">>10</span><span class="token punctuation">&#125;</span></span><span class="token string">  </span><span class="token interpolation"><span class="token punctuation">&#123;</span><span class="token string">'module'</span><span class="token punctuation">:</span><span class="token format-spec">&lt;40</span><span class="token punctuation">&#125;</span></span><span class="token interpolation"><span class="token punctuation">&#123;</span><span class="token string">'arguments'</span><span class="token punctuation">:</span><span class="token format-spec">&lt;30</span><span class="token punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>    <span class="token comment"># è¯»å–då­—å…¸ä¸­çš„anchorså’Œparameters(ncã€depth_multipleã€width_multiple)</span>    anchors<span class="token punctuation">,</span> nc<span class="token punctuation">,</span> gd<span class="token punctuation">,</span> gw <span class="token operator">=</span> d<span class="token punctuation">[</span><span class="token string">'anchors'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">[</span><span class="token string">'nc'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">[</span><span class="token string">'depth_multiple'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">[</span><span class="token string">'width_multiple'</span><span class="token punctuation">]</span>    <span class="token comment"># na: number of anchors æ¯ä¸€ä¸ªpredict headä¸Šçš„anchoræ•° = 3</span>    na <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>anchors<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>anchors<span class="token punctuation">,</span> <span class="token builtin">list</span><span class="token punctuation">)</span> <span class="token keyword">else</span> anchors  <span class="token comment"># number of anchors</span>    no <span class="token operator">=</span> na <span class="token operator">*</span> <span class="token punctuation">(</span>nc <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">)</span>  <span class="token comment"># number of outputs = anchors * (classes + 5) æ¯ä¸€ä¸ªpredict headå±‚çš„è¾“å‡ºchannel </span>    <span class="token comment"># å¼€å§‹æ­å»ºç½‘ç»œ</span>    <span class="token comment"># layers: ä¿å­˜æ¯ä¸€å±‚çš„å±‚ç»“æ„</span>    <span class="token comment"># save: è®°å½•ä¸‹æ‰€æœ‰å±‚ç»“æ„ä¸­fromä¸­ä¸æ˜¯-1çš„å±‚ç»“æ„åºå·</span>    <span class="token comment"># c2: ä¿å­˜å½“å‰å±‚çš„è¾“å‡ºchannel</span>    layers<span class="token punctuation">,</span> save<span class="token punctuation">,</span> c2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ch<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token comment"># layers, savelist, ch out</span>    <span class="token comment"># enumerate() å‡½æ•°ç”¨äºå°†ä¸€ä¸ªå¯éå†çš„æ•°æ®å¯¹è±¡(å¦‚åˆ—è¡¨ã€å…ƒç»„æˆ–å­—ç¬¦ä¸²)ç»„åˆä¸ºä¸€ä¸ªç´¢å¼•åºåˆ—ï¼ŒåŒæ—¶åˆ—å‡ºæ•°æ®å’Œæ•°æ®ä¸‹æ ‡ï¼Œä¸€èˆ¬ç”¨åœ¨ for å¾ªç¯å½“ä¸­ã€‚</span>    <span class="token keyword">for</span> i<span class="token punctuation">,</span> <span class="token punctuation">(</span>f<span class="token punctuation">,</span> n<span class="token punctuation">,</span> m<span class="token punctuation">,</span> args<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span><span class="token string">'backbone'</span><span class="token punctuation">]</span> <span class="token operator">+</span> d<span class="token punctuation">[</span><span class="token string">'head'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># from, number, module, args</span>        m <span class="token operator">=</span> <span class="token builtin">eval</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token keyword">else</span> m  <span class="token comment"># eval strings</span>        <span class="token keyword">for</span> j<span class="token punctuation">,</span> a <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># argsæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œè¿™ä¸€æ­¥æŠŠåˆ—è¡¨ä¸­çš„å†…å®¹å–å‡ºæ¥</span>            <span class="token keyword">with</span> contextlib<span class="token punctuation">.</span>suppress<span class="token punctuation">(</span>NameError<span class="token punctuation">)</span><span class="token punctuation">:</span>                args<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">eval</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token keyword">else</span> a  <span class="token comment"># eval strings</span>        <span class="token comment"># å°†æ·±åº¦ä¸æ·±åº¦å› å­ç›¸ä¹˜ï¼Œè®¡ç®—å±‚æ·±åº¦ã€‚æ·±åº¦æœ€å°ä¸º1. </span>        n <span class="token operator">=</span> n_ <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span><span class="token builtin">round</span><span class="token punctuation">(</span>n <span class="token operator">*</span> gd<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">if</span> n <span class="token operator">></span> <span class="token number">1</span> <span class="token keyword">else</span> n  <span class="token comment"># depth gain</span>        <span class="token comment"># å¦‚æœå½“å‰çš„æ¨¡å—måœ¨æœ¬é¡¹ç›®å®šä¹‰çš„æ¨¡å—ç±»å‹ä¸­ï¼Œå°±å¯ä»¥å¤„ç†è¿™ä¸ªæ¨¡å—</span>        <span class="token keyword">if</span> m <span class="token keyword">in</span> <span class="token punctuation">(</span>Conv<span class="token punctuation">,</span> GhostConv<span class="token punctuation">,</span> Bottleneck<span class="token punctuation">,</span> GhostBottleneck<span class="token punctuation">,</span> SPP<span class="token punctuation">,</span> SPPF<span class="token punctuation">,</span> DWConv<span class="token punctuation">,</span> MixConv2d<span class="token punctuation">,</span> Focus<span class="token punctuation">,</span> CrossConv<span class="token punctuation">,</span>                 BottleneckCSP<span class="token punctuation">,</span> C3<span class="token punctuation">,</span> C3TR<span class="token punctuation">,</span> C3SPP<span class="token punctuation">,</span> C3Ghost<span class="token punctuation">,</span> nn<span class="token punctuation">.</span>ConvTranspose2d<span class="token punctuation">,</span> DWConvTranspose2d<span class="token punctuation">,</span> C3x<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># c1: è¾“å…¥é€šé“æ•° c2ï¼šè¾“å‡ºé€šé“æ•°</span>            c1<span class="token punctuation">,</span> c2 <span class="token operator">=</span> ch<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>             <span class="token comment"># è¯¥å±‚ä¸æ˜¯æœ€åä¸€å±‚ï¼Œåˆ™å°†é€šé“æ•°ä¹˜ä»¥å®½åº¦å› å­ ä¹Ÿå°±æ˜¯è¯´ï¼Œå®½åº¦å› å­ä½œç”¨äºé™¤äº†æœ€åä¸€å±‚ä¹‹å¤–çš„æ‰€æœ‰å±‚</span>            <span class="token keyword">if</span> c2 <span class="token operator">!=</span> no<span class="token punctuation">:</span>  <span class="token comment"># if not output</span>                <span class="token comment"># make_divisibleçš„ä½œç”¨ï¼Œä½¿å¾—åŸå§‹çš„é€šé“æ•°ä¹˜ä»¥å®½åº¦å› å­ä¹‹åå–æ•´åˆ°8çš„å€æ•°ï¼Œè¿™æ ·å¤„ç†ä¸€èˆ¬æ˜¯è®©æ¨¡å‹çš„å¹¶è¡Œæ€§å’Œæ¨ç†æ€§èƒ½æ›´å¥½ã€‚</span>                c2 <span class="token operator">=</span> make_divisible<span class="token punctuation">(</span>c2 <span class="token operator">*</span> gw<span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>            <span class="token comment"># å°†å‰é¢çš„è¿ç®—ç»“æœä¿å­˜åœ¨argsä¸­ï¼Œå®ƒä¹Ÿå°±æ˜¯è¿™ä¸ªæ¨¡å—æœ€ç»ˆçš„è¾“å…¥å‚æ•°ã€‚</span>            args <span class="token operator">=</span> <span class="token punctuation">[</span>c1<span class="token punctuation">,</span> c2<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">]</span>             <span class="token comment"># æ ¹æ®æ¯å±‚ç½‘ç»œå‚æ•°çš„ä¸åŒï¼Œåˆ†åˆ«å¤„ç†å‚æ•° å…·ä½“å„ä¸ªç±»çš„å‚æ•°æ˜¯ä»€ä¹ˆè¯·å‚è€ƒå®ƒä»¬çš„__init__æ–¹æ³•è¿™é‡Œä¸å†è¯¦ç»†è§£é‡Šäº†</span>            <span class="token keyword">if</span> m <span class="token keyword">in</span> <span class="token punctuation">[</span>BottleneckCSP<span class="token punctuation">,</span> C3<span class="token punctuation">,</span> C3TR<span class="token punctuation">,</span> C3Ghost<span class="token punctuation">,</span> C3x<span class="token punctuation">]</span><span class="token punctuation">:</span>                <span class="token comment"># è¿™é‡Œçš„æ„æ€å°±æ˜¯é‡å¤næ¬¡ï¼Œæ¯”å¦‚convè¿™ä¸ªæ¨¡å—é‡å¤næ¬¡ï¼Œè¿™ä¸ªn æ˜¯ä¸Šé¢ç®—å‡ºæ¥çš„ depth </span>                args<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>  <span class="token comment"># number of repeats</span>                n <span class="token operator">=</span> <span class="token number">1</span>        <span class="token keyword">elif</span> m <span class="token keyword">is</span> nn<span class="token punctuation">.</span>BatchNorm2d<span class="token punctuation">:</span>            args <span class="token operator">=</span> <span class="token punctuation">[</span>ch<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token punctuation">]</span>        <span class="token keyword">elif</span> m <span class="token keyword">is</span> Concat<span class="token punctuation">:</span>            c2 <span class="token operator">=</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>ch<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> f<span class="token punctuation">)</span>        <span class="token keyword">elif</span> m <span class="token keyword">is</span> Detect<span class="token punctuation">:</span>            args<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>ch<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> f<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># number of anchors</span>                args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token builtin">len</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span>        <span class="token keyword">elif</span> m <span class="token keyword">is</span> Contract<span class="token punctuation">:</span>            c2 <span class="token operator">=</span> ch<span class="token punctuation">[</span>f<span class="token punctuation">]</span> <span class="token operator">*</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">**</span> <span class="token number">2</span>        <span class="token keyword">elif</span> m <span class="token keyword">is</span> Expand<span class="token punctuation">:</span>            c2 <span class="token operator">=</span> ch<span class="token punctuation">[</span>f<span class="token punctuation">]</span> <span class="token operator">//</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">**</span> <span class="token number">2</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            c2 <span class="token operator">=</span> ch<span class="token punctuation">[</span>f<span class="token punctuation">]</span>        <span class="token comment"># æ„å»ºæ•´ä¸ªç½‘ç»œæ¨¡å— è¿™é‡Œå°±æ˜¯æ ¹æ®æ¨¡å—çš„é‡å¤æ¬¡æ•°nä»¥åŠæ¨¡å—æœ¬èº«å’Œå®ƒçš„å‚æ•°æ¥æ„å»ºè¿™ä¸ªæ¨¡å—å’Œå‚æ•°å¯¹åº”çš„Module</span>        m_ <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span>m<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">if</span> n <span class="token operator">></span> <span class="token number">1</span> <span class="token keyword">else</span> m<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span>  <span class="token comment"># module</span>        <span class="token comment"># è·å–æ¨¡å—(module type)å…·ä½“åä¾‹å¦‚ models.common.Conv , models.common.C3 , models.common.SPPF ç­‰ã€‚</span>        t <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'__main__.'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>  <span class="token comment">#  replaceå‡½æ•°ä½œç”¨æ˜¯å­—ç¬¦ä¸²"__main__"æ›¿æ¢ä¸º''ï¼Œåœ¨å½“å‰é¡¹ç›®æ²¡æœ‰ç”¨åˆ°è¿™ä¸ªæ›¿æ¢ã€‚</span>        np <span class="token operator">=</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>numel<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> m_<span class="token punctuation">.</span>parameters<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># number params</span>        m_<span class="token punctuation">.</span>i<span class="token punctuation">,</span> m_<span class="token punctuation">.</span>f<span class="token punctuation">,</span> m_<span class="token punctuation">.</span><span class="token builtin">type</span><span class="token punctuation">,</span> m_<span class="token punctuation">.</span>np <span class="token operator">=</span> i<span class="token punctuation">,</span> f<span class="token punctuation">,</span> t<span class="token punctuation">,</span> np  <span class="token comment"># attach index, 'from' index, type, number params</span>        LOGGER<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">&#123;</span>i<span class="token punctuation">:</span><span class="token format-spec">>3</span><span class="token punctuation">&#125;</span></span><span class="token interpolation"><span class="token punctuation">&#123;</span><span class="token builtin">str</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token format-spec">>18</span><span class="token punctuation">&#125;</span></span><span class="token interpolation"><span class="token punctuation">&#123;</span>n_<span class="token punctuation">:</span><span class="token format-spec">>3</span><span class="token punctuation">&#125;</span></span><span class="token interpolation"><span class="token punctuation">&#123;</span>np<span class="token punctuation">:</span><span class="token format-spec">10.0f</span><span class="token punctuation">&#125;</span></span><span class="token string">  </span><span class="token interpolation"><span class="token punctuation">&#123;</span>t<span class="token punctuation">:</span><span class="token format-spec">&lt;40</span><span class="token punctuation">&#125;</span></span><span class="token interpolation"><span class="token punctuation">&#123;</span><span class="token builtin">str</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token format-spec">&lt;30</span><span class="token punctuation">&#125;</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>  <span class="token comment"># print</span>        <span class="token triple-quoted-string string">"""        å¦‚æœxä¸æ˜¯-1ï¼Œåˆ™å°†å…¶ä¿å­˜åœ¨saveåˆ—è¡¨ä¸­ï¼Œè¡¨ç¤ºè¯¥å±‚éœ€è¦ä¿å­˜ç‰¹å¾å›¾ã€‚        è¿™é‡Œ x % i ä¸ x ç­‰ä»·ä¾‹å¦‚åœ¨æœ€åä¸€å±‚ :         f = [17,20,23] , i = 24         y = [ x % i for x in ([f] if isinstance(f, int) else f) if x != -1 ]        print(y) # [17, 20, 23]         # å†™æˆx % i å¯èƒ½å› ä¸ºï¼ši - 1 = -1 % i (æ¯”å¦‚ f = [-1]ï¼Œåˆ™ [x % i for x in f] ä»£è¡¨ [11] )        """</span>        save<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>x <span class="token operator">%</span> i <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>f<span class="token punctuation">]</span> <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token keyword">else</span> f<span class="token punctuation">)</span> <span class="token keyword">if</span> x <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment"># append to savelist</span>        layers<span class="token punctuation">.</span>append<span class="token punctuation">(</span>m_<span class="token punctuation">)</span>        <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span> <span class="token comment"># å¦‚æœæ˜¯åˆæ¬¡è¿­ä»£ï¼Œåˆ™æ–°åˆ›å»ºä¸€ä¸ªchï¼ˆå› ä¸ºå½¢å‚chåœ¨åˆ›å»ºç¬¬ä¸€ä¸ªç½‘ç»œæ¨¡å—æ—¶éœ€è¦ç”¨åˆ°ï¼Œæ‰€ä»¥åˆ›å»ºç½‘ç»œæ¨¡å—ä¹‹åå†åˆå§‹åŒ–chï¼‰</span>            ch <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        ch<span class="token punctuation">.</span>append<span class="token punctuation">(</span>c2<span class="token punctuation">)</span>    <span class="token comment"># å°†æ‰€æœ‰çš„å±‚å°è£…ä¸ºnn.Sequential , å¯¹ä¿å­˜çš„ç‰¹å¾å›¾æ’åº</span>    <span class="token keyword">return</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span><span class="token operator">*</span>layers<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>save<span class="token punctuation">)</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Model-ç±»è§£è¯»"><a href="#Model-ç±»è§£è¯»" class="headerlink" title="Model ç±»è§£è¯»"></a>Model ç±»è§£è¯»</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Model</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># YOLOv5 model</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> cfg<span class="token operator">=</span><span class="token string">'[yolov5s.yaml](https://github.com/Oneflow-Inc/one-yolov5/blob/main/models/yolov5s.yaml)'</span><span class="token punctuation">,</span> ch<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> nc<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> anchors<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># model, input channels, number of classes</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># å¦‚æœcfgå·²ç»æ˜¯å­—å…¸ï¼Œåˆ™ç›´æ¥èµ‹å€¼ï¼Œå¦åˆ™å…ˆåŠ è½½cfgè·¯å¾„çš„æ–‡ä»¶ä¸ºå­—å…¸å¹¶èµ‹å€¼ç»™self.yamlã€‚</span>        <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>cfg<span class="token punctuation">,</span> <span class="token builtin">dict</span><span class="token punctuation">)</span><span class="token punctuation">:</span>             self<span class="token punctuation">.</span>yaml <span class="token operator">=</span> cfg  <span class="token comment"># model dict</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>  <span class="token comment"># is *.yaml  åŠ è½½yamlæ¨¡å—</span>            <span class="token keyword">import</span> yaml  <span class="token comment"># for flow hub </span>            self<span class="token punctuation">.</span>yaml_file <span class="token operator">=</span> Path<span class="token punctuation">(</span>cfg<span class="token punctuation">)</span><span class="token punctuation">.</span>name            <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>cfg<span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'ascii'</span><span class="token punctuation">,</span> errors<span class="token operator">=</span><span class="token string">'ignore'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>                self<span class="token punctuation">.</span>yaml <span class="token operator">=</span> yaml<span class="token punctuation">.</span>safe_load<span class="token punctuation">(</span>f<span class="token punctuation">)</span>  <span class="token comment"># model dict  ä»yamlæ–‡ä»¶ä¸­åŠ è½½å‡ºå­—å…¸</span>        <span class="token comment"># Define model</span>        <span class="token comment"># ch: è¾“å…¥é€šé“æ•°ã€‚ å‡å¦‚self.yamlæœ‰é”®â€˜châ€™ï¼Œåˆ™å°†è¯¥é”®å¯¹åº”çš„å€¼èµ‹ç»™å†…éƒ¨å˜é‡chã€‚å‡å¦‚æ²¡æœ‰â€˜châ€™ï¼Œåˆ™å°†å½¢å‚chèµ‹ç»™å†…éƒ¨å˜é‡ch</span>        ch <span class="token operator">=</span> self<span class="token punctuation">.</span>yaml<span class="token punctuation">[</span><span class="token string">'ch'</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>yaml<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'ch'</span><span class="token punctuation">,</span> ch<span class="token punctuation">)</span>  <span class="token comment"># input channels</span>        <span class="token comment"># å‡å¦‚yamlä¸­çš„ncå’Œæ–¹æ³•å½¢å‚ä¸­çš„ncä¸ä¸€è‡´ï¼Œåˆ™è¦†ç›–yamlä¸­çš„ncã€‚</span>        <span class="token keyword">if</span> nc <span class="token keyword">and</span> nc <span class="token operator">!=</span> self<span class="token punctuation">.</span>yaml<span class="token punctuation">[</span><span class="token string">'nc'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>            LOGGER<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Overriding model.yaml nc=</span><span class="token interpolation"><span class="token punctuation">&#123;</span>self<span class="token punctuation">.</span>yaml<span class="token punctuation">[</span><span class="token string">'nc'</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span></span><span class="token string"> with nc=</span><span class="token interpolation"><span class="token punctuation">&#123;</span>nc<span class="token punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>yaml<span class="token punctuation">[</span><span class="token string">'nc'</span><span class="token punctuation">]</span> <span class="token operator">=</span> nc  <span class="token comment"># override yaml value</span>        <span class="token keyword">if</span> anchors<span class="token punctuation">:</span> <span class="token comment"># anchors  å…ˆéªŒæ¡†çš„é…ç½®</span>            LOGGER<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Overriding model.yaml anchors with anchors=</span><span class="token interpolation"><span class="token punctuation">&#123;</span>anchors<span class="token punctuation">&#125;</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>yaml<span class="token punctuation">[</span><span class="token string">'anchors'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">round</span><span class="token punctuation">(</span>anchors<span class="token punctuation">)</span>  <span class="token comment"># override yaml value</span>        <span class="token comment"># å¾—åˆ°æ¨¡å‹ï¼Œä»¥åŠå¯¹åº”çš„ä¿å­˜çš„ç‰¹å¾å›¾åˆ—è¡¨ã€‚    </span>        self<span class="token punctuation">.</span>model<span class="token punctuation">,</span> self<span class="token punctuation">.</span>save <span class="token operator">=</span> parse_model<span class="token punctuation">(</span>deepcopy<span class="token punctuation">(</span>self<span class="token punctuation">.</span>yaml<span class="token punctuation">)</span><span class="token punctuation">,</span> ch<span class="token operator">=</span><span class="token punctuation">[</span>ch<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># model, savelist</span>        self<span class="token punctuation">.</span>names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>yaml<span class="token punctuation">[</span><span class="token string">'nc'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>  <span class="token comment"># default names åˆå§‹åŒ–ç±»ååˆ—è¡¨ï¼Œé»˜è®¤ä¸º[0,1,2...]</span>        <span class="token comment"># self.inplace=True  é»˜è®¤True  èŠ‚çœå†…å­˜</span>        self<span class="token punctuation">.</span>inplace <span class="token operator">=</span> self<span class="token punctuation">.</span>yaml<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'inplace'</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span>        <span class="token comment"># Build strides, anchors  ç¡®å®šæ­¥é•¿ã€æ­¥é•¿å¯¹åº”çš„é”šæ¡†</span>        m <span class="token operator">=</span> self<span class="token punctuation">.</span>model<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token comment"># Detect()</span>        <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> Detect<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># æ£€éªŒæ¨¡å‹çš„æœ€åä¸€å±‚æ˜¯Detectæ¨¡å—</span>            s <span class="token operator">=</span> <span class="token number">256</span>  <span class="token comment"># 2x min stride</span>            m<span class="token punctuation">.</span>inplace <span class="token operator">=</span> self<span class="token punctuation">.</span>inplace            <span class="token comment"># è®¡ç®—ä¸‰ä¸ªfeature mapä¸‹é‡‡æ ·çš„å€ç‡  [8, 16, 32]</span>            m<span class="token punctuation">.</span>stride <span class="token operator">=</span> flow<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span>s <span class="token operator">/</span> x<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> self<span class="token punctuation">.</span>forward<span class="token punctuation">(</span>flow<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> ch<span class="token punctuation">,</span> s<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># forward</span>            <span class="token comment"># æ£€æŸ¥anchoré¡ºåºä¸strideé¡ºåºæ˜¯å¦ä¸€è‡´ anchorçš„é¡ºåºåº”è¯¥æ˜¯ä»å°åˆ°å¤§ï¼Œè¿™é‡Œæ’ä¸€ä¸‹åº</span>            check_anchor_order<span class="token punctuation">(</span>m<span class="token punctuation">)</span>  <span class="token comment"># must be in pixel-space (not grid-space)</span>            <span class="token comment"># å¯¹åº”çš„anchorè¿›è¡Œç¼©æ”¾æ“ä½œï¼ŒåŸå› ï¼šå¾—åˆ°anchoråœ¨å®é™…çš„ç‰¹å¾å›¾ä¸­çš„ä½ç½®ï¼Œå› ä¸ºåŠ è½½çš„åŸå§‹anchorå¤§å°æ˜¯ç›¸å¯¹äºåŸå›¾çš„åƒç´ ï¼Œä½†æ˜¯ç»è¿‡å·ç§¯æ± åŒ–ä¹‹åï¼Œç‰¹å¾å›¾çš„é•¿å®½å˜å°äº†ã€‚</span>            m<span class="token punctuation">.</span>anchors <span class="token operator">/=</span> m<span class="token punctuation">.</span>stride<span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>stride <span class="token operator">=</span> m<span class="token punctuation">.</span>stride            self<span class="token punctuation">.</span>_initialize_biases<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># only run once  åˆå§‹åŒ–åç½® </span>        <span class="token comment"># Init weights, biases</span>        <span class="token comment"># è°ƒç”¨oneflow_utils.pyä¸‹initialize_weightsåˆå§‹åŒ–æ¨¡å‹æƒé‡</span>        initialize_weights<span class="token punctuation">(</span>self<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># æ‰“å°æ¨¡å‹ä¿¡æ¯</span>        LOGGER<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>    <span class="token comment"># ç®¡ç†å‰å‘ä¼ æ’­å‡½æ•°</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">,</span> augment<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> profile<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> visualize<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> augment<span class="token punctuation">:</span><span class="token comment"># æ˜¯å¦åœ¨æµ‹è¯•æ—¶ä¹Ÿä½¿ç”¨æ•°æ®å¢å¼º  Test Time Augmentation(TTA)</span>            <span class="token keyword">return</span> self<span class="token punctuation">.</span>_forward_augment<span class="token punctuation">(</span>x<span class="token punctuation">)</span>  <span class="token comment"># augmented inference, None</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_forward_once<span class="token punctuation">(</span>x<span class="token punctuation">,</span> profile<span class="token punctuation">,</span> visualize<span class="token punctuation">)</span>  <span class="token comment"># single-scale inference, train</span>    <span class="token comment"># å¸¦æ•°æ®å¢å¼ºçš„å‰å‘ä¼ æ’­</span>    <span class="token keyword">def</span> <span class="token function">_forward_augment</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        img_size <span class="token operator">=</span> x<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span>  <span class="token comment"># height, width</span>        s <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.83</span><span class="token punctuation">,</span> <span class="token number">0.67</span><span class="token punctuation">]</span>  <span class="token comment"># scales</span>        f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">]</span>  <span class="token comment"># flips (2-ud, 3-lr)</span>        y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment"># outputs</span>        <span class="token keyword">for</span> si<span class="token punctuation">,</span> fi <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">:</span>            xi <span class="token operator">=</span> scale_img<span class="token punctuation">(</span>x<span class="token punctuation">.</span>flip<span class="token punctuation">(</span>fi<span class="token punctuation">)</span> <span class="token keyword">if</span> fi <span class="token keyword">else</span> x<span class="token punctuation">,</span> si<span class="token punctuation">,</span> gs<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>stride<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            yi <span class="token operator">=</span> self<span class="token punctuation">.</span>_forward_once<span class="token punctuation">(</span>xi<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token comment"># forward</span>            <span class="token comment"># cv2.imwrite(f'img_&#123;si&#125;.jpg', 255 * xi[0].cpu().numpy().transpose((1, 2, 0))[:, :, ::-1])  # save</span>            yi <span class="token operator">=</span> self<span class="token punctuation">.</span>_descale_pred<span class="token punctuation">(</span>yi<span class="token punctuation">,</span> fi<span class="token punctuation">,</span> si<span class="token punctuation">,</span> img_size<span class="token punctuation">)</span>            y<span class="token punctuation">.</span>append<span class="token punctuation">(</span>yi<span class="token punctuation">)</span>        y <span class="token operator">=</span> self<span class="token punctuation">.</span>_clip_augmented<span class="token punctuation">(</span>y<span class="token punctuation">)</span>  <span class="token comment"># clip augmented tails</span>        <span class="token keyword">return</span> flow<span class="token punctuation">.</span>cat<span class="token punctuation">(</span>y<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">None</span>  <span class="token comment"># augmented inference, train</span>    <span class="token comment"># å‰å‘ä¼ æ’­å…·ä½“å®ç°</span>    <span class="token keyword">def</span> <span class="token function">_forward_once</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">,</span> profile<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> visualize<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        @params x: è¾“å…¥å›¾åƒ        @params profile: True å¯ä»¥åšä¸€äº›æ€§èƒ½è¯„ä¼°        @params feature_vis: True å¯ä»¥åšä¸€äº›ç‰¹å¾å¯è§†åŒ–        """</span>        <span class="token comment"># y: å­˜æ”¾ç€self.save=Trueçš„æ¯ä¸€å±‚çš„è¾“å‡ºï¼Œå› ä¸ºåé¢çš„ç‰¹å¾èåˆæ“ä½œè¦ç”¨åˆ°è¿™äº›ç‰¹å¾å›¾</span>        y<span class="token punctuation">,</span> dt <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment"># outputs</span>        <span class="token comment"># å‰å‘æ¨ç†æ¯ä¸€å±‚ç»“æ„   m.i=index   m.f=from   m.type=ç±»å   m.np=number of params</span>        <span class="token keyword">for</span> m <span class="token keyword">in</span> self<span class="token punctuation">.</span>model<span class="token punctuation">:</span>            <span class="token comment"># if not from previous layer   m.f=å½“å‰å±‚çš„è¾“å…¥æ¥è‡ªå“ªä¸€å±‚çš„è¾“å‡º  sçš„m.féƒ½æ˜¯-1</span>            <span class="token keyword">if</span> m<span class="token punctuation">.</span>f <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span>  <span class="token comment"># if not from previous layer</span>                x <span class="token operator">=</span> y<span class="token punctuation">[</span>m<span class="token punctuation">.</span>f<span class="token punctuation">]</span> <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>f<span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">[</span>x <span class="token keyword">if</span> j <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">else</span> y<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token keyword">for</span> j <span class="token keyword">in</span> m<span class="token punctuation">.</span>f<span class="token punctuation">]</span>  <span class="token comment"># from earlier layers</span>            <span class="token keyword">if</span> profile<span class="token punctuation">:</span>                self<span class="token punctuation">.</span>_profile_one_layer<span class="token punctuation">(</span>m<span class="token punctuation">,</span> x<span class="token punctuation">,</span> dt<span class="token punctuation">)</span>            x <span class="token operator">=</span> m<span class="token punctuation">(</span>x<span class="token punctuation">)</span>  <span class="token comment"># run</span>            y<span class="token punctuation">.</span>append<span class="token punctuation">(</span>x <span class="token keyword">if</span> m<span class="token punctuation">.</span>i <span class="token keyword">in</span> self<span class="token punctuation">.</span>save <span class="token keyword">else</span> <span class="token boolean">None</span><span class="token punctuation">)</span>  <span class="token comment"># save output</span>            <span class="token keyword">if</span> visualize<span class="token punctuation">:</span>                feature_visualization<span class="token punctuation">(</span>x<span class="token punctuation">,</span> m<span class="token punctuation">.</span><span class="token builtin">type</span><span class="token punctuation">,</span> m<span class="token punctuation">.</span>i<span class="token punctuation">,</span> save_dir<span class="token operator">=</span>visualize<span class="token punctuation">)</span>        <span class="token keyword">return</span> x    <span class="token comment"># å°†æ¨ç†ç»“æœæ¢å¤åˆ°åŸå›¾å›¾ç‰‡å°ºå¯¸(é€†æ“ä½œ)</span>    <span class="token keyword">def</span> <span class="token function">_descale_pred</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> p<span class="token punctuation">,</span> flips<span class="token punctuation">,</span> scale<span class="token punctuation">,</span> img_size<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># de-scale predictions following augmented inference (inverse operation)</span>        <span class="token triple-quoted-string string">"""ç”¨åœ¨ä¸Šé¢çš„__init__å‡½æ•°ä¸Š        å°†æ¨ç†ç»“æœæ¢å¤åˆ°åŸå›¾å›¾ç‰‡å°ºå¯¸  Test Time Augmentation(TTA)ä¸­ç”¨åˆ°         de-scale predictions following augmented inference (inverse operation)        @params p: æ¨ç†ç»“æœ        @params flips:        @params scale:        @params img_size:        """</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>inplace<span class="token punctuation">:</span>            p<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">/=</span> scale  <span class="token comment"># de-scale</span>            <span class="token keyword">if</span> flips <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>                p<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> img_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> p<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>  <span class="token comment"># de-flip ud</span>            <span class="token keyword">elif</span> flips <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">:</span>                p<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> img_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> p<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>  <span class="token comment"># de-flip lr</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> wh <span class="token operator">=</span> p<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span> scale<span class="token punctuation">,</span> p<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">/</span> scale<span class="token punctuation">,</span> p<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">/</span> scale  <span class="token comment"># de-scale</span>            <span class="token keyword">if</span> flips <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>                y <span class="token operator">=</span> img_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> y  <span class="token comment"># de-flip ud</span>            <span class="token keyword">elif</span> flips <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">:</span>                x <span class="token operator">=</span> img_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> x  <span class="token comment"># de-flip lr</span>            p <span class="token operator">=</span> flow<span class="token punctuation">.</span>cat<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> wh<span class="token punctuation">,</span> p<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> p    <span class="token comment"># è¿™ä¸ªæ˜¯TTAçš„æ—¶å€™å¯¹åŸå›¾ç‰‡è¿›è¡Œè£å‰ªï¼Œä¹Ÿæ˜¯ä¸€ç§æ•°æ®å¢å¼ºæ–¹å¼ï¼Œç”¨åœ¨TTAæµ‹è¯•çš„æ—¶å€™ã€‚</span>    <span class="token keyword">def</span> <span class="token function">_clip_augmented</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># Clip YOLOv5 augmented inference tails</span>        nl <span class="token operator">=</span> self<span class="token punctuation">.</span>model<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>nl  <span class="token comment"># number of detection layers (P3-P5)</span>        g <span class="token operator">=</span> <span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">**</span> x <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>nl<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># grid points</span>        e <span class="token operator">=</span> <span class="token number">1</span>  <span class="token comment"># exclude layer count</span>        i <span class="token operator">=</span> <span class="token punctuation">(</span>y<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">//</span> g<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">**</span> x <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># indices</span>        y<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> y<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token operator">-</span>i<span class="token punctuation">]</span>  <span class="token comment"># large</span>        i <span class="token operator">=</span> <span class="token punctuation">(</span>y<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">//</span> g<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">**</span> <span class="token punctuation">(</span>nl <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> x<span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># indices</span>        y<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> y<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> i<span class="token punctuation">:</span><span class="token punctuation">]</span>  <span class="token comment"># small</span>        <span class="token keyword">return</span> y    <span class="token comment"># æ‰“å°æ—¥å¿—ä¿¡æ¯  å‰å‘æ¨ç†æ—¶é—´</span>    <span class="token keyword">def</span> <span class="token function">_profile_one_layer</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> m<span class="token punctuation">,</span> x<span class="token punctuation">,</span> dt<span class="token punctuation">)</span><span class="token punctuation">:</span>        c <span class="token operator">=</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> Detect<span class="token punctuation">)</span>  <span class="token comment"># is final layer, copy input as inplace fix</span>        o <span class="token operator">=</span> thop<span class="token punctuation">.</span>profile<span class="token punctuation">(</span>m<span class="token punctuation">,</span> inputs<span class="token operator">=</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">if</span> c <span class="token keyword">else</span> x<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> verbose<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">1E9</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token keyword">if</span> thop <span class="token keyword">else</span> <span class="token number">0</span>  <span class="token comment"># FLOPs</span>        t <span class="token operator">=</span> time_sync<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            m<span class="token punctuation">(</span>x<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">if</span> c <span class="token keyword">else</span> x<span class="token punctuation">)</span>        dt<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">(</span>time_sync<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> t<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> m <span class="token operator">==</span> self<span class="token punctuation">.</span>model<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>            LOGGER<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">&#123;</span><span class="token string">'time (ms)'</span><span class="token punctuation">:</span><span class="token format-spec">>10s</span><span class="token punctuation">&#125;</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">&#123;</span><span class="token string">'GFLOPs'</span><span class="token punctuation">:</span><span class="token format-spec">>10s</span><span class="token punctuation">&#125;</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">&#123;</span><span class="token string">'params'</span><span class="token punctuation">:</span><span class="token format-spec">>10s</span><span class="token punctuation">&#125;</span></span><span class="token string">  module"</span></span><span class="token punctuation">)</span>        LOGGER<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">&#123;</span>dt<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token format-spec">10.2f</span><span class="token punctuation">&#125;</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">&#123;</span>o<span class="token punctuation">:</span><span class="token format-spec">10.2f</span><span class="token punctuation">&#125;</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">&#123;</span>m<span class="token punctuation">.</span>np<span class="token punctuation">:</span><span class="token format-spec">10.0f</span><span class="token punctuation">&#125;</span></span><span class="token string">  </span><span class="token interpolation"><span class="token punctuation">&#123;</span>m<span class="token punctuation">.</span><span class="token builtin">type</span><span class="token punctuation">&#125;</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>        <span class="token keyword">if</span> c<span class="token punctuation">:</span>            LOGGER<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">&#123;</span><span class="token builtin">sum</span><span class="token punctuation">(</span>dt<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token format-spec">10.2f</span><span class="token punctuation">&#125;</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">&#123;</span><span class="token string">'-'</span><span class="token punctuation">:</span><span class="token format-spec">>10s</span><span class="token punctuation">&#125;</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">&#123;</span><span class="token string">'-'</span><span class="token punctuation">:</span><span class="token format-spec">>10s</span><span class="token punctuation">&#125;</span></span><span class="token string">  Total"</span></span><span class="token punctuation">)</span>    <span class="token comment"># initialize biases into Detect(), cf is class frequency</span>    <span class="token keyword">def</span> <span class="token function">_initialize_biases</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> cf<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>         <span class="token comment"># https://arxiv.org/abs/1708.02002 section 3.3</span>        <span class="token comment"># cf = flow.bincount(flow.tensor(np.concatenate(dataset.labels, 0)[:, 0]).long(), minlength=nc) + 1.</span>        m <span class="token operator">=</span> self<span class="token punctuation">.</span>model<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token comment"># Detect() module</span>        <span class="token keyword">for</span> mi<span class="token punctuation">,</span> s <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>m<span class="token punctuation">,</span> m<span class="token punctuation">.</span>stride<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># from</span>            b <span class="token operator">=</span> mi<span class="token punctuation">.</span>bias<span class="token punctuation">.</span>view<span class="token punctuation">(</span>m<span class="token punctuation">.</span>na<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>detach<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># conv.bias(255) to (3,85)</span>            b<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">+=</span> math<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token number">8</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">640</span> <span class="token operator">/</span> s<span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment"># obj (8 objects per 640 image)</span>            b<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">+=</span> math<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token number">0.6</span> <span class="token operator">/</span> <span class="token punctuation">(</span>m<span class="token punctuation">.</span>nc <span class="token operator">-</span> <span class="token number">0.999999</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">if</span> cf <span class="token keyword">is</span> <span class="token boolean">None</span> <span class="token keyword">else</span> flow<span class="token punctuation">.</span>log<span class="token punctuation">(</span>cf <span class="token operator">/</span> cf<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># cls</span>            mi<span class="token punctuation">.</span>bias <span class="token operator">=</span> flow<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>Parameter<span class="token punctuation">(</span>b<span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> requires_grad<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token comment">#  æ‰“å°æ¨¡å‹ä¸­æœ€åDetectå±‚çš„åç½®biasesä¿¡æ¯(ä¹Ÿå¯ä»¥ä»»é€‰å“ªäº›å±‚biasesä¿¡æ¯)</span>    <span class="token keyword">def</span> <span class="token function">_print_biases</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        æ‰“å°æ¨¡å‹ä¸­æœ€åDetectæ¨¡å—é‡Œé¢çš„å·ç§¯å±‚çš„åç½®biasesä¿¡æ¯(ä¹Ÿå¯ä»¥ä»»é€‰å“ªäº›å±‚biasesä¿¡æ¯)        """</span>        m <span class="token operator">=</span> self<span class="token punctuation">.</span>model<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token comment"># Detect() module</span>        <span class="token keyword">for</span> mi <span class="token keyword">in</span> m<span class="token punctuation">.</span>m<span class="token punctuation">:</span>  <span class="token comment"># from</span>            b <span class="token operator">=</span> mi<span class="token punctuation">.</span>bias<span class="token punctuation">.</span>detach<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>view<span class="token punctuation">(</span>m<span class="token punctuation">.</span>na<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>T  <span class="token comment"># conv.bias(255) to (3,85)</span>            LOGGER<span class="token punctuation">.</span>info<span class="token punctuation">(</span>                <span class="token punctuation">(</span><span class="token string">'%6g Conv2d.bias:'</span> <span class="token operator">+</span> <span class="token string">'%10.3g'</span> <span class="token operator">*</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token punctuation">(</span>mi<span class="token punctuation">.</span>weight<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">*</span>b<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> b<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">_print_weights</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        æ‰“å°æ¨¡å‹ä¸­Bottleneckå±‚çš„æƒé‡å‚æ•°weightsä¿¡æ¯(ä¹Ÿå¯ä»¥ä»»é€‰å“ªäº›å±‚weightsä¿¡æ¯)        """</span>        <span class="token keyword">for</span> m <span class="token keyword">in</span> self<span class="token punctuation">.</span>model<span class="token punctuation">.</span>modules<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> <span class="token builtin">type</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token keyword">is</span> Bottleneck<span class="token punctuation">:</span>                LOGGER<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'%10.3g'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>m<span class="token punctuation">.</span>w<span class="token punctuation">.</span>detach<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sigmoid<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># shortcut weights</span>    <span class="token comment"># fuse()æ˜¯ç”¨æ¥è¿›è¡Œconvå’Œbnå±‚åˆå¹¶ï¼Œä¸ºäº†æé€Ÿæ¨¡å‹æ¨ç†é€Ÿåº¦ã€‚</span>    <span class="token keyword">def</span> <span class="token function">fuse</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># fuse model Conv2d() + BatchNorm2d() layers</span>        <span class="token triple-quoted-string string">"""ç”¨åœ¨detect.pyã€val.py        fuse model Conv2d() + BatchNorm2d() layers        è°ƒç”¨oneflow_utils.pyä¸­çš„fuse_conv_and_bnå‡½æ•°å’Œcommon.pyä¸­Convæ¨¡å—çš„fuseforwardå‡½æ•°        """</span>        LOGGER<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'Fusing layers... '</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> m <span class="token keyword">in</span> self<span class="token punctuation">.</span>model<span class="token punctuation">.</span>modules<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># å¦‚æœå½“å‰å±‚æ˜¯å·ç§¯å±‚Convä¸”æœ‰bnç»“æ„, é‚£ä¹ˆå°±è°ƒç”¨fuse_conv_and_bnå‡½æ•°è®²convå’Œbnè¿›è¡Œèåˆ, åŠ é€Ÿæ¨ç†</span>            <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token punctuation">(</span>Conv<span class="token punctuation">,</span> DWConv<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token string">'bn'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                m<span class="token punctuation">.</span>conv <span class="token operator">=</span> fuse_conv_and_bn<span class="token punctuation">(</span>m<span class="token punctuation">.</span>conv<span class="token punctuation">,</span> m<span class="token punctuation">.</span>bn<span class="token punctuation">)</span>  <span class="token comment"># update conv</span>                <span class="token builtin">delattr</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token string">'bn'</span><span class="token punctuation">)</span>  <span class="token comment"># remove batchnorm  ç§»é™¤bn remove batchnorm</span>                m<span class="token punctuation">.</span>forward <span class="token operator">=</span> m<span class="token punctuation">.</span>forward_fuse  <span class="token comment"># update forward æ›´æ–°å‰å‘ä¼ æ’­ update forward (åå‘ä¼ æ’­ä¸ç”¨ç®¡, å› ä¸ºè¿™ç§æ¨ç†åªç”¨åœ¨æ¨ç†é˜¶æ®µ)</span>        self<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># æ‰“å°conv+bnèåˆåçš„æ¨¡å‹ä¿¡æ¯</span>        <span class="token keyword">return</span> self    <span class="token comment"># æ‰“å°æ¨¡å‹ç»“æ„ä¿¡æ¯ åœ¨å½“å‰ç±»__init__å‡½æ•°ç»“å°¾å¤„æœ‰è°ƒç”¨</span>    <span class="token keyword">def</span> <span class="token function">info</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> verbose<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> img_size<span class="token operator">=</span><span class="token number">640</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># print model information</span>        model_info<span class="token punctuation">(</span>self<span class="token punctuation">,</span> verbose<span class="token punctuation">,</span> img_size<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">_apply</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># Apply to(), cpu(), cuda(), half() to model tensors that are not parameters or registered buffers</span>        self <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>_apply<span class="token punctuation">(</span>fn<span class="token punctuation">)</span>        m <span class="token operator">=</span> self<span class="token punctuation">.</span>model<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token comment"># Detect()</span>        <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> Detect<span class="token punctuation">)</span><span class="token punctuation">:</span>            m<span class="token punctuation">.</span>stride <span class="token operator">=</span> fn<span class="token punctuation">(</span>m<span class="token punctuation">.</span>stride<span class="token punctuation">)</span>            m<span class="token punctuation">.</span>grid <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> m<span class="token punctuation">.</span>grid<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>anchor_grid<span class="token punctuation">,</span> <span class="token builtin">list</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                m<span class="token punctuation">.</span>anchor_grid <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> m<span class="token punctuation">.</span>anchor_grid<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> self<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Detectç±»è§£è¯»"><a href="#Detectç±»è§£è¯»" class="headerlink" title="Detectç±»è§£è¯»"></a>Detectç±»è§£è¯»</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Detect</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    Detectæ¨¡å—æ˜¯ç”¨æ¥æ„å»ºDetectå±‚çš„ï¼Œå°†è¾“å…¥feature map é€šè¿‡ä¸€ä¸ªå·ç§¯æ“ä½œå’Œå…¬å¼è®¡ç®—åˆ°æˆ‘ä»¬æƒ³è¦çš„shape, ä¸ºåé¢çš„è®¡ç®—æŸå¤±æˆ–è€…NMSåå¤„ç†ä½œå‡†å¤‡    """</span>    stride <span class="token operator">=</span> <span class="token boolean">None</span>  <span class="token comment"># strides computed during build</span>    onnx_dynamic <span class="token operator">=</span> <span class="token boolean">False</span>  <span class="token comment"># ONNX export parameter</span>    export <span class="token operator">=</span> <span class="token boolean">False</span>  <span class="token comment"># export mode</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nc<span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">,</span> anchors<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ch<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># detection layer</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment">#  nc:åˆ†ç±»æ•°é‡</span>        self<span class="token punctuation">.</span>nc <span class="token operator">=</span> nc  <span class="token comment"># number of classes  COCO : 80</span>        <span class="token comment">#  no:æ¯ä¸ªanchorçš„è¾“å‡ºæ•° COCO: 80 + 5 = 85 </span>        self<span class="token punctuation">.</span>no <span class="token operator">=</span> nc <span class="token operator">+</span> <span class="token number">5</span>  <span class="token comment"># number of outputs per anchor  Detectçš„ä¸ªæ•° 3</span>        <span class="token comment"># nl:é¢„æµ‹å±‚æ•°ï¼Œæ­¤æ¬¡ä¸º3</span>        self<span class="token punctuation">.</span>nl <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>anchors<span class="token punctuation">)</span>  <span class="token comment"># number of detection layers</span>        <span class="token comment">#  na:anchorsçš„æ•°é‡ï¼Œæ­¤æ¬¡ä¸º3</span>        self<span class="token punctuation">.</span>na <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>anchors<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>  <span class="token comment"># number of anchors</span>        <span class="token comment">#  grid:æ ¼å­åæ ‡ç³»ï¼Œå·¦ä¸Šè§’ä¸º(1,1),å³ä¸‹è§’ä¸º(input.w/stride,input.h/stride)</span>        self<span class="token punctuation">.</span>grid <span class="token operator">=</span> <span class="token punctuation">[</span>flow<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>nl  <span class="token comment"># init grid</span>        self<span class="token punctuation">.</span>anchor_grid <span class="token operator">=</span> <span class="token punctuation">[</span>flow<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>nl  <span class="token comment"># init anchor grid</span>        <span class="token comment"># å†™å…¥ç¼“å­˜ä¸­ï¼Œå¹¶å‘½åä¸ºanchors</span>        <span class="token comment"># register_buffer</span>        <span class="token comment"># æ¨¡å‹ä¸­éœ€è¦ä¿å­˜çš„å‚æ•°ä¸€èˆ¬æœ‰ä¸¤ç§ï¼šä¸€ç§æ˜¯åå‘ä¼ æ’­éœ€è¦è¢«optimizeræ›´æ–°çš„ï¼Œç§°ä¸ºparameter; å¦ä¸€ç§ä¸è¦è¢«æ›´æ–°ç§°ä¸ºbuffer</span>        <span class="token comment"># bufferçš„å‚æ•°æ›´æ–°æ˜¯åœ¨forwardä¸­ï¼Œè€Œoptim.stepåªèƒ½æ›´æ–°nn.parameterç±»å‹çš„å‚æ•°</span>        self<span class="token punctuation">.</span>register_buffer<span class="token punctuation">(</span><span class="token string">'anchors'</span><span class="token punctuation">,</span> flow<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span>anchors<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>view<span class="token punctuation">(</span>self<span class="token punctuation">.</span>nl<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># shape(nl,na,2)</span>        <span class="token comment"># å°†è¾“å‡ºé€šè¿‡å·ç§¯åˆ° self.no * self.na çš„é€šé“ï¼Œè¾¾åˆ°å…¨è¿æ¥çš„ä½œç”¨</span>        self<span class="token punctuation">.</span>m <span class="token operator">=</span> nn<span class="token punctuation">.</span>ModuleList<span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span>x<span class="token punctuation">,</span> self<span class="token punctuation">.</span>no <span class="token operator">*</span> self<span class="token punctuation">.</span>na<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> ch<span class="token punctuation">)</span>  <span class="token comment"># output conv</span>        self<span class="token punctuation">.</span>inplace <span class="token operator">=</span> inplace  <span class="token comment"># use inplace ops (e.g. slice assignment)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        z <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment"># inference output</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>nl<span class="token punctuation">)</span><span class="token punctuation">:</span>            x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># conv</span>            bs<span class="token punctuation">,</span> _<span class="token punctuation">,</span> ny<span class="token punctuation">,</span> nx <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>shape  <span class="token comment"># x(bs,255,20,20) to x(bs,3,20,20,85)</span>            x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>view<span class="token punctuation">(</span>bs<span class="token punctuation">,</span> self<span class="token punctuation">.</span>na<span class="token punctuation">,</span> self<span class="token punctuation">.</span>no<span class="token punctuation">,</span> ny<span class="token punctuation">,</span> nx<span class="token punctuation">)</span><span class="token punctuation">.</span>permute<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>contiguous<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>training<span class="token punctuation">:</span>  <span class="token comment"># inference</span>                <span class="token comment"># æ„é€ ç½‘æ ¼</span>                <span class="token comment"># å› ä¸ºæ¨ç†è¿”å›çš„ä¸æ˜¯å½’ä¸€åŒ–åçš„ç½‘æ ¼åç§»é‡ éœ€è¦å†åŠ ä¸Šç½‘æ ¼çš„ä½ç½® å¾—åˆ°æœ€ç»ˆçš„æ¨ç†åæ ‡ å†é€å…¥nms</span>                <span class="token comment"># æ‰€ä»¥è¿™é‡Œæ„å»ºç½‘æ ¼å°±æ˜¯ä¸ºäº†è®°å½•æ¯ä¸ªgridçš„ç½‘æ ¼åæ ‡ æ–¹é¢åé¢ä½¿ç”¨</span>                <span class="token keyword">if</span> self<span class="token punctuation">.</span>onnx_dynamic <span class="token keyword">or</span> self<span class="token punctuation">.</span>grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">!=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                    <span class="token comment"># å‘å‰ä¼ æ’­æ—¶éœ€è¦å°†ç›¸å¯¹åæ ‡è½¬æ¢åˆ°gridç»å¯¹åæ ‡ç³»ä¸­</span>                    self<span class="token punctuation">.</span>grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>anchor_grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>_make_grid<span class="token punctuation">(</span>nx<span class="token punctuation">,</span> ny<span class="token punctuation">,</span> i<span class="token punctuation">)</span>                y <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>sigmoid<span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> self<span class="token punctuation">.</span>inplace<span class="token punctuation">:</span>                    <span class="token comment"># é»˜è®¤æ‰§è¡Œ ä¸ä½¿ç”¨AWS Inferentia</span>                    <span class="token comment"># è¿™é‡Œçš„å…¬å¼å’Œyolov3ã€v4ä¸­ä½¿ç”¨çš„ä¸ä¸€æ · æ˜¯yolov5ä½œè€…è‡ªå·±ç”¨çš„ æ•ˆæœæ›´å¥½</span>                    y<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>y<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>stride<span class="token punctuation">[</span>i<span class="token punctuation">]</span>  <span class="token comment"># xy</span>                    y<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>y<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>anchor_grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span>  <span class="token comment"># wh</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>  <span class="token comment"># for YOLOv5 on AWS Inferentia https://github.com/ultralytics/yolov5/pull/2953</span>                    xy<span class="token punctuation">,</span> wh<span class="token punctuation">,</span> conf <span class="token operator">=</span> y<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>nc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>  <span class="token comment"># y.tensor_split((2, 4, 5), 4)  </span>                    xy <span class="token operator">=</span> <span class="token punctuation">(</span>xy <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>stride<span class="token punctuation">[</span>i<span class="token punctuation">]</span>  <span class="token comment"># xy</span>                    wh <span class="token operator">=</span> <span class="token punctuation">(</span>wh <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>anchor_grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span>  <span class="token comment"># wh</span>                    y <span class="token operator">=</span> flow<span class="token punctuation">.</span>cat<span class="token punctuation">(</span><span class="token punctuation">(</span>xy<span class="token punctuation">,</span> wh<span class="token punctuation">,</span> conf<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>                <span class="token comment"># z [oneflow.Size([1, 19200, 85])  oneflow.Size([1, 4800, 85]) oneflow.Size([1, 1200, 85])]</span>                z<span class="token punctuation">.</span>append<span class="token punctuation">(</span>y<span class="token punctuation">.</span>view<span class="token punctuation">(</span>bs<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>no<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> x <span class="token keyword">if</span> self<span class="token punctuation">.</span>training <span class="token keyword">else</span> <span class="token punctuation">(</span>flow<span class="token punctuation">.</span>cat<span class="token punctuation">(</span>z<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">)</span> <span class="token keyword">if</span> self<span class="token punctuation">.</span>export <span class="token keyword">else</span> <span class="token punctuation">(</span>flow<span class="token punctuation">.</span>cat<span class="token punctuation">(</span>z<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>    <span class="token comment"># ç›¸å¯¹åæ ‡è½¬æ¢åˆ°gridç»å¯¹åæ ‡ç³»</span>    <span class="token keyword">def</span> <span class="token function">_make_grid</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nx<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> ny<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        d <span class="token operator">=</span> self<span class="token punctuation">.</span>anchors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>device        t <span class="token operator">=</span> self<span class="token punctuation">.</span>anchors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>dtype        shape <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>na<span class="token punctuation">,</span> ny<span class="token punctuation">,</span> nx<span class="token punctuation">,</span> <span class="token number">2</span>  <span class="token comment"># grid shape</span>        y<span class="token punctuation">,</span> x <span class="token operator">=</span> flow<span class="token punctuation">.</span>arange<span class="token punctuation">(</span>ny<span class="token punctuation">,</span> device<span class="token operator">=</span>d<span class="token punctuation">,</span> dtype<span class="token operator">=</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span> flow<span class="token punctuation">.</span>arange<span class="token punctuation">(</span>nx<span class="token punctuation">,</span> device<span class="token operator">=</span>d<span class="token punctuation">,</span> dtype<span class="token operator">=</span>t<span class="token punctuation">)</span>        yv<span class="token punctuation">,</span> xv <span class="token operator">=</span> flow<span class="token punctuation">.</span>meshgrid<span class="token punctuation">(</span>y<span class="token punctuation">,</span> x<span class="token punctuation">,</span> indexing<span class="token operator">=</span><span class="token string">"ij"</span><span class="token punctuation">)</span>        grid <span class="token operator">=</span> flow<span class="token punctuation">.</span>stack<span class="token punctuation">(</span><span class="token punctuation">(</span>xv<span class="token punctuation">,</span> yv<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>expand<span class="token punctuation">(</span>shape<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span>  <span class="token comment"># add grid offset, i.e. y = 2.0 * x - 0.5</span>        anchor_grid <span class="token operator">=</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>anchors<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>stride<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>na<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>expand<span class="token punctuation">(</span>shape<span class="token punctuation">)</span>        <span class="token keyword">return</span> grid<span class="token punctuation">,</span> anchor_grid<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="é™„ä»¶"><a href="#é™„ä»¶" class="headerlink" title="é™„ä»¶"></a>é™„ä»¶</h1><p>è¡¨2.1 <a href="https://github.com/Oneflow-Inc/one-yolov5/blob/main/models/yolov5s.yaml">yolov5s.yaml</a>è§£æè¡¨</p><table><thead><tr><th>å±‚æ•°</th><th>form</th><th>moudule</th><th>arguments</th><th>input</th><th>output</th></tr></thead><tbody><tr><td>0</td><td>-1</td><td>Conv</td><td>[3, 32, 6, 2, 2]</td><td>[3, 640, 640]</td><td>[32, 320, 320]</td></tr><tr><td>1</td><td>-1</td><td>Conv</td><td>[32, 64, 3, 2]</td><td>[32, 320, 320]</td><td>[64, 160, 160]</td></tr><tr><td>2</td><td>-1</td><td>C3</td><td>[64, 64, 1]</td><td>[64, 160, 160]</td><td>[64, 160, 160]</td></tr><tr><td>3</td><td>-1</td><td>Conv</td><td>[64, 128, 3, 2]</td><td>[64, 160, 160]</td><td>[128, 80, 80]</td></tr><tr><td>4</td><td>-1</td><td>C3</td><td>[128, 128, 2]</td><td>[128, 80, 80]</td><td>[128, 80, 80]</td></tr><tr><td>5</td><td>-1</td><td>Conv</td><td>[128, 256, 3, 2]</td><td>[128, 80, 80]</td><td>[256, 40, 40]</td></tr><tr><td>6</td><td>-1</td><td>C3</td><td>[256, 256, 3]</td><td>[256, 40, 40]</td><td>[256, 40, 40]</td></tr><tr><td>7</td><td>-1</td><td>Conv</td><td>[256, 512, 3, 2]</td><td>[256, 40, 40]</td><td>[512, 20, 20]</td></tr><tr><td>8</td><td>-1</td><td>C3</td><td>[512, 512, 1]</td><td>[512, 20, 20]</td><td>[512, 20, 20]</td></tr><tr><td>9</td><td>-1</td><td>SPPF</td><td>[512, 512, 5]</td><td>[512, 20, 20]</td><td>[512, 20, 20]</td></tr><tr><td>10</td><td>-1</td><td>Conv</td><td>[512, 256, 1, 1]</td><td>[512, 20, 20]</td><td>[256, 20, 20]</td></tr><tr><td>11</td><td>-1</td><td>Upsample</td><td>[None, 2, â€˜nearestâ€™]</td><td>[256, 20, 20]</td><td>[256, 40, 40]</td></tr><tr><td>12</td><td>[-1, 6]</td><td>Concat</td><td>[1]</td><td>[1, 256, 40, 40],[1, 256, 40, 40]</td><td>[512, 40, 40]</td></tr><tr><td>13</td><td>-1</td><td>C3</td><td>[512, 256, 1, False]</td><td>[512, 40, 40]</td><td>[256, 40, 40]</td></tr><tr><td>14</td><td>-1</td><td>Conv</td><td>[256, 128, 1, 1]</td><td>[256, 40, 40]</td><td>[128, 40, 40]</td></tr><tr><td>15</td><td>-1</td><td>Upsample</td><td>[None, 2, â€˜nearestâ€™]</td><td>[128, 40, 40]</td><td>[128, 80, 80]</td></tr><tr><td>16</td><td>[-1, 4]</td><td>Concat</td><td>[1]</td><td>[1, 128, 80, 80],[1, 128, 80, 80]</td><td>[256, 80, 80]</td></tr><tr><td>17</td><td>-1</td><td>C3</td><td>[256, 128, 1, False]</td><td>[256, 80, 80]</td><td>[128, 80, 80]</td></tr><tr><td>18</td><td>-1</td><td>Conv</td><td>[128, 128, 3, 2]</td><td>[128, 80, 80]</td><td>[128, 40, 40]</td></tr><tr><td>19</td><td>[-1, 14]</td><td>Concat</td><td>[1]</td><td>[1, 128, 40, 40],[1, 128, 40, 40]</td><td>[256, 40, 40]</td></tr><tr><td>20</td><td>-1</td><td>C3</td><td>[256, 256, 1, False]</td><td>[256, 40, 40]</td><td>[256, 40, 40]</td></tr><tr><td>21</td><td>-1</td><td>Conv</td><td>[256, 256, 3, 2]</td><td>[256, 40, 40]</td><td>[256, 20, 20]</td></tr><tr><td>22</td><td>[-1, 10]</td><td>Concat</td><td>[1]</td><td>[1, 256, 20, 20],[1, 256, 20, 20]</td><td>[512, 20, 20]</td></tr><tr><td>23</td><td>-1</td><td>C3</td><td>[512, 512, 1, False]</td><td>[512, 20, 20]</td><td>[512, 20, 20]</td></tr><tr><td>24</td><td>[17, 20, 23]</td><td>Detect</td><td>[80, [[10, 13, 16, 30, 33, 23], [30, 61, 62, 45, 59, 119], [116, 90, 156, 198, 373, 326]], [128, 256, 512]]</td><td>[1, 128, 80, 80],[1, 256, 40, 40],[1, 512, 20, 20]</td><td>[1, 3, 80, 80, 85],[1, 3, 40, 40, 85],[1, 3, 20, 20, 85]</td></tr></tbody></table><h1 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« :"></a>å‚è€ƒæ–‡ç« :</h1><ul><li><a href="https://zhuanlan.zhihu.com/p/436891962?ivk_sa=1025922q">https://zhuanlan.zhihu.com/p/436891962?ivk_sa=1025922q</a></li><li><a href="https://zhuanlan.zhihu.com/p/110204563">https://zhuanlan.zhihu.com/p/110204563</a></li><li><a href="https://www.it610.com/article/1550621248474648576.htm">https://www.it610.com/article/1550621248474648576.htm</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> yolov5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> yolov5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Transformerä¸­çš„å¤šå¤´æ³¨æ„åŠ›è¯¦è§£</title>
      <link href="/2025/05/27/transformer-zhong-de-duo-tou-zhu-yi-li-xiang-jie/"/>
      <url>/2025/05/27/transformer-zhong-de-duo-tou-zhu-yi-li-xiang-jie/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Transformer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Transformer </tag>
            
            <tag> æ³¨æ„åŠ›æœºåˆ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åµŒå…¥å¼å¼€å‘å¸¸ç”¨å·¥å…·æŒ‡å—</title>
      <link href="/2025/04/15/qian-ru-shi-kai-fa-chang-yong-gong-ju-zhi-nan/"/>
      <url>/2025/04/15/qian-ru-shi-kai-fa-chang-yong-gong-ju-zhi-nan/</url>
      
        <content type="html"><![CDATA[<h1 id="gdbå·¥å…·ä½¿ç”¨"><a href="#gdbå·¥å…·ä½¿ç”¨" class="headerlink" title="gdbå·¥å…·ä½¿ç”¨"></a>gdbå·¥å…·ä½¿ç”¨</h1><ul><li>é…ç½®ç¨‹åºæ®µé”™è¯¯ç”Ÿæˆæ–‡ä»¶çš„è·¯å¾„<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"/userdata/core-%e-%p-%t"</span> <span class="token operator">|</span>  <span class="token function">tee</span> /proc/sys/kernel/core_pattern<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li>è¿è¡Œ<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">gdb adas_app core-%e-%p-%t<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li>å¸¸ç”¨å‘½ä»¤<ul><li>bt ç”¨äºæŸ¥çœ‹ç¨‹åºå´©æºƒæ—¶çš„è°ƒç”¨æ ˆ </li><li>frame 4 åˆ‡æ¢åˆ°è°ƒç”¨æ ˆä¸­çš„ç¬¬ 4 å±‚å¸§</li></ul></li></ul><h1 id="æŸ¥çœ‹åº“æˆ–å¯æ‰§è¡Œæ–‡ä»¶çš„ä¾èµ–åº“"><a href="#æŸ¥çœ‹åº“æˆ–å¯æ‰§è¡Œæ–‡ä»¶çš„ä¾èµ–åº“" class="headerlink" title="æŸ¥çœ‹åº“æˆ–å¯æ‰§è¡Œæ–‡ä»¶çš„ä¾èµ–åº“"></a>æŸ¥çœ‹åº“æˆ–å¯æ‰§è¡Œæ–‡ä»¶çš„ä¾èµ–åº“</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">readelf <span class="token parameter variable">-d</span>  <span class="token operator">&lt;</span>åº“è·¯å¾„æˆ–å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„<span class="token operator">></span>readelf <span class="token parameter variable">-p</span> .comment <span class="token operator">&lt;</span>executable_file<span class="token operator">></span>strings <span class="token operator">&lt;</span>executable_file<span class="token operator">></span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> gcc <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h1 id="æŸ¥çœ‹å¯æ‰§è¡Œæ–‡ä»¶æ‰€ä¾èµ–çš„åŠ¨æ€åº“"><a href="#æŸ¥çœ‹å¯æ‰§è¡Œæ–‡ä»¶æ‰€ä¾èµ–çš„åŠ¨æ€åº“" class="headerlink" title="æŸ¥çœ‹å¯æ‰§è¡Œæ–‡ä»¶æ‰€ä¾èµ–çš„åŠ¨æ€åº“"></a>æŸ¥çœ‹å¯æ‰§è¡Œæ–‡ä»¶æ‰€ä¾èµ–çš„åŠ¨æ€åº“</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ldd <span class="token operator">&lt;</span>fileName<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿå¤§å°"><a href="#è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿå¤§å°" class="headerlink" title="è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿå¤§å°"></a>è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿå¤§å°</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">resize2fs <span class="token operator">&lt;</span>é€‰é¡¹<span class="token operator">></span> <span class="token operator">&lt;</span>è®¾å¤‡è·¯å¾„<span class="token operator">></span> <span class="token operator">&lt;</span>å¤§å°<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç”¨äºè°ƒæ•´ ext2&#x2F;ext3&#x2F;ext4 æ–‡ä»¶ç³»ç»Ÿå¤§å° çš„å‘½ä»¤ã€‚å®ƒå¯ä»¥ å¢å¤§æˆ–å‡å° æ–‡ä»¶ç³»ç»Ÿçš„å¤§å°ã€‚&lt;å¤§å°&gt;å¯ä»¥çœç•¥ï¼Œè¡¨ç¤ºæ‰©å±•åˆ°è®¾å¤‡çš„æœ€å¤§ç©ºé—´</p><blockquote></blockquote><p>resize2fs &#x2F;dev&#x2F;block&#x2F;by-name&#x2F;externApp<br> æ‰©å±•exappæ–‡ä»¶ç³»ç»Ÿçš„å¤§å°ä¸ºæœ€å¤§ç©ºé—´</p><h1 id="ä»¥å†™çš„æ–¹å¼é‡æ–°æŒ‚è½½ç›®å½•"><a href="#ä»¥å†™çš„æ–¹å¼é‡æ–°æŒ‚è½½ç›®å½•" class="headerlink" title="ä»¥å†™çš„æ–¹å¼é‡æ–°æŒ‚è½½ç›®å½•"></a>ä»¥å†™çš„æ–¹å¼é‡æ–°æŒ‚è½½ç›®å½•</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mount</span> <span class="token parameter variable">-o</span> rw,remount /exapp/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="å‹ç¼©åº“æˆ–å¯æ‰§è¡Œæ–‡ä»¶"><a href="#å‹ç¼©åº“æˆ–å¯æ‰§è¡Œæ–‡ä»¶" class="headerlink" title="å‹ç¼©åº“æˆ–å¯æ‰§è¡Œæ–‡ä»¶"></a>å‹ç¼©åº“æˆ–å¯æ‰§è¡Œæ–‡ä»¶</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">aarch64-v01c01-linux-gnu-strip <span class="token operator">&lt;</span>æ–‡ä»¶å<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>aarch64-v01c01-linux-gnu-stripä¸ºäº¤å‰ç¼–è¯‘å·¥å…·é“¾ä¸­çš„å·¥å…·ï¼Œéœ€è¦å’Œå®é™…çš„äº¤å‰ç¼–è¯‘å·¥å…·é“¾å¯¹åº”</p></blockquote><h1 id="ç¼–è¯‘åŠ é€Ÿccache"><a href="#ç¼–è¯‘åŠ é€Ÿccache" class="headerlink" title="ç¼–è¯‘åŠ é€Ÿccache"></a>ç¼–è¯‘åŠ é€Ÿccache</h1><p>ccache çš„ä½œç”¨æ˜¯ï¼šåŠ é€Ÿ C&#x2F;C++ ç¼–è¯‘è¿‡ç¨‹ï¼Œç‰¹åˆ«æ˜¯åœ¨æºä»£ç æ²¡æœ‰å˜åŒ–æ—¶å¯ä»¥å¤§å¹…å‡å°‘ç¼–è¯‘æ—¶é—´</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">apt</span> <span class="token function">install</span> ccache<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç„¶ååœ¨<code>CMakeLists.txt</code>ä¸­é…ç½®ï¼š</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token comment"># å¯ç”¨ ccache</span><span class="token keyword">find_program</span><span class="token punctuation">(</span>CCACHE_PROGRAM ccache<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>CCACHE_PROGRAM<span class="token punctuation">)</span>    <span class="token keyword">message</span><span class="token punctuation">(</span>STATUS <span class="token string">"Using ccache: <span class="token interpolation"><span class="token punctuation">$&#123;</span><span class="token variable">CCACHE_PROGRAM</span><span class="token punctuation">&#125;</span></span>"</span><span class="token punctuation">)</span>    <span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">CMAKE_C_COMPILER_LAUNCHER</span> <span class="token string">"<span class="token interpolation"><span class="token punctuation">$&#123;</span><span class="token variable">CCACHE_PROGRAM</span><span class="token punctuation">&#125;</span></span>"</span><span class="token punctuation">)</span>    <span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">CMAKE_CXX_COMPILER_LAUNCHER</span> <span class="token string">"<span class="token interpolation"><span class="token punctuation">$&#123;</span><span class="token variable">CCACHE_PROGRAM</span><span class="token punctuation">&#125;</span></span>"</span><span class="token punctuation">)</span><span class="token keyword">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="æŸ¥çœ‹æ¿ç«¯æ”¯æŒçš„å‘½ä»¤"><a href="#æŸ¥çœ‹æ¿ç«¯æ”¯æŒçš„å‘½ä»¤" class="headerlink" title="æŸ¥çœ‹æ¿ç«¯æ”¯æŒçš„å‘½ä»¤"></a>æŸ¥çœ‹æ¿ç«¯æ”¯æŒçš„å‘½ä»¤</h1><p>å‘½ä»¤å­˜å‚¨ä½ç½®ä¸€èˆ¬ä¸ºï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/bin/usr/bin//usr/sbin/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åµŒå…¥å¼å¼€å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TransformåŸºç¡€å¸¸è¯†</title>
      <link href="/2025/03/13/transform-ji-chu-chang-shi/"/>
      <url>/2025/03/13/transform-ji-chu-chang-shi/</url>
      
        <content type="html"><![CDATA[<h1 id="å·ç§¯çš„åˆ†ç±»"><a href="#å·ç§¯çš„åˆ†ç±»" class="headerlink" title="å·ç§¯çš„åˆ†ç±»"></a>å·ç§¯çš„åˆ†ç±»</h1><blockquote><p>å‚è€ƒè¿æ¥:<a href="https://mp.weixin.qq.com/s/li7kIPTrWxFEu5SEkyG_ww">https://mp.weixin.qq.com/s/li7kIPTrWxFEu5SEkyG_ww</a></p></blockquote><h2 id="å·ç§¯ä¸äº’ç›¸å…³"><a href="#å·ç§¯ä¸äº’ç›¸å…³" class="headerlink" title="å·ç§¯ä¸äº’ç›¸å…³"></a>å·ç§¯ä¸äº’ç›¸å…³</h2><p>åœ¨ä¿¡å·å¤„ç†ã€å›¾åƒå¤„ç†å’Œå…¶å®ƒå·¥ç¨‹&#x2F;ç§‘å­¦é¢†åŸŸ,å·ç§¯éƒ½æ˜¯ä¸€ç§ä½¿ç”¨å¹¿æ³›çš„æŠ€æœ¯ã€‚åœ¨æ·±åº¦å­¦ä¹ é¢†åŸŸ,å·ç§¯ç¥ç»ç½‘ç»œ(CNN)è¿™ç§æ¨¡å‹æ¶æ„å°±å¾—åäºè¿™ç§æŠ€æœ¯ã€‚ä½†æ˜¯,æ·±åº¦å­¦ä¹ é¢†åŸŸçš„å·ç§¯æœ¬è´¨ä¸Šæ˜¯ä¿¡å·&#x2F;å›¾åƒå¤„ç†é¢†åŸŸå†…çš„äº’ç›¸å…³(cross-correlation)ã€‚è¿™ä¸¤ç§æ“ä½œä¹‹é—´å­˜åœ¨ç»†å¾®çš„å·®åˆ«ã€‚</p><p>æ— éœ€å¤ªè¿‡æ·±å…¥ç»†èŠ‚,æˆ‘ä»¬å°±èƒ½çœ‹åˆ°è¿™ä¸ªå·®åˆ«ã€‚åœ¨ä¿¡å·&#x2F;å›¾åƒå¤„ç†é¢†åŸŸ,å·ç§¯çš„å®šä¹‰æ˜¯:</p><p>$$<br>\begin{array}{c}<br>(f*g)(t)&#x3D;f(t)g(t-t)dt<br>\end{array}<br>$$</p><p>å…¶å®šä¹‰æ˜¯ä¸¤ä¸ªå‡½æ•°ä¸­ä¸€ä¸ªå‡½æ•°ç»è¿‡åè½¬å’Œä½ç§»åå†ç›¸ä¹˜å¾—åˆ°çš„ç§¯çš„ç§¯åˆ†ã€‚ä¸‹é¢çš„å¯è§†åŒ–å±•ç¤ºäº†è¿™ä¸€æ€æƒ³:</p><p>ä¿¡å·å¤„ç†ä¸­çš„å·ç§¯ã€‚è¿‡æ»¤å™¨ g ç»è¿‡åè½¬,ç„¶åå†æ²¿æ°´å¹³è½´æ»‘åŠ¨ã€‚åœ¨æ¯ä¸€ä¸ªä½ç½®,æˆ‘ä»¬éƒ½è®¡ç®— f å’Œåè½¬åçš„ g ä¹‹é—´ç›¸äº¤åŒºåŸŸçš„é¢ç§¯ã€‚è¿™ä¸ªç›¸äº¤åŒºåŸŸçš„é¢ç§¯å°±æ˜¯ç‰¹å®šä½ç½®å‡ºçš„å·ç§¯å€¼ã€‚</p><p>è¿™é‡Œ,å‡½æ•° g æ˜¯è¿‡æ»¤å™¨ã€‚å®ƒè¢«åè½¬åå†æ²¿æ°´å¹³è½´æ»‘åŠ¨ã€‚åœ¨æ¯ä¸€ä¸ªä½ç½®,æˆ‘ä»¬éƒ½è®¡ç®— f å’Œåè½¬åçš„ g ä¹‹é—´ç›¸äº¤åŒºåŸŸçš„é¢ç§¯ã€‚è¿™ä¸ªç›¸äº¤åŒºåŸŸçš„é¢ç§¯å°±æ˜¯ç‰¹å®šä½ç½®å‡ºçš„å·ç§¯å€¼ã€‚</p><p>å¦ä¸€æ–¹é¢,äº’ç›¸å…³æ˜¯ä¸¤ä¸ªå‡½æ•°ä¹‹é—´çš„æ»‘åŠ¨ç‚¹ç§¯æˆ–æ»‘åŠ¨å†…ç§¯ã€‚äº’ç›¸å…³ä¸­çš„è¿‡æ»¤å™¨ä¸ç»è¿‡åè½¬,è€Œæ˜¯ç›´æ¥æ»‘è¿‡å‡½æ•° fã€‚f ä¸ g ä¹‹é—´çš„äº¤å‰åŒºåŸŸå³æ˜¯äº’ç›¸å…³ã€‚ä¸‹å›¾å±•ç¤ºäº†å·ç§¯ä¸äº’ç›¸å…³ä¹‹é—´çš„å·®å¼‚ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image.png" alt="ä¿¡å·å¤„ç†ä¸­å·ç§¯ä¸äº’ç›¸å…³ä¹‹é—´çš„å·®å¼‚"></p><p>åœ¨æ·±åº¦å­¦ä¹ ä¸­,å·ç§¯ä¸­çš„è¿‡æ»¤å™¨ä¸ç»è¿‡åè½¬ã€‚ä¸¥æ ¼æ¥è¯´,è¿™æ˜¯äº’ç›¸å…³ã€‚æˆ‘ä»¬<strong>æœ¬è´¨ä¸Šæ˜¯æ‰§è¡Œé€å…ƒç´ ä¹˜æ³•å’ŒåŠ æ³•</strong>ã€‚ä½†åœ¨æ·±åº¦å­¦ä¹ ä¸­,ç›´æ¥å°†å…¶ç§°ä¹‹ä¸ºå·ç§¯æ›´åŠ æ–¹ä¾¿ã€‚è¿™æ²¡ä»€ä¹ˆé—®é¢˜,å› ä¸ºè¿‡æ»¤å™¨çš„æƒé‡æ˜¯åœ¨è®­ç»ƒé˜¶æ®µå­¦ä¹ åˆ°çš„ã€‚å¦‚æœä¸Šé¢ä¾‹å­ä¸­çš„åè½¬å‡½æ•° g æ˜¯æ­£ç¡®çš„å‡½æ•°,é‚£ä¹ˆç»è¿‡è®­ç»ƒå,å­¦ä¹ å¾—åˆ°çš„è¿‡æ»¤å™¨çœ‹èµ·æ¥å°±ä¼šåƒæ˜¯åè½¬åçš„å‡½æ•° gã€‚å› æ­¤,åœ¨è®­ç»ƒä¹‹å‰,æ²¡å¿…è¦åƒåœ¨çœŸæ­£çš„å·ç§¯ä¸­é‚£æ ·é¦–å…ˆåè½¬è¿‡æ»¤å™¨ã€‚</p><h2 id="3D-å·ç§¯"><a href="#3D-å·ç§¯" class="headerlink" title="3D å·ç§¯"></a>3D å·ç§¯</h2><p>åœ¨ä¸Šä¸€èŠ‚çš„è§£é‡Šä¸­,æˆ‘ä»¬çœ‹åˆ°æˆ‘ä»¬å®é™…ä¸Šæ˜¯å¯¹ä¸€ä¸ª 3D ä½“æ‰§è¡Œå·ç§¯ã€‚ä½†é€šå¸¸è€Œè¨€,æˆ‘ä»¬ä»åœ¨æ·±åº¦å­¦ä¹ ä¸­ç§°ä¹‹ä¸º 2D å·ç§¯ã€‚è¿™æ˜¯åœ¨ 3D ä½“ç§¯æ•°æ®ä¸Šçš„ 2D å·ç§¯ã€‚è¿‡æ»¤å™¨æ·±åº¦ä¸è¾“å…¥å±‚æ·±åº¦ä¸€æ ·ã€‚è¿™ä¸ª 3D è¿‡æ»¤å™¨ä»…æ²¿ä¸¤ä¸ªæ–¹å‘ç§»åŠ¨(å›¾åƒçš„é«˜å’Œå®½)ã€‚è¿™ç§æ“ä½œçš„è¾“å‡ºæ˜¯ä¸€å¼  2D å›¾åƒ(ä»…æœ‰ä¸€ä¸ªé€šé“)ã€‚</p><p>å¾ˆè‡ªç„¶,3D å·ç§¯ç¡®å®å­˜åœ¨ã€‚è¿™æ˜¯ 2D å·ç§¯çš„æ³›åŒ–ã€‚ä¸‹é¢å°±æ˜¯ 3D å·ç§¯,å…¶è¿‡æ»¤å™¨æ·±åº¦å°äºè¾“å…¥å±‚æ·±åº¦(æ ¸å¤§å°&lt;é€šé“å¤§å°)ã€‚å› æ­¤,3D è¿‡æ»¤å™¨å¯ä»¥åœ¨æ‰€æœ‰ä¸‰ä¸ªæ–¹å‘(å›¾åƒçš„é«˜åº¦ã€å®½åº¦ã€é€šé“)ä¸Šç§»åŠ¨ã€‚åœ¨æ¯ä¸ªä½ç½®,é€å…ƒç´ çš„ä¹˜æ³•å’ŒåŠ æ³•éƒ½ä¼šæä¾›ä¸€ä¸ªæ•°å€¼ã€‚å› ä¸ºè¿‡æ»¤å™¨æ˜¯æ»‘è¿‡ä¸€ä¸ª 3D ç©ºé—´,æ‰€ä»¥è¾“å‡ºæ•°å€¼ä¹ŸæŒ‰ 3D ç©ºé—´æ’å¸ƒã€‚ä¹Ÿå°±æ˜¯è¯´è¾“å‡ºæ˜¯ä¸€ä¸ª 3D æ•°æ®ã€‚</p><p>åœ¨ 3D å·ç§¯ä¸­,3D è¿‡æ»¤å™¨å¯ä»¥åœ¨æ‰€æœ‰ä¸‰ä¸ªæ–¹å‘(å›¾åƒçš„é«˜åº¦ã€å®½åº¦ã€é€šé“)ä¸Šç§»åŠ¨ã€‚åœ¨æ¯ä¸ªä½ç½®,é€å…ƒç´ çš„ä¹˜æ³•å’ŒåŠ æ³•éƒ½ä¼šæä¾›ä¸€ä¸ªæ•°å€¼ã€‚å› ä¸ºè¿‡æ»¤å™¨æ˜¯æ»‘è¿‡ä¸€ä¸ª 3D ç©ºé—´,æ‰€ä»¥è¾“å‡ºæ•°å€¼ä¹ŸæŒ‰ 3D ç©ºé—´æ’å¸ƒã€‚ä¹Ÿå°±æ˜¯è¯´è¾“å‡ºæ˜¯ä¸€ä¸ª 3D æ•°æ®ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-1.png"></p><p>ä¸ 2D å·ç§¯(ç¼–ç äº† 2D åŸŸä¸­ç›®æ ‡çš„ç©ºé—´å…³ç³»)ç±»ä¼¼,3D å·ç§¯å¯ä»¥æè¿° 3D ç©ºé—´ä¸­ç›®æ ‡çš„ç©ºé—´å…³ç³»ã€‚å¯¹æŸäº›åº”ç”¨(æ¯”å¦‚ç”Ÿç‰©åŒ»å­¦å½±åƒä¸­çš„ <strong>3D åˆ†å‰²&#x2F;é‡æ„</strong>)è€Œè¨€,è¿™æ ·çš„ 3D å…³ç³»å¾ˆé‡è¦,æ¯”å¦‚åœ¨ <strong>CT å’Œ MRI</strong> ä¸­,è¡€ç®¡ä¹‹ç±»çš„ç›®æ ‡ä¼šåœ¨ 3D ç©ºé—´ä¸­èœ¿èœ’æ›²æŠ˜ã€‚</p><h2 id="è½¬ç½®å·ç§¯-å»å·ç§¯"><a href="#è½¬ç½®å·ç§¯-å»å·ç§¯" class="headerlink" title="è½¬ç½®å·ç§¯(å»å·ç§¯)"></a>è½¬ç½®å·ç§¯(å»å·ç§¯)</h2><p>å¯¹äºå¾ˆå¤šç½‘ç»œæ¶æ„çš„å¾ˆå¤šåº”ç”¨è€Œè¨€,æˆ‘ä»¬å¾€å¾€éœ€è¦è¿›è¡Œä¸æ™®é€šå·ç§¯æ–¹å‘ç›¸åçš„è½¬æ¢,å³æˆ‘ä»¬å¸Œæœ›æ‰§è¡Œä¸Šé‡‡æ ·ã€‚ä¾‹å­åŒ…æ‹¬<strong>ç”Ÿæˆé«˜åˆ†è¾¨ç‡å›¾åƒ</strong>ä»¥åŠå°†ä½ç»´ç‰¹å¾å›¾æ˜ å°„åˆ°é«˜ç»´ç©ºé—´,æ¯”å¦‚åœ¨è‡ªåŠ¨ç¼–ç å™¨æˆ–å½¢ä¹‰åˆ†å‰²ä¸­ã€‚(åœ¨åè€…çš„ä¾‹å­ä¸­,å½¢ä¹‰åˆ†å‰²é¦–å…ˆä¼šæå–ç¼–ç å™¨ä¸­çš„ç‰¹å¾å›¾,ç„¶ååœ¨è§£ç å™¨ä¸­æ¢å¤åŸæ¥çš„å›¾åƒå¤§å°,ä½¿å…¶å¯ä»¥åˆ†ç±»åŸå§‹å›¾åƒä¸­çš„æ¯ä¸ªåƒç´ ã€‚)</p><p>å®ç°<strong>ä¸Šé‡‡æ ·</strong>çš„ä¼ ç»Ÿæ–¹æ³•æ˜¯åº”ç”¨æ’å€¼æ–¹æ¡ˆæˆ–äººå·¥åˆ›å»ºè§„åˆ™ã€‚è€Œç¥ç»ç½‘ç»œç­‰ç°ä»£æ¶æ„åˆ™å€¾å‘äºè®©ç½‘ç»œè‡ªå·±è‡ªåŠ¨å­¦ä¹ åˆé€‚çš„å˜æ¢,æ— éœ€äººç±»å¹²é¢„ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è½¬ç½®å·ç§¯ã€‚</p><p>è½¬ç½®å·ç§¯åœ¨æ–‡çŒ®ä¸­ä¹Ÿè¢«ç§°ä¸ºå»å·ç§¯æˆ– fractionally strided convolutionã€‚ä½†æ˜¯,éœ€è¦æŒ‡å‡ºã€Œå»å·ç§¯(deconvolution)ã€è¿™ä¸ªåç§°å¹¶ä¸æ˜¯å¾ˆåˆé€‚,å› ä¸ºè½¬ç½®å·ç§¯å¹¶éä¿¡å·&#x2F;å›¾åƒå¤„ç†é¢†åŸŸå®šä¹‰çš„é‚£ç§çœŸæ­£çš„å»å·ç§¯ã€‚ä»æŠ€æœ¯ä¸Šè®²,ä¿¡å·å¤„ç†ä¸­çš„å»å·ç§¯æ˜¯å·ç§¯è¿ç®—çš„é€†è¿ç®—ã€‚ä½†è¿™é‡Œå´ä¸æ˜¯è¿™ç§è¿ç®—ã€‚å› æ­¤,æŸäº›ä½œè€…å¼ºçƒˆåå¯¹å°†è½¬ç½®å·ç§¯ç§°ä¸ºå»å·ç§¯ã€‚äººä»¬ç§°ä¹‹ä¸ºå»å·ç§¯ä¸»è¦æ˜¯å› ä¸ºè¿™æ ·è¯´å¾ˆç®€å•ã€‚åé¢æˆ‘ä»¬ä¼šä»‹ç»ä¸ºä»€ä¹ˆå°†è¿™ç§è¿ç®—ç§°ä¸ºè½¬ç½®å·ç§¯æ›´è‡ªç„¶ä¸”æ›´åˆé€‚ã€‚</p><p>æˆ‘ä»¬ä¸€ç›´éƒ½å¯ä»¥ä½¿ç”¨ç›´æ¥çš„å·ç§¯å®ç°è½¬ç½®å·ç§¯ã€‚å¯¹äºä¸‹å›¾çš„ä¾‹å­,æˆ‘ä»¬åœ¨ä¸€ä¸ª 2Ã—2 çš„è¾“å…¥(å‘¨å›´åŠ äº† 2Ã—2 çš„å•ä½æ­¥é•¿çš„é›¶å¡«å……)ä¸Šåº”ç”¨ä¸€ä¸ª 3Ã—3 æ ¸çš„è½¬ç½®å·ç§¯ã€‚ä¸Šé‡‡æ ·è¾“å‡ºçš„å¤§å°æ˜¯ 4Ã—4ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-2.png" alt="å°† 2Ã—2 çš„è¾“å…¥ä¸Šé‡‡æ ·æˆ 4Ã—4 çš„è¾“å‡º"></p><p>æœ‰è¶£çš„æ˜¯,é€šè¿‡åº”ç”¨å„ç§å¡«å……å’Œæ­¥é•¿,æˆ‘ä»¬å¯ä»¥å°†åŒæ ·çš„ 2Ã—2 è¾“å…¥å›¾åƒæ˜ å°„åˆ°ä¸åŒçš„å›¾åƒå°ºå¯¸ã€‚ä¸‹é¢,è½¬ç½®å·ç§¯è¢«ç”¨åœ¨äº†åŒä¸€å¼  2Ã—2 è¾“å…¥ä¸Š(è¾“å…¥ä¹‹é—´æ’å…¥äº†ä¸€ä¸ªé›¶,å¹¶ä¸”å‘¨å›´åŠ äº† 2Ã—2 çš„å•ä½æ­¥é•¿çš„é›¶å¡«å……),æ‰€å¾—è¾“å‡ºçš„å¤§å°æ˜¯ 5Ã—5ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%9B%BE%E7%89%871.png" alt="å°† 2Ã—2 çš„è¾“å…¥ä¸Šé‡‡æ ·æˆ 5Ã—5 çš„è¾“å‡º"></p><p>è§‚å¯Ÿä¸Šè¿°ä¾‹å­ä¸­çš„è½¬ç½®å·ç§¯èƒ½å¸®åŠ©æˆ‘ä»¬æ„å»ºèµ·ä¸€äº›ç›´è§‚è®¤è¯†ã€‚ä½†ä¸ºäº†æ³›åŒ–å…¶åº”ç”¨,äº†è§£å…¶å¯ä»¥å¦‚ä½•é€šè¿‡è®¡ç®—æœºçš„çŸ©é˜µä¹˜æ³•å®ç°æ˜¯æœ‰ç›Šçš„ã€‚ä»è¿™ä¸€ç‚¹ä¸Šæˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ä¸ºä½•ã€Œè½¬ç½®å·ç§¯ã€æ‰æ˜¯åˆé€‚çš„åç§°ã€‚</p><p>åœ¨å·ç§¯ä¸­,æˆ‘ä»¬å®šä¹‰ C ä¸ºå·ç§¯æ ¸,Large ä¸ºè¾“å…¥å›¾åƒ,Small ä¸ºè¾“å‡ºå›¾åƒã€‚ç»è¿‡å·ç§¯(çŸ©é˜µä¹˜æ³•)å,æˆ‘ä»¬å°†å¤§å›¾åƒä¸‹é‡‡æ ·ä¸ºå°å›¾åƒã€‚è¿™ç§çŸ©é˜µä¹˜æ³•çš„å·ç§¯çš„å®ç°éµç…§:C x Large &#x3D; Smallã€‚</p><p>ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†è¿™ç§è¿ç®—çš„å·¥ä½œæ–¹å¼ã€‚å®ƒå°†è¾“å…¥å¹³å±•ä¸º 16Ã—1 çš„çŸ©é˜µ,å¹¶å°†å·ç§¯æ ¸è½¬æ¢ä¸ºä¸€ä¸ªç¨€ç–çŸ©é˜µ(4Ã—16)ã€‚ç„¶å,åœ¨ç¨€ç–çŸ©é˜µå’Œå¹³å±•çš„è¾“å…¥ä¹‹é—´ä½¿ç”¨çŸ©é˜µä¹˜æ³•ã€‚ä¹‹å,å†å°†æ‰€å¾—åˆ°çš„çŸ©é˜µ(4Ã—1)è½¬æ¢ä¸º 2Ã—2 çš„è¾“å‡ºã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-3.png" alt="å·ç§¯çš„çŸ©é˜µä¹˜æ³•:å°† Large è¾“å…¥å›¾åƒ(4Ã—4)è½¬æ¢ä¸º Small è¾“å‡ºå›¾åƒ(2Ã—2)"></p><p>ç°åœ¨,å¦‚æœæˆ‘ä»¬åœ¨ç­‰å¼çš„ä¸¤è¾¹éƒ½ä¹˜ä¸ŠçŸ©é˜µçš„è½¬ç½® CT,å¹¶å€ŸåŠ©ã€Œä¸€ä¸ªçŸ©é˜µä¸å…¶è½¬ç½®çŸ©é˜µçš„ä¹˜æ³•å¾—åˆ°ä¸€ä¸ªå•ä½çŸ©é˜µã€è¿™ä¸€æ€§è´¨,é‚£ä¹ˆæˆ‘ä»¬å°±èƒ½å¾—åˆ°å…¬å¼ CT x Small &#x3D; Large,å¦‚ä¸‹å›¾æ‰€ç¤º:<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-4.png" alt="å·ç§¯çš„çŸ©é˜µä¹˜æ³•:å°† Small è¾“å…¥å›¾åƒ(2Ã—2)è½¬æ¢ä¸º Large è¾“å‡ºå›¾åƒ(4Ã—4)"></p><p>è¿™é‡Œå¯ä»¥çœ‹åˆ°,æˆ‘ä»¬æ‰§è¡Œäº†ä»å°å›¾åƒåˆ°å¤§å›¾åƒçš„ä¸Šé‡‡æ ·ã€‚è¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦å®ç°çš„ç›®æ ‡ã€‚ç°åœ¨ã€‚ä½ å°±çŸ¥é“ã€Œè½¬ç½®å·ç§¯ã€è¿™ä¸ªåå­—çš„ç”±æ¥äº†ã€‚</p><p>è½¬ç½®çŸ©é˜µçš„ç®—æœ¯è§£é‡Šå¯å‚é˜…:<br><a href="https://arxiv.org/abs/1603.07285">https://arxiv.org/abs/1603.07285</a></p><h2 id="æ‰©å¼ å·ç§¯-Atrous-å·ç§¯"><a href="#æ‰©å¼ å·ç§¯-Atrous-å·ç§¯" class="headerlink" title="æ‰©å¼ å·ç§¯(Atrous å·ç§¯)"></a>æ‰©å¼ å·ç§¯(Atrous å·ç§¯)</h2><p>æ‰©å¼ å·ç§¯ç”±è¿™ä¸¤ç¯‡å¼•å…¥:</p><p><a href="https://arxiv.org/abs/1412.7062%EF%BC%9B">https://arxiv.org/abs/1412.7062ï¼›</a></p><p><a href="https://arxiv.org/abs/1511.07122">https://arxiv.org/abs/1511.07122</a> </p><p>è¿™æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ç¦»æ•£å·ç§¯:</p><p>$$<br>(F*k)(\boldsymbol{p})&#x3D;\sum_{s+t&#x3D;p}F(\boldsymbol{s})k(\boldsymbol{t})<br>$$</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-6.png" alt="æ ‡å‡†å·ç§¯"></p><p>æ‰©å¼ å·ç§¯å¦‚ä¸‹:</p><p>$$<br>(F*_{l}k)(\boldsymbol{p})&#x3D;\sum_{s+lt&#x3D;p}F(\boldsymbol{s})k(\boldsymbol{t})<br>$$</p><p>å½“ l&#x3D;1 æ—¶,æ‰©å¼ å·ç§¯ä¼šå˜å¾—å’Œæ ‡å‡†å·ç§¯ä¸€æ ·ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-7.png" alt="æ‰©å¼ å·ç§¯"><br>ç›´è§‚è€Œè¨€,æ‰©å¼ å·ç§¯å°±æ˜¯é€šè¿‡åœ¨æ ¸å…ƒç´ ä¹‹é—´æ’å…¥ç©ºæ ¼æ¥ä½¿æ ¸ã€Œè†¨èƒ€ã€ã€‚æ–°å¢çš„å‚æ•° l(æ‰©å¼ ç‡)è¡¨ç¤ºæˆ‘ä»¬å¸Œæœ›å°†æ ¸åŠ å®½çš„ç¨‹åº¦ã€‚å…·ä½“å®ç°å¯èƒ½å„ä¸ç›¸åŒ,ä½†<strong>é€šå¸¸æ˜¯åœ¨æ ¸å…ƒç´ ä¹‹é—´æ’å…¥ l-1 ä¸ªç©ºæ ¼</strong>ã€‚ä¸‹é¢å±•ç¤ºäº† l &#x3D; 1, 2, 4 æ—¶çš„æ ¸å¤§å°ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-8.png" alt="æ‰©å¼ å·ç§¯çš„æ„Ÿå—é‡"></p><p>åœ¨è¿™å¼ å›¾åƒä¸­,3Ã—3 çš„çº¢ç‚¹è¡¨ç¤ºç»è¿‡å·ç§¯å,è¾“å‡ºå›¾åƒæ˜¯ 3Ã—3 åƒç´ ã€‚å°½ç®¡æ‰€æœ‰è¿™ä¸‰ä¸ªæ‰©å¼ å·ç§¯çš„è¾“å‡ºéƒ½æ˜¯åŒä¸€å°ºå¯¸,ä½†æ¨¡å‹è§‚å¯Ÿåˆ°çš„æ„Ÿå—é‡æœ‰å¾ˆå¤§çš„ä¸åŒã€‚l&#x3D;1 æ—¶æ„Ÿå—é‡ä¸º 3Ã—3,l&#x3D;2 æ—¶ä¸º 7Ã—7ã€‚l&#x3D;3 æ—¶,æ„Ÿå—é‡çš„å¤§å°å°±å¢åŠ åˆ°äº† 15Ã—15ã€‚æœ‰è¶£çš„æ˜¯,ä¸è¿™äº›æ“ä½œç›¸å…³çš„å‚æ•°çš„æ•°é‡æ˜¯ç›¸ç­‰çš„ã€‚æˆ‘ä»¬ã€Œè§‚å¯Ÿã€æ›´å¤§çš„æ„Ÿå—é‡ä¸ä¼šæœ‰é¢å¤–çš„æˆæœ¬ã€‚å› æ­¤,<strong>æ‰©å¼ å·ç§¯å¯ç”¨äºå»‰ä»·åœ°å¢å¤§è¾“å‡ºå•å…ƒçš„æ„Ÿå—é‡,è€Œä¸ä¼šå¢å¤§å…¶æ ¸å¤§å°</strong>,è¿™åœ¨å¤šä¸ªæ‰©å¼ å·ç§¯å½¼æ­¤å †å æ—¶å°¤å…¶æœ‰æ•ˆã€‚</p><p>è®ºæ–‡ã€ŠMulti-scale context aggregation by dilated convolutionsã€‹çš„ä½œè€…ç”¨å¤šä¸ªæ‰©å¼ å·ç§¯å±‚æ„å»ºäº†ä¸€ä¸ªç½‘ç»œ,å…¶ä¸­æ‰©å¼ ç‡ l æ¯å±‚éƒ½æŒ‰æŒ‡æ•°å¢å¤§ã€‚ç”±æ­¤,æœ‰æ•ˆçš„æ„Ÿå—é‡å¤§å°éšå±‚è€ŒæŒ‡æ•°å¢é•¿,è€Œå‚æ•°çš„æ•°é‡ä»…çº¿æ€§å¢é•¿ã€‚</p><p>è¿™ç¯‡è®ºæ–‡ä¸­<strong>æ‰©å¼ å·ç§¯çš„ä½œç”¨æ˜¯ç³»ç»Ÿæ€§åœ°èšåˆå¤šä¸ªæ¯”ä¾‹çš„å½¢å¢ƒä¿¡æ¯,è€Œä¸ä¸¢å¤±åˆ†è¾¨ç‡</strong>ã€‚è¿™ç¯‡è®ºæ–‡è¡¨æ˜å…¶æå‡ºçš„æ¨¡å—èƒ½å¤Ÿæå‡é‚£æ—¶å€™(2016 å¹´)çš„å½“å‰æœ€ä½³å½¢ä¹‰åˆ†å‰²ç³»ç»Ÿçš„å‡†ç¡®åº¦ã€‚è¯·å‚é˜…é‚£ç¯‡è®ºæ–‡äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p><h2 id="å¯åˆ†å·ç§¯"><a href="#å¯åˆ†å·ç§¯" class="headerlink" title="å¯åˆ†å·ç§¯"></a>å¯åˆ†å·ç§¯</h2><p>æŸäº›ç¥ç»ç½‘ç»œæ¶æ„ä½¿ç”¨äº†å¯åˆ†å·ç§¯,æ¯”å¦‚ <strong>MobileNets</strong>ã€‚å¯åˆ†å·ç§¯æœ‰<em>ç©ºé—´å¯åˆ†å·ç§¯å’Œæ·±åº¦å¯åˆ†å·ç§¯</em>ã€‚</p><h3 id="ç©ºé—´å¯åˆ†å·ç§¯"><a href="#ç©ºé—´å¯åˆ†å·ç§¯" class="headerlink" title="ç©ºé—´å¯åˆ†å·ç§¯"></a>ç©ºé—´å¯åˆ†å·ç§¯</h3><p>ç©ºé—´å¯åˆ†å·ç§¯æ“ä½œçš„æ˜¯å›¾åƒçš„ 2D ç©ºé—´ç»´åº¦,å³é«˜å’Œå®½ã€‚ä»æ¦‚å¿µä¸Šçœ‹,ç©ºé—´å¯åˆ†å·ç§¯æ˜¯å°†ä¸€ä¸ªå·ç§¯åˆ†è§£ä¸ºä¸¤ä¸ªå•ç‹¬çš„è¿ç®—ã€‚å¯¹äºä¸‹é¢çš„ç¤ºä¾‹,3Ã—3 çš„ Sobel æ ¸è¢«åˆ†æˆäº†ä¸€ä¸ª 3Ã—1 æ ¸å’Œä¸€ä¸ª 1Ã—3 æ ¸ã€‚<br>$$<br>\begin{bmatrix}-1&amp;0&amp;1\-2&amp;0&amp;2\-1&amp;0&amp;1\end{bmatrix}\begin{array}{ccc}&#x3D;&amp;\begin{bmatrix}1\2\1\end{bmatrix}&amp;\times&amp;[-1&amp;0&amp;1]\end{array}<br>$$<br>Sobel æ ¸å¯åˆ†ä¸ºä¸€ä¸ª 3x1 å’Œä¸€ä¸ª 1x3 æ ¸åœ¨å·ç§¯ä¸­,3Ã—3 æ ¸ç›´æ¥ä¸å›¾åƒå·ç§¯ã€‚åœ¨ç©ºé—´å¯åˆ†å·ç§¯ä¸­,3Ã—1 æ ¸é¦–å…ˆä¸å›¾åƒå·ç§¯,ç„¶åå†åº”ç”¨ 1Ã—3 æ ¸ã€‚è¿™æ ·,æ‰§è¡ŒåŒæ ·çš„æ“ä½œæ—¶ä»…éœ€ 6 ä¸ªå‚æ•°,è€Œä¸æ˜¯ 9 ä¸ªã€‚</p><p>æ­¤å¤–,ä½¿ç”¨ç©ºé—´å¯åˆ†å·ç§¯æ—¶æ‰€éœ€çš„çŸ©é˜µä¹˜æ³•ä¹Ÿæ›´å°‘ã€‚ç»™ä¸€ä¸ªå…·ä½“çš„ä¾‹å­,5Ã—5 å›¾åƒä¸ 3Ã—3 æ ¸çš„å·ç§¯(æ­¥å¹…&#x3D;1,å¡«å……&#x3D;0)è¦æ±‚åœ¨ 3 ä¸ªä½ç½®æ°´å¹³åœ°æ‰«ææ ¸(è¿˜æœ‰ 3 ä¸ªå‚ç›´çš„ä½ç½®)ã€‚æ€»å…±å°±æ˜¯ 9 ä¸ªä½ç½®,è¡¨ç¤ºä¸ºä¸‹å›¾ä¸­çš„ç‚¹ã€‚åœ¨æ¯ä¸ªä½ç½®,ä¼šåº”ç”¨ 9 æ¬¡é€å…ƒç´ ä¹˜æ³•ã€‚æ€»å…±å°±æ˜¯ 9Ã—9&#x3D;81 æ¬¡ä¹˜æ³•ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-9.png" alt="å…·æœ‰ 1 ä¸ªé€šé“çš„æ ‡å‡†å·ç§¯"></p><p>å¦ä¸€æ–¹é¢,å¯¹äºç©ºé—´å¯åˆ†å·ç§¯,æˆ‘ä»¬é¦–å…ˆåœ¨ 5Ã—5 çš„å›¾åƒä¸Šåº”ç”¨ä¸€ä¸ª 3Ã—1 çš„è¿‡æ»¤å™¨ã€‚æˆ‘ä»¬å¯ä»¥åœ¨æ°´å¹³ 5 ä¸ªä½ç½®å’Œå‚ç›´ 3 ä¸ªä½ç½®æ‰«æè¿™æ ·çš„æ ¸ã€‚æ€»å…±å°±æ˜¯ 5Ã—3&#x3D;15 ä¸ªä½ç½®,è¡¨ç¤ºä¸ºä¸‹å›¾ä¸­çš„ç‚¹ã€‚åœ¨æ¯ä¸ªä½ç½®,ä¼šåº”ç”¨ 3 æ¬¡é€å…ƒç´ ä¹˜æ³•ã€‚æ€»å…±å°±æ˜¯ 15Ã—3&#x3D;45 æ¬¡ä¹˜æ³•ã€‚ç°åœ¨æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ª 3Ã—5 çš„çŸ©é˜µã€‚è¿™ä¸ªçŸ©é˜µå†ä¸ä¸€ä¸ª 1Ã—3 æ ¸å·ç§¯,å³åœ¨æ°´å¹³ 3 ä¸ªä½ç½®å’Œå‚ç›´ 3 ä¸ªä½ç½®æ‰«æè¿™ä¸ªçŸ©é˜µã€‚å¯¹äºè¿™ 9 ä¸ªä½ç½®ä¸­çš„æ¯ä¸€ä¸ª,åº”ç”¨ 3 æ¬¡é€å…ƒç´ ä¹˜æ³•ã€‚è¿™ä¸€æ­¥éœ€è¦ 9Ã—3&#x3D;27 æ¬¡ä¹˜æ³•ã€‚å› æ­¤,æ€»ä½“è€Œè¨€,ç©ºé—´å¯åˆ†å·ç§¯éœ€è¦ 45+27&#x3D;72 æ¬¡ä¹˜æ³•,å°‘äºæ™®é€šå·ç§¯ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-10.png" alt="å…·æœ‰ 1 ä¸ªé€šé“çš„ç©ºé—´å¯åˆ†å·ç§¯"></p><p>æˆ‘ä»¬ç¨å¾®æ¨å¹¿ä¸€ä¸‹ä¸Šé¢çš„ä¾‹å­ã€‚å‡è®¾æˆ‘ä»¬ç°åœ¨å°†å·ç§¯åº”ç”¨äºä¸€å¼  NÃ—N çš„å›¾åƒä¸Š,å·ç§¯æ ¸ä¸º mÃ—m,æ­¥å¹…ä¸º 1,å¡«å……ä¸º 0ã€‚ä¼ ç»Ÿå·ç§¯éœ€è¦ $(N-2) * (N-2) * m * m$ æ¬¡ä¹˜æ³•,ç©ºé—´å¯åˆ†å·ç§¯éœ€è¦ $N * (N-2) * m + (N-2) * (N-2) * m &#x3D; (2N-2) * (N-2) * m$ æ¬¡ä¹˜æ³•ã€‚ç©ºé—´å¯åˆ†å·ç§¯ä¸æ ‡å‡†å·ç§¯çš„è®¡ç®—æˆæœ¬æ¯”ä¸º:<br>$$<br>\frac2m+\frac2{m(N-2)}<br>$$</p><p>å› ä¸ºå›¾åƒå°ºå¯¸ N è¿œå¤§äºè¿‡æ»¤å™¨å¤§å°(N&gt;&gt;m),æ‰€ä»¥è¿™ä¸ªæ¯”å°±å˜æˆäº† 2&#x2F;mã€‚ä¹Ÿå°±æ˜¯è¯´,åœ¨è¿™ç§æ¸è¿›æƒ…å†µ(N&gt;&gt;m)ä¸‹,<strong>å½“è¿‡æ»¤å™¨å¤§å°ä¸º 3Ã—3 æ—¶,ç©ºé—´å¯åˆ†å·ç§¯çš„è®¡ç®—æˆæœ¬æ˜¯æ ‡å‡†å·ç§¯çš„ 2&#x2F;3ã€‚è¿‡æ»¤å™¨å¤§å°ä¸º 5Ã—5 æ—¶è¿™ä¸€æ•°å€¼æ˜¯ 2&#x2F;5ï¼›è¿‡æ»¤å™¨å¤§å°ä¸º 7Ã—7 æ—¶åˆ™ä¸º 2&#x2F;7ã€‚</strong></p><p>å°½ç®¡ç©ºé—´å¯åˆ†å·ç§¯èƒ½èŠ‚çœæˆæœ¬,ä½†æ·±åº¦å­¦ä¹ å´å¾ˆå°‘ä½¿ç”¨å®ƒã€‚ä¸€å¤§ä¸»è¦åŸå› æ˜¯å¹¶éæ‰€æœ‰çš„æ ¸éƒ½èƒ½åˆ†æˆä¸¤ä¸ªæ›´å°çš„æ ¸ã€‚å¦‚æœæˆ‘ä»¬ç”¨ç©ºé—´å¯åˆ†å·ç§¯æ›¿ä»£æ‰€æœ‰çš„ä¼ ç»Ÿå·ç§¯,é‚£ä¹ˆæˆ‘ä»¬å°±é™åˆ¶äº†è‡ªå·±åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æœç´¢æ‰€æœ‰å¯èƒ½çš„æ ¸ã€‚è¿™æ ·å¾—åˆ°çš„è®­ç»ƒç»“æœå¯èƒ½æ˜¯æ¬¡ä¼˜çš„ã€‚</p><h3 id="æ·±åº¦å¯åˆ†å·ç§¯"><a href="#æ·±åº¦å¯åˆ†å·ç§¯" class="headerlink" title="æ·±åº¦å¯åˆ†å·ç§¯"></a>æ·±åº¦å¯åˆ†å·ç§¯</h3><p>ç°åœ¨æ¥çœ‹æ·±åº¦å¯åˆ†å·ç§¯,è¿™åœ¨æ·±åº¦å­¦ä¹ é¢†åŸŸè¦å¸¸ç”¨å¾—å¤š(æ¯”å¦‚ MobileNet å’Œ Xception)ã€‚æ·±åº¦å¯åˆ†å·ç§¯åŒ…å«ä¸¤ä¸ªæ­¥éª¤:æ·±åº¦å·ç§¯å’Œ 1Ã—1 å·ç§¯ã€‚</p><p>åœ¨æè¿°è¿™äº›æ­¥éª¤ä¹‹å‰,æœ‰å¿…è¦å›é¡¾ä¸€ä¸‹æˆ‘ä»¬ä¹‹å‰ä»‹ç»çš„ 2D å·ç§¯æ ¸ 1Ã—1 å·ç§¯ã€‚é¦–å…ˆå¿«é€Ÿå›é¡¾æ ‡å‡†çš„ 2D å·ç§¯ã€‚ä¸¾ä¸€ä¸ªå…·ä½“ä¾‹å­,å‡è®¾è¾“å…¥å±‚çš„å¤§å°æ˜¯ 7Ã—7Ã—3(é«˜Ã—å®½Ã—é€šé“),è€Œè¿‡æ»¤å™¨çš„å¤§å°æ˜¯ 3Ã—3Ã—3ã€‚ç»è¿‡ä¸ä¸€ä¸ªè¿‡æ»¤å™¨çš„ 2D å·ç§¯ä¹‹å,è¾“å‡ºå±‚çš„å¤§å°æ˜¯ 5Ã—5Ã—1(ä»…æœ‰ä¸€ä¸ªé€šé“)ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-11.png" alt="ç”¨äºåˆ›å»ºä»…æœ‰ 1 å±‚çš„è¾“å‡ºçš„æ ‡å‡† 2D å·ç§¯,ä½¿ç”¨ 1 ä¸ªè¿‡æ»¤å™¨"></p><p>ä¸€èˆ¬æ¥è¯´,ä¸¤ä¸ªç¥ç»ç½‘ç»œå±‚ä¹‹é—´ä¼šåº”ç”¨å¤šä¸ªè¿‡æ»¤å™¨ã€‚å‡è®¾æˆ‘ä»¬è¿™é‡Œæœ‰ 128 ä¸ªè¿‡æ»¤å™¨ã€‚åœ¨åº”ç”¨äº†è¿™ 128 ä¸ª 2D å·ç§¯ä¹‹å,æˆ‘ä»¬æœ‰ 128 ä¸ª 5Ã—5Ã—1 çš„è¾“å‡ºæ˜ å°„å›¾(map)ã€‚ç„¶åæˆ‘ä»¬å°†è¿™äº›æ˜ å°„å›¾å †å æˆå¤§å°ä¸º 5Ã—5Ã—128 çš„å•å±‚ã€‚é€šè¿‡è¿™ç§æ“ä½œ,æˆ‘ä»¬å¯å°†è¾“å…¥å±‚(7Ã—7Ã—3)è½¬æ¢æˆè¾“å‡ºå±‚(5Ã—5Ã—128)ã€‚ç©ºé—´ç»´åº¦(å³é«˜åº¦å’Œå®½åº¦)ä¼šå˜å°,è€Œæ·±åº¦ä¼šå¢å¤§ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-12.png" alt="ç”¨äºåˆ›å»ºæœ‰ 128 å±‚çš„è¾“å‡ºçš„æ ‡å‡† 2D å·ç§¯,è¦ä½¿ç”¨ 128 ä¸ªè¿‡æ»¤å™¨"></p><p>ç°åœ¨ä½¿ç”¨æ·±åº¦å¯åˆ†å·ç§¯,çœ‹çœ‹æˆ‘ä»¬å¦‚ä½•å®ç°åŒæ ·çš„å˜æ¢ã€‚</p><p>é¦–å…ˆ,æˆ‘ä»¬å°†æ·±åº¦å·ç§¯åº”ç”¨äºè¾“å…¥å±‚ã€‚ä½†æˆ‘ä»¬ä¸ä½¿ç”¨ 2D å·ç§¯ä¸­å¤§å°ä¸º 3Ã—3Ã—3 çš„å•ä¸ªè¿‡æ»¤å™¨,è€Œæ˜¯åˆ†å¼€ä½¿ç”¨ 3 ä¸ªæ ¸ã€‚æ¯ä¸ªè¿‡æ»¤å™¨çš„å¤§å°ä¸º 3Ã—3Ã—1ã€‚æ¯ä¸ªæ ¸ä¸è¾“å…¥å±‚çš„ä¸€ä¸ªé€šé“å·ç§¯(ä»…ä¸€ä¸ªé€šé“,è€Œéæ‰€æœ‰é€šé“ï¼)ã€‚æ¯ä¸ªè¿™æ ·çš„å·ç§¯éƒ½èƒ½æä¾›å¤§å°ä¸º 5Ã—5Ã—1 çš„æ˜ å°„å›¾ã€‚ç„¶åæˆ‘ä»¬å°†è¿™äº›æ˜ å°„å›¾å †å åœ¨ä¸€èµ·,åˆ›å»ºä¸€ä¸ª 5Ã—5Ã—3 çš„å›¾åƒã€‚ç»è¿‡è¿™ä¸ªæ“ä½œä¹‹å,æˆ‘ä»¬å¾—åˆ°å¤§å°ä¸º 5Ã—5Ã—3 çš„è¾“å‡ºã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥é™ä½ç©ºé—´ç»´åº¦äº†,ä½†æ·±åº¦è¿˜æ˜¯å’Œä¹‹å‰ä¸€æ ·ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-13.png"></p><p>æ·±åº¦å¯åˆ†å·ç§¯â€”â€”ç¬¬ä¸€æ­¥:æˆ‘ä»¬ä¸ä½¿ç”¨ 2D å·ç§¯ä¸­å¤§å°ä¸º 3Ã—3Ã—3 çš„å•ä¸ªè¿‡æ»¤å™¨,è€Œæ˜¯åˆ†å¼€ä½¿ç”¨ 3 ä¸ªæ ¸ã€‚æ¯ä¸ªè¿‡æ»¤å™¨çš„å¤§å°ä¸º 3Ã—3Ã—1ã€‚æ¯ä¸ªæ ¸ä¸è¾“å…¥å±‚çš„ä¸€ä¸ªé€šé“å·ç§¯(ä»…ä¸€ä¸ªé€šé“,è€Œéæ‰€æœ‰é€šé“ï¼)ã€‚æ¯ä¸ªè¿™æ ·çš„å·ç§¯éƒ½èƒ½æä¾›å¤§å°ä¸º 5Ã—5Ã—1 çš„æ˜ å°„å›¾ã€‚ç„¶åæˆ‘ä»¬å°†è¿™äº›æ˜ å°„å›¾å †å åœ¨ä¸€èµ·,åˆ›å»ºä¸€ä¸ª 5Ã—5Ã—3 çš„å›¾åƒã€‚ç»è¿‡è¿™ä¸ªæ“ä½œä¹‹å,æˆ‘ä»¬å¾—åˆ°å¤§å°ä¸º 5Ã—5Ã—3 çš„è¾“å‡ºã€‚</p><p>åœ¨æ·±åº¦å¯åˆ†å·ç§¯çš„ç¬¬äºŒæ­¥,ä¸ºäº†æ‰©å±•æ·±åº¦,æˆ‘ä»¬åº”ç”¨ä¸€ä¸ªæ ¸å¤§å°ä¸º 1Ã—1Ã—3 çš„ 1Ã—1 å·ç§¯ã€‚å°† 5Ã—5Ã—3 çš„è¾“å…¥å›¾åƒä¸æ¯ä¸ª 1Ã—1Ã—3 çš„æ ¸å·ç§¯,å¯å¾—åˆ°å¤§å°ä¸º 5Ã—5Ã—1 çš„æ˜ å°„å›¾ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-14.png"><br>å› æ­¤,åœ¨åº”ç”¨äº† 128 ä¸ª 1Ã—1 å·ç§¯ä¹‹å,æˆ‘ä»¬å¾—åˆ°å¤§å°ä¸º 5Ã—5Ã—128 çš„å±‚ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-15.png"></p><p>é€šè¿‡è¿™ä¸¤ä¸ªæ­¥éª¤,æ·±åº¦å¯åˆ†å·ç§¯ä¹Ÿä¼šå°†è¾“å…¥å±‚(7Ã—7Ã—3)å˜æ¢åˆ°è¾“å‡ºå±‚(5Ã—5Ã—128)ã€‚</p><p>ä¸‹å›¾å±•ç¤ºäº†æ·±åº¦å¯åˆ†å·ç§¯çš„æ•´ä¸ªè¿‡ç¨‹ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-16.png" alt="æ·±åº¦å¯åˆ†å·ç§¯çš„æ•´ä¸ªè¿‡ç¨‹"></p><p>æ‰€ä»¥,æ·±åº¦å¯åˆ†å·ç§¯æœ‰ä½•ä¼˜åŠ¿å‘¢ï¼Ÿæ•ˆç‡ï¼ç›¸æ¯”äº 2D å·ç§¯,<strong>æ·±åº¦å¯åˆ†å·ç§¯æ‰€éœ€çš„æ“ä½œè¦å°‘å¾—å¤š</strong>ã€‚</p><p>å›å¿†ä¸€ä¸‹æˆ‘ä»¬çš„ 2D å·ç§¯ä¾‹å­çš„è®¡ç®—æˆæœ¬ã€‚æœ‰ 128 ä¸ª 3Ã—3Ã—3 ä¸ªæ ¸ç§»åŠ¨äº† 5Ã—5 æ¬¡,ä¹Ÿå°±æ˜¯ 128 x 3 x 3 x 3 x 5 x 5 &#x3D; 86400 æ¬¡ä¹˜æ³•ã€‚</p><p>å¯åˆ†å·ç§¯åˆå¦‚ä½•å‘¢ï¼Ÿåœ¨ç¬¬ä¸€ä¸ªæ·±åº¦å·ç§¯æ­¥éª¤,æœ‰ 3 ä¸ª 3Ã—3Ã—1 æ ¸ç§»åŠ¨ 5Ã—5 æ¬¡,ä¹Ÿå°±æ˜¯ 3x3x3x1x5x5 &#x3D; 675 æ¬¡ä¹˜æ³•ã€‚åœ¨ 1Ã—1 å·ç§¯çš„ç¬¬äºŒæ­¥,æœ‰ 128 ä¸ª 1Ã—1Ã—3 æ ¸ç§»åŠ¨ 5Ã—5 æ¬¡,å³ 128 x 1 x 1 x 3 x 5 x 5 &#x3D; 9600 æ¬¡ä¹˜æ³•ã€‚å› æ­¤,æ·±åº¦å¯åˆ†å·ç§¯å…±æœ‰ 675 + 9600 &#x3D; 10275 æ¬¡ä¹˜æ³•ã€‚è¿™æ ·çš„æˆæœ¬å¤§æ¦‚ä»…æœ‰ 2D å·ç§¯çš„ 12%ï¼</p><p>æ‰€ä»¥,å¯¹äºä»»æ„å°ºå¯¸çš„å›¾åƒ,å¦‚æœæˆ‘ä»¬åº”ç”¨æ·±åº¦å¯åˆ†å·ç§¯,æˆ‘ä»¬å¯ä»¥èŠ‚çœå¤šå°‘æ—¶é—´ï¼Ÿè®©æˆ‘ä»¬æ³›åŒ–ä»¥ä¸Šä¾‹å­ã€‚ç°åœ¨,å¯¹äºå¤§å°ä¸º HÃ—WÃ—D çš„è¾“å…¥å›¾åƒ,å¦‚æœä½¿ç”¨ Nc ä¸ªå¤§å°ä¸º hÃ—hÃ—D çš„æ ¸æ‰§è¡Œ 2D å·ç§¯(æ­¥å¹…ä¸º 1,å¡«å……ä¸º 0,å…¶ä¸­ h æ˜¯å¶æ•°)ã€‚ä¸ºäº†å°†è¾“å…¥å±‚(HÃ—WÃ—D)å˜æ¢åˆ°è¾“å‡ºå±‚((H-h+1)x (W-h+1) x Nc),æ‰€éœ€çš„æ€»ä¹˜æ³•æ¬¡æ•°ä¸º:<br>Nc x h x h x D x (H-h+1) x (W-h+1)<br>å¦ä¸€æ–¹é¢,å¯¹äºåŒæ ·çš„å˜æ¢,æ·±åº¦å¯åˆ†å·ç§¯æ‰€éœ€çš„ä¹˜æ³•æ¬¡æ•°ä¸º:<br>D x h x h x 1 x (H-h+1) x (W-h+1) + Nc x 1 x 1 x D x (H-h+1) x (W-h+1) &#x3D; (h x h + Nc) x D x (H-h+1) x (W-h+1)<br>åˆ™æ·±åº¦å¯åˆ†å·ç§¯ä¸ 2D å·ç§¯æ‰€éœ€çš„ä¹˜æ³•æ¬¡æ•°æ¯”ä¸º:<br>$$<br>\frac{1}{N_{c}}+\frac{1}{h^{2}}<br>$$</p><p>ç°ä»£å¤§å¤šæ•°æ¶æ„çš„è¾“å‡ºå±‚é€šå¸¸éƒ½æœ‰å¾ˆå¤šé€šé“,å¯è¾¾æ•°ç™¾ç”šè‡³ä¸Šåƒã€‚å¯¹äºè¿™æ ·çš„å±‚(Nc &gt;&gt; h),åˆ™ä¸Šå¼å¯çº¦ç®€ä¸º 1 &#x2F; hÂ²ã€‚åŸºäºæ­¤,å¦‚æœä½¿ç”¨ 3Ã—3 è¿‡æ»¤å™¨,åˆ™ 2D å·ç§¯æ‰€éœ€çš„ä¹˜æ³•æ¬¡æ•°æ˜¯æ·±åº¦å¯åˆ†å·ç§¯çš„ 9 å€ã€‚å¦‚æœä½¿ç”¨ 5Ã—5 è¿‡æ»¤å™¨,åˆ™ 2D å·ç§¯æ‰€éœ€çš„ä¹˜æ³•æ¬¡æ•°æ˜¯æ·±åº¦å¯åˆ†å·ç§¯çš„ 25 å€ã€‚</p><p><em>ä½¿ç”¨æ·±åº¦å¯åˆ†å·ç§¯æœ‰ä»€ä¹ˆåå¤„å—ï¼Ÿå½“ç„¶æ˜¯æœ‰çš„ã€‚æ·±åº¦å¯åˆ†å·ç§¯ä¼šé™ä½å·ç§¯ä¸­å‚æ•°çš„æ•°é‡ã€‚å› æ­¤,å¯¹äºè¾ƒå°çš„æ¨¡å‹è€Œè¨€,å¦‚æœç”¨æ·±åº¦å¯åˆ†å·ç§¯æ›¿ä»£ 2D å·ç§¯,æ¨¡å‹çš„èƒ½åŠ›å¯èƒ½ä¼šæ˜¾è‘—ä¸‹é™</em>ã€‚å› æ­¤,å¾—åˆ°çš„æ¨¡å‹å¯èƒ½æ˜¯æ¬¡ä¼˜çš„ã€‚ä½†æ˜¯,å¦‚æœä½¿ç”¨å¾—å½“,æ·±åº¦å¯åˆ†å·ç§¯èƒ½åœ¨ä¸é™ä½ä½ çš„æ¨¡å‹æ€§èƒ½çš„å‰æä¸‹å¸®åŠ©ä½ å®ç°æ•ˆç‡æå‡ã€‚</p><h2 id="åˆ†ç»„å·ç§¯"><a href="#åˆ†ç»„å·ç§¯" class="headerlink" title="åˆ†ç»„å·ç§¯"></a>åˆ†ç»„å·ç§¯</h2><p>AlexNet è®ºæ–‡(<a href="https://papers.nips.cc/paper/4824-imagenet-classification-with-deep-convolutional-neural-networks.pdf)%E5%9C%A8">https://papers.nips.cc/paper/4824-imagenet-classification-with-deep-convolutional-neural-networks.pdf)åœ¨</a> 2012 å¹´å¼•å…¥äº†åˆ†ç»„å·ç§¯ã€‚å®ç°åˆ†ç»„å·ç§¯çš„ä¸»è¦åŸå› æ˜¯è®©ç½‘ç»œè®­ç»ƒå¯åœ¨ 2 ä¸ªå†…å­˜æœ‰é™(æ¯ä¸ª GPU æœ‰ 1.5 GB å†…å­˜)çš„ GPU ä¸Šè¿›è¡Œã€‚ä¸‹é¢çš„ AlexNet è¡¨æ˜åœ¨å¤§å¤šæ•°å±‚ä¸­éƒ½æœ‰ä¸¤ä¸ªåˆ†å¼€çš„å·ç§¯è·¯å¾„ã€‚è¿™æ˜¯åœ¨ä¸¤ä¸ª GPU ä¸Šæ‰§è¡Œæ¨¡å‹å¹¶è¡ŒåŒ–(å½“ç„¶å¦‚æœå¯ä»¥ä½¿ç”¨æ›´å¤š GPU,è¿˜èƒ½æ‰§è¡Œå¤š GPU å¹¶è¡ŒåŒ–)ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-17.png"><br>è¿™é‡Œæˆ‘ä»¬ä»‹ç»ä¸€ä¸‹åˆ†ç»„å·ç§¯çš„å·¥ä½œæ–¹å¼ã€‚é¦–å…ˆ,å…¸å‹çš„ 2D å·ç§¯çš„æ­¥éª¤å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­,é€šè¿‡åº”ç”¨ 128 ä¸ªå¤§å°ä¸º 3Ã—3Ã—3 çš„è¿‡æ»¤å™¨å°†è¾“å…¥å±‚(7Ã—7Ã—3)å˜æ¢åˆ°è¾“å‡ºå±‚(5Ã—5Ã—128)ã€‚æ¨å¹¿è€Œè¨€,å³é€šè¿‡åº”ç”¨ Dout ä¸ªå¤§å°ä¸º h x w x Din çš„æ ¸å°†è¾“å…¥å±‚(Hin x Win x Din)å˜æ¢åˆ°è¾“å‡ºå±‚(Hout x Wout x Dout)ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-18.png" alt="æ ‡å‡†çš„ 2D å·ç§¯"></p><p>åœ¨åˆ†ç»„å·ç§¯ä¸­,è¿‡æ»¤å™¨ä¼šè¢«åˆ†ä¸ºä¸åŒçš„ç»„ã€‚æ¯ä¸€ç»„éƒ½è´Ÿè´£ç‰¹å®šæ·±åº¦çš„å…¸å‹ 2D å·ç§¯ã€‚ä¸‹é¢çš„ä¾‹å­èƒ½è®©ä½ æ›´æ¸…æ¥šåœ°ç†è§£ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-19.png" alt="å…·æœ‰ä¸¤ä¸ªè¿‡æ»¤å™¨åˆ†ç»„çš„åˆ†ç»„å·ç§¯"></p><p>ä¸Šå›¾å±•ç¤ºäº†å…·æœ‰ä¸¤ä¸ªè¿‡æ»¤å™¨åˆ†ç»„çš„åˆ†ç»„å·ç§¯ã€‚åœ¨æ¯ä¸ªè¿‡æ»¤å™¨åˆ†ç»„ä¸­,æ¯ä¸ªè¿‡æ»¤å™¨çš„æ·±åº¦ä»…æœ‰åä¹‰ä¸Šçš„ 2D å·ç§¯çš„ä¸€åŠã€‚å®ƒä»¬çš„æ·±åº¦æ˜¯ Din&#x2F;2ã€‚æ¯ä¸ªè¿‡æ»¤å™¨åˆ†ç»„åŒ…å« Dout&#x2F;2 ä¸ªè¿‡æ»¤å™¨ã€‚ç¬¬ä¸€ä¸ªè¿‡æ»¤å™¨åˆ†ç»„(çº¢è‰²)ä¸è¾“å…¥å±‚çš„å‰ä¸€åŠ([:, :, 0:Din&#x2F;2])å·ç§¯,è€Œç¬¬äºŒä¸ªè¿‡æ»¤å™¨åˆ†ç»„(æ©™è‰²)ä¸è¾“å…¥å±‚çš„åä¸€åŠ([:, :, Din&#x2F;2:Din])å·ç§¯ã€‚å› æ­¤,æ¯ä¸ªè¿‡æ»¤å™¨åˆ†ç»„éƒ½ä¼šåˆ›å»º Dout&#x2F;2 ä¸ªé€šé“ã€‚æ•´ä½“è€Œè¨€,ä¸¤ä¸ªåˆ†ç»„ä¼šåˆ›å»º 2Ã—Dout&#x2F;2 &#x3D; Dout ä¸ªé€šé“ã€‚ç„¶åæˆ‘ä»¬å°†è¿™äº›é€šé“å †å åœ¨ä¸€èµ·,å¾—åˆ°æœ‰ Dout ä¸ªé€šé“çš„è¾“å‡ºå±‚ã€‚</p><ul><li>åˆ†ç»„å·ç§¯ä¸æ·±åº¦å·ç§¯<br>ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°åˆ†ç»„å·ç§¯ä¸æ·±åº¦å¯åˆ†å·ç§¯ä¸­ä½¿ç”¨çš„æ·±åº¦å·ç§¯ä¹‹é—´å­˜åœ¨ä¸€äº›è”ç³»å’Œå·®å¼‚ã€‚å¦‚æœè¿‡æ»¤å™¨åˆ†ç»„çš„æ•°é‡ä¸è¾“å…¥å±‚é€šé“çš„æ•°é‡ç›¸åŒ,åˆ™æ¯ä¸ªè¿‡æ»¤å™¨çš„æ·±åº¦éƒ½ä¸º Din&#x2F;Din&#x3D;1ã€‚è¿™æ ·çš„è¿‡æ»¤å™¨æ·±åº¦å°±ä¸æ·±åº¦å·ç§¯ä¸­çš„ä¸€æ ·äº†ã€‚</li></ul><p>å¦ä¸€æ–¹é¢,ç°åœ¨æ¯ä¸ªè¿‡æ»¤å™¨åˆ†ç»„éƒ½åŒ…å« Dout&#x2F;Din ä¸ªè¿‡æ»¤å™¨ã€‚æ•´ä½“è€Œè¨€,è¾“å‡ºå±‚çš„æ·±åº¦ä¸º Doutã€‚è¿™ä¸åŒäºæ·±åº¦å·ç§¯çš„æƒ…å†µâ€”â€”æ·±åº¦å·ç§¯å¹¶ä¸ä¼šæ”¹å˜å±‚çš„æ·±åº¦ã€‚åœ¨æ·±åº¦å¯åˆ†å·ç§¯ä¸­,å±‚çš„æ·±åº¦ä¹‹åé€šè¿‡ 1Ã—1 å·ç§¯è¿›è¡Œæ‰©å±•ã€‚</p><p>åˆ†ç»„å·ç§¯æœ‰å‡ ä¸ªä¼˜ç‚¹ã€‚</p><p>ç¬¬ä¸€ä¸ªä¼˜ç‚¹æ˜¯é«˜æ•ˆè®­ç»ƒã€‚å› ä¸ºå·ç§¯è¢«åˆ†æˆäº†å¤šä¸ªè·¯å¾„,æ¯ä¸ªè·¯å¾„éƒ½å¯ç”±ä¸åŒçš„ GPU åˆ†å¼€å¤„ç†,æ‰€ä»¥æ¨¡å‹å¯ä»¥å¹¶è¡Œæ–¹å¼åœ¨å¤šä¸ª GPU ä¸Šè¿›è¡Œè®­ç»ƒã€‚ç›¸æ¯”äºåœ¨å•ä¸ª GPU ä¸Šå®Œæˆæ‰€æœ‰ä»»åŠ¡,è¿™æ ·çš„åœ¨å¤šä¸ª GPU ä¸Šçš„æ¨¡å‹å¹¶è¡ŒåŒ–èƒ½è®©ç½‘ç»œåœ¨æ¯ä¸ªæ­¥éª¤å¤„ç†æ›´å¤šå›¾åƒã€‚äººä»¬ä¸€èˆ¬è®¤ä¸ºæ¨¡å‹å¹¶è¡ŒåŒ–æ¯”æ•°æ®å¹¶è¡ŒåŒ–æ›´å¥½ã€‚åè€…æ˜¯å°†æ•°æ®é›†åˆ†æˆå¤šä¸ªæ‰¹æ¬¡,ç„¶ååˆ†å¼€è®­ç»ƒæ¯ä¸€æ‰¹ã€‚ä½†æ˜¯,å½“æ‰¹é‡å¤§å°å˜å¾—è¿‡å°æ—¶,æˆ‘ä»¬æœ¬è´¨ä¸Šæ˜¯æ‰§è¡Œéšæœºæ¢¯åº¦ä¸‹é™,è€Œéæ‰¹æ¢¯åº¦ä¸‹é™ã€‚è¿™ä¼šé€ æˆæ›´æ…¢,æœ‰æ—¶å€™æ›´å·®çš„æ”¶æ•›ç»“æœã€‚</p><p>åœ¨è®­ç»ƒéå¸¸æ·±çš„ç¥ç»ç½‘ç»œæ—¶,åˆ†ç»„å·ç§¯ä¼šéå¸¸é‡è¦,æ­£å¦‚åœ¨ ResNeXt ä¸­é‚£æ ·ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-20.png"></p><p>ç¬¬äºŒä¸ªä¼˜ç‚¹æ˜¯æ¨¡å‹ä¼šæ›´é«˜æ•ˆ,å³æ¨¡å‹å‚æ•°ä¼šéšè¿‡æ»¤å™¨åˆ†ç»„æ•°çš„å¢å¤§è€Œå‡å°‘ã€‚åœ¨ä¹‹å‰çš„ä¾‹å­ä¸­,å®Œæ•´çš„æ ‡å‡† 2D å·ç§¯æœ‰ h x w x Din x Dout ä¸ªå‚æ•°ã€‚å…·æœ‰ 2 ä¸ªè¿‡æ»¤å™¨åˆ†ç»„çš„åˆ†ç»„å·ç§¯æœ‰ (h x w x Din&#x2F;2 x Dout&#x2F;2) x 2 ä¸ªå‚æ•°ã€‚å‚æ•°æ•°é‡å‡å°‘äº†ä¸€åŠã€‚</p><p>ç¬¬ä¸‰ä¸ªä¼˜ç‚¹æœ‰äº›è®©äººæƒŠè®¶ã€‚åˆ†ç»„å·ç§¯ä¹Ÿè®¸èƒ½æä¾›æ¯”æ ‡å‡†å®Œæ•´ 2D å·ç§¯æ›´å¥½çš„æ¨¡å‹ã€‚å¦ä¸€ç¯‡å‡ºè‰²çš„åšå®¢å·²ç»è§£é‡Šäº†è¿™ä¸€ç‚¹:<a href="https://blog.yani.io/filter-group-tutorial%E3%80%82%E8%BF%99%E9%87%8C%E7%AE%80%E8%A6%81%E6%80%BB%E7%BB%93%E4%B8%80%E4%B8%8B%E3%80%82">https://blog.yani.io/filter-group-tutorialã€‚è¿™é‡Œç®€è¦æ€»ç»“ä¸€ä¸‹ã€‚</a></p><p>åŸå› å’Œç¨€ç–è¿‡æ»¤å™¨çš„å…³ç³»æœ‰å…³ã€‚ä¸‹å›¾æ˜¯ç›¸é‚»å±‚è¿‡æ»¤å™¨çš„ç›¸å…³æ€§ã€‚å…¶ä¸­çš„å…³ç³»æ˜¯ç¨€ç–çš„ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-21.png"><br>åœ¨ CIFAR10 ä¸Šè®­ç»ƒçš„ä¸€ä¸ª Network-in-Network æ¨¡å‹ä¸­ç›¸é‚»å±‚çš„è¿‡æ»¤å™¨çš„ç›¸å…³æ€§çŸ©é˜µã€‚é«˜åº¦ç›¸å…³çš„è¿‡æ»¤å™¨å¯¹æ›´æ˜äº®,è€Œç›¸å…³æ€§æ›´ä½çš„è¿‡æ»¤å™¨åˆ™æ›´æš—ã€‚å›¾ç‰‡æ¥è‡ª:<a href="https://blog.yani.io/filter-group-tutorial">https://blog.yani.io/filter-group-tutorial</a></p><p>åˆ†ç»„çŸ©é˜µçš„ç›¸å…³æ€§æ˜ å°„å›¾åˆå¦‚ä½•ï¼Ÿ<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-22.png"></p><p>åœ¨ CIFAR10 ä¸Šè®­ç»ƒçš„ä¸€ä¸ª Network-in-Network æ¨¡å‹ä¸­ç›¸é‚»å±‚çš„è¿‡æ»¤å™¨çš„ç›¸å…³æ€§,åŠ¨å›¾åˆ†åˆ«å±•ç¤ºäº†æœ‰ 1ã€2ã€4ã€8ã€16 ä¸ªè¿‡æ»¤å™¨åˆ†ç»„çš„æƒ…å†µã€‚</p><p>ä¸Šå›¾æ˜¯å½“ç”¨ 1ã€2ã€4ã€8ã€16 ä¸ªè¿‡æ»¤å™¨åˆ†ç»„è®­ç»ƒæ¨¡å‹æ—¶,ç›¸é‚»å±‚çš„è¿‡æ»¤å™¨ä¹‹é—´çš„ç›¸å…³æ€§ã€‚é‚£ç¯‡æ–‡ç« æå‡ºäº†ä¸€ä¸ªæ¨ç†:ã€Œè¿‡æ»¤å™¨åˆ†ç»„çš„æ•ˆæœæ˜¯åœ¨é€šé“ç»´åº¦ä¸Šå­¦ä¹ å—å¯¹è§’ç»“æ„çš„ç¨€ç–æ€§â€¦â€¦åœ¨ç½‘ç»œä¸­,å…·æœ‰é«˜ç›¸å…³æ€§çš„è¿‡æ»¤å™¨æ˜¯ä½¿ç”¨è¿‡æ»¤å™¨åˆ†ç»„ä»¥ä¸€ç§æ›´ä¸ºç»“æ„åŒ–çš„æ–¹å¼å­¦ä¹ åˆ°ã€‚ä»æ•ˆæœä¸Šçœ‹,ä¸å¿…å­¦ä¹ çš„è¿‡æ»¤å™¨å…³ç³»å°±ä¸å†å‚æ•°åŒ–ã€‚è¿™æ ·æ˜¾è‘—åœ°å‡å°‘ç½‘ç»œä¸­çš„å‚æ•°æ•°é‡èƒ½ä½¿å…¶ä¸å®¹æ˜“è¿‡æ‹Ÿåˆ,å› æ­¤,ä¸€ç§ç±»ä¼¼æ­£åˆ™åŒ–çš„æ•ˆæœè®©ä¼˜åŒ–å™¨å¯ä»¥å­¦ä¹ å¾—åˆ°æ›´å‡†ç¡®æ›´é«˜æ•ˆçš„æ·±åº¦ç½‘ç»œã€‚</p><p>AlexNet conv1 è¿‡æ»¤å™¨åˆ†è§£:æ­£å¦‚ä½œè€…æŒ‡å‡ºçš„é‚£æ ·,è¿‡æ»¤å™¨åˆ†ç»„ä¼¼ä¹ä¼šå°†å­¦ä¹ åˆ°çš„è¿‡æ»¤å™¨ç»“æ„æ€§åœ°ç»„ç»‡æˆä¸¤ä¸ªä¸åŒçš„åˆ†ç»„ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-23.png"><br>æ­¤å¤–,æ¯ä¸ªè¿‡æ»¤å™¨åˆ†ç»„éƒ½ä¼šå­¦ä¹ æ•°æ®çš„ä¸€ä¸ªç‹¬ç‰¹è¡¨å¾ã€‚æ­£å¦‚ AlexNet çš„ä½œè€…æŒ‡å‡ºçš„é‚£æ ·,è¿‡æ»¤å™¨åˆ†ç»„ä¼¼ä¹ä¼šå°†å­¦ä¹ åˆ°çš„è¿‡æ»¤å™¨ç»“æ„æ€§åœ°ç»„ç»‡æˆä¸¤ä¸ªä¸åŒçš„åˆ†ç»„â€”â€”é»‘ç™½è¿‡æ»¤å™¨å’Œå½©è‰²è¿‡æ»¤å™¨ã€‚</p><h1 id="ç¥ç»ç½‘ç»œçš„ç±»å‹"><a href="#ç¥ç»ç½‘ç»œçš„ç±»å‹" class="headerlink" title="ç¥ç»ç½‘ç»œçš„ç±»å‹"></a>ç¥ç»ç½‘ç»œçš„ç±»å‹</h1><h2 id="å‰é¦ˆç¥ç»ç½‘ç»œ-FNN"><a href="#å‰é¦ˆç¥ç»ç½‘ç»œ-FNN" class="headerlink" title="å‰é¦ˆç¥ç»ç½‘ç»œ(FNN)"></a>å‰é¦ˆç¥ç»ç½‘ç»œ(FNN)</h2><p>å‰é¦ˆç¥ç»ç½‘ç»œ (FNN) æ˜¯æœ€ç®€å•çš„äººå·¥ç¥ç»ç½‘ç»œ,å…¶ä¸­ä¿¡æ¯åªæœä¸€ä¸ªæ–¹å‘ç§»åŠ¨,å³å‘å‰ç§»åŠ¨,ä»è¾“å…¥èŠ‚ç‚¹,ç»è¿‡éšè—èŠ‚ç‚¹(å¦‚æœæœ‰),æœ€ååˆ°è¾¾è¾“å‡ºèŠ‚ç‚¹ã€‚</p><p>ç½‘ç»œä¸­æ²¡æœ‰å¾ªç¯æˆ–ç¯è·¯,å› æ­¤æ˜¯ä¸€ç§ç®€å•çš„æ¶æ„ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-24.png"><br>å·¥ä½œåŸç†<br>1.è¾“å…¥å±‚: è¾“å…¥ç‰¹å¾(ä¾‹å¦‚,å›¾åƒçš„åƒç´ å€¼)è¢«è¾“å…¥åˆ°ç½‘ç»œä¸­ã€‚<br>2.éšè—å±‚ æ¯ä¸ªéšè—å±‚ç”±å¤„ç†æ¥è‡ªå‰ä¸€å±‚çš„è¾“å…¥çš„ç¥ç»å…ƒç»„æˆã€‚ æ¯ä¸ªç¥ç»å…ƒè®¡ç®—å…¶è¾“å…¥çš„åŠ æƒå’Œ,æ·»åŠ åå·®,å¹¶å°†ç»“æœä¼ é€’ç»™æ¿€æ´»å‡½æ•°(ä¾‹å¦‚ ReLUã€sigmoid)ã€‚<br>3.è¾“å‡ºå±‚ æœ€åä¸€å±‚æä¾›ç½‘ç»œçš„è¾“å‡º(ä¾‹å¦‚,åˆ†ç±»ä¸­çš„ç±»æ¦‚ç‡æˆ–å›å½’ä¸­çš„è¿ç»­å€¼)ã€‚ </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> tensorflow<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>models <span class="token keyword">import</span> Sequential<span class="token keyword">from</span> tensorflow<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>layers <span class="token keyword">import</span> Dense<span class="token comment"># Build a simple Feedforward Neural Network</span>model <span class="token operator">=</span> Sequential<span class="token punctuation">(</span><span class="token punctuation">[</span>  Dense<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> activation<span class="token operator">=</span><span class="token string">'relu'</span><span class="token punctuation">,</span>    input_shape<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token comment"># Hidden layer with 64 neurons</span>  Dense<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> activation<span class="token operator">=</span><span class="token string">'relu'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                       <span class="token comment"># Another hidden layer</span>  Dense<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> activation<span class="token operator">=</span><span class="token string">'sigmoid'</span><span class="token punctuation">)</span>                      <span class="token comment"># Output layer for binary classification</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># Compile the model</span> model<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>optimizer<span class="token operator">=</span><span class="token string">'adam'</span><span class="token punctuation">,</span> loss<span class="token operator">=</span><span class="token string">'binary_crossentropy'</span><span class="token punctuation">,</span> metrics<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'accuracy'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># Summary of the model</span> model<span class="token punctuation">.</span>summary<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å·ç§¯ç¥ç»ç½‘ç»œ-CNN"><a href="#å·ç§¯ç¥ç»ç½‘ç»œ-CNN" class="headerlink" title="å·ç§¯ç¥ç»ç½‘ç»œ(CNN)"></a>å·ç§¯ç¥ç»ç½‘ç»œ(CNN)</h2><p>å·ç§¯ç¥ç»ç½‘ç»œ (CNN) æ˜¯ä¸€ç±»æ·±åº¦ç¥ç»ç½‘ç»œ,ä¸“é—¨ç”¨äºå¤„ç†ç»“æ„åŒ–ç½‘æ ¼çŠ¶æ•°æ®(ä¾‹å¦‚å›¾åƒ)ã€‚</p><p>å®ƒä»¬ä½¿ç”¨å·ç§¯å±‚è‡ªåŠ¨ä¸”è‡ªé€‚åº”åœ°ä»è¾“å…¥æ•°æ®ä¸­å­¦ä¹ ç‰¹å¾çš„ç©ºé—´å±‚æ¬¡ç»“æ„ã€‚</p><ul><li>å·ç§¯å±‚ å°†ä¸€ç»„è¿‡æ»¤å™¨(æ ¸)åº”ç”¨äºè¾“å…¥,è¿™äº›è¿‡æ»¤å™¨åœ¨è¾“å…¥æ•°æ®ä¸Šæ»‘åŠ¨ä»¥ç”Ÿæˆç‰¹å¾å›¾ã€‚ </li><li>æ± åŒ–å±‚ é™ä½ç‰¹å¾å›¾çš„ç»´æ•°,ä½¿å¾—ç½‘ç»œçš„è®¡ç®—æ•ˆç‡æ›´é«˜,å¹¶ä¸”å¯¹è¾“å…¥ä¸­çš„å°å¹³ç§»å…·æœ‰ä¸å˜æ€§ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-25.png"></p><p>å·¥ä½œåŸç†<br>1.è¾“å…¥å±‚ CNN çš„è¾“å…¥é€šå¸¸æ˜¯ä»¥åƒç´ å€¼çŸ©é˜µè¡¨ç¤ºçš„å›¾åƒã€‚ å¯¹äºå½©è‰²å›¾åƒ,è¿™é€šå¸¸æ˜¯ 3D çŸ©é˜µ(é«˜åº¦ Ã— å®½åº¦ Ã— é€šé“)ã€‚<br>2.å·ç§¯å±‚ CNN çš„æ ¸å¿ƒæ€æƒ³æ˜¯å·ç§¯è¿ç®—,å…¶ä¸­ä¸€ä¸ªç§°ä¸ºè¿‡æ»¤å™¨æˆ–å†…æ ¸çš„å°çŸ©é˜µåœ¨è¾“å…¥å›¾åƒä¸Šæ»‘åŠ¨,å¹¶è®¡ç®—è¿‡æ»¤å™¨ä¸å…¶è¦†ç›–çš„å›¾åƒå—ä¹‹é—´çš„ç‚¹ç§¯ã€‚ æ­¤æ“ä½œç”Ÿæˆç‰¹å¾å›¾ã€‚<br>3.æ± åŒ–å±‚ æ± åŒ–å±‚å‡å°‘äº†ç‰¹å¾å›¾çš„ç©ºé—´ç»´åº¦(é«˜åº¦å’Œå®½åº¦),ä½¿è®¡ç®—æ›´æ˜“äºç®¡ç†,å¹¶å…è®¸ç½‘ç»œä¸“æ³¨äºæœ€é‡è¦çš„ç‰¹å¾ã€‚ æœ€å¸¸è§çš„ç±»å‹æ˜¯æœ€å¤§æ± åŒ–,å®ƒä»ç‰¹å¾å›¾çš„æ¯ä¸ªå—ä¸­è·å–æœ€å¤§å€¼ã€‚<br>4.å…¨è¿æ¥å±‚ ç»è¿‡å‡ ä¸ªå·ç§¯å±‚å’Œæ± åŒ–å±‚ä¹‹å,ç¥ç»ç½‘ç»œä¸­çš„é«˜çº§æ¨ç†é€šè¿‡å…¨è¿æ¥å±‚å®Œæˆã€‚<br>5.è¾“å‡ºå±‚ è¾“å‡ºå±‚ä½¿ç”¨ç‰¹å®šçš„æ¿€æ´»å‡½æ•°(å¯¹äºåˆ†ç±»ä»»åŠ¡,é€šå¸¸æ˜¯ Softmax)æ¥äº§ç”Ÿæœ€ç»ˆé¢„æµ‹ã€‚è¾“å‡ºæ˜¯æ‰€æœ‰å¯èƒ½ç±»åˆ«çš„æ¦‚ç‡åˆ†å¸ƒã€‚ </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> tensorflow<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>datasets <span class="token keyword">import</span> mnist<span class="token keyword">from</span> tensorflow<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>utils <span class="token keyword">import</span> to_categorical<span class="token comment"># Load dataset</span><span class="token punctuation">(</span>X_train<span class="token punctuation">,</span> y_train<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>X_test<span class="token punctuation">,</span> y_test<span class="token punctuation">)</span> <span class="token operator">=</span> mnist<span class="token punctuation">.</span>load_data<span class="token punctuation">(</span><span class="token punctuation">)</span>X_train <span class="token operator">=</span> X_train<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span>X_train<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>X_test <span class="token operator">=</span> X_test<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span>X_test<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>X_train <span class="token operator">=</span> X_train<span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token string">'float32'</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">255</span>X_test <span class="token operator">=</span> X_test<span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token string">'float32'</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">255</span> y_train <span class="token operator">=</span> to_categorical<span class="token punctuation">(</span>y_train<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> y_test <span class="token operator">=</span> to_categorical<span class="token punctuation">(</span>y_test<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>  <span class="token comment"># Build the CNN model</span> model <span class="token operator">=</span> Sequential<span class="token punctuation">(</span><span class="token punctuation">[</span>     Conv2D<span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">,</span> kernel_size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> activation<span class="token operator">=</span><span class="token string">'relu'</span><span class="token punctuation">,</span> input_shape<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>     MaxPooling2D<span class="token punctuation">(</span>pool_size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>     Conv2D<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> activation<span class="token operator">=</span><span class="token string">'relu'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>     MaxPooling2D<span class="token punctuation">(</span>pool_size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>     Flatten<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>     Dense<span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">,</span> activation<span class="token operator">=</span><span class="token string">'relu'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>     Dense<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> activation<span class="token operator">=</span><span class="token string">'softmax'</span><span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># Compile the model</span> model<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>optimizer<span class="token operator">=</span><span class="token string">'adam'</span><span class="token punctuation">,</span> loss<span class="token operator">=</span><span class="token string">'categorical_crossentropy'</span><span class="token punctuation">,</span> metrics<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'accuracy'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># Train the model</span> model<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X_train<span class="token punctuation">,</span> y_train<span class="token punctuation">,</span> validation_data<span class="token operator">=</span><span class="token punctuation">(</span>X_test<span class="token punctuation">,</span> y_test<span class="token punctuation">)</span><span class="token punctuation">,</span> epochs<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span>  <span class="token comment"># Evaluate the model</span> score <span class="token operator">=</span> model<span class="token punctuation">.</span>evaluate<span class="token punctuation">(</span>X_test<span class="token punctuation">,</span> y_test<span class="token punctuation">)</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Test accuracy: </span><span class="token interpolation"><span class="token punctuation">&#123;</span>score<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">&#125;</span></span><span class="token string">%'</span></span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¾ªç¯ç¥ç»ç½‘ç»œ-RNN"><a href="#å¾ªç¯ç¥ç»ç½‘ç»œ-RNN" class="headerlink" title="å¾ªç¯ç¥ç»ç½‘ç»œ(RNN)"></a>å¾ªç¯ç¥ç»ç½‘ç»œ(RNN)</h2><p>å¾ªç¯ç¥ç»ç½‘ç»œ (RNN) æ˜¯ä¸€ç±»ç”¨äº<em>å¤„ç†é¡ºåºæ•°æ®</em>çš„ç¥ç»ç½‘ç»œã€‚ä¸æ ‡å‡†ç¥ç»ç½‘ç»œä¸åŒ,RNN å…·æœ‰å¾ªç¯,å¯è®©å…¶ä¿ç•™å…ˆå‰è¾“å…¥çš„â€œè®°å¿†â€,å› æ­¤éå¸¸é€‚åˆå¤„ç†æ¶‰åŠåºåˆ—çš„ä»»åŠ¡ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-26.png"></p><ul><li>LSTM(é•¿çŸ­æœŸè®°å¿†) ä¸€ç§ RNN,å¯ä»¥é€šè¿‡ç»´æŠ¤éšæ¯æ¬¡è¾“å…¥æ›´æ–°çš„è®°å¿†å•å…ƒæ¥å­¦ä¹ é•¿æœŸä¾èµ–å…³ç³»ã€‚LSTM è§£å†³äº†æ ‡å‡† RNN çš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚ </li><li>GRU(é—¨æ§å¾ªç¯å•å…ƒ) LSTM çš„ç®€åŒ–ç‰ˆæœ¬,å°†é—å¿˜é—¨å’Œè¾“å…¥é—¨ç»„åˆæˆå•ä¸ªæ›´æ–°é—¨ã€‚ GRU è®¡ç®—æ•ˆç‡é«˜,æ€§èƒ½é€šå¸¸ä¸ LSTM ä¸€æ ·å¥½ã€‚</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> tensorflow<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>models <span class="token keyword">import</span> Sequential<span class="token keyword">from</span> tensorflow<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>layers <span class="token keyword">import</span> LSTM<span class="token punctuation">,</span> Dense<span class="token comment"># Build an LSTM for time series prediction</span>model <span class="token operator">=</span> Sequential<span class="token punctuation">(</span><span class="token punctuation">[</span>    LSTM<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> activation<span class="token operator">=</span><span class="token string">'relu'</span><span class="token punctuation">,</span> input_shape<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># LSTM layer</span>    Dense<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>                                           <span class="token comment"># Output layer</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># Compile the model</span> model<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>optimizer<span class="token operator">=</span><span class="token string">'adam'</span><span class="token punctuation">,</span> loss<span class="token operator">=</span><span class="token string">'mse'</span><span class="token punctuation">)</span>  <span class="token comment"># Summary of the model</span> model<span class="token punctuation">.</span>summary<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Transformer"><a href="#Transformer" class="headerlink" title="Transformer"></a>Transformer</h2><p>Transformerä¸æ³¨æ„åŠ›æœºåˆ¶å·²ç»å½»åº•æ”¹å˜äº†æ·±åº¦å­¦ä¹ é¢†åŸŸ,ä¸ºå¤„ç†åºåˆ—æ•°æ®å¹¶æ•æ‰é•¿è·ç¦»ä¾èµ–å…³ç³»æä¾›äº†ä¸€ç§å¼ºå¤§çš„æ–¹å¼ã€‚<br>åœ¨æœ¬æ–‡ä¸­,æˆ‘ä»¬å°†æ·±å…¥æ¢è®¨Transformerçš„åŸºæœ¬åŸç†,ä»¥åŠæ³¨æ„åŠ›æœºåˆ¶åœ¨æå‡æ¨¡å‹æ€§èƒ½å’Œè¿è´¯æ€§æ–¹é¢çš„é‡è¦æ€§ã€‚</p><h3 id="æ ¸å¿ƒ"><a href="#æ ¸å¿ƒ" class="headerlink" title="æ ¸å¿ƒ"></a>æ ¸å¿ƒ</h3><ul><li>æ³¨æ„åŠ›æœºåˆ¶åœ¨Transformerä¸­è‡³å…³é‡è¦,å®ƒå…è®¸<strong>æ ¹æ®é‡è¦æ€§ä¸ºä¸åŒçš„æ ‡è®°(token)åˆ†é…æƒé‡</strong>,ä»è€Œå¢å¼ºæ¨¡å‹çš„ä¸Šä¸‹æ–‡å’Œè¾“å‡ºè´¨é‡ã€‚ </li><li>Transformeré€šè¿‡<strong>è‡ªæ³¨æ„åŠ›æœºåˆ¶</strong>è¿ä½œ,èƒ½å¤Ÿåœ¨ä¸è¿›è¡Œåºåˆ—å¤„ç†çš„æƒ…å†µä¸‹æ•æ‰é•¿è·ç¦»ä¾èµ–å…³ç³»ã€‚ </li><li>Transformerä¸­çš„<strong>å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶</strong>å…è®¸æ¨¡å‹åŒæ—¶å…³æ³¨è¾“å…¥æ•°æ®çš„ä¸åŒæ–¹é¢,ä»è€Œæå‡æ¨¡å‹æ€§èƒ½ã€‚ </li><li>ç”±äºå…¶<strong>å¹¶è¡Œå¤„ç†èƒ½åŠ›</strong>,Transformeråœ¨å¤„ç†åºåˆ—æ•°æ®æ—¶ä¼˜äºå¾ªç¯ç¥ç»ç½‘ç»œ(RNN)å’Œé•¿çŸ­æ—¶è®°å¿†ç½‘ç»œ(LSTM)ã€‚ </li><li>Transformerçš„åº”ç”¨èŒƒå›´æ¶µç›–è‡ªç„¶è¯­è¨€å¤„ç†(NLP)ã€è®¡ç®—æœºè§†è§‰ä»¥åŠæœ€å…ˆè¿›çš„æ¨¡å‹å¼€å‘ã€‚</li></ul><h3 id="æ·±åº¦å­¦ä¹ ä¸­çš„Transformeræ¼”è¿›"><a href="#æ·±åº¦å­¦ä¹ ä¸­çš„Transformeræ¼”è¿›" class="headerlink" title="æ·±åº¦å­¦ä¹ ä¸­çš„Transformeræ¼”è¿›"></a>æ·±åº¦å­¦ä¹ ä¸­çš„Transformeræ¼”è¿›</h3><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-27.png"></p><ul><li>æ³¨æ„åŠ›æœºåˆ¶çš„é‡è¦æ€§</li></ul><p>åœ¨æ·±åº¦å­¦ä¹ é¢†åŸŸ,æ³¨æ„åŠ›æœºåˆ¶çš„å‡ºç°å ªç§°é©å‘½æ€§,å®ƒä½¿æ¨¡å‹èƒ½å¤ŸåŠ¨æ€åœ°å…³æ³¨è¾“å…¥æ•°æ®çš„ç›¸å…³éƒ¨åˆ†,ç±»ä¼¼äºäººç±»å…³æ³¨è§†è§‰åœºæ™¯æˆ–å¯¹è¯ä¸­çš„æŸäº›æ–¹é¢ã€‚</p><p>è¿™ç§é€‰æ‹©æ€§å…³æ³¨åœ¨ä¸Šä¸‹æ–‡è‡³å…³é‡è¦çš„ä»»åŠ¡(å¦‚è¯­è¨€ç†è§£æˆ–å›¾åƒè¯†åˆ«)ä¸­å°¤ä¸ºé‡è¦ã€‚</p><p>åœ¨Transformerçš„ä¸Šä¸‹æ–‡ä¸­,æ³¨æ„åŠ›æœºåˆ¶ç”¨äºåœ¨äº§ç”Ÿè¾“å‡ºæ—¶æƒè¡¡ä¸åŒè¾“å…¥æ ‡è®°çš„å½±å“ã€‚</p><p>è¿™ä¸ä»…ä»…æ˜¯äººç±»æ³¨æ„åŠ›çš„å¤åˆ¶,è€Œæ˜¯å¢å¼º,ä½¿æœºå™¨èƒ½å¤Ÿåœ¨æŸäº›ä»»åŠ¡ä¸Šè¶…è¶Šäººç±»è¡¨ç°ã€‚</p><p>ä»¥ä¸‹æ˜¯å¼ºè°ƒæ³¨æ„åŠ›æœºåˆ¶é‡è¦æ€§çš„å‡ ä¸ªè¦ç‚¹:</p><ul><li>å®ƒä»¬é€šè¿‡å…³æ³¨æœ€ç›¸å…³çš„éƒ¨åˆ†æ¥å¤„ç†<em>å¯å˜å¤§å°çš„è¾“å…¥</em>ã€‚ </li><li>åŸºäºæ³¨æ„åŠ›çš„æ¨¡å‹èƒ½å¤Ÿæ•æ‰æ—©æœŸæ¨¡å‹(å¦‚RNN)éš¾ä»¥å¤„ç†çš„<em>é•¿è·ç¦»ä¾èµ–å…³ç³»</em>ã€‚ </li><li>å®ƒä»¬ä¿ƒè¿›äº†è¾“å…¥æ•°æ®çš„<em>å¹¶è¡Œå¤„ç†</em>,ä»è€Œæ˜¾è‘—æé«˜äº†è®¡ç®—æ•ˆç‡ã€‚</li></ul><p>æ³¨æ„åŠ›æœºåˆ¶ç®€æ´è€Œå¼ºå¤§,é€šè¿‡ä½¿æ¨¡å‹èƒ½å¤Ÿè€ƒè™‘è¾“å…¥çš„æ•´ä¸ªä¸Šä¸‹æ–‡,å®ƒä»¬ä¸ºæœºå™¨å­¦ä¹ å¼€è¾Ÿäº†æ–°çš„å¯èƒ½æ€§,æ¨åŠ¨äº†è‡ªç„¶è¯­è¨€å¤„ç†ç­‰é¢†åŸŸçš„çªç ´ã€‚</p><p>ç¼–ç å™¨-è§£ç å™¨æ¨¡å‹</p><p>ç¼–ç å™¨-è§£ç å™¨æ¨¡å‹çš„æ ¸å¿ƒæ˜¯åºåˆ—æ•°æ®ç¿»è¯‘,å…¶ä¸­<strong>ç¼–ç å™¨å¤„ç†è¾“å…¥åºåˆ—å¹¶å°†å…¶æç‚¼ä¸ºå›ºå®šé•¿åº¦çš„è¡¨ç¤º</strong>,é€šå¸¸ç§°ä¸ºä¸Šä¸‹æ–‡å‘é‡ã€‚</p><p>è¿™ä¸ªå‘é‡ä½œä¸ºè¾“å…¥çš„æµ“ç¼©æ‘˜è¦,æ•æ‰å…¶æœ¬è´¨ä»¥ä¾›è§£ç å™¨è§£é‡Šã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-28.png"></p><p>è§£ç å™¨ä»¥ä¸ç¼–ç å™¨ç›¸ä¼¼çš„ç»“æ„å¼€å§‹,ç”¨ä¸Šä¸‹æ–‡å‘é‡åˆå§‹åŒ–å…¶åˆå§‹éšè—çŠ¶æ€ã€‚</p><p>å®ƒå¼€å§‹ç”Ÿæˆæ€§æ¢ç´¢,æ„æ€è¾“å‡ºåºåˆ—çš„ç¬¬ä¸€ä¸ªæ ‡è®°,å¹¶ç»§ç»­ç¼–ç»‡åç»­çš„æ ‡è®°,æ¯ä¸ªé¢„æµ‹éƒ½å—åˆ°å…ˆå‰å®ç°çš„æ ‡è®°å’Œä¸Šä¸‹æ–‡å‘é‡æŒç»­ä½è¯­çš„å¾®å¦™å½±å“ã€‚</p><p>è¿™ç§è¿­ä»£è¿‡ç¨‹ä¸€ç›´æŒç»­åˆ°ç”±åºåˆ—ç»“æŸæ ‡è®°æˆ–é¢„å®šåºåˆ—é•¿åº¦çš„è¾¹ç•Œå‘å‡ºä¿¡å·,è¡¨ç¤ºå™è¿°å®Œæˆã€‚</p><p>ç¼–ç å™¨-è§£ç å™¨æ¨¡å‹å¹¶éæ²¡æœ‰æŒ‘æˆ˜,<em>å½“é¢ä¸´å†—é•¿ä¸”ä¿¡æ¯å¯†é›†çš„è¾“å…¥åºåˆ—æ—¶,æ¨¡å‹åœ¨æ•´ä¸ªè§£ç è¿‡ç¨‹ä¸­ä¿æŒç›¸å…³æ€§çš„èƒ½åŠ›å¯èƒ½ä¼šå‡å¼±</em>ã€‚</p><p>åœ¨æ–‡æœ¬ç”Ÿæˆçš„æ¯ä¸ªé˜¶æ®µ,å¹¶éè¾“å…¥ä¸Šä¸‹æ–‡çš„æ‰€æœ‰ç‰‡æ®µéƒ½åŒæ ·é‡è¦ã€‚</p><p>ä¾‹å¦‚,åœ¨æœºå™¨ç¿»è¯‘ä¸­,å¥å­â€œA boy is eating the bananaâ€ä¸­çš„â€œboyâ€ä¸€è¯å¹¶ä¸éœ€è¦æ•´ä¸ªå¥å­çš„ä¸Šä¸‹æ–‡æ¥è¿›è¡Œå‡†ç¡®ç¿»è¯‘ã€‚</p><p>è¿™ä¸€è®¤è¯†æ¨åŠ¨äº†Transformeræ¶æ„çš„é‡‡ç”¨,å®ƒé‡‡ç”¨ä¸“é—¨çš„æ³¨æ„åŠ›æœºåˆ¶æ¥æ˜æ™ºåœ°åˆ†é…å…³æ³¨,ç¡®ä¿æ¯ä¸ªè§£ç æ­¥éª¤éƒ½ç”±æœ€ç›¸å…³çš„ä¸Šä¸‹æ–‡ç‰‡æ®µæä¾›ä¿¡æ¯ã€‚</p><h3 id="Transformeræ¶æ„"><a href="#Transformeræ¶æ„" class="headerlink" title="Transformeræ¶æ„"></a>Transformeræ¶æ„</h3><p>Transformeræ¶æ„æ˜¯æ·±åº¦å­¦ä¹ é¢†åŸŸçš„ä¸€é¡¹çªç ´æ€§åˆ›æ–°,å½»åº•æ”¹å˜äº†æˆ‘ä»¬å¯¹åºåˆ—åˆ°åºåˆ—ä»»åŠ¡çš„å¤„ç†æ–¹å¼ã€‚<br>å…¶æ ¸å¿ƒç”±ä¸¤ä¸ªä¸»è¦ç»„ä»¶ç»„æˆ:ç¼–ç å™¨å’Œè§£ç å™¨,æ¯ä¸ªç»„ä»¶éƒ½è®¾è®¡ç”¨äºæ‰§è¡Œè¾“å…¥å¤„ç†å’Œè¾“å‡ºç”Ÿæˆä¸­ä¸åŒä½†äº’è¡¥çš„åŠŸèƒ½ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-29.png"><br>ç¼–ç å™¨çš„ä»»åŠ¡æ˜¯ä»”ç»†åœ°ä»è¾“å…¥åºåˆ—ä¸­æå–ç‰¹å¾,è¿™æ˜¯é€šè¿‡ä¸€ç³»åˆ—å±‚å®ç°çš„,<em>æ¯å±‚åŒ…å«ä¸€ä¸ªå¤šå¤´æ³¨æ„åŠ›æœºåˆ¶</em>,åè·Ÿä¸€ä¸ªå‰é¦ˆç¥ç»ç½‘ç»œã€‚</p><p>è¿™äº›å±‚è¿˜é€šè¿‡å½’ä¸€åŒ–å’Œæ®‹å·®è¿æ¥è¿›ä¸€æ­¥å¢å¼º,ä»¥ç¡®ä¿è®­ç»ƒæœŸé—´çš„ç¨³å®šæ€§ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯,æ•´ä¸ªåºåˆ—æ˜¯å¹¶è¡Œå¤„ç†çš„,è¿™ä¸ä¼ ç»Ÿå¾ªç¯ç¥ç»ç½‘ç»œ(RNN)çš„åºåˆ—å¤„ç†æˆªç„¶ä¸åŒã€‚</p><p>å¦ä¸€æ–¹é¢,è§£ç å™¨çš„ä»»åŠ¡æ˜¯ç”Ÿæˆè¾“å‡ºåºåˆ—,å®ƒçš„ç»“æ„ä¸ç¼–ç å™¨ç›¸ä¼¼,ä½†åŒ…æ‹¬ä¸€ä¸ªé¢å¤–çš„äº¤å‰æ³¨æ„åŠ›å±‚,å…è®¸å®ƒåœ¨ç”Ÿæˆè¾“å‡ºæ—¶å…³æ³¨è¾“å…¥åºåˆ—çš„ç›¸å…³éƒ¨åˆ†ã€‚</p><p>é‡è¦çš„æ˜¯è¦æ³¨æ„,Transformerçš„æ¶æ„å¹¶éä¸€æˆä¸å˜,å®ƒå¯ä»¥è¡¨ç°ä¸ºä»…ç¼–ç å™¨ã€ä»…è§£ç å™¨æˆ–ç»å…¸çš„ç¼–ç å™¨-è§£ç å™¨æ¨¡å‹ã€‚</p><p>æ¯ç§æ¶æ„å˜ä½“éƒ½é’ˆå¯¹ç‰¹å®šçš„å­¦ä¹ ç›®æ ‡å’Œä»»åŠ¡è¿›è¡Œäº†å®šåˆ¶,ä»¥ä¸‹æ˜¯æŒ‡å¯¼Transformerå±‚ç»„ç»‡çš„æ¶æ„é—®é¢˜çš„ç®€æ´è¡¨ç¤º:</p><ul><li>æ¶æ„ç±»å‹æ˜¯ä»€ä¹ˆ(ä»…ç¼–ç å™¨ã€ä»…è§£ç å™¨ã€ç¼–ç å™¨-è§£ç å™¨)ï¼Ÿ </li><li>Nxæ¨¡å—æ˜¯å¦‚ä½•ç»„ç»‡çš„ï¼Ÿ </li><li>æå‡ºçš„æ¶æ„è®¾è®¡å¦‚ä½•æ”¯æŒå­¦ä¹ ç›®æ ‡(ä»»åŠ¡)ï¼Ÿ</li></ul><p>Transformeræ¶æ„çš„ä¼˜åŠ¿æ˜¯å¤šæ–¹é¢çš„,å…¶å¹¶è¡Œå¤„ç†èƒ½åŠ›æå¤§åœ°åŠ é€Ÿäº†è®­ç»ƒå’Œæ¨ç†æ—¶é—´ã€‚<br>ç»“åˆè‡ªæ³¨æ„åŠ›æœºåˆ¶,è¯¥æ¶æ„èƒ½å¤Ÿå·§å¦™åœ°å¤„ç†é•¿è·ç¦»ä¾èµ–å…³ç³»,æ•æ‰æ•°æ®ä¸­è·¨è¶Šç›¸å½“é•¿çš„åºåˆ—é•¿åº¦çš„å¤æ‚å…³ç³»ã€‚</p><p>è¿™ç§èƒ½åŠ›ä½¿Transformerç‰¹åˆ«æ“…é•¿å¤„ç†ä¸Šä¸‹æ–‡å’Œåºåˆ—å…³ç³»é‡è¦çš„ä»»åŠ¡ã€‚</p><h3 id="Transformerçš„å…³é”®ç»„ä»¶"><a href="#Transformerçš„å…³é”®ç»„ä»¶" class="headerlink" title="Transformerçš„å…³é”®ç»„ä»¶"></a>Transformerçš„å…³é”®ç»„ä»¶</h3><h4 id="è‡ªæ³¨æ„åŠ›æœºåˆ¶"><a href="#è‡ªæ³¨æ„åŠ›æœºåˆ¶" class="headerlink" title="è‡ªæ³¨æ„åŠ›æœºåˆ¶"></a>è‡ªæ³¨æ„åŠ›æœºåˆ¶</h4><p>è‡ªæ³¨æ„åŠ›æœºåˆ¶æ˜¯Transformeræ¨¡å‹ä¸­çš„å…³é”®åˆ›æ–°(å¯èƒ½ä¹Ÿæ˜¯äººç±»è¿›åŒ–ä¸­çš„å…³é”®ï¼Ÿ),ä½¿å®ƒèƒ½å¤Ÿè¯†åˆ«æ•°æ®ä¸­çš„å¤æ‚å…³ç³»ã€‚</p><p>å®ƒå…è®¸æ¨¡å‹ç‹¬ç«‹äºå®ƒä»¬åœ¨åºåˆ—ä¸­çš„ä½ç½®æ¥æƒè¡¡è¾“å…¥ä¸åŒéƒ¨åˆ†çš„é‡è¦æ€§ã€‚</p><p>è¿™åœ¨ä¸Šä¸‹æ–‡å¯¹äºç†è§£å«ä¹‰è‡³å…³é‡è¦çš„åœºæ™¯ä¸­ç‰¹åˆ«æœ‰ç”¨,ä¾‹å¦‚åˆ¤æ–­ç»™å®šå¥å­ä¸­çš„â€œitâ€æ˜¯æŒ‡â€œwolfâ€è¿˜æ˜¯â€œrabbitâ€ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-30.png"><br>ä¸ºäº†å®ç°è¿™ä¸€ç›®æ ‡,è¯¥æœºåˆ¶ä¼šä¸ºæ¯ä¸ªè¾“å…¥å…ƒç´ è®¡ç®—ä¸‰ä¸ªå‘é‡:æŸ¥è¯¢å‘é‡ã€é”®å‘é‡å’Œå€¼å‘é‡ã€‚</p><p>è¿‡ç¨‹æ¶‰åŠæ¯ä¸ªæŸ¥è¯¢å‘é‡ä¸é”®å‘é‡ä¹‹é—´çš„ç‚¹ç§¯è¿ç®—,éšåä½¿ç”¨SoftMaxè¿›è¡Œå½’ä¸€åŒ–å¤„ç†,æœ€ç»ˆå°†å¾—åˆ°çš„æƒé‡åº”ç”¨äºå€¼å‘é‡,ç”Ÿæˆæ³¨æ„åŠ›å‘é‡ã€‚</p><p>è¿™ä¸ªå‘é‡æ˜¯ä¸€ç§è¡¨ç¤º,èƒ½å¤Ÿæ•æ‰è¾“å…¥ä¸­çš„ä¸Šä¸‹æ–‡å…³ç³»ã€‚</p><p>è‡ªæ³¨æ„åŠ›æœºåˆ¶çš„ä¼˜é›…ä¹‹å¤„åœ¨äº,å®ƒèƒ½å¤Ÿå»ºæ¨¡å…ƒç´ é—´çš„å…³ç³»,è€Œä¸å—åºåˆ—ä¸­å…ƒç´ é—´è·ç¦»çš„é™åˆ¶ã€‚</p><p>è¿™ä¸€ç‰¹æ€§ä¸æ—©æœŸçš„åºåˆ—å»ºæ¨¡æ–¹æ³•æˆªç„¶ä¸åŒ,åè€…åœ¨å¤„ç†é•¿è·ç¦»ä¾èµ–æ—¶å¾€å¾€åŠ›ä¸ä»å¿ƒã€‚</p><p>ä¸‹è¡¨æ€»ç»“äº†è‡ªæ³¨æ„åŠ›æœºåˆ¶æ‰€æ¶‰åŠçš„æ­¥éª¤:<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-31.png"></p><p>é€šè¿‡éš”ç¦»å’Œå¤„ç†è¿™äº›å‘é‡,è‡ªæ³¨æ„åŠ›æœºåˆ¶èƒ½å¤Ÿå¯¹è¾“å…¥è¿›è¡Œç»†è‡´å…¥å¾®çš„ç†è§£,è¿™å¯¹äºTransformeré€šå¸¸éœ€è¦å®Œæˆçš„å¤æ‚ä»»åŠ¡è‡³å…³é‡è¦ã€‚</p><h4 id="å¤šå¤´æ³¨æ„åŠ›"><a href="#å¤šå¤´æ³¨æ„åŠ›" class="headerlink" title="å¤šå¤´æ³¨æ„åŠ›"></a>å¤šå¤´æ³¨æ„åŠ›</h4><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-32.png"></p><p>å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶çš„å·§å¦™ä¹‹å¤„åœ¨äº,å®ƒèƒ½å¤Ÿé€šè¿‡å¤šä¸ªå…·æœ‰ç‹¬ç‰¹è§†è§’<br>çš„è‡ªæ³¨æ„åŠ›å±‚åŒæ—¶å¤„ç†æ•°æ®ã€‚</p><p>è¿™ç§å¹¶è¡Œå¤„ç†ä½¿æ¨¡å‹èƒ½å¤Ÿæ•æ‰åˆ°è¾“å…¥çš„æ›´ä¸°å¯Œè¡¨ç¤ºã€‚é€šè¿‡å°†æ³¨æ„åŠ›è¿‡ç¨‹åˆ’åˆ†ä¸ºâ€œå¤´â€,è¯¥æœºåˆ¶èƒ½å¤Ÿä»¥ä¸åŒçš„æ–¹å¼å…³æ³¨è¾“å…¥åºåˆ—çš„ä¸åŒéƒ¨åˆ†,ç±»ä¼¼äºä¸€ç»„ä¸“å®¶åˆ†æå¤æ‚é—®é¢˜çš„å„ä¸ªæ–¹é¢ã€‚</p><p>æƒ³è±¡ä¸€ä¸ªå›¢é˜Ÿæ­£åœ¨åˆä½œå®Œæˆä¸€ä¸ªå¤æ‚çš„é¡¹ç›®,æ¯”å¦‚å¼€å‘ä¸€æ¬¾è½¯ä»¶ã€‚æ¯ä¸ªå›¢é˜Ÿæˆå‘˜éƒ½æœ‰è‡ªå·±æ“…é•¿çš„é¢†åŸŸ:<br>1.å‰ç«¯å¼€å‘äººå‘˜:ä¸“æ³¨äºç”¨æˆ·ç•Œé¢å’Œç”¨æˆ·ä½“éªŒã€‚<br>2.åç«¯å¼€å‘äººå‘˜:è´Ÿè´£æœåŠ¡å™¨é€»è¾‘å’Œæ•°æ®åº“ç®¡ç†ã€‚<br>3.æµ‹è¯•å·¥ç¨‹å¸ˆ:ä¸“æ³¨äºè½¯ä»¶çš„è´¨é‡ä¿è¯å’Œé”™è¯¯æ£€æµ‹ã€‚<br>4.äº§å“ç»ç†:è´Ÿè´£æ•´ä½“é¡¹ç›®è§„åˆ’å’Œéœ€æ±‚åˆ†æã€‚ </p><p>æ¯ä¸ªå›¢é˜Ÿæˆå‘˜ä»è‡ªå·±çš„ä¸“ä¸šè§’åº¦å‡ºå‘,å…³æ³¨é¡¹ç›®çš„ä¸åŒæ–¹é¢ã€‚ä»–ä»¬å„è‡ªç‹¬ç«‹å·¥ä½œ,ä½†æœ€ç»ˆå°†å„è‡ªçš„æˆæœæ•´åˆåœ¨ä¸€èµ·,å½¢æˆä¸€ä¸ªå®Œæ•´çš„è½¯ä»¶äº§å“ã€‚</p><p>åŒæ ·,å¤šå¤´æ³¨æ„åŠ›ç»“åˆæ¥è‡ªå¤šä¸ªæ³¨æ„åŠ›â€œä¸“å®¶â€çš„è§è§£,å½¢æˆå¯¹è¾“å…¥æ•°æ®çš„å®Œæ•´ç†è§£ã€‚</p><p>å¤šå¤´æ³¨æ„åŠ›çš„ç²¾é«“åœ¨äº,å®ƒèƒ½å¤Ÿåœ¨ä¸æ˜¾è‘—å¢åŠ å‚æ•°æ•°é‡çš„æƒ…å†µä¸‹,å¢å¼ºæ³¨æ„åŠ›å±‚çš„è¡¨è¾¾èƒ½åŠ›ã€‚</p><p>è¿™æ˜¯é€šè¿‡å¹¶è¡Œè¿è¡Œå¤šä¸ªæ³¨æ„åŠ›è®¡ç®—,ç„¶ååˆå¹¶å…¶ç»“æœæ¥å®ç°çš„ã€‚</p><p>Transformeré€šå¸¸é‡‡ç”¨8ä¸ªè¿™æ ·çš„â€œå¤´â€,ä½†è¿™ä¸€æ•°é‡å¹¶éå›ºå®šä¸å˜,è€Œæ˜¯å¯ä»¥æ ¹æ®æ¨¡å‹çš„å¤æ‚åº¦å’Œå½“å‰ä»»åŠ¡è¿›è¡Œè°ƒæ•´ã€‚<br><strong>æ¯ä¸ªå¤´ä»è¾“å…¥åºåˆ—ä¸­æ•è·ä¸åŒçš„ç‰¹å¾,å®ƒä»¬çš„é›†ä½“è¾“å‡ºè¢«æ‹¼æ¥åœ¨ä¸€èµ·,å¹¶å†æ¬¡è¿›è¡Œçº¿æ€§å˜æ¢,ä»¥äº§ç”Ÿæœ€ç»ˆçš„æ³¨æ„åŠ›è¾“å‡º</strong>ã€‚</p><p>è¿™ç§å¤šå±‚é¢çš„æ–¹æ³•ä½¿æ¨¡å‹åœ¨ç†è§£ä¸Šæ›´åŠ æ•é”å’Œç»†è‡´ã€‚</p><h4 id="å‰é¦ˆç¥ç»ç½‘ç»œ"><a href="#å‰é¦ˆç¥ç»ç½‘ç»œ" class="headerlink" title="å‰é¦ˆç¥ç»ç½‘ç»œ"></a>å‰é¦ˆç¥ç»ç½‘ç»œ</h4><p>åœ¨Transformeræ¶æ„ä¸­,è‡ªæ³¨æ„åŠ›å±‚ä¹‹é—´åµŒå¥—ç€å‰é¦ˆç¥ç»ç½‘ç»œ(FFNN)ã€‚</p><p>è¿™äº›ç½‘ç»œåœ¨å¤„ç†æ³¨æ„åŠ›æœºåˆ¶è·å–çš„ä¿¡æ¯æ–¹é¢å‘æŒ¥ç€å…³é”®ä½œç”¨,æ¯ä¸ªFFNNç”±ä¸¤ä¸ªçº¿æ€§å˜æ¢ç»„æˆ,ä¸­é—´ä½¿ç”¨ReLUæ¿€æ´»å‡½æ•°,è¿™ä¸€è®¾è®¡é€‰æ‹©èƒ½å¤Ÿåœ¨åŸæœ¬çº¿æ€§çš„æ³¨æ„åŠ›è®¡ç®—ä¸­å¼•å…¥éçº¿æ€§ã€‚</p><p>FFNNçš„ä½œç”¨æ˜¯ç‹¬ç«‹å¤„ç†æ³¨æ„åŠ›å±‚ä¸­æ¯ä¸ªä½ç½®çš„è¾“å‡º,ç¡®ä¿è‡ªæ³¨æ„åŠ›æœºåˆ¶æ•æ‰è¯å…ƒé—´çš„å…³ç³»æ—¶,FFNNèƒ½å¤Ÿç»†åŒ–è¯å…ƒè¡¨ç¤º,è€Œä¸æ”¹å˜å…¶ä½ç½®ã€‚<br>è¿™ç§å¹¶è¡Œå¤„ç†èƒ½åŠ›ä¸RNNçš„é¡ºåºå¤„ç†æ€§è´¨æˆªç„¶ä¸åŒ,RNNä»¥é€æ­¥çš„æ–¹å¼å¤„ç†è¾“å…¥ã€‚</p><p>Transformerä¸­FFNNçš„é­…åŠ›åœ¨äºå…¶ç®€æ´è€Œå¼ºå¤§,å®ƒä»¬ä»…ç”±å‡ ä¸ªçº¿æ€§å±‚ç»„æˆ,ä½†åœ¨æ³¨æ„åŠ›å±‚çªå‡ºæ˜¾ç¤ºç›¸å…³ä¿¡æ¯å,å®ƒä»¬èƒ½å¤Ÿå»ºæ¨¡å¤æ‚çš„å…³ç³»ã€‚<br>FFNNæ˜¯Transformeræ¨¡å‹ä¸­çš„æ— åè‹±é›„,ä¸ºå­¦ä¹ è¿‡ç¨‹æä¾›äº†æ·±åº¦å’Œå¤æ‚æ€§ã€‚</p><p>å®ƒä»¬æ˜¯åº”ç”¨ç›¸åŒå˜æ¢åˆ°ä¸åŒä½ç½®çš„å¾—åŠ›åŠ©æ‰‹,ä½¿æ¨¡å‹èƒ½å¤Ÿåœ¨ä»è¯­è¨€ç†è§£åˆ°å›¾åƒè¯†åˆ«çš„å„ç§ä»»åŠ¡ä¸­å®ç°ä¸“ä¸šåŒ–ã€‚</p><h3 id="æ¨¡å‹æ¶æ„è§£æ"><a href="#æ¨¡å‹æ¶æ„è§£æ" class="headerlink" title="æ¨¡å‹æ¶æ„è§£æ"></a>æ¨¡å‹æ¶æ„è§£æ</h3><p>Transformeræ¨¡å‹æ¡†æ¶ä¸»è¦ç”±ç¼–ç å™¨(Encoder)å’Œè§£ç å™¨(Decoder)ä¸¤éƒ¨åˆ†ç»„æˆ<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-37.png"></p><p>Encoderå°†è¾“å…¥è½¬åŒ–ä¸ºå›ºå®šç»´åº¦çš„å‘é‡ï¼Œç”±å¤šä¸ªç›¸åŒçš„å±‚ç»„æˆã€‚æ¯å±‚æœ‰ä¸¤ä¸ªå­å±‚ï¼Œåˆ†åˆ«æ˜¯è‡ªæ³¨æ„åŠ›å±‚(Self-Attention Layer)å’Œå‰é¦ˆå…¨è¿æ¥å±‚(Feedforward Layer)ã€‚å…¶ä¸­ï¼Œè‡ªæ³¨æ„åŠ›å±‚é€šè¿‡è®¡ç®—è¾“å…¥çš„æ¯ä¸ªå…ƒç´ ä¸å…¶ä»–å…ƒç´ çš„æ³¨æ„åŠ›åˆ†æ•°æ¥æ•æ‰å…ƒç´ ä¹‹é—´çš„é•¿ç¨‹ä¾èµ–å…³ç³»ï¼›è€Œå‰é¦ˆå…¨è¿æ¥å±‚å°†æ¯ä¸ªå…ƒç´ æ˜ å°„åˆ°å¦ä¸€ä¸ªå‘é‡ç©ºé—´ä»¥æ•æ‰æ›´é«˜çº§åˆ«çš„ç‰¹å¾</p><p>Decoderå°†Encoderçš„è¾“å‡ºå’Œç›®æ ‡åºåˆ—(å¦‚ç¿»è¯‘åçš„å¥å­)ä½œä¸ºè¾“å…¥ï¼Œç”Ÿæˆç›®æ ‡åºåˆ—ä¸­æ¯ä¸ªå…ƒç´ çš„æ¦‚ç‡åˆ†å¸ƒï¼Œç”±å¤šä¸ªç›¸åŒçš„å±‚ç»„æˆã€‚æ¯å±‚æœ‰ä¸‰ä¸ªå­å±‚æ„æˆï¼Œåˆ†åˆ«æ˜¯è‡ªæ³¨æ„åŠ›å±‚ã€ç¼–ç å™¨-è§£ç å™¨æ³¨æ„åŠ›å±‚(Encoder-Decoder Attention Layer)å’Œå‰é¦ˆå…¨è¿æ¥å±‚ã€‚å…¶ä¸­è‡ªæ³¨æ„åŠ›å±‚å’Œå‰é¦ˆå…¨è¿æ¥å±‚ä½œç”¨ä¸Encoderç›¸åŒï¼Œè€Œç¼–ç å™¨-è§£ç å™¨æ³¨æ„åŠ›å±‚åˆ™å°†Encoderå½“å‰ä½ç½®çš„è¾“å…¥ä¸Decoderæ‰€æœ‰ä½ç½®è®¡ç®—æ³¨æ„åŠ›åˆ†æ•°æ¥è·å¾—ä¸ç›®æ ‡åºåˆ—æœ‰å…³çš„ä¿¡æ¯</p><p>æ•´ä¸ªæ¨¡å‹å¯ä»¥æŠ½è±¡ä¸ºä»¥ä¸‹ç»“æ„<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-38.png"></p><h4 id="ç¼–ç å™¨-Encoder"><a href="#ç¼–ç å™¨-Encoder" class="headerlink" title="ç¼–ç å™¨(Encoder)"></a>ç¼–ç å™¨(Encoder)</h4><p>ç¼–ç å™¨çš„ä¸»è¦ä½œç”¨æ˜¯å°†è¾“å…¥ç¼–ç å¤„ç†ä¸ºå¸¦æœ‰æ³¨æ„åŠ›ä¿¡æ¯çš„è¿ç»­è¡¨ç¤ºï¼Œå¯ä»¥å°†ç¼–ç å™¨å †å Næ¬¡ä½¿å¾—æ¯ä¸€å±‚éƒ½æœ‰æœºä¼šå­¦ä¹ ä¸åŒçš„æ³¨æ„åŠ›è¡¨ç¤ºï¼Œä»è€Œæé«˜Transformerçš„é¢„æµ‹èƒ½åŠ›</p><p>Encoderéƒ¨åˆ†ä¸»è¦åŒ…æ‹¬ï¼š </p><ul><li>input Embeddingè¾“å…¥åµŒå…¥</li><li>Position Encodingä½ç½®ç¼–ç </li><li>Multi-Head Attentionå¤šå¤´æ³¨æ„åŠ›æœºåˆ¶</li><li>Feed Forwardå‰é¦ˆç½‘ç»œ</li></ul><h5 id="input-Embeddingè¾“å…¥åµŒå…¥"><a href="#input-Embeddingè¾“å…¥åµŒå…¥" class="headerlink" title="input Embeddingè¾“å…¥åµŒå…¥"></a>input Embeddingè¾“å…¥åµŒå…¥</h5><p>å› è®¡ç®—æœºæœ¬èº«å¹¶ä¸èƒ½å¤„ç†æ–‡å­—ä¿¡æ¯ï¼Œæ•…å°†è¾“å…¥æ–‡æœ¬è½¬æ¢æˆå›ºå®šç»´åº¦çš„å‘é‡è¡¨ç¤ºï¼Œä½¿å…¶èƒ½å¤Ÿè¢«æ¨¡å‹å¤„ç†<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-39.png"></p><p>ä¾‹ï¼šè¾“å…¥æ–‡æœ¬&#x3D;â€œhow are youï¼Ÿâ€ï¼Œinput Embeddingå±‚å°†æ¯ä¸ªå•è¯æ˜ å°„åˆ°é•¿åº¦ç›¸ç­‰çš„å‘é‡<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-40.png"></p><h5 id="Position-Encodingä½ç½®ç¼–ç "><a href="#Position-Encodingä½ç½®ç¼–ç " class="headerlink" title="Position Encodingä½ç½®ç¼–ç "></a>Position Encodingä½ç½®ç¼–ç </h5><ul><li>ä¸ºä½•éœ€è¦ä½ç½®ç¼–ç ?<br>ç”±äºtransformerä¸­ä½¿ç”¨çš„éƒ½æ˜¯çº¿æ€§å±‚ï¼Œç¼–ç è¿‡ç¨‹ä¸­æ²¡æœ‰æ˜æ˜¾çš„ä½ç½®ä¿¡æ¯ï¼Œå­—è¯ä½ç½®çš„äº¤æ¢ï¼Œä»…ç›¸å½“äºçŸ©é˜µä¸­è¡Œä½ç½®çš„äº¤æ¢ã€‚è¿™å¸¦æ¥å¹¶è¡Œè®¡ç®—çš„ä¼˜åŠ¿ï¼Œä½†æ˜¯ä¹Ÿå¼±åŒ–äº†è¯­åºä¿¡æ¯ï¼Œå› æ­¤éœ€è¦å¼•å…¥ä½ç½®ç¼–ç æ¥å¼¥è¡¥ï¼Œå…·ä½“ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­:<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#å‡è®¾çº¿æ€§å±‚w</span>w <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>x <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#è¾“å‡º</span><span class="token triple-quoted-string string">"""[[22, 28] [49, 64] [76, 100]] """</span> <span class="token comment">#ä»…äº¤æ¢è¾“å…¥ä½ç½®</span>x <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#è¾“å‡º</span><span class="token triple-quoted-string string">"""[[49, 64] [76, 100] [22, 28]]"""</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h5 id="transformerä¸­ä½ç½®ç¼–ç "><a href="#transformerä¸­ä½ç½®ç¼–ç " class="headerlink" title="transformerä¸­ä½ç½®ç¼–ç "></a>transformerä¸­ä½ç½®ç¼–ç </h5><p>ä½ç½®ç¼–ç é€šå¸¸æ˜¯ä¸€ç»„ä¸input Embeddingç»´åº¦ç›¸åŒçš„å‘é‡ï¼Œé€šè¿‡ç‰¹å®šæ–¹å¼ç”Ÿæˆ</p><p>åœ¨transformerä¸­ï¼Œé‡‡ç”¨æ­£ä½™å¼¦ä½ç½®ç¼–ç :<br>$$<br>PosEnc_{(pos,2i)}&#x3D;sin(\frac{pos}{10000^{\frac{2i}{d_{model}}}})\PosEnc_{(pos,2i+1)}&#x3D;cos(\frac{pos}{10000^{\frac{2i}{d_{model}}}})<br>$$</p><p>å…¶ä¸­ï¼Œ$d_{model}$æ˜¯input EmbeddingåµŒå…¥å‘é‡çš„ç»´åº¦ï¼Œ$pos$æ˜¯å•è¯åœ¨åºåˆ—ä¸­çš„ä½ç½®ï¼Œ$i$æ˜¯åµŒå…¥å‘é‡ä¸­çš„ç»´åº¦ç´¢å¼•ï¼Œè¾“å…¥å¥å­ä¸ºâ€œI am a robotâ€ï¼Œé‚£ä¹ˆå…¶ä½ç½®ç¼–ç å¦‚ä¸‹ï¼š<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-41.png"></p><h5 id="Multi-Head-Attentionå¤šå¤´æ³¨æ„åŠ›æœºåˆ¶"><a href="#Multi-Head-Attentionå¤šå¤´æ³¨æ„åŠ›æœºåˆ¶" class="headerlink" title="Multi-Head Attentionå¤šå¤´æ³¨æ„åŠ›æœºåˆ¶"></a>Multi-Head Attentionå¤šå¤´æ³¨æ„åŠ›æœºåˆ¶</h5><ul><li>æ³¨æ„åŠ›æœºåˆ¶çš„äº§ç”Ÿ<br>æ³¨æ„åŠ›æœºåˆ¶ä»æœ¬è´¨ä¸Šè®²å’Œäººç±»çš„é€‰æ‹©æ€§æ³¨æ„åŠ›æœºåˆ¶ç±»ä¼¼ï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯ä»ä¼—å¤šä¿¡æ¯ä¸­é€‰æ‹©å¯¹å½“å‰ä»»åŠ¡ç›®æ ‡æ›´åŠ å…³é”®çš„ä¿¡æ¯ï¼Œå®ƒå…è®¸æ¨¡å‹å¯¹è¾“å…¥åºåˆ—çš„ä¸åŒä½ç½®åˆ†é…ä¸åŒçš„æƒé‡ï¼Œä»¥ä¾¿åœ¨å¤„ç†æ¯ä¸ªåºåˆ—å…ƒç´ æ—¶å…³æ³¨æœ€ç›¸å…³çš„éƒ¨åˆ†<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-42.png" alt="è‡ªæ³¨æ„åŠ›æœºåˆ¶"></li></ul><p>ç”¨å…¬å¼è¡¨ç¤ºä¸ºï¼š<br>$$<br>Attention(Q,K,V)&#x3D;softmax(\frac{QK^T}{\sqrt{d}})V<br>$$<br>æ³¨ï¼šé™¤ä»¥æ˜¯å› ä¸ºç‚¹ç§¯æ•°é‡çº§å¢é•¿å¾ˆå¤§ï¼Œå› æ­¤å°†softmaxå‡½æ•°æ¨å‘æ¢¯åº¦æå°åŒºåŸŸåå‘ä¼ æ’­æ—¶å¯¼è‡´æ¢¯åº¦æ¶ˆå¤±è€Œæ— æ³•å­¦ä¹ </p><p>å¦‚ä¸Šå›¾ï¼Œæ³¨æ„åŠ›åˆ†æ•°è®¡ç®—åˆ†ä¸ºä¸‰æ­¥ï¼š<br>1ã€å°†ä¸€ä¸ªtoken embeddingåˆ†åˆ«ä¸ä¸‰ä¸ªçŸ©é˜µåšçŸ©é˜µä¹˜åå¾—åˆ°è¿™ä¸ªtokenå¯¹åº”çš„ä¸‰ä¸ªå‘é‡</p><p>2ã€ä¸ºäº†æ‰¾åˆ°tokenä¸å…¶ä»–tokençš„å…³æ³¨å…³ç³»ï¼Œå°†tokençš„å‘é‡ä¸å…¶ä»–æ‰€æœ‰tokençš„å‘é‡åšå†…ç§¯ï¼Œé™¤ä»¥åå¾—åˆ°æ³¨æ„åŠ›åˆ†æ•°</p><p>3ã€è¿‡softmaxå°†åˆ†æ•°å½’ä¸€åŒ–åˆ°[0,1]ä¹‹é—´ï¼Œé‚£ä¹ˆå¯¹äºä¸å¤ªéœ€è¦å…³æ³¨çš„tokenæƒé‡å°±ä¼šå¾ˆå°<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-43.png" alt="å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶"></p><p>å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶æ˜¯åœ¨è‡ªæ³¨æ„åŠ›æœºåˆ¶çš„åŸºç¡€ä¸Šå‘å±•èµ·æ¥çš„ï¼Œæ˜¯è‡ªæ³¨æ„åŠ›æœºåˆ¶çš„å˜ä½“ï¼Œæ—¨åœ¨å¢å¼ºæ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›å’Œæ³›åŒ–èƒ½åŠ›ã€‚é€šè¿‡ä½¿ç”¨å¤šä¸ªç‹¬ç«‹çš„æ³¨æ„åŠ›å¤´ï¼Œåˆ†åˆ«è®¡ç®—æ³¨æ„åŠ›æƒé‡ï¼Œå¹¶å°†ç»“æœåŠ æƒæ±‚å’Œï¼Œä»è€Œè·å¾—æ›´ä¸°å¯Œçš„è¡¨ç¤º</p><blockquote><p>ä¸ºä»€ä¹ˆè¦ç¼©æ”¾ç‚¹ç§¯ï¼Ÿ<br>åœ¨å®é™…çš„æ·±åº¦å­¦ä¹ è®­ç»ƒè¿‡ç¨‹ä¸­ï¼ŒæŸ¥è¯¢å’Œé”®çš„ç»´åº¦ d_k å¯èƒ½ä¼šå¾ˆå¤§ã€‚å¦‚æœä¸è¿›è¡Œç¼©æ”¾ï¼Œç‚¹ç§¯çš„ç»“æœä¼šéšç€ç»´åº¦çš„å¢å¤§è€Œå˜å¾—å¾ˆå¤§ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æ¢¯åº¦åœ¨åå‘ä¼ æ’­æ—¶å‡ºç°é—®é¢˜ï¼Œä»è€Œå½±å“è®­ç»ƒçš„ç¨³å®šæ€§ã€‚å› æ­¤ï¼Œé€šè¿‡å°†ç‚¹ç§¯ç»“æœé™¤ä»¥ $\sqrt{d_k}$ï¼Œç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›æœºåˆ¶èƒ½å¤Ÿä½¿å¾—ç‚¹ç§¯çš„å€¼ä¿æŒåœ¨ä¸€ä¸ªåˆç†çš„èŒƒå›´å†…ï¼Œä»è€Œé¿å…æ•°å€¼è¿‡å¤§æˆ–è¿‡å°çš„é—®é¢˜ã€‚</p></blockquote><p>ä¸¾ä¾‹è¯´æ˜ï¼š<br>å‡è®¾æˆ‘ä»¬æœ‰å¥å­ â€œI love deep learningâ€ ä½œä¸ºè¾“å…¥ Xï¼Œä»¥ä¸‹æ˜¯å¦‚ä½•é€šè¿‡æ³¨æ„åŠ›æœºåˆ¶ç”Ÿæˆ Qã€K å’Œ V çš„è¯¦ç»†è¿‡ç¨‹ã€‚</p><ul><li>è¾“å…¥ X<br>é¦–å…ˆï¼Œå¥å­ â€œI love deep learningâ€ ä¼šè¢«è½¬æ¢æˆä¸€ä¸ªçŸ©é˜µ Xï¼Œæ¯ä¸ªå•è¯è¢«æ˜ å°„ä¸ºä¸€ä¸ªè¯å‘é‡ã€‚å‡è®¾æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ 4 ç»´åµŒå…¥ç©ºé—´ï¼ˆä¸ºäº†ç®€åŒ–ä¸¾ä¾‹ï¼‰ï¼Œé‚£ä¹ˆ X å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š</li></ul><table><thead><tr><th align="left">è¯</th><th align="left">è¯å‘é‡ï¼ˆå‡è®¾ä¸º4ç»´ï¼‰</th></tr></thead><tbody><tr><td align="left">â€œIâ€</td><td align="left">[0.1, 0.2, 0.3, 0.4]</td></tr><tr><td align="left">â€œloveâ€</td><td align="left">[0.5, 0.6, 0.7, 0.8]</td></tr><tr><td align="left">â€œdeepâ€</td><td align="left">[0.9, 1.0, 1.1, 1.2]</td></tr><tr><td align="left">â€œlearningâ€</td><td align="left">[1.3, 1.4, 1.5, 1.6]</td></tr></tbody></table><p>å› æ­¤ï¼Œè¾“å…¥çŸ©é˜µ X çš„å½¢çŠ¶ä¸º (4, 4)ï¼Œå…¶ä¸­ 4 æ˜¯å¥å­çš„é•¿åº¦ï¼ˆ4 ä¸ªè¯ï¼‰ï¼Œæ¯ä¸ªè¯æ˜¯ä¸€ä¸ª 4 ç»´çš„è¯å‘é‡ã€‚</p><ul><li>ç”Ÿæˆ Qã€K å’Œ V<br>æ¥ä¸‹æ¥ï¼Œé€šè¿‡å¯¹ X è¿›è¡Œçº¿æ€§å˜æ¢ï¼Œæˆ‘ä»¬åˆ†åˆ«å¾—åˆ°æŸ¥è¯¢ï¼ˆQï¼‰ã€é”®ï¼ˆKï¼‰å’Œå€¼ï¼ˆVï¼‰ï¼š</li></ul><p>Q &#x3D; X * W_Q<br>K &#x3D; X * W_K<br>V &#x3D; X * W_V<br>å…¶ä¸­ï¼ŒW_Qã€W_K å’Œ W_V æ˜¯æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­å­¦ä¹ åˆ°çš„æƒé‡çŸ©é˜µã€‚å®ƒä»¬çš„ç»´åº¦é€šå¸¸æ˜¯ (4, d_k) å’Œ (4, d_v)ï¼Œå…¶ä¸­ d_k æ˜¯æ¯ä¸ªå¤´çš„é”®çš„ç»´åº¦ï¼Œd_v æ˜¯æ¯ä¸ªå¤´çš„å€¼çš„ç»´åº¦ã€‚</p><p>å‡è®¾æˆ‘ä»¬è®¾ç½®ï¼š</p><p>d_k &#x3D; 2ï¼ˆæŸ¥è¯¢å’Œé”®çš„ç»´åº¦ä¸º 2ï¼‰<br>d_v &#x3D; 2ï¼ˆå€¼çš„ç»´åº¦ä¸º 2ï¼‰<br>å› æ­¤ï¼ŒW_Qã€W_K å’Œ W_V çš„ç»´åº¦åˆ†åˆ«ä¸º (4, 2) å’Œ (4, 2)ã€‚</p><p>åœ¨è¿›è¡Œçº¿æ€§å˜æ¢æ—¶ï¼ŒçŸ©é˜µä¹˜æ³•å°† X ä¸ W_Qã€W_Kã€W_V ç›¸ä¹˜ï¼Œç”Ÿæˆ Qã€K å’Œ Vã€‚å‡è®¾ç»“æœå¦‚ä¸‹ï¼š</p><p>Qï¼ˆæŸ¥è¯¢çŸ©é˜µï¼‰ï¼š</p><table><thead><tr><th align="left">è¯</th><th align="left">Q å‘é‡</th></tr></thead><tbody><tr><td align="left">â€œIâ€</td><td align="left">[0.12, 0.25]</td></tr><tr><td align="left">â€œloveâ€</td><td align="left">[0.46, 0.56]</td></tr><tr><td align="left">â€œdeepâ€</td><td align="left">[0.75, 0.88]</td></tr><tr><td align="left">â€œlearningâ€</td><td align="left">[1.04, 1.18]</td></tr></tbody></table><p>Kï¼ˆé”®çŸ©é˜µï¼‰ï¼š</p><table><thead><tr><th align="left">è¯</th><th align="left">K å‘é‡</th></tr></thead><tbody><tr><td align="left">â€œIâ€</td><td align="left">[0.08, 0.20]</td></tr><tr><td align="left">â€œloveâ€</td><td align="left">[0.42, 0.53]</td></tr><tr><td align="left">â€œdeepâ€</td><td align="left">[0.72, 0.85]</td></tr><tr><td align="left">â€œlearningâ€</td><td align="left">[1.01, 1.12]</td></tr></tbody></table><p>Vï¼ˆå€¼çŸ©é˜µï¼‰ï¼š</p><table><thead><tr><th align="left">è¯</th><th align="left">V å‘é‡</th></tr></thead><tbody><tr><td align="left">â€œIâ€</td><td align="left">[0.14, 0.28]</td></tr><tr><td align="left">â€œloveâ€</td><td align="left">[0.50, 0.61]</td></tr><tr><td align="left">â€œdeepâ€</td><td align="left">[0.76, 0.90]</td></tr><tr><td align="left">â€œlearningâ€</td><td align="left">[1.06, 1.20]</td></tr></tbody></table><ul><li><p>æ³¨æ„åŠ›è®¡ç®—<br>æŸ¥è¯¢ï¼ˆQï¼‰å’Œé”®ï¼ˆKï¼‰çš„ç›¸ä¼¼åº¦ï¼š æˆ‘ä»¬è®¡ç®— Q å’Œ K ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œé€šå¸¸ä½¿ç”¨ç‚¹ç§¯æ¥è¡¡é‡ç›¸ä¼¼åº¦ã€‚å¯¹äºæ¯ä¸ªæŸ¥è¯¢ Q[i] å’Œæ‰€æœ‰é”® K[j]ï¼Œæˆ‘ä»¬è®¡ç®—ç‚¹ç§¯ï¼ˆQ[i] ä¸ K[j] çš„ç‚¹ç§¯ï¼‰ã€‚<br>åŠ æƒå€¼ï¼ˆVï¼‰çš„åŠ æƒå’Œï¼š åœ¨è®¡ç®—å®Œç›¸ä¼¼åº¦åï¼Œæˆ‘ä»¬ä½¿ç”¨ softmax æ¥å°†ç›¸ä¼¼åº¦è½¬æ¢ä¸ºæ³¨æ„åŠ›æƒé‡ï¼ˆæ¦‚ç‡ï¼‰ã€‚ç„¶åï¼Œå°†è¿™äº›æƒé‡åº”ç”¨åˆ° V ä¸Šï¼Œé€šè¿‡åŠ æƒå’Œå¾—åˆ°æœ€ç»ˆçš„è¾“å‡ºã€‚</p></li><li><p>æ€»ç»“<br>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š<br>X æ˜¯è¾“å…¥çš„è¯å‘é‡çŸ©é˜µï¼Œè¡¨ç¤ºå¥å­ â€œI love deep learningâ€ã€‚<br>é€šè¿‡çº¿æ€§å˜æ¢ï¼Œå¾—åˆ°æŸ¥è¯¢ï¼ˆQï¼‰ã€é”®ï¼ˆKï¼‰å’Œå€¼ï¼ˆVï¼‰ï¼Œå®ƒä»¬çš„ç»´åº¦ä¼šæ ¹æ®å¤´æ•°ï¼ˆmulti-headï¼‰å’Œæ¨¡å‹è®¾ç½®ï¼ˆå¦‚ d_kã€d_vï¼‰æœ‰æ‰€ä¸åŒã€‚<br>Q ä»£è¡¨æ¯ä¸ªè¯çš„æŸ¥è¯¢ï¼ŒK ä»£è¡¨çŸ¥è¯†åº“ä¸­æ‰€æœ‰è¯çš„ç‰¹å¾ï¼ŒV æ˜¯åŒ…å«è¯çš„å®é™…ä¿¡æ¯çš„çŸ©é˜µã€‚<br>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ¨¡å‹èƒ½å¤Ÿè®¡ç®—æ¯ä¸ªè¯ï¼ˆæŸ¥è¯¢ï¼‰å’Œå…¶ä»–æ‰€æœ‰è¯ï¼ˆé”®ï¼‰ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œç„¶åä»å…¶ä»–è¯ï¼ˆå€¼ï¼‰ä¸­æå–ç›¸å…³ä¿¡æ¯ï¼Œä»è€ŒåŠ¨æ€åœ°è°ƒæ•´æ¯ä¸ªè¯çš„è¡¨ç¤ºã€‚</p></li></ul><h5 id="æ®‹å·®è¿æ¥"><a href="#æ®‹å·®è¿æ¥" class="headerlink" title="æ®‹å·®è¿æ¥"></a>æ®‹å·®è¿æ¥</h5><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-44.png"><br>æ®‹å·®è¿æ¥ï¼šå°†å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶çš„è¾“å‡ºå‘é‡åŠ åˆ°åŸå§‹è¾“å…¥å‘é‡ä¸Šï¼Œå†åšå±‚å½’ä¸€åŒ–</p><h5 id="Normå±‚å½’ä¸€åŒ–"><a href="#Normå±‚å½’ä¸€åŒ–" class="headerlink" title="Normå±‚å½’ä¸€åŒ–"></a>Normå±‚å½’ä¸€åŒ–</h5><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-45.png"></p><p>Transformerä¸­ä¸»è¦åˆ©ç”¨Layer-normalå±‚å½’ä¸€åŒ–è€Œä¸æ˜¯æ‰¹å½’ä¸€åŒ–ï¼Œæœ‰åŠ©äºé¿å…è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼Œæé«˜æ¨¡å‹ç¨³å®šæ€§</p><ul><li>ä¸ºä»€ä¹ˆä½¿ç”¨å±‚å½’ä¸€åŒ–?<br>åœ¨NLPä»»åŠ¡ä¸­åºåˆ—é•¿åº¦é€šå¸¸æ˜¯å˜åŒ–çš„ï¼Œå±‚å½’ä¸€åŒ–æ˜¯å¯¹å•ä¸ªæ ·æœ¬ä¸­æ‰€æœ‰ç‰¹å¾è¿›è¡Œå½’ä¸€åŒ–ä½¿å¾—èƒ½å¤Ÿæ›´å¥½å¤„ç†å¯å˜é•¿åº¦çš„æƒ…å†µ </li><li>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨?<br>åœ¨æ®‹å·®(Residual Connection)ä¹‹åï¼ŒTransformeræ¨¡å‹ä¸­æ¯ä¸ªå­å±‚éƒ½æœ‰ä¸€ä¸ªæ®‹å·®è¿æ¥ï¼Œç´§æ¥ç€åšå±‚å½’ä¸€åŒ–</li></ul><h5 id="Feed-Forwardå‰é¦ˆç½‘ç»œå±‚"><a href="#Feed-Forwardå‰é¦ˆç½‘ç»œå±‚" class="headerlink" title="Feed Forwardå‰é¦ˆç½‘ç»œå±‚"></a>Feed Forwardå‰é¦ˆç½‘ç»œå±‚</h5><p>åœ¨Transformerä¸­ç§°ä½œPosition-wise Feed-Forward Networks(ç‚¹å¯¹ç‚¹å‰é¦ˆç¥ç»ç½‘ç»œï¼Œç®€ç§°FFN)</p><p>å®è´¨ä¸Šä¸ºä¸¤ä¸ªå…¨è¿æ¥å±‚ï¼šç¬¬ä¸€ä¸ªå±‚å°†è¾“å…¥ç»´åº¦æ‹“å±•(å¦‚ä»512ç»´å‡åˆ°2048ç»´)ï¼Œä¹‹åè¿‡æ¿€æ´»å‡½æ•°(ä¸€èˆ¬ä¸ºReLUæˆ–GELU)ï¼›ç¬¬äºŒä¸ªå±‚å°†å‡ç»´åçš„è¾“å‡ºç¼©å‡åˆ°åŸå§‹ç»´åº¦(å¦‚ä»2048ç»´ç¼©å‡å›512ç»´)</p><p>å‰é¦ˆç½‘ç»œå±‚å¤„ç†ç»“æŸåè¿›è¡Œæ®‹å·®è¿æ¥å†è¿›è¡Œå±‚å½’ä¸€åŒ–</p><h4 id="è§£ç å™¨-Decoder"><a href="#è§£ç å™¨-Decoder" class="headerlink" title="è§£ç å™¨(Decoder)"></a>è§£ç å™¨(Decoder)</h4><p>è§£ç å™¨çš„ä¸»è¦ä½œç”¨æ˜¯ç”Ÿæˆæ–‡æœ¬åºåˆ—ï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p><ul><li>Masked Multi-Head Attentionå…·æœ‰æ©ç çš„å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶</li><li>Multi-Head Attentionå¤šå¤´æ³¨æ„åŠ›æœºåˆ¶</li><li>Feed Forwardå‰é¦ˆç½‘ç»œ</li><li>åˆ†ç±»å™¨</li></ul><h5 id="Output-Embedding"><a href="#Output-Embedding" class="headerlink" title="Output Embedding"></a>Output Embedding</h5><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-46.png"><br>åœ¨Decoderä¸­å°†ç›®æ ‡åºåˆ—é€šè¿‡Embeddingå±‚è½¬æ¢ä¸ºå¯†é›†çš„å‘é‡è¡¨ç¤ºï¼Œéšåé€šè¿‡Position EmbeddingåŠ å…¥åºåˆ—ä¸­çš„ä½ç½®ä¿¡æ¯ï¼Œä½œä¸ºè§£ç å™¨çš„è¾“å…¥ï¼Œç”¨äºæ¨¡å‹è®­ç»ƒ</p><h5 id="Masked-Multi-Head-Attentionå…·æœ‰æ©ç çš„å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶"><a href="#Masked-Multi-Head-Attentionå…·æœ‰æ©ç çš„å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶" class="headerlink" title="Masked Multi-Head Attentionå…·æœ‰æ©ç çš„å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶"></a>Masked Multi-Head Attentionå…·æœ‰æ©ç çš„å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶</h5><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-47.png"></p><p>self-attentionä¼šè®¡ç®—å½“å‰è¯ä¸å…¶ä»–è¯å…³ç³»ï¼Œä½†åœ¨ç”¨Decoderç”Ÿæˆåºåˆ—æ—¶ï¼Œç›®æ ‡æ˜¯é¢„æµ‹å½“å‰ä½ç½®çš„å•è¯ï¼Œæ¨¡å‹åªèƒ½ä½¿ç”¨åˆ°è¯¥ä½ç½®ä¹‹å‰çš„ä¿¡æ¯ï¼Œå…¶åé¢çš„ä¿¡æ¯ä¸èƒ½è¢«æ³¨æ„åŠ›æœºåˆ¶çœ‹åˆ°ï¼Œé˜²æ­¢ä¿¡æ¯æ³„éœ²ï¼Œæ•…éœ€è¦æƒ³åŠæ³•é®æŒ¡åé¢çš„ä¿¡æ¯</p><p>åœ¨Transformerä¸­ä¸»è¦æ˜¯é€šè¿‡åº”ç”¨æ©ç (Mask)æ“ä½œå®ç°<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-48.png"></p><p>å¦‚ä¸Šå›¾ï¼Œä¸ºé˜²æ­¢è§£ç å™¨çœ‹åˆ°æœªæ¥çš„ä¿¡æ¯ï¼Œåœ¨å·²å¾—åˆ°çš„æ³¨æ„åŠ›åˆ†æ•°çŸ©é˜µä¸ŠåŠ ä¸Šä¸€ä¸ªmaskçŸ©é˜µï¼Œä½¿æ©ç ä½ç½®æ³¨æ„åŠ›å˜å¾—è´Ÿæ— ç©·å¤§ï¼Œå¾—åˆ°Masked Scores</p><p>è¿™æ ·ï¼ŒMasked Scoresç»è¿‡softmaxå‡½æ•°æ—¶ï¼Œç›¸å¯¹â€œå½“å‰è¯â€çš„â€œæœªæ¥è¯â€çš„æ³¨æ„åŠ›å¾—åˆ†å˜ä¸º0ï¼Œå³ä¸ä¼šè®¿é—®åˆ°æœªæ¥ä¿¡æ¯</p><h5 id="Multi-Head-Attentionå¤šå¤´æ³¨æ„åŠ›æœºåˆ¶-1"><a href="#Multi-Head-Attentionå¤šå¤´æ³¨æ„åŠ›æœºåˆ¶-1" class="headerlink" title="Multi-Head Attentionå¤šå¤´æ³¨æ„åŠ›æœºåˆ¶"></a>Multi-Head Attentionå¤šå¤´æ³¨æ„åŠ›æœºåˆ¶</h5><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-49.png"></p><p>è¿™é‡Œçš„å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶åŸç†åŒEncoderéƒ¨åˆ†ï¼Œåªæ˜¯æ¥è‡ªäºEncoderï¼Œç›®æ ‡æ˜¯å°†è§£ç å™¨å½“å‰ç”Ÿæˆçš„åºåˆ—ä¸åŸå§‹è¾“å…¥åºåˆ—(ç»è¿‡ç¼–ç å™¨å¤„ç†çš„)è”ç³»èµ·æ¥ï¼Œç”¨äºç”Ÿæˆä¸‹ä¸€ä¸ªç›®æ ‡è¯</p><h5 id="Feed-Forwardå‰é¦ˆç½‘ç»œ"><a href="#Feed-Forwardå‰é¦ˆç½‘ç»œ" class="headerlink" title="Feed Forwardå‰é¦ˆç½‘ç»œ"></a>Feed Forwardå‰é¦ˆç½‘ç»œ</h5><p>å‚è€ƒEncoderéƒ¨åˆ†çš„Feed Forward</p><h5 id="åˆ†ç±»å™¨"><a href="#åˆ†ç±»å™¨" class="headerlink" title="åˆ†ç±»å™¨"></a>åˆ†ç±»å™¨</h5><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-50.png"></p><p>æœ€åï¼Œç”±ä¸€ä¸ªçº¿æ€§å±‚å’Œä¸€ä¸ªsoftmaxå¾—åˆ°å½“å‰è¯æ¦‚ç‡</p><h5 id="ç”Ÿæˆåºåˆ—åœæ­¢"><a href="#ç”Ÿæˆåºåˆ—åœæ­¢" class="headerlink" title="ç”Ÿæˆåºåˆ—åœæ­¢"></a>ç”Ÿæˆåºåˆ—åœæ­¢</h5><p>åœ¨æ¨¡å‹è¾“å‡ºâ€eosâ€æ—¶åœæ­¢ç”Ÿæˆ<br>è‡³æ­¤ï¼Œæ•´ä¸ªTransformeræ¨¡å‹å…¨éƒ¨æ‹†è§£å®Œæ¯•ï¼Œå…·ä½“è§£å†³äº†å¦‚ä¸‹é—®é¢˜ï¼š</p><ul><li>é•¿è·ç¦»ä¾èµ–å…³ç³»é•¿æœŸä¾èµ–é—®é¢˜ï¼š é‡åˆ°é•¿æ–‡æœ¬æ—¶ï¼Œä¼ ç»ŸRNNéš¾ä»¥æ•æ‰åºåˆ—çš„è¿œè·ç¦»ä¾èµ–å…³ç³»ã€‚Transformeré€šè¿‡è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼Œèƒ½å¤Ÿåœ¨ä¸åŒä½ç½®å¯¹åºåˆ—ä¸­çš„æ¯ä¸ªå…ƒç´ èµ‹äºˆä¸åŒçš„é‡è¦æ€§ï¼Œä»è€Œæœ‰æ•ˆåœ°æ•æ‰é•¿è·ç¦»ä¾èµ–å…³ç³» </li><li>å¹¶è¡Œè®¡ç®—é—®é¢˜ï¼š ä¼ ç»Ÿçš„RNNè®­ç»ƒæ—¶éœ€æŒ‰åºåˆ—é¡ºåºä¾æ¬¡è¿›è¡Œï¼Œæ— æ³•å¹¶è¡Œè®¡ç®—å¯¼è‡´è®¡ç®—æ•ˆç‡ä½ã€‚Transformeré‡‡ç”¨ç¼–ç å™¨-è§£ç å™¨æ¡†æ¶ï¼Œå…è®¸æ¨¡å‹åœ¨è¾“å…¥åºåˆ—ä¸Šè¿›è¡Œç¼–ç ï¼Œç„¶ååœ¨è¾“å‡ºåºåˆ—ä¸Šè¿›è¡Œè§£ç ï¼Œä»è€Œå®ç°å¹¶è¡Œè®¡ç®—ï¼Œå¤§å¤§æé«˜æ¨¡å‹è®­ç»ƒçš„é€Ÿåº¦ </li><li>ç‰¹å¾æŠ½å–é—®é¢˜ï¼š Transformeré€šè¿‡è‡ªæ³¨æ„åŠ›æœºåˆ¶å’Œå¤šå±‚ç¥ç»ç½‘ç»œç»“æ„ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°ä»è¾“å…¥åºåˆ—ä¸­æŠ½å–ä¸°å¯Œçš„ç‰¹å¾ä¿¡æ¯ï¼Œä¸ºåç»­çš„ä»»åŠ¡æä¾›æ›´å¥½çš„æ”¯æŒ</li></ul><h3 id="Transformerä¸RNNçš„æ¯”è¾ƒ"><a href="#Transformerä¸RNNçš„æ¯”è¾ƒ" class="headerlink" title="Transformerä¸RNNçš„æ¯”è¾ƒ"></a>Transformerä¸RNNçš„æ¯”è¾ƒ</h3><p>é¡ºåºå¤„ç†ä¸å¹¶è¡Œå¤„ç†<br><strong>Transformerçš„å‡ºç°æ ‡å¿—ç€åºåˆ—å»ºæ¨¡æ–¹å¼çš„èŒƒå¼è½¬å˜</strong>ã€‚Transformeræ‘’å¼ƒäº†RNNçš„é¡ºåºä¾èµ–æ€§,èƒ½å¤Ÿå¹¶è¡Œå¤„ç†æ•´ä¸ªåºåˆ—ã€‚è¿™ä¸€æ¶æ„åˆ›æ–°å……åˆ†åˆ©ç”¨äº†ç°ä»£è®¡ç®—ç¡¬ä»¶(å¦‚GPUå’ŒTPU)çš„å¼ºå¤§åŠŸèƒ½,æ˜¾è‘—åŠ é€Ÿäº†è®­ç»ƒå’Œæ¨ç†æ—¶é—´ã€‚<br>ç„¶è€Œ,Transformerçš„å¹¶è¡Œå¤„ç†èƒ½åŠ›å¹¶éæ²¡æœ‰æŠ˜è¡·ã€‚ä¸€ä¸ªæ˜¾è‘—çš„ç¼ºç‚¹æ˜¯å‚æ•°æ•°é‡å¢åŠ ,è¿™éœ€è¦æ›´å¤šçš„å†…å­˜å’Œè®¡ç®—èµ„æºã€‚</p><p>RNNé€æ­¥å¤„ç†æ•°æ®,é€šè¿‡ä¼ é€’ä¸€ä¸ªåŒ…å«å…ˆå‰ä¿¡æ¯çš„éšè—çŠ¶æ€,è€ŒTransformeråˆ™ä¸€æ¬¡æ€§å¤„ç†æ•´ä¸ªåºåˆ—ã€‚<br>è¿™æé«˜äº†æ•ˆç‡,å®ç°äº†æ•°æ®çš„å¹¶è¡Œå¤„ç†,ä½†é™ä½äº†å¯è§£é‡Šæ€§ã€‚ä¸‹è¡¨ç®€æ´åœ°å¯¹æ¯”äº†RNNå’ŒTransformerçš„å¤„ç†ç‰¹æ€§:<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-33.png"></p><p>æœ¬è´¨ä¸Š,è™½ç„¶RNNåœ¨å¤„ç†å…·æœ‰å¼ºçƒˆæ—¶é—´ä¾èµ–æ€§çš„ä»»åŠ¡æ–¹é¢å…·æœ‰å¤©ç„¶ä¼˜åŠ¿,ä½†Transformeråœ¨éœ€è¦å¹¶è¡Œå¤„ç†å¤§åºåˆ—å’Œæ•è·é•¿è·ç¦»ä¾èµ–çš„åœºæ™¯ä¸­è¡¨ç°å‡ºè‰²ã€‚</p><p>é•¿è·ç¦»ä¾èµ–<br>Transformeræœ€æ˜¾è‘—çš„ç‰¹ç‚¹ä¹‹ä¸€æ˜¯èƒ½å¤Ÿä»å®¹å¤„ç†é•¿è·ç¦»ä¾èµ–ã€‚è¿™ä¸€ç‰¹æ€§å¯¹äºç†è§£åºåˆ—ä¸­ç›¸å…³ä¿¡æ¯å¯èƒ½ç›¸éš”ç”šè¿œæ—¶çš„ä¸Šä¸‹æ–‡è‡³å…³é‡è¦ã€‚ä¼ ç»Ÿçš„å¾ªç¯ç¥ç»ç½‘ç»œ(RNN),åŒ…æ‹¬å…¶æ›´å…ˆè¿›çš„å˜ä½“å¦‚é•¿çŸ­æœŸè®°å¿†(LSTM)ç½‘ç»œ,ç»å¸¸å—åˆ°æ¢¯åº¦æ¶ˆå¤±é—®é¢˜çš„å›°æ‰°ã€‚<br>è¿™ä¸ªé—®é¢˜å¯¼è‡´åˆå§‹è¾“å…¥çš„å½±å“éšç€åºåˆ—çš„æ¨è¿›è€Œå‡å¼±,ä½¿è¿™äº›æ¨¡å‹éš¾ä»¥åœ¨é•¿åºåˆ—ä¸­ä¿æŒä¸Šä¸‹æ–‡ã€‚</p><p>ç›¸æ¯”ä¹‹ä¸‹,Transformerä¸å—åºåˆ—é•¿åº¦çš„é™åˆ¶,å…¶è‡ªæ³¨æ„åŠ›æœºåˆ¶åŒæ—¶è®¡ç®—è¾“å…¥åºåˆ—æ‰€æœ‰éƒ¨åˆ†çš„ç›¸å…³æ€§,ä»è€Œå®ç°å¯¹æ•°æ®çš„å…¨å±€ç†è§£ã€‚</p><p>è¿™å¯¹äºéœ€è¦åˆæˆæ•´ä¸ªåºåˆ—ä¸­åˆ†å¸ƒçš„ä¿¡æ¯çš„ä»»åŠ¡(å¦‚æ–‡æ¡£æ‘˜è¦æˆ–é—®ç­”)è€Œè¨€,æ˜¯é©å‘½æ€§çš„ã€‚</p><p>ä¸‹é¢è¯¦ç»†é˜è¿°äº†Transformeråœ¨å¤„ç†é•¿è·ç¦»ä¾èµ–æ–¹é¢ç›¸å¯¹äºRNNçš„ä¼˜åŠ¿:</p><ul><li>Transformer:åˆ©ç”¨è‡ªæ³¨æ„åŠ›æ¥è¡¡é‡åºåˆ—ä¸­æ¯ä¸ªå…ƒç´ çš„é‡è¦æ€§,ä¸å—è·ç¦»å½±å“ã€‚ </li><li>RNN:é¡ºåºå¤„ç†å¯èƒ½å¯¼è‡´æ—©æœŸå…ƒç´ çš„å½±å“å‡å¼±,å°¤å…¶æ˜¯åœ¨é•¿åºåˆ—ä¸­ã€‚ </li><li>LSTM:é€šè¿‡å¼•å…¥é—¨æ§æœºåˆ¶æ¥æ›´å¥½åœ°éšæ—¶é—´ä¿ç•™ä¿¡æ¯,ä½†åœ¨å¤„ç†éå¸¸é•¿çš„åºåˆ—æ—¶ä»ç„¶é¢ä¸´æŒ‘æˆ˜ã€‚</li></ul><p>æœ¬è´¨è€Œè¨€,Transformeræ¶æ„é€šè¿‡ä¸ºé•¿æœŸå­˜åœ¨çš„é•¿è·ç¦»ä¾èµ–é—®é¢˜æä¾›äº†ç¨³å¥çš„è§£å†³æ–¹æ¡ˆ,ä»è€Œ<strong>é‡æ–°å®šä¹‰äº†åºåˆ—å»ºæ¨¡çš„æ ¼å±€</strong>ã€‚</p><p>è¿™ä¸€è¿›æ­¥ä¸ºæœºå™¨å­¦ä¹ é¢†åŸŸå¼€è¾Ÿäº†æ–°çš„è§†é‡,å°¤å…¶æ˜¯åœ¨éœ€è¦æ·±å…¥ç†è§£è¯­å¢ƒçš„å¤æ‚ä»»åŠ¡ä¸­ã€‚</p><h3 id="Transformerçš„åº”ç”¨"><a href="#Transformerçš„åº”ç”¨" class="headerlink" title="Transformerçš„åº”ç”¨"></a>Transformerçš„åº”ç”¨</h3><h4 id="NLPä¸è¯­è¨€å»ºæ¨¡"><a href="#NLPä¸è¯­è¨€å»ºæ¨¡" class="headerlink" title="NLPä¸è¯­è¨€å»ºæ¨¡"></a>NLPä¸è¯­è¨€å»ºæ¨¡</h4><p>åœ¨è‡ªç„¶è¯­è¨€å¤„ç†(NLP)é¢†åŸŸ,Transformerå¼•é¢†äº†è¯­è¨€å»ºæ¨¡èƒ½åŠ›çš„æ–°æ—¶ä»£ã€‚</p><p>å‡­å€Ÿå…¶æ³¨æ„åŠ›æœºåˆ¶,Transformerå·²æˆä¸ºç°ä»£NLPçš„åŸºçŸ³,æ“…é•¿æ•æ‰è¯è¯­é—´çš„è¯­å¢ƒå’Œå…³ç³»ã€‚</p><p>è¿™ä¿ƒä½¿ä»æƒ…æ„Ÿåˆ†æåˆ°è¯­è¨€ç¿»è¯‘,å†åˆ°å¼€å‘é«˜çº§èŠå¤©æœºå™¨äººå’Œè™šæ‹ŸåŠ©ç†ç­‰å„ç§åº”ç”¨å–å¾—äº†æ˜¾è‘—è¿›å±•ã€‚</p><p>Transformerå†…éƒ¨çš„è‡ªæ³¨æ„åŠ›æœºåˆ¶ä½¿å¾—è¯­è¨€ç†è§£æ›´ä¸ºç»†è…»,æ¨¡å‹èƒ½å¤Ÿå¤„ç†å¥å­ä¸­æ‰€æœ‰è¯è¯­ä¹‹é—´çš„å…³è”,è€Œéå­¤ç«‹åœ°å¤„ç†å•ä¸ªè¯è¯­ã€‚<br>ä¸‹è¡¨å±•ç¤ºäº†ä¸€äº›åœ¨NLPä¸­åˆ©ç”¨Transformeræ¶æ„çš„å¼€åˆ›æ€§æ¨¡å‹:<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-34.png"></p><p>å°½ç®¡Transformeråœ¨NLPä¸­èƒ½åŠ›å“è¶Š,ä½†ä»é¢ä¸´æŒ‘æˆ˜,è¯­è¨€çš„å¾®å¦™æ€§å’Œå¯¹è¯­å¢ƒçš„ä¾èµ–æ˜¯æ˜¾è‘—éšœç¢ã€‚</p><p>Transformeræ¨¡å‹çš„ä¸æ–­æ¼”è¿›æ—¨åœ¨åº”å¯¹è¿™äº›å¤æ‚æ€§,ä¸æ–­æ‹“å±•æœºå™¨æ‰€èƒ½ç†è§£å’Œä¸äººç±»è¯­è¨€äº¤äº’çš„è¾¹ç•Œã€‚</p><h4 id="è®¡ç®—æœºè§†è§‰"><a href="#è®¡ç®—æœºè§†è§‰" class="headerlink" title="è®¡ç®—æœºè§†è§‰"></a>è®¡ç®—æœºè§†è§‰</h4><p>Transformeråœ¨è®¡ç®—æœºè§†è§‰é¢†åŸŸçš„å‡ºç°,æ ‡å¿—ç€å¯¹ä¼ ç»Ÿå·ç§¯ç¥ç»ç½‘ç»œ(CNN)çš„èŒƒå¼è½¬å˜,åè€…å¤šå¹´æ¥ä¸€ç›´ä¸»å¯¼è¯¥é¢†åŸŸã€‚Transformerå¼•å…¥äº†ä¸€ç§å¤„ç†è§†è§‰æ•°æ®çš„æ–°æ–¹æ³•,åˆ©ç”¨è‡ªæ³¨æ„åŠ›æœºåˆ¶æ•æ‰å›¾åƒå†…çš„å…¨å±€ä¾èµ–å…³ç³»ã€‚<br>è¿™æœ‰åŠ©äºæ›´ç»†è…»åœ°ç†è§£è§†è§‰è¯­å¢ƒ,å¯¹ç‰©ä½“æ£€æµ‹ã€å›¾åƒåˆ†å‰²å’Œåˆ†ç±»ç­‰ä»»åŠ¡ç‰¹åˆ«æœ‰ç›Šã€‚</p><p>å¦‚<em>Swin Transformerç­‰è§†è§‰Transformerçš„å±‚æ¬¡ç»“æ„,ä½¿æ¨¡å‹èƒ½å¤Ÿå…³æ³¨å›¾åƒçš„ä¸åŒå°ºåº¦,åœ¨è¾¨åˆ«ç»†èŠ‚çš„åŒæ—¶ä¿æŒå…¨å±€è§†è§’</em>ã€‚</p><p>è¿‘æœŸè¿›å±•æ˜¾ç¤º,Transformerå·²åº”ç”¨äºå¤šç§åŒ»å­¦å½±åƒä»»åŠ¡,å±•ç¤ºäº†å…¶å¤šåŠŸèƒ½æ€§å’Œæé«˜è¯Šæ–­å‡†ç¡®æ€§çš„æ½œåŠ›ã€‚</p><p>ä¾‹å¦‚,è§†è§‰Transformerå·²ç”¨äºé€šè¿‡æ”¾å°„å­¦ç­›æŸ¥COVID-19ã€è‚ºç™Œé¢„åå’Œè§†ç½‘è†œè¡€ç®¡åˆ†å‰²ã€‚ä¸‹è¡¨æ¦‚è¿°äº†ä¸€äº›å…³é”®åº”ç”¨åŠå…¶å‚è€ƒæ–‡çŒ®:<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/image-35.png"></p><p>Transformerèå…¥è®¡ç®—æœºè§†è§‰ä¸ä»…æ˜¯æŠ€æœ¯æ¼”è¿›,æ›´æ˜¯é‡å¡‘äº†è¯¥é¢†åŸŸå¯èƒ½æ€§çš„æ ¼å±€ã€‚<br>éšç€æˆ‘ä»¬ä¸æ–­æ¢ç´¢å’Œå®Œå–„è¿™äº›æ¨¡å‹,å¯ä»¥æœŸå¾…çœ‹åˆ°æ›´å¤šçªç ´æ€§çš„åº”ç”¨,ä¸æ–­æ‹“å±•æœºå™¨æ„ŸçŸ¥å’Œç†è§£èƒ½åŠ›çš„è¾¹ç•Œã€‚</p><h3 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h3><p>é—®:Transformerä¸­çš„æ³¨æ„åŠ›æœºåˆ¶æœ‰ä½•é‡è¦æ€§ï¼Ÿ<br>ç­”:æ³¨æ„åŠ›æœºåˆ¶åœ¨Transformerä¸­è‡³å…³é‡è¦,å› ä¸ºå®ƒå…è®¸æ ¹æ®é‡è¦æ€§å¯¹è¾“å…¥ä¸­çš„ä¸åŒtokensèµ‹äºˆä¸åŒæƒé‡,ä»è€Œè€ƒè™‘è¯­å¢ƒ,æé«˜è¾“å‡ºçš„è´¨é‡å’Œè¿è´¯æ€§ã€‚<br>é—®:Transformeråœ¨å¤„ç†åºåˆ—æ•°æ®æ—¶ä¸RNNå’ŒLSTMæœ‰ä½•ä¸åŒï¼Ÿ<br>ç­”:ä¸RNNå’ŒLSTMé¡ºåºå¤„ç†æ•°æ®ä¸åŒ,Transformerä½¿ç”¨è‡ªæ³¨æ„åŠ›æœºåˆ¶åŒæ—¶å¤„ç†æ•´ä¸ªåºåˆ—ã€‚è¿™ç§å¹¶è¡Œå¤„ç†èƒ½åŠ›æœ‰åŠ©äºæé«˜å…¶æœ‰æ•ˆæ€§ã€‚<br>é—®:Transformerçš„å…³é”®ç»„ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ<br>ç­”:Transformerçš„æ¶æ„åŒ…æ‹¬è‡ªæ³¨æ„åŠ›æœºåˆ¶ã€å¤šå¤´æ³¨æ„åŠ›å’Œå‰é¦ˆç¥ç»ç½‘ç»œã€‚<br>é—®:Transformeråœ¨æ·±åº¦å­¦ä¹ ä¸­æœ‰å“ªäº›åº”ç”¨ï¼Ÿ<br>ç­”:Transformerå¹¿æ³›åº”ç”¨äºNLPã€è¯­è¨€å»ºæ¨¡ã€è®¡ç®—æœºè§†è§‰å’Œå¼€å‘æœ€å…ˆè¿›çš„æ¨¡å‹ã€‚<br>é—®:Transformerå¦‚ä½•åœ¨æ•°æ®å¤„ç†ä¸­æ•æ‰é•¿è·ç¦»ä¾èµ–ï¼Ÿ<br>ç­”:Transformeråˆ©ç”¨è‡ªæ³¨æ„åŠ›æœºåˆ¶è¡¡é‡ä¸åŒè¾“å…¥ä»¤ç‰Œçš„é‡è¦æ€§,ä½¿å…¶èƒ½å¤Ÿåœ¨æ— éœ€é¡ºåºå¤„ç†çš„æƒ…å†µä¸‹æ•æ‰é•¿è·ç¦»ä¾èµ–ã€‚<br>é—®:Transformerç½‘ç»œçš„æ¶æ„æ˜¯ä»€ä¹ˆï¼Ÿ<br>ç­”:Transformerç½‘ç»œç”±åŒ…å«å¤šå¤´è‡ªæ³¨æ„åŠ›æœºåˆ¶å’Œå‰é¦ˆç¥ç»ç½‘ç»œçš„ç¼–ç å™¨å’Œè§£ç å™¨å±‚ç»„æˆ,ç”¨äºæœ‰æ•ˆå¤„ç†åºåˆ—æ•°æ®ã€‚</p><p>é—®ï¼štransformerä¸­çš„attentionä¸ºä»€ä¹ˆè¦é™¤ä»¥æ ¹å·$\sqrt{d_k}$<br>ç­”ï¼š<a href="https://blog.csdn.net/qq_43827595/article/details/125800615">https://blog.csdn.net/qq_43827595/article/details/125800615</a></p><h1 id="å®æˆ˜-åŸºäºTransformerç”Ÿæˆæ–‡ç« æ ‡é¢˜"><a href="#å®æˆ˜-åŸºäºTransformerç”Ÿæˆæ–‡ç« æ ‡é¢˜" class="headerlink" title="å®æˆ˜-åŸºäºTransformerç”Ÿæˆæ–‡ç« æ ‡é¢˜"></a>å®æˆ˜-åŸºäºTransformerç”Ÿæˆæ–‡ç« æ ‡é¢˜</h1><p>æ•´ä¸ªæ¨¡å‹ç»“æ„å¦‚ä¸‹ï¼Œé€šè¿‡æ‰§è¡Œmain.pyæ–‡ä»¶è¿è¡Œæ•´ä¸ªæ¨¡å‹<br>1 project&#x2F;<br>2 â”‚<br>3 â”œâ”€â”€ transformer&#x2F;<br>4 â”‚ Â  â”œâ”€â”€ <strong>init</strong>.py<br>5 â”‚ Â  â”œâ”€â”€ DataLoader.py<br>6 â”‚ Â  â”œâ”€â”€ Translator.py<br>7 â”‚ Â  â””â”€â”€ Modules.py<br>8 â”‚<br>9 â”œâ”€â”€ config.py<br>10 â”œâ”€â”€ loader.py<br>11 â”œâ”€â”€ evaluate.py<br>12 â””â”€â”€ main.py</p><h2 id="Transformeræ¡†æ¶"><a href="#Transformeræ¡†æ¶" class="headerlink" title="Transformeræ¡†æ¶"></a>Transformeræ¡†æ¶</h2><p>Transformeræ•´ä½“åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>1.SubLayers.pyï¼š å®ç°å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶ï¼ˆMultiHeadAttentionï¼‰å’Œä½ç½®wiseå‰å‘ä¼ æ’­ç½‘ç»œï¼ˆPositionwiseFeedForwardï¼‰ </li><li>2.Modules.pyï¼š å®ç°ç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›æœºåˆ¶ï¼ˆScaledDotProductAttentionï¼‰ </li><li>3.Layers.pyï¼š åŸºäºSubLayers.pyå®ç°Encoderå’ŒDecoderä¸­çš„åŸºæœ¬å±‚ </li><li>4.Models.pyï¼š å®ç°ä½ç½®ç¼–ç ï¼Œå¹¶åŸºäºLayers.pyå®ç°Encoderå’ŒDecoderï¼Œå¹¶é›†æˆTransformer model </li><li>5.Optim.pyï¼š å®ç°ä¼˜åŒ–å™¨è°ƒåº¦ï¼ŒåŸç†è¯¦è§ </li><li>6.Translator.pyï¼š å®ç°ç¯±ç¬†å¢™è§£ç ï¼Œæé«˜ç”Ÿæˆåºåˆ—è´¨é‡</li></ul><h2 id="å®ç°å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶"><a href="#å®ç°å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶" class="headerlink" title="å®ç°å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶"></a>å®ç°å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">'''SubLayers.py'''</span><span class="token triple-quoted-string string">''' åˆ›å»º MultiHeadAttention å’Œ PositionwiseFeedForward å®ä¾‹'''</span><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn <span class="token keyword">as</span> nn<span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>functional <span class="token keyword">as</span> F<span class="token keyword">from</span> transformer<span class="token punctuation">.</span>Modules <span class="token keyword">import</span> ScaledDotProductAttention<span class="token keyword">class</span> <span class="token class-name">MultiHeadAttention</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token triple-quoted-string string">''' å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶q, k, v åˆ†åˆ«æ˜¯æŸ¥è¯¢ã€é”®å’Œå€¼çŸ©é˜µmask ç”¨äºæ©ç ï¼Œé¿å…æŸäº›ä½ç½®çš„æ³¨æ„åŠ›æƒé‡ä¸º0è®¡ç®—æ³¨æ„åŠ›æƒé‡å¹¶åº”ç”¨Dropoutã€‚è®¡ç®—åŠ æƒå’Œå¹¶è¿›è¡Œçº¿æ€§å˜æ¢è¿”å›å½’ä¸€åŒ–åçš„è¾“å‡ºå’Œæ³¨æ„åŠ›æƒé‡'''</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> n_head<span class="token punctuation">,</span> d_model<span class="token punctuation">,</span> d_k<span class="token punctuation">,</span> d_v<span class="token punctuation">,</span> dropout<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>n_head <span class="token operator">=</span> n_head        self<span class="token punctuation">.</span>d_k <span class="token operator">=</span> d_k        self<span class="token punctuation">.</span>d_v <span class="token operator">=</span> d_v        self<span class="token punctuation">.</span>w_qs <span class="token operator">=</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>d_model<span class="token punctuation">,</span> n_head <span class="token operator">*</span> d_k<span class="token punctuation">,</span> bias<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>w_ks <span class="token operator">=</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>d_model<span class="token punctuation">,</span> n_head <span class="token operator">*</span> d_k<span class="token punctuation">,</span> bias<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>w_vs <span class="token operator">=</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>d_model<span class="token punctuation">,</span> n_head <span class="token operator">*</span> d_v<span class="token punctuation">,</span> bias<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>fc <span class="token operator">=</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>n_head <span class="token operator">*</span> d_v<span class="token punctuation">,</span> d_model<span class="token punctuation">,</span> bias<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>attention <span class="token operator">=</span> ScaledDotProductAttention<span class="token punctuation">(</span>temperature<span class="token operator">=</span>d_k <span class="token operator">**</span> <span class="token number">0.5</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>dropout <span class="token operator">=</span> nn<span class="token punctuation">.</span>Dropout<span class="token punctuation">(</span>dropout<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>layer_norm <span class="token operator">=</span> nn<span class="token punctuation">.</span>LayerNorm<span class="token punctuation">(</span>d_model<span class="token punctuation">,</span> eps<span class="token operator">=</span><span class="token number">1e-6</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> q<span class="token punctuation">,</span> k<span class="token punctuation">,</span> v<span class="token punctuation">,</span> mask<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        d_k<span class="token punctuation">,</span> d_v<span class="token punctuation">,</span> n_head <span class="token operator">=</span> self<span class="token punctuation">.</span>d_k<span class="token punctuation">,</span> self<span class="token punctuation">.</span>d_v<span class="token punctuation">,</span> self<span class="token punctuation">.</span>n_head        sz_b<span class="token punctuation">,</span> len_q<span class="token punctuation">,</span> len_k<span class="token punctuation">,</span> len_v <span class="token operator">=</span> q<span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> k<span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>        residual <span class="token operator">=</span> q        <span class="token comment"># Pass through the pre-attention projection: b x lq x (n*dv)</span>        <span class="token comment"># Separate different heads: b x lq x n x dv</span>        q <span class="token operator">=</span> self<span class="token punctuation">.</span>w_qs<span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">.</span>view<span class="token punctuation">(</span>sz_b<span class="token punctuation">,</span> len_q<span class="token punctuation">,</span> n_head<span class="token punctuation">,</span> d_k<span class="token punctuation">)</span>        k <span class="token operator">=</span> self<span class="token punctuation">.</span>w_ks<span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">.</span>view<span class="token punctuation">(</span>sz_b<span class="token punctuation">,</span> len_k<span class="token punctuation">,</span> n_head<span class="token punctuation">,</span> d_k<span class="token punctuation">)</span>        v <span class="token operator">=</span> self<span class="token punctuation">.</span>w_vs<span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">.</span>view<span class="token punctuation">(</span>sz_b<span class="token punctuation">,</span> len_v<span class="token punctuation">,</span> n_head<span class="token punctuation">,</span> d_v<span class="token punctuation">)</span>        <span class="token comment"># Transpose for attention dot product: b x n x lq x dv</span>        q<span class="token punctuation">,</span> k<span class="token punctuation">,</span> v <span class="token operator">=</span> q<span class="token punctuation">.</span>transpose<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> k<span class="token punctuation">.</span>transpose<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span>transpose<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> mask <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>            mask <span class="token operator">=</span> mask<span class="token punctuation">.</span>unsqueeze<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>   <span class="token comment"># For head axis broadcasting.</span>        q<span class="token punctuation">,</span> attn <span class="token operator">=</span> self<span class="token punctuation">.</span>attention<span class="token punctuation">(</span>q<span class="token punctuation">,</span> k<span class="token punctuation">,</span> v<span class="token punctuation">,</span> mask<span class="token operator">=</span>mask<span class="token punctuation">)</span>        <span class="token comment"># Transpose to move the head dimension back: b x lq x n x dv</span>        <span class="token comment"># Combine the last two dimensions to concatenate all the heads together: b x lq x (n*dv)</span>        q <span class="token operator">=</span> q<span class="token punctuation">.</span>transpose<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>contiguous<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>view<span class="token punctuation">(</span>sz_b<span class="token punctuation">,</span> len_q<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>        q <span class="token operator">=</span> self<span class="token punctuation">.</span>dropout<span class="token punctuation">(</span>self<span class="token punctuation">.</span>fc<span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">)</span>        q <span class="token operator">+=</span> residual        q <span class="token operator">=</span> self<span class="token punctuation">.</span>layer_norm<span class="token punctuation">(</span>q<span class="token punctuation">)</span>        <span class="token keyword">return</span> q<span class="token punctuation">,</span> attn<span class="token keyword">class</span> <span class="token class-name">PositionwiseFeedForward</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token triple-quoted-string string">'''ä½ç½®wiseå‰é¦ˆç½‘ç»œ é€šè¿‡ä¸¤ä¸ªçº¿æ€§å±‚å’ŒReLUæ¿€æ´»å‡½æ•°è¿›è¡Œå‰å‘ä¼ æ’­åº”ç”¨Dropoutè¿”å›å¤„ç†åçš„å¼ é‡'''</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> d_in<span class="token punctuation">,</span> d_hid<span class="token punctuation">,</span> dropout<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>w_1 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>d_in<span class="token punctuation">,</span> d_hid<span class="token punctuation">)</span> <span class="token comment"># position-wise</span>        self<span class="token punctuation">.</span>w_2 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>d_hid<span class="token punctuation">,</span> d_in<span class="token punctuation">)</span> <span class="token comment"># position-wise</span>        self<span class="token punctuation">.</span>layer_norm <span class="token operator">=</span> nn<span class="token punctuation">.</span>LayerNorm<span class="token punctuation">(</span>d_in<span class="token punctuation">,</span> eps<span class="token operator">=</span><span class="token number">1e-6</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>dropout <span class="token operator">=</span> nn<span class="token punctuation">.</span>Dropout<span class="token punctuation">(</span>dropout<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        residual <span class="token operator">=</span> x        x <span class="token operator">=</span> self<span class="token punctuation">.</span>w_2<span class="token punctuation">(</span>F<span class="token punctuation">.</span>relu<span class="token punctuation">(</span>self<span class="token punctuation">.</span>w_1<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>dropout<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        x <span class="token operator">+=</span> residual        x <span class="token operator">=</span> self<span class="token punctuation">.</span>layer_norm<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token keyword">return</span> x<span class="token comment"># ç¤ºä¾‹ä½¿ç”¨</span>d_model <span class="token operator">=</span> <span class="token number">512</span>  <span class="token comment"># è¾“å…¥ç»´åº¦</span>d_inner <span class="token operator">=</span> <span class="token number">2048</span>  <span class="token comment"># å‰é¦ˆç½‘ç»œéšè—å±‚ç»´åº¦</span>n_head <span class="token operator">=</span> <span class="token number">8</span>  <span class="token comment"># å¤´çš„æ•°é‡</span>d_k <span class="token operator">=</span> <span class="token number">64</span>  <span class="token comment"># é”®çš„ç»´åº¦</span>d_v <span class="token operator">=</span> <span class="token number">64</span>  <span class="token comment"># å€¼çš„ç»´åº¦</span>dropout <span class="token operator">=</span> <span class="token number">0.1</span>  <span class="token comment"># Dropoutæ¦‚ç‡</span><span class="token comment"># åˆ›å»ºå¤šå¤´æ³¨æ„åŠ›æœºåˆ¶å®ä¾‹</span>multi_head_attention <span class="token operator">=</span> MultiHeadAttention<span class="token punctuation">(</span>n_head<span class="token punctuation">,</span> d_model<span class="token punctuation">,</span> d_k<span class="token punctuation">,</span> d_v<span class="token punctuation">,</span> dropout<span class="token punctuation">)</span>input_tensor <span class="token operator">=</span> torch<span class="token punctuation">.</span>randn<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> d_model<span class="token punctuation">)</span>  <span class="token comment"># ç¤ºä¾‹è¾“å…¥å¼ é‡ï¼Œå½¢çŠ¶ä¸º (batch_size, seq_len, d_model)</span>mask <span class="token operator">=</span> torch<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">bool</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># ç¤ºä¾‹æ©ç ï¼Œå½¢çŠ¶ä¸º (batch_size, seq_len, seq_len)</span>output_tensor<span class="token punctuation">,</span> attn <span class="token operator">=</span> multi_head_attention<span class="token punctuation">(</span>input_tensor<span class="token punctuation">,</span> input_tensor<span class="token punctuation">,</span> input_tensor<span class="token punctuation">,</span> mask<span class="token operator">=</span>mask<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>output_tensor<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>  <span class="token comment"># è¾“å‡ºå½¢çŠ¶: (1, 10, 512)</span><span class="token keyword">print</span><span class="token punctuation">(</span>attn<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>  <span class="token comment"># è¾“å‡ºå½¢çŠ¶: (1, 8, 10, 10)</span><span class="token comment"># åˆ›å»ºä½ç½®wiseå‰é¦ˆç½‘ç»œå®ä¾‹</span>positionwise_feedforward <span class="token operator">=</span> PositionwiseFeedForward<span class="token punctuation">(</span>d_model<span class="token punctuation">,</span> d_inner<span class="token punctuation">,</span> dropout<span class="token punctuation">)</span>output_tensor <span class="token operator">=</span> positionwise_feedforward<span class="token punctuation">(</span>output_tensor<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>output_tensor<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>  <span class="token comment"># è¾“å‡ºå½¢çŠ¶: (1, 10, 512)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å®ç°ç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›æœºåˆ¶"><a href="#å®ç°ç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›æœºåˆ¶" class="headerlink" title="å®ç°ç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›æœºåˆ¶"></a>å®ç°ç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›æœºåˆ¶</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn <span class="token keyword">as</span> nn<span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>functional <span class="token keyword">as</span> F<span class="token keyword">class</span> <span class="token class-name">ScaledDotProductAttention</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">''' ç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›æœºåˆ¶ '''</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> temperature<span class="token punctuation">,</span> attn_dropout<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>temperature <span class="token operator">=</span> temperature         self<span class="token punctuation">.</span>dropout <span class="token operator">=</span> nn<span class="token punctuation">.</span>Dropout<span class="token punctuation">(</span>attn_dropout<span class="token punctuation">)</span>      <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> q<span class="token punctuation">,</span> k<span class="token punctuation">,</span> v<span class="token punctuation">,</span> mask<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>         attn <span class="token operator">=</span> torch<span class="token punctuation">.</span>matmul<span class="token punctuation">(</span>q <span class="token operator">/</span> self<span class="token punctuation">.</span>temperature<span class="token punctuation">,</span> k<span class="token punctuation">.</span>transpose<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>          <span class="token keyword">if</span> mask <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>             attn <span class="token operator">=</span> attn<span class="token punctuation">.</span>masked_fill<span class="token punctuation">(</span>mask <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1e9</span><span class="token punctuation">)</span>          attn <span class="token operator">=</span> self<span class="token punctuation">.</span>dropout<span class="token punctuation">(</span>F<span class="token punctuation">.</span>softmax<span class="token punctuation">(</span>attn<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>         output <span class="token operator">=</span> torch<span class="token punctuation">.</span>matmul<span class="token punctuation">(</span>attn<span class="token punctuation">,</span> v<span class="token punctuation">)</span>         <span class="token keyword">return</span> output<span class="token punctuation">,</span> attn<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å®ç°Encoderå’ŒDecoderä¸­çš„åŸºæœ¬å±‚"><a href="#å®ç°Encoderå’ŒDecoderä¸­çš„åŸºæœ¬å±‚" class="headerlink" title="å®ç°Encoderå’ŒDecoderä¸­çš„åŸºæœ¬å±‚"></a>å®ç°Encoderå’ŒDecoderä¸­çš„åŸºæœ¬å±‚</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token number">1</span> <span class="token triple-quoted-string string">''' Define the Layers '''</span><span class="token number">2</span> <span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn <span class="token keyword">as</span> nn<span class="token number">3</span> <span class="token keyword">import</span> torch<span class="token number">4</span> <span class="token keyword">from</span> transformer<span class="token punctuation">.</span>SubLayers <span class="token keyword">import</span> MultiHeadAttention<span class="token punctuation">,</span> PositionwiseFeedForward<span class="token number">5</span> <span class="token number">6</span> <span class="token keyword">class</span> <span class="token class-name">EncoderLayer</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">7</span>     <span class="token triple-quoted-string string">'''åˆå§‹åŒ–ç¼–ç å™¨ï¼ŒåŒ…å«å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶å’Œä½ç½®wiseå‰é¦ˆç½‘ç»œï¼Œè¿”å›å¤„ç†åçš„å¼ é‡å’Œæ³¨æ„åŠ›æƒé‡'''</span><span class="token number">8</span>     <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> d_model<span class="token punctuation">,</span> d_inner<span class="token punctuation">,</span> n_head<span class="token punctuation">,</span> d_k<span class="token punctuation">,</span> d_v<span class="token punctuation">,</span> dropout<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">9</span>         <span class="token builtin">super</span><span class="token punctuation">(</span>EncoderLayer<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token number">10</span>         self<span class="token punctuation">.</span>slf_attn <span class="token operator">=</span> MultiHeadAttention<span class="token punctuation">(</span>n_head<span class="token punctuation">,</span> d_model<span class="token punctuation">,</span> d_k<span class="token punctuation">,</span> d_v<span class="token punctuation">,</span> dropout<span class="token operator">=</span>dropout<span class="token punctuation">)</span><span class="token number">11</span>         self<span class="token punctuation">.</span>pos_ffn <span class="token operator">=</span> PositionwiseFeedForward<span class="token punctuation">(</span>d_model<span class="token punctuation">,</span> d_inner<span class="token punctuation">,</span> dropout<span class="token operator">=</span>dropout<span class="token punctuation">)</span><span class="token number">12</span> <span class="token number">13</span>     <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> enc_input<span class="token punctuation">,</span> slf_attn_mask<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">14</span>         enc_output<span class="token punctuation">,</span> enc_slf_attn <span class="token operator">=</span> self<span class="token punctuation">.</span>slf_attn<span class="token punctuation">(</span><span class="token number">15</span>             enc_input<span class="token punctuation">,</span> enc_input<span class="token punctuation">,</span> enc_input<span class="token punctuation">,</span> mask<span class="token operator">=</span>slf_attn_mask<span class="token punctuation">)</span><span class="token number">16</span>         enc_output <span class="token operator">=</span> self<span class="token punctuation">.</span>pos_ffn<span class="token punctuation">(</span>enc_output<span class="token punctuation">)</span><span class="token number">17</span>         <span class="token keyword">return</span> enc_output<span class="token punctuation">,</span> enc_slf_attn<span class="token number">18</span> <span class="token number">19</span> <span class="token keyword">class</span> <span class="token class-name">DecoderLayer</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">20</span>     <span class="token triple-quoted-string string">'''æ–¹æ³•åˆå§‹åŒ–è§£ç å™¨å±‚ï¼ŒåŒ…å«è‡ªæ³¨æ„åŠ›æœºåˆ¶ã€ç¼–ç å™¨-è§£ç å™¨æ³¨æ„åŠ›æœºåˆ¶å’Œä½ç½®wiseå‰é¦ˆç½‘ç»œï¼Œè¿”å›å¤„ç†åçš„å¼ é‡å’Œæ³¨æ„åŠ›æƒé‡'''</span><span class="token number">21</span>     <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> d_model<span class="token punctuation">,</span> d_inner<span class="token punctuation">,</span> n_head<span class="token punctuation">,</span> d_k<span class="token punctuation">,</span> d_v<span class="token punctuation">,</span> dropout<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">22</span>         <span class="token builtin">super</span><span class="token punctuation">(</span>DecoderLayer<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token number">23</span>         self<span class="token punctuation">.</span>slf_attn <span class="token operator">=</span> MultiHeadAttention<span class="token punctuation">(</span>n_head<span class="token punctuation">,</span> d_model<span class="token punctuation">,</span> d_k<span class="token punctuation">,</span> d_v<span class="token punctuation">,</span> dropout<span class="token operator">=</span>dropout<span class="token punctuation">)</span><span class="token number">24</span>         self<span class="token punctuation">.</span>enc_attn <span class="token operator">=</span> MultiHeadAttention<span class="token punctuation">(</span>n_head<span class="token punctuation">,</span> d_model<span class="token punctuation">,</span> d_k<span class="token punctuation">,</span> d_v<span class="token punctuation">,</span> dropout<span class="token operator">=</span>dropout<span class="token punctuation">)</span><span class="token number">25</span>         self<span class="token punctuation">.</span>pos_ffn <span class="token operator">=</span> PositionwiseFeedForward<span class="token punctuation">(</span>d_model<span class="token punctuation">,</span> d_inner<span class="token punctuation">,</span> dropout<span class="token operator">=</span>dropout<span class="token punctuation">)</span><span class="token number">26</span> <span class="token number">27</span>     <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span><span class="token number">28</span>             self<span class="token punctuation">,</span> dec_input<span class="token punctuation">,</span> enc_output<span class="token punctuation">,</span><span class="token number">29</span>             slf_attn_mask<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> dec_enc_attn_mask<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">30</span>         dec_output<span class="token punctuation">,</span> dec_slf_attn <span class="token operator">=</span> self<span class="token punctuation">.</span>slf_attn<span class="token punctuation">(</span><span class="token number">31</span>             dec_input<span class="token punctuation">,</span> dec_input<span class="token punctuation">,</span> dec_input<span class="token punctuation">,</span> mask<span class="token operator">=</span>slf_attn_mask<span class="token punctuation">)</span><span class="token number">32</span>         dec_output<span class="token punctuation">,</span> dec_enc_attn <span class="token operator">=</span> self<span class="token punctuation">.</span>enc_attn<span class="token punctuation">(</span><span class="token number">33</span>             dec_output<span class="token punctuation">,</span> enc_output<span class="token punctuation">,</span> enc_output<span class="token punctuation">,</span> mask<span class="token operator">=</span>dec_enc_attn_mask<span class="token punctuation">)</span><span class="token number">34</span>         dec_output <span class="token operator">=</span> self<span class="token punctuation">.</span>pos_ffn<span class="token punctuation">(</span>dec_output<span class="token punctuation">)</span><span class="token number">35</span>         <span class="token keyword">return</span> dec_output<span class="token punctuation">,</span> dec_slf_attn<span class="token punctuation">,</span> dec_enc_attn<span class="token number">36</span> <span class="token number">37</span> <span class="token comment"># ç¤ºä¾‹ä½¿ç”¨</span><span class="token number">38</span> d_model <span class="token operator">=</span> <span class="token number">512</span>  <span class="token comment"># è¾“å…¥ç»´åº¦</span><span class="token number">39</span> d_inner <span class="token operator">=</span> <span class="token number">2048</span>  <span class="token comment"># å‰é¦ˆç½‘ç»œéšè—å±‚ç»´åº¦</span><span class="token number">40</span> n_head <span class="token operator">=</span> <span class="token number">8</span>  <span class="token comment"># å¤´çš„æ•°é‡</span><span class="token number">41</span> d_k <span class="token operator">=</span> <span class="token number">64</span>  <span class="token comment"># é”®çš„ç»´åº¦</span><span class="token number">42</span> d_v <span class="token operator">=</span> <span class="token number">64</span>  <span class="token comment"># å€¼çš„ç»´åº¦</span><span class="token number">43</span> dropout <span class="token operator">=</span> <span class="token number">0.1</span>  <span class="token comment"># Dropoutæ¦‚ç‡</span><span class="token number">44</span> <span class="token number">45</span> <span class="token comment"># åˆ›å»ºç¼–ç å™¨å±‚å®ä¾‹</span><span class="token number">46</span> encoder_layer <span class="token operator">=</span> EncoderLayer<span class="token punctuation">(</span>d_model<span class="token punctuation">,</span> d_inner<span class="token punctuation">,</span> n_head<span class="token punctuation">,</span> d_k<span class="token punctuation">,</span> d_v<span class="token punctuation">,</span> dropout<span class="token punctuation">)</span><span class="token number">47</span> input_tensor <span class="token operator">=</span> torch<span class="token punctuation">.</span>randn<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> d_model<span class="token punctuation">)</span>  <span class="token comment"># ç¤ºä¾‹è¾“å…¥å¼ é‡ï¼Œå½¢çŠ¶ä¸º (batch_size, seq_len, d_model)</span><span class="token number">48</span> mask <span class="token operator">=</span> torch<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">bool</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># ç¤ºä¾‹æ©ç ï¼Œå½¢çŠ¶ä¸º (batch_size, seq_len, seq_len)</span><span class="token number">49</span> <span class="token number">50</span> output_tensor<span class="token punctuation">,</span> attn <span class="token operator">=</span> encoder_layer<span class="token punctuation">(</span>input_tensor<span class="token punctuation">,</span> mask<span class="token punctuation">)</span><span class="token number">51</span> <span class="token keyword">print</span><span class="token punctuation">(</span>output_tensor<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>  <span class="token comment"># è¾“å‡ºå½¢çŠ¶: (1, 10, 512)</span><span class="token number">52</span> <span class="token keyword">print</span><span class="token punctuation">(</span>attn<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>  <span class="token comment"># è¾“å‡ºå½¢çŠ¶: (1, 8, 10, 10)</span><span class="token number">53</span> <span class="token number">54</span> <span class="token comment"># åˆ›å»ºè§£ç å™¨å±‚å®ä¾‹</span><span class="token number">55</span> decoder_layer <span class="token operator">=</span> DecoderLayer<span class="token punctuation">(</span>d_model<span class="token punctuation">,</span> d_inner<span class="token punctuation">,</span> n_head<span class="token punctuation">,</span> d_k<span class="token punctuation">,</span> d_v<span class="token punctuation">,</span> dropout<span class="token punctuation">)</span><span class="token number">56</span> input_tensor <span class="token operator">=</span> torch<span class="token punctuation">.</span>randn<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> d_model<span class="token punctuation">)</span>  <span class="token comment"># ç¤ºä¾‹è¾“å…¥å¼ é‡ï¼Œå½¢çŠ¶ä¸º (batch_size, seq_len, d_model)</span><span class="token number">57</span> enc_output <span class="token operator">=</span> torch<span class="token punctuation">.</span>randn<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> d_model<span class="token punctuation">)</span>  <span class="token comment"># ç¤ºä¾‹ç¼–ç å™¨è¾“å‡ºå¼ é‡ï¼Œå½¢çŠ¶ä¸º (batch_size, seq_len, d_model)</span><span class="token number">58</span> mask <span class="token operator">=</span> torch<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">bool</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># ç¤ºä¾‹æ©ç ï¼Œå½¢çŠ¶ä¸º (batch_size, seq_len, seq_len)</span><span class="token number">59</span> enc_mask <span class="token operator">=</span> torch<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">bool</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># ç¤ºä¾‹æ©ç ï¼Œå½¢çŠ¶ä¸º (batch_size, seq_len, seq_len)</span><span class="token number">60</span> <span class="token number">61</span> output_tensor<span class="token punctuation">,</span> slf_attn<span class="token punctuation">,</span> enc_attn <span class="token operator">=</span> decoder_layer<span class="token punctuation">(</span>input_tensor<span class="token punctuation">,</span> enc_output<span class="token punctuation">,</span> mask<span class="token punctuation">,</span> enc_mask<span class="token punctuation">)</span><span class="token number">62</span> <span class="token keyword">print</span><span class="token punctuation">(</span>output_tensor<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>  <span class="token comment"># è¾“å‡ºå½¢çŠ¶: (1, 10, 512)</span><span class="token number">63</span> <span class="token keyword">print</span><span class="token punctuation">(</span>slf_attn<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>  <span class="token comment"># è¾“å‡ºå½¢çŠ¶: (1, 8, 10, 10)</span><span class="token number">64</span> <span class="token keyword">print</span><span class="token punctuation">(</span>enc_attn<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>  <span class="token comment"># è¾“å‡ºå½¢çŠ¶: (1, 8, 10, 10)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å®ç°ä½ç½®ç¼–ç ï¼Œå¹¶åŸºäºLayers-pyå®ç°Encoderå’ŒDecoderï¼Œå¹¶é›†æˆTransformer-model"><a href="#å®ç°ä½ç½®ç¼–ç ï¼Œå¹¶åŸºäºLayers-pyå®ç°Encoderå’ŒDecoderï¼Œå¹¶é›†æˆTransformer-model" class="headerlink" title="å®ç°ä½ç½®ç¼–ç ï¼Œå¹¶åŸºäºLayers.pyå®ç°Encoderå’ŒDecoderï¼Œå¹¶é›†æˆTransformer model"></a>å®ç°ä½ç½®ç¼–ç ï¼Œå¹¶åŸºäºLayers.pyå®ç°Encoderå’ŒDecoderï¼Œå¹¶é›†æˆTransformer model</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token number">1</span> <span class="token comment">#ç”Ÿæˆå¡«å……æ©ç </span><span class="token number">2</span> <span class="token keyword">def</span> <span class="token function">get_pad_mask</span><span class="token punctuation">(</span>seq<span class="token punctuation">,</span> pad_idx<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">3</span>     <span class="token keyword">return</span> <span class="token punctuation">(</span>seq <span class="token operator">!=</span> pad_idx<span class="token punctuation">)</span><span class="token punctuation">.</span>unsqueeze<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token number">4</span> <span class="token comment">#ç”Ÿæˆåç»­æ©ç ï¼Œç”¨äºæ©è”½åç»­ä¿¡æ¯</span><span class="token number">5</span> <span class="token keyword">def</span> <span class="token function">get_subsequent_mask</span><span class="token punctuation">(</span>seq<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">6</span>     sz_b<span class="token punctuation">,</span> len_s <span class="token operator">=</span> seq<span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token number">7</span>     subsequent_mask <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> torch<span class="token punctuation">.</span>triu<span class="token punctuation">(</span><span class="token number">8</span>         torch<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> len_s<span class="token punctuation">,</span> len_s<span class="token punctuation">)</span><span class="token punctuation">,</span> device<span class="token operator">=</span>seq<span class="token punctuation">.</span>device<span class="token punctuation">)</span><span class="token punctuation">,</span> diagonal<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">bool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token number">9</span>     <span class="token keyword">return</span> subsequent_mask<span class="token number">10</span> <span class="token comment">#æ­£ä½™å¼¦ä½ç½®ç¼–ç ï¼Œå°†ä½ç½®ç¼–ç æ·»åŠ åˆ°è¾“å…¥å¼ é‡ä¸Š</span><span class="token number">11</span> <span class="token keyword">class</span> <span class="token class-name">PositionalEncoding</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">12</span>     <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> d_hid<span class="token punctuation">,</span> n_position<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">13</span>         <span class="token builtin">super</span><span class="token punctuation">(</span>PositionalEncoding<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token number">14</span> <span class="token number">15</span>         <span class="token comment"># Not a parameter</span><span class="token number">16</span>         self<span class="token punctuation">.</span>register_buffer<span class="token punctuation">(</span><span class="token string">'pos_table'</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>_get_sinusoid_encoding_table<span class="token punctuation">(</span>n_position<span class="token punctuation">,</span> d_hid<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token number">17</span> <span class="token number">18</span>     <span class="token keyword">def</span> <span class="token function">_get_sinusoid_encoding_table</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> n_position<span class="token punctuation">,</span> d_hid<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">19</span>         <span class="token triple-quoted-string string">''' Sinusoid position encoding table '''</span><span class="token number">20</span>         <span class="token comment"># TODO: make it with torch instead of numpy</span><span class="token number">21</span> <span class="token number">22</span>         <span class="token keyword">def</span> <span class="token function">get_position_angle_vec</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">23</span>             <span class="token keyword">return</span> <span class="token punctuation">[</span>position <span class="token operator">/</span> np<span class="token punctuation">.</span>power<span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span>hid_j <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">/</span> d_hid<span class="token punctuation">)</span> <span class="token keyword">for</span> hid_j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>d_hid<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token number">24</span> <span class="token number">25</span>         sinusoid_table <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span>get_position_angle_vec<span class="token punctuation">(</span>pos_i<span class="token punctuation">)</span> <span class="token keyword">for</span> pos_i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n_position<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token number">26</span>         sinusoid_table<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> np<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>sinusoid_table<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># dim 2i</span><span class="token number">27</span>         sinusoid_table<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> np<span class="token punctuation">.</span>cos<span class="token punctuation">(</span>sinusoid_table<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># dim 2i+1</span><span class="token number">28</span>         <span class="token keyword">return</span> torch<span class="token punctuation">.</span>FloatTensor<span class="token punctuation">(</span>sinusoid_table<span class="token punctuation">)</span><span class="token punctuation">.</span>unsqueeze<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token number">29</span> <span class="token number">30</span>     <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">31</span>         <span class="token keyword">return</span> x <span class="token operator">+</span> self<span class="token punctuation">.</span>pos_table<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span>x<span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>clone<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>detach<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token number">32</span> <span class="token comment">#å®ç°ç¼–ç å™¨çš„å‰å‘ä¼ æ’­</span><span class="token number">33</span> <span class="token keyword">class</span> <span class="token class-name">Encoder</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">34</span>     <span class="token triple-quoted-string string">''' A encoder model with self attention mechanism. '''</span><span class="token number">35</span> <span class="token number">36</span>     <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span><span class="token number">37</span>             self<span class="token punctuation">,</span> n_src_vocab<span class="token punctuation">,</span> d_word_vec<span class="token punctuation">,</span> n_layers<span class="token punctuation">,</span> n_head<span class="token punctuation">,</span> d_k<span class="token punctuation">,</span> d_v<span class="token punctuation">,</span><span class="token number">38</span>             d_model<span class="token punctuation">,</span> d_inner<span class="token punctuation">,</span> pad_idx<span class="token punctuation">,</span> dropout<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">,</span> n_position<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">,</span> scale_emb<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">39</span> <span class="token number">40</span>         <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token number">41</span> <span class="token number">42</span>         self<span class="token punctuation">.</span>src_word_emb <span class="token operator">=</span> nn<span class="token punctuation">.</span>Embedding<span class="token punctuation">(</span>n_src_vocab<span class="token punctuation">,</span> d_word_vec<span class="token punctuation">,</span> padding_idx<span class="token operator">=</span>pad_idx<span class="token punctuation">)</span><span class="token number">43</span>         self<span class="token punctuation">.</span>position_enc <span class="token operator">=</span> PositionalEncoding<span class="token punctuation">(</span>d_word_vec<span class="token punctuation">,</span> n_position<span class="token operator">=</span>n_position<span class="token punctuation">)</span><span class="token number">44</span>         self<span class="token punctuation">.</span>dropout <span class="token operator">=</span> nn<span class="token punctuation">.</span>Dropout<span class="token punctuation">(</span>p<span class="token operator">=</span>dropout<span class="token punctuation">)</span><span class="token number">45</span>         self<span class="token punctuation">.</span>layer_stack <span class="token operator">=</span> nn<span class="token punctuation">.</span>ModuleList<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">46</span>             EncoderLayer<span class="token punctuation">(</span>d_model<span class="token punctuation">,</span> d_inner<span class="token punctuation">,</span> n_head<span class="token punctuation">,</span> d_k<span class="token punctuation">,</span> d_v<span class="token punctuation">,</span> dropout<span class="token operator">=</span>dropout<span class="token punctuation">)</span><span class="token number">47</span>             <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n_layers<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token number">48</span>         self<span class="token punctuation">.</span>layer_norm <span class="token operator">=</span> nn<span class="token punctuation">.</span>LayerNorm<span class="token punctuation">(</span>d_model<span class="token punctuation">,</span> eps<span class="token operator">=</span><span class="token number">1e-6</span><span class="token punctuation">)</span><span class="token number">49</span>         self<span class="token punctuation">.</span>scale_emb <span class="token operator">=</span> scale_emb<span class="token number">50</span>         self<span class="token punctuation">.</span>d_model <span class="token operator">=</span> d_model<span class="token number">51</span> <span class="token number">52</span>     <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> src_seq<span class="token punctuation">,</span> src_mask<span class="token punctuation">,</span> return_attns<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">53</span>         enc_slf_attn_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token number">54</span> <span class="token number">55</span>         <span class="token comment"># -- Forward</span><span class="token number">56</span>         enc_output <span class="token operator">=</span> self<span class="token punctuation">.</span>src_word_emb<span class="token punctuation">(</span>src_seq<span class="token punctuation">)</span><span class="token number">57</span>         <span class="token keyword">if</span> self<span class="token punctuation">.</span>scale_emb<span class="token punctuation">:</span><span class="token number">58</span>             enc_output <span class="token operator">*=</span> self<span class="token punctuation">.</span>d_model <span class="token operator">**</span> <span class="token number">0.5</span><span class="token number">59</span>         enc_output <span class="token operator">=</span> self<span class="token punctuation">.</span>dropout<span class="token punctuation">(</span>self<span class="token punctuation">.</span>position_enc<span class="token punctuation">(</span>enc_output<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token number">60</span>         enc_output <span class="token operator">=</span> self<span class="token punctuation">.</span>layer_norm<span class="token punctuation">(</span>enc_output<span class="token punctuation">)</span><span class="token number">61</span> <span class="token number">62</span>         <span class="token keyword">for</span> enc_layer <span class="token keyword">in</span> self<span class="token punctuation">.</span>layer_stack<span class="token punctuation">:</span><span class="token number">63</span>             enc_output<span class="token punctuation">,</span> enc_slf_attn <span class="token operator">=</span> enc_layer<span class="token punctuation">(</span>enc_output<span class="token punctuation">,</span> slf_attn_mask<span class="token operator">=</span>src_mask<span class="token punctuation">)</span><span class="token number">64</span>             enc_slf_attn_list <span class="token operator">+=</span> <span class="token punctuation">[</span>enc_slf_attn<span class="token punctuation">]</span> <span class="token keyword">if</span> return_attns <span class="token keyword">else</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token number">65</span> <span class="token number">66</span>         <span class="token keyword">if</span> return_attns<span class="token punctuation">:</span><span class="token number">67</span>             <span class="token keyword">return</span> enc_output<span class="token punctuation">,</span> enc_slf_attn_list<span class="token number">68</span>         <span class="token keyword">return</span> enc_output<span class="token punctuation">,</span><span class="token number">69</span> <span class="token comment">#å®ç°è§£ç å™¨çš„å‰å‘ä¼ æ’­</span><span class="token number">70</span> <span class="token keyword">class</span> <span class="token class-name">Decoder</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">71</span>     <span class="token triple-quoted-string string">''' A decoder model with self attention mechanism. '''</span><span class="token number">72</span> <span class="token number">73</span>     <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span><span class="token number">74</span>             self<span class="token punctuation">,</span> n_trg_vocab<span class="token punctuation">,</span> d_word_vec<span class="token punctuation">,</span> n_layers<span class="token punctuation">,</span> n_head<span class="token punctuation">,</span> d_k<span class="token punctuation">,</span> d_v<span class="token punctuation">,</span><span class="token number">75</span>             d_model<span class="token punctuation">,</span> d_inner<span class="token punctuation">,</span> pad_idx<span class="token punctuation">,</span> n_position<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">,</span> dropout<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">,</span> scale_emb<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">76</span> <span class="token number">77</span>         <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token number">78</span> <span class="token number">79</span>         self<span class="token punctuation">.</span>trg_word_emb <span class="token operator">=</span> nn<span class="token punctuation">.</span>Embedding<span class="token punctuation">(</span>n_trg_vocab<span class="token punctuation">,</span> d_word_vec<span class="token punctuation">,</span> padding_idx<span class="token operator">=</span>pad_idx<span class="token punctuation">)</span><span class="token number">80</span>         self<span class="token punctuation">.</span>position_enc <span class="token operator">=</span> PositionalEncoding<span class="token punctuation">(</span>d_word_vec<span class="token punctuation">,</span> n_position<span class="token operator">=</span>n_position<span class="token punctuation">)</span><span class="token number">81</span>         self<span class="token punctuation">.</span>dropout <span class="token operator">=</span> nn<span class="token punctuation">.</span>Dropout<span class="token punctuation">(</span>p<span class="token operator">=</span>dropout<span class="token punctuation">)</span><span class="token number">82</span>         self<span class="token punctuation">.</span>layer_stack <span class="token operator">=</span> nn<span class="token punctuation">.</span>ModuleList<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">83</span>             DecoderLayer<span class="token punctuation">(</span>d_model<span class="token punctuation">,</span> d_inner<span class="token punctuation">,</span> n_head<span class="token punctuation">,</span> d_k<span class="token punctuation">,</span> d_v<span class="token punctuation">,</span> dropout<span class="token operator">=</span>dropout<span class="token punctuation">)</span><span class="token number">84</span>             <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n_layers<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token number">85</span>         self<span class="token punctuation">.</span>layer_norm <span class="token operator">=</span> nn<span class="token punctuation">.</span>LayerNorm<span class="token punctuation">(</span>d_model<span class="token punctuation">,</span> eps<span class="token operator">=</span><span class="token number">1e-6</span><span class="token punctuation">)</span><span class="token number">86</span>         self<span class="token punctuation">.</span>scale_emb <span class="token operator">=</span> scale_emb<span class="token number">87</span>         self<span class="token punctuation">.</span>d_model <span class="token operator">=</span> d_model<span class="token number">88</span> <span class="token number">89</span>     <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> trg_seq<span class="token punctuation">,</span> trg_mask<span class="token punctuation">,</span> enc_output<span class="token punctuation">,</span> src_mask<span class="token punctuation">,</span> return_attns<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">90</span> <span class="token number">91</span>         dec_slf_attn_list<span class="token punctuation">,</span> dec_enc_attn_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token number">92</span> <span class="token number">93</span>         <span class="token comment"># -- Forward</span><span class="token number">94</span>         dec_output <span class="token operator">=</span> self<span class="token punctuation">.</span>trg_word_emb<span class="token punctuation">(</span>trg_seq<span class="token punctuation">)</span><span class="token number">95</span>         <span class="token keyword">if</span> self<span class="token punctuation">.</span>scale_emb<span class="token punctuation">:</span><span class="token number">96</span>             dec_output <span class="token operator">*=</span> self<span class="token punctuation">.</span>d_model <span class="token operator">**</span> <span class="token number">0.5</span><span class="token number">97</span>         dec_output <span class="token operator">=</span> self<span class="token punctuation">.</span>dropout<span class="token punctuation">(</span>self<span class="token punctuation">.</span>position_enc<span class="token punctuation">(</span>dec_output<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token number">98</span>         dec_output <span class="token operator">=</span> self<span class="token punctuation">.</span>layer_norm<span class="token punctuation">(</span>dec_output<span class="token punctuation">)</span><span class="token number">99</span> <span class="token number">100</span>         <span class="token keyword">for</span> dec_layer <span class="token keyword">in</span> self<span class="token punctuation">.</span>layer_stack<span class="token punctuation">:</span><span class="token number">101</span>             dec_output<span class="token punctuation">,</span> dec_slf_attn<span class="token punctuation">,</span> dec_enc_attn <span class="token operator">=</span> dec_layer<span class="token punctuation">(</span><span class="token number">102</span>                 dec_output<span class="token punctuation">,</span> enc_output<span class="token punctuation">,</span> slf_attn_mask<span class="token operator">=</span>trg_mask<span class="token punctuation">,</span> dec_enc_attn_mask<span class="token operator">=</span>src_mask<span class="token punctuation">)</span><span class="token number">103</span>             dec_slf_attn_list <span class="token operator">+=</span> <span class="token punctuation">[</span>dec_slf_attn<span class="token punctuation">]</span> <span class="token keyword">if</span> return_attns <span class="token keyword">else</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token number">104</span>             dec_enc_attn_list <span class="token operator">+=</span> <span class="token punctuation">[</span>dec_enc_attn<span class="token punctuation">]</span> <span class="token keyword">if</span> return_attns <span class="token keyword">else</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token number">105</span> <span class="token number">106</span>         <span class="token keyword">if</span> return_attns<span class="token punctuation">:</span><span class="token number">107</span>             <span class="token keyword">return</span> dec_output<span class="token punctuation">,</span> dec_slf_attn_list<span class="token punctuation">,</span> dec_enc_attn_list<span class="token number">108</span>         <span class="token keyword">return</span> dec_output<span class="token punctuation">,</span><span class="token number">109</span> <span class="token comment">#å®ç°æ•´ä¸ªTransformeræ¨¡å‹çš„å‰å‘ä¼ æ’­</span><span class="token number">110</span> <span class="token keyword">class</span> <span class="token class-name">Transformer</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">111</span>     <span class="token triple-quoted-string string">''' A sequence to sequence model with attention mechanism. '''</span><span class="token number">112</span> <span class="token number">113</span>     <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span><span class="token number">114</span>             self<span class="token punctuation">,</span> n_src_vocab<span class="token punctuation">,</span> n_trg_vocab<span class="token punctuation">,</span> src_pad_idx<span class="token punctuation">,</span> trg_pad_idx<span class="token punctuation">,</span><span class="token number">115</span>             d_word_vec<span class="token operator">=</span><span class="token number">512</span><span class="token punctuation">,</span> d_model<span class="token operator">=</span><span class="token number">512</span><span class="token punctuation">,</span> d_inner<span class="token operator">=</span><span class="token number">2048</span><span class="token punctuation">,</span><span class="token number">116</span>             n_layers<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">,</span> n_head<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span> d_k<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> d_v<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> dropout<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">,</span> n_position<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">117</span>             trg_emb_prj_weight_sharing<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> emb_src_trg_weight_sharing<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span><span class="token number">118</span>             scale_emb_or_prj<span class="token operator">=</span><span class="token string">'none'</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">119</span> <span class="token number">120</span>         <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token number">121</span> <span class="token number">122</span>         self<span class="token punctuation">.</span>src_pad_idx<span class="token punctuation">,</span> self<span class="token punctuation">.</span>trg_pad_idx <span class="token operator">=</span> src_pad_idx<span class="token punctuation">,</span> trg_pad_idx<span class="token number">123</span> <span class="token number">124</span>         <span class="token keyword">assert</span> scale_emb_or_prj <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">'emb'</span><span class="token punctuation">,</span> <span class="token string">'prj'</span><span class="token punctuation">,</span> <span class="token string">'none'</span><span class="token punctuation">]</span><span class="token number">125</span>         scale_emb <span class="token operator">=</span> <span class="token punctuation">(</span>scale_emb_or_prj <span class="token operator">==</span> <span class="token string">'emb'</span><span class="token punctuation">)</span> <span class="token keyword">if</span> trg_emb_prj_weight_sharing <span class="token keyword">else</span> <span class="token boolean">False</span><span class="token number">126</span>         self<span class="token punctuation">.</span>scale_prj <span class="token operator">=</span> <span class="token punctuation">(</span>scale_emb_or_prj <span class="token operator">==</span> <span class="token string">'prj'</span><span class="token punctuation">)</span> <span class="token keyword">if</span> trg_emb_prj_weight_sharing <span class="token keyword">else</span> <span class="token boolean">False</span><span class="token number">127</span>         self<span class="token punctuation">.</span>d_model <span class="token operator">=</span> d_model<span class="token number">128</span> <span class="token number">129</span>         self<span class="token punctuation">.</span>encoder <span class="token operator">=</span> Encoder<span class="token punctuation">(</span><span class="token number">130</span>             n_src_vocab<span class="token operator">=</span>n_src_vocab<span class="token punctuation">,</span> n_position<span class="token operator">=</span>n_position<span class="token punctuation">,</span><span class="token number">131</span>             d_word_vec<span class="token operator">=</span>d_word_vec<span class="token punctuation">,</span> d_model<span class="token operator">=</span>d_model<span class="token punctuation">,</span> d_inner<span class="token operator">=</span>d_inner<span class="token punctuation">,</span><span class="token number">132</span>             n_layers<span class="token operator">=</span>n_layers<span class="token punctuation">,</span> n_head<span class="token operator">=</span>n_head<span class="token punctuation">,</span> d_k<span class="token operator">=</span>d_k<span class="token punctuation">,</span> d_v<span class="token operator">=</span>d_v<span class="token punctuation">,</span><span class="token number">133</span>             pad_idx<span class="token operator">=</span>src_pad_idx<span class="token punctuation">,</span> dropout<span class="token operator">=</span>dropout<span class="token punctuation">,</span> scale_emb<span class="token operator">=</span>scale_emb<span class="token punctuation">)</span><span class="token number">134</span> <span class="token number">135</span>         self<span class="token punctuation">.</span>decoder <span class="token operator">=</span> Decoder<span class="token punctuation">(</span><span class="token number">136</span>             n_trg_vocab<span class="token operator">=</span>n_trg_vocab<span class="token punctuation">,</span> n_position<span class="token operator">=</span>n_position<span class="token punctuation">,</span><span class="token number">137</span>             d_word_vec<span class="token operator">=</span>d_word_vec<span class="token punctuation">,</span> d_model<span class="token operator">=</span>d_model<span class="token punctuation">,</span> d_inner<span class="token operator">=</span>d_inner<span class="token punctuation">,</span><span class="token number">138</span>             n_layers<span class="token operator">=</span>n_layers<span class="token punctuation">,</span> n_head<span class="token operator">=</span>n_head<span class="token punctuation">,</span> d_k<span class="token operator">=</span>d_k<span class="token punctuation">,</span> d_v<span class="token operator">=</span>d_v<span class="token punctuation">,</span><span class="token number">139</span>             pad_idx<span class="token operator">=</span>trg_pad_idx<span class="token punctuation">,</span> dropout<span class="token operator">=</span>dropout<span class="token punctuation">,</span> scale_emb<span class="token operator">=</span>scale_emb<span class="token punctuation">)</span><span class="token number">140</span> <span class="token number">141</span>         self<span class="token punctuation">.</span>trg_word_prj <span class="token operator">=</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>d_model<span class="token punctuation">,</span> n_trg_vocab<span class="token punctuation">,</span> bias<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token number">142</span> <span class="token number">143</span>         <span class="token keyword">for</span> p <span class="token keyword">in</span> self<span class="token punctuation">.</span>parameters<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">144</span>             <span class="token keyword">if</span> p<span class="token punctuation">.</span>dim<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token number">145</span>                 nn<span class="token punctuation">.</span>init<span class="token punctuation">.</span>xavier_uniform_<span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token number">146</span> <span class="token number">147</span>         <span class="token keyword">assert</span> d_model <span class="token operator">==</span> d_word_vec<span class="token punctuation">,</span> \<span class="token number">148</span>         'To facilitate the residual connections<span class="token punctuation">,</span> \<span class="token number">149</span>          the dimensions of <span class="token builtin">all</span> module outputs shall be the same<span class="token punctuation">.</span>'<span class="token number">150</span> <span class="token number">151</span>         <span class="token keyword">if</span> trg_emb_prj_weight_sharing<span class="token punctuation">:</span><span class="token number">152</span>             <span class="token comment"># Share the weight between target word embedding &amp; last dense layer</span><span class="token number">153</span>             self<span class="token punctuation">.</span>trg_word_prj<span class="token punctuation">.</span>weight <span class="token operator">=</span> self<span class="token punctuation">.</span>decoder<span class="token punctuation">.</span>trg_word_emb<span class="token punctuation">.</span>weight<span class="token number">154</span> <span class="token number">155</span>         <span class="token keyword">if</span> emb_src_trg_weight_sharing<span class="token punctuation">:</span><span class="token number">156</span>             self<span class="token punctuation">.</span>encoder<span class="token punctuation">.</span>src_word_emb<span class="token punctuation">.</span>weight <span class="token operator">=</span> self<span class="token punctuation">.</span>decoder<span class="token punctuation">.</span>trg_word_emb<span class="token punctuation">.</span>weight<span class="token number">157</span> <span class="token number">158</span> <span class="token number">159</span>     <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> src_seq<span class="token punctuation">,</span> trg_seq<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">160</span>         src_mask <span class="token operator">=</span> get_pad_mask<span class="token punctuation">(</span>src_seq<span class="token punctuation">,</span> self<span class="token punctuation">.</span>src_pad_idx<span class="token punctuation">)</span><span class="token number">161</span>         trg_mask <span class="token operator">=</span> get_pad_mask<span class="token punctuation">(</span>trg_seq<span class="token punctuation">,</span> self<span class="token punctuation">.</span>trg_pad_idx<span class="token punctuation">)</span> <span class="token operator">&amp;</span> get_subsequent_mask<span class="token punctuation">(</span>trg_seq<span class="token punctuation">)</span><span class="token number">162</span> <span class="token number">163</span>         enc_output<span class="token punctuation">,</span> <span class="token operator">*</span>_ <span class="token operator">=</span> self<span class="token punctuation">.</span>encoder<span class="token punctuation">(</span>src_seq<span class="token punctuation">,</span> src_mask<span class="token punctuation">)</span><span class="token number">164</span>         dec_output<span class="token punctuation">,</span> <span class="token operator">*</span>_ <span class="token operator">=</span> self<span class="token punctuation">.</span>decoder<span class="token punctuation">(</span>trg_seq<span class="token punctuation">,</span> trg_mask<span class="token punctuation">,</span> enc_output<span class="token punctuation">,</span> src_mask<span class="token punctuation">)</span><span class="token number">165</span>         seq_logit <span class="token operator">=</span> self<span class="token punctuation">.</span>trg_word_prj<span class="token punctuation">(</span>dec_output<span class="token punctuation">)</span><span class="token number">166</span>         <span class="token keyword">if</span> self<span class="token punctuation">.</span>scale_prj<span class="token punctuation">:</span><span class="token number">167</span>             seq_logit <span class="token operator">*=</span> self<span class="token punctuation">.</span>d_model <span class="token operator">**</span> <span class="token operator">-</span><span class="token number">0.5</span><span class="token number">168</span>         <span class="token keyword">return</span> seq_logit<span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> seq_logit<span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åŸºäºtransformerç”Ÿæˆæ–‡ç« æ ‡é¢˜"><a href="#åŸºäºtransformerç”Ÿæˆæ–‡ç« æ ‡é¢˜" class="headerlink" title="åŸºäºtransformerç”Ÿæˆæ–‡ç« æ ‡é¢˜"></a>åŸºäºtransformerç”Ÿæˆæ–‡ç« æ ‡é¢˜</h2><h4 id="é…ç½®å‚æ•°ä¿¡æ¯"><a href="#é…ç½®å‚æ•°ä¿¡æ¯" class="headerlink" title="é…ç½®å‚æ•°ä¿¡æ¯"></a>é…ç½®å‚æ•°ä¿¡æ¯</h4><p>é¦–å…ˆï¼Œæˆ‘ä»¬åŸºäºä¸Šè¿°çš„transformeræ¡†æ¶ï¼Œé…ç½®æ¨¡å‹å‚æ•°</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token number">1</span> <span class="token triple-quoted-string string">"""2 é…ç½®å‚æ•°ä¿¡æ¯3 """</span><span class="token number">4</span> <span class="token keyword">import</span> os<span class="token number">5</span> <span class="token keyword">import</span> torch<span class="token number">6</span> <span class="token number">7</span> Config <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">8</span>     <span class="token string">"model_path"</span><span class="token punctuation">:</span> <span class="token string">"output"</span><span class="token punctuation">,</span><span class="token number">9</span>     <span class="token string">"input_max_length"</span><span class="token punctuation">:</span> <span class="token number">120</span><span class="token punctuation">,</span><span class="token number">10</span>     <span class="token string">"output_max_length"</span><span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span><span class="token number">11</span>     <span class="token string">"epoch"</span><span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span><span class="token number">12</span>     <span class="token string">"batch_size"</span><span class="token punctuation">:</span> <span class="token number">32</span><span class="token punctuation">,</span><span class="token number">13</span>     <span class="token string">"optimizer"</span><span class="token punctuation">:</span> <span class="token string">"adam"</span><span class="token punctuation">,</span><span class="token number">14</span>     <span class="token string">"learning_rate"</span><span class="token punctuation">:</span><span class="token number">1e-3</span><span class="token punctuation">,</span><span class="token number">15</span>     <span class="token string">"seed"</span><span class="token punctuation">:</span><span class="token number">42</span><span class="token punctuation">,</span><span class="token number">16</span>     <span class="token string">"vocab_size"</span><span class="token punctuation">:</span><span class="token number">6219</span><span class="token punctuation">,</span><span class="token number">17</span>     <span class="token string">"vocab_path"</span><span class="token punctuation">:</span><span class="token string">"vocab.txt"</span><span class="token punctuation">,</span><span class="token number">18</span>     <span class="token string">"train_data_path"</span><span class="token punctuation">:</span> <span class="token string">"sample_data.json"</span><span class="token punctuation">,</span><span class="token number">19</span>     <span class="token string">"valid_data_path"</span><span class="token punctuation">:</span> <span class="token string">"sample_data.json"</span><span class="token punctuation">,</span><span class="token number">20</span>     <span class="token string">"beam_size"</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token number">21</span>     <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ•°æ®å‡†å¤‡"><a href="#æ•°æ®å‡†å¤‡" class="headerlink" title="æ•°æ®å‡†å¤‡"></a>æ•°æ®å‡†å¤‡</h2><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä»½104ç¯‡åŒ…å«æ–‡ç« å†…å®¹å’Œæ ‡é¢˜çš„æ–°é—»æ•°æ®sample_data.jsonï¼Œéƒ¨åˆ†ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token number">1</span> <span class="token punctuation">&#123;</span><span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"å¹¿å·å†œä¸šå±€é•¿å›åº”ä¸ç‹æ—è›‡ç¼ è„–åˆå½±ï¼šåªæ˜¯ç©æ¸¸æˆ"</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token property">"content"</span><span class="token operator">:</span> <span class="token string">"ç…§ç‰‡ä¸Šç‹æ—ä¸Šèº«ç€é»‘è‰²é€è§†è£…ï¼Œä¸‹èº«ä»…ç©¿ç™½è‰²å†…è£¤ï¼Œå³æ‰‹æŠ“äº†ä¸‰æ¡è›‡ç¼ åœ¨å¹¿å·å†œä¸šå±€å…šå§”ä¹¦è®°ã€å±€é•¿æ±¤é”¦åè„–å­ä¸Šã€‚æ±¤é”¦åç§°2000å¹´ä¸æœ‹å‹ä¸€èµ·å»æ·±åœ³ï¼Œåº”é‚€å»è§ç‹æ—æ—¶æ‰€æ‹ã€‚â€œé‚£æ˜¯åå¤šå¹´å‰çš„äº‹äº†ï¼Œä¹‹åå†æ— è”ç³»â€ å¤§å¸ˆç€è£…å¥½å¥‡ç‰¹ï¼ "</span><span class="token number">3</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>é¦–å…ˆéœ€è¦åŠ è½½æ•°æ®é›†loader.py</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token number">1</span> <span class="token keyword">import</span> json<span class="token number">2</span> <span class="token keyword">import</span> re<span class="token number">3</span> <span class="token keyword">import</span> os<span class="token number">4</span> <span class="token keyword">import</span> torch<span class="token number">5</span> <span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token number">6</span> <span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">import</span> Dataset<span class="token punctuation">,</span> DataLoader<span class="token number">7</span> <span class="token keyword">from</span> collections <span class="token keyword">import</span> defaultdict<span class="token number">8</span> <span class="token triple-quoted-string string">"""9 æ•°æ®åŠ è½½10 """</span><span class="token number">11</span> <span class="token keyword">class</span> <span class="token class-name">DataGenerator</span><span class="token punctuation">:</span><span class="token number">12</span>     <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> data_path<span class="token punctuation">,</span> config<span class="token punctuation">,</span> logger<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">13</span>         self<span class="token punctuation">.</span>config <span class="token operator">=</span> config<span class="token number">14</span>         self<span class="token punctuation">.</span>logger <span class="token operator">=</span> logger<span class="token number">15</span>         self<span class="token punctuation">.</span>path <span class="token operator">=</span> data_path<span class="token number">16</span>         self<span class="token punctuation">.</span>vocab <span class="token operator">=</span> load_vocab<span class="token punctuation">(</span>config<span class="token punctuation">[</span><span class="token string">"vocab_path"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token number">17</span>         self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">"vocab_size"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>vocab<span class="token punctuation">)</span><span class="token number">18</span>         self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">"pad_idx"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>vocab<span class="token punctuation">[</span><span class="token string">"[PAD]"</span><span class="token punctuation">]</span><span class="token number">19</span>         self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">"start_idx"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>vocab<span class="token punctuation">[</span><span class="token string">"[CLS]"</span><span class="token punctuation">]</span><span class="token number">20</span>         self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">"end_idx"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>vocab<span class="token punctuation">[</span><span class="token string">"[SEP]"</span><span class="token punctuation">]</span><span class="token number">21</span>         self<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token number">22</span> <span class="token number">23</span>     <span class="token keyword">def</span> <span class="token function">load</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">24</span>         self<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token number">25</span>         <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>path<span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">"utf8"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span><span class="token number">26</span>             <span class="token keyword">for</span> i<span class="token punctuation">,</span> line <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">27</span>                 line <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token number">28</span>                 title <span class="token operator">=</span> line<span class="token punctuation">[</span><span class="token string">"title"</span><span class="token punctuation">]</span><span class="token number">29</span>                 content <span class="token operator">=</span> line<span class="token punctuation">[</span><span class="token string">"content"</span><span class="token punctuation">]</span><span class="token number">30</span>                 self<span class="token punctuation">.</span>prepare_data<span class="token punctuation">(</span>title<span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token number">31</span>         <span class="token keyword">return</span><span class="token number">32</span> <span class="token number">33</span>     <span class="token comment">#æ–‡æœ¬åˆ°å¯¹åº”çš„indexï¼Œå¤´å°¾åˆ†åˆ«åŠ å…¥[cls]å’Œ[sep]</span><span class="token number">34</span>     <span class="token keyword">def</span> <span class="token function">encode_sentence</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> text<span class="token punctuation">,</span> max_length<span class="token punctuation">,</span> with_cls_token<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> with_sep_token<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">35</span>         input_id <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token number">36</span>         <span class="token keyword">if</span> with_cls_token<span class="token punctuation">:</span><span class="token number">37</span>             input_id<span class="token punctuation">.</span>append<span class="token punctuation">(</span>self<span class="token punctuation">.</span>vocab<span class="token punctuation">[</span><span class="token string">"[CLS]"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token number">38</span>         <span class="token keyword">for</span> char <span class="token keyword">in</span> text<span class="token punctuation">:</span><span class="token number">39</span>             input_id<span class="token punctuation">.</span>append<span class="token punctuation">(</span>self<span class="token punctuation">.</span>vocab<span class="token punctuation">.</span>get<span class="token punctuation">(</span>char<span class="token punctuation">,</span> self<span class="token punctuation">.</span>vocab<span class="token punctuation">[</span><span class="token string">"[UNK]"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token number">40</span>         <span class="token keyword">if</span> with_sep_token<span class="token punctuation">:</span><span class="token number">41</span>             input_id<span class="token punctuation">.</span>append<span class="token punctuation">(</span>self<span class="token punctuation">.</span>vocab<span class="token punctuation">[</span><span class="token string">"[SEP]"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token number">42</span>         input_id <span class="token operator">=</span> self<span class="token punctuation">.</span>padding<span class="token punctuation">(</span>input_id<span class="token punctuation">,</span> max_length<span class="token punctuation">)</span><span class="token number">43</span>         <span class="token keyword">return</span> input_id<span class="token number">44</span> <span class="token number">45</span>     <span class="token comment">#è¡¥é½æˆ–æˆªæ–­è¾“å…¥çš„åºåˆ—ï¼Œä½¿å…¶å¯ä»¥åœ¨ä¸€ä¸ªbatchå†…è¿ç®—</span><span class="token number">46</span>     <span class="token keyword">def</span> <span class="token function">padding</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> input_id<span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">47</span>         input_id <span class="token operator">=</span> input_id<span class="token punctuation">[</span><span class="token punctuation">:</span>length<span class="token punctuation">]</span><span class="token number">48</span>         input_id <span class="token operator">+=</span> <span class="token punctuation">[</span>self<span class="token punctuation">.</span>vocab<span class="token punctuation">[</span><span class="token string">"[PAD]"</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>length <span class="token operator">-</span> <span class="token builtin">len</span><span class="token punctuation">(</span>input_id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token number">49</span>         <span class="token keyword">return</span> input_id<span class="token number">50</span> <span class="token number">51</span>     <span class="token comment">#è¾“å…¥è¾“å‡ºè½¬åŒ–æˆåºåˆ—</span><span class="token number">52</span>     <span class="token keyword">def</span> <span class="token function">prepare_data</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> title<span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">53</span>         input_seq <span class="token operator">=</span> self<span class="token punctuation">.</span>encode_sentence<span class="token punctuation">(</span>content<span class="token punctuation">,</span> self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">"input_max_length"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">)</span> <span class="token comment">#è¾“å…¥åºåˆ—</span><span class="token number">54</span>         output_seq <span class="token operator">=</span> self<span class="token punctuation">.</span>encode_sentence<span class="token punctuation">(</span>title<span class="token punctuation">,</span> self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">"output_max_length"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">)</span> <span class="token comment">#è¾“å‡ºåºåˆ—</span><span class="token number">55</span>         gold <span class="token operator">=</span> self<span class="token punctuation">.</span>encode_sentence<span class="token punctuation">(</span>title<span class="token punctuation">,</span> self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">"output_max_length"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment">#ä¸è¿›å…¥æ¨¡å‹ï¼Œç”¨äºè®¡ç®—loss</span><span class="token number">56</span>         self<span class="token punctuation">.</span>data<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>torch<span class="token punctuation">.</span>LongTensor<span class="token punctuation">(</span>input_seq<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">57</span>                           torch<span class="token punctuation">.</span>LongTensor<span class="token punctuation">(</span>output_seq<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">58</span>                           torch<span class="token punctuation">.</span>LongTensor<span class="token punctuation">(</span>gold<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token number">59</span>         <span class="token keyword">return</span><span class="token number">60</span> <span class="token number">61</span>     <span class="token keyword">def</span> <span class="token function">__len__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">62</span>         <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token number">63</span> <span class="token number">64</span>     <span class="token keyword">def</span> <span class="token function">__getitem__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">65</span>         <span class="token keyword">return</span> self<span class="token punctuation">.</span>data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token number">66</span> <span class="token number">67</span> <span class="token comment">#åŠ è½½è¯è¡¨</span><span class="token number">68</span> <span class="token keyword">def</span> <span class="token function">load_vocab</span><span class="token punctuation">(</span>vocab_path<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">69</span>     token_dict <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token number">70</span>     <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>vocab_path<span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">"utf8"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span><span class="token number">71</span>         <span class="token keyword">for</span> index<span class="token punctuation">,</span> line <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">72</span>             token <span class="token operator">=</span> line<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token number">73</span>             token_dict<span class="token punctuation">[</span>token<span class="token punctuation">]</span> <span class="token operator">=</span> index<span class="token number">74</span>     <span class="token keyword">return</span> token_dict<span class="token number">75</span> <span class="token number">76</span> <span class="token comment">#ç”¨torchè‡ªå¸¦çš„DataLoaderç±»å°è£…æ•°æ®</span><span class="token number">77</span> <span class="token keyword">def</span> <span class="token function">load_data</span><span class="token punctuation">(</span>data_path<span class="token punctuation">,</span> config<span class="token punctuation">,</span> logger<span class="token punctuation">,</span> shuffle<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">78</span>     dg <span class="token operator">=</span> DataGenerator<span class="token punctuation">(</span>data_path<span class="token punctuation">,</span> config<span class="token punctuation">,</span> logger<span class="token punctuation">)</span><span class="token number">79</span>     dl <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>dg<span class="token punctuation">,</span> batch_size<span class="token operator">=</span>config<span class="token punctuation">[</span><span class="token string">"batch_size"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> shuffle<span class="token operator">=</span>shuffle<span class="token punctuation">)</span><span class="token number">80</span>     <span class="token keyword">return</span> dl<span class="token number">81</span> <span class="token number">82</span> <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span><span class="token number">83</span>     <span class="token keyword">from</span> config <span class="token keyword">import</span> Config<span class="token number">84</span>     dl <span class="token operator">=</span> load_data<span class="token punctuation">(</span>Config<span class="token punctuation">[</span><span class="token string">"train_data_path"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Config<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ¨¡å‹æ•ˆæœæµ‹è¯•"><a href="#æ¨¡å‹æ•ˆæœæµ‹è¯•" class="headerlink" title="æ¨¡å‹æ•ˆæœæµ‹è¯•"></a>æ¨¡å‹æ•ˆæœæµ‹è¯•</h2><p>é€šè¿‡éªŒè¯æ•°æ®é›†å®Œæˆæ¨¡å‹æ•ˆæœè¯„ä¼°ç±»çš„å®šä¹‰</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token number">1</span> <span class="token keyword">class</span> <span class="token class-name">Evaluator</span><span class="token punctuation">:</span><span class="token number">2</span>     <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> config<span class="token punctuation">,</span> model<span class="token punctuation">,</span> logger<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">3</span>         self<span class="token punctuation">.</span>config <span class="token operator">=</span> config<span class="token number">4</span>         self<span class="token punctuation">.</span>model <span class="token operator">=</span> model<span class="token number">5</span>         self<span class="token punctuation">.</span>logger <span class="token operator">=</span> logger<span class="token number">6</span>         self<span class="token punctuation">.</span>valid_data <span class="token operator">=</span> load_data<span class="token punctuation">(</span>config<span class="token punctuation">[</span><span class="token string">"valid_data_path"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> config<span class="token punctuation">,</span> logger<span class="token punctuation">,</span> shuffle<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token number">7</span>         self<span class="token punctuation">.</span>reverse_vocab <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> x<span class="token punctuation">)</span> <span class="token keyword">for</span> x<span class="token punctuation">,</span> y <span class="token keyword">in</span> self<span class="token punctuation">.</span>valid_data<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>vocab<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token number">8</span>         self<span class="token punctuation">.</span>translator <span class="token operator">=</span> Translator<span class="token punctuation">(</span>self<span class="token punctuation">.</span>model<span class="token punctuation">,</span><span class="token number">9</span>                                      config<span class="token punctuation">[</span><span class="token string">"beam_size"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">10</span>                                      config<span class="token punctuation">[</span><span class="token string">"output_max_length"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">11</span>                                      config<span class="token punctuation">[</span><span class="token string">"pad_idx"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">12</span>                                      config<span class="token punctuation">[</span><span class="token string">"pad_idx"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">13</span>                                      config<span class="token punctuation">[</span><span class="token string">"start_idx"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">14</span>                                      config<span class="token punctuation">[</span><span class="token string">"end_idx"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token number">15</span> <span class="token number">16</span>     <span class="token keyword">def</span> <span class="token builtin">eval</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> epoch<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">17</span>         self<span class="token punctuation">.</span>logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">"å¼€å§‹æµ‹è¯•ç¬¬%dè½®æ¨¡å‹æ•ˆæœï¼š"</span> <span class="token operator">%</span> epoch<span class="token punctuation">)</span><span class="token number">18</span>         self<span class="token punctuation">.</span>model<span class="token punctuation">.</span><span class="token builtin">eval</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token number">19</span>         self<span class="token punctuation">.</span>model<span class="token punctuation">.</span>cpu<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token number">20</span>         self<span class="token punctuation">.</span>stats_dict <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span>  <span class="token comment"># ç”¨äºå­˜å‚¨æµ‹è¯•ç»“æœ</span><span class="token number">21</span>         <span class="token keyword">for</span> index<span class="token punctuation">,</span> batch_data <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>valid_data<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">22</span>             input_seqs<span class="token punctuation">,</span> target_seqs<span class="token punctuation">,</span> gold <span class="token operator">=</span> batch_data<span class="token number">23</span>             <span class="token keyword">for</span> input_seq <span class="token keyword">in</span> input_seqs<span class="token punctuation">:</span><span class="token number">24</span>                 generate <span class="token operator">=</span> self<span class="token punctuation">.</span>translator<span class="token punctuation">.</span>translate_sentence<span class="token punctuation">(</span>input_seq<span class="token punctuation">.</span>unsqueeze<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token number">25</span>                 <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"è¾“å…¥ï¼š"</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>decode_seq<span class="token punctuation">(</span>input_seq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token number">26</span>                 <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"è¾“å‡ºï¼š"</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>decode_seq<span class="token punctuation">(</span>generate<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token number">27</span>                 <span class="token keyword">break</span><span class="token number">28</span>         <span class="token keyword">return</span><span class="token number">29</span> <span class="token number">30</span>     <span class="token keyword">def</span> <span class="token function">decode_seq</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> seq<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">31</span>         <span class="token keyword">return</span><span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>self<span class="token punctuation">.</span>reverse_vocab<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">(</span>idx<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">for</span> idx <span class="token keyword">in</span> seq<span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ¨¡å‹ä¸»ç¨‹åº"><a href="#æ¨¡å‹ä¸»ç¨‹åº" class="headerlink" title="æ¨¡å‹ä¸»ç¨‹åº"></a>æ¨¡å‹ä¸»ç¨‹åº</h2><p>æ•´ä¸ªæ¨¡å‹æˆ‘ä»¬é€šè¿‡æ‰§è¡Œmain.pyæ–‡ä»¶è¿è¡Œæ¨¡å‹</p><pre><code class="py">1 &quot;&quot;&quot;2 æ¨¡å‹è®­ç»ƒä¸»ç¨‹åº3 &quot;&quot;&quot;4 def choose_optimizer(config, model):5 Â  Â  optimizer = config[&quot;optimizer&quot;]6 Â  Â  learning_rate = config[&quot;learning_rate&quot;]7 Â  Â Â ifÂ optimizer ==Â &quot;adam&quot;:8 Â  Â  Â  Â Â returnÂ torch.optim.Adam(model.parameters(), lr=learning_rate)9 Â  Â Â elifÂ optimizer ==Â &quot;sgd&quot;:10 Â  Â  Â  Â Â returnÂ torch.optim.SGD(model.parameters(), lr=learning_rate)11 12 def main(config):13 Â  Â Â #åˆ›å»ºä¿å­˜æ¨¡å‹çš„ç›®å½•14 Â  Â Â ifÂ not os.path.isdir(config[&quot;model_path&quot;]):15 Â  Â  Â  Â  os.mkdir(config[&quot;model_path&quot;])16 Â  Â Â #åŠ è½½æ¨¡å‹17 Â  Â  logger.info(json.dumps(config, ensure_ascii=False, indent=2))18 Â  Â  model = Transformer(config[&quot;vocab_size&quot;], config[&quot;vocab_size&quot;], 0, 0,19 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  d_word_vec=128, d_model=128, d_inner=256,20 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  n_layers=1, n_head=2, d_k=64, d_v=64,21 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )22 Â  Â Â # æ ‡è¯†æ˜¯å¦ä½¿ç”¨gpu23 Â  Â  cuda_flag = torch.cuda.is_available()24 Â  Â Â ifÂ cuda_flag:25 Â  Â  Â  Â  logger.info(&quot;gpuå¯ä»¥ä½¿ç”¨ï¼Œè¿ç§»æ¨¡å‹è‡³gpu&quot;)26 Â  Â  Â  Â  model = model.cuda()27 Â  Â Â #åŠ è½½ä¼˜åŒ–å™¨28 Â  Â  optimizer = choose_optimizer(config, model)29 Â  Â Â # åŠ è½½è®­ç»ƒæ•°æ®30 Â  Â  train_data = load_data(config[&quot;train_data_path&quot;], config, logger)31 Â  Â Â #åŠ è½½æ•ˆæœæµ‹è¯•ç±»32 Â  Â  evaluator = Evaluator(config, model, logger)33 Â  Â Â #åŠ è½½loss34 Â  Â  loss_func = torch.nn.CrossEntropyLoss(ignore_index=0)35 Â  Â Â #è®­ç»ƒ36 Â  Â Â forÂ epochÂ inÂ range(config[&quot;epoch&quot;]):37 Â  Â  Â  Â  epoch += 138 Â  Â  Â  Â  model.train()39 Â  Â  Â  Â Â ifÂ cuda_flag:40 Â  Â  Â  Â  Â  Â  model.cuda()41 Â  Â  Â  Â  logger.info(&quot;epoch %d begin&quot;Â % epoch)42 Â  Â  Â  Â  train_loss = []43 Â  Â  Â  Â Â forÂ index, batch_dataÂ inÂ enumerate(train_data):44 Â  Â  Â  Â  Â  Â Â ifÂ cuda_flag:45 Â  Â  Â  Â  Â  Â  Â  Â  batch_data = [d.cuda()Â forÂ dÂ inÂ batch_data]46 Â  Â  Â  Â  Â  Â  input_seq, target_seq, gold = batch_data47 48 Â  Â  Â  Â  Â  Â  pred = model(input_seq, target_seq)49 Â  Â  Â  Â  Â  Â  loss = loss_func(pred, gold.view(-1))50 51 Â  Â  Â  Â  Â  Â  train_loss.append(float(loss))52 Â  Â  Â  Â  Â  Â  loss.backward()53 Â  Â  Â  Â  Â  Â  optimizer.step()54 Â  Â  Â  Â  Â  Â  optimizer.zero_grad()55 56 Â  Â  Â  Â  logger.info(&quot;epoch average loss: %f&quot;Â % np.mean(train_loss))57 Â  Â  Â  Â  evaluator.eval(epoch)58 Â  Â  model_path = os.path.join(config[&quot;model_path&quot;],Â &quot;epoch_%d.pth&quot;Â % epoch)59 Â  Â  torch.save(model.state_dict(), model_path)60 Â  Â Â return61 62 ifÂ __name__ ==Â &quot;__main__&quot;:63 Â  Â  main(Config)64 #è¾“å‡ºç¤ºä¾‹65 è¾“å…¥ï¼š è·¯é€ç¤¾æ¶ˆæ¯ï¼Œä¸€è‰˜ä»åˆ©æ¯”äºšæ¨ªæ¸¡åœ°ä¸­æµ·å¼€å¾€æ„å¤§åˆ©çš„å·æ¸¡èˆ¹å€¾è¦†ï¼Œçº¦400äººèº«äº¡ã€‚èˆ¹ä¸Šè½½æœ‰550å¤šåå·æ¸¡å®¢ï¼Œè®¸å¤šæ˜¯å¹´è½»äººå’Œå„¿ç«¥ï¼Œå¤§éƒ¨åˆ†æ¥è‡ªæ’’å“ˆæ‹‰ä»¥å—éæ´²åœ°åŒºã€‚äº‹å‘åæ„å¤§åˆ©æµ·é˜²éƒ¨é˜Ÿå±•å¼€æœæ•‘ï¼Œè·æ•‘çš„150äººè¢«é€å¾€æ„å¤§åˆ©å—éƒ¨æ¸¯å£ã€‚[UNK][PAD][PAD][PAD][PAD][PAD][PAD][PAD][PAD][PAD][PAD][PAD]66 è¾“å‡ºï¼š [CLS]ä»åˆ©å’FIIæ„å¤§åˆ©ï¼š400å·æ¸¡å®¢æ²‰èˆ¹èº«äº¡[SEP]</code></pre><h1 id="å‚è€ƒç½‘ç«™"><a href="#å‚è€ƒç½‘ç«™" class="headerlink" title="å‚è€ƒç½‘ç«™"></a>å‚è€ƒç½‘ç«™</h1><ul><li><a href="https://mp.weixin.qq.com/s/Pze538g8CK4hDeaTKNi5Zg">https://mp.weixin.qq.com/s/Pze538g8CK4hDeaTKNi5Zg</a></li><li><a href="https://mp.weixin.qq.com/s/ayrwj3rAZTCowFp0S4CEUQ">https://mp.weixin.qq.com/s/ayrwj3rAZTCowFp0S4CEUQ</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Transform </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Transform </tag>
            
            <tag> åŸºç¡€çŸ¥è¯† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤§æ¨¡å‹åŸºç¡€çŸ¥è¯†ç‚¹</title>
      <link href="/2025/03/13/da-mo-xing-ji-chu-zhi-shi-dian/"/>
      <url>/2025/03/13/da-mo-xing-ji-chu-zhi-shi-dian/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¥ç»ç½‘ç»œçš„ç±»å‹"><a href="#ç¥ç»ç½‘ç»œçš„ç±»å‹" class="headerlink" title="ç¥ç»ç½‘ç»œçš„ç±»å‹"></a>ç¥ç»ç½‘ç»œçš„ç±»å‹</h1><h2 id="å‰é¦ˆç¥ç»ç½‘ç»œï¼ˆFNNï¼‰"><a href="#å‰é¦ˆç¥ç»ç½‘ç»œï¼ˆFNNï¼‰" class="headerlink" title="å‰é¦ˆç¥ç»ç½‘ç»œï¼ˆFNNï¼‰"></a>å‰é¦ˆç¥ç»ç½‘ç»œï¼ˆFNNï¼‰</h2><p>å‰é¦ˆç¥ç»ç½‘ç»œ (FNN) æ˜¯æœ€ç®€å•çš„äººå·¥ç¥ç»ç½‘ç»œï¼Œå…¶ä¸­ä¿¡æ¯åªæœä¸€ä¸ªæ–¹å‘ç§»åŠ¨ï¼Œå³å‘å‰ç§»åŠ¨ï¼Œä»è¾“å…¥èŠ‚ç‚¹ï¼Œç»è¿‡éšè—èŠ‚ç‚¹ï¼ˆå¦‚æœæœ‰ï¼‰ï¼Œæœ€ååˆ°è¾¾è¾“å‡ºèŠ‚ç‚¹ã€‚ç½‘ç»œä¸­æ²¡æœ‰å¾ªç¯æˆ–ç¯è·¯ï¼Œå› æ­¤æ˜¯ä¸€ç§ç®€å•çš„æ¶æ„ã€‚<br><img src="/image.png" alt="alt text"></p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ¨¡å‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€çŸ¥è¯† </tag>
            
            <tag> å¤§æ¨¡å‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµ·æ€æ¨¡å‹éƒ¨ç½²ç¬”è®°</title>
      <link href="/2025/02/17/hai-si-yi-zhi-bi-ji/"/>
      <url>/2025/02/17/hai-si-yi-zhi-bi-ji/</url>
      
        <content type="html"><![CDATA[<h1 id="æµ·æ€æŠ€æœ¯æ”¯æŒ"><a href="#æµ·æ€æŠ€æœ¯æ”¯æŒ" class="headerlink" title="æµ·æ€æŠ€æœ¯æ”¯æŒ"></a>æµ·æ€æŠ€æœ¯æ”¯æŒ</h1><p><a href="https://developers.hisilicon.com/">æµ·æ€æŠ€æœ¯è®ºå›</a><br><a href="https://www.hiascend.com/feedback">å‡è…¾ç¤¾åŒºæé—®</a></p><h1 id="YOLO-v5såå¤„ç†"><a href="#YOLO-v5såå¤„ç†" class="headerlink" title="YOLO-v5såå¤„ç†"></a>YOLO-v5såå¤„ç†</h1><p>x,y,w,h,score_box,score_label_1,score_label_2,â€¦,score_label_n</p><h1 id="YuShiQiç›®æ ‡æ£€æµ‹åå¤„ç†"><a href="#YuShiQiç›®æ ‡æ£€æµ‹åå¤„ç†" class="headerlink" title="YuShiQiç›®æ ‡æ£€æµ‹åå¤„ç†"></a>YuShiQiç›®æ ‡æ£€æµ‹åå¤„ç†</h1><p>è®­ç»ƒä»£ç :10æœåŠ¡å™¨:\cvz\luofurong\181_backup\gitlab\face_recognition_algo\libfacedetection\tasks\task1\onnx<br>å¼€æºä»£ç :<a href="https://github.com/ShiqiYu/libfacedetection">https://github.com/ShiqiYu/libfacedetection</a></p><p>ç‰¹å¾å›¾å°ºå¯¸è®¡ç®—:</p><p>fm_2th &#x3D; 40x40<br>fm_3th &#x3D; 20x20 (ç¬¬ä¸€ä¸ªç‰¹å¾å›¾)<br>fm_4th &#x3D; 10x10 (ç¬¬äºŒä¸ªç‰¹å¾å›¾)<br>fm_5th &#x3D; 5x5 (ç¬¬ä¸‰ä¸ªç‰¹å¾å›¾)<br>fm_6th &#x3D; 2x2 (ç¬¬å››ä¸ªç‰¹å¾å›¾)</p><p>æ¯ä¸ªç‰¹å¾å›¾çš„anchoræ•°é‡:</p><p>20x20ç‰¹å¾å›¾:æ¯ä¸ªç‚¹3ä¸ªanchor (10,16,24),å…±1200ä¸ª,æ¯20x20ä¸ªboxçš„ç¼©æ”¾ç³»æ•°åˆ†åˆ«ä¸º10,16,24<br>10x10ç‰¹å¾å›¾:æ¯ä¸ªç‚¹2ä¸ªanchor (32,48),å…±200ä¸ª,æ¯10ä¸‹0ä¸ªboxçš„ç¼©æ”¾ç³»æ•°åˆ†åˆ«ä¸º32,48<br>5x5ç‰¹å¾å›¾:æ¯ä¸ªç‚¹2ä¸ªanchor (64,96),å…±50ä¸ª,æ¯10x10ä¸ªboxçš„ç¼©æ”¾ç³»æ•°åˆ†åˆ«ä¸º32,48<br>2x2ç‰¹å¾å›¾:æ¯ä¸ªç‚¹3ä¸ªanchor (128,192,256),å…±12ä¸ª,æ¯2x2ä¸ªboxçš„ç¼©æ”¾ç³»æ•°åˆ†åˆ«ä¸º32,48</p><p>1462ä¸ªanchor : 20x20 20x20  20x20 5x5 5x5 10x10 10x10 2x2 2x2 2x2<br>                10    16    24    32  48    64   96   128 192 256<br>æ€»anchoræ•°é‡ &#x3D; 1200 + 200 + 50 + 12 &#x3D; 1462ä¸ªanchor boxes</p><p>æ¯ä¸ªäººè„¸æ¡†çš„å‚æ•°:box:x,y,w,h;keypoints:[x,y]*5,å…±14ä¸ªå‚æ•°</p><p>confåˆ†æ”¯è¾“å‡ºçš„ä¸¤ä¸ªç½®ä¿¡åº¦åˆ†åˆ«ä¸ºèƒŒæ™¯ç½®ä¿¡åº¦å’Œäººè„¸ç½®ä¿¡åº¦</p><h1 id="å…³é”®çš„æ£€æµ‹è®­ç»ƒä»£ç å’Œé‡åŒ–ä»£ç "><a href="#å…³é”®çš„æ£€æµ‹è®­ç»ƒä»£ç å’Œé‡åŒ–ä»£ç " class="headerlink" title="å…³é”®çš„æ£€æµ‹è®­ç»ƒä»£ç å’Œé‡åŒ–ä»£ç "></a>å…³é”®çš„æ£€æµ‹è®­ç»ƒä»£ç å’Œé‡åŒ–ä»£ç </h1><p>è®­ç»ƒ:10æœåŠ¡å™¨:\cvz\luofurong\181_backup\gitlab\dsm_algo\train_face_landmark<br>è®­ç»ƒä½¿ç”¨BGRå›¾åƒ</p><p>é‡åŒ–:103æœåŠ¡å™¨::\rknn_toolkit_common\test\zhr_test\face68</p><h1 id="APIä½¿ç”¨æ³¨æ„äº‹é¡¹"><a href="#APIä½¿ç”¨æ³¨æ„äº‹é¡¹" class="headerlink" title="APIä½¿ç”¨æ³¨æ„äº‹é¡¹"></a>APIä½¿ç”¨æ³¨æ„äº‹é¡¹</h1><h2 id="svp-acl-mdl-get-output-dims"><a href="#svp-acl-mdl-get-output-dims" class="headerlink" title="svp_acl_mdl_get_output_dims"></a>svp_acl_mdl_get_output_dims</h2><p><code>svp_acl_mdl_get_output_dims</code>å‡½æ•°åœ¨è°ƒç”¨æ—¶æœ€å¥½å°†dimsè¿›è¡Œåˆå§‹åŒ–,å¦åˆ™å¦‚æœè¾“å‡ºçš„ç»´åº¦ä¸æ˜¯4,ä¾‹å¦‚å›å½’æ¨¡å‹,æ­¤æ—¶ç©ºé—²ç»´åº¦ä¿¡æ¯ä¼šè¢«ä»»æ„å€¼å¡«å……</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">svp_acl_mdl_io_dims aclDims<span class="token punctuation">;</span>std<span class="token double-colon punctuation">::</span><span class="token function">fill</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">begin</span><span class="token punctuation">(</span>aclDims<span class="token punctuation">.</span>dims<span class="token punctuation">)</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span><span class="token function">end</span><span class="token punctuation">(</span>aclDims<span class="token punctuation">.</span>dims<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h1 id="atcå·¥å…·ä½¿ç”¨æ³¨æ„äº‹é¡¹"><a href="#atcå·¥å…·ä½¿ç”¨æ³¨æ„äº‹é¡¹" class="headerlink" title="atcå·¥å…·ä½¿ç”¨æ³¨æ„äº‹é¡¹"></a>atcå·¥å…·ä½¿ç”¨æ³¨æ„äº‹é¡¹</h1><h2 id="å¯¼å‡ºæ¨¡å‹åœ¨æ¿ç«¯æ¨ç†æ—¶æ•ˆæœè¾ƒå·®"><a href="#å¯¼å‡ºæ¨¡å‹åœ¨æ¿ç«¯æ¨ç†æ—¶æ•ˆæœè¾ƒå·®" class="headerlink" title="å¯¼å‡ºæ¨¡å‹åœ¨æ¿ç«¯æ¨ç†æ—¶æ•ˆæœè¾ƒå·®"></a>å¯¼å‡ºæ¨¡å‹åœ¨æ¿ç«¯æ¨ç†æ—¶æ•ˆæœè¾ƒå·®</h2><h2 id="ldwæ¨ç†ç»“æœæœ‰ç‚¹åƒè½¦é“çº¿-ä½†æ˜¯ä¸å‡†"><a href="#ldwæ¨ç†ç»“æœæœ‰ç‚¹åƒè½¦é“çº¿-ä½†æ˜¯ä¸å‡†" class="headerlink" title="ldwæ¨ç†ç»“æœæœ‰ç‚¹åƒè½¦é“çº¿,ä½†æ˜¯ä¸å‡†"></a>ldwæ¨ç†ç»“æœæœ‰ç‚¹åƒè½¦é“çº¿,ä½†æ˜¯ä¸å‡†</h2><p>ç¼–è¯‘æ¨¡å¼é…ç½®æ—¶,é‡åŒ–åçš„æ•°æ®bitä½å®½,ä¸å½±å“æƒé‡é‡åŒ–çš„bitä½å®½,æƒé‡å›ºå®šæ˜¯8bité‡åŒ–ã€‚ä½¿ç”¨16bitåæ•ˆæœæ­£å¸¸ã€‚é…ç½®æ–¹æ³•:<br>compile_mode&#x3D;1</p><h2 id="dsmçš„é¢éƒ¨å…³é”®ç‚¹æ£€æµ‹æ¨¡å‹æ¿ç«¯æ¨ç†æ—¶å¾—åˆ°çš„ç»“æœå…¨éƒ¨ä¸º0"><a href="#dsmçš„é¢éƒ¨å…³é”®ç‚¹æ£€æµ‹æ¨¡å‹æ¿ç«¯æ¨ç†æ—¶å¾—åˆ°çš„ç»“æœå…¨éƒ¨ä¸º0" class="headerlink" title="dsmçš„é¢éƒ¨å…³é”®ç‚¹æ£€æµ‹æ¨¡å‹æ¿ç«¯æ¨ç†æ—¶å¾—åˆ°çš„ç»“æœå…¨éƒ¨ä¸º0"></a>dsmçš„é¢éƒ¨å…³é”®ç‚¹æ£€æµ‹æ¨¡å‹æ¿ç«¯æ¨ç†æ—¶å¾—åˆ°çš„ç»“æœå…¨éƒ¨ä¸º0</h2><ul><li>æ’æŸ¥onnxæ¨¡å‹,ä½¿å¾—onnxæ¨¡å‹æ¨ç†æ­£å¸¸<br>åŸæ¥çš„onnxç±»å‹çš„dsmé¢éƒ¨å…³é”®ç‚¹æ£€æµ‹æ¨¡å‹ä¸­åŒ…å«äº†ä¸¤ä¸ªè¾“å‡º,ä½†æ˜¯ä¸€ä¸ªæ²¡æœ‰ä½¿ç”¨,å°è¯•éå†ç´ æœ‰è¾“å‡ºèŠ‚ç‚¹å¹¶åˆ é™¤æ— ç”¨è¾“å‡ºèŠ‚ç‚¹å,atcè½¬æ¢æ¨¡å‹æ—¶å¹¶æœªæ˜¾ç¤ºå¼‚å¸¸æç¤º,ä½†æ˜¯è½¬æ¢ä¸ºomæ¨¡å‹ååœ¨æ¿ç«¯æ¨ç†ç»“æœå…¨ä¸º0,åˆæ­¥æ£€æŸ¥å‘ç°,åˆ é™¤æ— ç”¨è¾“å‡ºèŠ‚ç‚¹åçš„onnxæ¨¡å‹æ— æ³•åœ¨pcä¸Šæ­£å¸¸æ¨ç†,ä½¿ç”¨netronæ‰“å¼€åå‘ç°æ— ç”¨è¾“å‡ºèŠ‚ç‚¹çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹å±æ€§ä¸­æœ‰è¾“å‡ºèŠ‚ç‚¹,ä½†æ˜¯å®é™…è¯¥èŠ‚ç‚¹å·²ç»è¢«åˆ é™¤,å³:èŠ‚ç‚¹æ²¡æœ‰åˆ é™¤å¹²å‡€ã€‚</li></ul><p>onnxæ¨ç†å¼‚å¸¸æŠ¥é”™å¦‚ä¸‹:<br>Traceback (most recent call last):<br>  File â€œscript&#x2F;predict_onnx.pyâ€, line 89, in <module><br>    landmark &#x3D; net.forward(to_numpy(img))<br>  File â€œscript&#x2F;predict_onnx.pyâ€, line 70, in forward<br>    self.output_name, input_feed&#x3D;input_feed)<br>ValueError: not enough values to unpack (expected 2, got 1)</p><ul><li>æ’æŸ¥å“ªä¸€å±‚ä¹‹åçš„è¾“å‡ºæœ‰é—®é¢˜<br>ä½¿ç”¨ cutoff_layeræŒ‡å®šé‚£ä¸€å±‚åˆ é™¤,ç„¶åçœ‹å‰©ä½™ç½‘ç»œçš„è¾“å‡º</li></ul><p>add5å’Œadd6ä¹‹é—´å¼‚å¸¸:add5è¾“å…¥æ­£å¸¸,add6çš„è¾“å…¥å…¨ä¸º0</p><p>Conv_20å’Œadd6ä¹‹é—´å¼‚å¸¸,Conv_20è¾“å…¥æ­£å¸¸,add6è¾“å…¥å…¨ä¸º0</p><ul><li>æ’æŸ¥æ¨¡å‹è½¬æ¢é—®é¢˜</li></ul><p>å…³é—­æ¨¡å‹,forward_quantization_option&#x3D;0,æ­¤æ—¶æ¨¡å‹å¤§å°æœªå˜,ç»“æœä»æ—§å…¨ä¸º0</p><p>è¾“å‡ºæ•°æ®çš„ç±»å‹ä¸ºsvp_acl_formatä¸­çš„ SVP_ACL_FORMAT_ND &#x3D; 2,æ–‡æ¡£æç¤º  ND:è¡¨ç¤ºæ”¯æŒä»»æ„æ ¼å¼,ä»…æœ‰Squareã€Tanhç­‰è¿™äº›å•è¾“å…¥å¯¹è‡ªèº«å¤„ç†çš„ç®—å­<br>å¤–,å…¶å®ƒéœ€è¦æ…ç”¨ã€‚</p><ul><li><p>å°è¯•ä½¿ç”¨è¾ƒå¤šçš„é‡åŒ–å›¾åƒ<br>æ— æ•ˆ</p></li><li><p>æœ€ç»ˆè§£å†³åŠæ³•<br>åœ¨åŠ¨æ€aippçš„æƒ…å†µä¸‹éœ€è¦é…ç½®å½’ä¸€åŒ–å‚æ•°<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E6%B5%B7%E6%80%9D%E7%A7%BB%E6%A4%8D%E7%AC%94%E8%AE%B0/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_17422589229639.png" alt="alt text"></p></li><li><p>ä½¿ç”¨MSITå·¥å…·æ’æŸ¥OMæ¨¡å‹ç²¾åº¦é—®é¢˜<br><a href="https://www.hiascend.com/forum/thread-0219168838054191038-1-1.html">ä½¿ç”¨MSITå·¥å…·æ’æŸ¥OMæ¨¡å‹ç²¾åº¦é—®é¢˜</a></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone https://gitee.com/ascend/msit.git<span class="token comment"># 1. git pull origin æ›´æ–°æœ€æ–°ä»£ç  </span><span class="token builtin class-name">cd</span> msit/msit<span class="token comment"># 2. å®‰è£… msit åŒ…</span>pip <span class="token function">install</span> <span class="token builtin class-name">.</span><span class="token comment"># 3. é€šè¿‡msit install å‘½ä»¤,å®‰è£…æ‰€éœ€ç»„ä»¶,ä¾‹å¦‚éœ€è¦å®‰è£… benchmark å’Œ compare æ—¶:</span>msit <span class="token function">install</span> benchmark compare<span class="token comment"># 4. å¦‚æœéœ€è¦å®‰è£…æ‰€æœ‰ç»„ä»¶,å¯ä»¥ä½¿ç”¨ install all:</span>msit <span class="token function">install</span> all<span class="token comment"># 5. å®‰è£…ä¹‹åå¯ä»¥ä½¿ç”¨ msit check å‘½ä»¤æ£€æŸ¥å®‰è£…æ˜¯å¦æˆåŠŸ:</span>msit check all <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h1 id="mindcmdä½¿ç”¨"><a href="#mindcmdä½¿ç”¨" class="headerlink" title="mindcmdä½¿ç”¨"></a>mindcmdä½¿ç”¨</h1><ul><li><p>é€šè¿‡dumpæ•°æ®åˆ†ææ¨¡å‹ç²¾åº¦<br>å‚è€ƒæ–‡æ¡£ï¼šã€ŠMindCmd ä½¿ç”¨æŒ‡å—.pdfã€‹</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">mindcmd compare <span class="token parameter variable">-l</span> /wsy_10/.geiyiren/HQ_Hi3519DV500/model_val/.cache/dataset/dsm_keypoints_01/dump_om/20250309103129/0/dsm_keypoints_val/38/0 <span class="token parameter variable">-r</span> /wsy_10/.geiyiren/HQ_Hi3519DV500/model_val/.cache/test/dump_onnx/2025031003282183_ops  <span class="token parameter variable">-out</span> /wsy_10/.geiyiren/HQ_Hi3519DV500/model_val/.cache/test/compare  <span class="token parameter variable">-q</span> /wsy_10/.geiyiren/HQ_Hi3519DV500/model_val/.cache/models/dsm/keypoints/dsm_keypoints_val.json <span class="token parameter variable">-om</span> /wsy_10/.geiyiren/HQ_Hi3519DV500/model_val/.cache/models/dsm/keypoints/dsm_keypoints_val.om<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>æ¨¡å‹è¾“å…¥npyæˆ–binæ–‡ä»¶ç”Ÿæˆ</p><pre class="line-numbers language-none"><code class="language-none">mindcmd preprocess --model_input_shape 1,3,112,112 --aipp &#x2F;wsy_10&#x2F;.geiyiren&#x2F;HQ_Hi3519DV500&#x2F;model_val&#x2F;.cache&#x2F;test&#x2F;aipp_pub.cfg -i &#x2F;wsy_10&#x2F;.geiyiren&#x2F;HQ_Hi3519DV500&#x2F;model_val&#x2F;.cache&#x2F;test&#x2F;imglist.txt  -o &#x2F;wsy_10&#x2F;.geiyiren&#x2F;HQ_Hi3519DV500&#x2F;model_val&#x2F;.cache&#x2F;test&#x2F;preprocess_output&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>onnxæ¨¡å‹dumoæ•°æ®ç”Ÿæˆ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">mindcmd gt onnx <span class="token parameter variable">-m</span> /wsy_10/.geiyiren/HQ_Hi3519DV500/model_val/models/dsm/keypoints/temp/dsm_keypoints.onnx <span class="token parameter variable">-i</span> /wsy_10/.geiyiren/HQ_Hi3519DV500/model_val/.cache/test/preprocess_output/input0_validation_npy_FP32.txt <span class="token parameter variable">-o</span> /wsy_10/.geiyiren/HQ_Hi3519DV500/model_val/.cache/test/dump_onnx<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>omæ¨¡å‹ç”Ÿæˆdumpæ•°æ®(pcä»¿çœŸ)</p><pre class="line-numbers language-none"><code class="language-none">app funcsim -m ..&#x2F;models&#x2F;dsm&#x2F;keypoints&#x2F;dsm_keypoints_val_original.om  -i &#x2F;wsy_10&#x2F;.geiyiren&#x2F;HQ_Hi3519DV500&#x2F;model_val&#x2F;.cache&#x2F;test&#x2F;preprocess_output&#x2F;input0_validation_bin_U8.txt dump --output &#x2F;wsy_10&#x2F;.geiyiren&#x2F;HQ_Hi3519DV500&#x2F;model_val&#x2F;.cache&#x2F;test&#x2F;dump_om<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">for</span> <span class="token punctuation">(</span>size_t dt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> dt <span class="token operator">&lt;</span> data<span class="token punctuation">.</span>output_data<span class="token operator">-></span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> dt<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    ai<span class="token double-colon punctuation">::</span>OutputDataSt<span class="token operator">*</span> ds <span class="token operator">=</span> data<span class="token punctuation">.</span>output_data<span class="token operator">-></span><span class="token function">at</span><span class="token punctuation">(</span>dt<span class="token punctuation">)</span><span class="token punctuation">;</span>    feature_size_h_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span> <span class="token operator">=</span> ds<span class="token operator">-></span>dims<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token function">LOGI</span><span class="token punctuation">(</span>TAG <span class="token string">"feature_size_h_[dt] = %d\n"</span><span class="token punctuation">,</span> feature_size_h_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    feature_size_w_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span> <span class="token operator">=</span> ds<span class="token operator">-></span>dims<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token function">LOGI</span><span class="token punctuation">(</span>TAG <span class="token string">"feature_size_w_[dt] = %d\n"</span><span class="token punctuation">,</span> feature_size_w_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">LOGI</span><span class="token punctuation">(</span>TAG <span class="token string">"feature_length_ = %d\n"</span><span class="token punctuation">,</span> feature_length_<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">LOGI</span><span class="token punctuation">(</span>TAG <span class="token string">"num_classes_ = %d\n"</span><span class="token punctuation">,</span> num_classes_<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">LOGI</span><span class="token punctuation">(</span>TAG <span class="token string">"shrink_channels_ = %f\n"</span><span class="token punctuation">,</span> shrink_channels_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">float</span><span class="token operator">*</span>        ptr <span class="token operator">=</span> ds<span class="token operator">-></span>output<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">float</span><span class="token operator">*</span> center_x <span class="token operator">=</span> ptr <span class="token operator">+</span> feature_size_w_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span> <span class="token operator">*</span> feature_size_h_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">*</span> feature_length_ <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">float</span><span class="token operator">*</span> center_y <span class="token operator">=</span> ptr <span class="token operator">+</span> feature_size_w_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span> <span class="token operator">*</span> feature_size_h_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">*</span> feature_length_ <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">float</span><span class="token operator">*</span> width <span class="token operator">=</span> ptr <span class="token operator">+</span> feature_size_w_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span> <span class="token operator">*</span> feature_size_h_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">*</span> feature_length_ <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">float</span><span class="token operator">*</span> height <span class="token operator">=</span> ptr <span class="token operator">+</span> feature_size_w_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span> <span class="token operator">*</span> feature_size_h_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">*</span> feature_length_ <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">float</span><span class="token operator">*</span> pred_conf <span class="token operator">=</span> ptr <span class="token operator">+</span> feature_size_w_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span> <span class="token operator">*</span> feature_size_h_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">*</span> feature_length_ <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">float</span><span class="token operator">*</span> pred_cls<span class="token punctuation">[</span>num_classes_<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> cls <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> cls <span class="token operator">&lt;</span> num_classes_<span class="token punctuation">;</span> cls<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            pred_cls<span class="token punctuation">[</span>cls<span class="token punctuation">]</span> <span class="token operator">=</span> ptr <span class="token operator">+</span> feature_size_w_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span> <span class="token operator">*</span> feature_size_h_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">*</span> feature_length_ <span class="token operator">+</span> <span class="token number">5</span> <span class="token operator">+</span> cls<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> h <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> h <span class="token operator">&lt;</span> feature_size_h_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span><span class="token punctuation">;</span> h<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> w <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> w <span class="token operator">&lt;</span> feature_size_w_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span><span class="token punctuation">;</span> w<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                <span class="token keyword">int</span> j <span class="token operator">=</span> h <span class="token operator">*</span> feature_size_w_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span> <span class="token operator">+</span> w<span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span>pred_conf <span class="token operator">+</span> j<span class="token punctuation">)</span> <span class="token operator">></span> min_score_<span class="token punctuation">)</span>                <span class="token punctuation">&#123;</span>                    <span class="token keyword">float</span> max_cls_conf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                    <span class="token keyword">int</span>   max_cls_index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> cls <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> cls <span class="token operator">&lt;</span> num_classes_<span class="token punctuation">;</span> cls<span class="token operator">++</span><span class="token punctuation">)</span>                    <span class="token punctuation">&#123;</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>max_cls_conf <span class="token operator">&lt;</span> <span class="token operator">*</span><span class="token punctuation">(</span>pred_cls<span class="token punctuation">[</span>cls<span class="token punctuation">]</span> <span class="token operator">+</span> j<span class="token punctuation">)</span><span class="token punctuation">)</span>                        <span class="token punctuation">&#123;</span>                            max_cls_conf <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span>pred_cls<span class="token punctuation">[</span>cls<span class="token punctuation">]</span> <span class="token operator">+</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>                            max_cls_index <span class="token operator">=</span> cls<span class="token punctuation">;</span>                        <span class="token punctuation">&#125;</span>                    <span class="token punctuation">&#125;</span>                    tmp_box<span class="token punctuation">.</span>anchor <span class="token operator">=</span> i<span class="token punctuation">;</span>                    tmp_box<span class="token punctuation">.</span>feature_pointI <span class="token operator">=</span> w<span class="token punctuation">;</span>                    tmp_box<span class="token punctuation">.</span>feature_pointJ <span class="token operator">=</span> h<span class="token punctuation">;</span>                    tmp_box<span class="token punctuation">.</span>pred_conf <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span>pred_conf <span class="token operator">+</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>                    tmp_box<span class="token punctuation">.</span>pred_cls <span class="token operator">=</span> labels_<span class="token punctuation">[</span>max_cls_index<span class="token punctuation">]</span><span class="token punctuation">;</span>                    tmp_box<span class="token punctuation">.</span>pred_cls_idx <span class="token operator">=</span> max_cls_index<span class="token punctuation">;</span>                    tmp_box<span class="token punctuation">.</span>xmin <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span>center_x <span class="token operator">+</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>                    tmp_box<span class="token punctuation">.</span>ymin <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span>center_y <span class="token operator">+</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>                    tmp_box<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span>width <span class="token operator">+</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>                    tmp_box<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span>height <span class="token operator">+</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>                    tmp_box<span class="token punctuation">.</span>xmin <span class="token operator">=</span> <span class="token punctuation">(</span>tmp_box<span class="token punctuation">.</span>xmin <span class="token operator">*</span> <span class="token number">2.</span> <span class="token operator">-</span> <span class="token number">0.5</span> <span class="token operator">+</span> tmp_box<span class="token punctuation">.</span>feature_pointI<span class="token punctuation">)</span> <span class="token operator">*</span> shrink_channels_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span><span class="token punctuation">;</span>                    tmp_box<span class="token punctuation">.</span>ymin <span class="token operator">=</span> <span class="token punctuation">(</span>tmp_box<span class="token punctuation">.</span>ymin <span class="token operator">*</span> <span class="token number">2.</span> <span class="token operator">-</span> <span class="token number">0.5</span> <span class="token operator">+</span> tmp_box<span class="token punctuation">.</span>feature_pointJ<span class="token punctuation">)</span> <span class="token operator">*</span> shrink_channels_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span><span class="token punctuation">;</span>                    tmp_box<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token punctuation">(</span>tmp_box<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>tmp_box<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> anchor_w_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span><span class="token punctuation">[</span>tmp_box<span class="token punctuation">.</span>anchor<span class="token punctuation">]</span><span class="token punctuation">;</span>                    tmp_box<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token punctuation">(</span>tmp_box<span class="token punctuation">.</span>height <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>tmp_box<span class="token punctuation">.</span>height <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> anchor_h_<span class="token punctuation">[</span>dt<span class="token punctuation">]</span><span class="token punctuation">[</span>tmp_box<span class="token punctuation">.</span>anchor<span class="token punctuation">]</span><span class="token punctuation">;</span>                    tmp_box<span class="token punctuation">.</span>xmin <span class="token operator">=</span> tmp_box<span class="token punctuation">.</span>xmin <span class="token operator">-</span> <span class="token keyword">int</span><span class="token punctuation">(</span>tmp_box<span class="token punctuation">.</span>width  <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    tmp_box<span class="token punctuation">.</span>ymin <span class="token operator">=</span> tmp_box<span class="token punctuation">.</span>ymin <span class="token operator">-</span> <span class="token keyword">int</span><span class="token punctuation">(</span>tmp_box<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    real_available_boxes<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>tmp_box<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å·²ç»è®¾ç½®è®¾å¤‡å’Œcontextï¼Œä½†ä»æ—§æŠ¥é”™çš„è§£å†³åŠæ³•"><a href="#å·²ç»è®¾ç½®è®¾å¤‡å’Œcontextï¼Œä½†ä»æ—§æŠ¥é”™çš„è§£å†³åŠæ³•" class="headerlink" title="å·²ç»è®¾ç½®è®¾å¤‡å’Œcontextï¼Œä½†ä»æ—§æŠ¥é”™çš„è§£å†³åŠæ³•"></a>å·²ç»è®¾ç½®è®¾å¤‡å’Œcontextï¼Œä½†ä»æ—§æŠ¥é”™çš„è§£å†³åŠæ³•</h1><p>é”™è¯¯æç¤ºå¦‚ä¸‹ï¼š<br>[Func]:svp_npu_runtime_impl_execute_model [Line]:1773 [Info]:Error, get cur ctx failed when execute model, please set device or create context first<br>è§£å†³åŠæ³•ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// create context (set current)</span>svp_acl_error err_ret <span class="token operator">=</span> <span class="token function">svp_acl_rt_set_current_context</span><span class="token punctuation">(</span>context_<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>err_ret <span class="token operator">!=</span> SVP_ACL_SUCCESS<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">ERROR_LOG</span><span class="token punctuation">(</span><span class="token string">"acl create context failed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> FAILED<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>éœ€è¦åœ¨æ¯æ¬¡æ¨ç†å‰è®¾ç½®ä¸Šä¸‹æ–‡</p><h1 id="æ•°æ®é‡åŒ–å’Œæƒé‡é‡åŒ–"><a href="#æ•°æ®é‡åŒ–å’Œæƒé‡é‡åŒ–" class="headerlink" title="æ•°æ®é‡åŒ–å’Œæƒé‡é‡åŒ–"></a>æ•°æ®é‡åŒ–å’Œæƒé‡é‡åŒ–</h1><ul><li><p>æ•°æ®é‡åŒ–<br>æ•°æ®é‡åŒ–æ˜¯å¯¹æ¯ä¸ªå¾…é‡åŒ–çš„å±‚&#x2F;ç®—å­çš„è¾“å…¥æ•°æ®è¿›è¡Œç»Ÿè®¡ï¼Œæ¯ä¸ªå±‚&#x2F;ç®—å­è®¡ç®—å‡ºæœ€ä¼˜çš„ä¸€ç»„scaleå’Œoffsetã€‚æ•°æ®æ˜¯æ¨¡å‹æ¨ç†è®¡ç®—çš„ä¸­é—´ç»“æœï¼Œå…¶èŒƒå›´ä¸æ¨¡å‹è¾“å…¥ç›¸å…³ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ä¸€ç»„å‚è€ƒè¾“å…¥ï¼ˆæ ¡å‡†æ•°æ®é›†ï¼‰ä½œä¸ºæ¿€åŠ±ï¼Œä»è€Œè®°å½•ä¸‹æ¥å¾…é‡åŒ–å±‚&#x2F;ç®—å­çš„è¾“å…¥æ•°æ®ï¼Œæœç´¢å¾—åˆ°é‡åŒ–å› å­ï¼ˆscaleå’Œoffsetï¼‰ã€‚ç”±äºåœ¨åšæ•°æ®calibrationçš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å ç”¨é¢å¤–çš„å­˜å‚¨ç©ºé—´ï¼ˆæ˜¾å­˜&#x2F;å†…å­˜ï¼‰æ¥å­˜å‚¨ç”¨äºç¡®å®šé‡åŒ–å› å­çš„è¾“å…¥æ•°æ®ï¼Œæ‰€ä»¥å¯¹äºæ˜¾å­˜&#x2F;å†…å­˜çš„å ç”¨ï¼Œæ¯”ä»…æ¨ç†çš„è¿‡ç¨‹è¦é«˜ï¼Œé¢å¤–å ç”¨ç©ºé—´çš„å¤§å°å’Œcalibrationè¿‡ç¨‹ä¸­çš„batch_size* batch_numæ­£ç›¸å…³ã€‚<br>é‡åŒ–çš„è®¡ç®—å…¬å¼ï¼š<br>$$<br>\mathrm{data}<em>{\mathrm{int}8}&#x3D;\mathrm{clip}</em>{\mathrm{int}8}\left(\mathrm{round}(\frac{\mathrm{data}_{\mathrm{float}}}{\mathrm{scale}})+\mathrm{offset}\right)<br>$$<br>å…¶ä¸­,<br>$$<br>\begin{align}<br>\mathrm{scale}\in\left[\mathrm{FLT_EPSILON,}\frac1{\mathrm{FLT_EPSILON}}\right],\mathrm{FLT_EPSILON}\approx1.1920929\times10^{-7}<br>\end{align}<br>$$<br>$$<br>\mathrm{offset}\in[-128,127]<br>$$</p></li><li><p>æƒé‡é‡åŒ–<br>è®­ç»ƒåæ¨¡å‹çš„æƒå€¼å·²ç»ç¡®å®šï¼Œæ•°å€¼çš„èŒƒå›´ä¹Ÿå·²ç»ç¡®å®šï¼Œå› æ­¤ç›´æ¥æ ¹æ®æƒå€¼çš„æ•°æ®èŒƒå›´è¿›è¡Œé‡åŒ–ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> æµ·æ€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æµ·æ€ </tag>
            
            <tag> æ¨¡å‹éƒ¨ç½² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºå¡å°”æ›¼æ»¤æ³¢ç®—æ³•çš„è½¦é“çº¿æ›²çº¿å‚æ•°è·Ÿè¸ª</title>
      <link href="/2024/12/18/ji-yu-qia-er-man-lu-bo-suan-fa-de-che-dao-xian-qu-xian-can-shu-gen-zong/"/>
      <url>/2024/12/18/ji-yu-qia-er-man-lu-bo-suan-fa-de-che-dao-xian-qu-xian-can-shu-gen-zong/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h1><h2 id="æ›²ç‡"><a href="#æ›²ç‡" class="headerlink" title="æ›²ç‡"></a>æ›²ç‡</h2><p>æ›²ç‡$k$å¯ä»¥è¡¨ç¤ºä¸ºæ›²çº¿é•¿åº¦éšç€è§’åº¦å˜åŒ–çš„å¿«æ…¢ï¼Œå³ï¼š<br>$$<br>\begin{equation}<br>k&#x3D;\lim_{\alpha\to0}\left|\frac{\Delta\alpha}{\Delta s}\right|<br>\end{equation}<br>$$<br>$$<br>\begin{equation}<br>k &#x3D; \frac{d\alpha}{ds}<br>\end{equation}<br>$$</p><p>å…¶ä¸­ï¼Œ$\alpha$ä¸ºæ›²çº¿çš„åˆ‡çº¿ä¸xè½´çš„å¤¹è§’ï¼Œ$s$ä¸ºæ›²çº¿çš„é•¿åº¦ã€‚</p><p>é¦–å…ˆç»™å‡ºç»“è®ºï¼Œç„¶åå†è¿›è¡Œè¯¦ç»†æ¨å¯¼ã€‚æ›²ç‡åŠå¾„$R$å¯ä»¥è¡¨ç¤ºä¸ºï¼š<br>$$<br>\begin{equation}<br>R&#x3D;\frac1k&#x3D;\frac{\left[1+\left(\frac{dy}{dx}\right)^2\right]^{\frac32}}{\frac{d^2y}{dx^2}}&#x3D;\frac{\left[1+\left(f^{\prime}\right)^2\right]^{\frac32}}{f^{\prime\prime}}<br>\end{equation}<br>$$</p><p>ä¸‹é¢è¿›è¡Œè¯¦ç»†çš„æ¨å¯¼ï¼Œé¦–å…ˆéœ€è¦çŸ¥é“æ›²çº¿çš„å¼§é•¿å…¬å¼ï¼Œæˆ‘ä»¬å°†æ›²çº¿çš„æ–¹ç¨‹è¡¨ç¤ºä¸º$y&#x3D;f(x)$ï¼š</p><p>æ›²çº¿å¼§é•¿çš„è®¡ç®—å…¬å¼ä¸ºï¼š<br>$$<br>\begin{equation}<br>ds&#x3D;\sqrt{(dx)^2+(dy)^2}<br>\end{equation}<br>$$</p><p>$$<br>\begin{equation}<br>dy&#x3D;y^{\prime}dx<br>\end{equation}<br>$$</p><p>$$<br>\begin{equation}<br>ds&#x3D;\sqrt{1+(y^{\prime})^2}dx<br>\end{equation}<br>$$<br>è®°ä½ä¸Šè¿°å…¬å¼ä¸‹é¢è¦ç”¨</p><blockquote><p>è¿›ä¸€æ­¥è§£é‡Šï¼Œå¼§é•¿çš„è®¡ç®—å¯ä»¥é€šè¿‡ç§¯åˆ†å¾—åˆ°ï¼š<br>$$<br>s&#x3D;\int\sqrt{1+(y^{\prime})^2}dx<br>$$</p></blockquote><p>æ›²çº¿çš„æ–¹ç¨‹è¡¨ç¤ºä¸º$y&#x3D;f(x)$ï¼Œä¸”$f(x)$å…·æœ‰äºŒé˜¶å¯¼æ•°ã€‚å› ä¸º$tan(\alpha)&#x3D;y^{\prime}$,è®¾$-\pi&#x2F;2&lt;\alpha&lt;\pi&#x2F;2$,åˆ™ï¼š<br>$$<br>\begin{equation}<br>\alpha&#x3D;\arctan(y^{\prime})<br>\end{equation}<br>$$</p><p>$$<br>\begin{equation}<br>\frac{d\alpha}{dx}&#x3D;\left(arctany^{\prime}\right)^{\prime}<br>\end{equation}<br>$$</p><p>$$<br>\begin{equation}<br>d\alpha&#x3D;\left(\arctan y^{\prime}\right)^{\prime}dx&#x3D;\frac{y^{\prime\prime}}{1+{y^{\prime}}^2}dx<br>\end{equation}<br>$$</p><p>åˆ™ï¼š</p><p>$$<br>\begin{equation}<br>k &#x3D; \frac{d\alpha}{ds}<br>\end{equation}<br>$$</p><p>$$<br>\begin{equation}<br>\frac{d\alpha}{ds}&#x3D;\frac{\frac{y^{\prime\prime}}{1+{y^{\prime}}^2}dx}{\sqrt{1+(y^{\prime})^2}dx} \\<br>\end{equation}<br>$$</p><p>$$<br>\begin{equation}<br>\frac{d\alpha}{ds}&#x3D;\frac{\frac{y^{\prime\prime}}{1+{y^{\prime}}^2}}{\sqrt{1+(y^{\prime})^2}} \\<br>\end{equation}<br>$$</p><p>$$<br>\begin{equation}<br>\mathbf{k}&#x3D;\frac{d\alpha}{ds}&#x3D;\frac{y^{\prime\prime}}{\left[1+\left(y^{\prime}\right)^{2}\right]^{\frac32}}<br>\end{equation}<br>$$</p><p>å¯ä»¥çœ‹å‡ºï¼Œæ›²ç‡$k$ä¸æ›²çº¿çš„æ–¹ç¨‹$y&#x3D;f(x)$æœ‰å…³ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¡ç®—æ›²çº¿çš„æ–¹ç¨‹æ¥å¾—åˆ°æ›²ç‡$k$ã€‚</p><h2 id="æ›²ç‡å’Œæ¨ªæ‘†è§’é€Ÿåº¦çš„å…³ç³»"><a href="#æ›²ç‡å’Œæ¨ªæ‘†è§’é€Ÿåº¦çš„å…³ç³»" class="headerlink" title="æ›²ç‡å’Œæ¨ªæ‘†è§’é€Ÿåº¦çš„å…³ç³»"></a>æ›²ç‡å’Œæ¨ªæ‘†è§’é€Ÿåº¦çš„å…³ç³»</h2><p>æŒ‰ç…§æƒ¯ä¾‹ï¼Œå…ˆç»™å‡ºç»“è®ºï¼Œå†è¿›è¡Œæ¨å¯¼ã€‚</p><p>$$<br>\begin{equation}<br>k &#x3D; \frac{d\alpha}{ds} \approx \frac{\omega}{v_{x}}<br>\end{equation}<br>$$</p><p>å…¶ä¸­ï¼Œ$\omega$ä¸ºæ¨ªæ‘†è§’é€Ÿåº¦ï¼Œ$v_{x}$ä¸ºè½¦è¾†è¡Œé©¶é€Ÿåº¦(çºµå‘)</p><p>åœ¨è‡ªåŠ¨é©¾é©¶ç³»ç»Ÿä¸­ï¼Œé€šè¿‡æµ‹é‡è½¦è¾†çš„é€Ÿåº¦å’Œè½¨è¿¹çš„æ›²ç‡ï¼Œå¯ä»¥é¢„æµ‹å’Œæ§åˆ¶è½¦è¾†çš„æ¨ªæ‘†è§’é€Ÿåº¦ï¼Œç¡®ä¿è½¦è¾†ç¨³å®šåœ°æ²¿ç€æ›²çº¿è¡Œé©¶ã€‚å› æ­¤ï¼Œæ›²ç‡ä¸æ¨ªæ‘†è§’é€Ÿåº¦ä¹‹é—´çš„å…³ç³»åœ¨è‡ªåŠ¨é©¾é©¶ç³»ç»Ÿä¸­å…·æœ‰é‡è¦æ„ä¹‰ã€‚</p><p>ç”±äºè½¦è¾†ç›´çº¿è¡Œé©¶æ—¶ï¼Œè½¦è¾†çš„è¿åŠ¨è½¨è¿¹è¿‘ä¹ä¸ºåœ†å½¢ï¼Œä¸”åŠå¾„å¾ˆå¤§ï¼Œè½¦è¾†åœ¨çŸ­æ—¶é—´å†…èµ°è¿‡çš„å¼§é•¿å’Œè½¦è¾†è¡Œé©¶çš„è·ç¦»åŸºæœ¬ç›¸ç­‰ï¼Œå› æ­¤å¯ä»¥è¿‘ä¼¼è®¤ä¸ºï¼š</p><p>$$<br>\begin{equation}<br>ds\approx dx<br>\end{equation}<br>$$</p><p>$$<br>\begin{equation}<br>\frac{d\alpha}{dx}\approx\frac{d\alpha}{ds}<br>\end{equation}<br>$$<br>æ ¹æ®æ¨ªæ‘†è§’é€Ÿåº¦å’Œè¡Œé©¶é€Ÿåº¦çš„å®šä¹‰æœ‰ï¼š</p><p>$$<br>\begin{equation}<br>\frac{d\alpha&#x2F;dt}{ds&#x2F;dt}&#x3D;\frac{\omega}{v_{x}}<br>\end{equation}<br>$$</p><p>ç»¼ä¸Šå¯å¾—:<br>$$<br>\begin{equation}<br>k &#x3D; \frac{d\alpha}{ds}\approx\frac{\omega}{v_{x}}<br>\end{equation}<br>$$</p><h2 id="æ›²ç‡å’Œè½¦è¾†æ¨ªå‘åç§»çš„å…³ç³»"><a href="#æ›²ç‡å’Œè½¦è¾†æ¨ªå‘åç§»çš„å…³ç³»" class="headerlink" title="æ›²ç‡å’Œè½¦è¾†æ¨ªå‘åç§»çš„å…³ç³»"></a>æ›²ç‡å’Œè½¦è¾†æ¨ªå‘åç§»çš„å…³ç³»</h2><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŠå¾„ä¸º$R$çš„åœ†å¼§ï¼Œåœ†å¿ƒä¸º$O$ï¼Œè€Œè½¦è¾†å½“å‰çš„ä½ç½®ä¸º$P$ï¼Œå®ƒçš„è·ç¦»åœ†å¿ƒ$O$çš„åŸå§‹è·ç¦»ä¸º$R$ï¼Œä½†ç”±äºæŸç§åŸå› ï¼Œè½¦è¾†ç›¸å¯¹äºåœ†å¿ƒ$O$åœ¨æ°´å¹³å’Œå‚ç›´æ–¹å‘ä¸Šå‘ç”Ÿäº†åç§»,$dx$æ˜¯è½¦è¾†åœ¨æ°´å¹³æ–¹å‘ä¸Šçš„åç§»é‡ã€‚$dy$æ˜¯è½¦è¾†åœ¨å‚ç›´æ–¹å‘ä¸Šçš„åç§»é‡ã€‚$R$ æ˜¯è½¦è¾†åŸå§‹æ‰€åœ¨åœ†å¼§çš„åŠå¾„ï¼Œå³è½¦è¾†åˆ°åœ†å¿ƒ$O$ çš„è·ç¦»ã€‚ç°åœ¨æˆ‘ä»¬è€ƒè™‘è½¦è¾†çš„å®é™…ä½ç½®ä¸åŸæœ¬çš„åœ†å¿ƒä½ç½®ä¹‹é—´çš„å…³ç³»ã€‚</p><p>å‡è®¾è½¦è¾†çš„å®é™…ä½ç½®åç§»åï¼Œè½¦è¾†çš„æ–°ä½ç½®ä¸åŸæœ¬çš„åœ†å¿ƒä¹‹é—´çš„å‡ ä½•å…³ç³»å¦‚ä¸‹ï¼š</p><ul><li>è½¦è¾†åŸæœ¬çš„ä½ç½®æ˜¯$P$ï¼Œå®ƒä¸åœ†å¿ƒ$O$çš„è·ç¦»æ˜¯$R$ã€‚</li><li>è½¦è¾†å®é™…çš„åç§»é‡æ˜¯$dx$(æ°´å¹³æ–¹å‘)å’Œ$dy$(å‚ç›´æ–¹å‘)ã€‚</li></ul><p>é€šè¿‡åæ ‡ç³»çš„å‡ ä½•å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»¥ä¸‹æ–¹ç¨‹æ¥æè¿°è¿™ç§åç§»ï¼š</p><ul><li>åŸå§‹æƒ…å†µä¸‹ï¼Œè½¦è¾†ä¸åœ†å¿ƒçš„è·ç¦»ä¸ºRã€‚</li><li>è½¦è¾†çš„å®é™…ä½ç½®åç§»ï¼šå‡è®¾è½¦è¾†åœ¨ç»è¿‡$dx$å’Œ$dy$çš„åç§»åï¼Œè½¦è¾†ä¸åœ†å¿ƒçš„è·ç¦»ä¸å†æ˜¯R,è€Œå˜æˆäº†ä¸€ä¸ªæ–°çš„è·ç¦»ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ¯•è¾¾å“¥æ‹‰æ–¯å®šç†æ¥æè¿°è¿™ä¸ªåç§»ã€‚</li></ul><p>åœ¨ç›´è§’åæ ‡ç³»ä¸­ï¼Œè½¦è¾†åŸæ¥ä¸åœ†å¿ƒçš„è·ç¦»ä¸º$R$,ç°åœ¨çš„å®é™…ä½ç½®$P^{\prime}$ä¸åœ†å¿ƒOçš„è·ç¦»ä¸ºæ–°çš„å€¼ã€‚å› ä¸ºè½¦è¾†çš„åç§»åœ¨$x$å’Œ$y$æ–¹å‘ä¸Šæ˜¯ç›´è§’çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ¯•è¾¾å“¥æ‹‰æ–¯å®šç†è®¡ç®—è½¦è¾†åç§»åçš„å®é™…è·ç¦»ã€‚<br>å‡è®¾è½¦è¾†ä»åŸå§‹ä½ç½®åç§»åˆ°æ–°ä½ç½®ï¼Œæˆ‘ä»¬æœ‰ï¼š</p><p>$$<br>\begin{equation}<br>\text{æ–°è·ç¦»}&#x3D;\sqrt{(R-dy)^2+(dx)^2}<br>\end{equation}<br>$$</p><p>è¿™ä¸ªæ–°è·ç¦»åº”è¯¥ä¸åŸå§‹çš„$R$ä¿æŒä¸€è‡´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè½¦è¾†åœ¨è¡Œé©¶çš„æ—¶å€™æ— ä¾§å‘æ»‘åŠ¨ï¼Œé‚£ä¹ˆï¼š</p><p>$$<br>\begin{equation}<br>R^2&#x3D;(R-dy)^2+(dx)^2.<br>\end{equation}<br>$$</p><p>$$<br>\begin{equation}<br>R^2&#x3D;R^2-2Rdy+(dy)^2+(dx)^2.<br>\end{equation}<br>$$</p><p>åœ¨è½¦è¾†ç›´çº¿è¡Œé©¶æ—¶ï¼Œè½¦è¾†çš„è¿åŠ¨è½¨è¿¹è¿‘ä¹ä¸ºåœ†å½¢ï¼Œä¸”åŠå¾„å¾ˆå¤§ï¼Œå› æ­¤$dy$å¾ˆå°ï¼Œé‚£ä¹ˆ$(dy)^2$å°±æ˜¯äºŒé˜¶æ— ç©·å°ï¼Œå¯ä»¥å¿½ç•¥ä¸è®°ï¼š<br>$$<br>\begin{equation}<br>2Rdy&#x3D;(dx)^2.<br>\end{equation}<br>$$</p><p>$$<br>\begin{equation}<br>dy&#x3D;\frac1{2R}(dx)^2<br>\end{equation}<br>$$</p><p>æ›²ç‡åŠå¾„å’Œæ›²ç‡çš„å…³ç³»ä¸ºï¼š<br>$$<br>\begin{equation}<br>k&#x3D;\frac1R<br>\end{equation}<br>$$</p><p>åˆ™ï¼š</p><p>$$<br>\begin{equation}<br>dy&#x3D;\frac{1}{2}k(dx)^2<br>\end{equation}<br>$$</p><p>ç»¼å’Œæ›²ç‡å’Œè½¦è¾†æ¨ªå‘åç§»çš„å…³ç³»ä»¥åŠæ›²ç‡å’Œæ¨ªæ‘†è§’é€Ÿåº¦çš„å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ï¼š</p><p>$$<br>\begin{equation}<br>k &#x3D; \frac{d\alpha}{ds} \approx\frac{\omega}{v_{x}}<br>\end{equation}<br>$$</p><p>$$<br>\begin{equation}<br>dy&#x3D;\frac{1}{2}\frac{\omega}{v_{x}}(dx)^2<br>\end{equation}<br>$$</p><h1 id="æ³°å‹’å±•å¼€å¼"><a href="#æ³°å‹’å±•å¼€å¼" class="headerlink" title="æ³°å‹’å±•å¼€å¼"></a>æ³°å‹’å±•å¼€å¼</h1><p>è‹¥å‡½æ•°$f(x)$åœ¨åŒ…å«$x0$çš„æŸä¸ªé—­åŒºé—´$[a,b]$ä¸Šå…·æœ‰$n$é˜¶å¯¼æ•°ï¼Œä¸”åœ¨å¼€åŒºé—´$(a,b)$ä¸Šå…·æœ‰$(n+1)$é˜¶å¯¼æ•°ï¼Œåˆ™å¯¹é—­åŒºé—´$[a,b]$ä¸Šä»»æ„ä¸€ç‚¹$x$ï¼Œæˆç«‹ä¸‹å¼ï¼š</p><p>$$<br>\begin{equation}<br>f\left(x\right)&#x3D;\frac{f\left(x_{0}\right)}{0!}+\frac{f^{\prime}(x_{0})}{1!}\left(x-x_{0}\right)+\frac{f^{\prime\prime}(x_{0})}{2!}\left(x-x_{0}\right)^{2}+â€¦+\frac{f^{(n)}\left(x_{0}\right)}{n!}\left(x-x_{0}\right)^{n}+R_{n}(x)<br>\end{equation}<br>$$</p><p>å…¶ä¸­ï¼Œ$f^{(n)}(x)$è¡¨ç¤º$f(x)$çš„$n$é˜¶å¯¼æ•°ï¼Œç­‰å·åçš„å¤šé¡¹å¼ç§°ä¸ºå‡½æ•°$f(x)$åœ¨$x0$å¤„çš„æ³°å‹’å±•å¼€å¼ï¼Œå‰©ä½™çš„$Rn(x)$æ˜¯æ³°å‹’å…¬å¼çš„ä½™é¡¹ï¼Œæ˜¯$(x-x0)n$çš„é«˜é˜¶æ— ç©·å°ã€‚<br>å¯¹äºä¸‰æ¬¡å‡½æ•°ï¼Œä½™é¡¹$R_n$ä¸ºé›¶ï¼Œå› ä¸ºä¸‰æ¬¡å‡½æ•°çš„å››é˜¶åŠä»¥ä¸Šå¯¼æ•°ä¸ºé›¶ã€‚å› æ­¤ï¼Œæ³°å‹’å±•å¼€å¼åœ¨æ­¤æƒ…å½¢ä¸‹æ— æˆªæ–­è¯¯å·®ã€‚</p><p>å¢é‡å½¢å¼çš„æ³°å‹’å±•å¼€å¼æ˜¯ä¸€ç§ç”¨äºæè¿°ä¸€ä¸ªå‡½æ•°åœ¨æŸç‚¹é™„è¿‘çš„å¢é‡å˜åŒ–çš„æ•°å­¦æ–¹æ³•ã€‚å¯¹äºä¸€ä¸ªå¯å¾®å‡½æ•°$f(x)$,å‡è®¾$x_0$æ˜¯æŸä¸ªå·²çŸ¥çš„ç‚¹ï¼Œ$d_{x}$æ˜¯ä»$x_0$åˆ°$x_0+d_{x}$çš„å¢é‡ï¼Œå¢é‡çš„æ³°å‹’å±•å¼€å¼ç»™å‡ºäº†$f(x_0+d_{x})$è¿‘ä¼¼äº$f(x_0)$çš„ä¸€ä¸ªå±•å¼€å¼ã€‚</p><p>$$<br>\begin{equation}<br>f(x_0+d_{x})&#x3D;f(x_0)+f^{\prime}(x_0)d_{x}+\frac{f^{\prime\prime}(x_0)}{2!}(d_{x})^2+\frac{f^{(3)}(x_0)}{3!}(d_{x})^3+\cdots<br>\end{equation}<br>$$</p><p>åœ¨å¡å°”æ›¼æ»¤æ³¢ä¸­ä¸€èˆ¬ä½¿ç”¨$t$å’Œ$t-1$è¡¨ç¤ºå½“å‰æ—¶åˆ»å’Œä¸Šä¸€æ—¶åˆ»ï¼Œæ³¨æ„è¿™é‡Œä¸¤ä¸ªæ—¶åˆ»çš„é—´éš”å¹¶ä¸æ˜¯1ï¼Œè€Œæ˜¯æŒ‡ç›¸é‚»ä¸¤æ¬¡çš„é‡‡æ ·ï¼Œé‡‡æ ·é—´éš”ä¹Ÿä¸ä¸€å®šç›¸åŒï¼Œæ‰€ä»¥$f(x_0)$ä¸º$x_0$ä½ç½®æˆ–$t-1$æ—¶åˆ»çš„é‡‡æ ·å€¼ï¼Œ$f(x_0+d_x)$ä¸ºåœ¨$x_0+d_x$ä½ç½®æˆ–$t$æ—¶åˆ»çš„é‡‡æ ·å€¼ï¼Œæ‰€ä»¥å¯ä»¥è¡¨ç¤ºä¸º:</p><p>$$<br>\begin{equation}<br>f(t)&#x3D;f(t-1)+f^{\prime}(t-1)d_{x}+\frac{f^{\prime\prime}(t-1)}{2!}(d_{x})^2+\frac{f^{(3)}(t-1)}{3!}(d_{x})^3+\cdots<br>\end{equation}<br>$$</p><p>æ³¨æ„è¿™é‡Œçš„$dx$ä¸ºä¸¤æ¬¡é‡‡æ ·é—´éš”ä¹‹é—´$x$çš„å˜åŒ–é‡ï¼Œå³$d_{x}&#x3D;v_{x}\Delta{t}$ã€‚</p><h2 id="å¡å°”æ›¼æ»¤æ³¢çš„äº”ä¸ªå…¬å¼"><a href="#å¡å°”æ›¼æ»¤æ³¢çš„äº”ä¸ªå…¬å¼" class="headerlink" title="å¡å°”æ›¼æ»¤æ³¢çš„äº”ä¸ªå…¬å¼"></a>å¡å°”æ›¼æ»¤æ³¢çš„äº”ä¸ªå…¬å¼</h2><ul><li><p>çŠ¶æ€é¢„æµ‹<br>$$<br>\begin{equation}<br>{\widehat{X}^{-}<em>t}&#x3D;A_t\widehat{X}</em>{t-1}+B_tu_t<br>\end{equation}<br>$$</p></li><li><p>çŠ¶æ€åæ–¹å·®é¢„æµ‹<br>$$<br>\begin{equation}<br>P_t^-&#x3D;F_tP_{t-1}F_t^T+Q_t<br>\end{equation}<br>$$</p></li><li><p>æ›´æ–°å¡å°”æ›¼å¢ç›Š<br>$$<br>\begin{equation}<br>K_t&#x3D;P_t^-H_t^T(H_tP_t^-H_t^T+R_t)^{-1}<br>\end{equation}<br>$$</p></li><li><p>æ›´æ–°çŠ¶æ€ä¼°è®¡<br>$$<br>\begin{equation}<br>\widehat{X}_t&#x3D;\widehat{X}_t^-+K_t(z_t-H\widehat{X}_t^-)<br>\end{equation}<br>$$</p></li><li><p>æ›´æ–°çŠ¶æ€åæ–¹å·®<br>$$<br>\begin{equation}<br>P_t&#x3D;(I-K_tH)P_t^-<br>\end{equation}<br>$$</p></li></ul><h1 id="è½¦é“çº¿æ›²çº¿å‚æ•°è·Ÿè¸ª"><a href="#è½¦é“çº¿æ›²çº¿å‚æ•°è·Ÿè¸ª" class="headerlink" title="è½¦é“çº¿æ›²çº¿å‚æ•°è·Ÿè¸ª"></a>è½¦é“çº¿æ›²çº¿å‚æ•°è·Ÿè¸ª</h1><p>é€šè¿‡ä¸Šè¿°çš„åˆ†æï¼ŒåŸºæœ¬ä¸Šå¯ä»¥å¯¹è½¦è¾†è¿åŠ¨æœ‰äº†åŸºæœ¬çš„äº†è§£ï¼Œæœ¬æ–‡çš„ç›®çš„æ˜¯ä½¿ç”¨å¡å°”æ›¼æ»¤æ³¢å¯¹è½¦é“çº¿çš„å‚æ•°è¿›è¡Œè·Ÿè¸ªï¼Œå› æ­¤ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥éœ€è¦ç¡®å®šå¡å°”æ›¼æ»¤æ³¢çš„æ¨¡å‹ã€‚</p><h2 id="å¡å°”æ›¼æ»¤æ³¢æ¨¡å‹"><a href="#å¡å°”æ›¼æ»¤æ³¢æ¨¡å‹" class="headerlink" title="å¡å°”æ›¼æ»¤æ³¢æ¨¡å‹"></a>å¡å°”æ›¼æ»¤æ³¢æ¨¡å‹</h2><p>å¡å°”æ›¼æ»¤æ³¢æ˜¯ä¸€ç§é€’å½’çš„å‚æ•°ä¼°è®¡æ–¹æ³•ï¼Œå®ƒé€šè¿‡é€’å½’åœ°è®¡ç®—å’Œæ›´æ–°ç³»ç»Ÿçš„çŠ¶æ€ä¼°è®¡ï¼Œå®ç°å¯¹åŠ¨æ€ç³»ç»Ÿçš„æœ€ä¼˜ä¼°è®¡ã€‚å¡å°”æ›¼æ»¤æ³¢çš„åŸºæœ¬æ€æƒ³æ˜¯åˆ©ç”¨ç³»ç»Ÿçš„åŠ¨æ€æ¨¡å‹å’Œè§‚æµ‹æ¨¡å‹ï¼Œé€šè¿‡é€’å½’åœ°è®¡ç®—å’Œæ›´æ–°ç³»ç»Ÿçš„çŠ¶æ€ä¼°è®¡ï¼Œå®ç°å¯¹åŠ¨æ€ç³»ç»Ÿçš„æœ€ä¼˜ä¼°è®¡ã€‚</p><p>åœ¨å·¥ç¨‹å®è·µä¸­ï¼Œç”±äºæ„ŸçŸ¥è¯†åˆ«åˆ°çš„è½¦é“çº¿å¶å°”å­˜åœ¨è¾ƒå¤§çš„è·³å˜ï¼Œå¯¼è‡´æŠ¥è­¦åˆ¤æ–­æˆ–æ—©åæ™šçš„å‡ºç°æ³¢åŠ¨ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹æ„ŸçŸ¥è¾“å…¥çš„è½¦é“çº¿ç³»æ•°è¿›è¡Œå¹³æ»‘å¤„ç†ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ„ŸçŸ¥å°†è½¦é“çº¿ä»¥ä¸‰æ¬¡èºæ—‹æ›²çº¿æ–¹ç¨‹çš„å½¢å¼è¾“é€ç»™ä¸‹æ¸¸ï¼Œå…¶ä¸­ï¼š<br>$$<br>\begin{equation}<br>y&#x3D;c_0+c_1x+c_2x^2+c_3x^3<br>\end{equation}<br>$$</p><ul><li>$c_0$:è¡¨ç¤ºåœ¨çºµå‘è·ç¦»$x&#x3D;0$å¤„æ‘„åƒå¤´åˆ°è½¦é“çº¿çš„æ¨ªå‘è·ç¦»ï¼š</li><li>$atan(c_1)$:è¡¨ç¤ºçºµå‘è·ç¦»$x&#x3D;0$å¤„æ‘„åƒå¤´ä¸è½¦é“çº¿çš„èˆªå‘è§’$\theta$ï¼›</li><li>$2c_2$:è¡¨ç¤ºçºµå‘è·ç¦»$x&#x3D;0$å¤„è½¦é“çº¿çš„æ›²ç‡$k_r$;</li><li>$6c_3$:è¡¨ç¤ºçºµå‘è·ç¦»$x&#x3D;0$å¤„è½¦é“çº¿çš„æ›²ç‡å˜åŒ–ç‡$\dot{k}_{r}$;</li></ul><p>å¯¹ä¸Šè¿°è½¦é“çº¿æ–¹ç¨‹æ±‚å¯¼ï¼Œåˆ†åˆ«è®¡ç®—å‡ºåœ¨çºµå‘è·ç¦»$x$å¤„çš„è‡ªè½¦åˆ°è½¦é“çº¿çš„æ¨ªå‘è·ç¦»$y$,è‡ªè½¦ä¸è½¦é“çº¿<br>çš„èˆªå‘è§’$\theta$ï¼Œè½¦é“çº¿çš„æ›²ç‡$k$,è½¦é“çº¿çš„æ›²ç‡å˜åŒ–ç‡$\dot{k}_{r}$ï¼Œå¯è¡¨ç¤ºä¸ºï¼š</p><p>$$<br>\begin{equation}<br>y_{x}&#x3D;c_{0}+c_{1}x+c_{2}x^2+c_{3}x^3<br>\end{equation}<br>$$</p><p>ä¸€é˜¶å¯¼å¦‚ä¸‹æ‰€ç¤º:</p><p>$$<br>\begin{equation}<br>\theta_{x}&#x3D;c_{1}+2c_{2}x+3c_{3}x^{2}</p><p>\end{equation}<br>$$</p><p>äºŒé˜¶å¯¼å¦‚ä¸‹æ‰€ç¤º:</p><p>$$<br>\begin{equation}<br>k_{rx}&#x3D;2c_{2}+6c_{3}x</p><p>\end{equation}<br>$$</p><p>ä¸‰é˜¶å¯¼å¦‚ä¸‹æ‰€ç¤º:</p><p>$$<br>\begin{equation}<br>\dot{k}<em>{rx}&#x3D;6c</em>{3}<br>\end{equation}<br>$$</p><p>å¯¹è½¦é“çº¿å‚æ•°è¿›è¡Œå¡å°”æ›¼æ»¤æ³¢é¦–å…ˆå‡å®šè½¦é“çº¿çš„æ›²ç‡å˜åŒ–ç‡$\dot{k}<em>{r}$ä¸å˜ï¼Œå…¶ä»–ä¸‰ä¸ªå‚æ•°éšæ—¶é—´æ ¹æ®<br>$\dot{k}</em>{r}$çš„å˜åŒ–è€Œå˜åŒ–ã€‚åœ¨æ¨å¯¼è¿‡ç¨‹ä¸­ï¼Œè½¦é“çº¿å‚æ•°å—è‡ªè½¦è¿åŠ¨çš„å½±å“ï¼Œéœ€è¦å°†è‡ªè½¦è¿åŠ¨æ¶ˆé™¤:</p><p>$$<br>\begin{equation}<br>d_{x}&#x3D;v_{x}t<br>\end{equation}<br>$$</p><p>$$<br>\begin{equation}<br>d_{\theta}&#x3D;w_{r}t<br>\end{equation}<br>$$</p><p>æ ¹æ®æ›²ç‡å’Œè½¦è¾†æ¨ªå‘åç§»çš„å…³ç³»ä»¥åŠæ›²ç‡å’Œæ¨ªæ‘†è§’é€Ÿåº¦çš„å…³ç³»å¯å¾—ï¼š</p><p>$$<br>\begin{equation}<br>d_{y}&#x3D;\frac{1}{2}\frac{w_{r}}{v_{x}}d_{x}^{2}<br>\end{equation}<br>$$</p><p>å°†è½¦é“çº¿æ–¹ç¨‹è¿›è¡Œæ³°å‹’å±•å¼€ï¼Œå¾—åˆ°è½¦é“çº¿å‚æ•°çš„å¢é‡æ–¹ç¨‹ï¼ŒåŸºäºä¸Šä¸€æ—¶åˆ»çš„è½¦é“çº¿æ–¹ç¨‹å¯æ¨å¯¼å‡ºå½“å‰æ—¶åˆ»çš„è½¦é“çº¿ä¸ºï¼š</p><p>$$<br>\begin{equation}<br>y(t)&#x3D;y(t-1)+\theta(t-1)d_x+\frac12k_r(t-1)d_x^2+\frac16\dot{k}_r(t-1)d_x^3-dy<br>\end{equation}<br>$$</p><p>$$<br>\begin{equation}<br>\theta(t)&#x3D;\theta(t-1)+k_r(t-1)d_x+\frac12\dot{k}_r(t-1)d_x^2-d\theta<br>\end{equation}<br>$$</p><p>$$<br>\begin{equation}<br>k_r(t)&#x3D;k_r(t-1)+\dot{k}_r(t-1)d_x<br>\end{equation}<br>$$</p><p>$$<br>\begin{equation}<br>\dot{k}_r&#x3D;\dot{k}_r(t-1)<br>\end{equation}<br>$$</p><blockquote><p>è¿™é‡Œçš„$dy$å¯ä»¥ç†è§£ä¸ºæµ‹é‡è¯¯å·®ï¼Œè¿™ä¸ªæµ‹é‡è¯¯å·®æ˜¯ç”±äºæµ‹é‡æ–¹å¼æˆ–å·¥å…·çš„å±€é™æ€§é€ æˆçš„ï¼Œå› æ­¤ï¼Œåœ¨å¡å°”æ›¼æ»¤æ³¢ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æµ‹é‡è¯¯å·®è¿›è¡Œå»ºæ¨¡ï¼Œä»¥ä¾¿åœ¨æ»¤æ³¢è¿‡ç¨‹ä¸­å¯¹æµ‹é‡å€¼è¿›è¡Œä¿®æ­£ã€‚</p></blockquote><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å¯¹è½¦é“çº¿å‚æ•°çš„å¡å°”æ›¼æ»¤æ³¢æ¨¡å‹å·²ç»å»ºç«‹ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å¡å°”æ›¼æ»¤æ³¢çš„æ¨¡å‹è¿›è¡Œå…·ä½“çš„å®ç°ã€‚</p><p>å°†ä¸Šå¼å†™ä¸ºçŠ¶æ€ç©ºé—´$\widehat{X}<em>t^-&#x3D;A_t\widehat{X}</em>{t-1}+B_tu_t$çš„è¡¨è¾¾å½¢å¼ï¼š</p><p>$$<br>\begin{equation}<br>\begin{bmatrix}y(t)\\<br>\theta(t)\k_r(t)\\<br>\dot{k}_r(t)<br>\end{bmatrix}&#x3D;<br>\begin{bmatrix}<br>1&amp;d_x&amp;\frac{1}{2}d_x^2&amp;\frac{1}{6}d_x^3\\<br>0&amp;1&amp;d_x&amp;\frac{1}{2}d_x^2\\<br>0&amp;0&amp;1&amp;d_x\\<br>\end{bmatrix}<br>\begin{bmatrix}y(t-1)\\<br>\theta(t-1)\\<br>k_r(t-1)\\<br>\dot{k}_r(t-1)\end{bmatrix}+\begin{bmatrix}-\frac{1}{2}\frac{d_x^2}{v_x}\\<br>-t\\<br>0\\<br>0\end{bmatrix}<br>w_r<br>\end{equation}<br>$$</p><p>åˆ™ï¼š</p><p>$$<br>\begin{equation}<br>\widehat{X}_t^-&#x3D;\begin{bmatrix}y(t)\\<br>\theta(t)\\<br>k_r(t)\\<br>\dot{k}_r(t)\end{bmatrix}<br>\end{equation}<br>$$</p><p>$$<br>\begin{equation}<br>A_t&#x3D;\begin{bmatrix}1&amp;d_x&amp;\frac{1}{2}d_x^2&amp;\frac{1}{6}d_x^3\0&amp;1&amp;d_x&amp;\frac{1}{2}d_x^2\0&amp;0&amp;1&amp;d_x\0&amp;0&amp;0&amp;1\end{bmatrix}<br>\end{equation}<br>$$</p><p>$$<br>\begin{equation}<br>\widehat{X}_{t-1}&#x3D;\begin{bmatrix}y(t-1)\\<br>\theta(t-1)\\<br>k_r(t-1)\\<br>\dot{k}_r(t-1)\end{bmatrix}<br>\end{equation}<br>$$</p><p>$$<br>\begin{equation}<br>B_t&#x3D;\begin{bmatrix}-\frac{1}{2}\frac{d_x^2}{v_x}\-t\0\\end{bmatrix}<br>\end{equation}<br>$$</p><p>$$<br>\begin{equation}<br>u_t&#x3D;w_r<br>\end{equation}<br>$$</p><p>ç”±äºæˆ‘ä»¬çš„è§‚æµ‹å‚æ•°ä¸çŠ¶æ€å˜é‡ä¸€è‡´ï¼Œæ‰€ä»¥è§‚æµ‹å‘é‡å’ŒçŠ¶æ€å‘é‡ç›¸åŒï¼Œä¸”è§‚æµ‹çŸ©é˜µä¸ºå•ä½é˜µï¼Œåˆ™è§‚æµ‹å‘é‡$z_t$å¯å†™ä¸ºï¼š</p><p>$$<br>\begin{equation}<br>z_t&#x3D;\begin{bmatrix}y(t)\\<br>\theta(t)\\<br>k_r(t)\\<br>\dot{k}_r(t)\end{bmatrix}<br>\end{equation}<br>$$</p><p>è§‚æµ‹çŸ©é˜µ$H$ä¸ºï¼š</p><p>$$<br>\begin{equation}<br>H&#x3D;\begin{bmatrix}1&amp;0&amp;0&amp;0\\<br>0&amp;1&amp;0&amp;0\\<br>0&amp;0&amp;1&amp;0\\<br>0&amp;0&amp;0&amp;1\end{bmatrix}<br>\end{equation}<br>$$</p><p>å³è§‚æµ‹å€¼ä¸º$t$æ—¶åˆ»è½¦é“çº¿æ–¹ç¨‹çš„å„é˜¶å¯¼æ•°å€¼ã€‚</p><h2 id="è¶…å‚æ•°è®¾ç½®"><a href="#è¶…å‚æ•°è®¾ç½®" class="headerlink" title="è¶…å‚æ•°è®¾ç½®"></a>è¶…å‚æ•°è®¾ç½®</h2><p>å¡å°”æ›¼æ»¤æ³¢å™¨éœ€è¦è®¾ç½®ä¸€äº›è¶…å‚æ•°ï¼Œè¿™äº›è¶…å‚æ•°ä¼šå½±å“æ»¤æ³¢å™¨çš„æ€§èƒ½ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„è¶…å‚æ•°ï¼š</p><h4 id="çŠ¶æ€åæ–¹å·®çŸ©é˜µ-P"><a href="#çŠ¶æ€åæ–¹å·®çŸ©é˜µ-P" class="headerlink" title="çŠ¶æ€åæ–¹å·®çŸ©é˜µ$P$"></a>çŠ¶æ€åæ–¹å·®çŸ©é˜µ$P$</h4><p>çŠ¶æ€åæ–¹å·®çŸ©é˜µ$P$ä¸ºé¢„æµ‹å€¼å’ŒçœŸå®å€¼ä¹‹é—´çš„è¯¯å·®åæ–¹å·®çŸ©é˜µ</p><p>é¦–å…ˆçœ‹å…¬å¼:</p><ul><li>çŠ¶æ€åæ–¹å·®é¢„æµ‹</li></ul><p>$$<br>\begin{equation}<br>P_t^-&#x3D;F_tP_{t-1}F_t^T+Q_t<br>\end{equation}<br>$$</p><ul><li>æ›´æ–°çŠ¶æ€åæ–¹å·®</li></ul><p>$$<br>\begin{equation}<br>P_t&#x3D;(I-K_tH)P_t^-<br>\end{equation}<br>$$</p><p>å¯ä»¥çœ‹å‡ºçŠ¶æ€åæ–¹å·®çŸ©é˜µåœ¨é¢„æµ‹é˜¶æ®µä¼šç»™å‡ºé¢„æµ‹å€¼ï¼Œåœ¨æ›´æ–°é˜¶æ®µä¼šç»™å‡ºä¼˜åŒ–é¢„æµ‹ç»“æœï¼Œæ‰€ä»¥è¯¥å€¼ä»…ä»…éœ€è¦è®¾ç½®åˆå€¼å³å¯ï¼Œä¸éœ€è¦æ¯æ¬¡å¤–éƒ¨æ‰‹åŠ¨æ›´æ–°ã€‚æ ¹æ®ç»éªŒï¼ŒçŠ¶æ€åæ–¹å·®çŸ©é˜µçš„åˆå€¼ä¸€èˆ¬è®¾ç½®è¾ƒå°ï¼ŒåŸå› å¦‚ä¸‹ï¼š</p><p>çŠ¶æ€åæ–¹å·®çš„å¤§å°å½±å“å¡å°”æ›¼å¢ç›Šçš„è®¡ç®—ï¼Œå¡å°”æ›¼å¢ç›Šè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p><p>$$<br>\begin{equation}<br>K_t&#x3D;P_t^-H_t^T(H_tP_t^-H_t^T+R_t)^{-1}<br>\end{equation}<br>$$</p><p>ç”±äºæˆ‘ä»¬çš„è§‚æµ‹å‚æ•°ä¸çŠ¶æ€å˜é‡ä¸€è‡´ï¼Œæ‰€ä»¥è§‚æµ‹å‘é‡å’ŒçŠ¶æ€å‘é‡ç›¸åŒï¼Œä¸”è§‚æµ‹çŸ©é˜µä¸ºå•ä½é˜µï¼Œå³:$H&#x3D;I$</p><p>$$<br>\begin{equation}<br>K_t&#x3D;P_t^{-}(P_t^{-}+R_t)^{-1}<br>\end{equation}<br>$$</p><p>ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼ŒçŠ¶æ€åæ–¹å·®è¶Šå¤§ï¼Œå¡å°”æ›¼å¢ç›Š$K$è¶Šå¤§ï¼Œç„¶åæ¨¡å‹å¯¹è§‚æµ‹å€¼çš„ä¿¡ä»»åº¦å°±è¶Šå¤§ï¼Œå¯ç”±ä¸‹å¼çœ‹å‡ºï¼š</p><p>$$<br>\begin{equation}<br>\widehat{X}_t&#x3D;\widehat{X}_t^-+K_t(z_t-H\widehat{X}_t^-)<br>\end{equation}<br>$$</p><p>å¡å°”æ›¼å¢ç›Š$K$è¶Šå¤§ï¼Œæ›´æ–°çŠ¶æ€ä¼°è®¡å€¼æ—¶é‡‡çº³è§‚æµ‹å€¼$z_t$è¶Šå¤šï¼Œåä¹‹ï¼Œåˆ™çŠ¶æ€ä¼°è®¡å€¼ä¼˜åŒ–ç»“æœé‡‡çº³é¢„æµ‹å€¼è¶Šå¤šã€‚</p><ul><li><p>æˆ‘ä»¬é€šå¸¸å¯¹ç³»ç»Ÿçš„åˆå§‹çŠ¶æ€å¹¶ä¸å®Œå…¨ç¡®å®šï¼Œå°¤å…¶æ˜¯åœ¨ç³»ç»Ÿåˆšå¼€å§‹è¿è¡Œæ—¶ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å€¾å‘äºé€šè¿‡é€‰æ‹©è¾ƒå°çš„åˆå§‹åæ–¹å·®çŸ©é˜µæ¥è¡¨ç¤ºå¯¹åˆå§‹çŠ¶æ€ä¼°è®¡çš„ä¿¡ä»»è¾ƒä½</p></li><li><p>è¾ƒå°çš„åæ–¹å·®çŸ©é˜µæ„å‘³ç€æ»¤æ³¢å™¨æœ€å¼€å§‹æ—¶å¯¹çŠ¶æ€çš„å˜åŒ–æ›´åŠ è°¨æ…ï¼Œä¸ä¼šè¿…é€Ÿåšå‡ºè¿‡äºæ¿€è¿›çš„è°ƒæ•´ã€‚éšç€æ–°çš„æµ‹é‡æ•°æ®çš„ä¸æ–­æ›´æ–°ï¼Œåæ–¹å·®çŸ©é˜µä¼šé€æ­¥å¢å¤§ï¼Œåæ˜ å‡ºå¯¹ä¼°è®¡çŠ¶æ€çš„ä¸ç¡®å®šæ€§çš„å¢åŠ ã€‚</p></li></ul><p>ä¸€èˆ¬å°†çŠ¶æ€åæ–¹å·®çŸ©é˜µ$P$åˆå€¼è®¾ç½®ä¸ºï¼š</p><p>$$<br>\begin{equation}<br>P&#x3D;\begin{bmatrix}0.0001&amp;0&amp;0&amp;0\\<br>0&amp;0.0001&amp;0&amp;0\\<br>0&amp;0&amp;0.0001&amp;0\\<br>0&amp;0&amp;0&amp;0.0001\end{bmatrix}<br>\end{equation}<br>$$</p><h4 id="è§‚æµ‹å™ªå£°åæ–¹å·®çŸ©é˜µ-R"><a href="#è§‚æµ‹å™ªå£°åæ–¹å·®çŸ©é˜µ-R" class="headerlink" title="è§‚æµ‹å™ªå£°åæ–¹å·®çŸ©é˜µ$R$"></a>è§‚æµ‹å™ªå£°åæ–¹å·®çŸ©é˜µ$R$</h4><p>è§‚æµ‹å™ªå£°åæ–¹å·®çŸ©é˜µ$R$ä¸ºè§‚æµ‹å€¼å’ŒçœŸå®å€¼ä¹‹é—´çš„è¯¯å·®åæ–¹å·®çŸ©é˜µ</p><p>é¦–å…ˆçœ‹å…¬å¼:</p><p>$$<br>\begin{equation}<br>K_t&#x3D;P_t^{-}(P_t^{-}+R_t)^{-1}<br>\end{equation}<br>$$</p><p>å¯ä»¥çœ‹å‡ºè§‚æµ‹å™ªå£°åæ–¹å·®çŸ©é˜µ$R$å’Œå¡å°”æ›¼å¢ç›Š$K$æœ‰å…³ï¼Œè§‚æµ‹å™ªå£°åæ–¹å·®çŸ©é˜µ$R$è¶Šå¤§ï¼Œå¡å°”æ›¼å¢ç›Š$K$è¶Šå°ï¼Œæ¨¡å‹å¯¹è§‚æµ‹å€¼çš„ä¿¡ä»»åº¦å°±è¶Šå°ï¼Œæ¨¡å‹å¯¹é¢„æµ‹å€¼çš„ä¿¡ä»»åº¦å°±è¶Šå¤§ã€‚</p><p>åœ¨å¡å°”æ›¼çš„é¢„æµ‹é˜¶æ®µå’Œæ›´æ–°é˜¶æ®µï¼Œè§‚æµ‹å™ªå£°åæ–¹å·®çŸ©é˜µ$R$ä¸ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œæ‰€ä»¥è¯¥å€¼å¦‚æœè®¾ç½®ä¸ºå›ºå®šå€¼é‚£ä¹ˆè¯´æ˜è§‚æµ‹æ•°æ®çš„å™ªå£°ç¨³å®šä¸å˜ï¼Œå¦‚æœè§‚æµ‹æ•°æ®æŠ–åŠ¨è¾ƒå¤§ï¼Œæ¯”è¾ƒéš¾ä»¥æµ‹é‡ï¼Œé‚£ä¹ˆè§‚æµ‹å™ªå£°åæ–¹å·®çŸ©é˜µ$R$å¾€å¾€éœ€è¦æ‰‹åŠ¨æ›´æ–°ã€‚</p><h3 id="é¢„æµ‹è¯¯å·®åæ–¹å·®çŸ©é˜µ-Q"><a href="#é¢„æµ‹è¯¯å·®åæ–¹å·®çŸ©é˜µ-Q" class="headerlink" title="é¢„æµ‹è¯¯å·®åæ–¹å·®çŸ©é˜µ$Q$"></a>é¢„æµ‹è¯¯å·®åæ–¹å·®çŸ©é˜µ$Q$</h3><p>é¢„æµ‹è¯¯å·®åæ–¹å·®çŸ©é˜µ$Q$ä¸ºé¢„æµ‹å€¼å’ŒçœŸå®å€¼ä¹‹é—´çš„è¯¯å·®åæ–¹å·®çŸ©é˜µ</p><p>é¦–å…ˆçœ‹å…¬å¼ï¼ŒçŠ¶æ€åæ–¹å·®é¢„æµ‹æ—¶ä½¿ç”¨äº†é¢„æµ‹è¯¯å·®åæ–¹å·®çŸ©é˜µ$Q$:</p><p>$$<br>\begin{equation}<br>P_t^-&#x3D;F_tP_{t-1}F_t^T+Q_t<br>\end{equation}<br>$$</p><p>è€ŒçŠ¶æ€åæ–¹å·®çš„é¢„æµ‹å€¼åœ¨æ›´æ–°é˜¶æ®µä¼šç”¨äºè®¡ç®—å¡å°”æ›¼å¢ç›Š$K$ï¼Œå¦‚ä¸Šæ‰€è¿°ã€‚é‚£ä¹ˆï¼Œé¢„æµ‹è¯¯å·®åæ–¹å·®çŸ©é˜µ$Q$è¶Šå¤§ï¼ŒçŠ¶æ€åæ–¹å·®çš„é¢„æµ‹å€¼$P_t^-$è¶Šå¤§ï¼Œåœ¨æ›´æ–°é˜¶æ®µè®¡ç®—çš„å¡å°”æ›¼å¢ç›Š$K$è¶Šå¤§ã€‚</p><p>åœ¨å¡å°”æ›¼çš„é¢„æµ‹é˜¶æ®µå’Œæ›´æ–°é˜¶æ®µï¼Œé¢„æµ‹è¯¯å·®åæ–¹å·®çŸ©é˜µ$Q$ä¸ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œæ‰€ä»¥è¯¥å€¼å¦‚æœè®¾ç½®ä¸ºå›ºå®šå€¼é‚£ä¹ˆè¯´æ˜æ¨¡å‹å»ºæ¨¡æ¯”è¾ƒå¥½ï¼Œèƒ½å¤Ÿå¾ˆå¥½çš„é¢„æµ‹çŠ¶æ€çš„å˜åŒ–ï¼Œå¦‚æœæ¨¡å‹å»ºæ¨¡ä¸å¤Ÿç²¾å‡†ï¼Œé‚£ä¹ˆé¢„æµ‹è¯¯å·®åæ–¹å·®çŸ©é˜µ$Q$å¾€å¾€éœ€è¦æ‰‹åŠ¨æ›´æ–°ã€‚</p><p>é¢„æµ‹è¯¯å·®åæ–¹å·®çŸ©é˜µ$Q$ç›´æ¥å½±å“çš„æ˜¯çŠ¶æ€åæ–¹å·®çŸ©é˜µ$P$ï¼Œå¯ä»¥çœ‹åšæ˜¯é¢„æµ‹è¯¯å·®åæ–¹å·®çŸ©é˜µ$Q$æ˜¯å¯¹é¢„æµ‹é˜¶æ®µçŠ¶æ€åæ–¹å·®çŸ©é˜µ$P$çš„ä¿®æ­£ï¼Œæ‰€ä»¥é¢„æµ‹è¯¯å·®åæ–¹å·®çŸ©é˜µ$Q$çš„è®¾ç½®éœ€è¦æ ¹æ®é¢„æµ‹é˜¶æ®µçš„çŠ¶æ€åæ–¹å·®çŸ©é˜µ$P$æ¥è®¾ç½®ã€‚</p><blockquote><p><strong>è§‚æµ‹å™ªå£°åæ–¹å·®çŸ©é˜µ$R$è¶Šå¤§ï¼Œå¡å°”æ›¼å¢ç›Š$K$è¶Šå°ï¼›é¢„æµ‹è¯¯å·®åæ–¹å·®çŸ©é˜µ$Q$è¶Šå¤§,å¡å°”æ›¼å¢ç›Š$K$è¶Šå¤§</strong></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å¡å°”æ›¼æ»¤æ³¢ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¡å°”æ›¼æ»¤æ³¢ </tag>
            
            <tag> è½¦é“çº¿è·Ÿè¸ª </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è½¦é“å®½åº¦æµ‹é‡æ–¹æ³•</title>
      <link href="/2024/12/18/che-dao-kuan-du-ce-liang-fang-fa/"/>
      <url>/2024/12/18/che-dao-kuan-du-ce-liang-fang-fa/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h1><h2 id="ç‚¹åˆ°æ›²çº¿çš„è·ç¦»è®¡ç®—"><a href="#ç‚¹åˆ°æ›²çº¿çš„è·ç¦»è®¡ç®—" class="headerlink" title="ç‚¹åˆ°æ›²çº¿çš„è·ç¦»è®¡ç®—"></a>ç‚¹åˆ°æ›²çº¿çš„è·ç¦»è®¡ç®—</h2><p>è½¦é“çº¿çš„æ›²çº¿æ–¹ç¨‹ä¸€èˆ¬ä¸ºä¸‰æ¬¡æ›²çº¿æ–¹ç¨‹ï¼Œè¿™é‡Œä»¥ä¸‰æ¬¡æ›²çº¿ä¸ºä¾‹ï¼Œè®¡ç®—ç‚¹åˆ°æ›²çº¿çš„è·ç¦»ã€‚</p><p>è®¾ä¸‰æ¬¡æ›²çº¿æ–¹ç¨‹ä¸ºï¼š</p><p>$$<br>\begin{equation}<br>y &#x3D; a + bx + cx^2 + dx^3<br>\end{equation}<br>$$</p><p>è®¾ç‚¹åæ ‡ä¸º $(x_0, y_0)$ï¼Œåˆ™ç‚¹åˆ°æ›²çº¿çš„è·ç¦»ä¸ºï¼š</p><p>$$<br>\begin{equation}<br>d&#x3D;\sqrt{(x-x_0)^2+(y-y_0)^2}<br>\end{equation}<br>$$</p><p>$$<br>\begin{equation}<br>d^2&#x3D;(x-x_0)^2+(a+bx+cx^2+dx^3-y_0)^2<br>\end{equation}<br>$$</p><p>$$<br>\begin{equation}<br>{<br>\begin{align*}<br>d^2&#x3D;&amp; x^2+x_0^2-2xx_0 \\<br>&amp;+2abx+2acx^2+2adx^3-2ay_0\\<br>&amp;+2bcx^3+2bdx^4-2by_{0}x\\<br>&amp;+2cdx^5-2cy_0x^2\\<br>&amp;-2dy_0x^3\\<br>&amp;+a^2+b^2x^2+c^2x^4+d^2x^6+y_0^2<br>\end{align*}<br>}<br>\end{equation}<br>$$</p><p>å¯ä»¥çœ‹å‡ºï¼Œè¿™æ˜¯ä¸€ä¸ªå…­æ¬¡æ–¹ç¨‹ï¼Œæ±‚è§£æ¯”è¾ƒå¤æ‚ï¼Œå½“æ—¶æ ¹æ®ç»éªŒå¯ä»¥çŸ¥é“è½¦è¾†å‰æ–¹ä¸­å¿ƒæˆ–è½¦è½®åˆ°è½¦é“çº¿çš„æœ€å°å€¼åªæœ‰ä¸€ä¸ªã€‚å› æ­¤è¿™é‡Œå°±è½¬æ¢ä¸ºå¸¦çº¦æŸæ¡ä»¶çš„éçº¿æ€§ä¼˜åŒ–é—®é¢˜ï¼Œçº¦æŸæ¡ä»¶å¦‚ä¸‹ï¼š</p><p>$$<br>\begin{equation}<br>{<br>\begin{cases}<br>x&gt;left_{min}\\<br>x&lt;right_{max}\\<br>y&gt;0\\<br>y&lt;far_{max}<br>\end{cases}<br>}<br>\end{equation}<br>$$<br>ä¸Šè¿°çº¦æŸæ¡ä»¶å¯ä»¥æ ¹æ®è½¦è¾†å’Œè½¦é“çº¿çš„å®é™…ä½ç½®å…³ç³»è¿›è¡Œè®¾å®šã€‚</p><p>$$<br> x^2+x_0^2-2xx_0+2abx+2acx^2+2adx^3-2ay_0+2bcx^3+2bdx^4-2by_{0}x+2cdx^5-2cy_0x^2-2dy_0x^3+a^2+b^2x^2+c^2x^4+d^2x^6+y_0^2<br> $$</p>]]></content>
      
      
      <categories>
          
          <category> æµ‹è· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è½¦é“å®½åº¦ </tag>
            
            <tag> æµ‹è· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è½¦é“ä¸­å¿ƒçº¿æå–</title>
      <link href="/2024/12/10/che-dao-zhong-xin-xian-ti-qu/"/>
      <url>/2024/12/10/che-dao-zhong-xin-xian-ti-qu/</url>
      
        <content type="html"><![CDATA[<p><a href="https://candyguo.github.io/blog-post-8/">åšå®¢ï¼šcenter line extraction</a></p>]]></content>
      
      
      <categories>
          
          <category> è½¦é“çº¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è½¦é“çº¿ </tag>
            
            <tag> è½¦é“ä¸­å¿ƒçº¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºè½¦é“çº¿çš„ç›¸æœºå¤–å‚æ ‡å®šæ–¹æ³•</title>
      <link href="/2024/11/25/che-dao-xian-biao-ding-suan-fa/"/>
      <url>/2024/11/25/che-dao-xian-biao-ding-suan-fa/</url>
      
        <content type="html"><![CDATA[<h1 id="æ—‹è½¬çŸ©é˜µçš„è¡¨ç¤º"><a href="#æ—‹è½¬çŸ©é˜µçš„è¡¨ç¤º" class="headerlink" title="æ—‹è½¬çŸ©é˜µçš„è¡¨ç¤º"></a>æ—‹è½¬çŸ©é˜µçš„è¡¨ç¤º</h1><p>å¦‚æœè½¦ä½“åæ ‡ç³»å®šä¹‰ä¸ºï¼šx-å‰ï¼Œy-å·¦ï¼Œz-ä¸Šï¼Œåˆ™åæ ‡ç³»å¯å¦‚ä¸‹æ‰€ç¤ºï¼š<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E8%BD%A6%E9%81%93%E7%BA%BF%E6%A0%87%E5%AE%9A%E7%AE%97%E6%B3%95/xyz.svg"> </p><blockquote><p>å®šä¹‰çš„åŸåˆ™ä¸ºå‰å€¾åä»°ä¸ºPitchï¼Œå·¦å³åèˆªä¸ºYawï¼Œç¿»æ»šä¸ºRoll</p></blockquote><p>$$<br>\mathrm{R_x}({roll})&#x3D;\begin{bmatrix}1&amp;0&amp;0 \\ 0&amp;\cos({roll})&amp;-\sin({roll}) \\ 0&amp;\sin({roll})&amp;\cos({roll})\end{bmatrix}<br>$$</p><p>$$<br>\mathrm{R}_y({pitch})&#x3D;\begin{bmatrix}\cos({pitch})&amp;0&amp;\sin({pitch})\\ 0&amp;1&amp;0\\-\sin({pitch})&amp;0&amp;\cos({pitch})\end{bmatrix}<br>$$</p><p>$$<br>\mathrm{R_z}({yaw})&#x3D;\begin{bmatrix}\cos({yaw})&amp;-\sin({yaw})&amp;0\\sin({yaw})&amp;\cos({yaw})&amp;0\\0&amp;0&amp;1\end{bmatrix}<br>$$</p><p>æ ¹æ®æ—‹è½¬çš„å…ˆåé¡ºåºä¸åŒå¯ä»¥åˆ†ä¸ºå¦‚ä¸‹æƒ…å†µ:</p><h2 id="æ–¹å¼1"><a href="#æ–¹å¼1" class="headerlink" title="æ–¹å¼1"></a>æ–¹å¼1</h2><p>$$<br>X_\alpha{\cdot}Z_\beta{\cdot}Y_\gamma&#x3D;\begin{bmatrix}cos\beta{\cdot}cos\gamma&amp;-sin\beta&amp;cos\beta{\cdot}sin\gamma\\sin\alpha{\cdot}sin\gamma+cos\alpha{\cdot}cos\gamma{\cdot}sin\beta&amp;cos\alpha{\cdot}cos\beta&amp;cos\alpha{\cdot}sin\beta{\cdot}sin\gamma-cos\gamma{\cdot}sin\alpha\\cos\gamma{\cdot}sin\alpha{\cdot}sin\beta-cos\alpha{\cdot}sin\gamma&amp;cos\beta{\cdot}sin\alpha&amp;cos\alpha{\cdot}cos\gamma+sin\alpha{\cdot}sin\beta{\cdot}sin\gamma\end{bmatrix}<br>$$</p><p>å…¶ä¸­ï¼š<br>$$<br>\alpha&#x3D;\arctan\left(\frac{R_{32}}{R_{22}}\right)\\\beta&#x3D;\arcsin(-R_{12})\\\gamma&#x3D;\arctan\left(\frac{R_{13}}{R_{11}}\right)<br>$$</p><h2 id="æ–¹å¼2"><a href="#æ–¹å¼2" class="headerlink" title="æ–¹å¼2"></a>æ–¹å¼2</h2><p>$$<br>X_{\alpha}Y_{\beta}Z_{\gamma}&#x3D;\begin{bmatrix}cos{\beta}{\cdot}cos{\gamma}&amp;-cos{\beta}{\cdot}sin{\gamma}&amp;sin{\beta}\\cos{\alpha}{\cdot}sin{\gamma}+cos{\gamma}{\cdot}sin{\alpha}{\cdot}sin{\beta}&amp;cos{\alpha}{\cdot}cos{\gamma}-sin{\alpha}{\cdot}sin{\beta}{\cdot}sin{\gamma}&amp;-cos{\beta}{\cdot}sin{\alpha}\\sin{\alpha}{\cdot}sin{\gamma}-cos{\alpha}{\cdot}cos{\gamma}{\cdot}sin{\beta}&amp;cos{\gamma}{\cdot}sin{\alpha}+cos{\alpha}{\cdot}sin{\beta}{\cdot}sin{\gamma}&amp;cos{\alpha}{\cdot}cos{\beta}\end{bmatrix}<br>$$</p><p>å…¶ä¸­ï¼š<br>$$<br>\begin{aligned}&amp;\alpha&#x3D;\arctan\left(\frac{-R_{23}}{R_{33}}\right)\\&amp;\beta&#x3D;\arcsin(R_{13})\\&amp;\gamma&#x3D;\arctan\biggl(\frac{-R_{12}}{R_{11}}\biggr)\end{aligned}<br>$$</p><h2 id="æ–¹å¼3"><a href="#æ–¹å¼3" class="headerlink" title="æ–¹å¼3"></a>æ–¹å¼3</h2><p>$$<br>Y_\alpha{\cdot}X_\beta{\cdot}Z_\gamma&#x3D;\begin{bmatrix}cos\alpha{\cdot}cos\gamma+sin\alpha{\cdot}sin\beta{\cdot}sin\gamma&amp;cos\gamma{\cdot}sin\alpha{\cdot}sin\beta-cos\alpha{\cdot}sin\gamma&amp;cos\beta{\cdot}sin\alpha\\cos\beta{\cdot}sin\gamma&amp;cos\beta{\cdot}cos\gamma&amp;-sin\beta\\cos\alpha{\cdot}sin\beta{\cdot}sin\gamma-cos\gamma{\cdot}sin\alpha&amp;cos\alpha{\cdot}cos\gamma{\cdot}sin\beta+sin\alpha{\cdot}sin\gamma&amp;cos\alpha{\cdot}cos\beta\end{bmatrix}<br>$$</p><p>å…¶ä¸­:<br>$$<br>\alpha&#x3D;\arctan\left(\frac{R_{13}}{R_{33}}\right)\\\beta&#x3D;\arcsin(-R_{23})\\\gamma&#x3D;\arctan\left(\frac{R_{21}}{R_{22}}\right)<br>$$</p><h2 id="æ–¹å¼4"><a href="#æ–¹å¼4" class="headerlink" title="æ–¹å¼4"></a>æ–¹å¼4</h2><p>$$<br>\left.Y_\alpha{\cdot}Z_\beta{\cdot}X_\gamma&#x3D;\left[\begin{array}{ccc}cos\alpha{\cdot}cos\beta&amp;sin\alpha{\cdot}sin\gamma-cos\alpha{\cdot}cos\gamma{\cdot}sin\beta&amp;cos\gamma{\cdot}sin\alpha+cos\alpha{\cdot}sin\beta{\cdot}sin\gamma\\sin\beta&amp;cos\beta{\cdot}cos\gamma&amp;-cos\beta{\cdot}sin\gamma\\-cos\beta{\cdot}sin\alpha&amp;cos\alpha{\cdot}sin\gamma+cos\gamma{\cdot}sin\alpha{\cdot}sin\beta&amp;cos\alpha{\cdot}cos\gamma-sin\alpha{\cdot}sin\beta{\cdot}sin\gamma\end{array}\right.\right]<br>$$</p><p>å…¶ä¸­ï¼š<br>$$<br>\begin{aligned}&amp;\alpha&#x3D;\arctan\left(\frac{-R_{31}}{R_{11}}\right)\\&amp;\beta&#x3D;\arcsin(R_{21})\\&amp;\gamma&#x3D;\arctan\left(\frac{-R_{23}}{R_{22}}\right)\end{aligned}<br>$$</p><h2 id="æ–¹å¼5"><a href="#æ–¹å¼5" class="headerlink" title="æ–¹å¼5"></a>æ–¹å¼5</h2><p>$$<br>Z_{\alpha}Y_{\beta}X_{\gamma}&#x3D;\begin{bmatrix}cos{\alpha}{\cdot}cos{\beta}&amp;cos{\alpha}{\cdot}sin{\beta}{\cdot}sin{\gamma}-cos{\gamma}{\cdot}sin{\alpha}&amp;sin{\alpha}{\cdot}sin{\gamma}+cos{\alpha}{\cdot}cos{\gamma}{\cdot}sin{\beta}\\cos{\beta}{\cdot}sin{\alpha}&amp;cos{\alpha}{\cdot}cos{\gamma}+sin{\alpha}{\cdot}sin{\beta}{\cdot}sin{\gamma}&amp;cos{\gamma}{\cdot}sin{\alpha}{\cdot}sin{\beta}-cos{\alpha}{\cdot}sin{\gamma}\\-sin{\beta}&amp;cos{\beta}{\cdot}sin{\gamma}&amp;cos{\beta}{\cdot}cos{\gamma}\end{bmatrix}<br>$$</p><p>å…¶ä¸­ï¼š<br>$$<br>\alpha&#x3D;\arctan\left(\frac{R_{21}}{R_{11}}\right)\\\beta&#x3D;\arcsin(-R_{31})\\\gamma&#x3D;\arctan\left(\frac{R_{32}}{R_{33}}\right)<br>$$</p><h2 id="æ–¹å¼6"><a href="#æ–¹å¼6" class="headerlink" title="æ–¹å¼6"></a>æ–¹å¼6</h2><p>$$<br>Z_{\alpha}X_{\beta}Y_{\gamma}&#x3D;\begin{bmatrix}cos{\alpha}{\cdot}cos{\gamma}-sin{\alpha}{\cdot}sin{\beta}{\cdot}sin{\gamma}&amp;-cos{\beta}{\cdot}sin{\alpha}&amp;cos{\alpha}{\cdot}sin{\gamma}+cos{\gamma}{\cdot}sin{\alpha}{\cdot}sin{\beta}\\cos{\gamma}{\cdot}sin{\alpha}+cos{\alpha}{\cdot}sin{\beta}{\cdot}sin{\gamma}&amp;cos{\alpha}{\cdot}cos{\beta}&amp;sin{\alpha}{\cdot}sin{\gamma}-cos{\alpha}{\cdot}cos{\gamma}{\cdot}sin{\beta}\\-cos{\beta}{\cdot}sin{\gamma}&amp;sin{\beta}&amp;cos{\beta}{\cdot}cos{\gamma}\end{bmatrix}<br>$$</p><p>å…¶ä¸­ï¼š<br>$$<br>\begin{aligned}&amp;\alpha&#x3D;\arctan\left(\frac{-R_{12}}{R_{22}}\right)\\&amp;\beta&#x3D;\arcsin(R_{32})\\&amp;\gamma&#x3D;\arctan\biggl(\frac{-R_{31}}{R_{33}}\biggr)\end{aligned}<br>$$</p><ul><li>æ—‹è½¬è§’åº¦å’Œæ—‹è½¬è½´çš„å…³ç³»: $Z-yawï¼ŒX-rollï¼ŒY-pitch$</li><li>å‚è€ƒç½‘ç«™: <a href="https://en.wikipedia.org/wiki/Euler_angles">Euler angles</a></li><li>ä¹Ÿå¯ä»¥ä»…ç»•ä¸‰ä¸ªè½´è¿›è¡Œä¸‰æ¬¡æ—‹è½¬å¾—åˆ°æ—‹è½¬çŸ©é˜µï¼Œæ–¹æ³•å¦‚è§:<a href="https://en.wikipedia.org/wiki/Euler_angles">Euler angles</a></li></ul><h1 id="åŸºäºè½¦é“çº¿æ¶ˆå¤±ç‚¹çš„ç›¸æœºå¤–å‚æ ‡å®šæ–¹æ³•"><a href="#åŸºäºè½¦é“çº¿æ¶ˆå¤±ç‚¹çš„ç›¸æœºå¤–å‚æ ‡å®šæ–¹æ³•" class="headerlink" title="åŸºäºè½¦é“çº¿æ¶ˆå¤±ç‚¹çš„ç›¸æœºå¤–å‚æ ‡å®šæ–¹æ³•"></a>åŸºäºè½¦é“çº¿æ¶ˆå¤±ç‚¹çš„ç›¸æœºå¤–å‚æ ‡å®šæ–¹æ³•</h1><p>ä¸–ç•Œåæ ‡ç³»åˆ°å›¾åƒåæ ‡ç³»çš„è½¬æ¢å…³ç³»å¦‚ä¸‹ï¼š</p><p>$$<br>{Z_c}\begin{bmatrix}u\\v\\1\end{bmatrix}&#x3D;\mathbf{K}\left(\mathbf{R}|\mathbf{t}\right)\begin{bmatrix}X_w\\Y_w\\Z_w\\1\end{bmatrix}<br>$$</p><p>å…¶ä¸­ï¼Œ<br>$$<br>K&#x3D;<br>\begin{bmatrix}<br>f_{x} &amp; {0} &amp; c_{x} &amp; {0} \\<br>{0} &amp; f_{y} &amp; c_{y} &amp; {0} \\<br>{0} &amp; {0} &amp; {1} &amp;{0}<br>\end{bmatrix}<br>$$</p><p>$$<br>\lambda\begin{bmatrix}u\\v\\1\end{bmatrix}&#x3D;\mathbf K\left(\mathbf R|\mathbf t\right)\begin{bmatrix}X_w&#x2F;Z_w\\Y_w&#x2F;Z_w\\1\\1&#x2F;Z_w\end{bmatrix}<br>$$</p><p>å…¶ä¸­ï¼Œ<br>$$\lambda&#x3D;\frac{Z_c}{Z_w}$$</p><p>è½¦é“çº¿çš„æ¶ˆå¤±ç‚¹åœ¨å›¾åƒä¸Šè¡¨ç°ä¸ºè½¦é“çº¿çš„äº¤ç‚¹ï¼Œè€Œåœ¨ä¸–ç•Œåæ ‡ç³»ä¸­è¡¨ç°ä¸ºä½äºæ— ç©·è¿œå¤„ï¼Œå¦‚æœä¸–ç•Œåæ ‡ç³»ä¸­Zè½´ä¸ºè½¦è¾†å‰æ–¹ï¼Œåˆ™æ— ç©·è¿œå¤„$Z_{W}&#x3D;\infty$,å› æ­¤ï¼š</p><blockquote><p>è®°ä½è¿™é‡Œçš„å‡è®¾ä¸ºZè½´ä¸ºè½¦è¾†å‰æ–¹<br>$$<br>\lambda\begin{bmatrix}<br>u\\<br>v\\<br>1\end{bmatrix}&#x3D;\mathbf{K}(\mathbf{R}|\mathbf{t})\begin{bmatrix}<br>0 \\<br>0 \\<br>1 \\<br>0\end{bmatrix}<br>$$</p></blockquote><p>$$<br>\lambda\begin{bmatrix}u\\v\\1\end{bmatrix}&#x3D;K<br>\begin{bmatrix}<br>R_{11} &amp; R_{12} &amp; R_{13} &amp; t_{x}  \\<br>R_{21} &amp; R_{22} &amp; R_{23} &amp; t_{y}  \\<br>R_{31} &amp; R_{32} &amp; R_{33} &amp; t_{z}  \\<br>0 &amp; 0 &amp; 0 &amp; 1<br>\end{bmatrix}<br>\begin{bmatrix}0\\<br>0\\<br>1\\<br>0\end{bmatrix}<br>$$</p><p>$$<br>\lambda\begin{bmatrix}u\\<br>v\\<br>1\end{bmatrix}&#x3D;K<br>r_{3}<br>$$<br>å…¶ä¸­ï¼Œ<br>$$<br>r_{3}&#x3D;\begin{bmatrix}R_{13}\\<br>R_{23}\\<br>R_{33}\\<br>0\end{bmatrix}<br>$$</p><p>åˆ™ï¼š</p><p>$$<br>\lambda\begin{bmatrix}<br>u\\<br>v\\<br>1\end{bmatrix}&#x3D;K<br>\begin{bmatrix}<br>R_{13}\\<br>R_{23}\\<br>R_{33}\\<br>0<br>\end{bmatrix}<br>$$</p><p>$$<br>\lambda\begin{bmatrix}<br>u\\<br>v\\<br>1\end{bmatrix}&#x3D;\begin{bmatrix}<br>f_{x} &amp; {0} &amp; c_{x} &amp; {0} \\<br>{0} &amp; f_{y} &amp; c_{y} &amp; {0} \\<br>{0} &amp; {0} &amp; {1} &amp;{0}<br>\end{bmatrix}<br>\begin{bmatrix}<br>R_{13}\\<br>R_{23}\\<br>R_{33}\\<br>0<br>\end{bmatrix}<br>$$</p><p>$$<br>\lambda\begin{bmatrix}<br>u\\<br>v\\<br>1\end{bmatrix}&#x3D;\begin{bmatrix}<br>f_{x} &amp; {0} &amp; c_{x}  \\<br>{0} &amp; f_{y} &amp; c_{y}  \\<br>{0} &amp; {0} &amp; {1}<br>\end{bmatrix}<br>\begin{bmatrix}<br>R_{13}\\<br>R_{23}\\<br>R_{33}<br>\end{bmatrix}<br>$$</p><p>$$<br>\lambda\begin{bmatrix}<br>u\\<br>v\\<br>1<br>\end{bmatrix}&#x3D;k<br>\begin{bmatrix}<br>R_{13}\\<br>R_{23}\\<br>R_{33}<br>\end{bmatrix}<br>$$</p><p>å…¶ä¸­,<br>$$<br>k&#x3D;<br>\begin{bmatrix}<br>f_{x} &amp; {0} &amp; c_{x} \\<br>{0} &amp; f_{y} &amp; c_{y} \\<br>{0} &amp; {0} &amp; {1}<br>\end{bmatrix}<br>$$</p><p>å³ï¼š<br>$$<br>\lambda k^{-1}\begin{bmatrix}<br>u\\<br>v\\<br>1\end{bmatrix}&#x3D;<br>\begin{bmatrix}<br>R_{13}\\<br>R_{23}\\<br>R_{33}<br>\end{bmatrix}<br>$$</p><p>ç”±äºæ—‹è½¬çŸ©é˜µä¸­çš„æ¯ä¸ªæ—‹è½¬å‘é‡éƒ½æ˜¯å•ä½å‘é‡ï¼Œå› æ­¤$||r_{3}||&#x3D;1$ï¼Œå°†å‘é‡å•ä½åŒ–åå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>$$<br>\hat{\mathbf{r_{3}}}&#x3D;</p><p>\frac{k^{-1}\begin{bmatrix}<br>u\\<br>v\\<br>1\end{bmatrix}}{ \left |\mathbf{k^{-1}\begin{bmatrix}<br>u\\<br>v\\<br>1\end{bmatrix} }\right | }<br>$$</p><p>ç”±äºæ–¹ç¨‹çš„è§£åªå’Œæ—‹è½¬çŸ©é˜µçš„ç¬¬ä¸‰åˆ—æœ‰å…³ã€‚è€Œåœ¨æ‰€æœ‰çš„æ—‹è½¬æ–¹å¼ä¸­åªæœ‰<code>æ–¹å¼2</code>å’Œ<code>æ–¹å¼3</code>çš„æ—‹è½¬è§’åº¦æ±‚è§£å¯ä»¥ä»…ä¸æ—‹è½¬çŸ©é˜µç¬¬ä¸‰åˆ—æœ‰å…³ï¼Œè¿™é‡Œä»¥<code>æ–¹å¼3</code>çš„æ—‹è½¬ä¸ºä¾‹ï¼š</p><p>$$<br>R &#x3D;<br>Y_\alpha{\cdot}X_\beta{\cdot}Z_\gamma&#x3D;\begin{bmatrix}cos\alpha{\cdot}cos\gamma+sin\alpha{\cdot}sin\beta{\cdot}sin\gamma&amp;cos\gamma{\cdot}sin\alpha{\cdot}sin\beta-cos\alpha{\cdot}sin\gamma&amp;cos\beta{\cdot}sin\alpha\\<br>cos\beta{\cdot}sin\gamma&amp;cos\beta{\cdot}cos\gamma&amp;-sin\beta\\cos\alpha{\cdot}sin\beta{\cdot}sin\gamma-cos\gamma{\cdot}sin\alpha&amp;cos\alpha{\cdot}cos\gamma{\cdot}sin\beta+sin\alpha{\cdot}sin\gamma&amp;cos\alpha{\cdot}cos\beta\end{bmatrix}<br>$$</p><p>å…¶ä¸­:<br>$$<br>\alpha&#x3D;\arctan\left(\frac{R_{13}}{R_{33}}\right)\\<br>\beta&#x3D;\arcsin(-R_{23})\\<br>\gamma&#x3D;\arctan\left(\frac{R_{21}}{R_{22}}\right)<br>$$</p><p>åˆ™ï¼š<br>$$<br>\alpha&#x3D;Yaw&#x3D;\arctan\left(\frac{(\hat{\mathbf{r_{3}}})<em>{1}}{(\hat{\mathbf{r</em>{3}}})<em>{3}}\right)\\<br>\beta&#x3D;Pitch&#x3D;\arcsin(-(\hat{\mathbf{r</em>{3}}})_{2})<br>$$</p><blockquote><p>ç”±äºå‡è®¾æ˜¯<code>Zè½´å‘å‰</code>ï¼Œå› æ­¤è¿™é‡Œå‡è®¾<code>Yè½´æœä¸‹</code>ï¼Œ<code>Xè½´æœå·¦</code>,ç»•<code>Xè½´</code>çš„æ—‹è½¬ä¸ºä¿¯ä»°è§’<code>Pitch</code>,ç»•<code>Y</code>è½´æ—‹è½¬åèˆªè§’<code>Yaw</code>,ç»•<code>Z</code>è½´æ—‹è½¬çš„ä¸ºç¿»æ»šè§’<code>Roll</code></p></blockquote><h2 id="è®¨è®º"><a href="#è®¨è®º" class="headerlink" title="è®¨è®º"></a>è®¨è®º</h2><p>å¯ä»¥çœ‹å‡ºï¼Œé€šè¿‡æ¶ˆå¤±ç‚¹åªèƒ½å¾—åˆ°<code>Yaw</code>å’Œ<code>Pitch</code>ï¼Œæ— æ³•å¾—åˆ°<code>Roll</code>ã€‚é‚£ä¹ˆç°åœ¨æ¥åˆ†æä¸€ä¸‹è¿™ä¸ªæ–¹æ³•è®¡ç®—å‡ºæ¥çš„<code>Yaw</code>å’Œ<code>Pitch</code>æœ‰ä»€ä¹ˆå‡è®¾æ¡ä»¶ï¼š</p><ul><li><p>å¹³è¡Œè½¦é“çº¿åœ¨å›¾åƒä¸Šçš„äº¤ç‚¹ä¸ºæ¶ˆå¤±ç‚¹ï¼Œè€Œæ¶ˆå¤±ç‚¹åœ¨ä¸–ç•Œåæ ‡ç³»ä¸­çš„åæ ‡è¡¨ç°ä¸ºæ— ç©·è¿œç‚¹ï¼Œå³$Z_{w}&#x3D;\infty$ã€‚å› æ­¤è¿™é‡Œéœ€è¦è½¦é“çº¿ä¸ºä¸¥æ ¼å¹³è¡Œçº¿ï¼Œå› ä¸ºåªæœ‰å¹³è¡Œçº¿æ‰èƒ½ç›¸äº¤äºæ— ç©·è¿œå¤„ã€‚</p></li><li><p>æ¶ˆå¤±ç‚¹çš„å‡†ç¡®æ€§åœ¨å®é™…åœºæ™¯ä¸­ä¼šä¾èµ–äºè½¦é“çº¿è¯†åˆ«çš„å‡†ç¡®ç‡ï¼Œå› æ­¤è¿™é‡Œå‡è®¾è½¦é“çº¿è¯†åˆ«çš„å‡†ç¡®ç‡è¶³å¤Ÿé«˜ï¼Œå³æ¶ˆå¤±ç‚¹è¶³å¤Ÿå‡†ç¡®ã€‚è½¦é“çº¿çš„æŠ–åŠ¨ä¼šä½¿å¾—æ¶ˆå¤±ç‚¹å‡ºç°å°èŒƒå›´çš„æµ®åŠ¨ï¼Œä½†è¿™ä¸ªå°èŒƒå›´çš„æµ®åŠ¨å¿…é¡»è¦ä¿è¯è¿™äº›æµ®åŠ¨çš„æ¶ˆå¤±ç‚¹æ€»æ˜¯åœ¨æ— ç©·è¿œçš„ä½ç½®ï¼Œè¿™æ ·ä¸ä¼šç ´åå‡è®¾æ¡ä»¶ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœç‚¹$(u_1,v_1)$ä¸ºç†æƒ³æ¶ˆå¤±ç‚¹ï¼Œé‚£ä¹ˆç‚¹$(u_1+\triangle u,v_1+\triangle v)$ä¹Ÿå¿…é¡»ä¸ºç†æƒ³æ¶ˆå¤±ç‚¹ï¼Œå…¶ä¸­$\triangle u$å’Œ$\triangle v$è¶³å¤Ÿå°ã€‚</p></li><li><p>ç”±äºæ ‡å®šè¿‡ç¨‹ä¸­å›½ä½¿ç”¨äº†ç›¸æœºçš„å†…å‚$K$ï¼Œå› æ­¤ï¼Œè¿™é‡Œ$K$çš„ç²¾åº¦å¿…é¡»è¶³å¤Ÿé«˜ï¼Œå¦åˆ™ä¼šå¯¼è‡´è®¡ç®—å‡ºæ¥çš„<code>Yaw</code>å’Œ<code>Pitch</code>å‡ºç°è¯¯å·®ã€‚</p></li><li><p>ç”±äºè¿™é‡Œå‡è®¾äº†åœ°é¢æ˜¯å¹³å¦çš„ï¼Œå› æ­¤å¦‚æœåœ°é¢ä¸å¹³å¦ï¼Œé‚£ä¹ˆè®¡ç®—å‡ºæ¥çš„<code>Pitch</code>ä¼šæœ‰è¯¯å·®ã€‚</p></li><li><p>ç”±äºè¿™é‡Œå‡è®¾äº†è½¦è¾†æ²¿ç€ç›´çº¿è¡Œé©¶ï¼Œå› æ­¤å¦‚æœè½¦è¾†åœ¨è½¬å¼¯ï¼Œé‚£ä¹ˆè®¡ç®—å‡ºæ¥çš„<code>Yaw</code>ä¼šæœ‰è¯¯å·®ã€‚</p></li></ul><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// æ¶ˆå¤±ç‚¹åæ ‡</span>cv<span class="token double-colon punctuation">::</span>Mat vanish_point <span class="token operator">=</span> <span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">Mat_</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> vanish_point_x<span class="token punctuation">,</span> vanish_point_y<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ç›¸æœºå†…å‚çŸ©é˜µ</span>cv<span class="token double-colon punctuation">::</span>Mat intrinsic <span class="token operator">=</span> <span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">Mat_</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> focal_length_x_<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> principal_x_<span class="token punctuation">,</span>                                                <span class="token number">0</span><span class="token punctuation">,</span> focal_length_y_<span class="token punctuation">,</span> principal_y_<span class="token punctuation">,</span>                                                <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å†…å‚çŸ©é˜µçš„é€†çŸ©é˜µ</span>cv<span class="token double-colon punctuation">::</span>Mat intrinsic_inverse<span class="token punctuation">;</span>cv<span class="token double-colon punctuation">::</span><span class="token function">invert</span><span class="token punctuation">(</span>intrinsic<span class="token punctuation">,</span> intrinsic_inverse<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ç¬¬ä¸‰åˆ—</span>cv<span class="token double-colon punctuation">::</span>Mat r3 <span class="token operator">=</span> intrinsic_inverse <span class="token operator">*</span> vanish_point<span class="token punctuation">;</span><span class="token comment">// å½’ä¸€åŒ–</span><span class="token keyword">double</span> L2 <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">norm</span><span class="token punctuation">(</span>r3<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>NORM_L2<span class="token punctuation">)</span><span class="token punctuation">;</span>r3 <span class="token operator">=</span> r3 <span class="token operator">/</span> L2<span class="token punctuation">;</span><span class="token comment">// pitchå’Œyaw</span>pitch_<span class="token operator">=</span> <span class="token function">asin</span><span class="token punctuation">(</span>r3<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> yaw_ <span class="token operator">=</span> <span class="token function">atan2</span><span class="token punctuation">(</span><span class="token operator">-</span>r3<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> r3<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å‚è€ƒç½‘ç«™"><a href="#å‚è€ƒç½‘ç«™" class="headerlink" title="å‚è€ƒç½‘ç«™"></a>å‚è€ƒç½‘ç«™</h2><ul><li><p><a href="https://thomasfermi.github.io/Algorithms-for-Automated-Driving/CameraCalibration/VanishingPointCameraCalibration.html">Githubä¸»é¡µï¼šåŸºäºæ¶ˆå¤±ç‚¹çš„ç›¸æœºå¤–å‚æ ‡å®š</a></p></li><li><p><a href="https://en.wikipedia.org/wiki/Euler_angles">ç»´åŸºç™¾ç§‘ï¼šæ—‹è½¬çŸ©é˜µè¡¨ç¤ºæ–¹æ³•</a></p></li></ul><h1 id="åŸºäºçŸ©å½¢è½¦é“çº¿çš„ç›¸æœºå¤–å‚æ ‡å®šæ–¹æ³•"><a href="#åŸºäºçŸ©å½¢è½¦é“çº¿çš„ç›¸æœºå¤–å‚æ ‡å®šæ–¹æ³•" class="headerlink" title="åŸºäºçŸ©å½¢è½¦é“çº¿çš„ç›¸æœºå¤–å‚æ ‡å®šæ–¹æ³•"></a>åŸºäºçŸ©å½¢è½¦é“çº¿çš„ç›¸æœºå¤–å‚æ ‡å®šæ–¹æ³•</h1><h2 id="æ–¹æ³•æè¿°"><a href="#æ–¹æ³•æè¿°" class="headerlink" title="æ–¹æ³•æè¿°"></a>æ–¹æ³•æè¿°</h2><p>å¦‚æœè½¦è¾†åœ¨è½¦é“ä¸­é—´æ²¿ç€ç›´çº¿è¡Œé©¶ï¼Œé‚£ä¹ˆè½¦é“çº¿åœ¨å›¾åƒä¸Šçš„æŠ•å½±ä¼šå‘ˆç°ä¸ºä¸€ä¸ªçŸ©å½¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å› æ­¤åŸºäºçŸ©å½¢è½¦é“çº¿çš„ç›¸æœºå¤–å‚æ ‡å®šæ–¹æ³•ä¸»é¡µè¿™ä¸ªçŸ©å½¢çš„å±æ€§å±•å¼€ï¼Œè®¾ç½®çº¦æŸï¼Œæ±‚è§£å‡ºç›¸æœºçš„å¤–å‚ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E8%BD%A6%E9%81%93%E7%BA%BF%E6%A0%87%E5%AE%9A%E7%AE%97%E6%B3%95/1.png"></p><p>å¹³è¡Œè½¦é“çº¿åœ¨ä¸–ç•Œåæ ‡ç³»ä¸­çš„æŠ•å½±ä¸ºä¸¥æ ¼çŸ©å½¢ï¼Œå…·æœ‰å¦‚ä¸‹å±æ€§ï¼š</p><ul><li>è½¦è¾†æ²¿ç›´çº¿è¡Œé©¶æ—¶æ»¡è¶³å¦‚ä¸‹æ¡ä»¶ï¼š<br>$$<br>X_{wA}&#x3D;X_{wC}\\<br>X_{wB}&#x3D;X_{wD}<br>$$</li></ul><p>$$<br>Z_{wA}&#x3D;Z_{wB}\\<br>Z_{wC}&#x3D;Z_{wD}<br>$$</p><ul><li><p>è½¦é“å®½åº¦æ»¡è¶³å¦‚ä¸‹æ¡ä»¶ï¼š<br>$$<br>X_{wB}-X_{wA}&#x3D;width<br>$$</p></li><li><p>åœ°é¢å¹³æ•´æ—¶æ»¡è¶³å¦‚ä¸‹æ¡ä»¶ï¼š<br>$$<br>Y_{w}&#x3D;0<br>$$</p></li></ul><h2 id="å…¬å¼æ¨å¯¼"><a href="#å…¬å¼æ¨å¯¼" class="headerlink" title="å…¬å¼æ¨å¯¼"></a>å…¬å¼æ¨å¯¼</h2><p>ç›¸æœºåæ ‡ç³»åˆ°ä¸–ç•Œåæ ‡ç³»çš„è½¬æ¢å…³ç³»å¦‚ä¸‹ï¼š<br>$$<br>\begin{bmatrix}<br>X_w\\<br>Y_w\\<br>Z_w\end{bmatrix}&#x3D;\begin{bmatrix}r_{11}&amp;r_{21}&amp;r_{31}<br>\\<br>r_{12}&amp;r_{22}&amp;r_{32}\\r_{13}&amp;r_{23}&amp;r_{33}\end{bmatrix}\begin{bmatrix}X_c\\<br>Y_c\\<br>Z_c\end{bmatrix}+\begin{bmatrix}d\\<br>h\\<br>l\end{bmatrix}<br>$$</p><p>ç›¸æœºåæ ‡ç³»åˆ°å›¾åƒåæ ‡ç³»çš„è½¬æ¢å…³ç³»å¦‚ä¸‹ï¼š<br>$$<br>Z_c\begin{bmatrix}<br>u<br>\\<br>v\\<br>1\end{bmatrix}&#x3D;\begin{bmatrix}f_x&amp;0&amp;u_0\\<br>0&amp;f_y&amp;v_0\\<br>0&amp;0&amp;1\end{bmatrix}\begin{bmatrix}X_c\\<br>Y_c\\<br>Z_c\end{bmatrix}<br>$$</p><p>å…¶ä¸­ï¼Œ$[d,h,l^T]$ä¸ºç›¸æœºå®‰è£…ä½ç½®åœ¨ä¸–ç•Œåæ ‡ç³»ä¸­çš„åæ ‡ï¼Œ$d$ä¸ºå·¦å³è·ç¦»ï¼Œ$h$å®‰è£…é«˜åº¦ï¼Œ$l$ä¸ºå‰åè·ç¦»ã€‚</p><p>å°†$A,B,C,D$å››ä¸ªç‚¹çš„ç›¸æœºåæ ‡å¸¦å…¥ä¸Šè¿°å…¬å¼å¯ä»¥å¾—åˆ°å¯¹åº”çš„ä¸–ç•Œåæ ‡ï¼ŒåŒæ—¶æ„å»ºä¸Šè¿°è½¦é“çº¿çŸ©å½¢çš„6ä¸ªçº¦æŸæ¡ä»¶ï¼Œå¾—åˆ°å¦‚ä¸‹æ–¹ç¨‹ç»„ï¼š</p><p>$$<br>\begin{aligned}<br>r_{11}\left(X_{cA}-X_{cC}\right)+r_{21}\left(Y_{cA}-Y_{cC}\right)+r_{31}\left(Z_{cA}-Z_{cC}\right)&#x3D;0\\<br>r_{11}\left(X_{cB}-X_{CD}\right)+r_{21}\left(Y_{cB}-Y_{CD}\right)+r_{31}\left(Z_{cB}-Z_{CD}\right)&#x3D;0\\<br>r_{13}\left(X_{cA}-X_{cB}\right)+r_{23}\left(Y_{cA}-Y_{cB}\right)+r_{33}\left(Z_{cA}-Z_{cB}\right)&#x3D;0\\<br>r_{13}\left(X_{cC}-X_{CD}\right)+r_{23}\left(Y_{cC}-Y_{CD}\right)+r_{33}\left(Z_{cC}-Z_{CD}\right)&#x3D;0\\<br>r_{11}\left(X_{cB}-X_{cA}\right)+r_{21}\left(Y_{cB}-Y_{cA}\right)+r_{31}\left(Z_{cB}-Z_{cA}\right)&#x3D;width\\<br>r_{11}X_{c}+r_{22}Y_{c}+r_{33}Z_{c}+h&#x3D;0<br>\end{aligned}<br>$$</p><p>ç›¸æœºåæ ‡ç³»åˆ°å›¾åƒåæ ‡ç³»çš„è½¬æ¢å…³ç³»å¯çŸ¥ï¼š<br>$$<br>Z_{c}&#x3D;\frac{f_{x}}{u-u_{0}}X_{c}&#x3D;mX_{c}\\<br>Y_{c}&#x3D;\frac{f_{x}}{u-u_{0}}\cdot\frac{v-v_{0}}{f_{y}}X_{c}&#x3D;mnX_{c}<br>$$</p><p>å³ï¼š</p><p>$$<br>X_c&#x3D;\frac{-h}{r_{12}+r_{22}mn+r_{32}m}<br>$$</p><p>åˆ™ï¼Œå…­ä¸ªçº¦æŸæ¡ä»¶å¯ä»¥è½¬åŒ–ä¸ºå¦‚ä¸‹å½¢å¼ï¼š</p><p>$$<br>\begin{aligned}<br>\frac{r_{11}+r_{21}m_{A}n_{A}+r_{31}m_{A}}{r_{12}+r_{22}m_{A}n_{A}+r_{32}m_{A}}&#x3D;\frac{r_{11}+r_{21}m_{C}n_{C}+r_{31}m_{C}}{r_{12}+r_{22}m_{C}n_{C}+r_{32}m_{C}}\\<br>\frac{r_{11}+r_{21}m_{B}n_{B}+r_{31}m_{B}}{r_{12}+r_{22}m_{B}n_{B}+r_{32}m_{B}}&#x3D;\frac{r_{11}+r_{21}m_{D}n_{D}+r_{31}m_{D}}{r_{12}+r_{22}m_{D}n_{D}+r_{32}m_{D}}\\<br>\frac{r_{13}+r_{23}m_{A}n_{A}+r_{33}m_{A}}{r_{12}+r_{22}m_{A}n_{A}+r_{32}m_{A}}&#x3D;\frac{r_{13}+r_{23}m_{B}n_{B}+r_{33}m_{B}}{r_{12}+r_{22}m_{B}n_{B}+r_{32}m_{B}}\\<br>\frac{r_{13}+r_{23}m_{C}n_{C}+r_{33}m_{C}}{r_{12}+r_{22}m_{C}n_{C}+r_{32}m_{C}}&#x3D;\frac{r_{13}+r_{23}m_{D}n_{D}+r_{33}m_{D}}{r_{12}+r_{22}m_{D}n_{D}+r_{32}m_{D}}\\<br>\frac{r_{11}+r_{21}m_{A}n_{A}+r_{31}m_{A}}{r_{12}+r_{22}m_{A}n_{A}+r_{32}m_{A}}-\frac{r_{11}+r_{21}m_{B}n_{B}+r_{31}m_{B}}{r_{12}+r_{22}m_{B}n_{B}+r_{32}m_{B}}&#x3D;\frac{width}{h}<br>\end{aligned}<br>$$</p><p>ä¸Šè¿°å…¬å¼ä¸­åŒ…å«äº†å››ä¸ªæœªçŸ¥æ•°:$(\phi),(\theta),(\psi),h$,è”ç«‹æ–¹ç¨‹å¯å¾—ï¼š</p><p>$$<br>\begin{aligned}<br>\tan(\phi)&#x3D;\frac{m_{C}m_{D}\left(n_{D}-n_{C}\right)\left(m_{A}n_{A}-m_{B}n_{B}\right)-m_{A}m_{B}\left(n_{B}-n_{A}\right)\left(m_{C}n_{C}-m_{D}n_{D}\right)}{\left(m_{B}-m_{A}\right)\left(m_{C}n_{C}-m_{D}n_{D}\right)-\left(m_{D}-m_{C}\right)\left(m_{A}n_{A}-m_{B}n_{B}\right)}\\<br>\tan(\theta)&#x3D;\frac{\left(m_{C}n_{C}-m_{A}n_{A}\right)F_{BD}-\left(m_{D}n_{D}-m_{B}n_{B}\right)F_{AC}}{G_{AC}F_{BD}-G_{BD}F_{AC}}\\<br>\tan(\psi)&#x3D;\frac{\sin(\theta)\sin(\phi)\left(m_{C}-m_{A}\right)-\sin(\theta)\cos(\phi) m_{A}m_{C}\left(n_{A}-n_{C}\right)-\cos(\theta)\left(m_{C}n_{C}-m_{A}n_{A}\right)}{\cos(\phi)\left(m_{C}-m_{A}\right)+\sin(\phi) m_{A}m_{C}\left(n_{A}-n_{C}\right)}\\<br>h&#x3D;width&#x2F;(\frac{r_{11}+r_{21}m_{A}n_{A}+r_{31}m_{A}}{r_{12}+r_{22}m_{A}n_{A}+r_{32}m_{A}}-\frac{r_{11}+r_{21}m_{B}n_{B}+r_{31}m_{B}}{r_{12}+r_{22}m_{B}n_{B}+r_{32}m_{B}})<br>\end{aligned}<br>$$</p><p>å…¶ä¸­ï¼š</p><p>$$<br>\begin{aligned}<br>{F_{AC}&#x3D;(m_{C}-m_{A})+tan(\phi) m_{A}m_{C}(n_{A}-n_{C})}\\<br>{G_{AC}&#x3D;sin(\phi)(m_{C}-m_{A})+cos(\phi)m_{A}m_{C}(n_{A}-n_{C})}\\<br>{F_{BD}&#x3D;(m_D-m_B)+tan(\phi)m_Bm_D(n_B-n_D)}\\<br>{G_{BD}&#x3D;sin(\phi)(m_{D}-m_{B})+cos(\phi)m_{B}m_{D}(n_{B}-n_{D})}<br>\end{aligned}<br>$$</p><p>ä¸‰ä¸ªè§’åº¦çš„ä½ç½®ç¤ºæ„å›¾å¦‚ä¸‹ï¼š<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E8%BD%A6%E9%81%93%E7%BA%BF%E6%A0%87%E5%AE%9A%E7%AE%97%E6%B3%95/2.png"></p><p>å› æ­¤ï¼š</p><p>$$<br>\phi&#x3D;pitch\\<br>\theta&#x3D;roll\\<br>\psi&#x3D;yaw<br>$$</p><p>è¿™äº›è§’åº¦çš„æ ‡å®šè¯¯å·®å¦‚ä¸‹ï¼š<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E8%BD%A6%E9%81%93%E7%BA%BF%E6%A0%87%E5%AE%9A%E7%AE%97%E6%B3%95/3.png"></p><h2 id="è®¨è®º-1"><a href="#è®¨è®º-1" class="headerlink" title="è®¨è®º"></a>è®¨è®º</h2><p>ä¸Šè¿°æ–¹æ³•ä¸­ï¼Œæ ‡å®šè¯¯å·®ä¸»è¦å—åˆ°ä»¥ä¸‹å› ç´ å½±å“ï¼š</p><ul><li>åœ°é¢å¹³æ•´åº¦ï¼šåœ°é¢å¹³æ•´åº¦è¶Šé«˜ï¼Œæ ‡å®šè¯¯å·®è¶Šå°ã€‚</li><li>è½¦è¾†æ²¿ç›´çº¿è¡Œé©¶,å³ï¼šå¹³è¡Œè½¦é“è¡Œé©¶</li><li>è¿™é‡Œå¹¶æ²¡æœ‰è¦æ±‚è½¦è¾†å¿…é¡»è¡Œé©¶åœ¨è½¦é“ä¸­é—´ï¼Œå› ä¸ºå¹¶æœªè¦æ±‚$|X_{wA}|&#x3D;|X_{wB}|$ä¸”$<br>|X_{wC}|&#x3D;|X_{wD}|$</li><li>è¯¥æ–¹æ³•å¯ä»¥æ±‚è§£ç›¸æœºçš„å®Œæ•´æ—‹è½¬çŸ©é˜µ$R&#x3D;[pitch,yaw,roll]$ï¼Œä¸”åœ¨å·²çŸ¥ç›¸æœºå®‰è£…é«˜åº¦çš„æƒ…å†µä¸‹å¯ä»¥æ±‚è§£ç›¸æœºå®‰è£…é«˜åº¦$h$</li></ul><h2 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">float</span> <span class="token function">M</span><span class="token punctuation">(</span>Point2f Point<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> focal_length_x_ <span class="token operator">/</span> <span class="token punctuation">(</span>Point<span class="token punctuation">.</span>x <span class="token operator">-</span> principal_x_<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">float</span> <span class="token function">N</span><span class="token punctuation">(</span>Point2f Point<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>Point<span class="token punctuation">.</span>y <span class="token operator">-</span> principal_y_<span class="token punctuation">)</span> <span class="token operator">/</span> focal_length_y_<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">float</span> <span class="token function">MN</span><span class="token punctuation">(</span>Point2f Point<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token function">M</span><span class="token punctuation">(</span>Point<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">N</span><span class="token punctuation">(</span>Point<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token comment">// è®¡ç®—yaw,rollå’Œpitchå€¼</span><span class="token keyword">auto</span> tan_yaw <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">MN</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">MN</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token function">M</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">M</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token function">MN</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">MN</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token function">M</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">M</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span>                 <span class="token punctuation">(</span><span class="token function">M</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">M</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token function">N</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">N</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token function">M</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">M</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">M</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">M</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token function">N</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">N</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token function">M</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">M</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">auto</span> yaw <span class="token operator">=</span> <span class="token function">ArcTanD</span><span class="token punctuation">(</span>tan_yaw<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">auto</span> tan_pitch <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">SinD</span><span class="token punctuation">(</span>yaw<span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">M</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">M</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token function">N</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">N</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">CosD</span><span class="token punctuation">(</span>yaw<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token function">MN</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">MN</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token function">M</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">M</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">auto</span> pitch <span class="token operator">=</span> <span class="token function">ArcTanD</span><span class="token punctuation">(</span>tan_pitch<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="æ ‡å®šè¯¯å·®è¡¥å¿"><a href="#æ ‡å®šè¯¯å·®è¡¥å¿" class="headerlink" title="æ ‡å®šè¯¯å·®è¡¥å¿"></a>æ ‡å®šè¯¯å·®è¡¥å¿</h1><ul><li><a href="https://candyguo.github.io/blog-post-15/">Pitch Estimation in autonomous driving</a></li></ul><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p>å¯ä»¥è¿›ä¸€æ­¥é€šè¿‡ä¸‹é¢çš„æ–‡ç« è¿›è¡Œå­¦ä¹ ï¼š</p><ul><li><a href="https://hermit.blog.csdn.net/article/details/120900854">é€†é€è§†å˜æ¢(IPM)å¤šç§æ–¹å¼åŠä»£ç æ€»ç»“</a></li><li><a href="https://www.guyuehome.com/detail?id=1825498970869002241">ç»å…¸æ–‡çŒ®é˜…è¯»ä¹‹â€“Online Extrinsic Camera Calibration for Temporally Consistent IPM (IPMå¤–å‚æ ‡å®š) </a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å¤–å‚æ ‡å®š </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è½¦é“çº¿æ ‡å®š </tag>
            
            <tag> å¤–å‚æ ‡å®š </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ultra Fast Deep Lane Detection with Hybrid Anchor Driven Ordinal Classification</title>
      <link href="/2024/09/24/ultra-fast-deep-lane-detection-with-hybrid-anchor-driven-ordinal-classification/"/>
      <url>/2024/09/24/ultra-fast-deep-lane-detection-with-hybrid-anchor-driven-ordinal-classification/</url>
      
        <content type="html"><![CDATA[<p>å°†è½¦é“çº¿æ£€æµ‹çš„è¿‡ç¨‹ï¼Œè§†ä¸ºåœ¨å…¨å±€ç‰¹å¾(é€šè¿‡å…¨å·ç§¯CNNæå–åˆ°çš„ç‰¹å¾å›¾)çš„åŸºç¡€ä¸Šï¼ŒåŸºäºè¡Œæ–¹å‘ä¸Šçš„ä½ç½®é€‰æ‹©ä¸åˆ†ç±»ã€‚æ¯ä¸ªå›¾åƒ4æ¡è½¦é“çº¿ï¼Œæ¯æ¡è½¦é“çº¿å›ºå®š18ä¸ªç‚¹ã€‚</p><p>COde:<a href="https://github.com/cfzd/Ultra-Fast-Lane-Detection-v2">https://github.com/cfzd/Ultra-Fast-Lane-Detection-v2</a></p><div>  <iframe src="/pdfjs/web/viewer.html?file=https://github.com/geiyiren/LDWPaper/blob/main/Ultra%20Fast%20Deep%20Lane%20Detection%20with%20Hybrid%20Anchor%20Driven%20Ordinal%20Classification.pdf" width="100%" height="500px" frameborder="0">  </iframe></div> <h1 id="å‚è€ƒç½‘ç«™"><a href="#å‚è€ƒç½‘ç«™" class="headerlink" title="å‚è€ƒç½‘ç«™"></a>å‚è€ƒç½‘ç«™</h1><ul><li><a href="https://mp.weixin.qq.com/s/ylNM8xA2iao2jvB_NaQ6FA">https://mp.weixin.qq.com/s/ylNM8xA2iao2jvB_NaQ6FA</a></li><li><a href="https://mp.weixin.qq.com/s/xFTdsSIMPbyyt6RIyYqb4A">https://mp.weixin.qq.com/s/xFTdsSIMPbyyt6RIyYqb4A</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> è½¦é“çº¿æ£€æµ‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è½¦é“çº¿æ£€æµ‹ </tag>
            
            <tag> Ultra </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ultra Fast Structure-aware Deep Lane Detection</title>
      <link href="/2024/09/24/ultra-fast-structure-aware-deep-lane-detection/"/>
      <url>/2024/09/24/ultra-fast-structure-aware-deep-lane-detection/</url>
      
        <content type="html"><![CDATA[<p>å°†è½¦é“çº¿æ£€æµ‹çš„è¿‡ç¨‹ï¼Œè§†ä¸ºåœ¨å…¨å±€ç‰¹å¾(é€šè¿‡å…¨å·ç§¯CNNæå–åˆ°çš„ç‰¹å¾å›¾)çš„åŸºç¡€ä¸Šï¼ŒåŸºäºè¡Œæ–¹å‘ä¸Šçš„ä½ç½®é€‰æ‹©ä¸åˆ†ç±»ã€‚æ¯ä¸ªå›¾åƒ4æ¡è½¦é“çº¿ï¼Œæ¯æ¡è½¦é“çº¿å›ºå®š18ä¸ªç‚¹ã€‚</p><p>COde:<a href="https://github.com/cfzd/Ultra-Fast-Lane-Detection">https://github.com/cfzd/Ultra-Fast-Lane-Detection</a></p><h1 id="å‚è€ƒç½‘ç«™"><a href="#å‚è€ƒç½‘ç«™" class="headerlink" title="å‚è€ƒç½‘ç«™"></a>å‚è€ƒç½‘ç«™</h1><ul><li><a href="https://mp.weixin.qq.com/s/ylNM8xA2iao2jvB_NaQ6FA">https://mp.weixin.qq.com/s/ylNM8xA2iao2jvB_NaQ6FA</a></li><li><a href="https://mp.weixin.qq.com/s/xFTdsSIMPbyyt6RIyYqb4A">https://mp.weixin.qq.com/s/xFTdsSIMPbyyt6RIyYqb4A</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> è½¦é“çº¿æ£€æµ‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è½¦é“çº¿æ£€æµ‹ </tag>
            
            <tag> Ultra </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linuxæ€§èƒ½åˆ†æ</title>
      <link href="/2024/09/14/linux-xing-neng-fen-xi/"/>
      <url>/2024/09/14/linux-xing-neng-fen-xi/</url>
      
        <content type="html"><![CDATA[<h1 id="perf"><a href="#perf" class="headerlink" title="perf"></a>perf</h1><h2 id="ç”Ÿæˆç«ç„°å›¾è¿›è¡ŒCPUå ç”¨åˆ†æ"><a href="#ç”Ÿæˆç«ç„°å›¾è¿›è¡ŒCPUå ç”¨åˆ†æ" class="headerlink" title="ç”Ÿæˆç«ç„°å›¾è¿›è¡ŒCPUå ç”¨åˆ†æ"></a>ç”Ÿæˆç«ç„°å›¾è¿›è¡ŒCPUå ç”¨åˆ†æ</h2><ul><li>é¦–å…ˆä½¿ç”¨ perf record å‘½ä»¤è®°å½•è¿›ç¨‹çš„ CPU ä½¿ç”¨æƒ…å†µ</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æŒ‡å®šçº¿ç¨‹ID</span>./perf record <span class="token parameter variable">-F</span> <span class="token number">99</span> <span class="token parameter variable">-p</span> çº¿ç¨‹ID <span class="token parameter variable">-g</span> - <span class="token function">sleep</span> <span class="token number">60</span><span class="token comment">#æŒ‡å®šçº¿ç¨‹åç§°</span>./perf record <span class="token parameter variable">-F</span> <span class="token number">99</span> <span class="token parameter variable">-p</span> <span class="token variable"><span class="token variable">$(</span>pidof çº¿ç¨‹åç§°<span class="token variable">)</span></span> <span class="token parameter variable">-g</span> - <span class="token function">sleep</span> <span class="token number">60</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ä½¿ç”¨ perf script å·¥å…·å¯¹ perf.data è¿›è¡Œè§£æ</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> perf script <span class="token parameter variable">-i</span> perf.data <span class="token operator">&amp;></span> perf.unfold<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>ä½¿ç”¨ Flame Graph å·¥å…·å°† perf.unfold ä¸­çš„ç¬¦å·æŠ˜å  &#x2F;&#x2F;ç”Ÿæˆè„šæœ¬æ–‡ä»¶</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> ./FlameGraph/stackcollapse-perf.pl perf.unfold <span class="token operator">&amp;></span> perf.folded<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>ä½¿ç”¨ Flame Graph å·¥å…·å°† perf.folded ç”Ÿæˆ svg ç«ç„°å›¾</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> FlameGraph/flamegraph.pl perf.folded <span class="token operator">></span> perf.svg<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="å®æ—¶æ˜¾ç¤ºCPUå ç”¨"><a href="#å®æ—¶æ˜¾ç¤ºCPUå ç”¨" class="headerlink" title="å®æ—¶æ˜¾ç¤ºCPUå ç”¨"></a>å®æ—¶æ˜¾ç¤ºCPUå ç”¨</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æŒ‡å®šè¿›ç¨‹</span>./perf <span class="token function">top</span> <span class="token parameter variable">-d1</span> <span class="token parameter variable">-p</span> <span class="token variable"><span class="token variable">$(</span>pidof çº¿ç¨‹åç§°<span class="token variable">)</span></span><span class="token comment"># æŒ‡å®šçº¿ç¨‹+åº“</span>./perf <span class="token function">top</span> <span class="token parameter variable">-d1</span> <span class="token parameter variable">--dsos</span> åŠ¨æ€åº“.so <span class="token parameter variable">-p</span> <span class="token variable"><span class="token variable">$(</span>pidof çº¿ç¨‹åç§°<span class="token variable">)</span></span><span class="token comment">#æŒ‡å®šçº¿ç¨‹</span>./perf <span class="token function">top</span> <span class="token parameter variable">-d1</span> <span class="token parameter variable">-t</span> çº¿ç¨‹ID<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æŸ¥çœ‹ç¨‹åºå ç”¨CPUçš„ä½ç½®<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">geiyiren:build$ addr2line <span class="token parameter variable">-e</span> ./install/lib/liblane_detection_adas.so 0x00014c14/home/geiyiren/Code/5_adas/adas_core/src/perception/lanes/lines/detector/perceptron.cpp:114<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>0x00014c14ä¸º.&#x2F;perf topè¾“å‡ºçš„åº“çš„åœ°å€</li></ul><h2 id="ç¡®ä¿perfåˆ†ææ—¶å¯ä»¥çœ‹åˆ°å‡½æ•°åç§°"><a href="#ç¡®ä¿perfåˆ†ææ—¶å¯ä»¥çœ‹åˆ°å‡½æ•°åç§°" class="headerlink" title="ç¡®ä¿perfåˆ†ææ—¶å¯ä»¥çœ‹åˆ°å‡½æ•°åç§°"></a>ç¡®ä¿perfåˆ†ææ—¶å¯ä»¥çœ‹åˆ°å‡½æ•°åç§°</h2><ul><li><p>å†…æ ¸æ”¯æŒperfåŠŸèƒ½</p></li><li><p>perfç‰ˆæœ¬å’Œå†…æ ¸ç‰ˆæœ¬ä¸€è‡´</p></li><li><p>ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­åŒ…å«è°ƒè¯•ä¿¡æ¯  </p><p>åœ¨CMakeLists.txtä¸­è®¾ç½®ç¼–è¯‘é€‰é¡¹ä¸º  <code>set(CMAKE_CXX_FLAGS &quot;$&#123;CMAKE_CXX_FLAGS&#125; -g&quot;)</code></p></li><li><p>è®¾ç½®å‡½æ•°çš„ç¬¦å·çš„å¯è§æ€§ä¸ºâ€defaultâ€  </p><p>æ–¹æ³•1ï¼šåœ¨CMakeLists.txtä¸­è®¾ç½®<br><code>add_definitions(&quot; -fvisibility=hidden &quot;)</code></p><p>æ–¹æ³•2ï¼šåœ¨å‡½æ•°å£°æ˜æ—¶ï¼Œæ˜¾å¼æŒ‡å®šå‡½æ•°çš„å¯è§æ€§<br><code>__attribute__((visibility(&quot;default&quot;))) void function();</code></p><blockquote><p>åœ¨adasä»£ç ä¸­å°†å‡½æ•°æˆ–è€…ç±»å£°æ˜ä¸º<code>HQ_FLAG_LOCAL</code>æ—¶ï¼Œè¡¨ç¤ºç¬¦å·ä¸å¯è§ï¼›å£°æ˜ä¸º<code>HQ_FLAG_DLL_API</code>æ—¶ç¬¦å·å¯è§ã€‚</p></blockquote></li></ul><h1 id="top"><a href="#top" class="headerlink" title="top"></a>top</h1><ul><li>top</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">TERM</span></span><span class="token operator">=</span>xterm<span class="token function">top</span> <span class="token parameter variable">-p</span> <span class="token variable"><span class="token variable">$(</span>pidof çº¿ç¨‹åç§°<span class="token variable">)</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li>busybox top<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">busybox <span class="token function">top</span> <span class="token parameter variable">-p</span> <span class="token variable"><span class="token variable">$(</span>pidof çº¿ç¨‹åç§°<span class="token variable">)</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><h1 id="mpstat"><a href="#mpstat" class="headerlink" title="mpstat"></a>mpstat</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">mpstat <span class="token parameter variable">-P</span> ALL <span class="token number">1</span> <span class="token number">10</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>mpstatï¼šæ˜¾ç¤ºå¤„ç†å™¨ç»Ÿè®¡ä¿¡æ¯çš„å‘½ä»¤ã€‚</li><li>-P ALLï¼šæ˜¾ç¤ºæ‰€æœ‰å¤„ç†å™¨çš„ç»Ÿè®¡ä¿¡æ¯çš„é€‰é¡¹ã€‚</li><li>1ï¼šæŒ‡å®šæ›´æ–°ä¹‹é—´çš„æ—¶é—´é—´éš”ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚</li><li>10ï¼šè¡¨ç¤ºè¦æ˜¾ç¤ºçš„æ›´æ–°æ¬¡æ•°ã€‚</li></ul><h1 id="åæ±‡ç¼–"><a href="#åæ±‡ç¼–" class="headerlink" title="åæ±‡ç¼–"></a>åæ±‡ç¼–</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> gcc-arm-linux-gnueabi<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="sysstatä½¿ç”¨"><a href="#sysstatä½¿ç”¨" class="headerlink" title="sysstatä½¿ç”¨"></a>sysstatä½¿ç”¨</h1><ul><li><p>ä¸‹è½½sysstatæºç </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">wget</span> https://github.com/sysstat/sysstat/archive/master.zip<span class="token function">unzip</span> sysstat-master.zip<span class="token builtin class-name">cd</span> sysstat-master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>é…ç½®RV1126äº¤å‰ç¼–è¯‘å·¥å…·é“¾</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">CROSS_COMPILE</span><span class="token operator">=</span>arm-linux-gnueabihf-<span class="token builtin class-name">export</span> <span class="token assign-left variable">ARCH</span><span class="token operator">=</span>arm<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>é…ç½®ç¼–è¯‘é€‰é¡¹</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">./configure <span class="token assign-left variable">CC</span><span class="token operator">=</span><span class="token variable">$&#123;CROSS_COMPILE&#125;</span>gcc <span class="token parameter variable">--host</span><span class="token operator">=</span>arm-linux-gnueabihf <span class="token parameter variable">--prefix</span><span class="token operator">=</span>å·¥å…·å®‰è£…çš„ç»å¯¹è·¯å¾„<span class="token function">make</span><span class="token function">sudo</span> <span class="token function">make</span> <span class="token function">install</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å®‰è£…åç”Ÿæˆçš„å·¥å…·å­˜æ”¾åœ¨<code>å·¥å…·å®‰è£…çš„ç»å¯¹è·¯å¾„</code></p></li><li><p>iostat - æä¾›CPUç»Ÿè®¡ï¼Œå­˜å‚¨I&#x2F;Oç»Ÿè®¡ï¼ˆç£ç›˜è®¾å¤‡ï¼Œåˆ†åŒºåŠç½‘ç»œæ–‡ä»¶ç³»ç»Ÿï¼‰</p></li><li><p>mpstat - æä¾›å•ä¸ªæˆ–ç»„åˆCPUç›¸å…³ç»Ÿè®¡</p></li><li><p>pidstat - æä¾›Linuxè¿›ç¨‹çº§åˆ«ç»Ÿè®¡ï¼šI&#x2F;Oã€CPUã€å†…å­˜ç­‰</p></li><li><p>sar - æ”¶é›†ã€æŠ¥å‘Šã€ä¿å­˜ç³»ç»Ÿæ´»åŠ¨ä¿¡æ¯ï¼šCPUã€å†…å­˜ã€ç£ç›˜ã€ä¸­æ–­ã€ç½‘ç»œæ¥å£ã€TTYã€å†…æ ¸è¡¨ç­‰</p></li><li><p>sadc - ç³»ç»Ÿæ´»åŠ¨æ•°æ®æ”¶é›†å™¨ï¼Œä½œä¸ºsaråç«¯ä½¿ç”¨</p></li><li><p>sa1 - æ”¶é›†ç³»ç»Ÿæ´»åŠ¨æ—¥å¸¸æ•°æ®ï¼Œå¹¶äºŒè¿›åˆ¶æ ¼å¼å­˜å‚¨ï¼Œå®ƒä½œä¸ºsadcçš„å·¥å…·çš„å‰ç«¯ï¼Œå¯ä»¥é€šè¿‡cronæ¥è°ƒç”¨</p></li><li><p>sa2 - ç”Ÿæˆç³»ç»Ÿæ¯æ—¥æ´»åŠ¨æŠ¥å‘Šï¼ŒåŒæ ·å¯ä½œä¸ºsadcçš„å·¥å…·çš„å‰ç«¯ï¼Œå¯ä»¥é€šè¿‡cronæ¥è°ƒç”¨</p></li><li><p>sadf - å¯ä»¥ä»¥CSVã€XMLæ ¼å¼ç­‰æ˜¾ç¤ºsaræ”¶é›†çš„æ€§èƒ½æ•°æ®ï¼Œè¿™æ ·éå¸¸æ–¹ä¾¿çš„å°†ç³»ç»Ÿæ•°æ®å¯¼å…¥åˆ°æ•°æ®åº“ä¸­ï¼Œæˆ–å¯¼å…¥åˆ°Excelä¸­æ¥ç”Ÿæˆå›¾è¡¨</p></li><li><p>nfsiostat-sysstat: æä¾›NFS I&#x2F;Oç»Ÿè®¡</p></li><li><p>cifsiostat: æä¾›CIFSç»Ÿè®¡</p></li></ul><h2 id="pidstatä½¿ç”¨"><a href="#pidstatä½¿ç”¨" class="headerlink" title="pidstatä½¿ç”¨"></a>pidstatä½¿ç”¨</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Usage: ./pidstat <span class="token punctuation">[</span> options <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token operator">&lt;</span>interval<span class="token operator">></span> <span class="token punctuation">[</span> <span class="token operator">&lt;</span>count<span class="token operator">></span> <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token operator">&lt;</span>program<span class="token operator">></span> <span class="token operator">&lt;</span>args<span class="token operator">></span> <span class="token punctuation">]</span>Options are:<span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-H</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-h</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-I</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-l</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-R</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-r</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-s</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-t</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-U</span> <span class="token punctuation">[</span> <span class="token operator">&lt;</span>username<span class="token operator">></span> <span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">[</span> <span class="token parameter variable">-u</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-V</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-v</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-w</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-C</span> <span class="token operator">&lt;</span>command<span class="token operator">></span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-G</span> <span class="token operator">&lt;</span>process_name<span class="token operator">></span> <span class="token punctuation">]</span><span class="token punctuation">[</span> <span class="token parameter variable">-p</span> <span class="token punctuation">&#123;</span> <span class="token operator">&lt;</span>pid<span class="token operator">></span> <span class="token punctuation">[</span>,<span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token operator">|</span> SELF <span class="token operator">|</span> ALL <span class="token punctuation">&#125;</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-T</span> <span class="token punctuation">&#123;</span> TASK <span class="token operator">|</span> CHILD <span class="token operator">|</span> ALL <span class="token punctuation">&#125;</span> <span class="token punctuation">]</span><span class="token punctuation">[</span> <span class="token parameter variable">--dec</span><span class="token operator">=</span><span class="token punctuation">&#123;</span> <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">--human</span> <span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ä½¿ç”¨æ–¹æ³•<br> <code>./pidstat -p 4045 -t -u -r 1 10</code></li></ul><blockquote><p>-uç»Ÿè®¡CPUä½¿ç”¨ã€‚-rç»Ÿè®¡å†…å­˜ä½¿ç”¨ã€‚-tç»Ÿè®¡çº¿ç¨‹ã€‚-pæŒ‡å®šè¿›ç¨‹id</p></blockquote><h2 id="sarä½¿ç”¨"><a href="#sarä½¿ç”¨" class="headerlink" title="sarä½¿ç”¨"></a>sarä½¿ç”¨</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Usage: ./sar <span class="token punctuation">[</span> options <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token operator">&lt;</span>interval<span class="token operator">></span> <span class="token punctuation">[</span> <span class="token operator">&lt;</span>count<span class="token operator">></span> <span class="token punctuation">]</span> <span class="token punctuation">]</span>Main options and reports <span class="token punctuation">(</span>report name between square brackets<span class="token punctuation">)</span>:        <span class="token parameter variable">-B</span>      Paging statistics <span class="token punctuation">[</span>A_PAGE<span class="token punctuation">]</span>        <span class="token parameter variable">-b</span>      I/O and transfer rate statistics <span class="token punctuation">[</span>A_IO<span class="token punctuation">]</span>        <span class="token parameter variable">-d</span>      Block devices statistics <span class="token punctuation">[</span>A_DISK<span class="token punctuation">]</span>        <span class="token parameter variable">-F</span> <span class="token punctuation">[</span> MOUNT <span class="token punctuation">]</span>                Filesystems statistics <span class="token punctuation">[</span>A_FS<span class="token punctuation">]</span>        <span class="token parameter variable">-H</span>      Hugepages utilization statistics <span class="token punctuation">[</span>A_HUGE<span class="token punctuation">]</span>        <span class="token parameter variable">-I</span> <span class="token punctuation">[</span> SUM <span class="token operator">|</span> ALL <span class="token punctuation">]</span>                Interrupts statistics <span class="token punctuation">[</span>A_IRQ<span class="token punctuation">]</span>        <span class="token parameter variable">-m</span> <span class="token punctuation">&#123;</span> <span class="token operator">&lt;</span>keyword<span class="token operator">></span> <span class="token punctuation">[</span>,<span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token operator">|</span> ALL <span class="token punctuation">&#125;</span>                Power management statistics <span class="token punctuation">[</span>A_PWR_<span class="token punctuation">..</span>.<span class="token punctuation">]</span>                Keywords are:                BAT     Batteries capacity                CPU     CPU instantaneous clock frequency                FAN     Fans speed                FREQ    CPU average clock frequency                IN      Voltage inputs                TEMP    Devices temperature                USB     USB devices plugged into the system        <span class="token parameter variable">-n</span> <span class="token punctuation">&#123;</span> <span class="token operator">&lt;</span>keyword<span class="token operator">></span> <span class="token punctuation">[</span>,<span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token operator">|</span> ALL <span class="token punctuation">&#125;</span>                Network statistics <span class="token punctuation">[</span>A_NET_<span class="token punctuation">..</span>.<span class="token punctuation">]</span>                Keywords are:                DEV     Network interfaces                EDEV    Network interfaces <span class="token punctuation">(</span>errors<span class="token punctuation">)</span>                NFS     NFS client                NFSD    NFS server                SOCK    Sockets <span class="token punctuation">(</span>v4<span class="token punctuation">)</span>                IP      IP traffic      <span class="token punctuation">(</span>v4<span class="token punctuation">)</span>                EIP     IP traffic      <span class="token punctuation">(</span>v4<span class="token punctuation">)</span> <span class="token punctuation">(</span>errors<span class="token punctuation">)</span>                ICMP    ICMP traffic    <span class="token punctuation">(</span>v4<span class="token punctuation">)</span>                EICMP   ICMP traffic    <span class="token punctuation">(</span>v4<span class="token punctuation">)</span> <span class="token punctuation">(</span>errors<span class="token punctuation">)</span>                TCP     TCP traffic     <span class="token punctuation">(</span>v4<span class="token punctuation">)</span>                ETCP    TCP traffic     <span class="token punctuation">(</span>v4<span class="token punctuation">)</span> <span class="token punctuation">(</span>errors<span class="token punctuation">)</span>                UDP     UDP traffic     <span class="token punctuation">(</span>v4<span class="token punctuation">)</span>                SOCK6   Sockets <span class="token punctuation">(</span>v6<span class="token punctuation">)</span>                IP6     IP traffic      <span class="token punctuation">(</span>v6<span class="token punctuation">)</span>                EIP6    IP traffic      <span class="token punctuation">(</span>v6<span class="token punctuation">)</span> <span class="token punctuation">(</span>errors<span class="token punctuation">)</span>                ICMP6   ICMP traffic    <span class="token punctuation">(</span>v6<span class="token punctuation">)</span>                EICMP6  ICMP traffic    <span class="token punctuation">(</span>v6<span class="token punctuation">)</span> <span class="token punctuation">(</span>errors<span class="token punctuation">)</span>                UDP6    UDP traffic     <span class="token punctuation">(</span>v6<span class="token punctuation">)</span>                FC      Fibre channel HBAs                SOFT    Software-based network processing        <span class="token parameter variable">-q</span> <span class="token punctuation">[</span> <span class="token operator">&lt;</span>keyword<span class="token operator">></span> <span class="token punctuation">[</span>,<span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token operator">|</span> PSI <span class="token operator">|</span> ALL <span class="token punctuation">]</span>                System load and pressure-stall statistics                Keywords are:                LOAD    Queue length and load average statistics <span class="token punctuation">[</span>A_QUEUE<span class="token punctuation">]</span>                CPU     Pressure-stall CPU statistics <span class="token punctuation">[</span>A_PSI_CPU<span class="token punctuation">]</span>                IO      Pressure-stall I/O statistics <span class="token punctuation">[</span>A_PSI_IO<span class="token punctuation">]</span>                MEM     Pressure-stall memory statistics <span class="token punctuation">[</span>A_PSI_MEM<span class="token punctuation">]</span>        <span class="token parameter variable">-r</span> <span class="token punctuation">[</span> ALL <span class="token punctuation">]</span>                Memory utilization statistics <span class="token punctuation">[</span>A_MEMORY<span class="token punctuation">]</span>        <span class="token parameter variable">-S</span>      Swap space utilization statistics <span class="token punctuation">[</span>A_MEMORY<span class="token punctuation">]</span>        <span class="token parameter variable">-u</span> <span class="token punctuation">[</span> ALL <span class="token punctuation">]</span>                CPU utilization statistics <span class="token punctuation">[</span>A_CPU<span class="token punctuation">]</span>        <span class="token parameter variable">-v</span>      Kernel tables statistics <span class="token punctuation">[</span>A_KTABLES<span class="token punctuation">]</span>        <span class="token parameter variable">-W</span>      Swapping statistics <span class="token punctuation">[</span>A_SWAP<span class="token punctuation">]</span>        <span class="token parameter variable">-w</span>      Task creation and system switching statistics <span class="token punctuation">[</span>A_PCSW<span class="token punctuation">]</span>        <span class="token parameter variable">-y</span>      TTY devices statistics <span class="token punctuation">[</span>A_SERIAL<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ä½¿ç”¨æ–¹æ³•<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span>:äº¤å‰ç¼–è¯‘ç”Ÿæˆçš„lib/saçš„è·¯å¾„./sar <span class="token parameter variable">-u</span> <span class="token number">1</span> <span class="token number">10</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>ä¸Šè¿°å‘½ä»¤å°†ç»Ÿè®¡10æ¬¡CPUå ç”¨ï¼Œæ¯æ¬¡é—´éš”1s<blockquote><p>sar ä¾èµ–<code>sadc</code>,è¿™é‡Œéœ€è¦æŒ‡å®š<code>sadc</code>æ‰€åœ¨ç›®å½•çš„è·¯å¾„</p></blockquote></li></ul>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> perf </tag>
            
            <tag> top </tag>
            
            <tag> sysstat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022å¹´è½¦é“çº¿æ£€æµ‹ç»¼è¿°</title>
      <link href="/2024/09/14/2022-nian-che-dao-xian-jian-ce-zong-shu/"/>
      <url>/2024/09/14/2022-nian-che-dao-xian-jian-ce-zong-shu/</url>
      
        <content type="html"><![CDATA[<ul><li><a href="https://blog.csdn.net/u012932320/article/details/125379388?spm=1001.2101.3001.6661.1&utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~baidujs_baidulandingword~Ctr-1-125379388-blog-127323953.235%5Ev43%5Epc_blog_bottom_relevance_base3&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~baidujs_baidulandingword~Ctr-1-125379388-blog-127323953.235%5Ev43%5Epc_blog_bottom_relevance_base3&utm_relevant_index=1">2022å¹´è½¦é“çº¿æ£€æµ‹ç»¼è¿°</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> è½¦é“çº¿æ£€æµ‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç»¼è¿° </tag>
            
            <tag> è½¦é“çº¿æ£€æµ‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LaneNetå®ç°è½¦é“çº¿åˆ†å‰²ä¸èšç±»çš„ç«¯åˆ°ç«¯ç½‘ç»œ</title>
      <link href="/2024/09/14/lanenet-shi-xian-che-dao-xian-fen-ge-yu-ju-lei-de-duan-dao-duan-wang-luo/"/>
      <url>/2024/09/14/lanenet-shi-xian-che-dao-xian-fen-ge-yu-ju-lei-de-duan-dao-duan-wang-luo/</url>
      
        <content type="html"><![CDATA[<ul><li><p>æœ¬æ–‡å°†è½¦é“æ£€æµ‹é—®é¢˜çœ‹ä½œä¸€ä¸ªå®ä¾‹åˆ†å‰²é—®é¢˜ï¼ˆå…¶ä¸­æ¯ä¸ªè½¦é“éƒ½å½¢æˆè‡ªå·±çš„å®ä¾‹ï¼‰å¯ä»¥è¿›è¡Œç«¯åˆ°ç«¯çš„è®­ç»ƒã€‚</p></li><li><p>è£…é…è½¦é“å‰å¯¹åˆ†æ®µçš„è½¦é“å®ä¾‹è¿›è¡Œå‚æ•°åŒ–ï¼Œæˆ‘ä»¬åº”ç”¨äº†ä¸€ä¸ªä»¥å›¾åƒä¸ºæ¡ä»¶çš„å­¦ä¹ é€è§†å˜æ¢ï¼ˆä¸é€‚ç”¨äºå›ºå®šçš„â€œé¸Ÿç°â€å˜æ¢ï¼‰ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬ç¡®ä¿äº†ä¸€ç§å¯¹é“è·¯å˜åŒ–å…·æœ‰é²æ£’æ€§çš„è½¦é“åŒ¹é…ã€‚</p></li><li><p>è¿è¡Œé€Ÿåº¦ä¸º50å¸§&#x2F;ç§’ï¼Œå¯ä»¥å¤„ç†ä¸åŒæ•°é‡çš„è½¦é“å¹¶åº”å¯¹è½¦é“å˜åŒ–ã€‚</p></li><li><p>åœ¨tuSimple æ•°æ®é›†ä¸Šå–å¾—äº†ä¸é”™çš„æ•ˆæœã€‚</p></li></ul><p>Paper:<a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/LDW/LaneNet_Towards%20End_to_End%20Lane%20Detection%20an%20Instance%20Segmentation%20Approach.pdf">Towards End-to-End Lane Detection an Instance Segmentation Approach</a></p><p>COde:<a href="https://github.com/MaybeShewill-CV/lanenet-lane-detection">https://github.com/MaybeShewill-CV/lanenet-lane-detection</a></p><h1 id="å‚è€ƒç½‘ç«™"><a href="#å‚è€ƒç½‘ç«™" class="headerlink" title="å‚è€ƒç½‘ç«™"></a>å‚è€ƒç½‘ç«™</h1><ul><li><a href="https://www.cnblogs.com/xiangs/p/12707472.html">https://www.cnblogs.com/xiangs/p/12707472.html</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> è½¦é“çº¿æ£€æµ‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è½¦é“çº¿æ£€æµ‹ </tag>
            
            <tag> LaneNet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çŸ¥è¯†è’¸é¦åœ¨è½¦é“çº¿åˆ†å‰²ä¸Šçš„åº”ç”¨</title>
      <link href="/2024/09/14/zhi-shi-zheng-liu-zai-che-dao-xian-fen-ge-shang-de-ying-yong/"/>
      <url>/2024/09/14/zhi-shi-zheng-liu-zai-che-dao-xian-fen-ge-shang-de-ying-yong/</url>
      
        <content type="html"><![CDATA[<ul><li><p>çŸ¥è¯†è’¸é¦ï¼ˆKnowledge distillationï¼‰ï¼šç”¨äºæŠŠå¤§ç½‘ç»œå­¦ä¹ åˆ°çš„å†…å®¹ï¼ˆknowledgeï¼‰è¿ç§»åˆ°å°ç½‘ç»œä¸­ã€‚å…·ä½“æœ‰ä¸¤ä¸ªç›®æ ‡è¦å­¦ä¹ ï¼Œä¸€æ˜¯å°ç½‘ç»œè¾“å‡ºä¸çœŸå€¼çš„ç›¸ä¼¼ï¼ŒäºŒæ˜¯è®©å°ç½‘ç»œä¸å¤§ç½‘ç»œçš„è¾“å‡ºç›¸ä¼¼ã€‚</p></li><li><p>æ³¨æ„åŠ›è’¸é¦ï¼ˆAttention distillationï¼‰ï¼šç”¨äºæŠŠå¤§ç½‘ç»œå­¦ä¹ åˆ°çš„æ³¨æ„åŠ›ç‰¹å¾å›¾ï¼ˆattention mapï¼‰è¿ç§»åˆ°å°ç½‘ç»œä¸­ã€‚å…·ä½“åœ¨çŸ¥è¯†è’¸é¦åŸºç¡€ä¸Šï¼Œå†å¯¹ç½‘ç»œä¸­é—´å±‚ç‰¹å¾è¿›è¡Œè¿ç§»ï¼Œä»¥ä¿è¯å¤§å°ç½‘ç»œä¸­é—´çš„æ³¨æ„åŠ›ç‰¹å¾å›¾ç›¸ä¼¼ã€‚</p></li><li><p>è‡ªæ³¨æ„åŠ›è’¸é¦ï¼ˆSelf Attention Distillationï¼‰ï¼šæŠ›å¼ƒå¤§ç½‘ç»œï¼Œå•ç‹¬åœ¨å°ç½‘ç»œä¸­å¯¹ä¸åŒå±‚å­¦ä¹ åˆ°çš„æ³¨æ„åŠ›ç‰¹å¾å›¾è¿›è¡Œè¿ç§»å­¦ä¹ ã€‚</p></li></ul><p>å°†SADåµŒå…¥åˆ°è‡ªå·±çš„ç½‘ç»œä¸­ï¼Œåªéœ€è¦åœ¨è®­ç»ƒé˜¶æ®µåŠ å…¥å³å¯ï¼Œå› æ­¤ä¸ä¼šç»™inferenceè¿‡ç¨‹å¢åŠ å¤šä½™çš„å‚æ•°å’Œè®¡ç®—é‡ï¼Œä¹Ÿä¸ä¼šå½±å“æ¨¡å‹çš„æ€§èƒ½ã€‚</p><p>Paper:<a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/LDW/SAD_%20Learning%20Lightweight%20Lane%20Detection%20CNNs%20by%20Self%20Attention%20Distillation.pdf">Learning Lightweight Lane Detection CNNs by Self Attention Distillation</a></p><p>COde:<a href="https://github.com/cardwing/Codes-for-Lane-Detection">https://github.com/cardwing/Codes-for-Lane-Detection</a></p><h1 id="å‚è€ƒç½‘ç«™"><a href="#å‚è€ƒç½‘ç«™" class="headerlink" title="å‚è€ƒç½‘ç«™"></a>å‚è€ƒç½‘ç«™</h1><ul><li><a href="https://www.cnblogs.com/xiangs/p/12707472.html">https://www.cnblogs.com/xiangs/p/12707472.html</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> è½¦é“çº¿æ£€æµ‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è½¦é“çº¿æ£€æµ‹ </tag>
            
            <tag> çŸ¥è¯†è’¸é¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>opencvå›¾åƒä¿å­˜ä¸è¯»å–æ—¶çš„åƒç´ ä¸€è‡´æ€§</title>
      <link href="/2024/09/11/opencv-tu-xiang-bao-cun-yu-du-qu-shi-de-xiang-su-yi-zhi-xing/"/>
      <url>/2024/09/11/opencv-tu-xiang-bao-cun-yu-du-qu-shi-de-xiang-su-yi-zhi-xing/</url>
      
        <content type="html"><![CDATA[<h1 id="ç°è±¡è¯´æ˜"><a href="#ç°è±¡è¯´æ˜" class="headerlink" title="ç°è±¡è¯´æ˜"></a>ç°è±¡è¯´æ˜</h1><p>ä½¿ç”¨opencvåˆ›å»ºä¸€å¼ é»‘å›¾ï¼Œç„¶åä¿å­˜ï¼Œå†è¯»å–ï¼Œå‘ç°å›¾åƒåƒç´ è¢«ä¿®æ”¹</p><h1 id="åŸå› ä¸€ï¼šä¿å­˜å›¾åƒæ—¶ä½¿ç”¨äº†jpgæˆ–jpegæ ¼å¼çš„å›¾åƒ"><a href="#åŸå› ä¸€ï¼šä¿å­˜å›¾åƒæ—¶ä½¿ç”¨äº†jpgæˆ–jpegæ ¼å¼çš„å›¾åƒ" class="headerlink" title="åŸå› ä¸€ï¼šä¿å­˜å›¾åƒæ—¶ä½¿ç”¨äº†jpgæˆ–jpegæ ¼å¼çš„å›¾åƒ"></a>åŸå› ä¸€ï¼šä¿å­˜å›¾åƒæ—¶ä½¿ç”¨äº†<code>jpg</code>æˆ–<code>jpeg</code>æ ¼å¼çš„å›¾åƒ</h1><p><code>jpg</code>æˆ–<code>jpeg</code>æ ¼å¼çš„å›¾åƒåœ¨ä¿å­˜æ—¶ï¼Œä¼šä½¿ç”¨æœ‰æŸå‹ç¼©ï¼Œå¯¼è‡´å›¾åƒåƒç´ è¢«ä¿®æ”¹</p><h1 id="åŸå› äºŒï¼šä¿å­˜å›¾åƒæ—¶ä½¿ç”¨äº†å‹ç¼©å‚æ•°ï¼Œä¾‹å¦‚ä¿å­˜pngæ ¼å¼çš„å›¾åƒï¼Œä½†ä½¿ç”¨äº†cv2-IMWRITE-PNG-COMPRESSIONå‚æ•°"><a href="#åŸå› äºŒï¼šä¿å­˜å›¾åƒæ—¶ä½¿ç”¨äº†å‹ç¼©å‚æ•°ï¼Œä¾‹å¦‚ä¿å­˜pngæ ¼å¼çš„å›¾åƒï¼Œä½†ä½¿ç”¨äº†cv2-IMWRITE-PNG-COMPRESSIONå‚æ•°" class="headerlink" title="åŸå› äºŒï¼šä¿å­˜å›¾åƒæ—¶ä½¿ç”¨äº†å‹ç¼©å‚æ•°ï¼Œä¾‹å¦‚ä¿å­˜pngæ ¼å¼çš„å›¾åƒï¼Œä½†ä½¿ç”¨äº†cv2.IMWRITE_PNG_COMPRESSIONå‚æ•°"></a>åŸå› äºŒï¼šä¿å­˜å›¾åƒæ—¶ä½¿ç”¨äº†å‹ç¼©å‚æ•°ï¼Œä¾‹å¦‚ä¿å­˜<code>png</code>æ ¼å¼çš„å›¾åƒï¼Œä½†ä½¿ç”¨äº†<code>cv2.IMWRITE_PNG_COMPRESSION</code>å‚æ•°</h1><p><code>png</code>æ ¼å¼çš„å›¾åƒåœ¨ä¿å­˜æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æœ‰æŸå‹ç¼©ï¼Œä½†éœ€è¦ä½¿ç”¨<code>cv2.IMWRITE_PNG_COMPRESSION</code>å‚æ•°æ¥æŒ‡å®šå‹ç¼©è´¨é‡ï¼Œå¦åˆ™é»˜è®¤ä½¿ç”¨æ— æŸå‹ç¼©ï¼Œä¸ä¼šä¿®æ”¹å›¾åƒåƒç´ </p><p>æ”¯æŒå‹ç¼©çš„æ ¼å¼ï¼šPNGã€JPEGã€WebPã€TIFFï¼Œä¸”<strong>JPEGæ ¼å¼æ˜¯æœ‰æŸå‹ç¼©</strong></p><p>ä¸æ”¯æŒå‹ç¼©çš„æ ¼å¼ï¼šBMPã€PPM&#x2F;PGM&#x2F;PBM</p><h1 id="åŸå› ä¸‰ï¼šä¿å­˜å›¾åƒçš„é€šé“å’Œè¯»å–å›¾åƒçš„é€šé“ä¸ä¸€è‡´"><a href="#åŸå› ä¸‰ï¼šä¿å­˜å›¾åƒçš„é€šé“å’Œè¯»å–å›¾åƒçš„é€šé“ä¸ä¸€è‡´" class="headerlink" title="åŸå› ä¸‰ï¼šä¿å­˜å›¾åƒçš„é€šé“å’Œè¯»å–å›¾åƒçš„é€šé“ä¸ä¸€è‡´"></a>åŸå› ä¸‰ï¼šä¿å­˜å›¾åƒçš„é€šé“å’Œè¯»å–å›¾åƒçš„é€šé“ä¸ä¸€è‡´</h1><p>ä¾‹å¦‚ï¼š</p><p>å›¾åƒåˆ›å»ºæ—¶ä½¿ç”¨<code>image = np.zeros((128, 256), dtype=np.uint8)</code></p><p>ä¿å­˜æ—¶ä½¿ç”¨<code>cv2.imwrite(&#39;image.png&#39;, image)</code></p><p>è¯»å–æ—¶ä½¿ç”¨<code>image = cv2.imread(&#39;image.png&#39;, cv2.IMREAD_COLOR)</code>æˆ–<code>image = cv2.imread(&#39;image.png&#39;)</code></p><p>è¿™æ ·ä¼šå¯¼è‡´å›¾åƒçš„é€šé“ä¸ä¸€è‡´ï¼Œå¯¼è‡´å›¾åƒåƒç´ è¢«ä¿®æ”¹ï¼Œåˆ›å»ºçš„å›¾åƒä¸ºç°åº¦å›¾åƒ<code>8-bit Gray</code>ï¼Œè¯»å–çš„å›¾åƒæ—¶å¦‚æœä¸æŒ‡å®šé€šé“ï¼Œé»˜è®¤è¯»å–ä¸ºå½©è‰²å›¾åƒ<code>8-bit sRGB</code>ï¼Œå¯¼è‡´å›¾åƒåƒç´ è¢«ä¿®æ”¹</p><h1 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h1><ol><li><p>ä½¿ç”¨æ— æŸå‹ç¼©çš„æ ¼å¼ä¿å­˜å›¾åƒï¼Œä¾‹å¦‚<code>png</code>,<code>bmp</code>,<code>tiff</code>æ ¼å¼   </p></li><li><p>åˆ›å»ºå›¾åƒæ—¶æŒ‡å®šé€šé“ï¼Œä¾‹å¦‚<code>image = np.zeros((128, 256), dtype=np.uint8)</code>ï¼Œè¯»å–å›¾åƒæ—¶æŒ‡å®šé€šé“ï¼Œä¾‹å¦‚<code>image = cv2.imread(&#39;image.png&#39;, cv2.IMREAD_GRAYSCALE)</code></p></li><li><p>å°†å›¾åƒæ•°æ®ä¿å­˜ä¸ºnumpyæ–‡ä»¶ï¼Œå†è¯»å–ï¼Œä¾‹å¦‚<code>np.save(&#39;image.npy&#39;, image)</code>ï¼Œ<code>image = np.load(&#39;image.npy&#39;)</code></p></li><li><p>åœ¨å›¾åƒåˆ†å‰²ä»»åŠ¡ä¸­ï¼Œä½¿ç”¨äºŒå€¼å›¾æ˜¯ï¼Œå¯¹å›¾åƒè¿›è¡Œç±»åˆ«å¤„ç†æ—¶å¦‚ä¸‹æ“ä½œï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">mask <span class="token operator">=</span>cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'mask.png'</span><span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>IMREAD_GRAYSCALE<span class="token punctuation">)</span><span class="token comment"># mask[mask!=0]=1</span>mask<span class="token punctuation">[</span>mask<span class="token operator">&lt;=</span><span class="token number">250</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>mask<span class="token punctuation">[</span>mask<span class="token operator">></span><span class="token number">250</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨<code>mask[mask!=0]=255</code>åï¼Œå›¾åƒåƒç´ è¢«ä¿®æ”¹çš„ç°è±¡ä¸ºï¼š</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/opencv%E5%9B%BE%E5%83%8F%E4%BF%9D%E5%AD%98%E4%B8%8E%E8%AF%BB%E5%8F%96%E6%97%B6%E7%9A%84%E5%83%8F%E7%B4%A0%E4%B8%80%E8%87%B4%E6%80%A7/0.jpg"><br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/opencv%E5%9B%BE%E5%83%8F%E4%BF%9D%E5%AD%98%E4%B8%8E%E8%AF%BB%E5%8F%96%E6%97%B6%E7%9A%84%E5%83%8F%E7%B4%A0%E4%B8%80%E8%87%B4%E6%80%A7/1.jpg"></p><h1 id="æµ‹è¯•ç¨‹åº"><a href="#æµ‹è¯•ç¨‹åº" class="headerlink" title="æµ‹è¯•ç¨‹åº"></a>æµ‹è¯•ç¨‹åº</h1><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> cv2<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> sys<span class="token keyword">import</span> randomimage_formats <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token string">'.jpg'</span><span class="token punctuation">,</span>    <span class="token comment"># JPEG æ ¼å¼</span>    <span class="token string">'.jpeg'</span><span class="token punctuation">,</span>   <span class="token comment"># JPEG æ ¼å¼</span>    <span class="token string">'.png'</span><span class="token punctuation">,</span>    <span class="token comment"># PNG æ ¼å¼</span>    <span class="token string">'.bmp'</span><span class="token punctuation">,</span>    <span class="token comment"># BMP æ ¼å¼</span>    <span class="token string">'.tiff'</span><span class="token punctuation">,</span>   <span class="token comment"># TIFF æ ¼å¼</span>    <span class="token string">'.tif'</span><span class="token punctuation">,</span>    <span class="token comment"># TIFF æ ¼å¼</span><span class="token punctuation">]</span><span class="token comment"># åˆå§‹åŒ–è®¡æ•°å­—å…¸</span>format_counts <span class="token operator">=</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token keyword">for</span> fmt <span class="token keyword">in</span> image_formats<span class="token punctuation">&#125;</span><span class="token keyword">try</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># åˆ›å»ºå…¨é»‘å›¾åƒ</span>        image <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span>        <span class="token comment"># ä¿®æ”¹éƒ¨åˆ†åƒç´ ä¸º255</span>        <span class="token comment"># åœ†å¿ƒåæ ‡</span>        center <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>        <span class="token comment"># åœ†çš„åŠå¾„</span>        radius <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>        <span class="token comment"># ç‚¹çš„é¢œè‰²ï¼ˆBGRæ ¼å¼ï¼Œè¿™é‡Œæ˜¯çº¢è‰²ï¼‰</span>        color <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span>  <span class="token comment"># çº¢è‰²</span>        <span class="token comment"># ç‚¹çš„åŠå¾„ï¼ˆåœ¨å›¾åƒä¸Šç»˜åˆ¶çš„ç‚¹çš„åŠå¾„ï¼‰</span>        point_radius <span class="token operator">=</span> <span class="token number">2</span>        <span class="token comment"># ç”Ÿæˆåœ†ä¸Šçš„ç‚¹</span>        num_points <span class="token operator">=</span> <span class="token number">360</span>  <span class="token comment"># å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´ç‚¹çš„æ•°é‡</span>        <span class="token keyword">for</span> angle <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>num_points<span class="token punctuation">)</span><span class="token punctuation">:</span>            theta <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>pi <span class="token operator">*</span> angle <span class="token operator">/</span> num_points            x <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>center<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> radius <span class="token operator">*</span> np<span class="token punctuation">.</span>cos<span class="token punctuation">(</span>theta<span class="token punctuation">)</span><span class="token punctuation">)</span>            y <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>center<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> radius <span class="token operator">*</span> np<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>theta<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment"># è¾¹ç•Œæ£€æŸ¥</span>            <span class="token keyword">if</span> <span class="token number">0</span> <span class="token operator">&lt;=</span> x <span class="token operator">&lt;</span> image<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">and</span> <span class="token number">0</span> <span class="token operator">&lt;=</span> y <span class="token operator">&lt;</span> image<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                image<span class="token punctuation">[</span>y<span class="token punctuation">,</span> x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span>                        num_1 <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>image<span class="token operator">==</span><span class="token number">255</span><span class="token punctuation">)</span>        <span class="token builtin">format</span> <span class="token operator">=</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>image_formats<span class="token punctuation">)</span>                <span class="token comment"># æºæ–‡ä»¶è·¯å¾„</span>        source_file <span class="token operator">=</span> <span class="token string">'src_image'</span><span class="token operator">+</span><span class="token builtin">format</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>           <span class="token comment"># ä¿å­˜å›¾åƒ</span>        <span class="token comment"># np.save(source_file, image)</span>        cv2<span class="token punctuation">.</span>imwrite<span class="token punctuation">(</span>source_file<span class="token punctuation">,</span> image<span class="token punctuation">)</span>        <span class="token comment"># é‡æ–°åŠ è½½å›¾åƒ</span>        <span class="token comment"># loaded_image = np.load(source_file)</span>        loaded_image <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span>source_file<span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>IMREAD_GRAYSCALE<span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>loaded_image<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>        num_2 <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>loaded_image<span class="token operator">==</span><span class="token number">255</span><span class="token punctuation">)</span>        cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'image'</span><span class="token punctuation">,</span> loaded_image<span class="token punctuation">)</span>        cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> num_1<span class="token operator">!=</span>num_2<span class="token punctuation">:</span>            <span class="token comment"># æ£€æŸ¥æ‰©å±•åæ˜¯å¦åœ¨æ”¯æŒçš„æ ¼å¼ä¸­</span>            <span class="token keyword">if</span> <span class="token builtin">format</span> <span class="token keyword">in</span> format_counts<span class="token punctuation">:</span>                format_counts<span class="token punctuation">[</span><span class="token builtin">format</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>                        sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"\033[K"</span><span class="token punctuation">)</span>  <span class="token comment"># æ¸…é™¤å½“å‰è¡Œçš„å†…å®¹</span>        sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"\033[</span><span class="token interpolation"><span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span></span><span class="token string">G"</span></span><span class="token punctuation">)</span>  <span class="token comment"># å°†å…‰æ ‡ç§»åŠ¨åˆ°è¡Œçš„å¼€å§‹ä½ç½®</span>        sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Step </span><span class="token interpolation"><span class="token punctuation">&#123;</span><span class="token number">1000000</span><span class="token operator">-</span>i<span class="token punctuation">&#125;</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">&#123;</span>num_1<span class="token operator">-</span>num_2<span class="token punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>        sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>flush<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">,</span>format_counts<span class="token punctuation">)</span><span class="token keyword">except</span> KeyboardInterrupt<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">,</span>format_counts<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> opencv </category>
          
      </categories>
      
      
        <tags>
            
            <tag> opencv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾åƒç¼©æ”¾æ’å€¼æ–¹æ³•ä½¿ç”¨è¯´æ˜</title>
      <link href="/2024/08/27/tu-xiang-suo-fang-cha-zhi-fang-fa-shi-yong-shuo-ming/"/>
      <url>/2024/08/27/tu-xiang-suo-fang-cha-zhi-fang-fa-shi-yong-shuo-ming/</url>
      
        <content type="html"><![CDATA[<h1 id="æ–¹æ³•æ¦‚è§ˆ"><a href="#æ–¹æ³•æ¦‚è§ˆ" class="headerlink" title="æ–¹æ³•æ¦‚è§ˆ"></a>æ–¹æ³•æ¦‚è§ˆ</h1><ul><li>å›¾åƒåŠ è½½</li></ul><table><thead><tr><th align="center">åº“</th><th align="center">å‡½æ•°</th><th align="center">é»˜è®¤åŠ è½½å›¾åƒæ ¼å¼</th></tr></thead><tbody><tr><td align="center">OpenCV</td><td align="center">imread</td><td align="center"><code>BGR</code></td></tr><tr><td align="center">PIL</td><td align="center">open</td><td align="center">RGB</td></tr><tr><td align="center">torchvision.datasets</td><td align="center">ImageFolder</td><td align="center">RGB</td></tr></tbody></table><blockquote><p>ImageFolderç±»é€šè¿‡Pillowï¼ˆPILï¼‰åº“æ¥åŠ è½½å›¾åƒï¼Œè€ŒPillowåŠ è½½å›¾åƒçš„é»˜è®¤æ¨¡å¼æ˜¯RGBã€‚å› æ­¤ï¼Œä½¿ç”¨ImageFolderåŠ è½½å›¾åƒæ—¶ï¼Œå®ƒä»¬ä¼šä»¥RGBæ ¼å¼åŠ è½½ã€‚</p></blockquote><ul><li>å°ºå¯¸å˜æ¢</li></ul><table><thead><tr><th align="center">åº“</th><th align="center">å‡½æ•°</th><th align="center">é»˜è®¤åŠ è½½å›¾åƒæ ¼å¼</th></tr></thead><tbody><tr><td align="center">OpenCV</td><td align="center">resize</td><td align="center">åŒçº¿æ€§æ’å€¼<code>INTER_LINEAR</code></td></tr><tr><td align="center">PIL</td><td align="center">Resize</td><td align="center">æ ¹æ®è¾“å…¥å›¾åƒæ ¼å¼ç¡®å®š</td></tr><tr><td align="center">torchvision.transforms</td><td align="center">Resize</td><td align="center">åŒçº¿æ€§æ’å€¼<code>InterpolationMode.BILINEAR</code></td></tr></tbody></table><p><strong>æ³¨æ„ï¼šopencv çš„<code>INTER_NEAREST_EXACT</code>æ¯”ç‰¹ç²¾ç¡®è¿‘é‚»å–æ ·æ’å€¼æ–¹æ³•çš„ç»“æœå’ŒPILçš„<code>NEAREST</code>æœ€è¿‘é‚»ç®—æ³•çš„ç»“æœæ˜¯ä¸€è‡´çš„ã€‚</strong></p><h1 id="OpenCVå›¾åƒç¼©æ”¾"><a href="#OpenCVå›¾åƒç¼©æ”¾" class="headerlink" title="OpenCVå›¾åƒç¼©æ”¾"></a>OpenCVå›¾åƒç¼©æ”¾</h1><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> cv<span class="token double-colon punctuation">::</span><span class="token function">resize</span><span class="token punctuation">(</span>InputArray src<span class="token punctuation">,</span>OutputArray dst<span class="token punctuation">,</span>Size dsize<span class="token punctuation">,</span><span class="token keyword">double</span> fx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">double</span> fy <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">int</span> interpolation <span class="token operator">=</span> INTER_LINEAR <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>opencvé»˜è®¤çš„å›¾åƒç¼©æ”¾æ’å€¼æ–¹æ³•ä¸º<strong>åŒçº¿æ€§æ’å€¼</strong><code>INTER_LINEAR</code>ã€‚</li><li>æ”¯æŒçš„æ’å€¼æ–¹æ³•å¦‚ä¸‹ï¼š</li></ul><table><thead><tr><th align="center">æ’å€¼æ–¹æ³•</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">INTER_NEAREST</td><td align="center">è¿‘é‚»å–æ ·æ’å€¼</td></tr><tr><td align="center">INTER_LINEAR</td><td align="center">åŒçº¿æ€§æ’å€¼</td></tr><tr><td align="center">INTER_CUBIC</td><td align="center">åŒä¸‰æ¬¡æ’å€¼</td></tr><tr><td align="center">INTER_AREA</td><td align="center">åŒºåŸŸæ’å€¼ã€‚ä½¿ç”¨åƒç´ åŒºåŸŸå…³ç³»çš„é‡é‡‡æ ·ã€‚å®ƒå¯èƒ½æ˜¯ä¸€ç§é¦–é€‰çš„å›¾åƒæŠ½å–æ–¹æ³•ï¼Œå› ä¸ºå®ƒæä¾›äº†è«å°”â€™å…è´¹çš„ç»“æœã€‚ä½†æ˜¯å½“ç¼©æ”¾å›¾åƒæ—¶ï¼Œå®ƒç±»ä¼¼äº INTER _ NEAREST æ–¹æ³•ã€‚</td></tr><tr><td align="center">INTER_LANCZOS4</td><td align="center">Lanczosæ’å€¼ã€‚8ä¹˜ä»¥8çš„ Lanczos æ’å€¼</td></tr><tr><td align="center">INTER_LINEAR_EXACT</td><td align="center">Bit exact bilinear interpolation</td></tr><tr><td align="center">INTER_NEAREST_EXACT</td><td align="center">æ¯”ç‰¹ç²¾ç¡®è¿‘é‚»å–æ ·æ’å€¼ã€‚è¿™å°†äº§ç”Ÿä¸ PILã€ scikit-image æˆ– Matlab ä¸­æœ€è¿‘é‚»æ³•ç›¸åŒçš„ç»“æœ</td></tr><tr><td align="center">WARP_FILL_OUTLIERS</td><td align="center">flag:å¡«å……æ‰€æœ‰ç›®æ ‡å›¾åƒåƒç´ ã€‚å¦‚æœå…¶ä¸­ä¸€äº›å¯¹åº”äºæºå›¾åƒä¸­çš„å¼‚å¸¸å€¼ï¼Œåˆ™å°†å…¶è®¾ç½®ä¸ºé›¶</td></tr><tr><td align="center">WARP_INVERSE_MAP</td><td align="center">flag, inverse transformation</td></tr></tbody></table><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> cv<span class="token double-colon punctuation">::</span><span class="token function">resize</span><span class="token punctuation">(</span>InputArray src<span class="token punctuation">,</span>OutputArray dst<span class="token punctuation">,</span>Size dsize<span class="token punctuation">,</span><span class="token keyword">double</span> fx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">double</span> fy <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">int</span> interpolation <span class="token operator">=</span> INTER_LINEAR <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">cv<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>src<span class="token punctuation">,</span> dsize<span class="token punctuation">[</span><span class="token punctuation">,</span> dst<span class="token punctuation">[</span><span class="token punctuation">,</span> fx<span class="token punctuation">[</span><span class="token punctuation">,</span> fy<span class="token punctuation">[</span><span class="token punctuation">,</span> interpolation<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span>dst<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="torchvision-transformså›¾åƒç¼©æ”¾"><a href="#torchvision-transformså›¾åƒç¼©æ”¾" class="headerlink" title="torchvision.transformså›¾åƒç¼©æ”¾"></a>torchvision.transformså›¾åƒç¼©æ”¾</h1><ul><li><p>torchvision.transforms.Resizeå‡½æ•°å¯ä»¥å®ç°å›¾åƒçš„ç¼©æ”¾ï¼Œ<strong>é»˜è®¤æ’å€¼æ–¹æ³•ä¸ºåŒçº¿æ€§æ’å€¼</strong><code>InterpolationMode.BILINEAR</code>ã€‚</p></li><li><p>å¦‚æœè¾“å…¥ä¸ºå¼ é‡ï¼Œåˆ™ä»…æ”¯æŒä¸´è¿‘æ’å€¼<code>InterpolationMode.NEAREST</code>, åŒçº¿æ€§æ’å€¼<code>InterpolationMode.BILINEAR</code> å’ŒåŒä¸‰æ¬¡æ’å€¼<code>InterpolationMode.BICUBIC</code></p></li><li><p>ä¹Ÿæ”¯æŒPILåº“çš„æ’å€¼æ–¹æ³•,ä¾‹å¦‚ï¼š <code>transforms.Resize(args.resolution, interpolation=PIL.Image.BILINEAR)</code></p></li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Resize</span><span class="token punctuation">(</span>torch<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""Resize the input image to the given size.    If the image is torch Tensor, it is expected    to have [..., H, W] shape, where ... means an arbitrary number of leading dimensions    Args:        size (sequence or int): Desired output size. If size is a sequence like            (h, w), output size will be matched to this. If size is an int,            smaller edge of the image will be matched to this number.            i.e, if height > width, then image will be rescaled to            (size * height / width, size).            In torchscript mode size as single int is not supported, use a sequence of length 1: ``[size, ]``.        interpolation (InterpolationMode): Desired interpolation enum defined by            :class:`torchvision.transforms.InterpolationMode`. Default is ``InterpolationMode.BILINEAR``.            If input is Tensor, only ``InterpolationMode.NEAREST``, ``InterpolationMode.BILINEAR`` and            ``InterpolationMode.BICUBIC`` are supported.            For backward compatibility integer values (e.g. ``PIL.Image.NEAREST``) are still acceptable.    """</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="PILçš„å›¾åƒç¼©æ”¾"><a href="#PILçš„å›¾åƒç¼©æ”¾" class="headerlink" title="PILçš„å›¾åƒç¼©æ”¾"></a>PILçš„å›¾åƒç¼©æ”¾</h1><ul><li>é»˜è®¤çš„æ’å€¼æ–¹æ³•ä¼šæ ¹æ®è¾“å…¥å›¾åƒçš„ä¸åŒè€Œæœ‰æ‰€ä¸åŒï¼š</li></ul><table><thead><tr><th align="center">è¾“å…¥å›¾åƒæ ¼å¼</th><th align="center">å·®å€¼æ–¹æ³•</th></tr></thead><tbody><tr><td align="center"><code>1</code></td><td align="center"><code>Resampling.NEAREST</code></td></tr><tr><td align="center"><code>P</code></td><td align="center"><code>Resampling.NEAREST</code></td></tr><tr><td align="center">such as: <code>I;16</code> and so on</td><td align="center"><code>Resampling.NEAREST</code></td></tr><tr><td align="center">Otherwise</td><td align="center"><code>Resampling.BICUBIC</code></td></tr></tbody></table><h2 id="å›¾åƒæ ¼å¼è¯´æ˜"><a href="#å›¾åƒæ ¼å¼è¯´æ˜" class="headerlink" title="å›¾åƒæ ¼å¼è¯´æ˜"></a>å›¾åƒæ ¼å¼è¯´æ˜</h2><ul><li><code>1</code> æ¨¡å¼</li></ul><p>è¡¨ç¤ºäºŒå€¼å›¾åƒï¼Œå³æ¯ä¸ªåƒç´ è¦ä¹ˆæ˜¯é»‘ï¼ˆå€¼ä¸º0ï¼‰ï¼Œè¦ä¹ˆæ˜¯ç™½ï¼ˆå€¼ä¸º255ï¼‰ã€‚<br>æ¯ä¸ªåƒç´ ç”¨1ä½è¡¨ç¤ºã€‚</p><ul><li><code>P</code> æ¨¡å¼ï¼š</li></ul><p>è¡¨ç¤ºè°ƒè‰²æ¿å›¾åƒï¼Œä½¿ç”¨ä¸€ä¸ªè°ƒè‰²æ¿å°†æ¯ä¸ªåƒç´ æ˜ å°„åˆ°å®é™…çš„é¢œè‰²ã€‚<br>æ¯ä¸ªåƒç´ ç”¨8ä½è¡¨ç¤ºï¼Œé¢œè‰²æ•°æ®ç”±ä¸€ä¸ªè°ƒè‰²æ¿æ¥å®šä¹‰ï¼Œè°ƒè‰²æ¿ä¸­æœ€å¤šå¯ä»¥æœ‰256ç§é¢œè‰²ã€‚<br>è¿™ä¸¤ç§æ¨¡å¼åœ¨å¤„ç†ä¸åŒç±»å‹çš„å›¾åƒæ—¶å„æœ‰ç”¨é€”ã€‚ä¾‹å¦‚ï¼Œâ€1â€ æ¨¡å¼å¸¸ç”¨äºéœ€è¦éå¸¸ç®€å•çš„é»‘ç™½å›¾åƒï¼Œè€Œ â€œPâ€ æ¨¡å¼åˆ™é€‚ç”¨äºå›¾åƒé¢œè‰²ç›¸å¯¹æœ‰é™çš„æƒ…å†µä¸‹ã€‚</p><ul><li><p>the image mode specifies a number of bits, such as â€œI;16â€<br>the default filter is<code>Resampling.NEAREST</code>. </p></li><li><p>Otherwise<br>the default filter is<code>Resampling.BICUBIC</code>.</p></li></ul><p>ä¸º<strong>åŒçº¿æ€§æ’å€¼</strong><code>Resampling.BICUBIC</code></p><ul><li>å…¶ä»–æ–¹æ³•å¦‚ä¸‹ï¼š<ul><li>PIL.Image.NEAREST (æˆ– InterpolationMode.NEAREST)ï¼š<br>æœ€è¿‘é‚»æ’å€¼ã€‚é€Ÿåº¦å¿«ï¼Œä½†å›¾åƒè´¨é‡è¾ƒä½ã€‚</li><li>PIL.Image.BILINEAR (æˆ– InterpolationMode.BILINEAR)ï¼š<br>åŒçº¿æ€§æ’å€¼ã€‚æ•ˆæœè¾ƒå¥½ï¼Œå›¾åƒæ›´å¹³æ»‘ã€‚</li><li>PIL.Image.BICUBIC (æˆ– InterpolationMode.BICUBIC)ï¼š<br>åŒä¸‰æ¬¡æ’å€¼ã€‚ç”Ÿæˆçš„å›¾åƒè´¨é‡æ›´å¥½ï¼Œä½†è®¡ç®—é‡è¾ƒå¤§ã€‚</li><li>PIL.Image.LANCZOS (æˆ– InterpolationMode.LANCZOS)ï¼š<br>Lanczosæ’å€¼ã€‚é€‚ç”¨äºé«˜è´¨é‡çš„å›¾åƒå¤„ç†ï¼Œè®¡ç®—é‡å¤§ï¼Œä½†ç”Ÿæˆçš„å›¾åƒè´¨é‡æœ€é«˜ã€‚</li><li>PIL.Image.BOX (æˆ– InterpolationMode.BOX)ï¼š<br>ç®€å•çš„å¹³å‡æ’å€¼ï¼Œé€šå¸¸ç”¨äºå›¾åƒç¼©å°ã€‚</li><li>PIL.Image.HAMMING (æˆ– InterpolationMode.HAMMING)ï¼š<br>Hammingæ’å€¼ï¼Œä¸€ç§å¹³æ»‘æ’å€¼æ–¹æ³•ã€‚<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">resize</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> size<span class="token punctuation">,</span> resample<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> box<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> reducing_gap<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>       <span class="token triple-quoted-string string">"""       Returns a resized copy of this image.       :param size: The requested size in pixels, as a 2-tuple:          (width, height).       :param resample: An optional resampling filter.  This can be          one of :py:data:`Resampling.NEAREST`, :py:data:`Resampling.BOX`,          :py:data:`Resampling.BILINEAR`, :py:data:`Resampling.HAMMING`,          :py:data:`Resampling.BICUBIC` or :py:data:`Resampling.LANCZOS`.          If the image has mode "1" or "P", it is always set to          :py:data:`Resampling.NEAREST`. If the image mode specifies a number          of bits, such as "I;16", then the default filter is          :py:data:`Resampling.NEAREST`. Otherwise, the default filter is          :py:data:`Resampling.BICUBIC`. See: :ref:`concept-filters`.       :param box: An optional 4-tuple of floats providing          the source image region to be scaled.          The values must be within (0, 0, width, height) rectangle.          If omitted or None, the entire source is used.       :param reducing_gap: Apply optimization by resizing the image          in two steps. First, reducing the image by integer times          using :py:meth:`~PIL.Image.Image.reduce`.          Second, resizing using regular resampling. The last step          changes size no less than by ``reducing_gap`` times.          ``reducing_gap`` may be None (no first step is performed)          or should be greater than 1.0. The bigger ``reducing_gap``,          the closer the result to the fair resampling.          The smaller ``reducing_gap``, the faster resizing.          With ``reducing_gap`` greater or equal to 3.0, the result is          indistinguishable from fair resampling in most cases.          The default value is None (no optimization).       :returns: An :py:class:`~PIL.Image.Image` object.       """</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image<span class="token comment"># è¯»å–å›¾åƒ</span>image <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'path_to_image.jpg'</span><span class="token punctuation">)</span>resized_nearest <span class="token operator">=</span> image<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>new_size<span class="token punctuation">,</span> Image<span class="token punctuation">.</span>NEAREST<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li></ul><h1 id="ç‰¹åˆ«æ³¨æ„"><a href="#ç‰¹åˆ«æ³¨æ„" class="headerlink" title="ç‰¹åˆ«æ³¨æ„"></a>ç‰¹åˆ«æ³¨æ„</h1><p><strong>å½“opencvå’ŒPILåŒæ—¶ä½¿ç”¨åŒçº¿æ€§æ’å€¼æ—¶å¾—åˆ°çš„å›¾åƒä¹Ÿå­˜åœ¨å·®å¼‚</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> cv2<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image<span class="token keyword">import</span> numpy <span class="token keyword">as</span> npimage_path <span class="token operator">=</span> <span class="token string">'20240826_191429236236952.png'</span>image_size <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span><span class="token number">64</span><span class="token punctuation">)</span>image_PIL <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>image_path<span class="token punctuation">)</span><span class="token punctuation">.</span>convert<span class="token punctuation">(</span><span class="token string">'RGB'</span><span class="token punctuation">)</span>image_PIL <span class="token operator">=</span> image_PIL<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>image_size<span class="token punctuation">,</span> Image<span class="token punctuation">.</span>BILINEAR<span class="token punctuation">)</span>image_PIL <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>image_PIL<span class="token punctuation">,</span> dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>float32<span class="token punctuation">)</span>image_cv <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span>image_path<span class="token punctuation">)</span>image_cv <span class="token operator">=</span> cv2<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>image_cv<span class="token punctuation">,</span> image_size<span class="token punctuation">,</span> interpolation<span class="token operator">=</span>cv2<span class="token punctuation">.</span>INTER_LINEAR<span class="token punctuation">)</span>image_cv <span class="token operator">=</span>  cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>image_cv<span class="token punctuation">,</span>  cv2<span class="token punctuation">.</span>COLOR_BGR2RGB<span class="token punctuation">)</span>image_cv <span class="token operator">=</span> image_cv<span class="token punctuation">.</span>astype<span class="token punctuation">(</span>np<span class="token punctuation">.</span>float32<span class="token punctuation">)</span><span class="token comment"># è®¡ç®—ä¸¤å¼ å›¾åƒçš„å·®å€¼</span>difference <span class="token operator">=</span> cv2<span class="token punctuation">.</span>absdiff<span class="token punctuation">(</span>image_PIL<span class="token punctuation">,</span> image_cv<span class="token punctuation">)</span><span class="token comment"># æ˜¾ç¤ºå·®å€¼å›¾åƒ</span>cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'Difference'</span><span class="token punctuation">,</span> difference<span class="token punctuation">)</span>cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>difference<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰“å°å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token number">9</span>. <span class="token number">11</span>.  <span class="token number">9</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span><span class="token number">11</span>. <span class="token number">12</span>. <span class="token number">11</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span> <span class="token number">1</span>.  <span class="token number">0</span>.  <span class="token number">1</span>.<span class="token punctuation">]</span>  <span class="token punctuation">..</span>.  <span class="token punctuation">[</span> <span class="token number">1</span>.  <span class="token number">1</span>.  <span class="token number">1</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span> <span class="token number">1</span>.  <span class="token number">1</span>.  <span class="token number">1</span>.<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">11</span>. <span class="token number">13</span>. <span class="token number">11</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span><span class="token number">10</span>. <span class="token number">10</span>. <span class="token number">10</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span> <span class="token number">1</span>.  <span class="token number">1</span>.  <span class="token number">1</span>.<span class="token punctuation">]</span>  <span class="token punctuation">..</span>.  <span class="token punctuation">[</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span> <span class="token number">0</span>.  <span class="token number">2</span>.  <span class="token number">1</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span> <span class="token number">0</span>.  <span class="token number">1</span>.  <span class="token number">1</span>.<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">12</span>. <span class="token number">13</span>. <span class="token number">11</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span><span class="token number">12</span>. <span class="token number">11</span>. <span class="token number">12</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span> <span class="token number">0</span>.  <span class="token number">1</span>.  <span class="token number">0</span>.<span class="token punctuation">]</span>  <span class="token punctuation">..</span>.  <span class="token punctuation">[</span> <span class="token number">2</span>.  <span class="token number">1</span>.  <span class="token number">2</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span> <span class="token number">1</span>.  <span class="token number">2</span>.  <span class="token number">2</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span> <span class="token number">1</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">..</span>. <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token number">5</span>.  <span class="token number">6</span>.  <span class="token number">5</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span> <span class="token number">9</span>.  <span class="token number">9</span>. <span class="token number">12</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span> <span class="token number">1</span>.  <span class="token number">2</span>.  <span class="token number">4</span>.<span class="token punctuation">]</span>  <span class="token punctuation">..</span>.  <span class="token punctuation">[</span> <span class="token number">1</span>.  <span class="token number">1</span>.  <span class="token number">1</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span> <span class="token number">1</span>.  <span class="token number">1</span>.  <span class="token number">2</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span> <span class="token number">2</span>.  <span class="token number">2</span>.  <span class="token number">2</span>.<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token number">2</span>.  <span class="token number">3</span>.  <span class="token number">1</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span> <span class="token number">3</span>.  <span class="token number">3</span>.  <span class="token number">2</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span> <span class="token number">2</span>.  <span class="token number">2</span>.  <span class="token number">2</span>.<span class="token punctuation">]</span>  <span class="token punctuation">..</span>.  <span class="token punctuation">[</span> <span class="token number">1</span>.  <span class="token number">1</span>.  <span class="token number">1</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span> <span class="token number">0</span>.  <span class="token number">1</span>.  <span class="token number">1</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span> <span class="token number">1</span>.  <span class="token number">1</span>.  <span class="token number">2</span>.<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span> <span class="token number">0</span>.  <span class="token number">2</span>.  <span class="token number">0</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span> <span class="token number">0</span>.  <span class="token number">0</span>.  <span class="token number">0</span>.<span class="token punctuation">]</span>  <span class="token punctuation">..</span>.  <span class="token punctuation">[</span> <span class="token number">3</span>.  <span class="token number">3</span>.  <span class="token number">3</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span> <span class="token number">3</span>.  <span class="token number">4</span>.  <span class="token number">2</span>.<span class="token punctuation">]</span>  <span class="token punctuation">[</span> <span class="token number">3</span>.  <span class="token number">4</span>.  <span class="token number">3</span>.<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å·®å€¼å›¾åƒå¦‚ä¸‹ï¼š<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%BC%A9%E6%94%BE%E6%8F%92%E5%80%BC%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/difference_image.png"></p>]]></content>
      
      
      <categories>
          
          <category> å›¾åƒå¤„ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾åƒç¼©æ”¾ </tag>
            
            <tag> æ’å€¼æ–¹æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PyTorchå¤šå¡è®­ç»ƒ</title>
      <link href="/2024/08/05/pytorch-duo-qia-xun-lian/"/>
      <url>/2024/08/05/pytorch-duo-qia-xun-lian/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PyTorchå¤šå¡è®­ç»ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é©¬æ°è·ç¦»å’Œæ¬§å¼è·ç¦»</title>
      <link href="/2024/06/29/ma-shi-ju-chi-he-ou-shi-ju-chi/"/>
      <url>/2024/06/29/ma-shi-ju-chi-he-ou-shi-ju-chi/</url>
      
        <content type="html"><![CDATA[<h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>å¦‚æœæŒ‰ç…§æ¬§æ°è·ç¦»å»ç†è§£é©¬æ°è·ç¦»ï¼Œä¸€å®šä¼šè¿·æƒ‘ä¸€æ®µæ—¶é—´ã€‚å› ä¸ºæ¬§æ°è·ç¦»å¯ä»¥è®¡ç®—ä¸¤ä¸ªç‚¹ä¹‹é—´çš„è·ç¦»ï¼Œè€Œé©¬æ°è·ç¦»æ˜¯è®¡ç®—ä¸€ä¸ªç‚¹è·ç¦»ä¸€ä¸ªèšç±»çš„è·ç¦»ã€‚å¦‚æœæƒ³é€šè¿‡é©¬æ°è·ç¦»å»è®¡ç®—æŸä¸¤ä¸ªç‚¹ä¹‹é—´çš„è·ç¦»æ˜¯è¡Œä¸é€šçš„ã€‚ä¸‹é¢æŒ‰ç…§ä¸€èˆ¬çš„å¥—è·¯ä»‹ç»ä¸€ä¸‹æ¬§æ°è·ç¦»ä¸é©¬æ°è·ç¦»çš„å®šä¹‰ï¼Œä»å®šä¹‰ä¸Šå¯ä»¥å‘ç°äºŒè€…ä¹‹é—´çš„å·®å¼‚ã€‚</p><h3 id="æ¬§æ°è·ç¦»"><a href="#æ¬§æ°è·ç¦»" class="headerlink" title="æ¬§æ°è·ç¦»"></a>æ¬§æ°è·ç¦»</h3><p>på’Œqä¸¤ä¸ªç‚¹ä¹‹é—´çš„æ¬§æ°è·ç¦»ï¼Œpå’Œqéƒ½ç”±nä¸ªç»´åº¦æ„æˆã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E9%A9%AC%E6%B0%8F%E8%B7%9D%E7%A6%BB%E5%92%8C%E6%AC%A7%E5%BC%8F%E8%B7%9D%E7%A6%BB/20210416161613788.png"><br>å¯¹äºç»´åº¦å°ºåº¦ç›¸åŒçš„æƒ…å†µï¼Œæ¬§æ°è·ç¦»è¡¨ç°è‰¯å¥½ã€‚å¦‚è®¡ç®—å¹³é¢ï¼ˆäºŒç»´ï¼‰æˆ–ä¸‰ç»´ç©ºé—´ä¸­ç‚¹ä¹‹é—´çš„è·ç¦»ã€‚ä½†æ˜¯å¯¹äºæœ‰å…¶å®ƒå°ºåº¦çš„ç»´åº¦ä¿¡æ¯è¡¨ç°å°±ä¸å°½äººæ„ã€‚ä¸‹é¢ä¸¤å¼ è¡¨åˆ†åˆ«åˆ—ä¸¾äº†é¢ç§¯å’Œä»·æ ¼çš„å…³ç³»ï¼Œä½†æ˜¯å•ä½ä¸åŒï¼Œè¿™æ ·å­æ¬§æ°è·ç¦»è®¡ç®—çš„è¡¨ä¸­ä»»æ„ä¸¤è¡Œä¹‹é—´çš„è·ç¦»å°±å·®åˆ«å·¨å¤§ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E9%A9%AC%E6%B0%8F%E8%B7%9D%E7%A6%BB%E5%92%8C%E6%AC%A7%E5%BC%8F%E8%B7%9D%E7%A6%BB/20210416162105950.png"><br>ä»æŠ€æœ¯ä¸Šè®²ï¼Œå¯ä»¥é€šè¿‡å½’ä¸€åŒ–æˆ–è€…(x-mean)&#x2F;stdæ¥å…‹æœè¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯è¿˜æœ‰å¦ä¸€ä¸ªä¸»è¦ç¼ºç‚¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœç»´åº¦ï¼ˆæ•°æ®é›†ä¸­çš„åˆ—ï¼‰ç›¸å…³ï¼Œï¼ˆå®é™…æ•°æ®é›†ä¸­é€šå¸¸æ˜¯è¿™ç§æƒ…å†µï¼‰ï¼Œåˆ™ç‚¹ä¸ç‚¹ä¸­å¿ƒï¼ˆåˆ†å¸ƒï¼‰ä¹‹é—´çš„æ¬§æ°è·ç¦»æ‰€ç»™å‡ºçš„ä¿¡æ¯å¾ˆå°‘æˆ–å…·æœ‰è¯¯å¯¼æ€§å…³äºä¸€ä¸ªç‚¹å®é™…è·ç¦»èšç±»çš„è·ç¦»ã€‚ä¸‹å›¾å·¦å›¾Xä¸Yä¸¤ä¸ªç»´åº¦ï¼ˆæ•°æ®é›†çš„ä¸¤åˆ—ï¼‰ä¸ç›¸å…³ï¼Œæ¬§æ°è·ç¦»å¯ä»¥å¾ˆå¥½çš„åˆ¤åˆ«Point1å’ŒPoint2è·ç¦»èšç±»çš„è¿œè¿‘ã€‚å¦‚å³å›¾æ‰€ç¤ºï¼ŒXä¸Yç›¸å…³æ—¶æ¬§æ°è·ç¦»å°±æ— æ³•å¾ˆå¥½çš„è¡¨å¾Point1å’ŒPoint2è°æ˜¯å¼‚å¸¸ç‚¹ï¼ˆç¦»ç¾¤ç‚¹ï¼‰äº†ã€‚å› ä¸ºï¼Œä¸¤ä¸ªç‚¹ä¸ä¸­å¿ƒçš„è·ç¦»ç›¸ç­‰ï¼ˆæ¬§æ°è·ç¦»ï¼‰ã€‚ä½†æ˜¯ï¼Œå³ä½¿ä¸¤ç‚¹ä¹‹é—´çš„æ¬§æ°è·ç¦»ç›¸ç­‰ï¼Œä½†å®é™…ä¸Šåªæœ‰è“è‰²ç‚¹æ›´æ¥è¿‘è¯¥èšç±»ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E9%A9%AC%E6%B0%8F%E8%B7%9D%E7%A6%BB%E5%92%8C%E6%AC%A7%E5%BC%8F%E8%B7%9D%E7%A6%BB/2021041616255653.png"></p><p>å‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯å› ä¸ºï¼Œæ¬§æ°è·ç¦»ä»…æ˜¯ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»ã€‚å®ƒä¸è€ƒè™‘æ•°æ®é›†ä¸­çš„å…¶ä½™ç‚¹å¦‚ä½•å˜åŒ–ã€‚å› æ­¤ï¼Œå®ƒä¸èƒ½ç”¨æ¥çœŸæ­£åˆ¤æ–­ä¸€ä¸ªç‚¹å®é™…ä¸Šä¸ç‚¹çš„åˆ†å¸ƒï¼ˆèšç±»ï¼‰çš„æ¥è¿‘ç¨‹åº¦ã€‚é©¬æ°è·ç¦»åœ¨å¾ˆå¤šåº”ç”¨åœºåˆå¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸€é—®é¢˜ã€‚</p><h3 id="é©¬æ°è·ç¦»"><a href="#é©¬æ°è·ç¦»" class="headerlink" title="é©¬æ°è·ç¦»"></a>é©¬æ°è·ç¦»</h3><p>é©¬æ°è·ç¦»æ˜¯ä¸€ç§æœ‰æ•ˆçš„å¤šå…ƒè·ç¦»è®¡ç®—æ–¹æ³•ï¼Œç”¨äºè®¡ç®—ç‚¹ä¸èšç±»ï¼ˆåˆ†å¸ƒï¼‰ä¹‹é—´çš„è·ç¦»ã€‚å…¶åœ¨å¤šç»´æ•°æ®é›†å¼‚å¸¸æ£€æµ‹ï¼Œé«˜ç»´æ•°æ®é›†åˆ†ç±»åº”ç”¨ä¸­è¡¨ç°å‡ºè‰²ã€‚é©¬æ°è·ç¦»æ˜¯ç”±Mahalanobisæ•™æˆäº1936å¹´æå‡ºçš„ï¼Œæ­¤åä¸€ç›´åœ¨å„ç§ç»Ÿè®¡åº”ç”¨ä¸­ä½¿ç”¨ã€‚<br>é©¬æ°è·ç¦»çš„å®šä¹‰å…¬å¼å¦‚ä¸‹ï¼ˆå®šä¹‰å¦‚æ­¤ç®€å•ï¼Œç†è§£æ–¹å¼éœ€è¦è½¬å˜ï¼‰ï¼š<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E9%A9%AC%E6%B0%8F%E8%B7%9D%E7%A6%BB%E5%92%8C%E6%AC%A7%E5%BC%8F%E8%B7%9D%E7%A6%BB/20210416163238303.png"><br>è¿™é‡Œå°±ä¸ç¿»è¯‘äº†ï¼Œè‹±æ–‡æ›´æœ‰åŠ©äºç†è§£ï¼Œçœ‹åˆ°è¿™é‡Œæƒ³å¿…å·²ç»ç†è§£äº†é©¬æ°è·ç¦»ä¸ºä»€ä¹ˆæ˜¯ç‚¹åˆ°èšç±»çš„è·ç¦»è€Œä¸æ˜¯ç‚¹åˆ°ç‚¹çš„è·ç¦»äº†ã€‚</p><pre class="line-numbers language-none"><code class="language-none">å…¶ä¸­,  - D^2        is the square of the Mahalanobis distance.  - x          is the vector of the observation (row in a dataset),  - m          is the vector of mean values of independent variables (mean of each column),  - C^(-1)     is the inverse covariance matrix of independent variables. <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‚£ä¹ˆï¼Œå¦‚ä½•ç†è§£ä»¥ä¸Šå…¬å¼å‘¢ï¼Ÿ</p><p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹ ( x âˆ’ m ) T âˆ— C âˆ’ 1 (x-m)^T*C^{-1} (xâˆ’m)Tâˆ—Câˆ’1ï¼Œx-mæœ¬è´¨ä¸Šæ˜¯å‘é‡ä¸å¹³å‡å€¼çš„è·ç¦»ã€‚ç„¶åï¼Œå°†å…¶é™¤ä»¥åæ–¹å·®çŸ©é˜µï¼ˆæˆ–ä¹˜ä»¥åæ–¹å·®çŸ©é˜µçš„é€†ï¼‰ï¼Œè¿™å®é™…ä¸Šæ˜¯å¸¸è§„çš„æ ‡å‡†åŒ–å…¬å¼ ï¼ˆ z &#x3D; ï¼ˆ x â€“ m u ï¼‰ &#x2F; s i g m a ï¼‰ ï¼ˆz &#x3D;ï¼ˆx â€“ muï¼‰&#x2F; sigmaï¼‰ ï¼ˆz=ï¼ˆxâ€“muï¼‰&#x2F;sigmaï¼‰ã€‚é™¤ä»¥åæ–¹å·®çš„ä½œç”¨æ˜¯ï¼Œå¦‚æœæ•°æ®é›†ä¸­çš„å˜é‡é«˜åº¦ç›¸å…³ï¼Œåˆ™åæ–¹å·®å°†å¾ˆé«˜ã€‚é™¤ä»¥è¾ƒå¤§çš„åæ–¹å·®å°†æœ‰æ•ˆç¼©çŸ­è·ç¦»ã€‚åŒæ ·ï¼Œå¦‚æœXä¸ç›¸å…³ï¼Œåˆ™åæ–¹å·®ä¹Ÿä¸é«˜ï¼Œè·ç¦»ä¹Ÿä¸ä¼šå‡å°‘å¤ªå¤šã€‚</p><h3 id="åŸºäºMatlabè®¡ç®—é©¬æ°è·ç¦»"><a href="#åŸºäºMatlabè®¡ç®—é©¬æ°è·ç¦»" class="headerlink" title="åŸºäºMatlabè®¡ç®—é©¬æ°è·ç¦»"></a>åŸºäºMatlabè®¡ç®—é©¬æ°è·ç¦»</h3><p>å‡è®¾æœ‰äº”ä¸ªäººçš„<a href="https://jamesmccaffrey.wordpress.com/2017/11/09/example-of-calculating-the-mahalanobis-distance/">æ•°æ®</a>ï¼Œæ¯ä¸ªäººçš„æ•°æ®ä¸ºä¸€ä¸ªå‘é‡ï¼ŒåŒ…æ‹¬èº«é«˜ã€åˆ†æ•°å’Œå¹´é¾„ï¼š</p><pre class="line-numbers language-none"><code class="language-none">X       Y       ZHeight  Score   Age64.0    580.0   29.066.0    570.0   33.068.0    590.0   37.069.0    660.0   46.073.0    600.0   55.0m &#x3D;68.0 600.0   40.0n&#x3D;5<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¹³å‡å€¼m&#x3D; (68.0, 600.0, 40.0)ã€‚ç°åœ¨å‡è®¾å¦ä¸€ä¸ªäººçš„æ•°æ®ä¸ºv &#x3D; (66, 640, 44), é€šè¿‡é©¬æ°è·ç¦»è®¡ç®—è¿™ä¸ªäººä¸ä¸Šé¢è¿™ä¸€ç»„äººçš„é©¬æ°è·ç¦»ä¸º5.33ï¼Œä¸‹é¢åŸºäºMatlab å®ç°é©¬æ°è·ç¦»çš„è®¡ç®—ã€‚<br>æ–¹æ³•1ï¼šåŸºäºmahalå‡½æ•°</p><pre class="line-numbers language-none"><code class="language-none">obs &#x3D; [64.0    580.0   29.0; 66.0    570.0   33.0; 68.0    590.0   37.0; 69.0    660.0   46.0; 73.0    600.0   55.0];per &#x3D; [66, 640, 44];mdi &#x3D; sqrt(mahal(per,obs))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>mahalè¿”å›çš„æ˜¯é©¬æ°è·ç¦»çš„å¹³æ–¹ï¼Œéœ€è¦å¼€æ ¹å·å¾—åˆ°é©¬æ°è·ç¦»ã€‚</p><pre class="line-numbers language-none"><code class="language-none">mdi &#x3D;    5.3345<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>mahalå‡½æ•°æ˜¯Matlabè‡ªå¸¦å‡½æ•°ï¼Œæ— éœ€è‡ªå·±å®šä¹‰ã€‚ä»å®šä¹‰å¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°èŒƒå›´çš„æ˜¯è·ç¦»çš„å¹³æ–¹ï¼ŒXä¸ºæ ·æœ¬æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æå‰å·²çŸ¥çš„ä¸€ä¸ªèšç±»æ•°æ®ï¼ŒYæ˜¯è§‚æµ‹æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¦è®¡ç®—Yä¸­çš„æ¯ä¸€ä¸ªè§‚æµ‹è·ç¦»æ ·æœ¬æ•°æ®é›†çš„è·ç¦»ï¼Œå¦‚æœYæœ‰nä¸ªè§‚æµ‹ï¼ˆnè¡Œæ•°æ®ï¼‰ï¼Œå°†ä¼šè®¡ç®—å‡ºæ¥nä¸ªè·ç¦»ï¼Œå¦‚æœYåªæœ‰ä¸€ä¸ªè§‚æµ‹å°†ä¼šè®¡ç®—å‡ºä¸€ä¸ªè·ç¦»ã€‚ä»mahalçš„å®ç°æ¥çœ‹<code>D2(I) = (Y(I,:)-MU) * SIGMA^(-1) * (Y(I,:)-MU)&#39;</code>è½¬ç½®æ˜¯æ”¾åœ¨åé¢çš„ï¼Œä¸é©¬æ°è·ç¦»çš„å®šä¹‰æœ‰æ‰€ä¸åŒã€‚å¦‚æœæ˜¯è‡ªå·±å®ç°é©¬æ°è·ç¦»çš„æ—¶å€™ï¼Œè¿™ä¸€ç‚¹è¦æ³¨æ„ï¼Œå¦åˆ™ä¼šä¸€ç›´å‡ºé”™ã€‚</p><pre class="line-numbers language-none"><code class="language-none">function d &#x3D; mahal(Y,X);%MAHAL Mahalanobis distance.%   D2 &#x3D; MAHAL(Y,X) returns the Mahalanobis distance (in squared units) of%   each observation (point) in Y from the sample data in X, i.e.,%%      D2(I) &#x3D; (Y(I,:)-MU) * SIGMA^(-1) * (Y(I,:)-MU)&#39;,%%   where MU and SIGMA are the sample mean and covariance of the data in X.%   Rows of Y and X correspond to observations, and columns to variables.  X%   and Y must have the same number of columns, but can have different numbers%   of rows.  X must have more rows than columns.%%   Example:  Generate some highly correlated bivariate data in X.  The%   observations in Y with equal coordinate values are much closer to X as%   defined by Mahalanobis distance, compared to the observations with opposite%   coordinate values, even though they are all approximately equidistant from%   the mean using Euclidean distance.%%      x &#x3D; mvnrnd([0;0], [1 .9;.9 1], 100);%      y &#x3D; [1 1;1 -1;-1 1;-1 -1];%      MahalDist &#x3D; mahal(y,x)%      sqEuclidDist &#x3D; sum((y - repmat(mean(x),4,1)).^2, 2)%      plot(x(:,1),x(:,2),&#39;b.&#39;,y(:,1),y(:,2),&#39;ro&#39;)%%   See also PDIST.%   Copyright 1993-2007 The MathWorks, Inc. [rx,cx] &#x3D; size(X);[ry,cy] &#x3D; size(Y);if cx ~&#x3D; cy   error(message(&#39;stats:mahal:InputSizeMismatch&#39;));endif rx &lt; cx   error(message(&#39;stats:mahal:TooFewRows&#39;));endif any(imag(X(:))) | any(imag(Y(:)))   error(message(&#39;stats:mahal:NoComplex&#39;));endm &#x3D; mean(X,1);M &#x3D; m(ones(ry,1),:);C &#x3D; X - m(ones(rx,1),:);[Q,R] &#x3D; qr(C,0);ri &#x3D; R&#39;\(Y-M)&#39;;d &#x3D; sum(ri.*ri,1)&#39;*(rx-1);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ–¹æ³•2ï¼šæ ¹æ®å®šä¹‰å®ç°</p><pre class="line-numbers language-none"><code class="language-none">obs &#x3D; [64.0    580.0   29.0; 66.0    570.0   33.0; 68.0    590.0   37.0; 69.0    660.0   46.0; 73.0    600.0   55.0];per &#x3D; [66, 640, 44];mea &#x3D; mean(obs);icv &#x3D; inv(cov(obs));mdi &#x3D; sqrt(((per - mea)*icv)*(per - mea)&#39;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">mdi &#x3D;    5.3345<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ–¹æ³•3ï¼šexcelå®ç°</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E9%A9%AC%E6%B0%8F%E8%B7%9D%E7%A6%BB%E5%92%8C%E6%AC%A7%E5%BC%8F%E8%B7%9D%E7%A6%BB/20210416184829571.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dva2Fvd29rYW93b2thbzEyMzQ1,size_16,color_FFFFFF,t_70">  </p><p>å¯¹ä¸Šè¿°è®¡ç®—æ–¹æ³•è¿›è¡Œåˆ†æï¼š</p><ul><li>é©¬æ°è·ç¦»çš„è®¡ç®—å…¬å¼ä¸º$D^2&#x3D;(x-m)^T\cdot C^{-1}\cdot(x-m)$ï¼Œå…¶ä¸­xä¸ºæ–°æ•°æ®ï¼Œmä¸ºå†å²æ•°æ®çš„å‡å€¼ï¼Œcä¸ºå†å²æ•°æ®çš„åæ–¹å·®æœ¬å®ä¾‹ä¸­æ¯ä¸€ç»„å†å²æ•°æ®åŒ…å«x,y,zä¸‰ä¸ª<br>ï¼Œæ¯ä¸€ä¸ªå†å²è·ç¦»ä½œä¸ºå‘é‡å¤„ç†ï¼Œåˆ™v-mä¹Ÿæ˜¯ä¸€ä¸ªå‘é‡ï¼Œå³ï¼šï¼ˆ-2ï¼Œ40ï¼Œ4ï¼‰.</li><li>å¯¹äºæ–¹å·®å’Œåæ–¹å·®ï¼Œæ–¹å·®æ˜¯ä¸€ä¸ªå•å˜é‡ç»Ÿè®¡é‡ï¼Œç”¨äºåº¦é‡å•ä¸ªæ•°æ®é›†çš„åˆ†å¸ƒç¨‹åº¦ï¼Œå³æ•°æ®ç‚¹ç¦»å¹³å‡å€¼çš„åç¦»ç¨‹åº¦ã€‚åæ–¹å·®æ˜¯ä¸¤ä¸ªå˜é‡çš„è”åˆç»Ÿè®¡é‡ï¼Œç”¨äºåº¦é‡ä¸¤ä¸ªå˜é‡å¦‚ä½•ä¸€èµ·å˜åŒ–ã€‚</li><li>å…¶ä¸­inv-covarä¸ºåæ–¹å·®çŸ©é˜µçš„é€†çŸ©é˜µ</li><li>æœ€ç»ˆçš„é©¬æ°è·ç¦»è®¡ç®—å…¬å¼ä¸ºï¼š</li></ul><p>$$<br>D^2&#x3D;\begin{bmatrix}-2 \\ 40 \\ 4\end{bmatrix}^T*\begin{bmatrix}11.5 &amp;&amp; 50.0  &amp;&amp; 34.75 \\ 50.0 &amp;&amp; 1250.00 &amp;&amp; 205.00 \\ 34.75 &amp;&amp; 205.00 &amp;&amp; 110.00\end{bmatrix}^{-1}<em>\begin{bmatrix}-2 \\ 40 \\ 4\end{bmatrix}<br> $$<br>$$<br>D^2&#x3D;\begin{bmatrix}-2 \\ 40 \\ 4\end{bmatrix}^T</em>\begin{bmatrix}3.6885 &amp;&amp; 0.0627  &amp;&amp; -1.2821 \\ 0.0627 &amp;&amp; 0.0022 &amp;&amp; -0.0240 \\ -1.2821 &amp;&amp; -0.0240 &amp;&amp; 0.4588\end{bmatrix}*\begin{bmatrix}-2 \\ 40 \\ 4\end{bmatrix}&#x3D;28.4573<br> $$</p><p>æœ€åä¸€æ­¥ï¼Œå¼€å¹³æ–¹å¾—åˆ°æœ€ç»ˆçš„é©¬æ°è·ç¦»ä¸º5.33</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>é©¬æ°è·ç¦»ä¸åŒäºæ¬§æ°è·ç¦»ï¼Œé©¬æ°è·ç¦»æ˜¯å¯¹ä¸€ç»„æ•°æ®çš„è·ç¦»ï¼Œè€Œä¸æ˜¯åƒæ¬§æ°è·ç¦»é’ˆå¯¹ç‚¹ä¸ç‚¹çš„è·ç¦»ã€‚æ˜ç™½äº†è¿™ä¸€ç‚¹å°±ä¼šå‘ç°å¾ˆç®€å•äº†ã€‚çœ‹èµ„æ–™è¿˜æ˜¯è¦çœ‹è‹±æ–‡ç‰ˆçš„ï¼Œä¸‹é¢æ˜¯åšå®¢å†…å®¹å‡ºå¤„çš„è¿ç¯‡æ–‡ç« ã€‚</p><p>å‚è€ƒ<br><a href="https://www.machinelearningplus.com/statistics/mahalanobis-distance/">https://www.machinelearningplus.com/statistics/mahalanobis-distance/</a><br><a href="https://jamesmccaffrey.wordpress.com/2017/11/09/example-of-calculating-the-mahalanobis-distance/">https://jamesmccaffrey.wordpress.com/2017/11/09/example-of-calculating-the-mahalanobis-distance/</a></p><p>æœ¬æ–‡è½¬è‡ª <a href="https://blog.csdn.net/wokaowokaowokao12345/article/details/115765116">https://blog.csdn.net/wokaowokaowokao12345/article/details/115765116</a>ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¤šç›®æ ‡åŒ¹é… </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é©¬æ°è·ç¦» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¢å¹¿è·¯ä¸åŒˆç‰™åˆ©åŒ¹é…ç®—æ³•</title>
      <link href="/2024/06/19/zeng-guang-lu-yu-xiong-ya-li-pi-pei-suan-fa/"/>
      <url>/2024/06/19/zeng-guang-lu-yu-xiong-ya-li-pi-pei-suan-fa/</url>
      
        <content type="html"><![CDATA[<p><strong>ä»€ä¹ˆæ˜¯åŒˆç‰™åˆ©ç®—æ³•?</strong></p><p><strong>é¦–å…ˆï¼ŒåŒˆç‰™åˆ©ç®—æ³•æ˜¯è§£å†³åŒ¹é…é—®é¢˜çš„ã€‚</strong>ç½‘ä¸Šæœ‰ä¸€ç¯‡å¾ˆç«çš„æ–‡ç« ï¼šç”¨ç”·å¥³é…å¯¹çš„ä¾‹å­ï¼Œè¯´æ˜åŒˆç‰™åˆ©ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ã€‚</p><p>è¿™ä¸ªä¾‹å­å¾ˆé€šä¿—æ˜“æ‡‚ï¼Œä½†æ˜¯æ²¡æœ‰æ¶‰åŠåˆ°æ•°å­¦æ¦‚å¿µã€‚äºæ˜¯ï¼Œæˆ‘åŸºäºè¿™ä¸ªç”·å¥³é…å¯¹çš„ä¾‹å­ï¼Œè¯¦ç»†åœ°ä»‹ç»é‚£äº›å¬ä¸Šå»å¾ˆéš¾æ‡‚çš„å­¦æœ¯å®šä¹‰ã€‚</p><p>é¦–å…ˆè¦ä»ä¸€äº›åŸºæœ¬æ¦‚å¿µå¼€å§‹ã€‚</p><h2 id="äºŒåˆ†å›¾"><a href="#äºŒåˆ†å›¾" class="headerlink" title="äºŒåˆ†å›¾"></a><strong>äºŒåˆ†å›¾</strong></h2><p>ã€å®šä¹‰ã€‘å›¾è®ºä¸­çš„ä¸€ç§ç‰¹æ®Šæ¨¡å‹ã€‚è‹¥èƒ½å°†æ— å‘å›¾G&#x3D;(V,E)çš„é¡¶ç‚¹Våˆ’åˆ†ä¸ºä¸¤ä¸ªäº¤é›†ä¸ºç©ºçš„é¡¶ç‚¹é›†ï¼Œå¹¶ä¸”ä»»æ„è¾¹çš„ä¸¤ä¸ªç«¯ç‚¹éƒ½åˆ†å±äºä¸¤ä¸ªé›†åˆï¼Œåˆ™ç§°å›¾Gä¸ºä¸€ä¸ªä¸ºäºŒåˆ†å›¾ã€‚</p><p>ã€è§£é‡Šã€‘ä¸€å¼ å›¾è¦æ˜¯äºŒåˆ†å›¾ï¼Œéœ€è¦æ»¡è¶³ä»¥ä¸‹å‡ ä¸ªè¦æ±‚ï¼š</p><p>ï¼ˆ1ï¼‰ æ— å‘å›¾ã€‚ æ„æ€å°±æ˜¯æ²¡æœ‰æ–¹å‘ï¼Œä¸€æ—¦ABä¿©äººæœ‰è¿çº¿ï¼Œå°±è¯´æ˜ä¿©äººç›¸äº’å–œæ¬¢ï¼Œé…å¯¹æˆåŠŸï¼Œä¸å­˜åœ¨Aå•æ–¹é¢å–œæ¬¢Bçš„æƒ…å†µã€‚</p><p>ï¼ˆ2ï¼‰ äº¤é›†ä¸ºç©ºã€‚æ„æ€å°±æ˜¯ç”·çš„æ˜¯ä¸€ä¸ªé›†åˆï¼Œå¥³çš„æ˜¯ä¸€ä¸ªé›†åˆã€‚ä¸å­˜åœ¨ç”·ç”Ÿé›†åˆé‡Œæ··å…¥å¥³ç”Ÿçš„æƒ…å†µã€‚</p><p>ï¼ˆ3ï¼‰ ä»»æ„è¾¹çš„ä¸¤ä¸ªç«¯ç‚¹åˆ†å±äºä¸¤ä¸ªé›†åˆã€‚æ„æ€å°±æ˜¯ï¼Œç”·çš„åªèƒ½å’Œå¥³çš„é…å¯¹ã€‚ä»»ä½•ç”·çš„ä¸èƒ½å’Œç”·çš„é…å¯¹ï¼Œä»»ä½•å¥³çš„ä¸èƒ½å’Œå¥³çš„é…å¯¹ã€‚</p><p>æ»¡è¶³ä¸Šè¿°æ¡ä»¶å°±æ˜¯äºŒåˆ†å›¾ã€‚</p><p>ä»¥ä¸‹æƒ…å†µåˆ†åˆ«æ˜¯éäºŒåˆ†å›¾å’ŒäºŒåˆ†å›¾ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A2%9E%E5%B9%BF%E8%B7%AF%E4%B8%8E%E5%8C%88%E7%89%99%E5%88%A9%E5%8C%B9%E9%85%8D%E7%AE%97%E6%B3%95/v2-3b93c7ff96ee68c78d3ce03dbf903598_720w.png"></p><p>å›¾1 äºŒåˆ†å›¾å’ŒéäºŒåˆ†å›¾</p><h2 id="åŒ¹é…"><a href="#åŒ¹é…" class="headerlink" title="åŒ¹é…"></a><strong>åŒ¹é…</strong></h2><p>ã€å®šä¹‰ã€‘åœ¨Gçš„ä¸€ä¸ªå­å›¾Mä¸­ï¼ŒMçš„è¾¹é›†ä¸­çš„ä»»æ„ä¸¤æ¡è¾¹éƒ½ä¸ä¾é™„äºåŒä¸€ä¸ªé¡¶ç‚¹ï¼Œåˆ™ç§°Mæ˜¯ä¸€ä¸ªåŒ¹é…ã€‚</p><p>ã€è§£é‡Šã€‘ç»“åˆæƒ…ä¾£é…å¯¹é—®é¢˜ï¼Œç”·ç”Ÿå¥³ç”Ÿä¹‹é—´äº’ç”Ÿæƒ…æ„«çš„æœ‰å¾ˆå¤šï¼Œç”šè‡³æœ‰çš„äººå¯¹å¤šä¸ªäººéƒ½æœ‰æ„å‘ï¼Œå› æ­¤æ½œåœ¨çš„æƒ…ä¾£ç»„åˆæ–¹å¼æœ‰å¾ˆå¤šç§ã€‚æ‰€è°“çš„â€œä»»æ„ä¸¤æ¡è¾¹éƒ½ä¸ä¾é™„äºåŒä¸€ä¸ªé¡¶ç‚¹â€ï¼Œæ„æ€å°±æ˜¯åªè¦æˆ‘ä»¬æ’®åˆçš„æ—¶å€™ï¼Œä¸è¦ç»™æŸä¸ªäººå®‰æ’ä¸¤ä¸ªå¯¹è±¡å°±è¡Œã€‚ä½œä¸ºç‰µçº¿äººï¼Œæˆ‘ä»¬å¯ä»¥æ’®åˆä¸€å¯¹ï¼Œä¹Ÿå¯ä»¥æ’®åˆä¸¤å¯¹ï¼Œè¿™æ ·æ¯ä¸€ç§æ’®åˆæ–¹å¼ï¼Œéƒ½å«ä¸€ä¸ªåŒ¹é…ã€‚æ’®åˆæˆåŠŸçš„è¿™äº›æƒ…ä¾£å°±æ˜¯æ‰€è°“çš„å­å›¾Mã€‚</p><h2 id="æœ€å¤§åŒ¹é…"><a href="#æœ€å¤§åŒ¹é…" class="headerlink" title="æœ€å¤§åŒ¹é…"></a><strong>æœ€å¤§åŒ¹é…</strong></h2><p>æŒ‰ç…§ä¸Šé¢çš„æ’®åˆæ–¹å¼ï¼Œæˆ‘ä»¬æ—¢ä¸èƒ½æŠŠæ²¡æœ‰æ„å‘çš„ä¸¤ä¸ªäººæ’®åˆåœ¨ä¸€èµ·ï¼Œæœ‰çš„äººåˆå¯¹å¤šä¸ªäººæœ‰æ„å‘ï¼Œå› æ­¤å¯ä»¥èŠ±ä¸€ç‚¹å¿ƒæ€ï¼Œå°½å¯èƒ½åœ°åè°ƒä¸€ä¸‹å¤§å®¶çš„æ„å‘ï¼Œåšåˆ°å¤šæ’®åˆæˆåŠŸå‡ å¯¹ã€‚è¿™æ ·ï¼ŒæˆåŠŸæ’®åˆçš„æƒ…ä¾£æœ€å¤šçš„è¿™ç§æ’®åˆæ–¹å¼ï¼Œå°±å«æœ€å¤§åŒ¹é…ã€‚</p><h2 id="æœ€ä¼˜åŒ¹é…-x2F-å®Œç¾åŒ¹é…"><a href="#æœ€ä¼˜åŒ¹é…-x2F-å®Œç¾åŒ¹é…" class="headerlink" title="æœ€ä¼˜åŒ¹é…&#x2F;å®Œç¾åŒ¹é…"></a><strong>æœ€ä¼˜åŒ¹é…&#x2F;å®Œç¾åŒ¹é…</strong></h2><p>è§£é‡Šï¼šå¦‚æœéå¸¸å¹¸è¿ï¼Œåœ¨æˆ‘ä»¬çš„å®‰æ’ä¸‹ï¼Œæ¯ä¸ªäººéƒ½æ‰¾åˆ°äº†è‡ªå·±å¿ƒä»ªçš„å¯¹è±¡ã€‚è¿™ç§æ’®åˆæ–¹å¼ï¼Œå«åšæœ€ä¼˜åŒ¹é…æˆ–å®Œç¾åŒ¹é…ã€‚</p><h2 id="äº¤æ›¿è·¯å’Œå¢å¹¿è·¯"><a href="#äº¤æ›¿è·¯å’Œå¢å¹¿è·¯" class="headerlink" title="äº¤æ›¿è·¯å’Œå¢å¹¿è·¯"></a><strong>äº¤æ›¿è·¯å’Œå¢å¹¿è·¯</strong></h2><p>äº¤æ›¿è·¯å’Œå¢å¹¿è·¯æ˜¯ç”¨æ¥è§£å†³æ–°é…å¯¹çš„æ—¶å€™å‘ç”Ÿå†²çªçš„é—®é¢˜ã€‚è¿™é‡Œè¦ç»“åˆå…·ä½“é—®é¢˜è§£é‡Šæ‰èƒ½æ›´æ¸…æ¥šã€‚é‚£ä¹ˆæˆ‘ä»¬æ¥ç»“åˆå…·ä½“é—®é¢˜ï¼Œçœ‹çœ‹è¿™ä¸ªäº¤æ›¿è·¯å’Œå¢å¹¿è·¯æœ‰å•¥ç”¨å¤„ã€‚</p><p>è€ƒè™‘ä¸€ä¸ªä¸‹é¢è¿™ä¸ªäºŒåˆ†å›¾ï¼Œæ€ä¹ˆæ‰¾åˆ°æœ€å¤§çš„åŒ¹é…å‘¢ï¼Ÿ</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A2%9E%E5%B9%BF%E8%B7%AF%E4%B8%8E%E5%8C%88%E7%89%99%E5%88%A9%E5%8C%B9%E9%85%8D%E7%AE%97%E6%B3%95/v2-f4b5a91413f68f07d24337b71f128371_720w.png"></p><p>å›¾2 å¾…é…å¯¹çš„æ— å‘å›¾</p><p>ä¸€ä¸ªè‡ªç„¶çš„æ€è·¯æ˜¯ï¼Œä¸€ä¸ªä¸€ä¸ªçš„é…å¯¹ã€‚é¦–å…ˆç»™Aé…å¯¹ã€‚ä¸€çœ‹Aå’Œaæœ‰æ„å‘ï¼Œé‚£å°±å…ˆæŠŠä»–ä¿©æ’®åˆåˆ°ä¸€èµ·ã€‚</p><p>ç°åœ¨æ•ˆæœå°±å˜æˆè¿™æ ·äº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A2%9E%E5%B9%BF%E8%B7%AF%E4%B8%8E%E5%8C%88%E7%89%99%E5%88%A9%E5%8C%B9%E9%85%8D%E7%AE%97%E6%B3%95/v2-179bc2137782f5327ee0307573fcd3de_720w.png"></p><p>å›¾3</p><p>è“è‰²çš„æ˜¯ä»–ä»¬æœ¬èº«æœ‰æ„å‘çš„æƒ…å†µï¼Œå°±æ˜¯åŸå§‹äºŒåˆ†å›¾ï¼Œè¦è®°å¾—è“çº¿è¿ä¸€å—å¹¶ä¸å«â€œåŒ¹é…è¾¹â€ï¼Œè€Œæ˜¯â€œéåŒ¹é…è¾¹â€ã€‚çº¢è‰²çš„æ˜¯æˆ‘ä»¬ç»™ä»–ä»¬é…å¯¹äº†ï¼Œçº¢çº¿æ‰å«â€œåŒ¹é…è¾¹â€ã€‚</p><p>å¥½äº†ï¼ŒAçš„é—®é¢˜æš‚æ—¶æ€§è§£å†³äº†ï¼Œè½®åˆ°Bäº†ã€‚ç»“æœbä¹Ÿæƒ³å’Œaé…å¯¹ã€‚</p><p><strong>è¿™æ—¶å€™ï¼Œè°æ‰èƒ½å’Œaåœ¨ä¸€èµ·å‘¢ï¼Ÿäº¤æ›¿è·¯å’Œå¢å¹¿è·¯å°±æ˜¯è§£å†³è¿™ä¸ªå†²çªçš„ã€‚</strong></p><p>è¿™æ—¶å€™ï¼Œæˆ‘ä»¬è¦æ‰¾ä¸€æ¡äº¤æ›¿è·¯ï¼Œå°±æ˜¯ä¾æ¬¡ç»è¿‡éåŒ¹é…è¾¹ï¼ˆè“çº¿ï¼‰ã€åŒ¹é…è¾¹ï¼ˆçº¢çº¿ï¼‰ã€‚é‚£ä¹ˆæˆ‘ä»¬ä»Bå‡ºå‘ï¼Œå¼€å§‹æ‰¾äº¤æ›¿è·¯äº†ã€‚æˆ‘ä»¬æ‰¾åˆ°äº†</p><p>ï¼ˆéåŒ¹é…è¾¹ï¼‰ (åŒ¹é…è¾¹) (éåŒ¹é…è¾¹)</p><p>Bâ€”â€”â€”â€”â€“aâ€”â€”â€”â€”â€”-Aâ€”â€”â€”â€”â€”â€“c</p><p>Bå’Œcéƒ½æ˜¯æ²¡æœ‰è¢«åŒ¹é…è¿‡çš„ç‚¹ï¼Œè€Œå®ƒåˆæ˜¯è¿™æ¡äº¤æ›¿è·¯çš„èµ·ç‚¹å’Œç»ˆç‚¹ã€‚è¿™æ¡äº¤æ›¿è·¯å°±æ˜¯å¢å¹¿è·¯ã€‚</p><p>ç°åœ¨æˆ‘ä»¬è¦åšä¸€ä¸ªå–åæ“ä½œï¼Œæ€ä¹ˆå–å‘¢ï¼Œå°±æ˜¯å°†ä¸Šé¢è¿™æ¡å¢å¹¿è·¯çš„åŒ¹é…è¾¹å˜æˆä¸åŒ¹é…è¾¹ï¼Œä¸åŒ¹é…è¾¹å˜æˆåŒ¹é…è¾¹ã€‚</p><p>ï¼ˆåŒ¹é…è¾¹ï¼‰ (éåŒ¹é…è¾¹) (åŒ¹é…è¾¹)</p><p>Bâ€”â€”â€”â€”â€“aâ€”â€”â€”â€”â€”-Aâ€”â€”â€”â€”â€”â€“c</p><p>è¿˜æ˜¯ç”¨çº¢è‰²è¡¨ç¤ºåŒ¹é…è¾¹ï¼Œè“è‰²è¡¨ç¤ºéåŒ¹é…è¾¹ã€‚ç”»åœ¨å›¾ä¸Šï¼Œç°åœ¨çš„åŒ¹é…å˜æˆè¿™æ ·ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A2%9E%E5%B9%BF%E8%B7%AF%E4%B8%8E%E5%8C%88%E7%89%99%E5%88%A9%E5%8C%B9%E9%85%8D%E7%AE%97%E6%B3%95/v2-3cbbdc96949166ab5ad58989db01eb35_720w.png"></p><p>å›¾4</p><p>ç„¶åï¼Œæˆ‘ä»¬å‘ç°ï¼Œåˆšåˆšçš„å†²çªé—®é¢˜è§£å†³äº†ã€‚ç”±Bå’Œaåœ¨ä¸€èµ·ï¼ŒAå’Œcåœ¨ä¸€å—ã€‚</p><p>å›è¿‡å¤´æ¥ï¼Œå†æƒ³ä¸€ä¸‹å¢å¹¿è·¯æ˜¯æ€ä¹ˆè§£å†³å†²çªé—®é¢˜çš„ã€‚å¢å¹¿è·¯çš„æ ¸å¿ƒç‰¹ç‚¹å°±æ˜¯â€œèµ·ç‚¹ç»ˆç‚¹éƒ½æ˜¯éåŒ¹é…ç‚¹â€ï¼Œè¿™æ ·å°±å¯¼è‡´éåŒ¹é…è¾¹æ¯”åŒ¹é…è¾¹å¤šäº†ä¸€æ¡ã€‚å¢å¹¿è·¯å»ºç«‹è¿æ¥æ—¶ï¼Œå¿…é¡»å»ºç«‹åœ¨ä¸¤è€…æœ‰æ„å‘çš„åŸºç¡€ä¸Šã€‚è¿™æ ·æˆ‘ä»¬å–åï¼Œä¹Ÿå°±æ˜¯äº¤æ¢åŒ¹é…å’ŒéåŒ¹é…è¾¹çš„èº«ä»½ã€‚æˆ‘ä»¬å°±å¤šå¾—åˆ°äº†ä¸€æ¡åŒ¹é…è¾¹ã€‚è¿™ä¸ªå–åçš„è¿‡ç¨‹ï¼Œå°±æ˜¯æŠŠåŸæœ¬åŒ¹é…ä¸Šçš„ä¸¤ä¸ªäººæ‹†æ•£ï¼Œç»™ç¬¬ä¸‰ä¸ªäººè…¾ä½ç½®ã€‚å°±æ˜¯é‚£ç¯‡å¾ˆç«çš„åšå®¢é‡Œæ‰€è¯´çš„ï¼Œæ ¸å¿ƒæ€æƒ³å°±æ˜¯â€œè…¾ä½ç½®â€ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬æŠŠä¸Šå›¾çš„é…å¯¹é—®é¢˜å½»åº•è§£å†³å®Œã€‚</p><p>ABçš„é—®é¢˜éƒ½è§£å†³äº†ï¼Œè½®åˆ°Cäº†ã€‚Cè¦å’Œcé…å¯¹ï¼Œåˆå‘ç”Ÿå†²çªäº†ã€‚äºæ˜¯ï¼Œåˆè¦ä½¿ç”¨å¢å¹¿è·¯æ¥å¢åŠ ä¸€ä¸ªåŒ¹é…äº†ã€‚</p><p>ï¼ˆéï¼‰ ï¼ˆåŒ¹ï¼‰ ï¼ˆéï¼‰ ï¼ˆåŒ¹ï¼‰ ï¼ˆéï¼‰</p><p>Câ€”â€”â€“câ€”â€”â€”â€“Aâ€”â€”â€”-aâ€”â€”â€”-Bâ€”â€”â€”b</p><p>å–ä¸ªåå¾—åˆ°ï¼š</p><p>ï¼ˆåŒ¹ï¼‰ ï¼ˆéï¼‰ ï¼ˆåŒ¹ï¼‰ ï¼ˆéï¼‰ ï¼ˆåŒ¹ï¼‰</p><p>Câ€”â€”â€“câ€”â€”â€”â€“Aâ€”â€”â€”-aâ€”â€”â€”-Bâ€”â€”â€”b</p><p>ç”»æˆå›¾é•¿è¿™æ ·</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A2%9E%E5%B9%BF%E8%B7%AF%E4%B8%8E%E5%8C%88%E7%89%99%E5%88%A9%E5%8C%B9%E9%85%8D%E7%AE%97%E6%B3%95/v2-18e0e6ef3c582ac7aed3840bfac6b222_720w.png"></p><p>å›¾5</p><p>ç°åœ¨ï¼ŒABCçš„é…å¯¹éƒ½è§£å†³äº†ã€‚æˆ‘ä»¬æ‰¾åˆ°äº†æœ€å¤§åŒ¹é…ã€‚ç”±äºA\B\C\a\b\céƒ½æ‰¾åˆ°äº†è‡ªå·±çš„å¿ƒä»ªå¯¹è±¡ã€‚å› æ­¤ï¼Œè¿™ä¸ªæœ€å¤§åŒ¹é…ä¹Ÿæ˜¯å®Œç¾åŒ¹é…ã€‚</p><p><strong>ä¸‹é¢è¿™ä¸ªé“¾æ¥é‡Œçš„äºŒåˆ†å›¾ï¼Œå°±æ²¡èƒ½æ‰¾åˆ°å®Œç¾åŒ¹é…ã€‚</strong></p><blockquote><p><a href="https://www.cnblogs.com/shenben/p/5573788.html">åŒˆç‰™åˆ©ç®—æ³•ï¼ˆäºŒåˆ†å›¾ï¼‰</a></p></blockquote><h2 id="åŒˆç‰™åˆ©ç®—æ³•"><a href="#åŒˆç‰™åˆ©ç®—æ³•" class="headerlink" title="åŒˆç‰™åˆ©ç®—æ³•"></a>åŒˆç‰™åˆ©ç®—æ³•</h2><p><strong>ä¸Šè¿°åˆ©ç”¨å¢å¹¿è·¯æ‰¾æœ€å¤§åŒ¹é…çš„ç®—æ³•ï¼Œå°±å«åšåŒˆç‰™åˆ©ç®—æ³•ã€‚</strong></p><p>æ€»ç»“ä¸€ä¸‹åŒˆç‰™åˆ©ç®—æ³•ï¼š</p><p>æ¯ä¸ªç‚¹ä»å¦ä¸€ä¸ªé›†åˆé‡ŒæŒ‘å¯¹è±¡ï¼Œæ²¡å†²çªçš„è¯å°±å…ˆå®‰æ’ä¸Šï¼Œè¦æ˜¯å†²çªäº†å°±ç”¨å¢å¹¿è·¯å¾„é‡æ–°åŒ¹é…ã€‚é‡å¤ä¸Šè¿°æ€è·¯ï¼Œç›´åˆ°æ‰€æœ‰çš„ç‚¹éƒ½æ‰¾åˆ°å¯¹è±¡ï¼Œæˆ–è€…æ‰¾ä¸åˆ°å¯¹è±¡ä¹Ÿæ‰¾ä¸åˆ°å¢å¹¿è·¯ã€‚</p><h2 id="æ·±åº¦ä¼˜å…ˆå’Œå¹¿åº¦ä¼˜å…ˆ"><a href="#æ·±åº¦ä¼˜å…ˆå’Œå¹¿åº¦ä¼˜å…ˆ" class="headerlink" title="æ·±åº¦ä¼˜å…ˆå’Œå¹¿åº¦ä¼˜å…ˆ"></a>æ·±åº¦ä¼˜å…ˆå’Œå¹¿åº¦ä¼˜å…ˆ</h2><p>ä¸Šè¿°æ˜¯<strong>æ·±åº¦ä¼˜å…ˆåŒˆç‰™åˆ©ç®—æ³•</strong>ã€‚å°±æ˜¯å†²çªäº†ç«‹åˆ»ç”¨å¢å¹¿è·¯æ¥è§£å†³ã€‚</p><p>å¦å¤–ä¸€ç§æ˜¯<strong>å¹¿åº¦ä¼˜å…ˆåŒˆç‰™åˆ©ç®—æ³•</strong>ã€‚æ€è·¯æ˜¯ï¼Œå†²çªäº†å°±æ¢ä¸€ä¸ªå¿ƒä»ªå¯¹è±¡ï¼Œçœ‹å¦ä¸€ä¸ªå¿ƒä»ªå¯¹è±¡æ˜¯ä¸æ˜¯ä¹Ÿé…å¯¹äº†ï¼Œè¦æ˜¯éƒ½é…å¯¹äº†ï¼Œå†ç”¨å¢å¹¿è·¯æ¥è§£å†³ã€‚</p><p>å¹¿åº¦ä¼˜å…ˆçš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><p>ï¼ˆ1ï¼‰<strong>Aå’Œaè¿ä¸Šã€‚</strong></p><p>ï¼ˆ2ï¼‰Bä¹Ÿæƒ³è¿aï¼Œä½†æ˜¯aè¢«è¿äº†ï¼Œå°±æ‰¾ä¸‹ä¸€ä¸ªå¿ƒä»ªå¯¹è±¡bã€‚</p><p>ï¼ˆ3ï¼‰bæ²¡æœ‰è¢«è¿ä¸Šï¼Œ<strong>Bå’Œbå°±è¿åœ¨ä¸€èµ·</strong>ã€‚</p><p>ï¼ˆ4ï¼‰è½®åˆ°Cçš„æ—¶å€™ï¼ŒCæ‰¾å¿ƒä»ªå¯¹è±¡cã€‚</p><p>ï¼ˆ5ï¼‰cä¹Ÿæ²¡è¢«è¿ä¸Šï¼Œ<strong>æ‰€ä»¥Cå’Œcè¿ä¸€èµ·ã€‚</strong></p><h2 id="å‚è€ƒç½‘ç«™"><a href="#å‚è€ƒç½‘ç«™" class="headerlink" title="å‚è€ƒç½‘ç«™"></a>å‚è€ƒç½‘ç«™</h2><ul><li><a href="https://zhuanlan.zhihu.com/p/208596378">å¢å¹¿è·¯ä¸åŒˆç‰™åˆ©åŒ¹é…</a></li><li><a href="https://zhuanlan.zhihu.com/p/208596378">å¢å¹¿è·¯ä¸åŒˆç‰™åˆ©åŒ¹é…</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å¤šç›®æ ‡åŒ¹é… </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šç›®æ ‡åŒ¹é… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤šç›®æ ‡åŒ¹é…ä¹‹åŒˆç‰™åˆ©åŒ¹é…ç®—æ³•</title>
      <link href="/2024/06/19/duo-mu-biao-pi-pei-zhi-xiong-ya-li-pi-pei-suan-fa/"/>
      <url>/2024/06/19/duo-mu-biao-pi-pei-zhi-xiong-ya-li-pi-pei-suan-fa/</url>
      
        <content type="html"><![CDATA[<ul><li>åŒˆç‰™åˆ©ç®—æ³•å¯ä»¥å‘Šè¯‰æˆ‘ä»¬å½“å‰å¸§çš„æŸä¸ªç›®æ ‡ï¼Œæ˜¯å¦ä¸å‰ä¸€å¸§çš„æŸä¸ªç›®æ ‡ç›¸åŒã€‚</li><li>å¡å°”æ›¼æ»¤æ³¢å¯ä»¥åŸºäºç›®æ ‡å‰ä¸€æ—¶åˆ»çš„ä½ç½®ï¼Œæ¥é¢„æµ‹å½“å‰æ—¶åˆ»çš„ä½ç½®ï¼Œå¹¶ä¸”å¯ä»¥æ¯”ä¼ æ„Ÿå™¨ï¼ˆåœ¨ç›®æ ‡è·Ÿè¸ªä¸­å³ç›®æ ‡æ£€æµ‹å™¨ï¼Œæ¯”å¦‚Yoloç­‰ï¼‰æ›´å‡†ç¡®çš„ä¼°è®¡ç›®æ ‡çš„ä½ç½®ã€‚</li></ul><h2 id="åŒˆç‰™åˆ©ç®—æ³•ï¼ˆHungarian-Algorithmï¼‰"><a href="#åŒˆç‰™åˆ©ç®—æ³•ï¼ˆHungarian-Algorithmï¼‰" class="headerlink" title="åŒˆç‰™åˆ©ç®—æ³•ï¼ˆHungarian Algorithmï¼‰"></a>åŒˆç‰™åˆ©ç®—æ³•ï¼ˆHungarian Algorithmï¼‰</h2><p>é¦–å…ˆï¼Œå…ˆä»‹ç»ä¸€ä¸‹ä»€ä¹ˆæ˜¯<strong>åˆ†é…é—®é¢˜ï¼ˆAssignment Problemï¼‰ï¼š</strong>å‡è®¾æœ‰Nä¸ªäººå’ŒNä¸ªä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡å¯ä»¥ä»»æ„åˆ†é…ç»™ä¸åŒçš„äººï¼Œå·²çŸ¥æ¯ä¸ªäººå®Œæˆæ¯ä¸ªä»»åŠ¡è¦èŠ±è´¹çš„ä»£ä»·ä¸å°½ç›¸åŒï¼Œé‚£ä¹ˆå¦‚ä½•åˆ†é…å¯ä»¥ä½¿å¾—æ€»çš„ä»£ä»·æœ€å°ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ç°åœ¨æœ‰3ä¸ªä»»åŠ¡ï¼Œè¦åˆ†åˆ«åˆ†é…ç»™3ä¸ªäººï¼Œæ¯ä¸ªäººå®Œæˆå„ä¸ªä»»åŠ¡æ‰€éœ€<strong>ä»£ä»·çŸ©é˜µï¼ˆcost matrixï¼‰</strong>å¦‚ä¸‹æ‰€ç¤ºï¼ˆè¿™ä¸ªä»£ä»·å¯ä»¥æ˜¯é‡‘é’±ã€æ—¶é—´ç­‰ç­‰ï¼‰ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%9A%E7%9B%AE%E6%A0%87%E5%8C%B9%E9%85%8D%E4%B9%8B%E5%8C%88%E7%89%99%E5%88%A9%E5%8C%B9%E9%85%8D%E7%AE%97%E6%B3%95/v2-62eb27d3b24895b24e7d1d91d8150c2d_720w.bmp"></p><p>æ€æ ·æ‰èƒ½æ‰¾åˆ°ä¸€ä¸ªæœ€ä¼˜åˆ†é…ï¼Œä½¿å¾—å®Œæˆæ‰€æœ‰ä»»åŠ¡èŠ±è´¹çš„ä»£ä»·æœ€å°å‘¢ï¼Ÿ</p><p>åŒˆç‰™åˆ©ç®—æ³•ï¼ˆåˆå«<strong>KM</strong>ç®—æ³•ï¼‰å°±æ˜¯ç”¨æ¥è§£å†³åˆ†é…é—®é¢˜çš„ä¸€ç§æ–¹æ³•ï¼Œå®ƒåŸºäºå®šç†ï¼š</p><p><strong>å¦‚æœä»£ä»·çŸ©é˜µçš„æŸä¸€è¡Œæˆ–æŸä¸€åˆ—åŒæ—¶åŠ ä¸Šæˆ–å‡å»æŸä¸ªæ•°ï¼Œåˆ™è¿™ä¸ªæ–°çš„ä»£ä»·çŸ©é˜µçš„æœ€ä¼˜åˆ†é…ä»ç„¶æ˜¯åŸä»£ä»·çŸ©é˜µçš„æœ€ä¼˜åˆ†é…ã€‚</strong></p><p>ç®—æ³•æ­¥éª¤ï¼ˆå‡è®¾çŸ©é˜µä¸ºNxNæ–¹é˜µï¼‰ï¼š</p><ol><li>å¯¹äºçŸ©é˜µçš„æ¯ä¸€è¡Œï¼Œå‡å»å…¶ä¸­æœ€å°çš„å…ƒç´ </li><li>å¯¹äºçŸ©é˜µçš„æ¯ä¸€åˆ—ï¼Œå‡å»å…¶ä¸­æœ€å°çš„å…ƒç´ </li><li>ç”¨æœ€å°‘çš„æ°´å¹³çº¿æˆ–å‚ç›´çº¿è¦†ç›–çŸ©é˜µä¸­æ‰€æœ‰çš„0</li><li>å¦‚æœçº¿çš„æ•°é‡ç­‰äºNï¼Œåˆ™æ‰¾åˆ°äº†æœ€ä¼˜åˆ†é…ï¼Œç®—æ³•ç»“æŸï¼Œå¦åˆ™è¿›å…¥æ­¥éª¤5</li><li>æ‰¾åˆ°æ²¡æœ‰è¢«ä»»ä½•çº¿è¦†ç›–çš„æœ€å°å…ƒç´ ï¼Œæ¯ä¸ª<strong>æ²¡è¢«çº¿è¦†ç›–çš„è¡Œ</strong>å‡å»è¿™ä¸ªå…ƒç´ ï¼Œæ¯ä¸ª<strong>è¢«çº¿è¦†ç›–çš„åˆ—</strong>åŠ ä¸Šè¿™ä¸ªå…ƒç´ ï¼Œè¿”å›æ­¥éª¤3</li></ol><p>ç»§ç»­æ‹¿ä¸Šé¢çš„ä¾‹å­åšæ¼”ç¤ºï¼š</p><ul><li>step1 æ¯ä¸€è¡Œæœ€å°çš„å…ƒç´ åˆ†åˆ«ä¸º15ã€20ã€20ï¼Œå‡å»å¾—åˆ°ï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%9A%E7%9B%AE%E6%A0%87%E5%8C%B9%E9%85%8D%E4%B9%8B%E5%8C%88%E7%89%99%E5%88%A9%E5%8C%B9%E9%85%8D%E7%AE%97%E6%B3%95/v2-62e6ad301e4beb6df670d5275422e301_720w.bmp"></p><ul><li>step2 æ¯ä¸€åˆ—æœ€å°çš„å…ƒç´ åˆ†åˆ«ä¸º0ã€20ã€5ï¼Œå‡å»å¾—åˆ°ï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%9A%E7%9B%AE%E6%A0%87%E5%8C%B9%E9%85%8D%E4%B9%8B%E5%8C%88%E7%89%99%E5%88%A9%E5%8C%B9%E9%85%8D%E7%AE%97%E6%B3%95/v2-cddb2e827f57dc81063e6507a85f2b7f_720w.bmp"></p><ul><li>step3 ç”¨æœ€å°‘çš„æ°´å¹³çº¿æˆ–å‚ç›´çº¿è¦†ç›–æ‰€æœ‰çš„0ï¼Œå¾—åˆ°ï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%9A%E7%9B%AE%E6%A0%87%E5%8C%B9%E9%85%8D%E4%B9%8B%E5%8C%88%E7%89%99%E5%88%A9%E5%8C%B9%E9%85%8D%E7%AE%97%E6%B3%95/v2-707c32f507abb7e7810f25737b9bc9de_720w.bmp"></p><ul><li><p>step4 çº¿çš„æ•°é‡ä¸º2ï¼Œå°äº3ï¼Œè¿›å…¥ä¸‹ä¸€æ­¥ï¼›</p></li><li><p>step5 ç°åœ¨æ²¡è¢«è¦†ç›–çš„æœ€å°å…ƒç´ æ˜¯5ï¼Œæ²¡è¢«è¦†ç›–çš„è¡Œï¼ˆç¬¬ä¸€å’Œç¬¬äºŒè¡Œï¼‰å‡å»5ï¼Œå¾—åˆ°ï¼š</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%9A%E7%9B%AE%E6%A0%87%E5%8C%B9%E9%85%8D%E4%B9%8B%E5%8C%88%E7%89%99%E5%88%A9%E5%8C%B9%E9%85%8D%E7%AE%97%E6%B3%95/v2-ecb6e70315de1f60b3a077972dc75ee4_720w.bmp"></p><p>è¢«è¦†ç›–çš„åˆ—ï¼ˆç¬¬ä¸€åˆ—ï¼‰åŠ ä¸Š5ï¼Œå¾—åˆ°ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%9A%E7%9B%AE%E6%A0%87%E5%8C%B9%E9%85%8D%E4%B9%8B%E5%8C%88%E7%89%99%E5%88%A9%E5%8C%B9%E9%85%8D%E7%AE%97%E6%B3%95/v2-e7e5c31a2041bf962358789fa18e51d9_720w.bmp"></p><p>è·³è½¬åˆ°step3ï¼Œç”¨æœ€å°‘çš„æ°´å¹³çº¿æˆ–å‚ç›´çº¿è¦†ç›–æ‰€æœ‰çš„0ï¼Œå¾—åˆ°ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%9A%E7%9B%AE%E6%A0%87%E5%8C%B9%E9%85%8D%E4%B9%8B%E5%8C%88%E7%89%99%E5%88%A9%E5%8C%B9%E9%85%8D%E7%AE%97%E6%B3%95/v2-ac667adf429d9affb7ed3c181d054850_720w.bmp"></p><p>step4ï¼šçº¿çš„æ•°é‡ä¸º3ï¼Œæ»¡è¶³æ¡ä»¶ï¼Œç®—æ³•ç»“æŸã€‚æ˜¾ç„¶ï¼Œå°†ä»»åŠ¡2åˆ†é…ç»™ç¬¬1ä¸ªäººã€ä»»åŠ¡1åˆ†é…ç»™ç¬¬2ä¸ªäººã€ä»»åŠ¡3åˆ†é…ç»™ç¬¬3ä¸ªäººæ—¶ï¼Œæ€»çš„ä»£ä»·æœ€å°ï¼ˆ0+0+0&#x3D;0ï¼‰ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%9A%E7%9B%AE%E6%A0%87%E5%8C%B9%E9%85%8D%E4%B9%8B%E5%8C%88%E7%89%99%E5%88%A9%E5%8C%B9%E9%85%8D%E7%AE%97%E6%B3%95/v2-14becb95b4cb94fc4f54e0ddfaa6ead0_720w.bmp"></p><p>æ‰€ä»¥åŸçŸ©é˜µçš„æœ€å°æ€»ä»£ä»·ä¸ºï¼ˆ40+20+25&#x3D;85ï¼‰ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%A4%9A%E7%9B%AE%E6%A0%87%E5%8C%B9%E9%85%8D%E4%B9%8B%E5%8C%88%E7%89%99%E5%88%A9%E5%8C%B9%E9%85%8D%E7%AE%97%E6%B3%95/v2-b2417f4590595ff962d03c6e5482d044_720w.bmp"></p><blockquote><p>æœ¬æ–‡è½¬è‡ª <a href="https://zhuanlan.zhihu.com/p/90835266">https://zhuanlan.zhihu.com/p/90835266</a>ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ã€‚</p></blockquote><h2 id="å‚è€ƒç½‘ç«™"><a href="#å‚è€ƒç½‘ç«™" class="headerlink" title="å‚è€ƒç½‘ç«™"></a>å‚è€ƒç½‘ç«™</h2><ul><li><a href="https://blog.csdn.net/dark_scope/article/details/8880547">è¶£å†™ç®—æ³•ç³»åˆ—ä¹‹â€“åŒˆç‰™åˆ©ç®—æ³•</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å¤šç›®æ ‡åŒ¹é… </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šç›®æ ‡åŒ¹é… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦ä¼˜å…ˆä¸åŒˆç‰™åˆ©åŒ¹é…ç®—æ³•</title>
      <link href="/2024/06/19/shen-du-you-xian-yu-xiong-ya-li-pi-pei-suan-fa/"/>
      <url>/2024/06/19/shen-du-you-xian-yu-xiong-ya-li-pi-pei-suan-fa/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡æ‰€æœ‰å†…å®¹å‡ä»¥ä¸‹é¢è¿™å¹…äºŒåˆ†å›¾ä¸ºä¾‹ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E4%B8%8E%E5%8C%88%E7%89%99%E5%88%A9%E5%8C%B9%E9%85%8D%E7%AE%97%E6%B3%95/v2-cc8263d6e0d2ed574635e713cd5174fe_720w.png"></p><h2 id="å›¾çš„æ·±åº¦éå†"><a href="#å›¾çš„æ·±åº¦éå†" class="headerlink" title="å›¾çš„æ·±åº¦éå†"></a>å›¾çš„æ·±åº¦éå†</h2><p>å›¾çš„éå†ï¼Œä»æŸä¸€ç‚¹å‡ºå‘ï¼Œè®¿é—®æ‰€æœ‰é¡¶ç‚¹ï¼Œä¸”æ¯ä¸ªé¡¶ç‚¹åªè¢«è®¿é—®ä¸€æ¬¡ã€‚å½“ç„¶è®¿é—®è¿‡ç¨‹ä¸­å¿…é¡»è¦æœ‰è¿çº¿æ‰è¡Œã€‚æ¯”å¦‚ä»0å‡ºå‘ï¼Œåªèƒ½è®¿é—®4å’Œ6ï¼Œä¸èƒ½è®¿é—®5ã€‚</p><p>æ¯”å¦‚ä¸Šé¢è¿™å¹…å›¾æ˜¯ä¸€ä¸ªåŠ¨ç‰©å›­çš„åœ°å›¾ã€‚é‚£ä¹ˆä¸€ä¸ªæœ€ç®€å•çš„æ€è·¯ï¼Œå°±æ˜¯éšä¾¿é€‰ä¸€ä¸ªé¡¶ç‚¹ï¼Œæ¯”å¦‚ä»0ï¼ˆå‡ºå‘ç‚¹å°±ç±»ä¼¼äºåŠ¨ç‰©å›­å¤§é—¨ï¼‰å‡ºå‘ã€‚è¿›é—¨åçš„è·¯çº¿è®¾è®¡æœ‰ä¸¤ç§æ–¹æ¡ˆï¼Œä¸€ç§å°±æ˜¯0â€“4â€“1â€“5è¿™æ ·ä¸€ç›´é—·ç€å¤´å¾€å‰èµ°çœ‹åŠ¨ç‰©ï¼Œåˆ°å¤´äº†å†å›æ¥ã€‚å¦ä¸€ç§æ–¹æ¡ˆå°±æ˜¯å…ˆæŠŠ0ä¸´è¿‘çš„4å’Œ6çš„åŠ¨ç‰©ä»¬å…ˆçœ‹äº†ï¼Œå†å¾€æ·±å¤„èµ°çœ‹ç¦»å¾—è¿œçš„å…¶ä»–åŠ¨ç‰©ã€‚</p><p>å¯ä»¥çœ‹å‡ºç¬¬ä¸€ç§è·¯å¾„è¶Šèµ°è¶Šæ·±å…¥ï¼Œå½“å‡ºç°å²”è·¯çš„æ—¶å€™ï¼Œä¼˜å…ˆå¾€æ›´è¿œçš„åœ°æ–¹èµ°ï¼Œå› æ­¤è¢«å«åš<strong>æ·±åº¦ä¼˜å…ˆéå†ï¼ˆDFSï¼‰</strong>ã€‚ç¬¬äºŒç§æ˜¯å½“å‡ºç°å²”è·¯çš„æ—¶å€™ï¼Œå…ˆæŠŠç¦»å¾—è¿‘çš„éƒ½è®¿é—®äº†ï¼Œèµ°æ³•æ¯”è¾ƒå‘æ•£ï¼Œè¢«å«åš<strong>å¹¿åº¦ä¼˜å…ˆéå†ï¼ˆBFSï¼‰</strong>ã€‚</p><p>æœ¬æ–‡ç ”ç©¶çš„æ˜¯<strong>æ·±åº¦ä¼˜é™éå†</strong>ã€‚</p><p>æ·±åº¦ä¼˜å…ˆéå†çš„æµç¨‹å°±æ˜¯ï¼Œä¼˜å…ˆå¾€æ·±çš„åœ°æ–¹èµ°ï¼Œæ²¡æœ‰è·¯äº†ï¼Œé€€å›åˆ°æœ€è¿‘çš„èŠ‚ç‚¹ï¼Œå¾€è¯¥èŠ‚ç‚¹å…¶ä»–å²”è·¯èµ°ã€‚ä¸€ç§å®ç°æ–¹å¼æ˜¯é€’å½’ã€‚é€’å½’è¿™ä¸ªæ¦‚å¿µä¸€å¼€å§‹æ¯”è¾ƒéš¾ç†è§£ã€‚æˆ‘å…ˆå…·ä½“çš„å†™ä¸€ä¸‹ä¸Šé¢è¿™å¹…å›¾çš„æ·±åº¦éå†æµç¨‹ã€‚</p><ol><li>ä»0å‡ºå‘ã€‚å³<strong>è®¿é—®0ã€‚</strong></li><li>04æœ‰è¿çº¿ã€‚4æ²¡è¢«è®¿é—®è¿‡ï¼Œ<strong>è®¿é—®4ã€‚</strong></li><li>40æœ‰è¿çº¿ã€‚0è¢«è®¿é—®è¿‡ã€‚</li><li>41æœ‰è¿çº¿ï¼Œ1æ²¡è¢«è®¿é—®è¿‡ï¼Œ<strong>è®¿é—®1ã€‚</strong></li><li>14æœ‰è¿çº¿ï¼Œ4è¢«è®¿é—®è¿‡ã€‚</li><li>15æœ‰è¿çº¿ï¼Œ5æ²¡è¢«è®¿é—®è¿‡ï¼Œ<strong>è®¿é—®5ã€‚</strong></li><li>51æœ‰è¿çº¿ï¼Œ1è¢«è®¿é—®è¿‡ã€‚</li><li><strong>é€€å›1ã€‚</strong>ï¼ˆ14ã€15åœ¨æ­¥éª¤5ã€6å¤„ç†è¿‡äº†ï¼‰</li><li><strong>é€€å›4ã€‚</strong>ï¼ˆ40ã€41åœ¨æ­¥éª¤3ã€4å¤„ç†è¿‡äº†ï¼‰</li><li>42æœ‰è¿çº¿ã€‚2æ²¡è¢«è®¿é—®è¿‡ï¼Œ<strong>è®¿é—®2ã€‚</strong></li><li>24æœ‰è¿çº¿ã€‚4è¢«è®¿é—®è¿‡ã€‚</li><li>26æœ‰è¿çº¿ã€‚6æ²¡è¢«è®¿é—®è¿‡ã€‚<strong>è®¿é—®6ã€‚</strong></li><li>60æœ‰è¿çº¿ï¼Œ0è¢«è®¿é—®è¿‡ã€‚</li><li>62æœ‰è¿çº¿ï¼Œ2è¢«è®¿é—®è¿‡ã€‚</li><li>63æœ‰è¿çº¿ï¼Œ3æ²¡è¢«è®¿é—®è¿‡ï¼Œ<strong>è®¿é—®3ã€‚</strong></li><li>36æœ‰è¿çº¿ï¼Œ6è¢«è®¿é—®è¿‡ã€‚</li><li><strong>é€€å›6ã€‚</strong>ï¼ˆ60ã€62ã€63å‡è¢«å¤„ç†è¿‡ï¼‰</li><li><strong>é€€å›2ã€‚</strong>ï¼ˆ24ã€26ä¹Ÿå‡è¢«å¤„ç†è¿‡ï¼‰</li><li><strong>é€€å›4ã€‚</strong>ï¼ˆ40ã€41ã€42å‡å¤„ç†è¿‡ï¼‰</li><li><strong>é€€å›0ã€‚</strong>ï¼ˆ04ã€06å‡å¤„ç†è¿‡ï¼‰</li><li>éå†ç»“æŸã€‚</li></ol><p>è·¯å¾„å°±æ˜¯è¿™ä¸ªæ ·å­çš„ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E4%B8%8E%E5%8C%88%E7%89%99%E5%88%A9%E5%8C%B9%E9%85%8D%E7%AE%97%E6%B3%95/v2-177eb29eb0f6f633de3157da6284b9f5_720w.png"></p><p>ä¸Šé¢è¿™ä¸ªå†™çš„éå¸¸è¯¦ç»†ï¼Œæ¥ä¸‹æ¥å†æŠ½è±¡ä¸€ä¸‹ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E4%B8%8E%E5%8C%88%E7%89%99%E5%88%A9%E5%8C%B9%E9%85%8D%E7%AE%97%E6%B3%95/v2-9a730dda5a32408043fa0491537ab112_720w.png"></p><p>æˆ‘ä»¬å‘ç°äº†è§„å¾‹ï¼Œå¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œè¦åšçš„äº‹æƒ…éƒ½æ˜¯æœ‰è§„å¾‹çš„ã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªè¦åšçš„äº‹æƒ…ï¼Œå†™åœ¨ä¸€ä¸ªå‡½æ•°dfsé‡Œã€‚å‡½æ•°dfsåŠŸèƒ½å¤§æ¦‚å°±æ˜¯æ‰¾è‡ªå·±çš„é‚»æ¥ç‚¹ï¼Œçœ‹çœ‹ä»–ä»¬æ˜¯ä¸æ˜¯è®¿é—®è¿‡ï¼Œæœ‰èƒ½è®¿é—®çš„å°±ç»§ç»­è®©è‡ªå·±çš„é‚»æ¥ç‚¹è°ƒç”¨dfsï¼Œæ²¡æœ‰èƒ½è®¿é—®çš„å°±è¿”å›ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> cur<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> node <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> node <span class="token operator">&lt;</span> node_num<span class="token punctuation">;</span> node<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token comment">//å¯¹äºæ¯ä¸ªèŠ‚ç‚¹</span>    <span class="token punctuation">&#123;</span>        <span class="token comment">//åˆ¤æ–­å½“å‰é¡¶ç‚¹curå’Œé¡¶ç‚¹iæ˜¯å¦æ˜¯é‚»æ¥ç‚¹,å¹¶åˆ¤æ–­é¡¶ç‚¹iæ˜¯å¦å·²ç»è®¿é—®è¿‡</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>line<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">[</span>node<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token operator">&amp;&amp;</span> visited<span class="token punctuation">[</span>node<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            visited<span class="token punctuation">[</span>node<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//è¯¥ç‚¹çš„è®¿é—®æ ‡å¿—ä½ç½®1</span>            <span class="token function">dfs</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// é€’å½’è°ƒç”¨ï¼Œç»§ç»­å¾€ä¸‹æ‰¾è·¯</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span><span class="token punctuation">;</span>   <span class="token comment">//æ‰€æœ‰ç‚¹éƒ½è®¿é—®è¿‡æˆ–è€…é€’å½’å›æ¥äº†ï¼Œç›´æ¥è¿”å›ã€‚</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢è¿™æ®µä»£ç å‚è€ƒäº†ç½‘ç«™</p><p><a href="https://link.zhihu.com/?target=https://www.cnblogs.com/wlw-x/p/11509384.html">å›¾è®º - å›¾çš„æ·±åº¦ä¼˜å…ˆéå†c++å®ç°</a></p><p>é€’å½’çš„ç¼ºç‚¹ä¹Ÿæ˜¯å¾ˆæ˜æ˜¾çš„ã€‚å¦‚æœå›¾å¾ˆå¤æ‚ï¼Œå°±ä¼šä¸æ–­é‡å¤è°ƒç”¨dfsï¼Œå¯¼è‡´å‡½æ•°ä¸€ç›´è¿”å›ä¸äº†ã€‚å› ä¸ºæ¯è°ƒç”¨ä¸€ä¸ªæ–¹æ³•å°±ä¼šåœ¨æ ˆä¸Šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼Œæ–¹æ³•è°ƒç”¨ç»“æŸåå°±ä¼šå¼¹å‡ºè¯¥æ ˆå¸§ï¼Œè€Œæ ˆçš„å¤§å°ä¸æ˜¯æ— é™çš„ï¼Œæ‰€ä»¥é€’å½’è°ƒç”¨æ¬¡æ•°è¿‡å¤šçš„è¯å°±ä¼šå¯¼è‡´æ ˆæº¢å‡ºã€‚</p><p>æ·±åº¦ä¼˜å…ˆéå†å¯ä»¥ç›´æ¥é€šè¿‡æ ˆæ¥å®ç°ï¼Œå…·ä½“çš„å¯ä»¥çœ‹ä¸‹é¢çš„é“¾æ¥çš„åŠ¨å›¾ã€‚</p><p><a href="https://link.zhihu.com/?target=https://developer.51cto.com/art/202004/614590.htm">å›¾æ–‡è¯¦è§£ä¸¤ç§ç®—æ³•ï¼šæ·±åº¦ä¼˜å…ˆéå†ï¼ˆDFSï¼‰å’Œå¹¿åº¦ä¼˜å…ˆéå†ï¼ˆBFSï¼‰</a></p><p><img src="https://s1.51cto.com/oss/202004/16/e1e6a44251b69cd3b930f3071a71ffd8.gif"></p><h2 id="åŒˆç‰™åˆ©ç®—æ³•åŒ¹é…æµç¨‹"><a href="#åŒˆç‰™åˆ©ç®—æ³•åŒ¹é…æµç¨‹" class="headerlink" title="åŒˆç‰™åˆ©ç®—æ³•åŒ¹é…æµç¨‹"></a>åŒˆç‰™åˆ©ç®—æ³•åŒ¹é…æµç¨‹</h2><p>çœ‹å®Œä¸Šé¢ï¼Œæˆ‘ä»¬å¤§æ¦‚å¯¹å›¾çš„æ·±åº¦éå†ï¼ˆDFSï¼‰æœ‰ä¸€ä¸ªè®¤è¯†äº†ã€‚å¯ä»¥çœ‹åˆ°æ·±åº¦éå†æ‰¾åˆ°äº†å¾ˆå¤šè·¯å¾„ï¼Œå¯¹å›¾ä¸Šçš„èŠ‚ç‚¹å…¨éƒ¨æœç´¢äº†ä¸€éï¼Œä½†æ˜¯å¹¶ä¸æœŸæœ›è¿™äº›è·¯å¾„æœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„ï¼Œæ¯”å¦‚æœ€çŸ­è·¯å¾„ã€‚æ·±åº¦éå†æ˜¯å¾ˆå¤šå›¾ç®—æ³•çš„åŸºç¡€ã€‚</p><p>è€Œæ·±åº¦éå†DFSä¹Ÿæ˜¯åŒˆç‰™åˆ©ç®—æ³•çš„åŸºç¡€ã€‚</p><ol><li>å½“å‰é…å¯¹ç›®æ ‡x0ã€‚ x0y0æœ‰è¿çº¿ï¼Œä¸”y0æ²¡æœ‰è¢«é…å¯¹ã€‚å› æ­¤x0å’Œy0é…å¯¹ã€‚</li><li>å½“å‰é…å¯¹ç›®æ ‡x1ã€‚x1y0æœ‰è¿çº¿ï¼Œy0å·²è¢«é…å¯¹ã€‚</li></ol><p>æ­¤æ—¶ï¼Œæœ‰ä¸¤ç§æ–¹æ¡ˆï¼šï¼ˆ1ï¼‰é€šè¿‡å¢å¹¿è·¯è§£å†³å†²çªã€‚å¾—åˆ°å¢å¹¿è·¯å¾„x1â€“y0â€“x0â€“y2ã€‚ï¼ˆ2ï¼‰é€‰æ‹©æ–°çš„é…å¯¹å¯¹è±¡ã€‚x1å’Œy1ä¹Ÿæœ‰è¿çº¿ï¼Œx1å’Œy1é…å¯¹ã€‚</p><p>ä»å›¾çš„éå†çš„è§’åº¦æ¥çœ‹ï¼Œæ–¹æ¡ˆ1ä¼˜å…ˆä½¿ç”¨å¢å¹¿è·¯ï¼Œæ„å‘³ç€ä¼˜å…ˆéå†ä¸‹ä¸€å±‚çš„èŠ‚ç‚¹ï¼Œè¿™ç§æ–¹æ¡ˆé‡‡ç”¨äº†æ·±åº¦ä¼˜å…ˆçš„æ€è·¯ã€‚</p><p>è€Œæ–¹æ¡ˆ2ä¼˜å…ˆéå†åŒä¸€å±‚çš„å¦ä¸€èŠ‚ç‚¹ï¼Œæ˜¯ä¸€ç§å¹¿åº¦ä¼˜å…ˆçš„æ€è·¯ã€‚</p><p>æŒ‰ç…§æ·±åº¦ä¼˜å…ˆçš„æ€è·¯ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstdio></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstring></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"main.h"</span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">DEBUG_FLAG</span> <span class="token expression"><span class="token number">1</span></span></span><span class="token keyword">int</span>     nx<span class="token punctuation">,</span> ny<span class="token punctuation">;</span><span class="token keyword">int</span>     line<span class="token punctuation">[</span>MAX_NODE<span class="token punctuation">]</span><span class="token punctuation">[</span>MAX_NODE<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span>     visited<span class="token punctuation">[</span>MAX_NODE<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span>     cx<span class="token punctuation">[</span>MAX_NODE<span class="token punctuation">]</span><span class="token punctuation">,</span> cy<span class="token punctuation">[</span>MAX_NODE<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// with printf, printf some information for understanding this code.</span><span class="token keyword">int</span> <span class="token function">find_path</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> v <span class="token operator">&lt;</span> ny<span class="token punctuation">;</span> v<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">DEBUG_FLAG</span></span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"y%d is checked\n"</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>line<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"there is a line between x%d and y%d\n"</span><span class="token punctuation">,</span> u<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"y%d is not visited! \n"</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">else</span><span class="token punctuation">&#123;</span>                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"y%d has been visited! \n"</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span><span class="token punctuation">&#123;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"there is no line between x%d and y%d\n"</span><span class="token punctuation">,</span> u<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>        <span class="token keyword">if</span><span class="token punctuation">(</span>line<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>visited<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            visited<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">DEBUG_FLAG</span></span>            <span class="token keyword">if</span><span class="token punctuation">(</span>cy<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token operator">==</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"y%d is not matched\n"</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">else</span><span class="token punctuation">&#123;</span>                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"y%d has been matched\n"</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"call find function, find another match for x%d\n"</span><span class="token punctuation">,</span> cy<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>            <span class="token keyword">if</span><span class="token punctuation">(</span>cy<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token operator">==</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span> <span class="token function">find_path</span><span class="token punctuation">(</span>cy<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">DEBUG_FLAG</span></span>                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"x%d and y%d is matched!\n"</span><span class="token punctuation">,</span> u<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"function find return 1\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>                cx<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> v<span class="token punctuation">;</span>                cy<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> u<span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">DEBUG_FLAG</span></span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"function find return 0\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">hungarian</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> matchNum<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>nx<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">DEBUG_FLAG</span></span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"find match for x%d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>        <span class="token keyword">if</span><span class="token punctuation">(</span>cx<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">DEBUG_FLAG</span></span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"x%d is not matched\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>            <span class="token function">memset</span><span class="token punctuation">(</span>visited<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>visited<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            matchNum<span class="token operator">+=</span><span class="token function">find_path</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> matchNum<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    nx <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>    ny <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>    line<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>   line<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  line<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    line<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>   line<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>   line<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    line<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>   line<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  line<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    line<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  line<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  line<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>cx<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>cx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>cy<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>cy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// call hungarian algorithm</span>    <span class="token keyword">int</span> matchNum <span class="token operator">=</span> <span class="token function">hungarian</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// printf result on screen</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d pairs of matched nodes found!\n"</span><span class="token punctuation">,</span> matchNum<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"===========Hungarian Algorithm Match Result===============\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>nx<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>cx<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"x[%d]--->None\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span><span class="token punctuation">&#123;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"x[%d]--->y[%d]\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> cx<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>mainå‡½æ•°ä¸­ï¼Œ ä¸€å¼€å§‹nxæ˜¯å·¦ä¾§é›†åˆçš„èŠ‚ç‚¹ä¸ªæ•°ï¼Œnyæ˜¯å³ä¾§èŠ‚ç‚¹ä¸ªæ•°ã€‚line[][]æ˜¯äºŒåˆ†å›¾ï¼Œtrueè¡¨ç¤ºæœ‰è¿çº¿ï¼Œfalseè¡¨ç¤ºæ²¡æœ‰è¿çº¿ã€‚cx[]å‚¨å­˜çš„æ˜¯å·¦ä¾§èŠ‚ç‚¹é…å¯¹ç»“æœï¼Œ-1è¡¨ç¤ºè¿˜æ²¡åŒ¹é…ã€‚ cy[]æ˜¯å³ä¾§èŠ‚ç‚¹çš„é…å¯¹æƒ…å†µï¼Œ-1è¡¨ç¤ºæ²¡æœ‰é…å¯¹ã€‚</p><p>ä¸Šé¢çš„ä»£ç é‡Œæˆ‘æ‰“å°äº†å¾ˆå¤šä¸­é—´ä¿¡æ¯ã€‚è°ƒç”¨hungrianå‡½æ•°åï¼Œå°†å¼€å§‹æ‰“å°ä¿¡æ¯ã€‚è¿™é‡Œçœ‹ä¸€å°æ®µã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">find match <span class="token keyword">for</span> x0 <span class="token comment">// è¿›å…¥hungariançš„forå¾ªç¯ï¼Œä¾æ¬¡ä¸ºå·¦ä¾§èŠ‚ç‚¹é…å¯¹</span>x0 is <span class="token operator">not</span> matched <span class="token comment">// cx\[0\]==-1ï¼Œè¡¨ç¤ºå·¦ä¾§0èŠ‚ç‚¹æ²¡é…å¯¹ã€‚</span>y0 is checked <span class="token comment">// è¿›å…¥find\_pathå‡½æ•°, å¯¹å³ä¾§èŠ‚ç‚¹å¾ªç¯ã€‚å…ˆæ£€æŸ¥y0</span>there is a line between x0 <span class="token operator">and</span> y0 <span class="token comment">// x0å’Œy0æœ‰è¿çº¿</span>y0 is <span class="token operator">not</span> visited<span class="token operator">!</span> <span class="token comment">// y0æ²¡æœ‰è¢«è®¿é—®è¿‡</span>y0 is <span class="token operator">not</span> matched <span class="token comment">// y0æ²¡æœ‰è¢«åŒ¹é…</span>x0 <span class="token operator">and</span> y0 is matched<span class="token operator">!</span> <span class="token comment">// y0 å’Œ x0åŒ¹é…</span>function find <span class="token keyword">return</span> <span class="token number">1</span> <span class="token comment">// é…å¯¹æˆåŠŸï¼Œè¿”å›</span>find match <span class="token keyword">for</span> x1 <span class="token comment">// å›åˆ°hungarianå‡½æ•°çš„forå¾ªç¯ï¼Œå¯¹ä¸‹ä¸€èŠ‚ç‚¹é…å¯¹ã€‚</span>x1 is <span class="token operator">not</span> matched <span class="token comment">// x1ä¹Ÿæ²¡åŒ¹é…ä¸Š</span>y0 is checked <span class="token comment">// è¿›å…¥find\_pathå‡½æ•°ï¼Œä»å³ä¾§èŠ‚ç‚¹ä¸­ç»™x1æ‰¾åŒ¹é…ã€‚</span>there is a line between x1 <span class="token operator">and</span> y0 <span class="token comment">// x1å’Œy0æœ‰è¿çº¿</span>y0 is <span class="token operator">not</span> visited<span class="token operator">!</span> <span class="token comment">// y0æ²¡è¢«è®¿é—®è¿‡</span>y0 has been matched <span class="token comment">// y0è¢«åŒ¹é…äº†</span>call find function<span class="token punctuation">,</span> find another match <span class="token keyword">for</span> x0 <span class="token comment">// é€’å½’è°ƒç”¨ï¼Œè¿™é‡Œå‚æ•°æ˜¯cy\[v\]ï¼Œä¹Ÿå°±æ˜¯y0çš„åŒ¹é…ç‚¹ï¼Œå³x0ã€‚å®é™…ä¸Šå°±æ˜¯ç»™x0é‡æ–°æ‰¾åŒ¹é…ã€‚</span>y0 is checked <span class="token comment">// ç¬¬ä¸€æ¬¡é€’å½’ï¼Œ åˆå¼€å§‹æ£€æŸ¥y0</span>there is a line between x0 <span class="token operator">and</span> y0 <span class="token comment">// x0y0æœ‰è¿çº¿</span>y0 has been visited<span class="token operator">!</span> <span class="token comment">// y0è¢«è®¿é—®è¿‡äº†ã€‚</span>y1 is checked <span class="token comment">// æ£€æŸ¥å³ä¾§ä¸‹ä¸€èŠ‚ç‚¹y1</span>there is no line between x0 <span class="token operator">and</span> y1 <span class="token comment">// æ²¡æœ‰è¿çº¿</span>y2 is checked <span class="token comment">// æ£€æŸ¥å³ä¾§ä¸‹ä¸€èŠ‚ç‚¹y2</span>there is a line between x0 <span class="token operator">and</span> y2 <span class="token comment">// x0 å’Œ y0æœ‰è¿çº¿</span>y2 is <span class="token operator">not</span> visited<span class="token operator">!</span> <span class="token comment">// y2æ²¡è¢«è®¿é—®</span>y2 is <span class="token operator">not</span> matched <span class="token comment">// y2 æ²¡åŒ¹é…</span>x0 <span class="token operator">and</span> y2 is matched<span class="token operator">!</span> <span class="token comment">// x0æ‰¾åˆ°äº†æ–°çš„åŒ¹é…y2</span>function find <span class="token keyword">return</span> <span class="token number">1</span> <span class="token comment">// ç¬¬ä¸€æ¬¡é€’å½’è¿”å›ï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œfind\_pathå‡½æ•°</span>x1 <span class="token operator">and</span> y0 is matched<span class="token operator">!</span> <span class="token comment">// x0ç»™x1è…¾äº†ä½ç½®å‡ºæ¥ï¼Œy0ç°åœ¨å¯ä»¥è·Ÿx1é…å¯¹äº†</span>function find <span class="token keyword">return</span> <span class="token number">1</span> <span class="token comment">// find\_pathå‡½æ•°è¿”å›</span>â€¦â€¦<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸‹é¢å°±ä¸å†™äº†ã€‚å¤§æ¦‚æµç¨‹å¯ä»¥çœ‹å‡ºæ¥ï¼Œå°±æ˜¯å¯¹äºæ¯ä¸ªèŠ‚ç‚¹éƒ½åŸºäºæ·±åº¦ä¼˜å…ˆéå†æ‰¾å›¾ä¸Šçš„è·¯å¾„ã€‚å‘ç”Ÿå†²çªäº†é€’å½’è°ƒç”¨find_pathï¼Œä¼ å…¥çš„å‚æ•°æ˜¯å†²çªèŠ‚ç‚¹çš„åŒ¹é…å¯¹è±¡ï¼Œçœ‹èƒ½ä¸èƒ½è…¾ä¸ªä½ç½®ï¼Œå®ç°äº†æ‰¾äº¤é”™è·¯çš„ç›®çš„ã€‚</p><p>æœ€ç»ˆè¿è¡Œç»“æœæ˜¯</p><p>=&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;Hungarian Algorithm Match Result&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p><p>x[0]â€”&gt;y[2]</p><p>x[1]â€”&gt;y[1]</p><p>x[2]â€”&gt;y[0]</p><p>x[3]â€”&gt;None</p><h2 id="å‚è€ƒç½‘ç«™"><a href="#å‚è€ƒç½‘ç«™" class="headerlink" title="å‚è€ƒç½‘ç«™"></a>å‚è€ƒç½‘ç«™</h2><ul><li><a href="https://zhuanlan.zhihu.com/p/258046402">æ·±åº¦ä¼˜å…ˆéå†çš„åŒˆç‰™åˆ©ç®—æ³•ä»£ç å®ç°</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å¤šç›®æ ‡åŒ¹é… </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šç›®æ ‡åŒ¹é… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹å†™å¡å°”æ›¼æ»¤æ³¢</title>
      <link href="/2024/01/15/shou-xie-qia-er-man-lu-bo/"/>
      <url>/2024/01/15/shou-xie-qia-er-man-lu-bo/</url>
      
        <content type="html"><![CDATA[<p>ç®€å•æ¥è®²ï¼Œå¡å°”æ›¼æ»¤æ³¢å™¨å°±æ˜¯æ ¹æ®ä¸Šä¸€æ—¶åˆ»çš„çŠ¶æ€ï¼Œé¢„æµ‹å½“å‰æ—¶åˆ»çš„çŠ¶æ€ï¼Œå°†é¢„æµ‹çš„çŠ¶æ€é‡ä¸å½“å‰æ—¶åˆ»çš„è§‚æµ‹é‡è¿›è¡ŒåŠ æƒï¼ŒåŠ æƒåçš„ç»“æœæ‰è®¤ä¸ºæ˜¯å½“å‰å®é™…çš„çŠ¶æ€é‡ï¼Œè€Œéä»…å¬ä¿¡å½“å‰çš„è§‚æµ‹é‡ã€‚å¡å°”æ›¼æ»¤æ³¢è¿‡ç¨‹å¯ä¸»è¦æ¦‚æ‹¬ä¸ºä»¥ä¸‹ä¸‰æ­¥ï¼š<code>åˆå§‹åŒ–</code> &gt;&gt;&gt; <code>é¢„æµ‹</code> &gt;&gt;&gt; <code>è§‚æµ‹</code> </p><h1 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h1><p>å‡è®¾æœ‰ä¸ªå°è½¦åœ¨é“è·¯ä¸Šå‘å³ä¾§åšåŒ€é€Ÿè¿åŠ¨ï¼Œåœ¨å·¦ä¾§å®‰è£…äº†ä¸€ä¸ªå¯ä»¥æµ‹é‡å°è½¦è·ç¦»å’Œé€Ÿåº¦çš„ä¼ æ„Ÿå™¨ï¼Œä¼ æ„Ÿå™¨æ¯ 1 ç§’æµ‹ä¸€æ¬¡å°è½¦çš„ä½ç½® $s$ å’Œé€Ÿåº¦ $v$ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E6%89%8B%E5%86%99%E5%8D%A1%E5%B0%94%E6%9B%BC%E6%BB%A4%E6%B3%A2/%E5%B0%8F%E8%BD%A6%E8%BF%90%E5%8A%A8%E7%8A%B6%E6%80%81%E4%BC%B0%E8%AE%A1%E7%A4%BA%E6%84%8F%E5%9B%BE.jpg"></p><p>ç”¨å‘é‡ $x_t$ æ¥è¡¨ç¤ºå½“å‰å°è½¦çš„çŠ¶æ€ï¼Œè¯¥å‘é‡ä¹Ÿæ˜¯<strong>æœ€ç»ˆçš„è¾“å‡ºç»“æœ</strong>ï¼Œè¢«ç§°ä½œçŠ¶æ€å‘é‡ï¼ˆstate vectorï¼‰ï¼š</p><p>$$x_t&#x3D;\begin{bmatrix}s_t \\ v_t\end{bmatrix}$$</p><p>ç”±äºæµ‹é‡è¯¯å·®çš„å­˜åœ¨ï¼Œä¼ æ„Ÿå™¨æ— æ³•ç›´æ¥è·å–å°è½¦ä½ç½®çš„çœŸå€¼ï¼Œåªèƒ½è·å–åœ¨çœŸå€¼é™„è¿‘çš„ä¸€ä¸ªè¿‘ä¼¼å€¼ï¼Œå¯ä»¥å‡è®¾æµ‹é‡å€¼åœ¨çœŸå€¼é™„è¿‘æœä»é«˜æ–¯åˆ†å¸ƒã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæµ‹é‡å€¼åˆ†å¸ƒåœ¨çº¢è‰²åŒºåŸŸå†…çš„å·¦ä¾§æˆ–å³ä¾§ï¼ŒçœŸå€¼åˆ™åœ¨çº¢è‰²åŒºåŸŸçš„æ³¢å³°å¤„ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E6%89%8B%E5%86%99%E5%8D%A1%E5%B0%94%E6%9B%BC%E6%BB%A4%E6%B3%A2/%E5%81%87%E5%AE%9A%E8%A7%82%E6%B5%8B%E5%80%BC%E5%9C%A8%E7%9C%9F%E5%80%BC%E9%99%84%E8%BF%91%E6%9C%8D%E4%BB%8E%E9%AB%98%E6%96%AF%E5%88%86%E5%B8%83.jpg"></p><p>ç”±äºæ˜¯ç¬¬ä¸€æ¬¡æµ‹é‡ï¼Œæ²¡æœ‰å°è½¦çš„å†å²ä¿¡æ¯ï¼Œè®¤ä¸ºå°è½¦åœ¨$t&#x3D;1$ç§’æ—¶çš„çŠ¶æ€é‡$x1$ä¸è§‚æµ‹é‡$z1$ç›¸ç­‰ï¼š</p><p>$$x_1&#x3D;z_1&#x3D;\begin{bmatrix}s_1 \\ v_1\end{bmatrix}$$</p><h1 id="é¢„æµ‹"><a href="#é¢„æµ‹" class="headerlink" title="é¢„æµ‹"></a>é¢„æµ‹</h1><p>é¢„æµ‹æ˜¯å¡å°”æ›¼æ»¤æ³¢ä¸­å¾ˆé‡è¦çš„ä¸€æ­¥ï¼Œè¿™ä¸€æ­¥ç›¸å½“äºä½¿ç”¨å†å²ä¿¡æ¯å¯¹æœªæ¥çš„ä½ç½®è¿›è¡Œæ¨æµ‹ã€‚æ ¹æ®ç¬¬ 1 ç§’å°è½¦çš„ä½ç½®å’Œé€Ÿåº¦ï¼Œå¯ä»¥æ¨æµ‹ç¬¬ 2 ç§’æ—¶ï¼Œå°è½¦æ‰€åœ¨çš„ä½ç½®åº”è¯¥å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E6%89%8B%E5%86%99%E5%8D%A1%E5%B0%94%E6%9B%BC%E6%BB%A4%E6%B3%A2/%E9%A2%84%E6%B5%8B%E6%94%BE%E5%A4%A7%E4%BA%86%E4%B8%8D%E7%A1%AE%E5%AE%9A%E6%80%A7.jpg"></p><p>ä¼šå‘ç°ï¼Œå›¾ä¸­çº¢è‰²åŒºåŸŸçš„èŒƒå›´å˜å¤§äº†ï¼Œè¿™æ˜¯å› ä¸ºé¢„æµ‹æ—¶åŠ å…¥äº†é€Ÿåº¦ä¼°è®¡çš„å™ªå£°ï¼Œæ˜¯ä¸€ä¸ªæ”¾å¤§ä¸ç¡®å®šæ€§çš„è¿‡ç¨‹ã€‚æ ¹æ®å°è½¦ç¬¬ 1 ç§’çš„çŠ¶æ€é‡è¿›è¡Œé¢„æµ‹ï¼Œå¾—åˆ°é¢„æµ‹çš„ç¬¬ 2 ç§’çš„çŠ¶æ€é‡ $x_{pre}$ï¼š</p><p>$$x_pre&#x3D;\begin{bmatrix}x_1+v_1 \\ v_1\end{bmatrix}$$</p><p>å…¶ä¸­ï¼Œä¸‹è„šæ ‡$pre$æ˜¯ prediction çš„ç®€ç§°ã€‚æ—¶é—´é—´éš”ä¸º 1 ç§’ï¼Œæ‰€ä»¥é¢„æµ‹ä½ç½®ä¸º<code>è·ç¦»+é€Ÿåº¦*1</code>ï¼Œç”±äºå°è½¦åšåŒ€é€Ÿè¿åŠ¨ï¼Œå› æ­¤é€Ÿåº¦ä¿æŒä¸å˜ã€‚</p><h1 id="è§‚æµ‹"><a href="#è§‚æµ‹" class="headerlink" title="è§‚æµ‹"></a>è§‚æµ‹</h1><p>åœ¨ç¬¬ 2 ç§’æ—¶ï¼Œä¼ æ„Ÿå™¨å¯¹å°è½¦çš„ä½ç½®åšäº†ä¸€æ¬¡è§‚æµ‹ï¼Œè®¤ä¸ºå°è½¦åœ¨ç¬¬ 2 ç§’æ—¶çš„è§‚æµ‹é‡ä¸º$z_2$ï¼š</p><p>$$z_2&#x3D;\begin{bmatrix}s_2 \\ v_2 v\end{bmatrix} $$</p><p>æ˜¾ç„¶ï¼Œç¬¬äºŒæ¬¡è§‚æµ‹çš„ç»“æœä¹Ÿæ˜¯å­˜åœ¨è¯¯å·®çš„ï¼Œå°†é¢„æµ‹çš„å°è½¦ä½ç½®ä¸å®é™…è§‚æµ‹åˆ°çš„å°è½¦ä½ç½®æ”¾åœ¨åŒä¸€ä¸ªå›¾ä¸Šï¼Œå³å¯çœ‹åˆ°ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E6%89%8B%E5%86%99%E5%8D%A1%E5%B0%94%E6%9B%BC%E6%BB%A4%E6%B3%A2/%E9%A2%84%E6%B5%8B%E5%8F%A0%E5%8A%A0%E8%A7%82%E6%B5%8B.jpg"></p><p>å›¾ä¸­çº¢è‰²åŒºåŸŸä¸ºé¢„æµ‹çš„å°è½¦ä½ç½®ï¼Œè“è‰²åŒºåŸŸä¸ºç¬¬ 2 ç§’çš„è§‚æµ‹ç»“æœã€‚æ˜¾ç„¶ï¼Œè¿™ä¸¤ä¸ªç»“æœéƒ½åœ¨çœŸå€¼é™„è¿‘ã€‚ä¸ºå¾—åˆ°å°½å¯èƒ½æ¥è¿‘çœŸå€¼çš„ç»“æœï¼Œå°†è¿™ä¸¤ä¸ªåŒºåŸŸçš„ç»“æœè¿›è¡ŒåŠ æƒï¼Œå–åŠ æƒåçš„å€¼ä½œä¸ºç¬¬ 2 ç§’çš„çŠ¶æ€é‡ã€‚ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œå¯ä»¥å°†ç¬¬ 2 ç§’çš„çŠ¶æ€é‡å†™æˆï¼š</p><p>$$x_2&#x3D;w_1 * x_{pre}+w_2*z_2 $$</p><p>å…¶ä¸­ï¼Œ$w_1$ ä¸ºé¢„æµ‹ç»“æœçš„æƒå€¼ï¼Œ$w_2$ ä¸ºè§‚æµ‹ç»“æœçš„æƒå€¼ã€‚<strong>ä¸¤ä¸ªæƒå€¼çš„è®¡ç®—æ˜¯æ ¹æ®é¢„æµ‹ç»“æœå’Œè§‚æµ‹ç»“æœçš„ä¸ç¡®å®šæ€§æ¥çš„ï¼Œè¿™ä¸ªä¸ç¡®å®šæ€§å°±æ˜¯é«˜æ–¯åˆ†å¸ƒä¸­æ–¹å·®çš„å¤§å°ï¼Œæ–¹å·®è¶Šå¤§ï¼Œæ³¢å½¢åˆ†å¸ƒè¶Šå¹¿ï¼Œä¸ç¡®å®šæ€§è¶Šé«˜ï¼Œç»™çš„æƒå€¼è¶Šä½</strong>ã€‚åŠ æƒåçš„çŠ¶æ€å‘é‡çš„åˆ†å¸ƒå¯ä»¥ç”¨ä¸‹å›¾ä¸­ç»¿è‰²åŒºåŸŸè¡¨ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E6%89%8B%E5%86%99%E5%8D%A1%E5%B0%94%E6%9B%BC%E6%BB%A4%E6%B3%A2/%E9%A2%84%E6%B5%8B%E5%8F%A0%E5%8A%A0%E8%A7%82%E6%B5%8B%E5%BE%97%E5%88%B0%E6%96%B0%E7%9A%84%E5%90%8E%E9%AA%8C%E9%AB%98%E6%96%AF%E5%88%86%E5%B8%83.jpg"></p><p>å¯ä»¥å‘ç°ï¼Œç»¿è‰²åŒºåŸŸçš„æ–¹å·®å‡å°äºçº¢è‰²åŒºåŸŸå’Œè“è‰²åŒºåŸŸï¼ŒåŸå› æ˜¯<strong>è¿›è¡ŒåŠ æƒè¿ç®—æ—¶ï¼Œéœ€è¦å°†ä¸¤ä¸ªé«˜æ–¯åˆ†å¸ƒè¿›è¡Œä¹˜æ³•è¿ç®—ï¼Œå¾—åˆ°çš„æ–°çš„é«˜æ–¯åˆ†å¸ƒçš„æ–¹å·®æ¯”ä¸¤ä¸ªåšä¹˜æ³•çš„é«˜æ–¯åˆ†å¸ƒéƒ½å°ã€‚ä¸¤ä¸ªä¸é‚£ä¹ˆç¡®å®šçš„åˆ†å¸ƒï¼Œæœ€ç»ˆå¾—åˆ°äº†ä¸€ä¸ªç›¸å¯¹ç¡®å®šçš„åˆ†å¸ƒ</strong>ã€‚</p><p>ç¬¬ 1 ç§’çš„åˆå§‹åŒ–ä»¥åŠç¬¬ 2 ç§’çš„é¢„æµ‹ã€è§‚æµ‹ï¼Œå®ç°äº†å¡å°”æ›¼æ»¤æ³¢çš„ç¬¬ä¸€ä¸ªå‘¨æœŸã€‚åŒæ ·åœ°ï¼Œæ ¹æ®ç¬¬ 2 ç§’çš„çŠ¶æ€é‡åšç¬¬ 3 ç§’çš„é¢„æµ‹ï¼Œå†ä¸ç¬¬ 3 ç§’çš„è§‚æµ‹é‡è¿›è¡ŒåŠ æƒï¼Œå°±å¾—åˆ°äº†ç¬¬ 3 ç§’çš„çŠ¶æ€é‡ï¼›å†æ ¹æ®ç¬¬ 3 ç§’çš„çŠ¶æ€é‡åšç¬¬ 4 ç§’çš„é¢„æµ‹ï¼Œå†ä¸ç¬¬ 4 ç§’çš„è§‚æµ‹é‡è¿›è¡ŒåŠ æƒï¼Œå°±å¾—åˆ°äº†ç¬¬ 4 ç§’çš„çŠ¶æ€é‡ã€‚ä»¥æ­¤å¾€å¤ï¼Œå°±å®ç°äº†ä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„å¡å°”æ›¼æ»¤æ³¢å™¨ã€‚å¡å°”æ›¼æ»¤æ³¢å™¨çš„ç†è®ºå…¬å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul><li>é¢„æµ‹</li></ul><p>$$<br>\begin{aligned}<br>x^{\prime}&amp;&#x3D;Fx+u<br>\\<br>P^{\prime}&amp;&#x3D;FPF^T+Q<br>\end{aligned}<br>$$</p><ul><li>æµ‹é‡å€¼æ›´æ–°</li></ul><p>$$<br>\begin{aligned}<br>y&amp;&#x3D;x-Hx^{\prime} \\<br>S&amp;&#x3D;HP^{\prime}H^{T}+R \\<br>K&amp;&#x3D;P^{\prime}H^{T}S^{-1} \\<br>x&amp;&#x3D;x^{\prime}+Ky \\<br>P&amp;&#x3D;(I-KH)P^{\prime} \\<br>\end{aligned}<br>$$</p><p>ä¸‹é¢ç»“åˆä¸Šé¢çš„å…¬å¼ï¼Œç”¨ C++ä»£ç å®ç°åˆå§‹åŒ–ã€é¢„æµ‹ã€è§‚æµ‹çš„è¿‡ç¨‹ã€‚ç”±äºå…¬å¼ä¸­æ¶‰åŠå¤§é‡çš„çŸ©é˜µè½¬ç½®å’Œæ±‚é€†è¿ç®—ï¼Œä½¿ç”¨å¼€æºçš„çŸ©é˜µè¿ç®—åº“â€”â€”Eigenã€‚</p><h1 id="åˆå§‹åŒ–ä»£ç ï¼ˆInitializationï¼‰"><a href="#åˆå§‹åŒ–ä»£ç ï¼ˆInitializationï¼‰" class="headerlink" title="åˆå§‹åŒ–ä»£ç ï¼ˆInitializationï¼‰"></a>åˆå§‹åŒ–ä»£ç ï¼ˆInitializationï¼‰</h1><p>åˆå§‹åŒ–é˜¶æ®µï¼Œéœ€è¦å°†å„ä¸ªå˜é‡åˆå§‹åŒ–ï¼Œå¯¹äºä¸åŒçš„è¿åŠ¨æ¨¡å‹ï¼Œå…¶çŠ¶æ€å‘é‡ä¸åŒï¼Œå¯¹äºä¸Šæ–‡ä¸­å°è½¦çš„ä¾‹å­ï¼Œåªéœ€è·ç¦» $s$ å’Œé€Ÿåº¦ $v$ å°±å¯ä»¥è¡¨ç¤ºå°è½¦çš„çŠ¶æ€ï¼›å†æ¯”å¦‚ä¸€ä¸ªäºŒç»´ç©ºé—´ä¸­çš„ç‚¹ï¼Œéœ€è¦ $x$ æ–¹å‘ä¸Šçš„è·ç¦»å’Œé€Ÿåº¦åŠ $y$ æ–¹å‘ä¸Šçš„è·ç¦»å’Œé€Ÿåº¦æ‰èƒ½è¡¨ç¤ºå…¶çŠ¶æ€ï¼Œè¿™æ ·çš„çŠ¶æ€é‡å°±æœ‰ 4 ä¸ªå˜é‡ã€‚å› æ­¤ä½¿ç”¨ Eigen åº“ä¸­éå®šé•¿çš„æ•°æ®ç»“æ„ï¼Œä¸‹å›¾ä¸­çš„<code>VerctorXd</code>è¡¨ç¤º X ç»´çš„åˆ—å‘é‡ï¼Œå…¶ä¸­çš„å…ƒç´ æ•°æ®ç±»å‹ä¸º<code>double</code>ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">KALMAN_FILTER_</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">KALMAN_FILTER_</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Eigen/Dense"</span></span><span class="token keyword">class</span> <span class="token class-name">KalmanFilter</span><span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token function">KalmanFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        is_initialized <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token operator">~</span><span class="token function">KalmanFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">Initialization</span><span class="token punctuation">(</span>Eigen<span class="token double-colon punctuation">::</span>VectorXd x_in<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        x_ <span class="token operator">=</span> x_in<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">private</span><span class="token operator">:</span>    <span class="token keyword">bool</span> is_initialized<span class="token punctuation">;</span> <span class="token comment">//flag of initialization</span>    Eigen<span class="token double-colon punctuation">::</span>VectorXd x_<span class="token punctuation">;</span>   <span class="token comment">//state vector</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œï¼Œæ–°å»ºäº†ä¸€ä¸ª<code>KalmanFilter</code>ç±»ï¼Œå…¶ä¸­å®šä¹‰äº†ä¸€ä¸ªå«åš<code>x_</code>çš„å˜é‡ï¼Œè¡¨ç¤ºå°è½¦çš„çŠ¶æ€å‘é‡ã€‚</p><h1 id="é¢„æµ‹ä»£ç ï¼ˆPredictionï¼‰"><a href="#é¢„æµ‹ä»£ç ï¼ˆPredictionï¼‰" class="headerlink" title="é¢„æµ‹ä»£ç ï¼ˆPredictionï¼‰"></a>é¢„æµ‹ä»£ç ï¼ˆPredictionï¼‰</h1><p>å®Œæˆåˆå§‹åŒ–åï¼Œå¼€å§‹å†™ Prediction éƒ¨åˆ†çš„ä»£ç ã€‚é¦–å…ˆæ˜¯å…¬å¼ï¼š<br>$$<br>x^{\prime}&#x3D;Fx+u<br>$$</p><p>è¿™é‡Œçš„$x$ä¸ºä¸Šä¸€æ—¶åˆ»çŠ¶æ€é‡ï¼Œé€šè¿‡å·¦ä¹˜ä¸€ä¸ª<strong>çŠ¶æ€è½¬ç§»çŸ©é˜µ</strong>(state transistion matrix)$F$ï¼Œå†åŠ ä¸Šå¤–éƒ¨å½±å“$u$ï¼Œå¾—åˆ°é¢„æµ‹çš„å½“å‰æ—¶åˆ»çš„çŠ¶æ€é‡$x^{\prime}$ã€‚ä»¥ 2 ç»´çš„åŒ€é€Ÿè¿åŠ¨ä¸ºä¾‹ï¼Œ$x$ä¸ºï¼š</p><p>$$x&#x3D;\begin{bmatrix}s_x \\ s_y \\ v_x \\ v_y \end{bmatrix} $$</p><p>å¯¹äºåŒ€é€Ÿè¿åŠ¨æ¨¡å‹ï¼Œç»è¿‡æ—¶é—´$\Delta t$åçš„é¢„æµ‹çŠ¶æ€é‡ä¸º:<br>$$x^{\prime}&#x3D;\begin{bmatrix}s_x +v_x \Delta t \\ s_y +v_y \Delta t\end{bmatrix} $$</p><p>ç”±äºå‡è®¾å½“å‰è¿åŠ¨ä¸ºåŒ€é€Ÿè¿åŠ¨ï¼ŒåŠ é€Ÿåº¦ä¸º 0ï¼ŒåŠ é€Ÿåº¦ä¸ä¼šå¯¹é¢„æµ‹é€ æˆå½±å“ï¼Œå³ï¼š</p><p>$$<br>u&#x3D;0<br>$$</p><p>å…¬å¼$x^{\prime}&#x3D;Fx+u$æ¼”å˜ä¸ºï¼š</p><p>$$<br>x^{\prime}&#x3D;<br>\begin{bmatrix}s_x +v_x \Delta t \\ s_y +v_y \Delta t\end{bmatrix}&#x3D;<br>\begin{bmatrix} 1&amp;0&amp;\Delta t &amp;0 \\ 0&amp;1&amp;0&amp;\Delta t \\ 0&amp;0&amp;1&amp;0 \\ 0&amp;0&amp;0&amp;1 \end{bmatrix}<br>\begin{bmatrix} s_x \\ s_y \\\ v_x \\ v_y \end{bmatrix}+<br>\begin{bmatrix} 0 \\ 0 \\\ 0 \\ 0 \end{bmatrix}<br>$$</p><p>å¦‚æœæ¢æˆåŒ€åŠ é€Ÿè¿åŠ¨æ¨¡å‹ï¼Œå°±å¯ä»¥å¼•å…¥åŠ é€Ÿåº¦$a_x$å’Œ$a_y$,$u$ å˜ä¸ºï¼š</p><p>$$<br>u&#x3D;<br>\begin{bmatrix} \frac{1}{2}a_x \Delta t^2 \\ \frac{1}{2}a_y \Delta t^2 \\ a_x\Delta t \\ a_y\Delta t\end{bmatrix}<br>$$</p><p>ç”±äºæ¯æ¬¡é¢„æµ‹æ—¶ï¼Œ$\Delta t$ çš„å¤§å°ä¸å›ºå®šï¼Œå› æ­¤ä¸“é—¨å†™ä¸€ä¸ªå‡½æ•°<code>SetF()</code>ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">SetF</span><span class="token punctuation">(</span>Eigen<span class="token double-colon punctuation">::</span>MatrixXd F_in<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    F_ <span class="token operator">=</span> F_in<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å†çœ‹é¢„æµ‹æ¨¡å—çš„ç¬¬äºŒä¸ªå…¬å¼ï¼š<br>$$<br>P^{\prime}&#x3D;FPF^{T}+Q<br>$$</p><p>è¯¥å…¬å¼ä¸­ï¼Œ$P$ è¢«ç§°ä¸º<strong>çŠ¶æ€åæ–¹å·®çŸ©é˜µ</strong>ï¼ˆstate covariance matrixï¼‰ï¼Œè¡¨ç¤ºç³»ç»Ÿçš„ä¸ç¡®å®šç¨‹åº¦ï¼Œ$P$ åœ¨å¡å°”æ›¼æ»¤æ³¢å™¨åˆå§‹åŒ–æ—¶ä¼šå¾ˆå¤§ï¼Œéšç€è¶Šæ¥è¶Šå¤šçš„æ•°æ®æ³¨å…¥æ»¤æ³¢å™¨ä¸­ï¼Œä¸ç¡®å®šç¨‹åº¦ä¼šé€æ¸å‡å°ï¼›$Q$ æ˜¯<strong>è¿‡ç¨‹å™ªå£°åæ–¹å·®çŸ©é˜µ</strong>ï¼ˆprocess noise covariance matrixï¼‰ï¼Œå³æ— æ³•ç”¨ $x^\prime&#x3D;Fx+u$ è¡¨ç¤ºçš„å™ªå£°ï¼Œæ¯”å¦‚è½¦è¾†è¿åŠ¨æ—¶çªç„¶åˆ°äº†ä¸Šå¡ï¼Œè¿™ä¸ªå½±å“æ˜¯æ— æ³•ç”¨ä¹‹å‰çš„çŠ¶æ€è½¬ç§»ä¼°è®¡çš„ã€‚ä»¥æ¿€å…‰é›·è¾¾ä¸ºä¾‹ï¼Œæ¿€å…‰é›·è¾¾åªèƒ½æµ‹é‡ç‚¹çš„ä½ç½®ï¼Œæ— æ³•æµ‹é‡ç‚¹çš„é€Ÿåº¦ï¼Œå› æ­¤å¯¹äºæ¿€å…‰é›·è¾¾çš„åæ–¹å·®çŸ©é˜µæ¥è¯´ï¼Œå¯¹äºä½ç½®ä¿¡æ¯ï¼Œå…¶æµ‹é‡è¾ƒå‡†ç¡®ï¼Œä¸ç¡®å®šåº¦è¾ƒä½ï¼›å¯¹äºé€Ÿåº¦ä¿¡æ¯ï¼Œä¸ç¡®å®šåº¦è¾ƒé«˜ã€‚å› æ­¤å¯ä»¥è®¤ä¸ºæ­¤å¤„çš„ $P$ ä¸ºï¼š</p><p>$$<br>P&#x3D;\begin{bmatrix}1&amp;0&amp;0&amp;0\\0&amp;1&amp;0&amp;0\\0&amp;0&amp;100&amp;0\\0&amp;0&amp;0&amp;100\end{bmatrix}<br>$$</p><p>ç”±äº $Q$ å¯¹æ•´ä¸ªç³»ç»Ÿå­˜åœ¨å½±å“ï¼Œä½†åˆä¸èƒ½ç¡®å®šå¯¹ç³»ç»Ÿçš„å½±å“æœ‰å¤šå¤§ã€‚å·¥ç¨‹ä¸Šï¼Œä¸€èˆ¬å°† $Q$ è®¾ç½®ä¸ºå•ä½çŸ©é˜µå‚ä¸è¿ç®—ï¼Œå³ï¼š</p><p>$$<br>Q&#x3D;\begin{bmatrix}1&amp;0&amp;0&amp;0\\0&amp;1&amp;0&amp;0\\0&amp;0&amp;1&amp;0\\0&amp;0&amp;0&amp;1\end{bmatrix}<br>$$</p><p>æ ¹æ®ä»¥ä¸Šå†…å®¹å’Œå…¬å¼ï¼š</p><p>$$<br>\begin{aligned}x^{\prime} &amp;&#x3D; Fx+u \\ P^{\prime} &amp;&#x3D; FPF^T+Q\end{aligned}<br>$$</p><p>å°±å¯ä»¥å†™å‡ºé¢„æµ‹æ¨¡å—çš„ä»£ç äº†ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">Prediction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    x_ <span class="token operator">=</span> F_ <span class="token operator">*</span> x_<span class="token punctuation">;</span>    Eigen<span class="token double-colon punctuation">::</span>MatrixXd Ft <span class="token operator">=</span> F_<span class="token punctuation">.</span><span class="token function">transpose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    P_ <span class="token operator">=</span> F_ <span class="token operator">*</span> P_ <span class="token operator">*</span> Ft <span class="token operator">+</span> Q_<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="è§‚æµ‹ä»£ç ï¼ˆMeasurementï¼‰"><a href="#è§‚æµ‹ä»£ç ï¼ˆMeasurementï¼‰" class="headerlink" title="è§‚æµ‹ä»£ç ï¼ˆMeasurementï¼‰"></a>è§‚æµ‹ä»£ç ï¼ˆMeasurementï¼‰</h1><p>è§‚æµ‹æ¨¡å—çš„ç¬¬ä¸€ä¸ªå…¬å¼æ˜¯ï¼š</p><p>$$<br>y&#x3D;z-Hx^{\prime}<br>$$</p><p>è¿™ä¸ªå…¬å¼è®¡ç®—çš„æ˜¯å®é™…è§‚æµ‹é‡ $z$ ä¸çŠ¶æ€é‡é¢„æµ‹å€¼ $x^\prime$ ä¹‹é—´çš„å·®å€¼ $y$ã€‚ä¸åŒä¼ æ„Ÿå™¨çš„è§‚æµ‹é‡ä¸€èˆ¬ä¸åŒï¼Œæ¯”å¦‚æ¿€å…‰é›·è¾¾æµ‹é‡çš„ä½ç½®ä¿¡å·ä¸º $x$ æ–¹å‘å’Œ $y$ æ–¹å‘ä¸Šçš„è·ç¦»ï¼Œæ¯«ç±³æ³¢é›·è¾¾æµ‹é‡çš„æ˜¯ä½ç½®å’Œè§’åº¦ä¿¡æ¯ã€‚å› æ­¤éœ€è¦å°†çŠ¶æ€é‡å·¦ä¹˜ä¸€ä¸ªçŸ©é˜µ $H$ï¼Œæ‰èƒ½ä¸è§‚æµ‹é‡è¿›è¡Œç›¸åº”çš„è¿ç®—ï¼Œ$H$ è¢«ç§°ä¸º<strong>æµ‹é‡çŸ©é˜µ</strong>ï¼ˆMeasurement Matrixï¼‰ã€‚æ¿€å…‰é›·è¾¾çš„è§‚æµ‹é‡ä¸ºï¼š</p><p>$$<br>z&#x3D;\begin{bmatrix}x_m \\ y_m\end{bmatrix}<br>$$</p><p>å…¶ä¸­ $x_m$ å’Œ $y_m$ åˆ†åˆ«è¡¨ç¤º $x$ æ–¹å‘å’Œ $y$ æ–¹å‘ä¸Šçš„æµ‹é‡å€¼ã€‚ç”±äº $x^\prime$ æ˜¯ä¸€ä¸ª 4*1 çš„åˆ—å‘é‡ï¼Œå¦‚æœè¦ä¸ä¸€ä¸ª 2*1 çš„åˆ—å‘é‡ $z$ è¿›è¡Œå‡è¿ç®—ï¼Œéœ€è¦å·¦ä¹˜ä¸€ä¸ª 2*4 çš„çŸ©é˜µï¼š</p><p>$$<br>\begin{bmatrix}\Delta x \\ \Delta y\end{bmatrix}&#x3D;\begin{bmatrix}x_m \\ y_m\end{bmatrix}-\begin{bmatrix}1&amp;0&amp;0&amp;0\\0&amp;1&amp;0&amp;0\end{bmatrix}\begin{bmatrix}s_x+v_x\Delta t \\ s_y+v_y\Delta t \\ v_x \\ v_y\end{bmatrix}<br>$$</p><p>æ„å³ï¼Œå¯¹äºæ¿€å…‰é›·è¾¾è€Œè¨€ï¼Œæµ‹é‡çŸ©é˜µ $H$ ä¸ºï¼š</p><p>$$<br>H&#x3D;\begin{bmatrix}1&amp;0&amp;0&amp;0\\0&amp;1&amp;0&amp;0\end{bmatrix}<br>$$</p><p>æ±‚å¾— $y$ åï¼Œå¯¹ $y$ ä¹˜ä»¥ä¸€ä¸ªåŠ æƒé‡ï¼Œå†åŠ åˆ°åŸæ¥çš„çŠ¶æ€é‡é¢„æµ‹é‡ä¸Šå»ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªæ—¢è€ƒè™‘äº†è§‚æµ‹é‡ï¼Œåˆè€ƒè™‘äº†é¢„æµ‹æ¨¡å‹ä½ç½®çš„çŠ¶æ€é‡äº†ã€‚å¯¹äºæƒå€¼ $K$ çš„è®¡ç®—ï¼Œçœ‹ä¸‹é¢çš„ä¸¤ä¸ªå…¬å¼ï¼š</p><p>$$<br>\begin{aligned}S &amp;&#x3D; HP^{\prime}H^T+R\\K &amp;&#x3D; P^{\prime}H^TS^{-1}\end{aligned}<br>$$</p><p>æƒå€¼ $K$ è¢«ç§°ä¸º<strong>å¡å°”æ›¼å¢ç›Š</strong>ï¼ˆKalman Gainï¼‰ï¼Œ$R$ æ˜¯<strong>æµ‹é‡å™ªå£°åæ–¹å·®çŸ©é˜µ</strong>ï¼ˆmeasurement noise covariance matrixï¼‰ï¼Œè¡¨ç¤ºçš„æ˜¯æµ‹é‡å€¼ä¸çœŸå€¼ä¹‹é—´çš„å·®å€¼ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¼ æ„Ÿå™¨å‚å®¶ä¼šæä¾›è¯¥å€¼ã€‚$S$ åªæ˜¯ä¸ºäº†ç®€åŒ–å…¬å¼ï¼Œå†™çš„ä¸€ä¸ªä¸´æ—¶å˜é‡ã€‚æœ€åä¸¤ä¸ªå…¬å¼ï¼š</p><p>$$<br>\begin{aligned}x &amp;&#x3D; x^{\prime}+Ky\\P &amp;&#x3D; (I-KH)P^{\prime}\end{aligned}<br>$$</p><p>ä¸Šè¿°ä¸¤ä¸ªå…¬å¼ï¼Œå®é™…ä¸Šå®Œæˆäº†å¡å°”æ›¼æ»¤æ³¢å™¨çš„é—­ç¯ï¼Œç¬¬ä¸€ä¸ªå…¬å¼æ˜¯å®Œæˆäº†å½“å‰çŠ¶æ€é‡ $x$ çš„æ›´æ–°ï¼Œä¸ä»…è€ƒè™‘äº†ä¸Šä¸€æ—¶åˆ»çŠ¶æ€é‡çš„é¢„æµ‹é‡ï¼Œä¹Ÿè€ƒè™‘äº†è§‚æµ‹é‡å’Œæ•´ä¸ªç³»ç»Ÿçš„å™ªå£°ï¼›ç¬¬äºŒä¸ªå…¬å¼æ ¹æ®å¡å°”æ›¼å¢ç›Šï¼Œæ›´æ–°äº†ç³»ç»Ÿçš„ä¸ç¡®å®šåº¦ $P$ï¼Œç”¨äºä¸‹ä¸€ä¸ªå‘¨æœŸçš„è¿ç®—ï¼Œè¯¥å…¬å¼ä¸­çš„ $I$ ä¸ºå•ä½çŸ©é˜µï¼Œç»´æ•°ä¸ºçŠ¶æ€é‡çš„è¡Œæ•°ã€‚å°†è§‚æµ‹æ¨¡å—çš„äº”ä¸ªå…¬å¼å†™æˆä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">KALMAN_FILTER_</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">KALMAN_FILTER_</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Eigen/Dense"</span></span><span class="token keyword">class</span> <span class="token class-name">KalmanFilter</span><span class="token punctuation">&#123;</span>  <span class="token keyword">public</span><span class="token operator">:</span>    <span class="token function">KalmanFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        is_initialized <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token operator">~</span><span class="token function">KalmanFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// get state vector</span>    Eigen<span class="token double-colon punctuation">::</span>VectorXd <span class="token function">GetX</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> x_<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// get flag of initialization</span>    <span class="token keyword">bool</span> <span class="token function">IsInitialized</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> is_initialized<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// initialize kalman filter</span>    <span class="token keyword">void</span> <span class="token function">Initialization</span><span class="token punctuation">(</span>Eigen<span class="token double-colon punctuation">::</span>VectorXd x_in<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        x_ <span class="token operator">=</span> x_in<span class="token punctuation">;</span>        is_initialized <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">void</span> <span class="token function">SetF</span><span class="token punctuation">(</span>Eigen<span class="token double-colon punctuation">::</span>MatrixXd F_in<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        F_ <span class="token operator">=</span> F_in<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">void</span> <span class="token function">SetP</span><span class="token punctuation">(</span>Eigen<span class="token double-colon punctuation">::</span>MatrixXd P_in<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        P_ <span class="token operator">=</span> P_in<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">void</span> <span class="token function">SetQ</span><span class="token punctuation">(</span>Eigen<span class="token double-colon punctuation">::</span>MatrixXd Q_in<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        Q_ <span class="token operator">=</span> Q_in<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">void</span> <span class="token function">SetH</span><span class="token punctuation">(</span>Eigen<span class="token double-colon punctuation">::</span>MatrixXd H_in<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        H_ <span class="token operator">=</span> H_in<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">void</span> <span class="token function">SetR</span><span class="token punctuation">(</span>Eigen<span class="token double-colon punctuation">::</span>MatrixXd R_in<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        R_ <span class="token operator">=</span> R_in<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// predict state vector and state covariance matrix</span>    <span class="token keyword">void</span> <span class="token function">Prediction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        x_ <span class="token operator">=</span> F_ <span class="token operator">*</span> x_<span class="token punctuation">;</span>        Eigen<span class="token double-colon punctuation">::</span>MatrixXd Ft <span class="token operator">=</span> F_<span class="token punctuation">.</span><span class="token function">transpose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        P_ <span class="token operator">=</span> F_ <span class="token operator">*</span> P_ <span class="token operator">*</span> Ft <span class="token operator">+</span> Q_<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// update state vector and state covariance matrix</span>    <span class="token keyword">void</span> <span class="token function">MeasurementUpdate</span><span class="token punctuation">(</span><span class="token keyword">const</span> Eigen<span class="token double-colon punctuation">::</span> VectorXd <span class="token operator">&amp;</span>z<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        Eigen<span class="token double-colon punctuation">::</span>VectorXd y <span class="token operator">=</span> z <span class="token operator">-</span> H_ <span class="token operator">*</span> x_<span class="token punctuation">;</span>        Eigen<span class="token double-colon punctuation">::</span>MatrixXd S <span class="token operator">=</span> H_ <span class="token operator">*</span> P_ <span class="token operator">*</span> H_<span class="token punctuation">.</span><span class="token function">transpose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> R_<span class="token punctuation">;</span>        <span class="token comment">// Kalman Gain</span>        Eigen<span class="token double-colon punctuation">::</span>MatrixXd K <span class="token operator">=</span> P_ <span class="token operator">*</span> H_<span class="token punctuation">.</span><span class="token function">transpose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> S<span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// estimate state vector</span>        x_ <span class="token operator">=</span> x_ <span class="token operator">+</span> K <span class="token operator">*</span> y<span class="token punctuation">;</span>        <span class="token keyword">int</span> size <span class="token operator">=</span> x_<span class="token punctuation">.</span>size<span class="token punctuation">;</span>        Eigen<span class="token double-colon punctuation">::</span>Matrix2Xd I <span class="token operator">=</span> Eigen<span class="token double-colon punctuation">::</span><span class="token class-name">MatrixXd</span><span class="token double-colon punctuation">::</span><span class="token function">Identity</span><span class="token punctuation">(</span>size<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// update state covariance matrix</span>        P_ <span class="token operator">=</span> <span class="token punctuation">(</span>I <span class="token operator">-</span> K <span class="token operator">*</span> H_<span class="token punctuation">)</span> <span class="token operator">*</span> P_<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token keyword">private</span><span class="token operator">:</span>    <span class="token keyword">bool</span> is_initialized<span class="token punctuation">;</span> <span class="token comment">// flag of initialization</span>    Eigen<span class="token double-colon punctuation">::</span>VectorXd x_<span class="token punctuation">;</span>  <span class="token comment">// state vector</span>    Eigen<span class="token double-colon punctuation">::</span>MatrixXd F_<span class="token punctuation">;</span>  <span class="token comment">// state transition matrix</span>    Eigen<span class="token double-colon punctuation">::</span>MatrixXd P_<span class="token punctuation">;</span>  <span class="token comment">// state covariance matrix</span>    Eigen<span class="token double-colon punctuation">::</span>MatrixXd Q_<span class="token punctuation">;</span>  <span class="token comment">// process noise covariance matrix</span>    Eigen<span class="token double-colon punctuation">::</span>MatrixXd H_<span class="token punctuation">;</span>  <span class="token comment">// measurement matrix</span>    Eigen<span class="token double-colon punctuation">::</span>MatrixXd R_<span class="token punctuation">;</span>  <span class="token comment">// measurement noise covariance matrix</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥å‘ç°<code>MeasurementUpdate()</code>å‡½æ•°çš„å½¢å‚ä¸ºâ€œå¸¸å¼•ç”¨â€ç±»å‹ï¼Œè¿™æ ·æ—¢å…¼é¡¾äº†å‚æ•°ä¼ é€’æ•ˆç‡ï¼ˆå› ä¸ºæ˜¯å¼•ç”¨ï¼Œæ‰€ä»¥æ— éœ€ä¸ºä¼ å…¥çš„å‚æ•°ç”³è¯·ç‰©ç†å†…å­˜ç”¨ä»¥ä¿å­˜å…¶å€¼ï¼‰ï¼Œåˆä¿è¯äº†æ•°æ®å®‰å…¨ï¼ˆå› ä¸ºå‚æ•°è¢«<code>const</code>ä¿®é¥°äº†ï¼‰ã€‚ä»¥æ¿€å…‰é›·è¾¾æ•°æ®ä¸ºä¾‹ï¼Œä½¿ç”¨ä»¥ä¸Šæ»¤æ³¢å™¨ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"KalmanFilter.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">double</span> Sx <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">,</span> Sy <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>    <span class="token keyword">double</span> last_timestamp <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">,</span> now_timestamp <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>    KalmanFilter kf<span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">GetLidarData</span><span class="token punctuation">(</span>Sx<span class="token punctuation">,</span> Sy<span class="token punctuation">,</span> now_timestamp<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token comment">// initialize kalman filter</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>kf<span class="token punctuation">.</span><span class="token function">IsInitialized</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            last_timestamp <span class="token operator">=</span> now_timestamp<span class="token punctuation">;</span>            Eigen<span class="token double-colon punctuation">::</span>VectorXd <span class="token function">x_in</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            x_in <span class="token operator">&lt;&lt;</span> Sx<span class="token punctuation">,</span> Sy<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">;</span>            kf<span class="token punctuation">.</span><span class="token function">Initialization</span><span class="token punctuation">(</span>x_in<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// set state covariance matrix</span>            Eigen<span class="token double-colon punctuation">::</span>MatrixXd <span class="token function">P_in</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            P_in <span class="token operator">&lt;&lt;</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span>                    <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span>                    <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">100.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span>                    <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">100.0</span><span class="token punctuation">;</span>            kf<span class="token punctuation">.</span><span class="token function">SetP</span><span class="token punctuation">(</span>P_in<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// set process noise covariance matrix</span>            Eigen<span class="token double-colon punctuation">::</span>MatrixXd <span class="token function">Q_in</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Q_in <span class="token operator">&lt;&lt;</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span>                    <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span>                    <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span>                    <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">;</span>            kf<span class="token punctuation">.</span><span class="token function">SetQ</span><span class="token punctuation">(</span>Q_in<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// set measurement matrix</span>            Eigen<span class="token double-colon punctuation">::</span>MatrixXd <span class="token function">H_in</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            H_in <span class="token operator">&lt;&lt;</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span>                    <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">;</span>            kf<span class="token punctuation">.</span><span class="token function">SetH</span><span class="token punctuation">(</span>H_in<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// set measurement noise covariance matrix</span>            <span class="token comment">// R is provided by sensor supplier, in datasheet</span>            Eigen<span class="token double-colon punctuation">::</span>MatrixXd <span class="token function">R_in</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            R_in <span class="token operator">&lt;&lt;</span> <span class="token number">0.0225</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span>                    <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0225</span><span class="token punctuation">;</span>            kf<span class="token punctuation">.</span><span class="token function">SetR</span><span class="token punctuation">(</span>R_in<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">continue</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// set state transition matrix</span>        <span class="token keyword">double</span> dt <span class="token operator">=</span> now_timestamp <span class="token operator">-</span> last_timestamp<span class="token punctuation">;</span>        Eigen<span class="token double-colon punctuation">::</span>MatrixXd <span class="token function">F_in</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        F_in <span class="token operator">&lt;&lt;</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> dt<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span>                <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> dt<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span>                <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span>                <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">;</span>        kf<span class="token punctuation">.</span><span class="token function">SetF</span><span class="token punctuation">(</span>F_in<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// predict state vector x and state covariance matrix P</span>        kf<span class="token punctuation">.</span><span class="token function">Prediction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// update state vector x and state covariance matrix P</span>        Eigen<span class="token double-colon punctuation">::</span>VectorXd <span class="token function">z</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        z <span class="token operator">&lt;&lt;</span> Sx<span class="token punctuation">,</span> Sy<span class="token punctuation">;</span>        kf<span class="token punctuation">.</span><span class="token function">MeasurementUpdate</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>        Eigen<span class="token double-colon punctuation">::</span>VectorXd <span class="token function">x_out</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// output result</span>        x_out <span class="token operator">=</span> kf<span class="token punctuation">.</span><span class="token function">GetX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Kalman filter output Sx is: "</span> <span class="token operator">&lt;&lt;</span> <span class="token function">x_out</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>                   <span class="token operator">&lt;&lt;</span> <span class="token string">", output Sy is: "</span> <span class="token operator">&lt;&lt;</span> <span class="token function">x_out</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­ï¼Œ<code>GetLidarData()</code>å‡½æ•°é™¤äº†è·å–ç‚¹çš„ä½ç½®ä¿¡æ¯ $S_x$ å’Œ $S_y$ å¤–ï¼Œè¿˜è·å–äº†å½“å‰æ—¶åˆ»çš„æ—¶é—´æˆ³ï¼Œç”¨äºè®¡ç®—å‰åä¸¤å¸§çš„æ—¶é—´å·® $\mathrm{d}t$ã€‚åœ¨ç»å…¸å¡å°”æ›¼æ»¤æ³¢å™¨åŸºç¡€ä¸Šï¼Œè¿˜æœ‰æ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨ï¼ˆEKFï¼‰å’Œæ— è¿¹å¡å°”æ›¼æ»¤æ³¢å™¨ï¼ˆUKFï¼‰ï¼Œå®ƒä»¬ä¸ç»å…¸å¡å°”æ›¼æ»¤æ³¢å™¨çš„æœ€å¤§åŒºåˆ«æ˜¯çŠ¶æ€è½¬ç§»çŸ©é˜µ $F$ å’Œæµ‹é‡çŸ©é˜µ $H$ çš„ä¸åŒã€‚</p><h1 id="å¡å°”æ›¼æ»¤æ³¢äº”å¤§å…¬å¼è§£é‡Š"><a href="#å¡å°”æ›¼æ»¤æ³¢äº”å¤§å…¬å¼è§£é‡Š" class="headerlink" title="å¡å°”æ›¼æ»¤æ³¢äº”å¤§å…¬å¼è§£é‡Š"></a>å¡å°”æ›¼æ»¤æ³¢äº”å¤§å…¬å¼è§£é‡Š</h1><p>$$<br>\begin{align}<br>x_{k}^{-} &amp; &#x3D; :Ax_{k-1}:+:Bu_{k-1}\\<br>P_{k}^{-} &amp; &#x3D; :AP_{k-1}A^T:+:Q\\<br>K_{k} &amp; &#x3D; :\frac{P_{k}^{-}H^{T}}{HP_{k}^{-}H^{T}+R}\\<br>x_{k} &amp; &#x3D; :x_{k}^{-}:+:K_{k}(z_{k}-Hx_{k}^{-}),z_{k}&#x3D;Hx_{k\text{æµ‹é‡}}\\<br>P_{k} &amp; &#x3D; :(I:-:K_{k}H)P_{k}^{-}<br>\end{align}<br>$$</p><p>$$<br>\begin{aligned}&amp;Z_{k-1}:\text{ æœ‰}k-1\text{ ä¸ªæ˜¯ç›¸é‚»çš„æœ€é•¿åçš„è®¡,å°±å˜ç‚¹æ¨¡å—äº§çš„æ•°åˆ†æ•°æ®äº¤äº«ã€‚}\\<br>u_{k-1}:\text{ å…¶å®æ•°çš„å¤ç¥¨:}\\<br>u_{k-1}:\text{ æ±‚è‡ªæŒç»­æ—¶é—´};\\<br>A:\text{ æ¢åˆ›åœºè½¬ä½“æ—¶};\\B:\text{ ç›¸å…³æ€§}:\\<br>B:\text{ ç›¸å…³æ€§}:\\<br>B_{i-1}:\text{ æ¡}k\text{ ä¼ä¸šç¾¤çš„æœ¬è½®ä½çš„ä½œè®¡,è¢«æ˜¯ä½™æ ·åƒäº§é¢æµ‹å¾—æœ¬çš„çŠ¶æ€å˜ç‡};\\<br>P_{k-1}:\text{ å¸¸}k&#x3D;1\text{ è¿‡è¿›æ—¶çš„åå¼¦åˆçš„åˆ†å·®çš„æ ·};\\<br>P_{k-1}:\text{ è¿›é«˜æ¡ä¸º2åˆ†è¡¨ç»„æˆ};\\<br>Q:\text{ è¿‡å¢é«˜ä¸º2åˆ†åˆ«æ˜¯æ›²çº¿}:\\<br>P_{k-1}:\text{ ä½¿å¾—å…¨æ³•çš„ä½™æ›²æœ€å—åŠ åŠ›æ˜¯æœ€ç»ˆ};\\<br>H:\text{ æ¬¡æœŸé—´æ ·}:\\H:\text{ ä½¿åˆ°ç¡®æœ¬ä¸ºå°‘æ˜¯æ¨è€—};\\<br>R:\text{ æˆæœŸè®¾æœ¬ä¸ºå¤šå·®æ¨¡å¼}:\\<br>R_{k}:\text{ ä¸‹ä¸è¦å¾—æœ€æœ€}:\\<br>B_{k-1}:\text{ è¡¨ä»¥å…¨ç«™ç†çš„åŒå­¦æ•…æˆæ˜¯è¦};\\<br>B_{k-1}:\text{ å…¶ä¸­ç†æ–¹å‘ç†æµ‹å˜é‡};\\<br>B_{k-1}:\text{ å…¶ä¸­ç†æ–¹å‘ç†åˆ¶å˜é‡};\\<br>B_{k-1}:\text{ å…¶æ€§æ˜¯åŠ å€¼çš„å®šéªŒè®ºå¿µä¼°è®¡,è¿™æ¡é‡æ˜¯å¾—å¸äº§çš„èåˆæ•°æ®å˜è¦};\\<br>P_{k-1}:\text{ æ¡}k\text{ ä¼ä¸šæŒ‡ä»¥ç»“è¯¯å™¨æ˜¯å‚å¤šå·®æå¾—;}\end{aligned}<br>$$</p><h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><ul><li><a href="https://blog.shipengx.com/archives/d3b96bd5.html">æ‰‹æŠŠæ‰‹æ•™ä½ å†™å¡å°”æ›¼æ»¤æ³¢å™¨</a></li></ul><h1 id="å®æˆ˜ä¹‹ADASä¸­çš„ç›®æ ‡è·Ÿè¸ª"><a href="#å®æˆ˜ä¹‹ADASä¸­çš„ç›®æ ‡è·Ÿè¸ª" class="headerlink" title="å®æˆ˜ä¹‹ADASä¸­çš„ç›®æ ‡è·Ÿè¸ª"></a>å®æˆ˜ä¹‹ADASä¸­çš„ç›®æ ‡è·Ÿè¸ª</h1><ul><li><p><a href="https://blog.csdn.net/zimiao552147572/article/details/105985289">ç›®æ ‡ä¼°è®¡æ¨¡å‹-å¡å°”æ›¼æ»¤æ³¢</a></p></li><li><p><a href="https://blog.csdn.net/qq_41920323/article/details/130253343">ç›®æ ‡è·Ÿè¸ªä¹‹â€“å¡å°”æ›¼æ»¤æ³¢ï¼ˆC++ä»£ç è§£æï¼‰</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å¡å°”æ›¼æ»¤æ³¢ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¡å°”æ›¼æ»¤ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¼˜ç§€åšå®¢æ”¶è—</title>
      <link href="/2023/12/20/you-xiu-bo-ke-shou-cang/"/>
      <url>/2023/12/20/you-xiu-bo-ke-shou-cang/</url>
      
        <content type="html"><![CDATA[<h1 id="adaning"><a href="#adaning" class="headerlink" title="adaning"></a>adaning</h1><ul><li><a href="https://adaning.github.io/">https://adaning.github.io/</a></li></ul><iframe src="https://adaning.github.io/" width="800" height="500"></iframe><h1 id="senitco"><a href="#senitco" class="headerlink" title="senitco"></a>senitco</h1><ul><li><a href="https://senitco.github.io/">https://senitco.github.io/</a></li></ul><iframe src="https://senitco.github.io/" width="800" height="500"></iframe>]]></content>
      
      
      <categories>
          
          <category> ä¼˜ç§€åšå®¢ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¼˜ç§€åšå®¢æ”¶è— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åå¤§æ’åºç®—æ³•</title>
      <link href="/2023/12/20/shi-da-pai-xu-suan-fa/"/>
      <url>/2023/12/20/shi-da-pai-xu-suan-fa/</url>
      
        <content type="html"><![CDATA[<h2 id="åå¤§æ’åº"><a href="#åå¤§æ’åº" class="headerlink" title="åå¤§æ’åº"></a><a href="#%E5%8D%81%E5%A4%A7%E6%8E%92%E5%BA%8F" title="åå¤§æ’åº"></a>åå¤§æ’åº</h2><p>åå¤§æ’åºåŒ…æ‹¬æ’å…¥æ’åº, é€‰æ‹©æ’åº, å†’æ³¡æ’åº, å½’å¹¶æ’åº, å¸Œå°”æ’åº, å¿«é€Ÿæ’åº, å †æ’åº, è®¡æ•°æ’åº, åŸºæ•°æ’åº, æ¡¶æ’åº.</p><h2 id="åŸºæœ¬çŸ¥è¯†"><a href="#åŸºæœ¬çŸ¥è¯†" class="headerlink" title="åŸºæœ¬çŸ¥è¯†"></a><a href="#%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86" title="åŸºæœ¬çŸ¥è¯†"></a>åŸºæœ¬çŸ¥è¯†</h2><p>åŸºæœ¬æ¦‚å¿µ:</p><ul><li><strong>ç¨³å®šæ€§</strong>: åœ¨æ’åºå‰æœ‰ä¸¤ä¸ªç›¸åŒçš„å…³é”®å­—aå’Œb, è‹¥æ’åºåä»èƒ½ä¿è¯aå’Œbçš„ç›¸å¯¹é¡ºåºä¸å˜(æ’åºå‰aåœ¨bå‰, åˆ™æ’åºåè¿˜æ˜¯aåœ¨bå‰), åˆ™ç§°ä¸ºæ’åºç®—æ³•æ˜¯ç¨³å®šçš„, å¦åˆ™æ˜¯ä¸ç¨³å®šçš„.</li><li><strong>æ—¶é—´å¤æ‚åº¦</strong>: å¯¹æ’åºæ•°æ®çš„æ€»çš„æ“ä½œæ¬¡æ•°. åæ˜ å½“nå˜åŒ–æ—¶, æ“ä½œæ¬¡æ•°å‘ˆç°ä»€ä¹ˆè§„å¾‹.</li><li><strong>ç©ºé—´å¤æ‚åº¦</strong>: æ˜¯æŒ‡ç®—æ³•åœ¨è®¡ç®—æœºå†…æ‰§è¡Œæ—¶æ‰€éœ€å­˜å‚¨ç©ºé—´çš„åº¦é‡, å®ƒä¹Ÿæ˜¯æ•°æ®è§„æ¨¡nçš„å‡½æ•°.</li></ul><p>å¸¸è§çš„ç®—æ³•æ’åºå¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»:</p><ul><li><strong>æ¯”è¾ƒç±»æ’åº</strong>: é€šè¿‡æ¯”è¾ƒæ¥å†³å®šå…ƒç´ é—´çš„ç›¸å¯¹æ¬¡åº, ç”±äºå…¶æ—¶é—´å¤æ‚åº¦ä¸èƒ½çªç ´$O(nlogn)$, å› æ­¤ä¹Ÿç§°ä¸ºéçº¿æ€§æ—¶é—´æ¯”è¾ƒç±»æ’åº.</li><li><strong>éæ¯”è¾ƒç±»æ’åº</strong>: ä¸é€šè¿‡æ¯”è¾ƒæ¥å†³å®šå…ƒç´ é—´çš„ç›¸å¯¹æ¬¡åº, å®ƒå¯ä»¥çªç ´åŸºäºæ¯”è¾ƒæ’åºçš„<strong>æ—¶é—´ä¸‹ç•Œ</strong>, ä»¥çº¿æ€§æ—¶é—´è¿è¡Œ, å› æ­¤ä¹Ÿç§°ä¸ºçº¿æ€§æ—¶é—´éæ¯”è¾ƒç±»æ’åº.</li></ul><p>æ¯”è¾ƒæ’åºæœ€ä½çš„æ—¶é—´å¤æ‚åº¦ä¸€å®šæ˜¯$O(n)$, ä½ ä¸æ¯”è¾ƒæ€ä¹ˆæ’åºå˜›, æ¯ä¸ªå…ƒç´ æ¯”è¾ƒä¸€æ¬¡, æœ€ä½æ—¶é—´å¤æ‚åº¦ä¸€å®šæ˜¯çº¿æ€§çº§çš„.</p><p>æ¯”è¾ƒæ’åºå¯ä»¥åˆ†ä¸º<strong>äº¤æ¢æ’åº</strong>, <strong>æ’å…¥æ’åº</strong>, <strong>é€‰æ‹©æ’åº</strong>, <strong>å½’å¹¶æ’åº</strong>å››å¤§ç±».</p><ul><li>äº¤æ¢æ’åº: å°±æ˜¯æ ¹æ®åºåˆ—ä¸­ä¸¤ä¸ªè®°å½•é”®å€¼çš„æ¯”è¾ƒç»“æœæ¥å¯¹æ¢è¿™ä¸¤ä¸ªè®°å½•åœ¨åºåˆ—ä¸­çš„ä½ç½®.<ul><li>å†’æ³¡æ’åº</li><li>å¿«é€Ÿæ’åº</li></ul></li><li>æ’å…¥æ’åº: å°†ä¸€ä¸ªè®°å½•æ’å…¥åˆ°å·²ç»æ’å¥½åºçš„æœ‰åºè¡¨ä¸­, é€æ¸æ‰©å¤§æœ‰åºè¡¨çš„è§„æ¨¡è‡³æ•´ä¸ªè¡¨.<ul><li>ç®€å•æ’å…¥æ’åº</li><li>å¸Œå°”æ’åº</li></ul></li><li>é€‰æ‹©æ’åº: ç¬¬ä¸€æ¬¡ä»å¾…æ’åºçš„æ•°æ®å…ƒç´ ä¸­é€‰å‡ºæœ€å°(æˆ–æœ€å¤§) çš„ä¸€ä¸ªå…ƒç´ , å­˜æ”¾åœ¨åºåˆ—çš„èµ·å§‹ä½ç½®, ç„¶åå†ä»å‰©ä½™çš„æœªæ’åºå…ƒç´ ä¸­å¯»æ‰¾åˆ°æœ€å°(å¤§) å…ƒç´ , ç„¶åæ”¾åˆ°å·²æ’åºçš„åºåˆ—çš„æŸä¸ªä½ç½®(å–å†³äºç»“æ„).<ul><li>ç®€å•é€‰æ‹©æ’åº</li><li>å †æ’åº</li></ul></li><li>å½’å¹¶æ’åº: ç”¨åˆ†æ²»æ³•, æ¯æ¬¡å°†å·²æœ‰åºçš„å­åºåˆ—åˆå¹¶, æœ€åå¾—åˆ°å®Œå…¨æœ‰åºçš„åºåˆ—.</li></ul><h2 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a><a href="#%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h2><p>æ’å…¥æ’åºæˆ‘ä»¬æ¯ä¸ªäººéƒ½ä¼š, åœ¨æ‰“æ‰‘å…‹çš„æ—¶å€™, é¡ºç‰Œçš„è¿‡ç¨‹å…¶å®å°±æ˜¯å¤šæ¬¡æ’å…¥æ’åºçš„è¿‡ç¨‹. å¯¹äºæœªæ’åºçš„åºåˆ—, åœ¨å·²æ’åºçš„åºåˆ—ä¸­æ‰¾åˆ°è¿™ä¸ªå…³é”®å­—çš„ç›¸åº”ä½ç½®å¹¶æ’å…¥.</p><ol><li>ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹, è¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åº;</li><li>å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ , åœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æ;</li><li>å¦‚æœè¯¥å…ƒç´ (å·²æ’åº) å¤§äºæ–°å…ƒç´ , å°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®;</li><li>é‡å¤æ­¥éª¤3, ç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®;</li><li>å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®å;</li><li>é‡å¤æ­¥éª¤2 ~ 5.</li></ol><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%8D%81%E5%A4%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F.gif"></p><p>å®ç°ä»£ç å¦‚ä¸‹:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">insertSort</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> temp<span class="token punctuation">;</span>    <span class="token comment">// è®¤ä¸º0å·å…ƒç´ å·²ç»æœ‰åº, ä»æ— åºåºåˆ—æŒ¨ä¸ªé€‰æ‹©</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>len<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        temp <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        j <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// i-1ä¸ºæœ‰åºåºåˆ— </span>        <span class="token comment">// å½“é€‰ä¸­çš„å…ƒç´ æ¯”æœ‰åºåºåˆ—ä¸­å…ƒç´ å°çš„æ—¶å€™, æœ‰åºåºåˆ—å…ƒç´ ä¾æ¬¡åç§» </span>        <span class="token keyword">while</span><span class="token punctuation">(</span>j <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> temp <span class="token operator">&lt;</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token operator">--</span>j<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// ä¸è¦å¿˜è®°æ’å…¥é€‰ä¸­çš„å…ƒç´  </span>        a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a><a href="#%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h2><p>é€‰æ‹©æ’åºæ˜¯éå¸¸ç¬¦åˆäººç±»æ€ç»´ç›´è§‰çš„ä¸€ç§æ’åºæ–¹å¼, ä»åºåˆ—ä¸­é€‰å‡ºä¸€ä¸ªæœ€å°çš„æˆ–æœ€å¤§çš„å…ƒç´ , åŠ å…¥åˆ°å·²ç»æœ‰åºçš„æ’åºçš„æœ€å·¦ç«¯æˆ–æœ€å³ç«¯. æœ€åä½¿å¾—æ•´ä¸ªåºåˆ—éƒ½æœ‰åº.</p><ol><li>åˆå§‹çŠ¶æ€ï¼šæ— åºåŒºä¸ºR[1..n], æœ‰åºåŒºä¸ºç©º;</li><li>ç¬¬iè¶Ÿæ’åº(i&#x3D;1,2,3â€¦n-1)å¼€å§‹æ—¶, å½“å‰æœ‰åºåŒºå’Œæ— åºåŒºåˆ†åˆ«ä¸ºR[1..i-1]å’ŒR(i..n) . è¯¥è¶Ÿæ’åºä»å½“å‰æ— åºåŒºä¸­-é€‰å‡ºå…³é”®å­—æœ€å°çš„è®°å½• R[k], å°†å®ƒä¸æ— åºåŒºçš„ç¬¬1ä¸ªè®°å½•Räº¤æ¢, ä½¿R[1..i]å’ŒR[i+1..n)åˆ†åˆ«å˜ä¸ºè®°å½•ä¸ªæ•°å¢åŠ 1ä¸ªçš„æ–°æœ‰åºåŒºå’Œè®°å½•ä¸ªæ•°å‡å°‘1ä¸ªçš„æ–°æ— åºåŒº;</li><li>n-1è¶Ÿç»“æŸ, æ•°ç»„æœ‰åºåŒ–äº†.</li></ol><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%8D%81%E5%A4%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F.gif"></p><p>å®ç°ä»£ç å¦‚ä¸‹:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">selectSort</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">;</span>    <span class="token keyword">int</span> temp<span class="token punctuation">;</span>    <span class="token keyword">int</span> min<span class="token punctuation">;</span>    <span class="token comment">// éå†æ¯ä¸ªå…ƒç´  å½“ç„¶ä¸åŒ…æ‹¬æœ€åä¸€ä¸ªå…ƒç´  å› ä¸ºæœ€åé€‰æ‹©çš„ä¸€å®šæ˜¯æœ€å¤§çš„ åœ¨æœ€å³ä¾§</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        min <span class="token operator">=</span> i<span class="token punctuation">;</span>         <span class="token comment">// æ‰¾åˆ°æœ€å°å…ƒç´  </span>        <span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>len<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> a<span class="token punctuation">[</span>min<span class="token punctuation">]</span><span class="token punctuation">)</span> min <span class="token operator">=</span> j<span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>        <span class="token comment">// äº¤æ¢æœ€å°çš„å…ƒç´ å’Œå½“å‰é€‰ä¸­å…ƒç´  </span>        temp <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>min<span class="token punctuation">]</span><span class="token punctuation">;</span>        a<span class="token punctuation">[</span>min<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a><a href="#%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h2><p>å†’æ³¡æ’åºæ˜¯å®ç°èµ·æ¥æœ€æœ€æœ€ç®€å•çš„ç®—æ³•, ä¸‰è¡Œå®ç°. å®ƒæ‰§è¡Œçš„è¿‡ç¨‹å°±åƒé±¼åæ³¡æ³¡ä¸€æ ·, ä¸€ç‚¹ä¸€ç‚¹æµ®ä¸Šæ¥. æ¯è¶Ÿæ’åºéƒ½æœ‰ä¸€ä¸ªå…ƒç´ åœåˆ°å®ƒçš„æœ€ç»ˆä½ç½®.</p><ol><li>æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ . å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§, å°±äº¤æ¢å®ƒä»¬ä¸¤ä¸ª;</li><li>å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œ, ä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹, è¿™æ ·åœ¨æœ€åçš„å…ƒç´ åº”è¯¥ä¼šæ˜¯æœ€å¤§çš„æ•°;</li><li>é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤, é™¤äº†æœ€åä¸€ä¸ª;</li><li>é‡å¤æ­¥éª¤1~3, ç›´åˆ°æ’åºå®Œæˆ.</li></ol><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%8D%81%E5%A4%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F.gif"></p><p>å®ç°ä»£ç å¦‚ä¸‹:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// ä¸‰è¡Œç‰ˆæœ¬ </span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> temp<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> len<span class="token operator">=</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">/</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>len<span class="token operator">-</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span> <span class="token punctuation">(</span>temp<span class="token operator">=</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">></span>a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span>a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ³¨: ä¸èƒ½æ”¾åœ¨å‡½æ•°é‡Œ! å› ä¸ºæ”¾åœ¨å‡½æ•°é‡Œä¼ å‚æ—¶sizeof(a)ä¼šæ˜¯ä¸€ä¸ªæŒ‡é’ˆçš„é•¿åº¦</span><span class="token comment">// é™¤éç›´æ¥ç»™lenæ•°ç»„çš„é•¿åº¦</span><span class="token comment">// å‡½æ•°ç‰ˆæœ¬</span><span class="token keyword">void</span> <span class="token function">bubbleSort</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">;</span>    <span class="token keyword">int</span> temp<span class="token punctuation">;</span>     <span class="token keyword">int</span> flag<span class="token punctuation">;</span> <span class="token comment">// æ ‡è¯†æ˜¯å¦å‘ç”Ÿè¿‡äº¤æ¢ </span>    <span class="token comment">// æ¯æ¬¡éƒ½æœ‰ä¸€ä¸ªå…ƒç´ åˆ°æœ€ç»ˆä½ç½®, åªéœ€è¦å¾ªç¯n-1æ¬¡ </span>    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        flag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token comment">//  ä»å¤´å¼€å§‹å†’æ³¡ </span>        <span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span>i<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                temp <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>                flag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>             <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// å¦‚æœæ²¡å‘ç”Ÿäº¤æ¢è¯´æ˜å·²å…¨éƒ¨æœ‰åº </span>        <span class="token keyword">if</span><span class="token punctuation">(</span>flag <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a><a href="#%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h2><p>å½’å¹¶æ’åºå»ºç«‹åœ¨å½’å¹¶æ“ä½œä¸Š, æ˜¯<strong>åˆ†æ²»æ³•</strong>çš„å…¸å‹åº”ç”¨. å°†å·²æœ‰åºçš„å­åºåˆ—åˆå¹¶, å¾—åˆ°å®Œå…¨æœ‰åºçš„åºåˆ—.</p><ol><li>æŠŠé•¿åº¦ä¸ºnçš„è¾“å…¥åºåˆ—åˆ†æˆä¸¤ä¸ªé•¿åº¦ä¸ºn&#x2F;2çš„å­åºåˆ—;</li><li>å¯¹è¿™ä¸¤ä¸ªå­åºåˆ—åˆ†åˆ«é‡‡ç”¨å½’å¹¶æ’åº;</li><li>å°†ä¸¤ä¸ªæ’åºå¥½çš„å­åºåˆ—åˆå¹¶æˆä¸€ä¸ªæœ€ç»ˆçš„æ’åºåºåˆ—.</li></ol><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%8D%81%E5%A4%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F.gif"></p><p>å®ç°ä»£ç å¦‚ä¸‹:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// å½’å¹¶æ“ä½œ </span><span class="token comment">// è¿™é‡Œå†™å‡ºmidæ˜¯å› ä¸ºä¸»å‡½æ•°å·²ç»è®¡ç®—è¿‡äº† </span><span class="token keyword">void</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> low<span class="token punctuation">,</span> <span class="token keyword">int</span> mid<span class="token punctuation">,</span> <span class="token keyword">int</span> high<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> k<span class="token punctuation">;</span>    <span class="token keyword">int</span> n1 <span class="token operator">=</span> mid <span class="token operator">-</span> low <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>     <span class="token keyword">int</span> n2 <span class="token operator">=</span> high <span class="token operator">-</span> mid<span class="token punctuation">;</span>    <span class="token keyword">int</span> L<span class="token punctuation">[</span>n1<span class="token punctuation">]</span><span class="token punctuation">,</span> R<span class="token punctuation">[</span>n2<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">// å°†åŸåºåˆ—åˆ†è£…è¿›ä¸¤ä¸ªæ•°ç»„ </span>    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>n1<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        L<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>low<span class="token operator">+</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>     <span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>n2<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        R<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>mid<span class="token operator">+</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    i <span class="token operator">=</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    k <span class="token operator">=</span> low<span class="token punctuation">;</span>     <span class="token comment">// å¼€å§‹æ¯”è¾ƒå½’å¹¶</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> n1 <span class="token operator">&amp;&amp;</span> j <span class="token operator">&lt;</span> n2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>L<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> R<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> a<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> L<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> a<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> R<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>    <span class="token comment">// å¦‚æœè¿˜æœ‰åºåˆ—æ²¡æœ‰è£…å®Œ</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> n1<span class="token punctuation">)</span> a<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> L<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>j <span class="token operator">&lt;</span> n2<span class="token punctuation">)</span> a<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> R<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// åˆ’åˆ†æ“ä½œ æŠŠåºåˆ—æŒ‰é€’å½’åˆ’åˆ†ä¸ºå¤šä¸ªåˆ†ç»„ </span><span class="token keyword">void</span> <span class="token function">mergeSort</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> low<span class="token punctuation">,</span> <span class="token keyword">int</span> high<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>low <span class="token operator">&lt;</span> high<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>low <span class="token operator">+</span> high<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token function">mergeSort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> high<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">mergeSort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> low<span class="token punctuation">,</span> mid<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">merge</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> low<span class="token punctuation">,</span> mid<span class="token punctuation">,</span> high<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¸Œå°”æ’åº"><a href="#å¸Œå°”æ’åº" class="headerlink" title="å¸Œå°”æ’åº"></a><a href="#%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F" title="å¸Œå°”æ’åº"></a>å¸Œå°”æ’åº</h2><p>è™½ç„¶å¸Œå°”æ’åºåŸºæœ¬ä¸Šä¸æ€ä¹ˆè€ƒè™‘å®ç°, ä½†ä¸ä»£è¡¨å®ƒä¸é‡è¦. å¸Œå°”æ’åºæ˜¯ç¬¬ä¸€ä¸ªçªç ´$O(n^2)$çš„ç®—æ³•, æ˜¯ç®€å•æ’å…¥æ’åºçš„æ”¹è‰¯ç‰ˆ. ä¸æ’å…¥æ’åºçš„ä¸åŒä¹‹å¤„åœ¨äº, å®ƒä¼šä¼˜å…ˆæ¯”è¾ƒè·ç¦»è¾ƒè¿œçš„å…ƒç´ . å¸Œå°”æ’åºåˆå«<strong>ç¼©å°å¢é‡æ’åº</strong>. å…ˆå°†æ•´ä¸ªå¾…æ’åºçš„è®°å½•åºåˆ—åˆ†å‰²æˆä¸ºè‹¥å¹²å­åºåˆ—åˆ†åˆ«è¿›è¡Œç›´æ¥æ’å…¥æ’åº.</p><ol><li>é€‰æ‹©ä¸€ä¸ªå¢é‡åºåˆ—t1, t2, â€¦, tk, å…¶ä¸­ti&gt;tj, tk&#x3D;1;</li><li>æŒ‰å¢é‡åºåˆ—ä¸ªæ•°k, å¯¹åºåˆ—è¿›è¡Œk è¶Ÿæ’åº;</li><li>æ¯è¶Ÿæ’åº, æ ¹æ®å¯¹åº”çš„å¢é‡ti, å°†å¾…æ’åºåˆ—åˆ†å‰²æˆè‹¥å¹²é•¿åº¦ä¸ºm çš„å­åºåˆ—, åˆ†åˆ«å¯¹å„å­è¡¨è¿›è¡Œç›´æ¥æ’å…¥æ’åº. ä»…å¢é‡å› å­ä¸º1 æ—¶, æ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†, è¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦.</li></ol><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%8D%81%E5%A4%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F.gif"></p><p>å®ç°ä»£ç å¦‚ä¸‹:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">shellSort</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> temp<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> gap<span class="token operator">=</span>n<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span> gap<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">;</span> gap<span class="token operator">/=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// æ¯è¶Ÿæ’åºgapæ˜¯åŸæ¥çš„1/2å€ </span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>gap<span class="token punctuation">;</span> i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// æŒ‰ç…§gapå¾ªç¯å­åºåˆ— </span>            <span class="token comment">// ç›´æ¥æ’å…¥æ’åº æ¯æ¬¡éƒ½åªæ¯”è¾ƒjå’Œj-gapè¿™ä¸¤ä¸ªå…ƒç´  ä¸ç›´æ’æ’åºä¸€æ · </span>            temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> j<span class="token punctuation">;</span>             <span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span>i<span class="token punctuation">;</span> j <span class="token operator">>=</span> gap <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>j<span class="token operator">-</span>gap<span class="token punctuation">]</span> <span class="token operator">></span> temp<span class="token punctuation">;</span> j<span class="token operator">-=</span>gap<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                  arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token operator">-</span>gap<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>             <span class="token comment">// å¦‚æœä¸å°äºäº† åœ¨jå¤„å°†tempå…ƒç´ æ’å…¥ </span>            arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a><a href="#%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h2><p>åæ°”ç¬¬ä¸€å, æ‰€æœ‰åœºæ™¯éƒ½é€šç”¨. <strong>å¿«æ’æ˜¯å¿…é¡»ä¼šå†™çš„æ’åº</strong>. å¿«æ’æ˜¯å†’æ³¡æ’åºçš„ä¼˜åŒ–ç‰ˆ, å®ƒæ¯æ¬¡çš„äº¤æ¢ä¸å†åƒå†’æ³¡æ’åºæ˜¯äº¤æ¢ç›¸é‚»å…ƒç´ , è€Œæ˜¯è·³è·ƒäº¤æ¢. é€šè¿‡ä¸€è¶Ÿæ’åºå°†å¾…æ’è®°å½•åˆ†éš”æˆç‹¬ç«‹çš„ä¸¤éƒ¨åˆ†, å…¶ä¸­ä¸€éƒ¨åˆ†è®°å½•çš„å…³é”®å­—å‡æ¯”å¦ä¸€éƒ¨åˆ†çš„å…³é”®å­—å°, åˆ™å¯åˆ†åˆ«å¯¹è¿™ä¸¤éƒ¨åˆ†è®°å½•ç»§ç»­è¿›è¡Œæ’åº, ä»¥è¾¾åˆ°æ•´ä¸ªåºåˆ—æœ‰åº.</p><ol><li>ä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ , ç§°ä¸º â€œåŸºå‡†â€(pivot) ;</li><li>é‡æ–°æ’åºæ•°åˆ—, æ‰€æœ‰å…ƒç´ æ¯”åŸºå‡†å€¼å°çš„æ‘†æ”¾åœ¨åŸºå‡†å‰é¢, æ‰€æœ‰å…ƒç´ æ¯”åŸºå‡†å€¼å¤§çš„æ‘†åœ¨åŸºå‡†çš„åé¢(ç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹) . åœ¨è¿™ä¸ªåˆ†åŒºé€€å‡ºä¹‹å, è¯¥åŸºå‡†å°±å¤„äºæ•°åˆ—çš„ä¸­é—´ä½ç½®. è¿™ä¸ªç§°ä¸ºåˆ†åŒº(partition) æ“ä½œ;</li><li>é€’å½’åœ°(recursive) æŠŠå°äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—å’Œå¤§äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—æ’åº.</li></ol><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%8D%81%E5%A4%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F.gif"></p><p>å®ç°ä»£ç å¦‚ä¸‹:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">quickSortLR</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> left<span class="token punctuation">,</span> j <span class="token operator">=</span> right<span class="token punctuation">;</span>    <span class="token keyword">int</span> temp<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        temp <span class="token operator">=</span> a<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment">// æ— æ—¶ä¸åˆ»éƒ½è¦åŠ ä¸Ši &lt; jçš„æ¡ä»¶</span>        <span class="token comment">// æŒ‡é’ˆç›¸é‡æ—¶åº”è¯¥ç«‹é©¬åœä¸‹ </span>        <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> j<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">// ä»å³ä¾§æ‰¾ä¸€ä¸ªæ¯”åŸºå‡†å°çš„å…ƒç´  </span>            <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> j <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">>=</span> temp<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token operator">--</span>j<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>             <span class="token comment">// ç›´æ¥æ‰£åˆ°å·¦æŒ‡é’ˆä¸Š </span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> j<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token operator">++</span>i<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">// ä»å·¦ä¾§æ‰¾ä¸€ä¸ªæ¯”åŸºå‡†å¤§çš„å…ƒç´  </span>            <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> j <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> temp<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token operator">++</span>i<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">// æ‰£åˆ°å³æŒ‡é’ˆä¸Š </span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> j<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token operator">--</span>j<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// äºŒè€…ç›¸é‡æ—¶å°±æ˜¯æœ€ç»ˆåŸºå‡†ä½ç½®</span>        a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>        <span class="token function">quickSortLR</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> left<span class="token punctuation">,</span> i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">quickSortLR</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢ä»£ç å®ç°æ˜¯æ¼”ç¤ºçš„å·¦å³äº¤æ¢ç‰ˆæœ¬, å®é™…ä¸Šè¿˜æœ‰ä¸€ç§å¿«æ…¢æŒ‡é’ˆçš„ç‰ˆæœ¬.</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// å¿«æ…¢æŒ‡é’ˆç‰ˆæœ¬ å‚è€ƒäº†è±†è±†çš„å¿«æ’å®ç°</span><span class="token comment">// bilibili:BV1Ab411s7To </span><span class="token comment">// å…¶å®å°±æ˜¯å¿«æ…¢æŒ‡é’ˆäº¤æ¢æ¯”pivotå°å’Œæ¯”pivotå¤§çš„è¿‡ç¨‹ </span><span class="token comment">// å‡å®šä¼ è¿›æ¥çš„éƒ½æ˜¯ä¸‹æ ‡ </span><span class="token keyword">int</span> <span class="token function">partition</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> left <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// æ…¢æŒ‡é’ˆ å¹¶åˆå§‹åŒ–ä¸ºleftå·¦ä¾§ </span>    <span class="token keyword">int</span> j<span class="token punctuation">;</span> <span class="token comment">// å¿«æŒ‡é’ˆ </span>    <span class="token keyword">int</span> temp<span class="token punctuation">;</span>    <span class="token keyword">int</span> pivot <span class="token operator">=</span> right<span class="token punctuation">;</span>  <span class="token comment">// æŒ‡å®šæœ€å³è¾¹çš„å…ƒç´ ä¸ºåŸºå‡† </span>    <span class="token comment">/*         è‹¥å¿«æŒ‡é’ˆæ‰€æŒ‡å…ƒç´ æ¯”åŸºå‡†å…ƒç´ å¤§        åˆ™æ…¢æŒ‡é’ˆä»€ä¹ˆéƒ½ä¸åš         è‹¥å¿«æŒ‡é’ˆæ‰€æŒ‡å‘çš„å…ƒç´ æ¯”åŸºå‡†å…ƒç´ å°        åˆ™è®©æ…¢æŒ‡é’ˆå¾€å‰è¿›ä¸€ä½ å¹¶äº¤æ¢å¿«æ…¢æŒ‡é’ˆæ‰€æŒ‡å…ƒç´          å› ä¸ºåªæœ‰å¿«æŒ‡é’ˆæ‰€æŒ‡å…ƒç´ æ¯”åŸºå‡†å…ƒç´ å°æ‰è®©æ…¢æŒ‡é’ˆå‰è¿›         æ‰€ä»¥åœ¨äº¤æ¢å‰æ…¢æŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ ä¸€å®šæ¯”åŸºå‡†å…ƒç´ å¤§    */</span>     <span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span>left<span class="token punctuation">;</span> j<span class="token operator">&lt;</span>right<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>         <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> a<span class="token punctuation">[</span>pivot<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token operator">++</span>i<span class="token punctuation">;</span>            temp <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// æ…¢æŒ‡é’ˆiåœ¨å†…çš„æ‰€æœ‰å·¦ä¾§å…ƒç´ éƒ½æ¯”åŸºå‡†å…ƒç´ å°</span>    <span class="token comment">// æ‰€ä»¥äº¤æ¢iå³ä¾§çš„å…ƒç´ å’ŒåŸºå‡†å…ƒç´ çš„ä½ç½® </span>    temp <span class="token operator">=</span> a<span class="token punctuation">[</span>pivot<span class="token punctuation">]</span><span class="token punctuation">;</span>    a<span class="token punctuation">[</span>pivot<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    a<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>    <span class="token comment">// è¿”å›çš„åŸºå‡†å…ƒç´ å°±æ˜¯æœªäº¤æ¢æ—¶çš„a[pivot], å³åŸºå‡†å…ƒç´  </span>    <span class="token keyword">return</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">quickSort</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> pivot <span class="token operator">=</span> <span class="token function">partition</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è·å–åŸºå‡†ç‚¹ å¯¹åŸºå‡†çš„å‰åå„ä½¿ç”¨å¿«æ’ </span>        <span class="token function">quickSort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> left<span class="token punctuation">,</span> pivot<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">quickSort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> pivot<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å †æ’åº"><a href="#å †æ’åº" class="headerlink" title="å †æ’åº"></a><a href="#%E5%A0%86%E6%8E%92%E5%BA%8F" title="å †æ’åº"></a>å †æ’åº</h2><p>å †æ’åºæ˜¯åˆ©ç”¨å †è¿™ç§æ•°æ®ç»“æ„æ‰€è®¾è®¡çš„ä¸€ç§æ’åºç®—æ³•. å› ä¸ºå †æ˜¯ä¸€ä¸ªè¿‘ä¼¼äºå®Œå…¨äºŒå‰æ ‘çš„ç»“æ„, å¹¶ä¸”æ»¡è¶³å †ç§¯çš„æ€§è´¨ï¼šå³<strong>å­ç»“ç‚¹çš„é”®å€¼æˆ–ç´¢å¼•æ€»æ˜¯å°äº(æˆ–è€…å¤§äº) å®ƒçš„çˆ¶èŠ‚ç‚¹</strong>. åœ¨æŸäº›ç‰¹æ®Šçš„ä¸šåŠ¡åœºæ™¯, å¯èƒ½éœ€è¦æ„å»ºä¸€ä¸ªå †, éœ€è¦è¿›è¡ŒæŸ¥æ‰¾, è¿™æ—¶ç”¨å †æ’åºå°±å¾ˆåˆç†.</p><ol><li>å°†åˆå§‹å¾…æ’åºå…³é”®å­—åºåˆ—(R1,R2â€¦.Rn)æ„å»ºæˆå¤§é¡¶å †, æ­¤å †ä¸ºåˆå§‹çš„æ— åºåŒº;</li><li>å°†å †é¡¶å…ƒç´ R[1]ä¸æœ€åä¸€ä¸ªå…ƒç´ R[n]äº¤æ¢, æ­¤æ—¶å¾—åˆ°æ–°çš„æ— åºåŒº(R1,R2,â€¦â€¦Rn-1)å’Œæ–°çš„æœ‰åºåŒº(Rn),ä¸”æ»¡è¶³R[1,2â€¦n-1]&lt;&#x3D;R[n];</li><li>ç”±äºäº¤æ¢åæ–°çš„å †é¡¶R[1]å¯èƒ½è¿åå †çš„æ€§è´¨, å› æ­¤éœ€è¦å¯¹å½“å‰æ— åºåŒº(R1,R2,â€¦â€¦Rn-1)è°ƒæ•´ä¸ºæ–°å †, ç„¶åå†æ¬¡å°†R[1]ä¸æ— åºåŒºæœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢, å¾—åˆ°æ–°çš„æ— åºåŒº(R1,R2â€¦.Rn-2)å’Œæ–°çš„æœ‰åºåŒº(Rn-1,Rn). ä¸æ–­é‡å¤æ­¤è¿‡ç¨‹ç›´åˆ°æœ‰åºåŒºçš„å…ƒç´ ä¸ªæ•°ä¸ºn-1, åˆ™æ•´ä¸ªæ’åºè¿‡ç¨‹å®Œæˆ.</li></ol><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%8D%81%E5%A4%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/%E5%A0%86%E6%8E%92%E5%BA%8F.gif"></p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// å †æ’åº é€‰æ‹©æ’åº å’Œå†’æ³¡æ’åºéå¸¸åƒ </span><span class="token comment">// å»ºå †è¿‡ç¨‹æ˜¯ä¸€ä¸ªäº¤æ¢çš„è¿‡ç¨‹  </span><span class="token comment">// ç›´æ¥é‡‡ç”¨é¡ºåºå­˜å‚¨ç»“æ„å­˜å‚¨å †(å®Œå…¨äºŒå‰æ ‘)</span><span class="token keyword">int</span> heap<span class="token punctuation">[</span>maxSize<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// ç”¨å®ƒæ¥å­˜å †(å¤§æ ¹å †)</span><span class="token comment">// å †è°ƒæ•´ lowå’Œhighé€‰æ‹©è°ƒæ•´çš„èŒƒå›´ å¯ä»¥ç†è§£ä¸ºå†’æ³¡æ’åºä¸­çš„ä¸€æ¬¡å†’æ³¡ </span><span class="token keyword">void</span> <span class="token function">Sift</span><span class="token punctuation">(</span><span class="token keyword">int</span> heap<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> low<span class="token punctuation">,</span> <span class="token keyword">int</span> high<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i<span class="token operator">=</span>low<span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">*</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// heap[j]æ˜¯içš„å·¦å­©å­ </span>    <span class="token keyword">int</span> temp <span class="token operator">=</span> heap<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>j <span class="token operator">&lt;=</span> high<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">&lt;</span> high <span class="token operator">&amp;&amp;</span> heap<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> heap<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// å¦‚æœå³å­©å­æ›´å¤§ æŠŠjæŒ‡å‘å³å­©å­ </span>            <span class="token operator">++</span>j<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// å½“tempæ¯”å­å­™èŠ‚ç‚¹ä¸­æœ€å¤§çš„éƒ½å°, äº¤æ¢ij, å¹¶å°†ijé¡ºç€æ ‘ä¸‹ç§»ä¸€å±‚        </span>        <span class="token keyword">if</span><span class="token punctuation">(</span>temp <span class="token operator">&lt;</span> heap<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            heap<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> heap<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            i <span class="token operator">=</span> j<span class="token punctuation">;</span>            j <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">*</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token keyword">break</span><span class="token punctuation">;</span>     <span class="token punctuation">&#125;</span>    <span class="token comment">// å½“j>highæ—¶, å°†å¶å­èŠ‚ç‚¹è°ƒæ•´ä¸ºtemp </span>    heap<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// èƒ½å¤Ÿçœ‹å‡ºæ¥æ•´ä¸ªæ’åºè¿‡ç¨‹å’Œå†’æ³¡éå¸¸åƒ åªæ˜¯æ·»åŠ äº†å¯¹å †è°ƒæ•´çš„æ“ä½œ </span><span class="token keyword">void</span> <span class="token function">heapSort</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i<span class="token punctuation">;</span>    <span class="token keyword">int</span> temp<span class="token punctuation">;</span>    <span class="token comment">// è°ƒæ•´ä¸ºå¤§æ ¹å † </span>    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span>n<span class="token operator">/</span><span class="token number">2</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">>=</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>i<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// n/2-1æ˜¯æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹ å¯¹æ‰€æœ‰éå¶å­çš„å †ä¾æ¬¡è¿›è¡Œè°ƒæ•´</span>        <span class="token function">Sift</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> i<span class="token punctuation">,</span> n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">&#125;</span>     <span class="token comment">// å°†æ ¹èŠ‚ç‚¹å’Œæœ€åä¸€ä¸ªå¶å­èŠ‚ç‚¹è¿›è¡Œäº¤æ¢, åˆ å»åŸæ¥çš„æ ¹èŠ‚ç‚¹, å½“i=1å³åªå‰©ä¸€ä¸ªèŠ‚ç‚¹çš„æ—¶å€™æ’åºå®Œæˆ </span>    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>i<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// å…¶å®iæŒ‡ä»£çš„æ˜¯å½“å‰å †æœ‰å‡ ä¸ªèŠ‚ç‚¹ </span>        temp <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>         <span class="token function">Sift</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ¯æ¬¡äº¤æ¢åéƒ½è¿›è¡Œå †è°ƒæ•´ ä½†ä¸è¦æœ€åä¸€ä¸ªèŠ‚ç‚¹</span>                            <span class="token comment">// å› ä¸ºæœ€åä¸€ä¸ªèŠ‚ç‚¹åœ¨è°ƒæ•´\ä¹‹å‰ç¬¦åˆå¤§æ ¹å †çš„å®šä¹‰ </span>                            <span class="token comment">// å·²ç»è¢«è°ƒåˆ°äº†æŒ‡å®šçš„ä½ç½® </span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è®¡æ•°æ’åº"><a href="#è®¡æ•°æ’åº" class="headerlink" title="è®¡æ•°æ’åº"></a><a href="#%E8%AE%A1%E6%95%B0%E6%8E%92%E5%BA%8F" title="è®¡æ•°æ’åº"></a>è®¡æ•°æ’åº</h2><p>è®¡æ•°æ’åºä¸æ˜¯åŸºäºæ¯”è¾ƒçš„æ’åºç®—æ³•, å®ƒçš„å¤æ‚åº¦èƒ½åˆ°çº¿æ€§çº§. æ•ˆç‡è™½ç„¶é«˜, ä½†ä½¿ç”¨åœºæ™¯ååˆ†å—é™. å®ƒçš„åŸç†è§„å®šäº†è¾“å…¥çš„æ•°æ®å¿…é¡»æ˜¯<strong>æœ‰ç¡®å®šèŒƒå›´çš„æ•´æ•°</strong>.</p><ol><li>æ‰¾å‡ºå¾…æ’åºçš„æ•°ç»„ä¸­æœ€å¤§å’Œæœ€å°çš„å…ƒç´ ;</li><li>ç»Ÿè®¡æ•°ç»„ä¸­æ¯ä¸ªå€¼ä¸ºiçš„å…ƒç´ å‡ºç°çš„æ¬¡æ•°, å­˜å…¥æ•°ç»„Cçš„ç¬¬ié¡¹;</li><li>å¯¹æ‰€æœ‰çš„è®¡æ•°ç´¯åŠ (ä»Cä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹, æ¯ä¸€é¡¹å’Œå‰ä¸€é¡¹ç›¸åŠ ) ;</li><li>åå‘å¡«å……ç›®æ ‡æ•°ç»„ï¼šå°†æ¯ä¸ªå…ƒç´ iæ”¾åœ¨æ–°æ•°ç»„çš„ç¬¬C(i)é¡¹, æ¯æ”¾ä¸€ä¸ªå…ƒç´ å°±å°†C(i)å‡å»1.</li></ol><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%8D%81%E5%A4%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/%E8%AE%A1%E6%95%B0%E6%8E%92%E5%BA%8F.gif"></p><h2 id="åŸºæ•°æ’åº"><a href="#åŸºæ•°æ’åº" class="headerlink" title="åŸºæ•°æ’åº"></a><a href="#%E5%9F%BA%E6%95%B0%E6%8E%92%E5%BA%8F" title="åŸºæ•°æ’åº"></a>åŸºæ•°æ’åº</h2><p>â€œåŸºâ€è¿™ä¸ªå­—, æŒ‡çš„å°±æ˜¯åè¿›åˆ¶çš„â€<strong>ä¸ªåç™¾åƒ</strong>â€œ. åŸºæ•°æ’åºå…ˆæŒ‰ç…§ä¸ªä½è¿›è¡Œæ’åº, ç„¶åå†æŒ‰ç…§åä½è¿›è¡Œæ’åºâ€¦ å…ˆæŒ‰ç…§ä½ä½è¿›è¡Œæ’åº, ç„¶åæ”¶é›†åˆ°ä¸€èµ·, å†æŒ‰ç…§é«˜ä½è¿›è¡Œæ’åº, ä»¥æ­¤ç±»æ¨, æœ€åå°±èƒ½è·å¾—ä¸€ä¸ªæœ‰åºçš„åºåˆ—.</p><ol><li><p>å–å¾—æ•°ç»„ä¸­çš„æœ€å¤§æ•°, å¹¶å–å¾—ä½æ•°;</p></li><li><p>arrä¸ºåŸå§‹æ•°ç»„, ä»æœ€ä½ä½å¼€å§‹å–æ¯ä¸ªä½ç»„æˆradixæ•°ç»„;</p></li><li><p>å¯¹radixè¿›è¡Œè®¡æ•°æ’åº(åˆ©ç”¨è®¡æ•°æ’åºé€‚ç”¨äºå°èŒƒå›´æ•°çš„ç‰¹ç‚¹) ;</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%8D%81%E5%A4%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/%E5%9F%BA%E6%95%B0%E6%8E%92%E5%BA%8F.gif"></p><h2 id="æ¡¶æ’åº"><a href="#æ¡¶æ’åº" class="headerlink" title="æ¡¶æ’åº"></a><a href="#%E6%A1%B6%E6%8E%92%E5%BA%8F" title="æ¡¶æ’åº"></a>æ¡¶æ’åº</h2><p>æ¡¶æ’åºè·Ÿè®¡æ•°æ’åºä¸€æ ·, æ˜¯ä¸€ç§ç¨³å®šçš„çº¿æ€§æ—¶é—´æ’åºç®—æ³•, è¿™ä¸ªåœ¨æœºå™¨å­¦ä¹ æœ‰ç›¸ä¼¼çš„åº”ç”¨. æŒ‰ç…§ç‰¹å¾çš„å–å€¼èŒƒå›´å¯¹ç‰¹å¾è¿›è¡Œåˆ’åˆ†, ç„¶åæŠ½æˆç‹¬çƒ­å‘é‡. è¿™é‡Œæ¡¶æ’åºå·¥ä½œçš„åŸç†æ˜¯å°†æ•°åˆ—åˆ†åˆ°æœ‰é™æ•°é‡çš„æ¡¶é‡Œ, æ¯ä¸ªæ¡¶å†ä¸ªåˆ«æ’åº. å½“è¦è¢«æ’åºçš„æ•°ç»„å†…çš„æ•°å€¼æ˜¯å‡åŒ€åˆ†é…çš„æ—¶å€™, æ¡¶æ’åºæ—¶é—´å¤æ‚åº¦æ˜¯çº¿æ€§çº§.</p><ol><li>è®¾ç½®ä¸€ä¸ªå®šé‡çš„æ•°ç»„å½“ä½œç©ºæ¡¶;</li><li>éå†è¾“å…¥æ•°æ®, å¹¶ä¸”æŠŠæ•°æ®ä¸€ä¸ªä¸€ä¸ªæ”¾åˆ°å¯¹åº”çš„æ¡¶é‡Œå»;</li><li>å¯¹æ¯ä¸ªä¸æ˜¯ç©ºçš„æ¡¶è¿›è¡Œæ’åº;</li><li>ä»ä¸æ˜¯ç©ºçš„æ¡¶é‡ŒæŠŠæ’å¥½åºçš„æ•°æ®æ‹¼æ¥èµ·æ¥.</li></ol><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%8D%81%E5%A4%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/%E6%A1%B6%E6%8E%92%E5%BA%8F.gif"></p><h2 id="å¤æ‚åº¦å¯¹æ¯”"><a href="#å¤æ‚åº¦å¯¹æ¯”" class="headerlink" title="å¤æ‚åº¦å¯¹æ¯”"></a><a href="#%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%AF%B9%E6%AF%94" title="å¤æ‚åº¦å¯¹æ¯”"></a>å¤æ‚åº¦å¯¹æ¯”</h2><table><thead><tr><th><strong>æ’åºç®—æ³•</strong></th><th><strong>å¹³å‡æ—¶é—´å¤æ‚åº¦</strong></th><th><strong>æœ€å¥½æƒ…å†µ</strong></th><th><strong>æœ€åæƒ…å†µ</strong></th><th><strong>ç©ºé—´å¤æ‚åº¦</strong></th><th><strong>ç¨³å®šæ€§</strong></th><th>æ’åºæ–¹å¼</th></tr></thead><tbody><tr><td>å†’æ³¡æ’åº</td><td>$O(n^2)$</td><td>$O(n)$</td><td>$O(n^2)$</td><td>$O(1)$</td><td>ç¨³å®š</td><td>In-place</td></tr><tr><td>é€‰æ‹©æ’åº</td><td>$O(n^2)$</td><td>$O(n^2)$</td><td>$O(n^2)$</td><td>$O(1)$</td><td>ä¸ç¨³å®š</td><td>In-place</td></tr><tr><td>æ’å…¥æ’åº</td><td>$O(n^2)$</td><td>$O(n)$</td><td>$O(n^2)$</td><td>$O(1)$</td><td>ç¨³å®š</td><td>In-place</td></tr><tr><td>å¸Œå°”æ’åº</td><td>$O(n\log n)$</td><td>$O(n^{1.3}$)</td><td>$O(n^2)$</td><td>$O(1)$</td><td>ä¸ç¨³å®š</td><td>In-place</td></tr><tr><td>å½’å¹¶æ’åº</td><td>$O(n\log n)$</td><td>$O(n\log n)$</td><td>$O(n\log n)$</td><td>$O(n)$</td><td>ç¨³å®š</td><td>Out-place</td></tr><tr><td>å¿«é€Ÿæ’åº</td><td>$O(n\log n)$</td><td>$O(n\log n)$</td><td>$O(n^2)$</td><td>$O(\log n)$</td><td>ä¸ç¨³å®š</td><td>In-place</td></tr><tr><td>å †æ’åº</td><td>$O(n\log n)$</td><td>$O(n\log n)$</td><td>$O(n\log n)$</td><td>$O(1)$</td><td>ä¸ç¨³å®š</td><td>In-place</td></tr><tr><td>æ¡¶æ’åº</td><td>$O(n + k)$</td><td>$O(n + k)$</td><td>$O(n^2)$</td><td>$O(n + k)$</td><td>ç¨³å®š</td><td>Out-place</td></tr><tr><td>è®¡æ•°æ’åº</td><td>$O(n + k)$</td><td>$O(n + k)$</td><td>$O(n + k)$</td><td>$O(k)$</td><td>ç¨³å®š</td><td>Out-place</td></tr><tr><td>åŸºæ•°æ’åº</td><td>$O(n Ã— m)$</td><td>$O(n Ã— m)$</td><td>$O(n Ã— m)$</td><td>$O(n + m)$</td><td>ç¨³å®š</td><td>Out-place</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åå¤§æ’åºç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾åƒç‰¹å¾ä¹‹LoGç®—å­ä¸DoGç®—å­</title>
      <link href="/2023/12/20/tu-xiang-te-zheng-zhi-log-suan-zi-yu-dog-suan-zi/"/>
      <url>/2023/12/20/tu-xiang-te-zheng-zhi-log-suan-zi-yu-dog-suan-zi/</url>
      
        <content type="html"><![CDATA[<h2 id="å›¾åƒç‰¹å¾ä¹‹LoGç®—å­ä¸DoGç®—å­"><a href="#å›¾åƒç‰¹å¾ä¹‹LoGç®—å­ä¸DoGç®—å­" class="headerlink" title="å›¾åƒç‰¹å¾ä¹‹LoGç®—å­ä¸DoGç®—å­"></a>å›¾åƒç‰¹å¾ä¹‹LoGç®—å­ä¸DoGç®—å­</h2><p>â€ƒâ€ƒLoG(Laplacian of Gaussian)ç®—å­å’ŒDoG(Difference of Gaussian)ç®—å­æ˜¯å›¾åƒå¤„ç†ä¸­å®ç°æå€¼ç‚¹æ£€æµ‹(Blob Detection)çš„ä¸¤ç§æ–¹æ³•ã€‚é€šè¿‡åˆ©ç”¨é«˜æ–¯å‡½æ•°å·ç§¯æ“ä½œè¿›è¡Œå°ºåº¦å˜æ¢ï¼Œå¯ä»¥åœ¨ä¸åŒçš„å°ºåº¦ç©ºé—´æ£€æµ‹åˆ°å…³é”®ç‚¹(Key Point)æˆ–å…´è¶£ç‚¹(Interest Point)ï¼Œå®ç°å°ºåº¦ä¸å˜æ€§(Scale invariance)çš„ç‰¹å¾ç‚¹æ£€æµ‹ã€‚  </p><h1 id="Laplacian-of-Gaussian-LoG"><a href="#Laplacian-of-Gaussian-LoG" class="headerlink" title="Laplacian of Gaussian(LoG)"></a>Laplacian of Gaussian(LoG)</h1><p>â€ƒâ€ƒLaplaceç®—å­é€šè¿‡å¯¹å›¾åƒæ±‚å–äºŒé˜¶å¯¼æ•°çš„é›¶äº¤å‰ç‚¹(zero-cross)æ¥è¿›è¡Œè¾¹ç¼˜æ£€æµ‹ï¼Œå…¶è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š<br>$$\nabla ^2 f(x,y)&#x3D;\dfrac{\partial^2 f}{\partial x^2} + \dfrac{\partial^2 f}{\partial y^2}$$<br>ç”±äºå¾®åˆ†è¿ç®—å¯¹å™ªå£°æ¯”è¾ƒæ•æ„Ÿï¼Œå¯ä»¥å…ˆå¯¹å›¾åƒè¿›è¡Œé«˜æ–¯å¹³æ»‘æ»¤æ³¢ï¼Œå†ä½¿ç”¨Laplaceç®—å­è¿›è¡Œè¾¹ç¼˜æ£€æµ‹ï¼Œä»¥é™ä½å™ªå£°çš„å½±å“ã€‚ç”±æ­¤ä¾¿å½¢æˆäº†ç”¨äºæå€¼ç‚¹æ£€æµ‹çš„LoGç®—å­ã€‚å¸¸ç”¨çš„äºŒç»´é«˜æ–¯å‡½æ•°å¦‚ä¸‹ï¼š<br>$$G_\sigma(x,y)&#x3D;\dfrac{1}{\sqrt {2\pi \sigma ^{2}}} exp(-\dfrac{x^2+y^2}{2\sigma ^2})$$<br>åŸå›¾åƒä¸é«˜æ–¯æ ¸å‡½æ•°å·ç§¯åå†åšlaplaceè¿ç®—<br>$$\Delta [G_\sigma(x,y) \ast f(x,y)]&#x3D;[\Delta G_\sigma(x,y)] \ast f(x,y)$$<br>$$LoG &#x3D; \Delta G_\sigma(x,y)&#x3D;\dfrac{\partial^2 G_\sigma(x,y)}{\partial x^2} + \dfrac{\partial^2 G_\sigma(x,y)}{\partial y^2}&#x3D;\dfrac{x^2+y^2-2\sigma^2}{\sigma^4}e^{-(x^2+y^2)&#x2F;2\sigma^2}$$<br>æ‰€ä»¥å…ˆå¯¹é«˜æ–¯æ ¸å‡½æ•°æ±‚å–äºŒé˜¶å¯¼æ•°ï¼Œå†ä¸åŸå›¾åƒè¿›è¡Œå·ç§¯æ“ä½œã€‚ç”±äºé«˜æ–¯å‡½æ•°æ˜¯åœ†å¯¹ç§°çš„ï¼Œå› æ­¤LoGç®—å­å¯ä»¥æœ‰æ•ˆåœ°å®ç°æå€¼ç‚¹æˆ–å±€éƒ¨æå€¼åŒºåŸŸçš„æ£€æµ‹ã€‚</p><h1 id="Difference-of-Gaussian-DoG"><a href="#Difference-of-Gaussian-DoG" class="headerlink" title="Difference of Gaussian(DoG)"></a>Difference of Gaussian(DoG)</h1><p>â€ƒâ€ƒDoGç®—å­æ˜¯é«˜æ–¯å‡½æ•°çš„å·®åˆ†ï¼Œå…·ä½“åˆ°å›¾åƒä¸­ï¼Œå°±æ˜¯å°†å›¾åƒåœ¨ä¸åŒå‚æ•°ä¸‹çš„é«˜æ–¯æ»¤æ³¢ç»“æœç›¸å‡ï¼Œå¾—åˆ°å·®åˆ†å›¾ã€‚DoGç®—å­çš„è¡¨è¾¾å¼å¦‚ä¸‹ï¼š<br>$$DoG &#x3D; G_{\sigma_1} - G_{\sigma_2}&#x3D;\dfrac{1}{\sqrt{2\pi}} [\dfrac{1}{\sigma_1} e^{-(x^2+y^2)&#x2F;2\sigma_1^2} - \dfrac{1}{\sigma_2} e^{-(x^2+y^2)&#x2F;2\sigma_2^2}]$$<br>å¦‚æœå°†é«˜æ–¯æ ¸å‡½æ•°çš„å½¢å¼è¡¨ç¤ºä¸º<br>$$G_\sigma(x,y)&#x3D;\dfrac{1}{2\pi \sigma ^{2}} exp(-\dfrac{x^2+y^2}{2\sigma ^2})$$<br>åˆ™å­˜åœ¨ä»¥ä¸‹ç­‰å¼<br>$$\dfrac{\partial G}{\partial \sigma} &#x3D; \sigma \nabla ^2 G$$<br>$$\dfrac{\partial G}{\partial \sigma} \approx \dfrac{G(x,y,k\sigma)-G(x,y,\sigma)}{k\sigma-\sigma}$$<br>å› æ­¤æœ‰<br>$$G(x,y,k\sigma)-G(x,y,\sigma) \approx (k-1)\sigma^2 \nabla ^2 G$$<br>å…¶ä¸­$k-1$æ˜¯ä¸ªå¸¸æ•°ï¼Œä¸å½±å“æå€¼ç‚¹çš„æ£€æµ‹ï¼ŒLoGç®—å­å’ŒDoGç®—å­çš„å‡½æ•°æ³¢å½¢å¯¹æ¯”å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç”±äºé«˜æ–¯å·®åˆ†çš„è®¡ç®—æ›´åŠ ç®€å•ï¼Œå› æ­¤å¯ç”¨DoGç®—å­è¿‘ä¼¼æ›¿ä»£LoGç®—å­</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E4%B9%8BLoG%E7%AE%97%E5%AD%90%E4%B8%8EDoG%E7%AE%97%E5%AD%90/5a3741bdd1528.jpg" alt="LoG-DoG.jpg"></p><h1 id="è¾¹ç¼˜æ£€æµ‹-Edge-Detection-å’Œæå€¼ç‚¹æ£€æµ‹-Blob-Detection"><a href="#è¾¹ç¼˜æ£€æµ‹-Edge-Detection-å’Œæå€¼ç‚¹æ£€æµ‹-Blob-Detection" class="headerlink" title="è¾¹ç¼˜æ£€æµ‹(Edge Detection)å’Œæå€¼ç‚¹æ£€æµ‹(Blob Detection)"></a>è¾¹ç¼˜æ£€æµ‹(Edge Detection)å’Œæå€¼ç‚¹æ£€æµ‹(Blob Detection)</h1><p>â€ƒâ€ƒLoGç®—å­å’ŒDoGç®—å­æ—¢å¯ä»¥ç”¨äºæ£€æµ‹å›¾åƒè¾¹ç¼˜ï¼Œä¹Ÿå¯ç”¨äºæ£€æµ‹å±€éƒ¨æå€¼ç‚¹æˆ–æå€¼åŒºåŸŸï¼Œå›¾åƒè¾¹ç¼˜åœ¨LoGç®—å­ä¸‹çš„å“åº”æƒ…å†µå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒäºŒé˜¶å¾®åˆ†ç®—å­åœ¨è¾¹ç¼˜å¤„ä¸ºä¸€è¿‡é›¶ç‚¹ï¼Œè€Œä¸”è¿‡é›¶ç‚¹ä¸¤è¾¹çš„æœ€å¤§å€¼(æ­£)å’Œæœ€å°å€¼(è´Ÿ)çš„å·®å€¼è¾ƒå¤§ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E4%B9%8BLoG%E7%AE%97%E5%AD%90%E4%B8%8EDoG%E7%AE%97%E5%AD%90/5954d7a6ca776.jpg" alt="edge.jpg"></p><p>æ¥ä¸‹æ¥è§‚å¯Ÿä¸‹å›¾ï¼Œç”±è¾¹ç¼˜è¿‡æ¸¡åˆ°æå€¼ç‚¹ï¼ŒLoGç®—å­çš„å“åº”å˜åŒ–</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E4%B9%8BLoG%E7%AE%97%E5%AD%90%E4%B8%8EDoG%E7%AE%97%E5%AD%90/5954d7a6cb78d.jpg" alt="edge to blob.jpg"></p><p>LoGç®—å­åœ¨æå€¼ç‚¹(Blob)å¤„çš„å“åº”å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E4%B9%8BLoG%E7%AE%97%E5%AD%90%E4%B8%8EDoG%E7%AE%97%E5%AD%90/5954d7a6c963e.jpg" alt="blob.jpg"></p><p>é€šè¿‡å®šä¹‰ä¸åŒå°ºå¯¸çš„é«˜æ–¯æ ¸å‡½æ•°ï¼Œå¯ä»¥å®ç°åœ¨ä¸åŒå°ºåº¦æ£€æµ‹Blobï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E4%B9%8BLoG%E7%AE%97%E5%AD%90%E4%B8%8EDoG%E7%AE%97%E5%AD%90/5954d7a6c08d4.jpg" alt="scale blob.jpg"></p><h3 id="ç®—æ³•æµç¨‹"><a href="#ç®—æ³•æµç¨‹" class="headerlink" title="ç®—æ³•æµç¨‹"></a><a href="#%E7%AE%97%E6%B3%95%E6%B5%81%E7%A8%8B" title="ç®—æ³•æµç¨‹"></a>ç®—æ³•æµç¨‹</h3><ul><li>å¯¹åŸå›¾åƒè¿›è¡ŒLoGæˆ–è€…DoGå·ç§¯æ“ä½œ</li><li>æ£€æµ‹å·ç§¯åå›¾åƒä¸­çš„è¿‡é›¶ç‚¹(è¾¹ç¼˜)æˆ–è€…æå€¼ç‚¹(Blob)</li><li>å¦‚æœæ˜¯æ£€æµ‹è¾¹ç¼˜ï¼Œåˆ™å¯¹è¿‡é›¶ç‚¹è¿›è¡Œé˜ˆå€¼åŒ–(è¿‡é›¶ç‚¹ä¸¤è¾¹çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ä¹‹é—´çš„å·®å€¼è¦å¤§äºæŸä¸ªé˜ˆå€¼)ï¼›å¦‚æœæ˜¯æ£€æµ‹æå€¼ç‚¹ï¼Œåˆ™æå€¼ç‚¹çš„LoGæˆ–DoGå“åº”å€¼åº”è¯¥å¤§äºæŸä¸ªé˜ˆå€¼ã€‚</li></ul><h1 id="åŸæ–‡é“¾æ¥"><a href="#åŸæ–‡é“¾æ¥" class="headerlink" title="åŸæ–‡é“¾æ¥"></a>åŸæ–‡é“¾æ¥</h1><p><a href="https://senitco.github.io/2017/06/20/image-feature-LoG-DoG/">å›¾åƒç‰¹å¾ä¹‹LoGç®—å­ä¸DoGç®—å­</a></p><h3 id="reference"><a href="#reference" class="headerlink" title="reference"></a><a href="#reference" title="reference"></a>reference</h3><ul><li><a href="http://fourier.eng.hmc.edu/e161/lectures/gradient/node8.html">http://fourier.eng.hmc.edu/e161/lectures/gradient/node8.html</a></li><li><a href="http://fourier.eng.hmc.edu/e161/lectures/gradient/node9.html">http://fourier.eng.hmc.edu/e161/lectures/gradient/node9.html</a></li><li><a href="http://blog.csdn.net/songzitea/article/details/12851079">http://blog.csdn.net/songzitea/article/details/12851079</a></li><li><a href="http://blog.csdn.net/kezunhai/article/details/11579785">http://blog.csdn.net/kezunhai/article/details/11579785</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å›¾åƒç‰¹å¾æå– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾åƒç‰¹å¾æå– </tag>
            
            <tag> LoGç®—å­ </tag>
            
            <tag> DoGç®—å­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾åƒç‰¹å¾ä¹‹SIFTç‰¹å¾åŒ¹é…</title>
      <link href="/2023/12/20/tu-xiang-te-zheng-zhi-sift-te-zheng-pi-pei/"/>
      <url>/2023/12/20/tu-xiang-te-zheng-zhi-sift-te-zheng-pi-pei/</url>
      
        <content type="html"><![CDATA[<p>â€ƒâ€ƒå°ºåº¦ä¸å˜ç‰¹å¾å˜æ¢(Scale-invariant feature transform, SIFT)æ˜¯è®¡ç®—æœºè§†è§‰ä¸­ä¸€ç§æ£€æµ‹ã€æè¿°å’ŒåŒ¹é…å›¾åƒå±€éƒ¨ç‰¹å¾ç‚¹çš„æ–¹æ³•ï¼Œé€šè¿‡åœ¨ä¸åŒçš„å°ºåº¦ç©ºé—´ä¸­æ£€æµ‹æå€¼ç‚¹æˆ–ç‰¹å¾ç‚¹(Conrner Point, Interest Point)ï¼Œæå–å‡ºå…¶ä½ç½®ã€å°ºåº¦å’Œæ—‹è½¬ä¸å˜é‡ï¼Œå¹¶ç”Ÿæˆç‰¹å¾æè¿°å­ï¼Œæœ€åç”¨äºå›¾åƒçš„ç‰¹å¾ç‚¹åŒ¹é…ã€‚SIFTç‰¹å¾å‡­å€Ÿå…¶è‰¯å¥½çš„æ€§èƒ½å¹¿æ³›åº”ç”¨äºè¿åŠ¨è·Ÿè¸ª(Motion tracking)ã€å›¾åƒæ‹¼æ¥(Automatic mosaicing)ã€3Dé‡å»º(3D reconstruction)ã€ç§»åŠ¨æœºå™¨äººå¯¼èˆª(Mobile robot navigation)ä»¥åŠç›®æ ‡è¯†åˆ«(Object Recognition)ç­‰é¢†åŸŸã€‚  </p><h1 id="å°ºåº¦ç©ºé—´æå€¼æ£€æµ‹"><a href="#å°ºåº¦ç©ºé—´æå€¼æ£€æµ‹" class="headerlink" title="å°ºåº¦ç©ºé—´æå€¼æ£€æµ‹"></a>å°ºåº¦ç©ºé—´æå€¼æ£€æµ‹</h1><p>â€ƒâ€ƒHarrisç‰¹å¾è¿›è¡Œè§’ç‚¹æ£€æµ‹æ—¶ï¼Œä¸å…·å¤‡å°ºåº¦ä¸å˜æ€§ã€‚ä¸ºäº†èƒ½å¤Ÿåœ¨ä¸åŒçš„å°ºåº¦æ£€æµ‹åˆ°å°½å¯èƒ½å®Œæ•´çš„ç‰¹å¾ç‚¹æˆ–å…³é”®ç‚¹ï¼Œéœ€è¦å€ŸåŠ©å°ºåº¦ç©ºé—´ç†è®ºæ¥æè¿°å›¾åƒçš„å¤šå°ºåº¦ç‰¹å¾ã€‚ç›¸å…³ç ”ç©¶è¯æ˜é«˜æ–¯å·ç§¯æ ¸æ˜¯å®ç°å°ºåº¦å˜æ¢çš„å”¯ä¸€çº¿æ€§æ ¸ã€‚å› æ­¤å¯ç”¨å›¾åƒçš„é«˜æ–¯é‡‘å­—å¡”è¡¨ç¤ºå°ºåº¦ç©ºé—´ï¼Œè€Œä¸”å°ºåº¦è§„èŒƒåŒ–çš„LoGç®—å­å…·æœ‰å°ºåº¦ä¸å˜æ€§ï¼Œåœ¨å…·ä½“å®ç°ä¸­ï¼Œå¯ç”¨é«˜æ–¯å·®åˆ†(DoG)ç®—å­è¿‘ä¼¼LoGç®—å­ï¼Œåœ¨æ„å»ºçš„å°ºåº¦ç©ºé—´ä¸­æ£€æµ‹ç¨³å®šçš„ç‰¹å¾ç‚¹ã€‚</p><h2 id="æ„å»ºå°ºåº¦ç©ºé—´"><a href="#æ„å»ºå°ºåº¦ç©ºé—´" class="headerlink" title="æ„å»ºå°ºåº¦ç©ºé—´"></a>æ„å»ºå°ºåº¦ç©ºé—´</h2><p>â€ƒâ€ƒå°ºåº¦ç©ºé—´ç†è®ºçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šåœ¨å›¾åƒå¤„ç†æ¨¡å‹ä¸­å¼•å…¥ä¸€ä¸ªè¢«è§†ä¸ºå°ºåº¦çš„å‚æ•°ï¼Œé€šè¿‡è¿ç»­å˜åŒ–å°ºåº¦å‚æ•°è·å–å¤šå°ºåº¦ä¸‹çš„ç©ºé—´è¡¨ç¤ºåºåˆ—ï¼Œå¯¹è¿™äº›ç©ºé—´åºåˆ—æå–æŸäº›ç‰¹å¾æè¿°å­ï¼ŒæŠ½è±¡æˆç‰¹å¾å‘é‡ï¼Œå®ç°å›¾åƒåœ¨ä¸åŒå°ºåº¦æˆ–ä¸åŒåˆ†è¾¨ç‡çš„ç‰¹å¾æå–ã€‚å°ºåº¦ç©ºé—´ä¸­å„å°ºåº¦å›¾åƒçš„æ¨¡ç³Šç¨‹åº¦é€æ¸å˜å¤§ï¼Œæ¨¡æ‹Ÿäººåœ¨ç”±è¿‘åˆ°è¿œæ—¶ç›®æ ‡åœ¨äººçœ¼è§†ç½‘è†œä¸Šçš„æˆåƒè¿‡ç¨‹ã€‚è€Œä¸”å°ºåº¦ç©ºé—´éœ€æ»¡è¶³ä¸€å®šçš„ä¸å˜æ€§ï¼ŒåŒ…æ‹¬å›¾åƒç°åº¦ä¸å˜æ€§ã€å¯¹æ¯”åº¦ä¸å˜æ€§ã€å¹³ç§»ä¸å˜æ€§ã€å°ºåº¦ä¸å˜æ€§ä»¥åŠæ—‹è½¬ä¸å˜æ€§ç­‰ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ç”šè‡³è¦æ±‚å°ºåº¦ç©ºé—´ç®—å­å…·å¤‡ä»¿å°„ä¸å˜æ€§ã€‚<br>â€ƒâ€ƒä¸€å¹…å›¾åƒçš„å°ºåº¦ç©ºé—´å¯å®šä¹‰ä¸ºå¯¹åŸå›¾åƒè¿›è¡Œå¯å˜å°ºåº¦çš„é«˜æ–¯å·ç§¯ï¼š<br>$$L(x,y,\sigma)&#x3D;G(x,y,\sigma) \ast I(x,y)$$<br>$$G(x,y,\sigma)&#x3D;\dfrac{1}{2 \pi \sigma^2} e^{-\dfrac{x^2+y^2}{2\sigma^2}}$$<br>å¼ä¸­ï¼Œ$G(x,y,\sigma)$æ˜¯å°ºåº¦å¯å˜çš„é«˜æ–¯å‡½æ•°ï¼Œ$(x,y)$æ˜¯å›¾åƒçš„ç©ºé—´åæ ‡ï¼Œ$\sigma$æ˜¯å°ºåº¦åæ ‡(å°ºåº¦å˜åŒ–å› å­)ï¼Œ$\sigma$å¤§å°å†³å®šå›¾åƒçš„å¹³æ»‘ç¨‹åº¦ï¼Œå€¼è¶Šå¤§å›¾åƒæ¨¡ç³Šå¾—è¶Šä¸¥é‡ã€‚å¤§å°ºåº¦å¯¹åº”å›¾åƒçš„æ¦‚è²Œç‰¹å¾ï¼Œå°å°ºåº¦å¯¹åº”å›¾åƒçš„ç»†èŠ‚ç‰¹å¾ã€‚ä¸€èˆ¬æ ¹æ®$3\sigma$åŸåˆ™ï¼Œé«˜æ–¯æ ¸çŸ©é˜µçš„å¤§å°è®¾ä¸º$(6\sigma+1) \times (6\sigma+1)$ã€‚<br>â€ƒâ€ƒåœ¨ä½¿ç”¨é«˜æ–¯é‡‘å­—å¡”æ„å»ºå°ºåº¦ç©ºé—´æ—¶ï¼Œä¸»è¦åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œå¯¹å›¾åƒåšé™é‡‡æ ·ï¼Œä»¥åŠå¯¹å›¾åƒåšä¸åŒå°ºåº¦çš„é«˜æ–¯æ¨¡ç³Šã€‚å¯¹å›¾åƒåšé™é‡‡æ ·å¾—åˆ°ä¸åŒå°ºåº¦çš„å›¾åƒï¼Œä¹Ÿå°±æ˜¯ä¸åŒçš„ç»„(Octave)ï¼Œåé¢çš„Octave(é«˜ä¸€å±‚çš„é‡‘å­—å¡”)ä¸ºä¸Šä¸€ä¸ªOctave(ä½ä¸€å±‚çš„é‡‘å­—å¡”)é™é‡‡æ ·å¾—åˆ°ï¼Œå›¾åƒå®½é«˜åˆ†åˆ«ä¸ºä¸Šä¸€ä¸ªOctaveçš„1&#x2F;2ã€‚æ¯ç»„(Octave)åˆåˆ†ä¸ºè‹¥å¹²å±‚(Interval)ï¼Œé€šè¿‡å¯¹å›¾åƒåšä¸åŒå°ºåº¦çš„é«˜æ–¯æ¨¡ç³Šå¾—åˆ°ã€‚ä¸ºäº†æœ‰æ•ˆåœ°åœ¨å°ºåº¦ç©ºé—´æ£€æµ‹ç¨³å®šçš„å…³é”®ç‚¹ï¼Œæå‡ºäº†é«˜æ–¯å·®åˆ†å°ºåº¦ç©ºé—´(DoG Scale-Space)ï¼Œåˆ©ç”¨ä¸åŒå°ºåº¦çš„é«˜æ–¯å·®åˆ†æ ¸ä¸å›¾åƒå·ç§¯ç”Ÿæˆã€‚<br>$$D(x,y,\sigma)&#x3D;(G(x,y,k\sigma)-G(x,y,\sigma)) \ast I(x,y) &#x3D; L(x,y,k\sigma)-L(x,y,\sigma)$$<br>å›¾åƒçš„é«˜æ–¯é‡‘å­—å¡”å’Œé«˜æ–¯å·®åˆ†é‡‘å­—å¡”å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé«˜æ–¯å·®åˆ†å›¾åƒç”±é«˜æ–¯é‡‘å­—å¡”ä¸­åŒä¸€ç»„(Octave)å†…ç›¸é‚»å±‚(Interval)çš„å›¾åƒä½œå·®å¾—åˆ°ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E4%B9%8BSIFT%E7%89%B9%E5%BE%81%E5%8C%B9%E9%85%8D/5956098d36da8.jpg"></p><h2 id="å°ºåº¦ç©ºé—´çš„å‚æ•°ç¡®å®š"><a href="#å°ºåº¦ç©ºé—´çš„å‚æ•°ç¡®å®š" class="headerlink" title="å°ºåº¦ç©ºé—´çš„å‚æ•°ç¡®å®š"></a>å°ºåº¦ç©ºé—´çš„å‚æ•°ç¡®å®š</h2><p>â€ƒâ€ƒåœ¨ç”±å›¾åƒé‡‘å­—å¡”è¡¨ç¤ºçš„å°ºåº¦ç©ºé—´ä¸­ï¼Œå›¾åƒçš„ç»„æ•°(Octave)ç”±åŸå§‹å›¾åƒçš„å¤§å°å’Œå¡”é¡¶å›¾åƒçš„å¤§å°å†³å®šã€‚<br>$$Octave &#x3D; log_2(min(width_0, height_0)) - log_2(min(width, height)) $$<br>å¼ä¸­ï¼Œ$width_0ã€height_0$åˆ†åˆ«ä¸ºåŸå§‹å›¾åƒçš„å®½é«˜ï¼Œ$widthã€height$ä¸ºå¡”é¡¶å›¾åƒçš„å®½é«˜ã€‚å¯¹äºä¸€å¹…å¤§å°ä¸º$512 \times 512$çš„å›¾åƒï¼Œå½“å¡”é¡¶å›¾åƒå¤§å°ä¸º$4 \times 4$æ—¶ï¼Œå›¾åƒçš„ç»„æ•°ä¸º$Octave &#x3D; 7$ã€‚<br>å°ºåº¦å‚æ•°$\sigma$çš„å–å€¼ä¸é‡‘å­—å¡”çš„ç»„æ•°å’Œå±‚æ•°ç›¸å…³ï¼Œè®¾ç¬¬ä¸€ç»„ç¬¬ä¸€å±‚çš„å°ºåº¦å‚æ•°å–å€¼ä¸º$\sigma(1,1)&#x3D;\sigma_0$ï¼Œåˆ™ç¬¬$m$ç»„ç¬¬$n$å±‚çš„$\sigma$å–å€¼ä¸º<br>$$\sigma(m,n)&#x3D;\sigma_0 \cdot 2^{m-1} \cdot k^{n-1}, â€ƒk&#x3D;2^{\dfrac{1}{S}}$$<br>å¼ä¸­ï¼Œ$S$ä¸ºé‡‘å­—å¡”ä¸­æ¯ç»„çš„æœ‰æ•ˆå±‚æ•°ã€‚ä¸ºäº†å¾—åˆ°æ›´å¤šçš„ç‰¹å¾ç‚¹ï¼Œå°†å›¾åƒæ‰©å¤§ä¸ºåŸæ¥çš„ä¸¤å€ï¼ŒåŸå§‹å›¾åƒçš„å°ºåº¦å‚æ•°ä¸º$\sigma&#x3D;0.5$ï¼Œæ‰©å¤§ä¸¤å€åçš„å°ºåº¦ä¸º$\sigma&#x3D;1.6$ã€‚åœ¨æ£€æµ‹æå€¼ç‚¹å‰å¯¹åŸå§‹å›¾åƒçš„é«˜æ–¯å¹³æ»‘ä¼šå¯¼è‡´å›¾åƒé«˜é¢‘ä¿¡æ¯çš„ä¸¢å¤±ï¼Œæ‰€ä»¥åœ¨å»ºç«‹å°ºåº¦ç©ºé—´å‰å…ˆå°†å›¾åƒæ‰©å¤§ä¸ºåŸæ¥çš„ä¸¤å€ï¼Œä»¥ä¿ç•™åŸå§‹å›¾åƒä¿¡æ¯ï¼Œå¢åŠ ç‰¹å¾ç‚¹æ•°é‡ã€‚</p><h2 id="DoGç®—å­æ£€æµ‹æå€¼ç‚¹"><a href="#DoGç®—å­æ£€æµ‹æå€¼ç‚¹" class="headerlink" title="DoGç®—å­æ£€æµ‹æå€¼ç‚¹"></a>DoGç®—å­æ£€æµ‹æå€¼ç‚¹</h2><p>â€ƒâ€ƒä¸ºäº†å¯»æ‰¾DoGå°ºåº¦ç©ºé—´çš„æå€¼ç‚¹ï¼Œæ¯ä¸€ä¸ªé‡‡æ ·ç‚¹è¦å’Œå…¶æ‰€æœ‰é‚»åŸŸåƒç´ ç›¸æ¯”è¾ƒï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸­é—´æ£€æµ‹ç‚¹ä¸å…¶åŒå°ºåº¦çš„$8$ä¸ªé‚»åŸŸåƒç´ ç‚¹ä»¥åŠä¸Šä¸‹ç›¸é‚»ä¸¤å±‚å¯¹åº”çš„$9 \times 2$ä¸ªåƒç´ ç‚¹ä¸€å…±$26$ä¸ªç‚¹ä½œæ¯”è¾ƒï¼Œä»¥ç¡®ä¿åœ¨å›¾åƒç©ºé—´å’Œå°ºåº¦ç©ºé—´éƒ½èƒ½æ£€æµ‹åˆ°æå€¼ç‚¹ã€‚ä¸€ä¸ªåƒç´ ç‚¹å¦‚æœåœ¨DoGå°ºåº¦ç©ºé—´æœ¬å±‚åŠä¸Šä¸‹ä¸¤å±‚çš„26é‚»åŸŸä¸­å–å¾—æœ€å¤§æˆ–æœ€å°å€¼æ—¶ï¼Œå°±å¯ä»¥è®¤ä¸ºè¯¥ç‚¹æ˜¯å›¾åƒåœ¨è¯¥å°ºåº¦ä¸‹çš„ä¸€ä¸ªç‰¹å¾ç‚¹ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E4%B9%8BSIFT%E7%89%B9%E5%BE%81%E5%8C%B9%E9%85%8D/59562da5c15d9.png"></p><p>â€ƒâ€ƒåœ¨æå€¼æ¯”è¾ƒçš„è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€ç»„å·®åˆ†å›¾åƒçš„é¦–æœ«ä¸¤å±‚æ˜¯æ— æ³•æ¯”è¾ƒçš„ï¼Œä¸ºäº†åœ¨æ¯ç»„ä¸­æ£€æµ‹$S$ä¸ªå°ºåº¦çš„æå€¼ç‚¹ï¼Œåˆ™DoGé‡‘å­—å¡”æ¯ç»„é¡»æœ‰$S+2$å±‚å›¾åƒï¼Œé«˜æ–¯é‡‘å­—å¡”æ¯ç»„é¡»æœ‰$S+3$å±‚å›¾åƒã€‚å¦å¤–ï¼Œåœ¨é™é‡‡æ ·æ—¶ï¼Œé«˜æ–¯é‡‘å­—å¡”ä¸­ä¸€ç»„(Octive)çš„åº•å±‚å›¾åƒæ˜¯ç”±å‰ä¸€ç»„å›¾åƒçš„å€’æ•°ç¬¬3å¼ å›¾åƒ(S+1å±‚)éš”ç‚¹é‡‡æ ·å¾—åˆ°ã€‚è¿™æ ·ä¹Ÿä¿è¯äº†å°ºåº¦å˜åŒ–çš„è¿ç»­æ€§ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E4%B9%8BSIFT%E7%89%B9%E5%BE%81%E5%8C%B9%E9%85%8D/59562da5c399e.png"></p><p>å‡è®¾æ¯ç»„çš„å±‚æ•°$S&#x3D;3$ï¼Œåˆ™$k&#x3D;2^{1&#x2F;S}&#x3D;s^{1&#x2F;3}$ï¼Œåœ¨é«˜æ–¯é‡‘å­—å¡”ä¸­ï¼Œç¬¬ä¸€ä¸ªOctaveä¸­ç¬¬$S+1$å±‚å›¾åƒå°ºåº¦ä¸º$k^3\sigma&#x3D;2\sigma$ï¼Œç»é™é‡‡æ ·åå¾—åˆ°ç¬¬äºŒä¸ªOctaveçš„ç¬¬$1$å±‚å›¾åƒï¼Œå°ºåº¦ä»ä¸º$2\sigma$ã€‚åœ¨DoGå°ºåº¦ç©ºé—´ä¸­ï¼Œç¬¬ä¸€ç»„(1st-Octave)å›¾åƒä¸­é—´ä¸‰é¡¹çš„å°ºåº¦åˆ†åˆ«ä¸º$(k\sigma, k^2\sigma, k^3\sigma)$ï¼Œä¸‹ä¸€ç»„ä¸­é—´ä¸‰é¡¹ä¸º$(2k\sigma, 2k^2\sigma, 2k^3\sigma)$ï¼Œå…¶â€œé¦–é¡¹â€$2k\sigma&#x3D;2^{4&#x2F;3}\sigma$ï¼Œä¸ä¸Šä¸€ç»„â€œæœ«é¡¹â€$k^3\sigma&#x3D;2^{3&#x2F;3}\sigma$å°ºåº¦å˜åŒ–è¿ç»­ï¼Œå˜åŒ–å°ºåº¦ä¸º$k&#x3D;2^{1&#x2F;S}&#x3D;2^{1&#x2F;3}$ã€‚</p><h1 id="å…³é”®ç‚¹å®šä½"><a href="#å…³é”®ç‚¹å®šä½" class="headerlink" title="å…³é”®ç‚¹å®šä½"></a>å…³é”®ç‚¹å®šä½</h1><p>â€ƒâ€ƒåœ¨DoGå°ºåº¦ç©ºé—´æ£€æµ‹åˆ°çš„æå€¼ç‚¹æ˜¯ç¦»æ•£çš„ï¼Œé€šè¿‡æ‹Ÿåˆä¸‰å…ƒäºŒæ¬¡å‡½æ•°å¯ä»¥ç²¾ç¡®å®šä½å…³é”®ç‚¹çš„ä½ç½®å’Œå°ºåº¦ï¼Œè¾¾åˆ°äºšåƒç´ ç²¾åº¦ã€‚åŒæ—¶å»é™¤ä½å¯¹æ¯”åº¦çš„æ£€æµ‹ç‚¹å’Œä¸ç¨³å®šçš„è¾¹ç¼˜ç‚¹ï¼Œä»¥å¢å¼ºåŒ¹é…ç¨³å®šæ€§ï¼Œæé«˜æŠ—å™ªå£°èƒ½åŠ›ã€‚</p><h2 id="å…³é”®ç‚¹ç²¾ç¡®å®šä½"><a href="#å…³é”®ç‚¹ç²¾ç¡®å®šä½" class="headerlink" title="å…³é”®ç‚¹ç²¾ç¡®å®šä½"></a>å…³é”®ç‚¹ç²¾ç¡®å®šä½</h2><p>â€ƒâ€ƒDoGå‡½æ•°$D(X)&#x3D;D(x,y,\sigma)$åœ¨å°ºåº¦ç©ºé—´çš„çš„Taylorå±•å¼€å¼ä¸º<br>$$D(X)&#x3D;D+\dfrac{\partial D^T}{\partial X} X + \dfrac{1}{2} X^T \dfrac{\partial^2 D}{\partial X^2}X$$<br>ä»¤$D(X)$å¯¼æ•°ä¸º0ï¼Œå¾—åˆ°æå€¼ç‚¹çš„åç§»é‡<br>$$\hat {X} &#x3D; -(\dfrac{\partial^2 D}{\partial X^2})^{-1} \dfrac{\partial D}{\partial X}$$<br>è‹¥$\hat {X}&#x3D;(x,y,\sigma)^T$åœ¨ä»»æ„ä¸€ä¸ªç»´åº¦å¤§äº$0.5$ï¼Œè¯´æ˜æå€¼ç‚¹ç²¾ç¡®ä½ç½®è·ç¦»å¦ä¸€ä¸ªç‚¹æ›´è¿‘ï¼Œåº”è¯¥æ”¹å˜å½“å‰å…³é”®ç‚¹çš„ä½ç½®ï¼Œå®šä½åˆ°æ–°ç‚¹åæ‰§è¡Œç›¸åŒæ“ä½œï¼Œè‹¥è¿­ä»£5æ¬¡ä»ä¸æ”¶æ•›ï¼Œåˆ™è®¤ä¸ºè¯¥æ£€æµ‹ç‚¹ä¸ä¸ºå…³é”®ç‚¹ã€‚ç²¾ç¡®å…³é”®ç‚¹å¤„å‡½æ•°å€¼ä¸º<br>$$D(\hat {X})&#x3D;D+\dfrac{1}{2} \dfrac{\partial D^T}{\partial X} \hat {X}$$<br>$|D(\hat {X})|$è¿‡å°æ˜“å—å™ªå£°ç‚¹çš„å¹²æ‰°è€Œå˜å¾—ä¸ç¨³å®šï¼Œè‹¥å…¶å°äºæŸä¸ªé˜ˆå€¼(ä¾‹å¦‚$0.03$æˆ–è€…$0.04&#x2F;S$)ï¼Œåˆ™å°†è¯¥æå€¼ç‚¹åˆ é™¤ã€‚</p><h2 id="æ¶ˆé™¤è¾¹ç¼˜æ•ˆåº”"><a href="#æ¶ˆé™¤è¾¹ç¼˜æ•ˆåº”" class="headerlink" title="æ¶ˆé™¤è¾¹ç¼˜æ•ˆåº”"></a>æ¶ˆé™¤è¾¹ç¼˜æ•ˆåº”</h2><p>â€ƒâ€ƒé«˜æ–¯å·®åˆ†å‡½æ•°DoGæœ‰è¾ƒå¼ºçš„è¾¹ç¼˜å“åº”ï¼Œéœ€è¦å‰”é™¤ä¸ç¨³å®šçš„è¾¹ç¼˜å“åº”ç‚¹ã€‚è¾¹ç¼˜ç‚¹çš„ç‰¹å¾è¡¨ç°åœ¨æŸä¸ªæ–¹å‘æœ‰è¾ƒå¤§çš„ä¸»æ›²ç‡ï¼Œè€Œåœ¨ä¸å…¶å‚ç›´æ–¹å‘ä¸»æ›²ç‡è¾ƒå°ã€‚ä¸»æ›²ç‡å¯é€šè¿‡ä¸€ä¸ª$2 \times 2$çš„$Hessian$çŸ©é˜µæ±‚å‡ºã€‚<br>$$H&#x3D;\begin{bmatrix} D_{xx}&amp;&amp; D_{xy} \\ D_{xy} &amp;&amp; D_{yy}\end{bmatrix}$$<br>$D$çš„ä¸»æ›²ç‡å’Œ$H$çš„ç‰¹å¾å€¼æˆæ­£æ¯”ï¼Œä»¤$\alpha$ä¸ºè¾ƒå¤§ç‰¹å¾å€¼ï¼Œ$\beta$ä¸ºè¾ƒå°ç‰¹å¾å€¼ï¼Œä¸”$\alpha &#x2F; \beta &#x3D; r$ï¼Œåˆ™<br>$$Tr(H)&#x3D;D_{xx}+D_{yy}&#x3D;\alpha + \beta, â€ƒDet(H)&#x3D;D_{xx}D_{yy}-D_{xy}^2&#x3D;\alpha \beta$$<br>$$\dfrac{Tr(H)^2}{Det(H)}&#x3D;\dfrac{(\alpha + \beta)^2}{\alpha \beta} &#x3D; \dfrac{(r+1)^2}{r}$$<br>$(r+1)^2&#x2F;r$åœ¨ä¸¤ä¸ªç‰¹å¾å€¼ç›¸ç­‰æ—¶æœ€å°ï¼Œéšç€$r$çš„å¢å¤§è€Œå¢å¤§ï¼Œ$r$å€¼è¶Šå¤§ï¼Œè¯´æ˜ä¸¤ä¸ªç‰¹å¾å€¼çš„æ¯”å€¼è¶Šå¤§ï¼Œæ­£å¥½å¯¹åº”è¾¹ç¼˜çš„æƒ…å†µã€‚å› æ­¤ï¼Œè®¾å®šä¸€ä¸ªé˜ˆå€¼$r_t$ï¼Œè‹¥æ»¡è¶³<br>$$\dfrac{Tr(H)^2}{Det(H)} &lt; \dfrac{(r_t+1)^2}{r_t}$$<br>åˆ™è®¤ä¸ºè¯¥å…³é”®ç‚¹ä¸æ˜¯è¾¹ç¼˜ï¼Œå¦åˆ™äºˆä»¥å‰”é™¤ã€‚</p><h1 id="å…³é”®ç‚¹æ–¹å‘åˆ†é…"><a href="#å…³é”®ç‚¹æ–¹å‘åˆ†é…" class="headerlink" title="å…³é”®ç‚¹æ–¹å‘åˆ†é…"></a>å…³é”®ç‚¹æ–¹å‘åˆ†é…</h1><p>â€ƒâ€ƒä¸ºäº†ä½¿ç‰¹å¾æè¿°å­å…·æœ‰æ—‹è½¬ä¸å˜æ€§ï¼Œéœ€è¦åˆ©ç”¨å…³é”®ç‚¹é‚»åŸŸåƒç´ çš„æ¢¯åº¦æ–¹å‘åˆ†å¸ƒç‰¹æ€§ä¸ºæ¯ä¸ªå…³é”®ç‚¹æŒ‡å®šæ–¹å‘å‚æ•°ã€‚å¯¹äºåœ¨DoGé‡‘å­—å¡”ä¸­æ£€æµ‹å‡ºçš„å…³é”®ç‚¹ï¼Œåœ¨å…¶é‚»è¿‘é«˜æ–¯é‡‘å­—å¡”å›¾åƒçš„$3\sigma$é‚»åŸŸçª—å£å†…è®¡ç®—å…¶æ¢¯åº¦å¹…å€¼å’Œæ–¹å‘ï¼Œå…¬å¼å¦‚ä¸‹ï¼š<br>$$m(x,y)&#x3D;\sqrt{[L(x+1,y)-L(x-1,y)]^2 + [L(x,y+1)-L(x,y-1)]^2}$$<br>$$\theta(x,y)&#x3D;tan^{-1}{[L(x,y+1)-L(x,y-1)] &#x2F; [L(x+1,y)-L(x-1,y)]}$$<br>å¼ä¸­ï¼Œ$L$ä¸ºå…³é”®ç‚¹æ‰€åœ¨å°ºåº¦ç©ºé—´çš„ç°åº¦å€¼ï¼Œ$m(x,y)$ä¸ºæ¢¯åº¦å¹…å€¼ï¼Œ$\theta(x,y)$ä¸ºæ¢¯åº¦æ–¹å‘ã€‚å¯¹æ¨¡å€¼$m(x,y)$æŒ‰$\sigma&#x3D;1.5\sigma_{oct}$ã€é‚»åŸŸçª—å£ä¸º$3\sigma&#x3D;3 \times 1.5\sigma_{oct}$çš„é«˜æ–¯åˆ†å¸ƒåŠ æƒã€‚åœ¨å®Œæˆå…³é”®ç‚¹çš„æ¢¯åº¦è®¡ç®—åï¼Œä½¿ç”¨ç›´æ–¹å›¾ç»Ÿè®¡é‚»åŸŸå†…åƒç´ çš„æ¢¯åº¦å’Œæ–¹å‘ï¼Œæ¢¯åº¦ç›´æ–¹å›¾å°†æ¢¯åº¦æ–¹å‘$(0, 360^{\circ })$åˆ†ä¸º36æŸ±(bins)ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç›´æ–¹å›¾çš„å³°å€¼æ‰€åœ¨çš„æ–¹å‘ä»£è¡¨äº†è¯¥å…³é”®ç‚¹çš„ä¸»æ–¹å‘ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E4%B9%8BSIFT%E7%89%B9%E5%BE%81%E5%8C%B9%E9%85%8D/59564f338a59c.png"></p><p>æ¢¯åº¦æ–¹å‘ç›´æ–¹å›¾çš„å³°å€¼ä»£è¡¨äº†è¯¥ç‰¹å¾ç‚¹å¤„é‚»åŸŸæ¢¯åº¦çš„ä¸»æ–¹å‘ï¼Œä¸ºäº†å¢å¼ºé²æ£’æ€§ï¼Œä¿ç•™å³°å€¼å¤§äºä¸»æ–¹å‘å³°å€¼80%çš„æ–¹å‘ä½œä¸ºè¯¥å…³é”®ç‚¹çš„è¾…æ–¹å‘ï¼Œå› æ­¤ï¼Œåœ¨ç›¸åŒä½ç½®å’Œå°ºåº¦ï¼Œå°†ä¼šæœ‰å¤šä¸ªå…³é”®ç‚¹è¢«åˆ›å»ºä½†æ–¹å‘ä¸åŒï¼Œå¯ä»¥æé«˜ç‰¹å¾ç‚¹åŒ¹é…çš„ç¨³å®šæ€§ã€‚</p><h1 id="å…³é”®ç‚¹ç‰¹å¾æè¿°"><a href="#å…³é”®ç‚¹ç‰¹å¾æè¿°" class="headerlink" title="å…³é”®ç‚¹ç‰¹å¾æè¿°"></a>å…³é”®ç‚¹ç‰¹å¾æè¿°</h1><p>â€ƒâ€ƒåœ¨ç»è¿‡ä¸Šè¿°æµç¨‹åï¼Œæ£€æµ‹åˆ°çš„æ¯ä¸ªå…³é”®ç‚¹æœ‰ä¸‰ä¸ªä¿¡æ¯ï¼šä½ç½®ã€å°ºåº¦ä»¥åŠæ–¹å‘ï¼Œæ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯æŠ½è±¡å‡ºä¸€ç»„ç‰¹å¾å‘é‡æè¿°æ¯ä¸ªå…³é”®ç‚¹ã€‚è¿™ä¸ªç‰¹å¾æè¿°å­ä¸ä½†åŒ…æ‹¬å…³é”®ç‚¹ï¼Œè¿˜åŒ…æ‹¬å…¶é‚»åŸŸåƒç´ çš„è´¡çŒ®ï¼Œè€Œä¸”éœ€å…·å¤‡è¾ƒé«˜çš„ç‹¬ç‰¹æ€§å’Œç¨³å®šæ€§ï¼Œä»¥æé«˜ç‰¹å¾ç‚¹åŒ¹é…çš„å‡†ç¡®ç‡ã€‚SIFTç‰¹å¾æè¿°å­æ˜¯å…³é”®ç‚¹é‚»åŸŸæ¢¯åº¦ç»è¿‡é«˜æ–¯åŠ æƒåç»Ÿè®¡ç»“æœçš„ä¸€ç§è¡¨ç¤ºã€‚é€šè¿‡å¯¹å…³é”®ç‚¹å‘¨å›´å›¾åƒåŒºåŸŸåˆ†å—ï¼Œè®¡ç®—å—å†…çš„æ¢¯åº¦ç›´æ–¹å›¾ï¼Œå¾—åˆ°è¡¨ç¤ºå±€éƒ¨ç‰¹å¾ç‚¹ä¿¡æ¯çš„ç‰¹å¾å‘é‡ã€‚ä¾‹å¦‚åœ¨å°ºåº¦ç©ºé—´$4 \times 4$çš„çª—å£å†…ç»Ÿè®¡8ä¸ªæ–¹å‘çš„æ¢¯åº¦ç›´æ–¹å›¾ï¼Œç”Ÿæˆä¸€ä¸ª$4 \times 4 \times 8 &#x3D; 128$ç»´çš„è¡¨ç¤ºå‘é‡ã€‚</p><h2 id="ç¡®å®šç‰¹å¾æè¿°å­é‡‡æ ·åŒºåŸŸ"><a href="#ç¡®å®šç‰¹å¾æè¿°å­é‡‡æ ·åŒºåŸŸ" class="headerlink" title="ç¡®å®šç‰¹å¾æè¿°å­é‡‡æ ·åŒºåŸŸ"></a>ç¡®å®šç‰¹å¾æè¿°å­é‡‡æ ·åŒºåŸŸ</h2><p>â€ƒâ€ƒç‰¹å¾æè¿°å­ä¸ç‰¹å¾ç‚¹æ‰€åœ¨çš„å°ºåº¦ç©ºé—´æœ‰å…³ï¼Œå› æ­¤å¯¹æ¢¯åº¦çš„æ±‚å–åº”è¯¥åœ¨ç‰¹å¾ç‚¹å¯¹åº”çš„é«˜æ–¯å›¾åƒä¸Šè¿›è¡Œã€‚å°†å…³é”®ç‚¹é™„è¿‘çš„é‚»åŸŸåˆ’åˆ†ä¸º$d \times d(d&#x3D;4)$ä¸ªå­åŒºåŸŸï¼Œæ¯ä¸ªå­åŒºåŸŸçš„å¤§å°ä¸å…³é”®ç‚¹æ–¹å‘åˆ†é…æ—¶ç›¸åŒï¼Œå³è¾¹é•¿ä¸º$3\sigma_{oct}$ï¼Œè€ƒè™‘åˆ°å®é™…è®¡ç®—æ—¶éœ€è¦è¿›è¡Œä¸‰çº¿æ€§æ’å€¼ï¼Œé‚»åŸŸçª—å£è¾¹é•¿è®¾ä¸º$3\sigma_{oct}(d+1)$ï¼Œåˆè€ƒè™‘åˆ°æ—‹è½¬å› ç´ (åæ ‡è½´æ—‹è½¬è‡³å…³é”®ç‚¹ä¸»æ–¹å‘)ï¼Œæœ€åæ‰€éœ€çš„å›¾åƒåŒºåŸŸåŠå¾„ä¸º<br>$$radius&#x3D;\dfrac{3\sigma_{oct} \times \sqrt{2} \times (d+1)}{2}$$<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E4%B9%8BSIFT%E7%89%B9%E5%BE%81%E5%8C%B9%E9%85%8D/595656c99be22.jpg"></p><h2 id="æ—‹è½¬åæ ‡è½´è‡³å…³é”®ç‚¹ä¸»æ–¹å‘"><a href="#æ—‹è½¬åæ ‡è½´è‡³å…³é”®ç‚¹ä¸»æ–¹å‘" class="headerlink" title="æ—‹è½¬åæ ‡è½´è‡³å…³é”®ç‚¹ä¸»æ–¹å‘"></a>æ—‹è½¬åæ ‡è½´è‡³å…³é”®ç‚¹ä¸»æ–¹å‘</h2><p>â€ƒâ€ƒå°†åæ ‡è½´æ—‹è½¬è‡³å…³é”®ç‚¹ä¸»æ–¹å‘ï¼Œä»¥ç¡®ä¿æ—‹è½¬ä¸å˜æ€§ã€‚æ—‹è½¬åé‡‡æ ·ç‚¹çš„æ–°åæ ‡ä¸º<br>$$\begin{bmatrix} x\prime \\ y\prime \end{bmatrix} &#x3D; \begin{bmatrix} cos\theta &amp;&amp; -sin\theta \\ sin\theta &amp;&amp; cos\theta \end{bmatrix} \begin{bmatrix} x\\ y \end{bmatrix}, â€ƒx,y \in [-radius, radius]$$</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E4%B9%8BSIFT%E7%89%B9%E5%BE%81%E5%8C%B9%E9%85%8D/595656c9f07bc.png"></p><h2 id="ä¸‰çº¿æ€§æ’å€¼è®¡ç®—æƒå€¼"><a href="#ä¸‰çº¿æ€§æ’å€¼è®¡ç®—æƒå€¼" class="headerlink" title="ä¸‰çº¿æ€§æ’å€¼è®¡ç®—æƒå€¼"></a>ä¸‰çº¿æ€§æ’å€¼è®¡ç®—æƒå€¼</h2><p>â€ƒâ€ƒåœ¨å›¾åƒåŠå¾„åŒºåŸŸå†…å¯¹æ¯ä¸ªåƒç´ ç‚¹æ±‚å…¶æ¢¯åº¦å¹…å€¼å’Œæ–¹å‘ï¼Œå¹¶å¯¹æ¯ä¸ªæ¢¯åº¦å¹…å€¼ä¹˜ä»¥é«˜æ–¯æƒé‡å‚æ•°<br>$$w&#x3D;m(a+x,b+y) \times e^{-\dfrac{(xâ€™)^2+(yâ€™)^2}{2\sigma_w^2}}$$<br>å¼ä¸­ï¼Œ$xâ€™ã€yâ€™$åˆ†åˆ«è¡¨ç¤ºåƒç´ ç‚¹ä¸å…³é”®ç‚¹çš„è¡Œã€åˆ—è·ç¦»ï¼Œ$m(x,y)$è¡¨ç¤ºåƒç´ æ¢¯åº¦å¹…å€¼ï¼Œé«˜æ–¯å°ºåº¦å› å­ä¸º$\sigma_w&#x3D;3\sigma \times 0.5d$ã€‚<br>å°†æ—‹è½¬åçš„é‡‡æ ·ç‚¹åæ ‡åˆ†é…åˆ°å¯¹åº”çš„å­åŒºåŸŸï¼Œè®¡ç®—å½±å“å­åŒºåŸŸçš„é‡‡æ ·ç‚¹çš„æ¢¯åº¦å’Œæ–¹å‘ï¼Œåˆ†é…åˆ°8ä¸ªæ–¹å‘ä¸Šã€‚æ—‹è½¬åçš„é‡‡æ ·ç‚¹$(xâ€™,yâ€™)$è½åœ¨å­åŒºåŸŸçš„ä¸‹æ ‡ä¸º<br>$$\begin{bmatrix} u\\ v\end{bmatrix} &#x3D; \dfrac{1}{3\sigma_{oct}} \begin{bmatrix} x\prime\\ y\prime\end{bmatrix}  + \dfrac{d}{2}, â€ƒu,v \in [0,d]$$<br>å°†é‡‡æ ·ç‚¹åœ¨å­åŒºåŸŸçš„ä¸‹æ ‡è¿›è¡Œä¸‰çº¿æ€§æ’å€¼ï¼Œæ ¹æ®ä¸‰ç»´åæ ‡è®¡ç®—ä¸å‘¨å›´å­åŒºåŸŸçš„è·ç¦»ï¼ŒæŒ‰è·ç¦»è¿œè¿‘è®¡ç®—æƒé‡ï¼Œæœ€ç»ˆç´¯åŠ åœ¨ç›¸åº”å­åŒºåŸŸçš„ç›¸å…³æ–¹å‘ä¸Šçš„æƒå€¼ä¸º<br>$$weight &#x3D; w \cdot dr^i \cdot (1-dr)^{1-i} \cdot dc^j \cdot (1-dc)^{1-j} \cdot do^k \cdot (1-do)^{1-k}$$<br>å¼ä¸­$iã€jã€k$å–0æˆ–è€…1.</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E4%B9%8BSIFT%E7%89%B9%E5%BE%81%E5%8C%B9%E9%85%8D/59565c422740a.jpg"></p><h2 id="å‘é‡å½’ä¸€åŒ–ç”Ÿæˆæè¿°å­"><a href="#å‘é‡å½’ä¸€åŒ–ç”Ÿæˆæè¿°å­" class="headerlink" title="å‘é‡å½’ä¸€åŒ–ç”Ÿæˆæè¿°å­"></a>å‘é‡å½’ä¸€åŒ–ç”Ÿæˆæè¿°å­</h2><p>â€ƒâ€ƒå¾—åˆ°128ç»´ç‰¹å¾å‘é‡åï¼Œä¸ºäº†å»é™¤å…‰ç…§å˜åŒ–çš„å½±å“ï¼Œéœ€è¦å¯¹å‘é‡è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ã€‚éçº¿æ€§å…‰ç…§å˜åŒ–ä»å¯èƒ½å¯¼è‡´æ¢¯åº¦å¹…å€¼çš„è¾ƒå¤§å˜åŒ–ï¼Œä½†å¯¹æ¢¯åº¦æ–¹å‘å½±å“è¾ƒå°ã€‚å› æ­¤å¯¹äºè¶…è¿‡é˜ˆå€¼0.2çš„æ¢¯åº¦å¹…å€¼è®¾ä¸º0.2ï¼Œç„¶åå†è¿›è¡Œä¸€æ¬¡å½’ä¸€åŒ–ã€‚æœ€åå°†ç‰¹å¾å‘é‡æŒ‰ç…§å¯¹åº”é«˜æ–¯é‡‘å­—å¡”çš„å°ºåº¦å¤§å°æ’åºã€‚è‡³æ­¤ï¼ŒSIFTç‰¹å¾æè¿°å­å½¢æˆã€‚</p><h1 id="SIFTç‰¹å¾åŒ¹é…"><a href="#SIFTç‰¹å¾åŒ¹é…" class="headerlink" title="SIFTç‰¹å¾åŒ¹é…"></a>SIFTç‰¹å¾åŒ¹é…</h1><p>â€ƒâ€ƒå¯¹ä¸¤å¹…å›¾åƒä¸­æ£€æµ‹åˆ°çš„ç‰¹å¾ç‚¹ï¼Œå¯é‡‡ç”¨ç‰¹å¾å‘é‡çš„æ¬§å¼è·ç¦»ä½œä¸ºç‰¹å¾ç‚¹ç›¸ä¼¼æ€§çš„åº¦é‡ï¼Œå–å›¾åƒ1ä¸­æŸä¸ªå…³é”®ç‚¹ï¼Œå¹¶åœ¨å›¾åƒ2ä¸­æ‰¾åˆ°ä¸å…¶è·ç¦»æœ€è¿‘çš„ä¸¤ä¸ªå…³é”®ç‚¹ï¼Œè‹¥æœ€è¿‘è·ç¦»ä¸æ¬¡è¿‘è·ç¦»çš„æ¯”å€¼å°äºæŸä¸ªé˜ˆå€¼ï¼Œåˆ™è®¤ä¸ºè·ç¦»æœ€è¿‘çš„è¿™ä¸€å¯¹å…³é”®ç‚¹ä¸ºåŒ¹é…ç‚¹ã€‚é™ä½æ¯”ä¾‹é˜ˆå€¼ï¼ŒSIFTåŒ¹é…ç‚¹æ•°é‡ä¼šå‡å°‘ï¼Œä½†ç›¸å¯¹è€Œè¨€ä¼šæ›´åŠ ç¨³å®šã€‚é˜ˆå€¼ratioçš„å–å€¼èŒƒå›´ä¸€èˆ¬ä¸º0.4~0.6ã€‚</p><h1 id="SIFTç‰¹å¾çš„ç‰¹ç‚¹"><a href="#SIFTç‰¹å¾çš„ç‰¹ç‚¹" class="headerlink" title="SIFTç‰¹å¾çš„ç‰¹ç‚¹"></a>SIFTç‰¹å¾çš„ç‰¹ç‚¹</h1><p>â€ƒâ€ƒSIFTæ˜¯ä¸€ç§æ£€æµ‹ã€æè¿°ã€åŒ¹é…å›¾åƒå±€éƒ¨ç‰¹å¾ç‚¹çš„ç®—æ³•ï¼Œé€šè¿‡åœ¨å°ºåº¦ç©ºé—´ä¸­æ£€æµ‹æå€¼ç‚¹ï¼Œæå–ä½ç½®ã€å°ºåº¦ã€æ—‹è½¬ä¸å˜é‡ï¼Œå¹¶æŠ½è±¡æˆç‰¹å¾å‘é‡åŠ ä»¥æè¿°ï¼Œæœ€åç”¨äºå›¾åƒç‰¹å¾ç‚¹çš„åŒ¹é…ã€‚SIFTç‰¹å¾å¯¹ç°åº¦ã€å¯¹æ¯”åº¦å˜æ¢ã€æ—‹è½¬ã€å°ºåº¦ç¼©æ”¾ç­‰ä¿æŒä¸å˜æ€§ï¼Œå¯¹è§†è§’å˜åŒ–ã€ä»¿å°„å˜åŒ–ã€å™ªå£°ä¹Ÿå…·æœ‰ä¸€å®šçš„é²æ£’æ€§ã€‚ä½†å…¶å®æ—¶æ€§ä¸é«˜ï¼Œå¯¹è¾¹ç¼˜å…‰æ»‘çš„ç›®æ ‡æ— æ³•å‡†ç¡®æå–ç‰¹å¾ç‚¹ã€‚</p><h1 id="åŸæ–‡é“¾æ¥"><a href="#åŸæ–‡é“¾æ¥" class="headerlink" title="åŸæ–‡é“¾æ¥"></a>åŸæ–‡é“¾æ¥</h1><p><a href="https://senitco.github.io/2017/06/24/image-feature-sift/">å›¾åƒç‰¹å¾ä¹‹SIFTç‰¹å¾åŒ¹é…</a></p><h1 id="reference"><a href="#reference" class="headerlink" title="reference"></a><a href="#reference" title="reference"></a>reference</h1><ul><li><a href="http://www.cs.ubc.ca/~lowe/papers/ijcv04.pdf">Paper: Distinctive Image Features from Scale-Invariant Keypoints</a></li><li><a href="http://cgit.nutn.edu.tw:8080/cgit/PaperDL/iccv99.pdf">Paper: Object Recognition from Local Scale-Invariant Features</a></li><li><a href="https://people.cs.umass.edu/~elm/Teaching/ppt/SIFT.pdf">PPT: Object Recognition from Local Scale-Invariant Features (SIFT)</a></li><li><a href="https://github.com/robwhess/opensift">Code: RobHess OpenSIFT</a></li><li><a href="http://blog.csdn.net/abcjennifer/article/details/7639681">http://blog.csdn.net/abcjennifer/article/details/7639681</a></li><li><a href="http://blog.csdn.net/zddblog/article/details/7521424">http://blog.csdn.net/zddblog/article/details/7521424</a></li><li><a href="http://www.sun11.me/blog/2016/sift-implementation-in-matlab/">http://www.sun11.me/blog/2016/sift-implementation-in-matlab/</a></li><li><a href="http://masikkk.com/article/RobHess-SIFT-Source-Code-Analysis-Overview/">http://masikkk.com/article/RobHess-SIFT-Source-Code-Analysis-Overview/</a></li><li><a href="http://masikkk.com/article/RANSAC-SIFT-Image-Match/">http://masikkk.com/article/RANSAC-SIFT-Image-Match/</a></li><li><a href="http://www.cnblogs.com/letben/p/5510976.html">http://www.cnblogs.com/letben/p/5510976.html</a></li><li><a href="http://blog.csdn.net/fzthao/article/details/62424271">http://blog.csdn.net/fzthao/article/details/62424271</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å›¾åƒç‰¹å¾æå– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾åƒç‰¹å¾æå– </tag>
            
            <tag> Haar </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾åƒç‰¹å¾æå–ä¹‹Haarç‰¹å¾</title>
      <link href="/2023/12/20/tu-xiang-te-zheng-ti-qu-zhi-haar-te-zheng/"/>
      <url>/2023/12/20/tu-xiang-te-zheng-ti-qu-zhi-haar-te-zheng/</url>
      
        <content type="html"><![CDATA[<p>â€ƒâ€ƒè§’ç‚¹æ£€æµ‹(Corner Detection)ä¹Ÿç§°ä¸ºç‰¹å¾ç‚¹æ£€æµ‹ï¼Œæ˜¯å›¾åƒå¤„ç†å’Œè®¡ç®—æœºè§†è§‰ä¸­ç”¨æ¥è·å–å›¾åƒå±€éƒ¨ç‰¹å¾ç‚¹çš„ä¸€ç±»æ–¹æ³•ï¼Œå¹¿æ³›åº”ç”¨äºè¿åŠ¨æ£€æµ‹ã€å›¾åƒåŒ¹é…ã€è§†é¢‘è·Ÿè¸ªã€ä¸‰ç»´å»ºæ¨¡ä»¥åŠç›®æ ‡è¯†åˆ«ç­‰é¢†åŸŸä¸­ã€‚  </p><h1 id="å±€éƒ¨ç‰¹å¾"><a href="#å±€éƒ¨ç‰¹å¾" class="headerlink" title="å±€éƒ¨ç‰¹å¾"></a>å±€éƒ¨ç‰¹å¾</h1><p>â€ƒâ€ƒä¸åŒäºHOGã€LBPã€Haarç­‰åŸºäºåŒºåŸŸ(Region)çš„å›¾åƒå±€éƒ¨ç‰¹å¾ï¼ŒHarrisæ˜¯åŸºäºè§’ç‚¹çš„ç‰¹å¾æè¿°å­ï¼Œå±äºfeature detectorï¼Œä¸»è¦ç”¨äºå›¾åƒç‰¹å¾ç‚¹çš„åŒ¹é…(match)ï¼Œåœ¨SIFTç®—æ³•ä¸­å°±æœ‰ç”¨åˆ°æ­¤ç±»è§’ç‚¹ç‰¹å¾ï¼›è€ŒHOGã€LBPã€Haarç­‰åˆ™æ˜¯é€šè¿‡æå–å›¾åƒçš„å±€éƒ¨çº¹ç†ç‰¹å¾(feature extraction)ï¼Œç”¨äºç›®æ ‡çš„æ£€æµ‹å’Œè¯†åˆ«ç­‰é¢†åŸŸã€‚æ— è®ºæ˜¯HOGã€Haarç‰¹å¾è¿˜æ˜¯Harrisè§’ç‚¹éƒ½å±äºå›¾åƒçš„å±€éƒ¨ç‰¹å¾ï¼Œæ»¡è¶³å±€éƒ¨ç‰¹å¾çš„ä¸€äº›ç‰¹æ€§ã€‚ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li><strong>å¯é‡å¤æ€§(Repeatability)</strong> ï¼šåŒä¸€ä¸ªç‰¹å¾å¯ä»¥å‡ºç°åœ¨ä¸åŒçš„å›¾åƒä¸­ï¼Œè¿™äº›å›¾åƒå¯ä»¥åœ¨ä¸åŒçš„å‡ ä½•æˆ–å…‰å­¦ç¯å¢ƒä¸‹æˆåƒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒä¸€ç‰©ä½“åœ¨ä¸åŒçš„ç¯å¢ƒä¸‹æˆåƒ(ä¸åŒæ—¶é—´ã€ä¸åŒè§’åº¦ã€ä¸åŒç›¸æœºç­‰)ï¼Œèƒ½å¤Ÿæ£€æµ‹åˆ°åŒæ ·çš„ç‰¹å¾ã€‚</li><li><strong>ç‹¬ç‰¹æ€§(Saliency)</strong> ï¼šç‰¹å¾åœ¨æŸä¸€ç‰¹å®šç›®æ ‡ä¸Šè¡¨ç°ä¸ºç‹¬ç‰¹æ€§ï¼Œèƒ½å¤Ÿä¸åœºæ™¯ä¸­å…¶ä»–ç‰©ä½“ç›¸åŒºåˆ†ï¼Œèƒ½å¤Ÿè¾¾åˆ°åç»­åŒ¹é…æˆ–è¯†åˆ«çš„ç›®çš„ã€‚</li><li><strong>å±€éƒ¨æ€§(Locality)</strong> : ç‰¹å¾èƒ½å¤Ÿåˆ»ç”»å›¾åƒçš„å±€éƒ¨ç‰¹æ€§ï¼Œè€Œä¸”å¯¹ç¯å¢ƒå½±å“å› å­(å…‰ç…§ã€å™ªå£°ç­‰)é²æ£’ã€‚</li><li>**ç´§è‡´æ€§å’Œæœ‰æ•ˆæ€§(Compactness and efficiency)**ï¼›ç‰¹å¾èƒ½å¤Ÿæœ‰æ•ˆåœ°è¡¨è¾¾å›¾åƒä¿¡æ¯ï¼Œè€Œä¸”åœ¨å®é™…åº”ç”¨ä¸­è¿ç®—è¦å°½å¯èƒ½åœ°å¿«ã€‚</li></ul><p>ç›¸æ¯”äºè€ƒè™‘å±€éƒ¨é‚»åŸŸèŒƒå›´çš„å±€éƒ¨ç‰¹å¾ï¼Œå…¨å±€ç‰¹å¾åˆ™æ˜¯ä»æ•´ä¸ªå›¾åƒä¸­æŠ½å–ç‰¹å¾ï¼Œè¾ƒå¤šåœ°è¿ç”¨åœ¨å›¾åƒæ£€ç´¢é¢†åŸŸï¼Œä¾‹å¦‚å›¾åƒçš„é¢œè‰²ç›´æ–¹å›¾ã€‚<br>é™¤äº†ä»¥ä¸Šå‡ ç‚¹é€šç”¨çš„ç‰¹æ€§å¤–ï¼Œå¯¹äºä¸€äº›å›¾åƒåŒ¹é…ã€æ£€æµ‹è¯†åˆ«ç­‰ä»»åŠ¡ï¼Œå¯èƒ½è¿˜éœ€è¿›ä¸€æ­¥è€ƒè™‘å›¾åƒçš„å±€éƒ¨ä¸å˜ç‰¹å¾ã€‚ä¾‹å¦‚ <strong>å°ºåº¦ä¸å˜æ€§(Scale invariance)</strong> å’Œ <strong>æ—‹è½¬ä¸å˜æ€§(Rotation invariance)</strong> ï¼Œå½“å›¾åƒä¸­çš„ç‰©ä½“æˆ–ç›®æ ‡å‘ç”Ÿæ—‹è½¬æˆ–è€…å°ºåº¦å‘ç”Ÿå˜æ¢ï¼Œä¾ç„¶å¯ä»¥æœ‰æ•ˆåœ°æ£€æµ‹æˆ–è¯†åˆ«ã€‚æ­¤å¤–ï¼Œä¹Ÿä¼šè€ƒè™‘å±€éƒ¨ç‰¹å¾å¯¹å…‰ç…§ã€é˜´å½±çš„ä¸å˜æ€§ã€‚</p><h1 id="Harrisè§’ç‚¹æ£€æµ‹"><a href="#Harrisè§’ç‚¹æ£€æµ‹" class="headerlink" title="Harrisè§’ç‚¹æ£€æµ‹"></a>Harrisè§’ç‚¹æ£€æµ‹</h1><p>â€ƒâ€ƒç‰¹å¾ç‚¹åœ¨å›¾åƒä¸­ä¸€èˆ¬æœ‰å…·ä½“çš„åæ ‡ï¼Œå¹¶å…·æœ‰æŸäº›æ•°å­¦ç‰¹å¾ï¼Œå¦‚å±€éƒ¨æœ€å¤§æˆ–æœ€å°ç°åº¦ã€ä»¥åŠæŸäº›æ¢¯åº¦ç‰¹å¾ç­‰ã€‚è§’ç‚¹å¯ä»¥ç®€å•çš„è®¤ä¸ºæ˜¯ä¸¤æ¡è¾¹çš„äº¤ç‚¹ï¼Œæ¯”è¾ƒä¸¥æ ¼çš„å®šä¹‰åˆ™æ˜¯åœ¨é‚»åŸŸå†…å…·æœ‰ä¸¤ä¸ªä¸»æ–¹å‘çš„ç‰¹å¾ç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šç°åº¦å˜åŒ–å‰§çƒˆã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨å„ä¸ªæ–¹å‘ä¸Šç§»åŠ¨å°çª—å£ï¼Œ<strong>å¦‚æœåœ¨æ‰€æœ‰æ–¹å‘ä¸Šç§»åŠ¨ï¼Œçª—å£å†…ç°åº¦éƒ½å‘ç”Ÿå˜åŒ–ï¼Œåˆ™è®¤ä¸ºæ˜¯è§’ç‚¹ï¼›å¦‚æœä»»ä½•æ–¹å‘éƒ½ä¸å˜åŒ–ï¼Œåˆ™æ˜¯å‡åŒ€åŒºåŸŸï¼›å¦‚æœç°åº¦åªåœ¨ä¸€ä¸ªæ–¹å‘ä¸Šå˜åŒ–ï¼Œåˆ™å¯èƒ½æ˜¯å›¾åƒè¾¹ç¼˜</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96%E4%B9%8BHaar%E7%89%B9%E5%BE%81/5953a445031a0.jpg"></p><p>â€ƒâ€ƒå¯¹äºç»™å®šå›¾åƒ$I(x,y)$å’Œå›ºå®šå°ºå¯¸çš„é‚»åŸŸçª—å£ï¼Œè®¡ç®—çª—å£å¹³ç§»å‰åå„ä¸ªåƒç´ å·®å€¼çš„å¹³æ–¹å’Œï¼Œä¹Ÿå°±æ˜¯è‡ªç›¸å…³å‡½æ•°<br>$$<br>E(u,v)&#x3D;\Sigma_x \Sigma_y w(x,y) [I(x+u,y+v)-I(x,y)]^2<br>$$<br>å…¶ä¸­ï¼Œçª—å£åŠ æƒå‡½æ•°$w(x,y)$å¯å–å‡å€¼å‡½æ•°æˆ–è€…é«˜æ–¯å‡½æ•°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96%E4%B9%8BHaar%E7%89%B9%E5%BE%81/5953a7fa5a172.jpg"></p><p>æ ¹æ®æ³°å‹’å±•å¼€ï¼Œå¯å¾—åˆ°çª—å£å¹³ç§»åå›¾åƒçš„ä¸€é˜¶è¿‘ä¼¼<br>$$I(x+u,y+v) \approx I(x,y)+I_x(x,y)u+I_y(x,y)v$$<br>å› æ­¤$E(u, v)$å¯åŒ–ä¸º<br>$$E(u,v) \approx \Sigma_{x,y}w(x,y)[I_x(x,y)u+I_y(x,y)v]^2&#x3D;[u,v] M(x,y) \begin{bmatrix} u \\ v \end{bmatrix} $$  </p><p>$$M(x,y)&#x3D;\Sigma_w \begin{bmatrix} I_x^2&amp; I_xI_y \\ I_xI_y &amp; I_y^2\end{bmatrix} &#x3D; \begin{bmatrix} A&amp; C\\ C&amp; B\end{bmatrix}$$  </p><p>$E(u,v)$å¯è¡¨ç¤ºä¸ºä¸€ä¸ªäºŒæ¬¡é¡¹å‡½æ•° </p><p>$$E(u,v)&#x3D;Au^2+2Cuv+Bv^2$$  </p><p>å…¶ä¸­$A&#x3D;\Sigma_w I_x^2, B &#x3D; \Sigma_w I_y^2, C&#x3D;\Sigma_w I_x I_y$</p><p>äºŒæ¬¡é¡¹å‡½æ•°æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ¤­åœ†å‡½æ•°ï¼Œæ¤­åœ†çš„æ›²ç‡å’Œå°ºå¯¸å¯ç”±$M(x,y)$çš„ç‰¹å¾å€¼$\lambda_1,\lambda_2$å†³å®šï¼Œæ¤­åœ†æ–¹å‘ç”±$M(x,y)$çš„ç‰¹å¾å‘é‡å†³å®šï¼Œæ¤­åœ†æ–¹ç¨‹å’Œå…¶å›¾å½¢åˆ†åˆ«å¦‚ä¸‹æ‰€ç¤ºï¼š<br>$$\begin{bmatrix}u &amp; v\end{bmatrix} M(x,y) \begin{bmatrix} u\\ v \end{bmatrix} &#x3D; 1$$</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96%E4%B9%8BHaar%E7%89%B9%E5%BE%81/5953af7c8c289.png"></p><p>è€ƒè™‘è§’ç‚¹çš„è¾¹ç•Œå’Œåæ ‡è½´å¯¹é½çš„æƒ…å†µï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨å¹³ç§»çª—å£å†…ï¼Œåªæœ‰ä¸Šä¾§å’Œå·¦ä¾§è¾¹ç¼˜ï¼Œä¸Šè¾¹ç¼˜$I_y$å¾ˆå¤§è€Œ$I_x$å¾ˆå°ï¼Œå·¦è¾¹ç¼˜$I_x$å¾ˆå¤§è€Œ$I_y$å¾ˆå°ï¼Œæ‰€ä»¥çŸ©é˜µ$M$å¯åŒ–ç®€ä¸º<br>$$M&#x3D;\begin{bmatrix} \lambda_1&amp; 0\\ 0&amp; \lambda_2\end{bmatrix}$$</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96%E4%B9%8BHaar%E7%89%B9%E5%BE%81/5953b0d8c854c.jpg"></p><p>å½“è§’ç‚¹è¾¹ç•Œå’Œåæ ‡è½´æ²¡æœ‰å¯¹é½æ—¶ï¼Œå¯å¯¹è§’ç‚¹è¿›è¡Œæ—‹è½¬å˜æ¢ï¼Œå°†å…¶å˜æ¢åˆ°ä¸åæ ‡è½´å¯¹é½ï¼Œè¿™ç§æ—‹è½¬æ“ä½œå¯ç”¨çŸ©é˜µçš„ç›¸ä¼¼å¯¹è§’åŒ–æ¥è¡¨ç¤ºï¼Œå³<br>$$M&#x3D;X\Sigma X^T &#x3D; X \begin{bmatrix} \lambda_1&amp; 0\\ 0&amp; \lambda_2\end{bmatrix} X^T$$<br>$$Mx_i&#x3D;\lambda_i x_i$$</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96%E4%B9%8BHaar%E7%89%B9%E5%BE%81/5953b0d8e3d2d.jpg"></p><p>â€ƒâ€ƒå¯¹äºçŸ©é˜µ$M$ï¼Œå¯ä»¥å°†å…¶å’Œåæ–¹å·®çŸ©é˜µç±»æ¯”ï¼Œåæ–¹å·®è¡¨ç¤ºå¤šç»´éšæœºå˜é‡ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œåæ–¹å·®çŸ©é˜µå¯¹è§’çº¿çš„å…ƒç´ è¡¨ç¤ºçš„æ˜¯å„ä¸ªç»´åº¦çš„æ–¹å·®ï¼Œè€Œéå¯¹è§’çº¿ä¸Šçš„å…ƒç´ è¡¨ç¤ºçš„æ˜¯å„ä¸ªç»´åº¦ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œåœ¨PCA(ä¸»æˆåˆ†åˆ†æ)ä¸­ï¼Œå°†åæ–¹å·®çŸ©é˜µå¯¹è§’åŒ–ï¼Œä½¿ä¸åŒç»´åº¦çš„ç›¸å…³æ€§å°½å¯èƒ½çš„å°ï¼Œå¹¶å–ç‰¹å¾å€¼è¾ƒå¤§çš„ç»´åº¦ï¼Œæ¥è¾¾åˆ°é™ç»´çš„ç›®çš„ã€‚ç±»ä¼¼çš„ï¼Œå¯ä»¥å°†çŸ©é˜µ$M$çœ‹æˆæ˜¯ä¸€ä¸ªäºŒç»´éšæœºåˆ†å¸ƒçš„åæ–¹å·®çŸ©é˜µï¼Œé€šè¿‡å°†å…¶å¯¹è§’åŒ–ï¼Œæ±‚å–çŸ©é˜µçš„ä¸¤ä¸ªç‰¹å¾å€¼ï¼Œå¹¶æ ¹æ®è¿™ä¸¤ä¸ªç‰¹å¾å€¼æ¥åˆ¤æ–­è§’ç‚¹ã€‚</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ <strong>å¯æ ¹æ®çŸ©é˜µ$M$çš„ç‰¹å¾å€¼æ¥åˆ¤æ–­æ˜¯å¦ä¸ºè§’ç‚¹ï¼Œå½“ä¸¤ä¸ªç‰¹å¾å€¼éƒ½è¾ƒå¤§æ—¶ä¸ºè§’ç‚¹(corne)ï¼Œä¸€ä¸ªç‰¹å¾å€¼è¾ƒå¤§è€Œå¦ä¸€ä¸ªè¾ƒå°æ—¶åˆ™ä¸ºå›¾åƒè¾¹ç¼˜(edge)ï¼Œä¸¤ä¸ªç‰¹å¾å€¼éƒ½è¾ƒå°æ—¶ä¸ºå‡åŒ€åŒºåŸŸ(flat)ã€‚</strong></p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96%E4%B9%8BHaar%E7%89%B9%E5%BE%81/5953b3774c2f2.png"></p><p>åœ¨åˆ¤æ–­è§’ç‚¹æ—¶ï¼Œæ— éœ€å…·ä½“è®¡ç®—çŸ©é˜µ$M$çš„ç‰¹å¾å€¼ï¼Œè€Œä½¿ç”¨ä¸‹å¼è¿‘ä¼¼è®¡ç®—è§’ç‚¹å“åº”å€¼ã€‚<br>$$R &#x3D; detM-\alpha (traceM)^2$$<br>$$detM&#x3D;\lambda_1 \lambda_2&#x3D;AB-C^2$$<br>$$traceM&#x3D;\lambda_1 + \lambda_2 &#x3D; A+B$$<br>å¼ä¸­ï¼Œ$detM$ä¸ºçŸ©é˜µ$M$çš„è¡Œåˆ—å¼ï¼Œ$traceM$ä¸ºçŸ©é˜µ$M$çš„è¿¹ï¼Œ$\alpha$ä¸ºä¸€å¸¸æ•°ï¼Œé€šå¸¸å–å€¼ä¸º0.04~0.06ã€‚</p><h1 id="ç®—æ³•å®ç°"><a href="#ç®—æ³•å®ç°" class="headerlink" title="ç®—æ³•å®ç°"></a>ç®—æ³•å®ç°</h1><p>Harrisè§’ç‚¹æ£€æµ‹çš„ç®—æ³•æ­¥éª¤å½’çº³å¦‚ä¸‹ï¼š</p><ul><li><p>è®¡ç®—å›¾åƒ$I(x,y)$åœ¨$X$æ–¹å‘å’Œ$Y$æ–¹å‘çš„æ¢¯åº¦  </p><p>$$I_x&#x3D;\dfrac {\partial I} {\partial x}&#x3D;I(x,y)\otimes \begin{bmatrix} -1&amp; 0&amp; 1\end{bmatrix}$$</p><p>$$I_y&#x3D;\dfrac {\partial I} {\partial y}&#x3D;I(x,y)\otimes \begin{bmatrix} -1&amp; 0&amp; 1\end{bmatrix} ^T$$</p></li><li><p>è®¡ç®—å›¾åƒä¸¤ä¸ªæ–¹å‘æ¢¯åº¦çš„ä¹˜ç§¯$I_x^2ã€I_y^2ã€I_x I_y$</p></li><li><p>ä½¿ç”¨çª—å£é«˜æ–¯å‡½æ•°åˆ†åˆ«å¯¹$I_x^2ã€I_y^2ã€I_x I_y$è¿›è¡Œé«˜æ–¯åŠ æƒï¼Œç”ŸæˆçŸ©é˜µ$M$ã€‚</p></li><li><p>è®¡ç®—æ¯ä¸ªåƒç´ çš„Harriså“åº”å€¼$R$ï¼Œå¹¶è®¾å®šä¸€é˜ˆå€¼$T$ï¼Œå¯¹å°äºé˜ˆå€¼$T$çš„$R$ç½®é›¶ã€‚</p></li><li><p>åœ¨ä¸€ä¸ªå›ºå®šçª—å£å¤§å°çš„é‚»åŸŸå†…($5 \times 5$)è¿›è¡Œéæå¤§å€¼æŠ‘åˆ¶ï¼Œå±€éƒ¨æå¤§å€¼ç‚¹å³ä¸ºå›¾åƒä¸­çš„è§’ç‚¹ã€‚</p></li></ul><h1 id="Harrisè§’ç‚¹æ€§è´¨"><a href="#Harrisè§’ç‚¹æ€§è´¨" class="headerlink" title="Harrisè§’ç‚¹æ€§è´¨"></a>Harrisè§’ç‚¹æ€§è´¨</h1><ul><li>å‚æ•°$\alpha$å¯¹è§’ç‚¹æ£€æµ‹çš„å½±å“ï¼šå¢å¤§$\alpha$çš„å€¼ï¼Œå°†å‡å°è§’ç‚¹å“åº”å€¼$R$ï¼Œå‡å°‘è¢«æ£€æµ‹è§’ç‚¹çš„æ•°é‡ï¼›å‡å°$\alpha$çš„å€¼ï¼Œå°†å¢å¤§è§’ç‚¹å“åº”å€¼$R$ï¼Œå¢åŠ è¢«æ£€æµ‹è§’ç‚¹çš„æ•°é‡ã€‚  </li><li>Harrisè§’ç‚¹æ£€æµ‹å¯¹äº®åº¦å’Œå¯¹æ¯”åº¦çš„å˜åŒ–ä¸æ•æ„Ÿã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96%E4%B9%8BHaar%E7%89%B9%E5%BE%81/5953bb60bb814.jpg"></p><ul><li>Harrisè§’ç‚¹æ£€æµ‹å…·æœ‰æ—‹è½¬ä¸å˜æ€§ï¼Œä½†ä¸å…·å¤‡å°ºåº¦ä¸å˜æ€§ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨å°å°ºåº¦ä¸‹çš„è§’ç‚¹è¢«æ”¾å¤§åå¯èƒ½ä¼šè¢«è®¤ä¸ºæ˜¯å›¾åƒè¾¹ç¼˜ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96%E4%B9%8BHaar%E7%89%B9%E5%BE%81/5953bb317b0b6.png"></p><p>Harrisè§’ç‚¹æ£€æµ‹çš„ç»“æœç¤ºæ„å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96%E4%B9%8BHaar%E7%89%B9%E5%BE%81/5953bc1427011.jpg"></p><h1 id="å¤šå°ºåº¦Harrisè§’ç‚¹æ£€æµ‹"><a href="#å¤šå°ºåº¦Harrisè§’ç‚¹æ£€æµ‹" class="headerlink" title="å¤šå°ºåº¦Harrisè§’ç‚¹æ£€æµ‹"></a>å¤šå°ºåº¦Harrisè§’ç‚¹æ£€æµ‹</h1><p>â€ƒâ€ƒHarrisè§’ç‚¹å…·æœ‰ç°åº¦ä¸å˜æ€§å’Œæ—‹è½¬ä¸å˜æ€§ï¼Œä½†ä¸å…·å¤‡å°ºåº¦ä¸å˜æ€§ï¼Œè€Œå°ºåº¦ä¸å˜æ€§å¯¹äºå›¾åƒçš„å±€éƒ¨ç‰¹å¾æ¥è¯´è‡³å…³é‡è¦ã€‚å°†Harrisè§’ç‚¹æ£€æµ‹ç®—å­å’Œé«˜æ–¯å°ºåº¦ç©ºé—´è¡¨ç¤ºç›¸ç»“åˆï¼Œå¯æœ‰æ•ˆè§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä¸Harrisè§’ç‚¹æ£€æµ‹ä¸­çš„äºŒé˜¶çŸ©è¡¨ç¤ºç±»ä¼¼ï¼Œå®šä¹‰ä¸€ä¸ªå°ºåº¦è‡ªé€‚åº”çš„äºŒé˜¶çŸ©<br>$$M&#x3D;\mu (x,y,\sigma_I, \sigma_D)&#x3D;\sigma_D^2g(\sigma_I) \otimes \begin{bmatrix} L_x^2(x,y,\sigma_D)&amp; L_xL_y(x,y,\sigma_D)\\ L_xL_y(x,y,\sigma_D)&amp; L_y^2(x,y,\sigma_D)\end{bmatrix}$$<br>å¼ä¸­ï¼Œ$g(\sigma_I)$è¡¨ç¤ºå°ºåº¦ä¸º$\sigma_I$çš„é«˜æ–¯å·ç§¯æ ¸ï¼Œ$L_x(x,y,\sigma_D)$å’Œ$L_y(x,y,\sigma_D)$è¡¨ç¤ºå¯¹å›¾åƒä½¿ç”¨é«˜æ–¯å‡½æ•°$g(\sigma_D)$è¿›è¡Œå¹³æ»‘åå–å¾®åˆ†çš„ç»“æœã€‚$\sigma_I$é€šå¸¸ç§°ä¸ºç§¯åˆ†å°ºåº¦ï¼Œæ˜¯å†³å®šHarrisè§’ç‚¹å½“å‰å°ºåº¦çš„å˜é‡ï¼Œ$\sigma_D$ä¸ºå¾®åˆ†å°ºåº¦ï¼Œæ˜¯å†³å®šè§’ç‚¹é™„è¿‘å¾®åˆ†å€¼å˜åŒ–çš„å˜é‡ï¼Œé€šå¸¸$\sigma_I$åº”å¤§äº$\sigma_D$ã€‚<br>ç®—æ³•æµç¨‹ï¼š</p><ul><li>ç¡®å®šå°ºåº¦ç©ºé—´çš„ä¸€ç»„å–å€¼$\sigma_I&#x3D;(\sigma_0, \sigma_1, \sigma_2,â€¦, \sigma_n)&#x3D;(\sigma, k\sigma, k^2\sigma,â€¦, k^n\sigma), \sigma_D&#x3D;s\sigma_I$</li><li>å¯¹äºç»™å®šçš„å°ºåº¦ç©ºé—´å€¼$\sigma_D$ï¼Œè¿›è¡Œè§’ç‚¹å“åº”å€¼çš„è®¡ç®—å’Œåˆ¤æ–­ï¼Œå¹¶åšéæå¤§å€¼æŠ‘åˆ¶å¤„ç†</li><li>åœ¨ä½ç½®ç©ºé—´æœç´¢å€™é€‰è§’ç‚¹åï¼Œè¿˜éœ€åœ¨å°ºåº¦ç©ºé—´ä¸Šè¿›è¡Œæœç´¢ï¼Œè®¡ç®—å€™é€‰ç‚¹çš„æ‹‰æ™®æ‹‰æ–¯å“åº”å€¼ï¼Œå¹¶äºç»™å®šé˜ˆå€¼ä½œæ¯”è¾ƒ<br>$$F(x,y,\sigma_n)&#x3D;\sigma_n^2|L_{xx}(x,y,\sigma_n)+L_{yy}(x,y,\sigma_n)| \geq threshold$$</li><li>å°†å“åº”å€¼$F$ä¸é‚»è¿‘çš„ä¸¤ä¸ªå°ºåº¦ç©ºé—´çš„æ‹‰æ™®æ‹‰æ–¯å“åº”å€¼è¿›è¡Œæ¯”è¾ƒï¼Œä½¿å…¶æ»¡è¶³<br>$$F(x,y,\sigma_n) &gt; F(x,y,\sigma_l),â€ƒl&#x3D;n-1, n+1$$</li></ul><p>è¿™æ ·æ—¢å¯ç¡®å®šåœ¨ä½ç½®ç©ºé—´å’Œå°ºåº¦ç©ºé—´å‡æ»¡è¶³æ¡ä»¶çš„Harrisè§’ç‚¹ã€‚</p><h1 id="åŸæ–‡é“¾æ¥"><a href="#åŸæ–‡é“¾æ¥" class="headerlink" title="åŸæ–‡é“¾æ¥"></a>åŸæ–‡é“¾æ¥</h1><p><a href="https://senitco.github.io/2017/06/18/image-feature-harris/">å›¾åƒç‰¹å¾ä¹‹Harrisè§’ç‚¹æ£€æµ‹</a></p><h1 id="reference"><a href="#reference" class="headerlink" title="reference"></a>reference</h1><ul><li><a href="http://www.bmva.org/bmvc/1988/avc-88-023.pdf">Paper: A COMBINED CORNER AND EDGE DETECTOR</a></li><li><a href="https://www.robots.ox.ac.uk/~vgg/research/affine/det_eval_files/mikolajczyk_ijcv2004.pdf">Paper: Scale &amp; Affine Invariant Interest Point Detectors</a></li><li><a href="https://github.com/ronnyyoung/ImageFeatures">Code: Harris Detector</a></li><li><a href="http://www.cnblogs.com/ronny/p/4009425.html">http://www.cnblogs.com/ronny/p/4009425.html</a></li><li><a href="http://www.cnblogs.com/ronny/p/3886013.html">http://www.cnblogs.com/ronny/p/3886013.html</a></li><li><a href="https://xmfbit.github.io/2017/01/25/cs131-finding-features/">https://xmfbit.github.io/2017/01/25/cs131-finding-features/</a></li><li><a href="http://www.voidcn.com/blog/app_12062011/article/p-6071346.html">http://www.voidcn.com/blog/app_12062011&#x2F;article&#x2F;p-6071346.html</a></li><li><a href="http://blog.csdn.net/jwh_bupt/article/details/7628665">http://blog.csdn.net/jwh_bupt&#x2F;article&#x2F;details&#x2F;7628665</a></li><li><a href="http://www.cnblogs.com/ztfei/archive/2012/05/07/2487123.html">http://www.cnblogs.com/ztfei/archive/2012/05/07/2487123.html</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å›¾åƒç‰¹å¾æå– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾åƒç‰¹å¾æå– </tag>
            
            <tag> Haar </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­—ç¬¦ä¸²æ’åºç®—æ³•KMP</title>
      <link href="/2023/12/20/zi-fu-chuan-pai-xu-suan-fa-kmp/"/>
      <url>/2023/12/20/zi-fu-chuan-pai-xu-suan-fa-kmp/</url>
      
        <content type="html"><![CDATA[<h2 id="KMPç®—æ³•"><a href="#KMPç®—æ³•" class="headerlink" title="KMPç®—æ³•"></a><a href="#KMP%E7%AE%97%E6%B3%95" title="KMPç®—æ³•"></a>KMPç®—æ³•</h2><h2 id="ä¸²"><a href="#ä¸²" class="headerlink" title="ä¸²"></a><a href="#%E4%B8%B2" title="ä¸²"></a>ä¸²</h2><p>å­—ç¬¦ä¸²æ˜¯ä¸€ç§<strong>ç‰¹æ®Šçš„çº¿æ€§è¡¨</strong>, å…¶é€»è¾‘ç»“æ„ä¸çº¿æ€§è¡¨ç›¸åŒ, åªæ˜¯åœ¨æ•°æ®ç±»å‹ä¸Šè¿›è¡Œäº†çº¦æŸ, è¦æ±‚å…ƒç´ å…¨æ˜¯å­—ç¬¦ç±»å‹. ä¸²å¯ä»¥é¡ºåºå­˜å‚¨, é“¾å¼å­˜å‚¨, æˆ–è€…å †å­˜å‚¨. å †ç»“åˆäº†é¡ºåºå’Œé“¾å¼çš„ä¼˜ç‚¹, å®é™…åœ¨æ„é€ ä¸²ä¹Ÿæ˜¯é‡‡ç”¨çš„å †ç»“æ„æ¥å­˜å‚¨, èƒ½å¤Ÿæ–¹ä¾¿åŠ¨æ€æ‰©å±•.</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95KMP/%E4%B8%B21.jpg"></p><p>æ–¹ä¾¿ç†è§£å¯ä»¥ä½¿ç”¨é¡ºåºå­˜å‚¨.</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// ä¸²çš„å®šä¹‰</span><span class="token comment">//typedef struct&#123;</span><span class="token comment">//    char str[maxSize+1];</span><span class="token comment">//    int length; </span><span class="token comment">//&#125;Str;</span><span class="token comment">// æˆ–è€…</span><span class="token keyword">typedef</span> <span class="token keyword">struct</span><span class="token punctuation">&#123;</span>    <span class="token keyword">char</span> <span class="token operator">*</span>ch<span class="token punctuation">;</span>    <span class="token keyword">int</span> length<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>Str<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å­—ç¬¦ä¸²ä»¥<code>&#39;\0&#39;</code>ä½œä¸º<strong>ç»“æŸæ ‡è®°</strong>. ä¸²çš„åŸºæœ¬æ“ä½œæœ‰èµ‹å€¼, å–ä¸²é•¿, ä¸²æ¯”è¾ƒ, æ±‚å­ä¸², ä¸²æ¸…ç©º, ä¸²è¿æ¥ç­‰. åœ¨å®ç°èµ·æ¥æ²¡æœ‰å¤šå¤§éš¾åº¦, å°±ç¨å¾®æ³¨æ„ä¸€ä¸‹ç»“æŸæ ‡è®°çš„å¤„ç†å³å¯.</p><h2 id="å­—ç¬¦ä¸²åŒ¹é…"><a href="#å­—ç¬¦ä¸²åŒ¹é…" class="headerlink" title="å­—ç¬¦ä¸²åŒ¹é…"></a><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8C%B9%E9%85%8D" title="å­—ç¬¦ä¸²åŒ¹é…"></a>å­—ç¬¦ä¸²åŒ¹é…</h2><p>å¯¹ä¸€ä¸ªä¸²ä¸­çš„æŸå­ä¸²å®šä½æ“ä½œç§°ä¸ºä¸²çš„æ¨¡å¼åŒ¹é…, è€Œå…¶ä¸­ä¸ä¸»ä¸²è¿›è¡Œå¯¹æ¯”çš„å­ä¸²ç§°ä¸ºæ¨¡å¼ä¸². åœ¨å­—ç¬¦ä¸²ä¸­å¸¸ç”¨åˆ°å­—ç¬¦ä¸²åŒ¹é….</p><h3 id="ç®€å•æ¨¡å¼åŒ¹é…ç®—æ³•"><a href="#ç®€å•æ¨¡å¼åŒ¹é…ç®—æ³•" class="headerlink" title="ç®€å•æ¨¡å¼åŒ¹é…ç®—æ³•"></a><a href="#%E7%AE%80%E5%8D%95%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D%E7%AE%97%E6%B3%95" title="ç®€å•æ¨¡å¼åŒ¹é…ç®—æ³•"></a>ç®€å•æ¨¡å¼åŒ¹é…ç®—æ³•</h3><p>ç®€å•è€Œæœ´ç´ çš„åŒ¹é…ç®—æ³•, å°±æ˜¯å°†ä¸»ä¸²ä¸æ¨¡å¼ä¸²çš„å­—ç¬¦æŒ¨ä¸ªè¿›è¡Œæ¯”å¯¹, å¦‚æœç›¸åŒåˆ™é€ä¸€æ¯”å¯¹ä¸»ä¸²å’Œæ¨¡å¼ä¸²çš„ä¸‹ä¸€ä¸ªå…ƒç´ , å¦‚æœä¸åŒ, åˆ™ä»ä¸»ä¸²çš„ä¸‹ä¸€ä¸ªå…ƒç´ é‡å¤é€ä¸ªæ¯”å¯¹çš„è¿‡ç¨‹. å…¨éƒ¨ç›¸åŒåˆ™åŒ¹é…æˆåŠŸ, å¦åˆ™åŒ¹é…å¤±è´¥.</p><p>ä»£ç å®ç°å¦‚ä¸‹:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// ç®€å•æ¨¡å¼åŒ¹é…ç®—æ³•</span><span class="token comment">// å‡è®¾å­—ç¬¦ä¸²å‚¨å­˜åœ¨1 ~ lengthä¸Š </span><span class="token keyword">int</span> <span class="token function">index</span><span class="token punctuation">(</span>Str str<span class="token punctuation">,</span> Str substr<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> k <span class="token operator">=</span> i<span class="token punctuation">;</span>    <span class="token comment">// å…¶ä¸­iå’Œjåˆ†åˆ«ç”¨æ¥è¡¨ç¤ºä¸»ä¸²å’Œå­ä¸²çš„ä½ç½®, kç”¨æ¥æš‚å­˜ä¸»ä¸²è¢«æ¯”å¯¹çš„ä½ç½® </span>    <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> str<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> j <span class="token operator">&lt;=</span> substr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span>ch<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> substr<span class="token punctuation">.</span>ch<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token operator">++</span>i<span class="token punctuation">;</span>            <span class="token operator">++</span>j<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>         <span class="token keyword">else</span><span class="token punctuation">&#123;</span>            j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>            i <span class="token operator">=</span> <span class="token operator">++</span>k<span class="token punctuation">;</span> <span class="token comment">// åŒ¹é…å¤±è´¥ iä»ä¸»ä¸²ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹ </span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// åˆ°è¿™é‡Œæœ‰ä¸¤ç§å¯èƒ½æ€§ ä¸€ä¸ªæ˜¯åŸä¸²è¢«éå†å®Œäº† è¿˜æœ‰å°±æ˜¯å­ä¸²è¢«éå†å®Œäº† </span>    <span class="token comment">// å¦‚æœæ˜¯å­ä¸²éå†å®Œäº†è¯´æ˜åŒ¹é…æˆåŠŸ </span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">></span> substr<span class="token punctuation">.</span>length<span class="token punctuation">)</span>        <span class="token keyword">return</span> k<span class="token punctuation">;</span>    <span class="token keyword">else</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// å› ä¸ºå‡è®¾å­—ç¬¦ä¸²ä»ä¸‹æ ‡1å¼€å§‹, 0æ˜¯æ²¡æœ‰å­—ç¬¦çš„</span><span class="token punctuation">&#125;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ä¸ªç®€å•çš„ç®—æ³•å°±æ˜¯å•çº¯çš„æš´åŠ›åŒ¹é…, æ²¡æœ‰ä»»ä½•çš„é¢„å¤„ç†, å¦‚æœå­—ç¬¦ä¸²é•¿ä¸ºn, æ¨¡å¼ä¸²é•¿ä¸ºm, é‚£ä¹ˆ<strong>æœ€åæ—¶é—´å¤æ‚åº¦ä¸ºO((n-m+1)*m)</strong>. å³æ¯æ¬¡ä¸»ä¸²ä¸æ¨¡å¼ä¸²åŒ¹é…æ—¶æ€»èƒ½ä¸€ç›´æœç´¢åˆ°æ¨¡å¼ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦, å¹¶æœ€ååŒ¹é…æ²¡æœ‰æˆåŠŸ.</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95KMP/%E4%B8%B22.png"></p><h3 id="KMPç®—æ³•-1"><a href="#KMPç®—æ³•-1" class="headerlink" title="KMPç®—æ³•"></a><a href="#KMP%E7%AE%97%E6%B3%95-1" title="KMPç®—æ³•"></a>KMPç®—æ³•</h3><p>KMPç®—æ³•æ˜¯ä¸€ç§ç»å…¸çš„å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•, ç›¸è¾ƒäºå‰é¢æ‰€è¯´çš„ç®€å•å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•, åœ¨æ¯”è¾ƒé€Ÿåº¦ä¸Šæœ‰äº†ç›¸å½“å¤§çš„æå‡.</p><p>æ¥è§‚å¯Ÿä¸€ä¸ªé—®é¢˜, åœ¨ä¸‹è¿°ä¸²åŒ¹é…è¿‡ç¨‹ä¸­, å½“åœ¨ç®­å¤´æ‰€æŒ‡çš„ä½ç½®å‘ç”Ÿäº†å­—ç¬¦ä¸åŒ¹é…:</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95KMP/kmp1.jpg"></p><p>å¦‚æœæ˜¯ç®€å•å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•, é‚£ä¹ˆå¾ˆç®€å•, è¯´æ˜ä»¥ä¸»ä¸²ç¬¬ä¸€ä¸ªå…ƒç´ <code>A</code> ä¸ºèµ·å§‹çš„å­—ç¬¦ä¸²æ— æ³•ä¸æ¨¡å¼ä¸²ç›¸åŒ¹é…, å°†å›æº¯åˆ°ä¸»ä¸²ç¬¬äºŒä¸ªå…ƒç´ <code>B</code> ä¸æ¨¡å¼ä¸²ç¬¬ä¸€ä¸ªå…ƒç´ <code>A</code> è¿›è¡Œæ¯”è¾ƒ, ç„¶åç»§ç»­é€ä¸€æ¯”è¾ƒä¸‹å»â€¦</p><p>ç»§ç»­è§‚å¯Ÿå¦‚ä½•æ‰èƒ½ä½¿å¾—æ¨¡å¼ä¸²æŒ‡é’ˆç›´æ¥ç§»åŠ¨åˆ°å†æ¬¡èƒ½å¤Ÿä¸ç®­å¤´æ‰€æŒ‡çš„ä¸»ä¸²å­—ç¬¦<code>B</code> ä¸æ¨¡å¼ä¸²ç›¸æ¯”è¾ƒçš„ä½ç½®:</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95KMP/kmp2.jpg"></p><p>ç”±äºä¸»ä¸²ç¬¬äºŒä¸ªå­—ç¬¦æ˜¯<code>B</code>, æ¨¡å¼ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯<code>A</code>, å‘ç”Ÿä¸åŒ¹é…, ä¸»ä¸²æŒ‡é’ˆä¸‹ç§», ä¸»ä¸²çš„ç¬¬ä¸‰å››äº”ä¸ªå­—ç¬¦å’Œæ¨¡å¼ä¸²çš„ç¬¬ä¸€äºŒä¸‰ä¸ªå­—ç¬¦åŒ¹é…, åˆå›åˆ°äº†å¯¹æ¨¡å¼ä¸²æŸå­—ç¬¦ä¸»ä¸²å­—ç¬¦<code>B</code> çš„æ¯”å¯¹.</p><p>é™¤å»ç®€å•å­—ç¬¦ä¸²åŒ¹é…, æœ‰æ²¡æœ‰æ›´å–å·§çš„åŠæ³•, åˆ©ç”¨<strong>æ¨¡å¼ä¸²è‡ªèº«çš„ç‰¹ç‚¹</strong>, æˆ–è€…è¯´åˆ©ç”¨åœ¨ä¸»ä¸²å’Œæ¨¡å¼ä¸²å‘ç”Ÿä¸åŒ¹é…æ—¶å·²ç»åŒ¹é…å­—ç¬¦çš„ä¿¡æ¯, æ¥å‹ç¼©è¿™ä¸ªæ¯”è¾ƒçš„è¿‡ç¨‹å‘¢?</p><p>ç»§ç»­é€ä¸€å®Œæˆä¸»ä¸²å’Œæ¨¡å¼ä¸²çš„æ¯”å¯¹, åˆå‘ç°æœ‰ä¸€å¤„ä¸åŒ¹é….</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95KMP/kmp3.jpg"></p><p>å¦‚æœæ˜¯ç®€å•å­—ç¬¦ä¸²åŒ¹é…åˆè¦é€ä¸€åç§», ç›´åˆ°è¾¾åˆ°ä¸‹è¿°çŠ¶æ€, æ‰èƒ½å†æ¬¡è¿›è¡Œä¸»ä¸²ä¸­æ‰€æŒ‡çš„<code>B</code> å’Œæ¨¡å¼ä¸²æ¯”å¯¹.</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95KMP/kmp4.jpg"></p><p>ç»è¿‡è¿™ä¸¤ä¸ªä¾‹å­, éšéšçº¦çº¦å‘ç°ç‚¹é—®é¢˜. æ€»ä¼šå‡ºç°ä¸€ç§çŠ¶æ€, <strong>æ¨¡å¼ä¸²ä¸­æŸä¸ªå­—ç¬¦ä¸ä¸»ä¸²å­—ç¬¦å‘ç”Ÿä¸åŒ¹é…, ä½†åœ¨è¿™ä¹‹å‰çš„æ‰€æœ‰å­—ç¬¦éƒ½å·²ç»åŒ¹é…äº†</strong>. å¦‚æœä½¿ç”¨ç®€å•å­—ç¬¦ä¸²åŒ¹é…, æ•ˆç‡æå…¶ä½ä¸‹. å¦‚æœæ¨¡å¼ä¸²çš„å‰åŠéƒ¨åˆ†(ä»èµ·å§‹å¤„å‘åå–)å’ŒååŠéƒ¨åˆ†(ä»ä¸åŒ¹é…ç‚¹å‘å‰å–)æœ‰<strong>å®Œå…¨ç›¸åŒçš„å­ä¸²</strong>, é‚£ä¹ˆå¾ˆæ˜æ˜¾å¦‚æœå‰åŠéƒ¨åˆ†ä¸ä¸»ä¸²å®Œå…¨åŒ¹é…, é‚£ä¹ˆååŠéƒ¨åˆ†ä¹Ÿä¸€å®šä¸ä¸»ä¸²å®Œå…¨åŒ¹é…, é‚£å°±ä¸ç”¨é‡å¤è¿›è¡Œæ¯”å¯¹äº†!</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95KMP/kmp8.jpg"></p><p>ä¸ºæ–¹ä¾¿æ¯”è¾ƒ, æˆ‘å°†ä¸¤æ¬¡æ¯”å¯¹æ”¾åœ¨ä¸€èµ·, æ¯”å¦‚:</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95KMP/kmp5.jpg"> <img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95KMP/kmp2.jpg"></p><p>è¿™é‡Œä»èµ·å§‹å¤„å‘åå–, å³é»„è‰²æ¡†å†…çš„<code>ABA</code> å’Œä»ä¸åŒ¹é…ç‚¹å‘å‰å–çš„ç™½è‰²æ¡†å†…çš„<code>ABA</code> å°±æ˜¯å®Œå…¨ç›¸åŒçš„å­ä¸², è¿™å¯¹å­ä¸²ç§°ä¸º<strong>å…¬å…±å‰åç¼€</strong>. æ­£æ˜¯å› ä¸ºè¿™å¯¹å‰åç¼€å®Œå…¨ç›¸åŒ, æ‰€ä»¥å‘ç”Ÿå­—ç¬¦ä¸åŒ¹é…æ—¶, æ‰èƒ½ç›´æ¥ä½¿å¾—æ¨¡å¼ä¸²çš„æŒ‡é’ˆåœç•™åœ¨å‰ç¼€çš„ä¸‹ä¸€ä¸ªä½ç½®ä¸Š, ä¸å†é‡å¤è¿›è¡Œå‰ç¼€çš„æ¯”å¯¹, è¿™ä¹Ÿæ˜¯ç®€å•å­—ç¬¦ä¸²åŒ¹é…å’ŒKMPç®—æ³•çš„æœ€å¤§ä¸åŒ, å³<strong>æ¨¡å¼ä¸²çš„æ¯”è¾ƒæŒ‡é’ˆä¸å›æº¯</strong>.</p><blockquote><p>æŒ‡é’ˆä¸å›æº¯æ„å‘³ç€å¯¹å¤§è§„æ¨¡çš„å¤–å­˜ä¸­çš„å­—ç¬¦ä¸²åŒ¹é…æ“ä½œå¯ä»¥åˆ†æ®µè¿›è¡Œ. å…ˆè¯»å…¥å†…å­˜ä¸€éƒ¨åˆ†è¿›è¡ŒåŒ¹é…, å®Œæˆåå†å†™å›å¤–å­˜, ç¡®ä¿åœ¨åŒ¹é…æ—¶ä¸éœ€è¦å°†ä¹‹å‰å†™å›å¤–å­˜çš„éƒ¨åˆ†å†æ¬¡è¯»å…¥, å‡å°‘äº†IOæ“ä½œ, ä»è€Œæé«˜äº†æ•ˆç‡.</p></blockquote><p>åœ¨å–å‰åç¼€æ—¶, å¯èƒ½ä¼šæœ‰å¤šå¯¹, é‚£åº”è¯¥å–å“ªä¸€å¯¹å‘¢? ä»¥ä¸Šè¿°å‘ç”Ÿä¸åŒ¹é…çš„å›¾ä¸ºä¾‹, ä»å·¦å³åˆ†åˆ«å–, åº”è¯¥å¯ä»¥å½¢æˆ<code>A-A</code>, <code>ABA-ABA</code>, <code>ABABA-ABABA</code> ä¸‰å¯¹ç¬¦åˆè¦æ±‚çš„å…¬å…±å‰åç¼€. å…¶ä¸­<code>AB-BA</code> å’Œ <code>ABAB-BABA</code>ä¸æ˜¯å®Œå…¨ç›¸åŒçš„å­ä¸², æ˜¯å€’è¿‡æ¥çš„, ä¸æ˜¯å…¬å…±å‰åç¼€. å¦‚æœè¦å°½å¯èƒ½çš„å‡å°‘é‡å¤æ¯”å¯¹æ¬¡æ•°, ä¸€å®šæ˜¯å…¬å…±å‰åç¼€è¶Šé•¿è¶Šå¥½, è¶Šé•¿è¯´æ˜å·²ç»æ¯”å¯¹è¿‡çš„å­—ç¬¦è¶Šå¤š. åŒæ—¶éœ€è¦æ³¨æ„, <code>ABABA-ABABA</code> è¿™å¯¹æ˜¯é•¿åº¦å®Œå…¨å’Œå­ä¸²é•¿åº¦ç›¸ç­‰, å†æ¬¡æ¯”å¯¹æ—¶å°±å¤±å»äº†æ„ä¹‰, è™½ç„¶æ˜¯å…¬å…±å‰åç¼€, ä½†å®ƒåº”è¯¥<strong>ä¸èƒ½è¢«ä½¿ç”¨</strong>. <code>ABA-ABA</code> å°±æ˜¯<strong>æœ€é•¿å…¬å…±å‰åç¼€</strong>, å–æœ€é•¿çš„ä¸€å¯¹å…¬å…±å‰åç¼€ä½œä¸ºæŒ‡é’ˆä¸å›æº¯çš„ä¾æ®.</p><p>è®°ä½, æ¨¡å¼ä¸²çš„æ¯”è¾ƒæŒ‡é’ˆç›´æ¥å°±æŒ‡å‘äº†å‰ç¼€çš„ä¸‹ä¸€ä¸ªä½ç½®. å†çœ‹ä¸€ä¸ªä¾‹å­, åŠ æ·±ç†è§£:</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95KMP/kmp6.jpg"> <img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95KMP/kmp4.jpg"></p><p>åœ¨ä¸Šè¿°å™è¿°çš„è¿‡ç¨‹ä¸­, å‘ç”Ÿä¸»ä¸²å’Œæ¨¡å¼ä¸²çš„ä¸åŒ¹é…æ—¶, æ¨¡å¼ä¸²å·¦ä¾§ä¸ä¸»ä¸²çš„å¯¹åº”ä½ç½®ä¸€å®šæ˜¯åŒ¹é…çš„, æ¢å¥è¯è¯´äºŒè€…æ˜¯ä¸€æ ·çš„. é‚£ä¹ˆç ”ç©¶æ¨¡å¼ä¸²å°±å’Œç ”ç©¶ä¸»ä¸²æ˜¯ç­‰ä»·çš„äº†, å› æ­¤<strong>ä¸ä¸»ä¸²æ— å…³</strong>, ä»…ä¿ç•™æ¨¡å¼ä¸², å°†æŒ‡é’ˆä¸å›æº¯çš„ä½ç½®è®°å½•ç”¨æ•°ç»„ä¸‹æ¥, å½“å‘ç”Ÿä¸åŒ¹é…æ—¶, æŒ‡é’ˆå°±æ¢å¤åˆ°ä¹‹å‰è®°å½•çš„ä½ç½®å³å¯. è¿™ä¸ªæ•°ç»„ç§°ä¸º<strong>nextæ•°ç»„</strong>.</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95KMP/kmp7.jpg"></p><p>ä¸ºæ–¹ä¾¿, å­—ç¬¦ä¸²ä¸‹æ ‡ä»1å¼€å§‹. å¯¹äºæ¨¡å¼ä¸²:</p><table><thead><tr><th>å‘ç”Ÿä¸åŒ¹é…çš„æ¨¡å¼ä¸²ä¸‹æ ‡</th><th>æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦</th><th>ä¸»ä¸²å½“å‰ä¸æ¨¡å¼ä¸²æ¯”å¯¹çš„ä¸‹æ ‡</th><th>æœ€é•¿å…¬å…±å‰åç¼€</th></tr></thead><tbody><tr><td>1</td><td>0</td><td>0(ç‰¹æ®Š)</td><td>-</td></tr><tr><td>2</td><td>0</td><td>1</td><td>-</td></tr><tr><td>3</td><td>0</td><td>1</td><td>-</td></tr><tr><td>4</td><td>1</td><td>2</td><td><code>A</code></td></tr><tr><td>5</td><td>2</td><td>3</td><td><code>AB</code></td></tr><tr><td>6</td><td>3</td><td>4</td><td><code>ABA</code></td></tr><tr><td>7</td><td>1</td><td>2</td><td><code>A</code></td></tr><tr><td>8</td><td>1</td><td>2</td><td><code>A</code></td></tr><tr><td>9</td><td>2</td><td>3</td><td><code>AB</code></td></tr><tr><td>10</td><td>3</td><td>4</td><td><code>ABA</code></td></tr><tr><td>11</td><td>4</td><td>5</td><td><code>ABAB</code></td></tr><tr><td>12</td><td>5</td><td>6</td><td><code>ABABA</code></td></tr></tbody></table><p>æ€»ç»“ä¸Šè¿°è§„å¾‹, é™¤å»æ¨¡å¼ä¸²ç¬¬ä¸€ä¸ªå…ƒç´ å¤–, ä¸»ä¸²å½“å‰å…ƒç´ ä¸æ¨¡å¼ä¸²å…ƒç´ æ¯”å¯¹çš„ä¸‹æ ‡æ˜¯æœ€é•¿å‰åç¼€é•¿åº¦+1. å¦‚æœä¸‹æ ‡ä¸º1å‘ç”Ÿä¸åŒ¹é…, ä¸»ä¸²çš„ä¸‹ä¸€ä¸ªå…ƒç´ ä¸æ¨¡å¼ä¸²ä¸‹æ ‡å…ƒç´ ä¸º1å¼€å§‹æ¯”è¾ƒ. æœ€åæ—¶é—´å¤æ‚åº¦æ˜¯O(n+m).</p><h4 id="ç®€å•åŒ¹é…å‡çº§åˆ°KMP"><a href="#ç®€å•åŒ¹é…å‡çº§åˆ°KMP" class="headerlink" title="ç®€å•åŒ¹é…å‡çº§åˆ°KMP"></a><a href="#%E7%AE%80%E5%8D%95%E5%8C%B9%E9%85%8D%E5%8D%87%E7%BA%A7%E5%88%B0KMP" title="ç®€å•åŒ¹é…å‡çº§åˆ°KMP"></a>ç®€å•åŒ¹é…å‡çº§åˆ°KMP</h4><p>å…ˆæŠ›å¼€nextæ•°ç»„å¦‚ä½•æ„é€ ä¸è°ˆ, å…ˆçœ‹çœ‹å¦‚ä½•å†™KMPçš„ä»£ç . å¦‚æœKMPå®Œæˆäº†ç®€å•å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•çš„å‹ç¼©, é‚£ä¹Ÿåº”è¯¥èƒ½å¤Ÿç”±ç®€å•ç®—æ³•å‡çº§ä¸ºKMPç®—æ³•.</p><p>å®ç°KMPä»£ç å¦‚ä¸‹:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">KMP</span><span class="token punctuation">(</span>Str str<span class="token punctuation">,</span> Str substr<span class="token punctuation">,</span> <span class="token keyword">int</span> next<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// ä¸‹æ ‡ä»1å¼€å§‹</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> str<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> j <span class="token operator">&lt;</span> substr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">// ä¸»ä¸²æŒ‡é’ˆä¸‹ç§»çš„æƒ…å†µ</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> str<span class="token punctuation">.</span>ch<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> substr<span class="token punctuation">.</span>ch<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token operator">++</span>i<span class="token punctuation">;</span>            <span class="token operator">++</span>j<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// å‘ç”Ÿä¸åŒ¹é…æ—¶æ¨¡å¼ä¸²æŒ‡é’ˆè·³åˆ°nextæ•°ç»„æ‰€æŒ‡å‘çš„ä½ç½®</span>        <span class="token keyword">else</span> j <span class="token operator">=</span> next<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// éå†å®Œæ¨¡å¼ä¸²æ²¡å‘ç°ä¸åŒ¹é… è¯´æ˜æ¨¡å¼ä¸²ä¸ä¸»ä¸²ç›¸åŒ¹é…</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">></span> substr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span> i <span class="token operator">-</span> substr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="æ±‚nextæ•°ç»„"><a href="#æ±‚nextæ•°ç»„" class="headerlink" title="æ±‚nextæ•°ç»„"></a><a href="#%E6%B1%82next%E6%95%B0%E7%BB%84" title="æ±‚nextæ•°ç»„"></a>æ±‚nextæ•°ç»„</h4><p>å†æ¥çœ‹çœ‹nextæ•°ç»„æ˜¯å¦‚ä½•æ„å»ºçš„. è®©æˆ‘ä»¬å›åˆ°ä¹‹å‰æ‰¾æœ€é•¿å…¬å…±å‰åç¼€çš„è¿‡ç¨‹. é‚£æ—¶æ›¾ç»è¯´è¿‡, å…¬å…±å‰åç¼€æ˜¯ä¸¤æ®µ<strong>å®Œå…¨ç›¸åŒçš„å­ä¸²</strong>, é‚£æ‰¾æœ€é•¿å…¬å…±å‰åç¼€çš„è¿‡ç¨‹å²‚ä¸æ˜¯ä¹Ÿæ˜¯å­—ç¬¦ä¸²åŒ¹é…? æˆ‘ä»¬ä»ç„¶è¦å»¶ç»­ä¸é‡å¤åšäº‹æƒ…çš„æ€è·¯, åˆ©ç”¨å·²çŸ¥ä¿¡æ¯å»æ±‚nextæ•°ç»„.</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95KMP/kmp9.jpg"></p><p>å¦‚æœè¿™æ ·å»æƒ³, é‚£ä¹ˆå›¾ä¸­Pjæ‰€å¯¹åº”çš„nextæ•°ç»„çš„å€¼ä¸Ptå¿…ç„¶æ˜¯æœ‰å…³è”çš„.</p><p>å½“Pjå’ŒPtçš„å¤§å°æœªçŸ¥, è€Œå‰é¢æ¨¡å¼ä¸²å‡ç›¸åŒæ—¶, å‡è®¾åœ¨Pjå‡ºå‘ç”Ÿä¸åŒ¹é…, æ¨¡å¼ä¸²æŒ‡é’ˆä¼šè·³è½¬åˆ°æœ€é•¿å…¬å…±å‰åç¼€+1å¤„, å³next[j] &#x3D; t. æœ‰äº†è¿™ä¸ªåˆå§‹æ¡ä»¶, å¯ä»¥æ ¹æ®Pjå’ŒPtçš„å¤§å°å…³ç³»æ¨å‡ºnext[j+1].</p><p>å‡è®¾P(j+1)å¤„å‘ç”Ÿä¸åŒ¹é…:</p><ul><li><p>å¦‚æœPj &#x3D; Pt, é‚£ä¹ˆnext[j+1] &#x3D; next[j]+1 &#x3D; t+1.</p></li><li><p>å¦‚æœPj !&#x3D; Pt, å°±å¾—åœ¨è¿™ä¸¤ä¸ªä¸²(æœ¬è´¨æ˜¯æ¨¡å¼ä¸²è‡ªå·±) ä¸­æ‰¾åˆ°æœ€é•¿çš„å…¬å…±å‰åç¼€, ä¹Ÿå°±<strong>å›åˆ°äº†å­—ç¬¦ä¸²åŒ¹é…çš„é—®é¢˜ä¸­</strong>. å°†P(j-t+1) ~ Pj è§†ä¸ºä¸»ä¸², P1 ~ Ptè§†ä¸ºæ¨¡å¼ä¸², ç»§ç»­åšå­—ç¬¦ä¸²åŒ¹é…. å¿…é¡»å‘å‰åå¤é‡å®šä½æŒ‡é’ˆ, æ‰¾åˆ°ä¸€ä¸ªä½ç½®ä½¿å¾—Pj &#x3D; Ptæˆ–æ»¡è¶³t &#x3D; 0, å³å°†tå¾ªç¯èµ‹å€¼ä¸ºnext[t], t &#x3D; 0 æ—¶, ä»¤next[j+1] &#x3D; 1.</p><p>æ³¨æ„, å› ä¸ºç¬¬äºŒç§æƒ…å†µä¸å­—ç¬¦ä¸²åŒ¹é…å®Œå…¨ä¸€è‡´, æ‰€ä»¥å»ºç«‹nextæ•°ç»„çš„ä»£ç ä¸€å®šä¸KMPç®—æ³•<strong>æå…¶ç›¸ä¼¼</strong>:</p></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// æ±‚nextæ•°ç»„çš„æ–¹æ³• substrä¸ºæ¨¡å¼ä¸² </span><span class="token comment">// jå’Œtä¸ä¸Šè¿°å›¾ä¸­ç›¸åŒ</span><span class="token keyword">void</span> <span class="token function">getNext</span><span class="token punctuation">(</span>Str substr<span class="token punctuation">,</span> <span class="token keyword">int</span> next<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    next<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>     <span class="token keyword">while</span><span class="token punctuation">(</span>j <span class="token operator">&lt;</span> substr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// j&lt;= substr.length ä¼šä½¿nextæ•°ç»„ä¸‹æ ‡è¶Šç•Œ </span>        <span class="token comment">// æ¨¡å¼ä¸²è‡ªèº«åŒ¹é…</span>        <span class="token comment">// tå¯èƒ½è¢«ä¸‹é¢çš„elseèµ‹å€¼ä¸º0, åœ¨æ¡ä»¶å¹¶å…¥åä¼šå°†tç½®ä¸º1</span>        <span class="token comment">// å¹¶ä¸”ç¬¬ä¸€æ¬¡æ‰§è¡Œ, æœ‰next[2] = 1, æ»¡è¶³ä¹‹å‰æ¨å¯¼çš„ç»“æœ</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> substr<span class="token punctuation">.</span>ch<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> substr<span class="token punctuation">.</span>ch<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token operator">++</span>j<span class="token punctuation">;</span>            <span class="token operator">++</span>t<span class="token punctuation">;</span>            next<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span> <span class="token comment">// next[j] = length+1 lengthå®é™…ä¸Šå°±æ˜¯æ²¡++å‰çš„t</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> t <span class="token operator">=</span> next<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// æ¨¡å¼ä¸²æŒ‡é’ˆé‡å®šä½åˆ°next[t] </span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="KMPç®—æ³•æ”¹è¿›"><a href="#KMPç®—æ³•æ”¹è¿›" class="headerlink" title="KMPç®—æ³•æ”¹è¿›"></a><a href="#KMP%E7%AE%97%E6%B3%95%E6%94%B9%E8%BF%9B" title="KMPç®—æ³•æ”¹è¿›"></a>KMPç®—æ³•æ”¹è¿›</h4><p>åœ¨æ±‚nextæ•°ç»„æ—¶, ä¼šä¸€ç›´ç”¨åˆ°å‘â€å‰åå¤é‡å®šä½æŒ‡é’ˆâ€è¿™ä¸ªæ“ä½œ, è¿˜å¯ä»¥æœ‰ä¼˜åŒ–çš„ä½™åœ°.</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95KMP/kmp10.jpg"></p><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­å‡ºç°äº†<strong>è¿ç»­ä¸”å®Œå…¨ç›¸åŒçš„å­—ç¬¦</strong>, åœ¨j &#x3D; 5æ—¶å‘ç”Ÿä¸åŒ¹é…, next[j] &#x3D; 4, å°†jé‡å®šä½åˆ°next[j] ä¸Š. jåˆä¸º4, next[j] åˆä¸º3â€¦ åå¤é‡å®šä½, ç›´åˆ°jä¸º0, æ‰å‘ç°è¯¥ä½ç½®çš„ä¸»ä¸²å’Œæ¨¡å¼ä¸²å®Œå…¨ä¸åŒ¹é…, ä¸»ä¸²å’Œæ¨¡å¼ä¸²æŒ‡é’ˆéƒ½åº”è¯¥åç§»ä¸€ä½. åœ¨è¿™ä¸ªè¿‡ç¨‹, ä»1åˆ°4ä½ç½®ä¸Šçš„å­—ç¬¦ä¸²æ˜¯ç›¸ç­‰çš„, åº”è¯¥ç›´æ¥ç»™next[5] èµ‹å€¼ä¸º0.</p><p>å°è¯•åœ¨nextæ•°ç»„çš„åŸºç¡€ä¸Š, æ„å»ºä¸€ä¸ªé‡å®šå‘æ•°ç»„, ä½¿å¾—å…¶èƒ½å¤Ÿæ ¹æ®ä¹‹å‰æ¯”è¾ƒçš„å†…å®¹è·³è¿‡å¤šä½™çš„æ¯”è¾ƒ, ç›´æ¥å°†next[j] èµ‹å€¼ä¸ºæŸä¸ªå·²çŸ¥çš„nextæ•°ç»„å€¼, è¿™ä¸ªæ•°ç»„å«<strong>nextvalæ•°ç»„</strong>.</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95KMP/kmp11.jpg"></p><p>åœ¨ä¸Šé¢çš„å›¾ä¸­, jä½ç½®çš„å…ƒç´ åå¤ä¸Pd, Pc, Pb, Paéƒ½è¿›è¡Œäº†æ¯”è¾ƒ, ä½†æ˜æ˜¾å‰ä¸‰è€…éƒ½æ˜¯å†—ä½™æ¯”è¾ƒ, ä¸èƒ½ç»™è§£å†³ä¸åŒ¹é…é—®é¢˜å¸¦æ¥å¥½å¤„. æ­¤å¤„çš„nextval[j] åº”è¯¥ä¸ºa.</p><p>æ¨å¹¿åˆ°ä¸€èˆ¬æƒ…å†µ, è·¯å¾„ä¸Šçš„å…ƒç´ éƒ½ä¸æ˜¯ç›¸é‚»çš„, è€Œç°åœ¨jä¹‹å‰çš„nextvalæ•°ç»„å€¼éƒ½æ˜¯å·²çŸ¥çš„, å¦‚ä½•æ±‚jåçš„å…ƒç´ kçš„nextval[k] å‘¢?</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95KMP/kmp12.jpg"></p><p>å¦‚æœkä½ç½®ä¸Šçš„å…ƒç´ å’Œjä½ç½®ä¸Šçš„å…ƒç´ ç›¸ç­‰, é‚£ä¹ˆnextval[k] &#x3D; nextval[next[k]], å¦‚æœä¸ç›¸ç­‰åˆ™ä»¤nextval[k] &#x3D; next[k].</p><p>å½’çº³ä¸ºä¸€èˆ¬æ­¥éª¤:</p><ol><li>j &#x3D; 1æ—¶, nextval[j] èµ‹å€¼ä¸º 0, ä½œä¸ºç‰¹æ®Šæ ‡è®°</li><li>j &gt; 1æ—¶:<ul><li>è‹¥Pj !&#x3D; P(next[j]), åˆ™nextval[j] &#x3D; next[j].</li><li>è‹¥Pj &#x3D; P(next[j]), åˆ™nextval[j] &#x3D; nextval[next[j]].</li></ul></li></ol><p>æ±‚nextvalæ•°ç»„çš„ä»£ç å¯ä»¥ç”±æ±‚nextæ•°ç»„çš„ä»£ç ä¿®æ”¹è€Œæ¥, æœ€å¥½å¯¹æ¯”ç»“åˆèµ·æ¥çœ‹, å®ç°å¦‚ä¸‹:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">getNextval</span><span class="token punctuation">(</span>Str substr<span class="token punctuation">,</span> <span class="token keyword">int</span> nextval<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    nextval<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// j=1æ—¶nextval[j] = 0</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>j <span class="token operator">&lt;</span> substr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>t <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> substr<span class="token punctuation">.</span>ch<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> substr<span class="token punctuation">.</span>ch<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token operator">++</span>j<span class="token punctuation">;</span>            <span class="token operator">++</span>t<span class="token punctuation">;</span>            <span class="token comment">// æ±‚è§£nextæ•°ç»„æ—¶, æœ‰next[j] = t; é‚£ä¹ˆtå¯ä»¥ä»£æ›¿next[j] </span>            <span class="token keyword">if</span><span class="token punctuation">(</span>substr<span class="token punctuation">.</span>ch<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">!=</span> substr<span class="token punctuation">.</span>ch<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span>                nextval<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span> <span class="token comment">// nextval[j] = next[j]</span>            <span class="token keyword">else</span>                nextval<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> nextval<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// nextval[j] = nextval[next[j]]</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> t <span class="token operator">=</span> nextval<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­—ç¬¦ä¸²æ’åºç®—æ³•KMP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾åƒç‰¹å¾æå–ä¹‹LBPç‰¹å¾</title>
      <link href="/2023/12/18/tu-xiang-te-zheng-ti-qu-zhi-lbp-te-zheng/"/>
      <url>/2023/12/18/tu-xiang-te-zheng-ti-qu-zhi-lbp-te-zheng/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>â€ƒâ€ƒå±€éƒ¨äºŒå€¼æ¨¡å¼(Local Binary Patter, LBP)æ˜¯ä¸€ç§ç”¨æ¥æè¿°å›¾åƒå±€éƒ¨çº¹ç†ç‰¹å¾çš„ç®—å­ï¼Œ<strong>LBPç‰¹å¾å…·æœ‰ç°åº¦ä¸å˜æ€§å’Œæ—‹è½¬ä¸å˜æ€§ç­‰æ˜¾è‘—ä¼˜ç‚¹ï¼Œå®ƒå°†å›¾åƒä¸­çš„å„ä¸ªåƒç´ ä¸å…¶é‚»åŸŸåƒç´ å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå°†ç»“æœä¿å­˜ä¸ºäºŒè¿›åˆ¶æ•°ï¼Œå¹¶å°†å¾—åˆ°çš„äºŒè¿›åˆ¶æ¯”ç‰¹ä¸²ä½œä¸ºä¸­å¿ƒåƒç´ çš„ç¼–ç å€¼ï¼Œä¹Ÿå°±æ˜¯LBPç‰¹å¾å€¼</strong>ã€‚LBPæä¾›äº†ä¸€ç§è¡¡é‡åƒç´ é—´é‚»åŸŸå…³ç³»çš„ç‰¹å¾æ¨¡å¼ï¼Œå› æ­¤å¯ä»¥æœ‰æ•ˆåœ°æå–å›¾åƒçš„å±€éƒ¨ç‰¹å¾ï¼Œè€Œä¸”ç”±äºå…¶è®¡ç®—ç®€å•ï¼Œå¯ç”¨äºåŸºäºçº¹ç†åˆ†ç±»çš„å®æ—¶åº”ç”¨åœºæ™¯ï¼Œä¾‹å¦‚ç›®æ ‡æ£€æµ‹ã€äººè„¸è¯†åˆ«ç­‰ã€‚  </p><h1 id="åŸå§‹LBPç‰¹å¾"><a href="#åŸå§‹LBPç‰¹å¾" class="headerlink" title="åŸå§‹LBPç‰¹å¾"></a>åŸå§‹LBPç‰¹å¾</h1><p>â€ƒâ€ƒåŸå§‹çš„LBPç®—å­å®šä¹‰äºå›¾åƒä¸­$3 \times 3$çš„é‚»åŸŸçª—å£ï¼Œå–çª—å£å†…ä¸­å¿ƒåƒç´ çš„ç°åº¦å€¼ä½œä¸ºé˜ˆå€¼ï¼Œå°†8é‚»åŸŸåƒç´ çš„ç°åº¦å€¼ä¸å…¶è¿›è¡Œæ¯”è¾ƒï¼Œè‹¥é‚»åŸŸåƒç´ å€¼å¤§äºä¸­å¿ƒåƒç´ å€¼ï¼Œåˆ™æ¯”è¾ƒç»“æœå–å€¼ä¸º1ï¼Œå¦åˆ™ä¸º0ã€‚è¿™æ ·é‚»åŸŸå†…çš„8ä¸ªåƒç´ ç‚¹ç»è¿‡æ¯”è¾ƒåå¯å¾—åˆ°8ä½äºŒè¿›åˆ¶æ•°ï¼Œå°†å…¶æŒ‰é¡ºåºä¾æ¬¡æ’åˆ—å³å¯å¾—åˆ°ä¸­å¿ƒåƒç´ çš„LBPå€¼ã€‚LBPç‰¹å¾å€¼åæ˜ äº†ä¸­å¿ƒåƒç´ å’Œå…¶é‚»åŸŸçš„çº¹ç†ä¿¡æ¯ã€‚LBPçš„å–å€¼ä¸€å…±æœ‰$2^8 &#x3D; 256$ç§ï¼Œå’Œä¸€å¹…æ™®é€šçš„ç°åº¦å›¾åƒç±»ä¼¼ï¼Œå› æ­¤å¯å°†LBPç‰¹å¾ä»¥ç°åº¦å›¾çš„å½¢å¼è¡¨è¾¾å‡ºæ¥ã€‚ç”±äºLBPç‰¹å¾è€ƒè™‘çš„æ˜¯çº¹ç†ä¿¡æ¯ï¼Œè€Œä¸åŒ…å«é¢œè‰²ä¿¡æ¯ï¼Œå› æ­¤å½©è‰²å›¾éœ€è½¬æ¢ä¸ºç°åº¦å›¾ã€‚åŸå§‹LBPç‰¹å¾çš„æå–è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96%E4%B9%8BLBP%E7%89%B9%E5%BE%81/593e3dae121e4.jpg"></p><p>å…¬å¼å®šä¹‰å¦‚ä¸‹ï¼š<br>$$LBP(x_c,y_c)&#x3D;\Sigma_{p&#x3D;0}^{P-1} 2^p s(i_p-i_c)$$<br>å…¶ä¸­$(x_c,y_c)$ä»£è¡¨é‚»åŸŸçª—å£å†…çš„ä¸­å¿ƒåƒç´ ï¼Œå…¶åƒç´ å€¼ä¸º$i_c$ï¼Œ$i_p$ä¸ºé‚»åŸŸå†…å…¶ä»–åƒç´ å€¼$s(x)$æ˜¯ç¬¦å·å‡½æ•°ã€‚<br>åŸå§‹LBPç‰¹å¾çš„å®ç°ä»£ç (OpenCV)å¦‚ä¸‹:  </p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">_tp</span><span class="token operator">></span><span class="token keyword">void</span> <span class="token function">getOriginLBPFeature</span><span class="token punctuation">(</span>InputArray _src<span class="token punctuation">,</span>OutputArray _dst<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    Mat src <span class="token operator">=</span> _src<span class="token punctuation">.</span><span class="token function">getMat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    _dst<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span>rows<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span>src<span class="token punctuation">.</span>cols<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span>CV_8UC1<span class="token punctuation">)</span><span class="token punctuation">;</span>    Mat dst <span class="token operator">=</span> _dst<span class="token punctuation">.</span><span class="token function">getMat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    dst<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>src<span class="token punctuation">.</span>rows<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>src<span class="token punctuation">.</span>cols<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            _tp center <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">unsigned</span> <span class="token keyword">char</span> lbpCode <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            lbpCode <span class="token operator">|=</span> <span class="token punctuation">(</span>src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">></span> center<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">7</span><span class="token punctuation">;</span>            lbpCode <span class="token operator">|=</span> <span class="token punctuation">(</span>src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>j  <span class="token punctuation">)</span> <span class="token operator">></span> center<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span>            lbpCode <span class="token operator">|=</span> <span class="token punctuation">(</span>src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">></span> center<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span>            lbpCode <span class="token operator">|=</span> <span class="token punctuation">(</span>src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i  <span class="token punctuation">,</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">></span> center<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span>            lbpCode <span class="token operator">|=</span> <span class="token punctuation">(</span>src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">></span> center<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span>            lbpCode <span class="token operator">|=</span> <span class="token punctuation">(</span>src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>j  <span class="token punctuation">)</span> <span class="token operator">></span> center<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span>            lbpCode <span class="token operator">|=</span> <span class="token punctuation">(</span>src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">></span> center<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">;</span>            lbpCode <span class="token operator">|=</span> <span class="token punctuation">(</span>src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i  <span class="token punctuation">,</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">></span> center<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">0</span><span class="token punctuation">;</span>            dst<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> lbpCode<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="åœ†å½¢LBPç‰¹å¾-Circular-LBP-or-Extended-LBP"><a href="#åœ†å½¢LBPç‰¹å¾-Circular-LBP-or-Extended-LBP" class="headerlink" title="åœ†å½¢LBPç‰¹å¾(Circular LBP or Extended LBP)"></a>åœ†å½¢LBPç‰¹å¾(Circular LBP or Extended LBP)</h1><p>â€ƒâ€ƒåŸå§‹LBPç‰¹å¾è€ƒè™‘çš„æ˜¯å›ºå®šåŠå¾„èŒƒå›´å†…çš„é‚»åŸŸåƒç´ ï¼Œä¸èƒ½æ»¡è¶³ä¸åŒå°ºå¯¸å’Œé¢‘ç‡çº¹ç†çš„éœ€æ±‚ï¼Œå½“å›¾åƒçš„å°ºå¯¸å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒLBPç‰¹å¾å°†ä¸èƒ½æ­£ç¡®ç¼–ç å±€éƒ¨é‚»åŸŸçš„çº¹ç†ä¿¡æ¯ã€‚ä¸ºäº†é€‚åº”ä¸åŒå°ºå¯¸çš„çº¹ç†ç‰¹å¾ï¼ŒOjalaç­‰äººå¯¹LBPç®—å­<br>è¿›è¡Œäº†æ”¹è¿›ï¼Œå°†$3 \times 3$é‚»åŸŸçª—å£æ‰©å±•åˆ°ä»»æ„é‚»åŸŸï¼Œå¹¶ç”¨åœ†å½¢é‚»åŸŸä»£æ›¿äº†æ­£æ–¹å½¢é‚»åŸŸï¼Œæ”¹è¿›åçš„LBPç®—å­å…è®¸åœ¨åŠå¾„ä¸ºRçš„é‚»åŸŸå†…æœ‰ä»»æ„å¤šä¸ªåƒç´ ç‚¹ï¼Œä»è€Œå¾—åˆ°åœ¨åŠå¾„ä¸ºRçš„åŒºåŸŸå†…å«æœ‰Pä¸ªé‡‡æ ·ç‚¹çš„LBPç®—å­ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96%E4%B9%8BLBP%E7%89%B9%E5%BE%81/593e49563d486.png"></p><p>é‡‡æ ·ç‚¹çš„åæ ‡å¯é€šè¿‡ä»¥ä¸‹å…¬å¼è®¡ç®—ï¼š<br>$$x_p&#x3D;x_c+R \cdot cos(2\pi p &#x2F; P)$$<br>$$y_p&#x3D;y_c+R \cdot sin(2\pi p &#x2F; P)$$<br>å…¶ä¸­$(x_c,y_c)$ä¸ºä¸­å¿ƒåƒç´ ç‚¹ï¼Œ$(x_p,y_p),p \in P$ä¸ºé‚»åŸŸå†…æŸä¸ªé‡‡æ ·ç‚¹ï¼Œé€šè¿‡ä¸Šæ¬¡å¯ä»¥è®¡ç®—ä»»æ„ä¸ªé‡‡æ ·ç‚¹çš„åæ ‡ï¼Œä½†æ˜¯å¾—åˆ°çš„åæ ‡å€¼æœªå¿…ä¸ºæ•´æ•°ï¼Œå› æ­¤å¯é€šè¿‡åŒçº¿æ€§æ’å€¼çš„æ–¹æ³•æ¥å¾—åˆ°è¯¥é‡‡æ ·ç‚¹çš„åƒç´ å€¼ï¼š<br>$$<br>f(x, y) &#x3D;<br>\begin{bmatrix}<br>1-x &amp;&amp; x<br>\end{bmatrix}<br>\begin{bmatrix}<br>f(0,0) &amp;&amp; f(0,1) \\<br>f(1,0) &amp;&amp; f(1,1)<br>\end{bmatrix}<br>\begin{bmatrix}<br>1-y \\<br>y<br>\end{bmatrix}<br>$$</p><p>åœ†å½¢LBPç‰¹å¾çš„å®ç°ä»£ç å¦‚ä¸‹ï¼š  </p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">//åœ†å½¢LBPç‰¹å¾è®¡ç®—ï¼Œè¿™ç§æ–¹æ³•é€‚äºç†è§£ï¼Œä½†åœ¨æ•ˆç‡ä¸Šå­˜åœ¨é—®é¢˜ï¼Œå£°æ˜æ—¶é»˜è®¤neighbors=8</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">_tp</span><span class="token operator">></span><span class="token keyword">void</span> <span class="token function">getCircularLBPFeature</span><span class="token punctuation">(</span>InputArray _src<span class="token punctuation">,</span>OutputArray _dst<span class="token punctuation">,</span><span class="token keyword">int</span> radius<span class="token punctuation">,</span><span class="token keyword">int</span> neighbors<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    Mat src <span class="token operator">=</span> _src<span class="token punctuation">.</span><span class="token function">getMat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//LBPç‰¹å¾å›¾åƒçš„è¡Œæ•°å’Œåˆ—æ•°çš„è®¡ç®—è¦å‡†ç¡®</span>    _dst<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span>rows<span class="token operator">-</span><span class="token number">2</span><span class="token operator">*</span>radius<span class="token punctuation">,</span>src<span class="token punctuation">.</span>cols<span class="token operator">-</span><span class="token number">2</span><span class="token operator">*</span>radius<span class="token punctuation">,</span>CV_8UC1<span class="token punctuation">)</span><span class="token punctuation">;</span>    Mat dst <span class="token operator">=</span> _dst<span class="token punctuation">.</span><span class="token function">getMat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    dst<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//å¾ªç¯å¤„ç†æ¯ä¸ªåƒç´ </span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>radius<span class="token punctuation">;</span>i<span class="token operator">&lt;</span>src<span class="token punctuation">.</span>rows<span class="token operator">-</span>radius<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span>radius<span class="token punctuation">;</span>j<span class="token operator">&lt;</span>src<span class="token punctuation">.</span>cols<span class="token operator">-</span>radius<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token comment">//è·å¾—ä¸­å¿ƒåƒç´ ç‚¹çš„ç°åº¦å€¼</span>            _tp center <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">unsigned</span> <span class="token keyword">char</span> lbpCode <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>k<span class="token operator">&lt;</span>neighbors<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                <span class="token comment">//æ ¹æ®å…¬å¼è®¡ç®—ç¬¬kä¸ªé‡‡æ ·ç‚¹çš„åæ ‡ï¼Œè¿™ä¸ªåœ°æ–¹å¯ä»¥ä¼˜åŒ–ï¼Œä¸å¿…æ¯æ¬¡éƒ½è¿›è¡Œè®¡ç®—radius*cosï¼Œradius*sin</span>                <span class="token keyword">float</span> x <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>radius <span class="token operator">*</span> \                    <span class="token function">cos</span><span class="token punctuation">(</span><span class="token number">2.0</span> <span class="token operator">*</span> CV_PI <span class="token operator">*</span> k <span class="token operator">/</span> neighbors<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">float</span> y <span class="token operator">=</span> j <span class="token operator">-</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>radius <span class="token operator">*</span> \                    <span class="token function">sin</span><span class="token punctuation">(</span><span class="token number">2.0</span> <span class="token operator">*</span> CV_PI <span class="token operator">*</span> k <span class="token operator">/</span> neighbors<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//æ ¹æ®å–æ•´ç»“æœè¿›è¡ŒåŒçº¿æ€§æ’å€¼ï¼Œå¾—åˆ°ç¬¬kä¸ªé‡‡æ ·ç‚¹çš„ç°åº¦å€¼</span>                <span class="token comment">//1.åˆ†åˆ«å¯¹xï¼Œyè¿›è¡Œä¸Šä¸‹å–æ•´</span>                <span class="token keyword">int</span> x1 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">floor</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> x2 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">ceil</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> y1 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">floor</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> y2 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">ceil</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//2.è®¡ç®—å››ä¸ªç‚¹(x1,y1),(x1,y2),(x2,y1),(x2,y2)çš„æƒé‡</span>                <span class="token comment">//ä¸‹é¢çš„æƒé‡è®¡ç®—æ–¹å¼æœ‰ä¸ªé—®é¢˜ï¼Œå¦‚æœå››ä¸ªç‚¹éƒ½ç›¸ç­‰ï¼Œåˆ™æƒé‡å…¨ä¸º0ï¼Œè®¡ç®—å‡ºæ¥çš„æ’å€¼ä¸º0</span>                <span class="token comment">//float w1 = (x2-x)*(y2-y); //(x1,y1)</span>                <span class="token comment">//float w2 = (x2-x)*(y-y1); //(x1,y2)</span>                <span class="token comment">//float w3 = (x-x1)*(y2-y); //(x2,y1)</span>                <span class="token comment">//float w4 = (x-x1)*(y-y1); //(x2,y2)</span>                <span class="token comment">//å°†åæ ‡æ˜ å°„åˆ°0-1ä¹‹é—´</span>                <span class="token keyword">float</span> tx <span class="token operator">=</span> x <span class="token operator">-</span> x1<span class="token punctuation">;</span>                <span class="token keyword">float</span> ty <span class="token operator">=</span> y <span class="token operator">-</span> y1<span class="token punctuation">;</span>                <span class="token comment">//æ ¹æ®0-1ä¹‹é—´çš„xï¼Œyçš„æƒé‡è®¡ç®—å…¬å¼è®¡ç®—æƒé‡</span>                <span class="token keyword">float</span> w1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>tx<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>ty<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">float</span> w2 <span class="token operator">=</span>    tx  <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>ty<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">float</span> w3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>tx<span class="token punctuation">)</span> <span class="token operator">*</span>    ty<span class="token punctuation">;</span>                <span class="token keyword">float</span> w4 <span class="token operator">=</span>    tx  <span class="token operator">*</span>    ty<span class="token punctuation">;</span>                <span class="token comment">//3.æ ¹æ®åŒçº¿æ€§æ’å€¼å…¬å¼è®¡ç®—ç¬¬kä¸ªé‡‡æ ·ç‚¹çš„ç°åº¦å€¼</span>                <span class="token keyword">float</span> neighbor <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>x1<span class="token punctuation">,</span>y1<span class="token punctuation">)</span> <span class="token operator">*</span> w1 <span class="token operator">+</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>x1<span class="token punctuation">,</span>y2<span class="token punctuation">)</span> <span class="token operator">*</span>w2 \                    <span class="token operator">+</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>x2<span class="token punctuation">,</span>y1<span class="token punctuation">)</span> <span class="token operator">*</span> w3 <span class="token operator">+</span>src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>x2<span class="token punctuation">,</span>y2<span class="token punctuation">)</span> <span class="token operator">*</span>w4<span class="token punctuation">;</span>                <span class="token comment">//é€šè¿‡æ¯”è¾ƒè·å¾—LBPå€¼ï¼Œå¹¶æŒ‰é¡ºåºæ’åˆ—èµ·æ¥</span>                lbpCode <span class="token operator">|=</span> <span class="token punctuation">(</span>neighbor<span class="token operator">></span>center<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>neighbors<span class="token operator">-</span>k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            dst<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">-</span>radius<span class="token punctuation">,</span>j<span class="token operator">-</span>radius<span class="token punctuation">)</span> <span class="token operator">=</span> lbpCode<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ†å½¢LBPç‰¹å¾çš„æ•ˆç‡ä¼˜åŒ–ç‰ˆæœ¬ï¼š  </p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">//åœ†å½¢LBPç‰¹å¾è®¡ç®—ï¼Œæ•ˆç‡ä¼˜åŒ–ç‰ˆæœ¬ï¼Œå£°æ˜æ—¶é»˜è®¤neighbors=8</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">_tp</span><span class="token operator">></span><span class="token keyword">void</span> <span class="token function">getCircularLBPFeatureOptimization</span><span class="token punctuation">(</span>InputArray _src<span class="token punctuation">,</span>OutputArray _dst<span class="token punctuation">,</span><span class="token keyword">int</span> radius<span class="token punctuation">,</span><span class="token keyword">int</span> neighbors<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    Mat src <span class="token operator">=</span> _src<span class="token punctuation">.</span><span class="token function">getMat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//LBPç‰¹å¾å›¾åƒçš„è¡Œæ•°å’Œåˆ—æ•°çš„è®¡ç®—è¦å‡†ç¡®</span>    _dst<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span>rows<span class="token operator">-</span><span class="token number">2</span><span class="token operator">*</span>radius<span class="token punctuation">,</span>src<span class="token punctuation">.</span>cols<span class="token operator">-</span><span class="token number">2</span><span class="token operator">*</span>radius<span class="token punctuation">,</span>CV_8UC1<span class="token punctuation">)</span><span class="token punctuation">;</span>    Mat dst <span class="token operator">=</span> _dst<span class="token punctuation">.</span><span class="token function">getMat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    dst<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>k<span class="token operator">&lt;</span>neighbors<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token comment">//è®¡ç®—é‡‡æ ·ç‚¹å¯¹äºä¸­å¿ƒç‚¹åæ ‡çš„åç§»é‡rxï¼Œry</span>        <span class="token keyword">float</span> rx <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>radius <span class="token operator">*</span> <span class="token function">cos</span><span class="token punctuation">(</span><span class="token number">2.0</span> <span class="token operator">*</span> CV_PI <span class="token operator">*</span> k <span class="token operator">/</span> neighbors<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">float</span> ry <span class="token operator">=</span> <span class="token operator">-</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>radius <span class="token operator">*</span> <span class="token function">sin</span><span class="token punctuation">(</span><span class="token number">2.0</span> <span class="token operator">*</span> CV_PI <span class="token operator">*</span> k <span class="token operator">/</span> neighbors<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//ä¸ºåŒçº¿æ€§æ’å€¼åšå‡†å¤‡</span>        <span class="token comment">//å¯¹é‡‡æ ·ç‚¹åç§»é‡åˆ†åˆ«è¿›è¡Œä¸Šä¸‹å–æ•´</span>        <span class="token keyword">int</span> x1 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">floor</span><span class="token punctuation">(</span>rx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> x2 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">ceil</span><span class="token punctuation">(</span>rx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> y1 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">floor</span><span class="token punctuation">(</span>ry<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> y2 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">ceil</span><span class="token punctuation">(</span>ry<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å°†åæ ‡åç§»é‡æ˜ å°„åˆ°0-1ä¹‹é—´</span>        <span class="token keyword">float</span> tx <span class="token operator">=</span> rx <span class="token operator">-</span> x1<span class="token punctuation">;</span>        <span class="token keyword">float</span> ty <span class="token operator">=</span> ry <span class="token operator">-</span> y1<span class="token punctuation">;</span>        <span class="token comment">//æ ¹æ®0-1ä¹‹é—´çš„xï¼Œyçš„æƒé‡è®¡ç®—å…¬å¼è®¡ç®—æƒé‡ï¼Œæƒé‡ä¸åæ ‡å…·ä½“ä½ç½®æ— å…³ï¼Œä¸åæ ‡é—´çš„å·®å€¼æœ‰å…³</span>        <span class="token keyword">float</span> w1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>tx<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>ty<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">float</span> w2 <span class="token operator">=</span>    tx  <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>ty<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">float</span> w3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>tx<span class="token punctuation">)</span> <span class="token operator">*</span>    ty<span class="token punctuation">;</span>        <span class="token keyword">float</span> w4 <span class="token operator">=</span>    tx  <span class="token operator">*</span>    ty<span class="token punctuation">;</span>        <span class="token comment">//å¾ªç¯å¤„ç†æ¯ä¸ªåƒç´ </span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>radius<span class="token punctuation">;</span>i<span class="token operator">&lt;</span>src<span class="token punctuation">.</span>rows<span class="token operator">-</span>radius<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span>radius<span class="token punctuation">;</span>j<span class="token operator">&lt;</span>src<span class="token punctuation">.</span>cols<span class="token operator">-</span>radius<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                <span class="token comment">//è·å¾—ä¸­å¿ƒåƒç´ ç‚¹çš„ç°åº¦å€¼</span>                _tp center <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//æ ¹æ®åŒçº¿æ€§æ’å€¼å…¬å¼è®¡ç®—ç¬¬kä¸ªé‡‡æ ·ç‚¹çš„ç°åº¦å€¼</span>                <span class="token keyword">float</span> neighbor <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">+</span>x1<span class="token punctuation">,</span>j<span class="token operator">+</span>y1<span class="token punctuation">)</span> <span class="token operator">*</span> w1 <span class="token operator">+</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">+</span>x1<span class="token punctuation">,</span>j<span class="token operator">+</span>y2<span class="token punctuation">)</span> <span class="token operator">*</span>w2 \                    <span class="token operator">+</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">+</span>x2<span class="token punctuation">,</span>j<span class="token operator">+</span>y1<span class="token punctuation">)</span> <span class="token operator">*</span> w3 <span class="token operator">+</span>src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">+</span>x2<span class="token punctuation">,</span>j<span class="token operator">+</span>y2<span class="token punctuation">)</span> <span class="token operator">*</span>w4<span class="token punctuation">;</span>                <span class="token comment">//LBPç‰¹å¾å›¾åƒçš„æ¯ä¸ªé‚»å±…çš„LBPå€¼ç´¯åŠ ï¼Œç´¯åŠ é€šè¿‡ä¸æ“ä½œå®Œæˆï¼Œå¯¹åº”çš„LBPå€¼é€šè¿‡ç§»ä½å–å¾—</span>                dst<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">-</span>radius<span class="token punctuation">,</span>j<span class="token operator">-</span>radius<span class="token punctuation">)</span> <span class="token operator">|=</span> <span class="token punctuation">(</span>neighbor<span class="token operator">></span>center<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>neighbors<span class="token operator">-</span>k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="æ—‹è½¬ä¸å˜LBPç‰¹å¾-Rotation-Invariant-LBP"><a href="#æ—‹è½¬ä¸å˜LBPç‰¹å¾-Rotation-Invariant-LBP" class="headerlink" title="æ—‹è½¬ä¸å˜LBPç‰¹å¾(Rotation Invariant LBP)"></a>æ—‹è½¬ä¸å˜LBPç‰¹å¾(Rotation Invariant LBP)</h1><p>â€ƒâ€ƒæ— è®ºæ˜¯åŸå§‹LBPç®—å­è¿˜æ˜¯åœ†å½¢LBPç®—å­ï¼Œéƒ½åªæ˜¯ç°åº¦ä¸å˜çš„ï¼Œè€Œä¸æ˜¯æ—‹è½¬ä¸å˜çš„ï¼Œæ—‹è½¬å›¾åƒä¼šå¾—åˆ°ä¸åŒçš„LBPç‰¹å¾å€¼ã€‚ç›¸å…³ç ”ç©¶äººå‘˜åˆæå‡ºäº†ä¸€ç§å…·æœ‰æ—‹è½¬ä¸å˜æ€§çš„LBPç®—å­ï¼Œå³ä¸æ–­æ—‹è½¬åœ†å½¢é‚»åŸŸçš„é‡‡æ ·ç‚¹ï¼Œæˆ–è€…ä»¥ä¸åŒçš„é‚»åŸŸåƒç´ ä½œä¸ºèµ·å§‹ç‚¹ï¼Œé¡ºæ—¶é’ˆéå†æ‰€æœ‰é‡‡æ ·ç‚¹ï¼Œå¾—åˆ°ä¸€ç³»åˆ—ç¼–ç å€¼(Pä¸ª)ï¼Œå–å…¶ä¸­æœ€å°çš„ä½œä¸ºè¯¥é‚»åŸŸä¸­å¿ƒåƒç´ çš„LBPå€¼ã€‚æ—‹è½¬ä¸å˜LBPç®—å­çš„ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96%E4%B9%8BLBP%E7%89%B9%E5%BE%81/593f6abf457df.jpg"></p><p>æ—‹è½¬ä¸å˜LBPç‰¹å¾çš„å®ç°ä»£ç å¦‚ä¸‹ï¼š  </p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">//æ—‹è½¬ä¸å˜åœ†å½¢LBPç‰¹å¾è®¡ç®—ï¼Œå£°æ˜æ—¶é»˜è®¤neighbors=8</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">_tp</span><span class="token operator">></span><span class="token keyword">void</span> <span class="token function">getRotationInvariantLBPFeature</span><span class="token punctuation">(</span>InputArray _src<span class="token punctuation">,</span>OutputArray _dst<span class="token punctuation">,</span><span class="token keyword">int</span> radius<span class="token punctuation">,</span><span class="token keyword">int</span> neighbors<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    Mat src <span class="token operator">=</span> _src<span class="token punctuation">.</span><span class="token function">getMat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//LBPç‰¹å¾å›¾åƒçš„è¡Œæ•°å’Œåˆ—æ•°çš„è®¡ç®—è¦å‡†ç¡®</span>    _dst<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span>rows<span class="token operator">-</span><span class="token number">2</span><span class="token operator">*</span>radius<span class="token punctuation">,</span>src<span class="token punctuation">.</span>cols<span class="token operator">-</span><span class="token number">2</span><span class="token operator">*</span>radius<span class="token punctuation">,</span>CV_8UC1<span class="token punctuation">)</span><span class="token punctuation">;</span>    Mat dst <span class="token operator">=</span> _dst<span class="token punctuation">.</span><span class="token function">getMat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    dst<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>k<span class="token operator">&lt;</span>neighbors<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token comment">//è®¡ç®—é‡‡æ ·ç‚¹å¯¹äºä¸­å¿ƒç‚¹åæ ‡çš„åç§»é‡rxï¼Œry</span>        <span class="token keyword">float</span> rx <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>radius <span class="token operator">*</span> <span class="token function">cos</span><span class="token punctuation">(</span><span class="token number">2.0</span> <span class="token operator">*</span> CV_PI <span class="token operator">*</span> k <span class="token operator">/</span> neighbors<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">float</span> ry <span class="token operator">=</span> <span class="token operator">-</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>radius <span class="token operator">*</span> <span class="token function">sin</span><span class="token punctuation">(</span><span class="token number">2.0</span> <span class="token operator">*</span> CV_PI <span class="token operator">*</span> k <span class="token operator">/</span> neighbors<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//ä¸ºåŒçº¿æ€§æ’å€¼åšå‡†å¤‡</span>        <span class="token comment">//å¯¹é‡‡æ ·ç‚¹åç§»é‡åˆ†åˆ«è¿›è¡Œä¸Šä¸‹å–æ•´</span>        <span class="token keyword">int</span> x1 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">floor</span><span class="token punctuation">(</span>rx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> x2 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">ceil</span><span class="token punctuation">(</span>rx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> y1 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">floor</span><span class="token punctuation">(</span>ry<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> y2 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">ceil</span><span class="token punctuation">(</span>ry<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å°†åæ ‡åç§»é‡æ˜ å°„åˆ°0-1ä¹‹é—´</span>        <span class="token keyword">float</span> tx <span class="token operator">=</span> rx <span class="token operator">-</span> x1<span class="token punctuation">;</span>        <span class="token keyword">float</span> ty <span class="token operator">=</span> ry <span class="token operator">-</span> y1<span class="token punctuation">;</span>        <span class="token comment">//æ ¹æ®0-1ä¹‹é—´çš„xï¼Œyçš„æƒé‡è®¡ç®—å…¬å¼è®¡ç®—æƒé‡ï¼Œæƒé‡ä¸åæ ‡å…·ä½“ä½ç½®æ— å…³ï¼Œä¸åæ ‡é—´çš„å·®å€¼æœ‰å…³</span>        <span class="token keyword">float</span> w1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>tx<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>ty<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">float</span> w2 <span class="token operator">=</span>    tx  <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>ty<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">float</span> w3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>tx<span class="token punctuation">)</span> <span class="token operator">*</span>    ty<span class="token punctuation">;</span>        <span class="token keyword">float</span> w4 <span class="token operator">=</span>    tx  <span class="token operator">*</span>    ty<span class="token punctuation">;</span>        <span class="token comment">//å¾ªç¯å¤„ç†æ¯ä¸ªåƒç´ </span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>radius<span class="token punctuation">;</span>i<span class="token operator">&lt;</span>src<span class="token punctuation">.</span>rows<span class="token operator">-</span>radius<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span>radius<span class="token punctuation">;</span>j<span class="token operator">&lt;</span>src<span class="token punctuation">.</span>cols<span class="token operator">-</span>radius<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                <span class="token comment">//è·å¾—ä¸­å¿ƒåƒç´ ç‚¹çš„ç°åº¦å€¼</span>                _tp center <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//æ ¹æ®åŒçº¿æ€§æ’å€¼å…¬å¼è®¡ç®—ç¬¬kä¸ªé‡‡æ ·ç‚¹çš„ç°åº¦å€¼</span>                <span class="token keyword">float</span> neighbor <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">+</span>x1<span class="token punctuation">,</span>j<span class="token operator">+</span>y1<span class="token punctuation">)</span> <span class="token operator">*</span> w1 <span class="token operator">+</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">+</span>x1<span class="token punctuation">,</span>j<span class="token operator">+</span>y2<span class="token punctuation">)</span> <span class="token operator">*</span>w2 \                    <span class="token operator">+</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">+</span>x2<span class="token punctuation">,</span>j<span class="token operator">+</span>y1<span class="token punctuation">)</span> <span class="token operator">*</span> w3 <span class="token operator">+</span>src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">+</span>x2<span class="token punctuation">,</span>j<span class="token operator">+</span>y2<span class="token punctuation">)</span> <span class="token operator">*</span>w4<span class="token punctuation">;</span>                <span class="token comment">//LBPç‰¹å¾å›¾åƒçš„æ¯ä¸ªé‚»å±…çš„LBPå€¼ç´¯åŠ ï¼Œç´¯åŠ é€šè¿‡ä¸æ“ä½œå®Œæˆï¼Œå¯¹åº”çš„LBPå€¼é€šè¿‡ç§»ä½å–å¾—</span>                dst<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">-</span>radius<span class="token punctuation">,</span>j<span class="token operator">-</span>radius<span class="token punctuation">)</span> <span class="token operator">|=</span> <span class="token punctuation">(</span>neighbor<span class="token operator">></span>center<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>neighbors<span class="token operator">-</span>k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//è¿›è¡Œæ—‹è½¬ä¸å˜å¤„ç†</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>dst<span class="token punctuation">.</span>rows<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>dst<span class="token punctuation">.</span>cols<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">unsigned</span> <span class="token keyword">char</span> currentValue <span class="token operator">=</span> dst<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">unsigned</span> <span class="token keyword">char</span> minValue <span class="token operator">=</span> currentValue<span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>k<span class="token operator">&lt;</span>neighbors<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token comment">//å¾ªç¯å·¦ç§»</span>            <span class="token punctuation">&#123;</span>                <span class="token keyword">unsigned</span> <span class="token keyword">char</span> temp <span class="token operator">=</span> <span class="token punctuation">(</span>currentValue<span class="token operator">>></span><span class="token punctuation">(</span>neighbors<span class="token operator">-</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token punctuation">(</span>currentValue<span class="token operator">&lt;&lt;</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>temp <span class="token operator">&lt;</span> minValue<span class="token punctuation">)</span>                <span class="token punctuation">&#123;</span>                    minValue <span class="token operator">=</span> temp<span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            dst<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span> <span class="token operator">=</span> minValue<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="LBPç­‰ä»·æ¨¡å¼-Uniform-LBP"><a href="#LBPç­‰ä»·æ¨¡å¼-Uniform-LBP" class="headerlink" title="LBPç­‰ä»·æ¨¡å¼(Uniform LBP)"></a>LBPç­‰ä»·æ¨¡å¼(Uniform LBP)</h1><p>â€ƒâ€ƒå¯¹äºä¸€ä¸ªåŠå¾„ä¸ºRçš„åœ†å½¢åŒºåŸŸï¼ŒåŒ…å«æœ‰Pä¸ªé‚»åŸŸé‡‡æ ·ç‚¹ï¼Œåˆ™LBPç®—å­å¯èƒ½äº§ç”Ÿ$2^P$ç§æ¨¡å¼ã€‚éšç€é‚»åŸŸå†…é‡‡æ ·ç‚¹æ•°çš„å¢åŠ ï¼ŒLBPå€¼çš„å–å€¼æ•°é‡å‘ˆæŒ‡æ•°çº§å¢é•¿ã€‚ä¾‹å¦‚$5 \times 5$é‚»åŸŸå†…20ä¸ªé‡‡æ ·ç‚¹ï¼Œåˆ™å¯¹åº”æœ‰$2^{20}$ä¸­æ¨¡å¼ï¼Œè¿‡å¤šçš„äºŒè¿›åˆ¶æ¨¡å¼ä¸åˆ©äºçº¹ç†ä¿¡æ¯çš„æå–ã€åˆ†ç±»ã€è¯†åˆ«ã€‚ä¾‹å¦‚ï¼Œå°†LBPç‰¹å¾ç”¨äºçº¹ç†åˆ†ç±»æˆ–äººè„¸è¯†åˆ«æ—¶ï¼Œä¸€èˆ¬é‡‡ç”¨LBPç‰¹å¾çš„ç»Ÿè®¡ç›´æ–¹å›¾æ¥è¡¨è¾¾å›¾åƒçš„ä¿¡æ¯ï¼Œè€Œè¾ƒå¤šçš„æ¨¡å¼ç§ç±»å°†ä½¿å¾—æ•°æ®é‡è¿‡å¤§ï¼Œä¸”ç›´æ–¹å›¾è¿‡äºç¨€ç–ã€‚å› æ­¤ï¼Œéœ€è¦å¯¹åŸå§‹çš„LBPç‰¹å¾è¿›è¡Œé™ç»´ï¼Œä½¿å¾—æ•°æ®é‡å‡å°‘çš„æƒ…å†µä¸‹èƒ½æœ€å¥½åœ°è¡¨è¾¾å›¾åƒçš„ä¿¡æ¯ã€‚<br>â€ƒâ€ƒä¸ºäº†è§£å†³äºŒè¿›åˆ¶æ¨¡å¼è¿‡å¤šçš„é—®é¢˜ï¼Œæé«˜ç»Ÿè®¡æ€§ï¼ŒOjalaæå‡ºäº†ä¸€ç§â€œç­‰ä»·æ¨¡å¼â€(Uniform Pattern)æ¥å¯¹LBPç‰¹å¾çš„æ¨¡å¼ç§ç±»è¿›è¡Œé™ç»´ã€‚Ojalaè®¤ä¸ºï¼Œåœ¨å®é™…å›¾åƒä¸­ï¼Œç»å¤§æ•°LBPæ¨¡å¼æœ€å¤šåªåŒ…å«ä¸¤æ¬¡ä»0åˆ°1æˆ–è€…ä»1åˆ°0çš„è·³å˜ï¼Œâ€œç­‰ä»·æ¨¡å¼â€å®šä¹‰ä¸ºï¼šå½“æŸä¸ªLBPæ‰€å¯¹åº”çš„å¾ªç¯äºŒè¿›åˆ¶æ•°ä»0åˆ°1æˆ–è€…ä»1åˆ°0æœ€å¤šæœ‰ä¸¤æ¬¡è·³å˜æ—¶ï¼Œè¯¥LBPæ‰€å¯¹åº”çš„äºŒè¿›åˆ¶å°±æ˜¯ä¸€ä¸ªç­‰ä»·æ¨¡å¼ç±»ã€‚å¦‚00000000(0æ¬¡è·³å˜)ï¼Œ11000011(2æ¬¡è·³å˜)éƒ½æ˜¯ç­‰ä»·æ¨¡å¼ç±»ã€‚é™¤ç­‰ä»·æ¨¡å¼ç±»ä»¥å¤–çš„æ¨¡å¼éƒ½å½’ä¸ºå¦ä¸€ç±»ï¼Œç§°ä¸ºæ··åˆæ¨¡å¼ç±»ï¼Œä¾‹å¦‚10010111(å…±4æ¬¡è·³å˜)ã€‚é€šè¿‡æ”¹è¿›ï¼ŒäºŒè¿›åˆ¶æ¨¡å¼çš„ç§ç±»å¤§å¤§å‡å°‘ï¼Œç”±åŸæ¥çš„$2^P$ä¸­é™ä¸º$P(P-1)+2+1$ç§ï¼Œå…¶ä¸­$P(P-1)$ä¸º2æ¬¡è·³å˜çš„æ¨¡å¼æ•°ï¼Œ2ä¸º0æ¬¡è·³å˜(å…¨â€0â€æˆ–å…¨â€1â€)çš„æ¨¡å¼æ•°ï¼Œ1ä¸ºæ··åˆæ¨¡å¼çš„æ•°é‡ï¼Œç”±äºæ˜¯å¾ªç¯äºŒè¿›åˆ¶æ•°ï¼Œå› æ­¤â€™0â€™ã€â€™1â€™è·³å˜æ¬¡æ•°ä¸å¯èƒ½ä¸ºå¥‡æ•°æ¬¡ã€‚å¯¹äº$3 \times 3$é‚»åŸŸå†…8ä¸ªé‡‡æ ·ç‚¹æ¥è¯´ï¼ŒäºŒè¿›åˆ¶æ¨¡å¼ç”±åŸå§‹çš„256ç§å˜ä¸º59ç§ã€‚è¿™ä½¿å¾—ç‰¹å¾å‘é‡çš„ç»´æ•°å¤§å¤§å‡å°‘ï¼Œå¹¶ä¸”å¯ä»¥å‡å°‘é«˜é¢‘å™ªå£°å¸¦æ¥çš„å½±å“ã€‚å®éªŒè¡¨æ˜ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç­‰ä»·æ¨¡å¼çš„æ•°ç›®å å…¨éƒ¨æ¨¡å¼çš„90%ä»¥ä¸Šï¼Œå¯ä»¥æœ‰æ•ˆå¯¹æ•°æ®è¿›è¡Œé™ç»´ã€‚ä¸‹å›¾ä¸º58ç§ç­‰ä»·æ¨¡å¼ç±»ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96%E4%B9%8BLBP%E7%89%B9%E5%BE%81/593f48869b16f.png"></p><p>åœ¨å…·ä½“å®ç°ä¸­ï¼Œç­‰ä»·æ¨¡å¼ç±»æŒ‰å€¼é€’å¢ä»1å¼€å§‹ç¼–ç ï¼Œæ··åˆæ¨¡å¼ç±»ç¼–ç ä¸º0ï¼Œå› æ­¤å¾—åˆ°çš„LBPç‰¹å¾å›¾æ•´ä½“åæš—ã€‚LBPç­‰ä»·æ¨¡å¼çš„å®ç°ä»£ç å¦‚ä¸‹ï¼š  </p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">//ç­‰ä»·æ¨¡å¼LBPç‰¹å¾è®¡ç®—</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">_tp</span><span class="token operator">></span><span class="token keyword">void</span> <span class="token function">getUniformPatternLBPFeature</span><span class="token punctuation">(</span>InputArray _src<span class="token punctuation">,</span>OutputArray _dst<span class="token punctuation">,</span><span class="token keyword">int</span> radius<span class="token punctuation">,</span><span class="token keyword">int</span> neighbors<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    Mat src <span class="token operator">=</span> _src<span class="token punctuation">.</span><span class="token function">getMat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//LBPç‰¹å¾å›¾åƒçš„è¡Œæ•°å’Œåˆ—æ•°çš„è®¡ç®—è¦å‡†ç¡®</span>    _dst<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span>rows<span class="token operator">-</span><span class="token number">2</span><span class="token operator">*</span>radius<span class="token punctuation">,</span>src<span class="token punctuation">.</span>cols<span class="token operator">-</span><span class="token number">2</span><span class="token operator">*</span>radius<span class="token punctuation">,</span>CV_8UC1<span class="token punctuation">)</span><span class="token punctuation">;</span>    Mat dst <span class="token operator">=</span> _dst<span class="token punctuation">.</span><span class="token function">getMat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    dst<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//LBPç‰¹å¾å€¼å¯¹åº”å›¾åƒç°åº¦ç¼–ç è¡¨ï¼Œç›´æ¥é»˜è®¤é‡‡æ ·ç‚¹ä¸º8ä½</span>    uchar temp <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    uchar table<span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">256</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">getHopTimes</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            table<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>            temp<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//æ˜¯å¦è¿›è¡ŒUniformPatternç¼–ç çš„æ ‡å¿—</span>    <span class="token keyword">bool</span> flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token comment">//è®¡ç®—LBPç‰¹å¾å›¾</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>k<span class="token operator">&lt;</span>neighbors<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>k<span class="token operator">==</span>neighbors<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//è®¡ç®—é‡‡æ ·ç‚¹å¯¹äºä¸­å¿ƒç‚¹åæ ‡çš„åç§»é‡rxï¼Œry</span>        <span class="token keyword">float</span> rx <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>radius <span class="token operator">*</span> <span class="token function">cos</span><span class="token punctuation">(</span><span class="token number">2.0</span> <span class="token operator">*</span> CV_PI <span class="token operator">*</span> k <span class="token operator">/</span> neighbors<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">float</span> ry <span class="token operator">=</span> <span class="token operator">-</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>radius <span class="token operator">*</span> <span class="token function">sin</span><span class="token punctuation">(</span><span class="token number">2.0</span> <span class="token operator">*</span> CV_PI <span class="token operator">*</span> k <span class="token operator">/</span> neighbors<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//ä¸ºåŒçº¿æ€§æ’å€¼åšå‡†å¤‡</span>        <span class="token comment">//å¯¹é‡‡æ ·ç‚¹åç§»é‡åˆ†åˆ«è¿›è¡Œä¸Šä¸‹å–æ•´</span>        <span class="token keyword">int</span> x1 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">floor</span><span class="token punctuation">(</span>rx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> x2 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">ceil</span><span class="token punctuation">(</span>rx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> y1 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">floor</span><span class="token punctuation">(</span>ry<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> y2 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">ceil</span><span class="token punctuation">(</span>ry<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å°†åæ ‡åç§»é‡æ˜ å°„åˆ°0-1ä¹‹é—´</span>        <span class="token keyword">float</span> tx <span class="token operator">=</span> rx <span class="token operator">-</span> x1<span class="token punctuation">;</span>        <span class="token keyword">float</span> ty <span class="token operator">=</span> ry <span class="token operator">-</span> y1<span class="token punctuation">;</span>        <span class="token comment">//æ ¹æ®0-1ä¹‹é—´çš„xï¼Œyçš„æƒé‡è®¡ç®—å…¬å¼è®¡ç®—æƒé‡ï¼Œæƒé‡ä¸åæ ‡å…·ä½“ä½ç½®æ— å…³ï¼Œä¸åæ ‡é—´çš„å·®å€¼æœ‰å…³</span>        <span class="token keyword">float</span> w1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>tx<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>ty<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">float</span> w2 <span class="token operator">=</span>    tx  <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>ty<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">float</span> w3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>tx<span class="token punctuation">)</span> <span class="token operator">*</span>    ty<span class="token punctuation">;</span>        <span class="token keyword">float</span> w4 <span class="token operator">=</span>    tx  <span class="token operator">*</span>    ty<span class="token punctuation">;</span>        <span class="token comment">//å¾ªç¯å¤„ç†æ¯ä¸ªåƒç´ </span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>radius<span class="token punctuation">;</span>i<span class="token operator">&lt;</span>src<span class="token punctuation">.</span>rows<span class="token operator">-</span>radius<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span>radius<span class="token punctuation">;</span>j<span class="token operator">&lt;</span>src<span class="token punctuation">.</span>cols<span class="token operator">-</span>radius<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                <span class="token comment">//è·å¾—ä¸­å¿ƒåƒç´ ç‚¹çš„ç°åº¦å€¼</span>                _tp center <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//æ ¹æ®åŒçº¿æ€§æ’å€¼å…¬å¼è®¡ç®—ç¬¬kä¸ªé‡‡æ ·ç‚¹çš„ç°åº¦å€¼</span>                <span class="token keyword">float</span> neighbor <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">+</span>x1<span class="token punctuation">,</span>j<span class="token operator">+</span>y1<span class="token punctuation">)</span> <span class="token operator">*</span> w1 <span class="token operator">+</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">+</span>x1<span class="token punctuation">,</span>j<span class="token operator">+</span>y2<span class="token punctuation">)</span> <span class="token operator">*</span>w2 \                    <span class="token operator">+</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">+</span>x2<span class="token punctuation">,</span>j<span class="token operator">+</span>y1<span class="token punctuation">)</span> <span class="token operator">*</span> w3 <span class="token operator">+</span>src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>_tp<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">+</span>x2<span class="token punctuation">,</span>j<span class="token operator">+</span>y2<span class="token punctuation">)</span> <span class="token operator">*</span>w4<span class="token punctuation">;</span>                <span class="token comment">//LBPç‰¹å¾å›¾åƒçš„æ¯ä¸ªé‚»å±…çš„LBPå€¼ç´¯åŠ ï¼Œç´¯åŠ é€šè¿‡ä¸æ“ä½œå®Œæˆï¼Œå¯¹åº”çš„LBPå€¼é€šè¿‡ç§»ä½å–å¾—</span>                dst<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">-</span>radius<span class="token punctuation">,</span>j<span class="token operator">-</span>radius<span class="token punctuation">)</span> <span class="token operator">|=</span> <span class="token punctuation">(</span>neighbor<span class="token operator">></span>center<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>neighbors<span class="token operator">-</span>k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//è¿›è¡ŒLBPç‰¹å¾çš„UniformPatternç¼–ç </span>                <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span>                <span class="token punctuation">&#123;</span>                    dst<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">-</span>radius<span class="token punctuation">,</span>j<span class="token operator">-</span>radius<span class="token punctuation">)</span> <span class="token operator">=</span> table<span class="token punctuation">[</span>dst<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">-</span>radius<span class="token punctuation">,</span>j<span class="token operator">-</span>radius<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">//è®¡ç®—è·³å˜æ¬¡æ•°</span><span class="token keyword">int</span> <span class="token function">getHopTimes</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    bitset<span class="token operator">&lt;</span><span class="token number">8</span><span class="token operator">></span> binaryCode <span class="token operator">=</span> n<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">8</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>binaryCode<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> binaryCode<span class="token punctuation">[</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            count<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> count<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ­¤å¤–ï¼Œæ—‹è½¬ä¸å˜çš„Uniform LBPç®—å­çš„ç­‰ä»·æ¨¡å¼ç±»çš„æ•°ç›®ä¸ºP+1ä¸ªï¼Œå¯¹äº8ä¸ªé‡‡æ ·ç‚¹ï¼ŒåŸºäºç­‰ä»·æ¨¡å¼çš„æ—‹è½¬ä¸å˜LBPæ¨¡å¼åªæœ‰9ä¸ªè¾“å‡ºï¼Œè¯¥æ¨¡å¼å¯¹äºä¸Šå›¾çš„Uniform LBPï¼Œæ¯ä¸€è¡Œéƒ½æ˜¯æ—‹è½¬ä¸å˜çš„ï¼Œå¯¹åº”åŒä¸€ä¸ªç¼–ç å€¼ã€‚</p><h1 id="å¤šå°ºåº¦LBP-Multiscale-Block-LBP"><a href="#å¤šå°ºåº¦LBP-Multiscale-Block-LBP" class="headerlink" title="å¤šå°ºåº¦LBP(Multiscale Block LBP)"></a>å¤šå°ºåº¦LBP(Multiscale Block LBP)</h1><p>â€ƒâ€ƒåŸºæœ¬LBPç®—å­è·å–çš„æ˜¯å•ä¸ªåƒç´ å’Œå…¶é‚»åŸŸåƒç´ é—´çš„çº¹ç†ä¿¡æ¯ï¼Œå±äºå¾®è§‚ç‰¹å¾ã€‚ä¸­ç§‘é™¢çš„ç ”ç©¶äººå‘˜é’ˆå¯¹æ­¤æå‡ºäº†ä¸€ç§å¤šå°ºåº¦çš„LBPç®—å­ï¼Œå°†å›¾åƒåˆ†ä¸ºä¸€ä¸ªä¸ªå—(block)ï¼Œå†å°†æ¯ä¸ªå—åˆ†ä¸ºä¸€ä¸ªä¸ªçš„å°è¿é€šåŒºåŸŸ(cell)ï¼Œç±»ä¼¼äºHOGç‰¹å¾ï¼Œcellå†…çš„ç°åº¦å¹³å‡å€¼æˆ–è€…å’Œå€¼ä½œä¸ºå½“å‰cellçš„ç°åº¦é˜ˆå€¼ï¼Œä¸é‚»åŸŸcellè¿›è¡Œæ¯”è¾ƒå¾—åˆ°LBPå€¼ï¼Œç”Ÿæˆçš„ç‰¹å¾å³ä¸ºMB-LBPï¼Œblockå¤§å°ä¸º$3 \times 3$ï¼Œcellå¤§å°ä¸º1ï¼Œå°±æ˜¯åŸå§‹çš„LBPç‰¹å¾ã€‚ä¸‹å›¾æ‰€ç¤ºblockä¸º$9 \times 9$ï¼Œcellä¸º$3 \times 3$ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96%E4%B9%8BLBP%E7%89%B9%E5%BE%81/593f4e9ec38c4.jpg" title="MB-LBPç‰¹å¾"></p><p>MB-LBPç‰¹å¾çš„å®ç°ä»£ç å¦‚ä¸‹ï¼š  </p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">//MB-LBPç‰¹å¾çš„è®¡ç®—</span><span class="token keyword">void</span> <span class="token function">getMultiScaleBlockLBPFeature</span><span class="token punctuation">(</span>InputArray _src<span class="token punctuation">,</span>OutputArray _dst<span class="token punctuation">,</span><span class="token keyword">int</span> scale<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    Mat src <span class="token operator">=</span> _src<span class="token punctuation">.</span><span class="token function">getMat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Mat dst <span class="token operator">=</span> _dst<span class="token punctuation">.</span><span class="token function">getMat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//å®šä¹‰å¹¶è®¡ç®—ç§¯åˆ†å›¾åƒ</span>    <span class="token keyword">int</span> cellSize <span class="token operator">=</span> scale <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> offset <span class="token operator">=</span> cellSize <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>    Mat <span class="token function">cellImage</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span>rows<span class="token operator">-</span><span class="token number">2</span><span class="token operator">*</span>offset<span class="token punctuation">,</span>src<span class="token punctuation">.</span>cols<span class="token operator">-</span><span class="token number">2</span><span class="token operator">*</span>offset<span class="token punctuation">,</span>CV_8UC1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>offset<span class="token punctuation">;</span>i<span class="token operator">&lt;</span>src<span class="token punctuation">.</span>rows<span class="token operator">-</span>offset<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span>offset<span class="token punctuation">;</span>j<span class="token operator">&lt;</span>src<span class="token punctuation">.</span>cols<span class="token operator">-</span>offset<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> temp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> m<span class="token operator">=</span><span class="token operator">-</span>offset<span class="token punctuation">;</span>m<span class="token operator">&lt;</span>offset<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>m<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token operator">=</span><span class="token operator">-</span>offset<span class="token punctuation">;</span>n<span class="token operator">&lt;</span>offset<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>n<span class="token operator">++</span><span class="token punctuation">)</span>                <span class="token punctuation">&#123;</span>                    temp <span class="token operator">+=</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">+</span>n<span class="token punctuation">,</span>j<span class="token operator">+</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            temp <span class="token operator">/=</span> <span class="token punctuation">(</span>cellSize<span class="token operator">*</span>cellSize<span class="token punctuation">)</span><span class="token punctuation">;</span>            cellImage<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token operator">-</span>cellSize<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>j<span class="token operator">-</span>cellSize<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">uchar</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token generic-function"><span class="token function">getOriginLBPFeature</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">></span></span></span><span class="token punctuation">(</span>cellImage<span class="token punctuation">,</span>dst<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¤šå°ºåº¦æ¨¡å¼ä¸‹åŒæ ·ç”¨åˆ°äº†é™ç»´ï¼Œè®ºæ–‡ä¸­æ˜¯ç›´æ¥é‡‡æ ·ç»Ÿè®¡çš„æ–¹æ³•å¯¹ä¸åŒå°ºåº¦çš„LBPç®—å­çš„æ¨¡å¼è¿›è¡Œç»Ÿè®¡ï¼Œé€‰å–å æ¯”ä¾‹è¾ƒé«˜çš„æ¨¡å¼ï¼Œè€Œä¸æ˜¯åˆ©ç”¨è·³å˜è§„åˆ™ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯å°†å¾—åˆ°çš„MB-LBPç‰¹å¾è®¡ç®—ç»Ÿè®¡ç›´æ–¹å›¾ï¼Œé€šè¿‡å¯¹binä¸­çš„æ•°å€¼è¿›è¡Œæ’åºä»¥åŠæƒè¡¡ï¼Œå°†æ’åºåœ¨å‰N(63)ä½çš„ç‰¹å¾å€¼çœ‹ä½œæ˜¯ç­‰ä»·æ¨¡å¼ç±»ï¼Œå…¶ä½™çš„ä¸ºæ··åˆæ¨¡å¼ç±»ï¼Œæ€»å…±ä¸ºN+1ç±»ï¼Œè®ºæ–‡ä¸­ç§°ä¹‹ä¸º(SEMB-LBP, Statistically Effective MB-LBP)ã€‚<br>SEMB-LBPçš„å®ç°ä»£ç å¦‚ä¸‹ï¼š  </p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">//æ±‚SEMB-LBP</span><span class="token keyword">void</span> <span class="token function">SEMB_LBPFeature</span><span class="token punctuation">(</span>InputArray _src<span class="token punctuation">,</span>OutputArray _dst<span class="token punctuation">,</span><span class="token keyword">int</span> scale<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    Mat dst<span class="token operator">=</span>_dst<span class="token punctuation">.</span><span class="token function">getMat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Mat MB_LBPImage<span class="token punctuation">;</span>    <span class="token function">getMultiScaleBlockLBPFeature</span><span class="token punctuation">(</span>_src<span class="token punctuation">,</span>MB_LBPImage<span class="token punctuation">,</span>scale<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//imshow("dst",dst);</span>    Mat histMat<span class="token punctuation">;</span>    <span class="token keyword">int</span> histSize <span class="token operator">=</span> <span class="token number">256</span><span class="token punctuation">;</span>    <span class="token keyword">float</span> range<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token keyword">float</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">float</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> <span class="token keyword">float</span><span class="token operator">*</span> ranges <span class="token operator">=</span> <span class="token punctuation">&#123;</span>range<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">//è®¡ç®—LBPç‰¹å¾å€¼0-255çš„ç›´æ–¹å›¾</span>    <span class="token function">calcHist</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>MB_LBPImage<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token function">Mat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>histMat<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>histSize<span class="token punctuation">,</span><span class="token operator">&amp;</span>ranges<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    histMat<span class="token punctuation">.</span><span class="token function">reshape</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span> <span class="token function">histVector</span><span class="token punctuation">(</span>histMat<span class="token punctuation">.</span>rows<span class="token operator">*</span>histMat<span class="token punctuation">.</span>cols<span class="token punctuation">)</span><span class="token punctuation">;</span>    uchar table<span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>table<span class="token punctuation">,</span><span class="token number">64</span><span class="token punctuation">,</span><span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>histMat<span class="token punctuation">.</span><span class="token function">isContinuous</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token comment">//histVector = (int *)(histMat.data);</span>        <span class="token comment">//å°†ç›´æ–¹å›¾histMatå˜ä¸ºvectorå‘é‡histVector</span>        histVector<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token operator">*</span><span class="token punctuation">)</span>histMat<span class="token punctuation">.</span>datastart<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token operator">*</span><span class="token punctuation">)</span>histMat<span class="token punctuation">.</span>dataend<span class="token punctuation">)</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span> <span class="token function">histVectorCopy</span><span class="token punctuation">(</span>histVector<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å¯¹histVectorè¿›è¡Œæ’åºï¼Œå³å¯¹LBPç‰¹å¾å€¼çš„æ•°é‡è¿›è¡Œæ’åºï¼Œé™åºæ’åˆ—</span>        <span class="token function">sort</span><span class="token punctuation">(</span>histVector<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>histVector<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token generic-function"><span class="token function">greater</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">63</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>histVectorCopy<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>histVectorCopy<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span>histVector<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token punctuation">&#123;</span>                    <span class="token comment">//å¾—åˆ°ç±»ä¼¼äºUniformçš„ç¼–ç è¡¨</span>                    table<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span>i<span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    dst <span class="token operator">=</span> MB_LBPImage<span class="token punctuation">;</span>    <span class="token comment">//æ ¹æ®ç¼–ç è¡¨å¾—åˆ°SEMB-LBP</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>dst<span class="token punctuation">.</span>rows<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>dst<span class="token punctuation">.</span>cols<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            dst<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span> <span class="token operator">=</span> table<span class="token punctuation">[</span>dst<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">></span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å›¾åƒçš„LBPç‰¹å¾å‘é‡-Local-Binary-Patterns-Histograms"><a href="#å›¾åƒçš„LBPç‰¹å¾å‘é‡-Local-Binary-Patterns-Histograms" class="headerlink" title="å›¾åƒçš„LBPç‰¹å¾å‘é‡(Local Binary Patterns Histograms)"></a>å›¾åƒçš„LBPç‰¹å¾å‘é‡(Local Binary Patterns Histograms)</h1><p>â€ƒâ€ƒå¯¹å›¾åƒä¸­çš„æ¯ä¸ªåƒç´ æ±‚å–LBPç‰¹å¾å€¼å¯å¾—åˆ°å›¾åƒçš„LBPç‰¹å¾å›¾è°±ï¼Œä½†ä¸€èˆ¬ä¸ç›´æ¥å°†LBPå›¾è°±ä½œä¸ºç‰¹å¾å‘é‡ç”¨äºåˆ†ç±»è¯†åˆ«ï¼Œè€Œæ˜¯ç±»ä¼¼äºHOGç‰¹å¾ï¼Œé‡‡ç”¨LBPç‰¹å¾çš„ç»Ÿè®¡ç›´æ–¹å›¾ä½œä¸ºç‰¹å¾å‘é‡ã€‚å°†LBPç‰¹å¾å›¾è°±åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªå­è¿é€šåŒºåŸŸï¼Œå¹¶æå–æ¯ä¸ªå±€éƒ¨å—çš„ç›´æ–¹å›¾ï¼Œç„¶åå°†è¿™äº›ç›´æ–¹å›¾ä¸€æ¬¡è¿æ¥åœ¨ä¸€èµ·å½¢æˆLBPç‰¹å¾çš„ç»Ÿè®¡ç›´æ–¹å›¾(LBPH)ï¼Œå³å¯ç”¨äºåˆ†ç±»è¯†åˆ«çš„LBPç‰¹å¾å‘é‡ã€‚<br>LBPç‰¹å¾å‘é‡çš„å…·ä½“è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li>æŒ‰ç…§ä¸Šè¿°ç®—æ³•è®¡ç®—å›¾åƒçš„LBPç‰¹å¾å›¾è°±</li><li>å°†LBPç‰¹å¾å›¾è°±åˆ†å—ï¼Œä¾‹å¦‚åˆ†æˆ$8 \times 8 &#x3D; 64$ä¸ªåŒºåŸŸ</li><li>è®¡ç®—æ¯ä¸ªå­åŒºåŸŸä¸­LBPç‰¹å¾å€¼çš„ç»Ÿè®¡ç›´æ–¹å›¾ï¼Œå¹¶è¿›è¡Œå½’ä¸€åŒ–ï¼Œç›´æ–¹å›¾å¤§å°ä¸º$1 \times numPatterns$</li><li>å°†æ‰€æœ‰åŒºåŸŸçš„ç»Ÿè®¡ç›´æ–¹å›¾æŒ‰ç©ºé—´é¡ºåºä¾æ¬¡è¿æ¥ï¼Œå¾—åˆ°æ•´å¹…å›¾åƒçš„LBPç‰¹å¾å‘é‡ï¼Œå¤§å°ä¸º$1 \times (numPatterns \times 64)$</li><li>ä»è¶³å¤Ÿæ•°é‡çš„æ ·æœ¬ä¸­æå–LBPç‰¹å¾ï¼Œå¹¶åˆ©ç”¨æœºå™¨å­¦ä¹ çš„æ–¹æ³•è¿›è¡Œè®­ç»ƒå¾—åˆ°æ¨¡å‹ï¼Œç”¨äºåˆ†ç±»å’Œè¯†åˆ«ç­‰é¢†åŸŸã€‚</li></ul><p>â€ƒâ€ƒå¯¹äºLBPç‰¹å¾å‘é‡çš„ç»´åº¦ï¼Œé‚»åŸŸé‡‡æ ·ç‚¹ä¸º8ä¸ªï¼Œå¦‚æœæ˜¯åŸå§‹çš„LBPç‰¹å¾ï¼Œå…¶æ¨¡å¼æ•°é‡ä¸º256ï¼Œç‰¹å¾ç»´æ•°ä¸º$64 \times 256 &#x3D; 16384$ï¼›å¦‚æœæ˜¯Uniform LBPç‰¹å¾ï¼Œå…¶æ¨¡å¼æ•°é‡ä¸º59ï¼Œç‰¹å¾ç»´æ•°ä¸º$64 \times 59 &#x3D; 3776$ï¼Œä½¿ç”¨ç­‰ä»·æ¨¡å¼ç‰¹å¾ï¼Œå¯ä»¥æœ‰æ•ˆè¿›è¡Œæ•°æ®é™ç»´ï¼Œè€Œå¯¹æ¨¡å‹æ€§èƒ½å´æ— è¾ƒå¤§å½±å“ã€‚<br>LBPç‰¹å¾å‘é‡çš„å®ç°ä»£ç å¦‚ä¸‹ï¼š  </p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">//è®¡ç®—LBPç‰¹å¾å›¾åƒçš„ç›´æ–¹å›¾LBPH</span>Mat <span class="token function">getLBPH</span><span class="token punctuation">(</span>InputArray _src<span class="token punctuation">,</span><span class="token keyword">int</span> numPatterns<span class="token punctuation">,</span><span class="token keyword">int</span> grid_x<span class="token punctuation">,</span><span class="token keyword">int</span> grid_y<span class="token punctuation">,</span><span class="token keyword">bool</span> normed<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    Mat src <span class="token operator">=</span> _src<span class="token punctuation">.</span><span class="token function">getMat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> width <span class="token operator">=</span> src<span class="token punctuation">.</span>cols <span class="token operator">/</span> grid_x<span class="token punctuation">;</span>    <span class="token keyword">int</span> height <span class="token operator">=</span> src<span class="token punctuation">.</span>rows <span class="token operator">/</span> grid_y<span class="token punctuation">;</span>    <span class="token comment">//å®šä¹‰LBPHçš„è¡Œå’Œåˆ—ï¼Œgrid_x*grid_yè¡¨ç¤ºå°†å›¾åƒåˆ†å‰²æˆè¿™ä¹ˆäº›å—ï¼ŒnumPatternsè¡¨ç¤ºLBPå€¼çš„æ¨¡å¼ç§ç±»</span>    Mat result <span class="token operator">=</span> <span class="token class-name">Mat</span><span class="token double-colon punctuation">::</span><span class="token function">zeros</span><span class="token punctuation">(</span>grid_x <span class="token operator">*</span> grid_y<span class="token punctuation">,</span>numPatterns<span class="token punctuation">,</span>CV_32FC1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> result<span class="token punctuation">.</span><span class="token function">reshape</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> resultRowIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token comment">//å¯¹å›¾åƒè¿›è¡Œåˆ†å‰²ï¼Œåˆ†å‰²æˆgrid_x*grid_yå—ï¼Œgrid_xï¼Œgrid_yé»˜è®¤ä¸º8</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>grid_x<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>grid_y<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token comment">//å›¾åƒåˆ†å—</span>            Mat src_cell <span class="token operator">=</span> <span class="token function">Mat</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span><span class="token function">Range</span><span class="token punctuation">(</span>i<span class="token operator">*</span>height<span class="token punctuation">,</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>height<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">Range</span><span class="token punctuation">(</span>j<span class="token operator">*</span>width<span class="token punctuation">,</span><span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>width<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//è®¡ç®—ç›´æ–¹å›¾</span>            Mat hist_cell <span class="token operator">=</span> <span class="token function">getLocalRegionLBPH</span><span class="token punctuation">(</span>src_cell<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">(</span>numPattern<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//å°†ç›´æ–¹å›¾æ”¾åˆ°resultä¸­</span>            Mat rowResult <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">row</span><span class="token punctuation">(</span>resultRowIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>            hist_cell<span class="token punctuation">.</span><span class="token function">reshape</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">convertTo</span><span class="token punctuation">(</span>rowResult<span class="token punctuation">,</span>CV_32FC1<span class="token punctuation">)</span><span class="token punctuation">;</span>            resultRowIndex<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> result<span class="token punctuation">.</span><span class="token function">reshape</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//è®¡ç®—ä¸€ä¸ªLBPç‰¹å¾å›¾åƒå—çš„ç›´æ–¹å›¾</span>Mat <span class="token function">getLocalRegionLBPH</span><span class="token punctuation">(</span><span class="token keyword">const</span> Mat<span class="token operator">&amp;</span> src<span class="token punctuation">,</span><span class="token keyword">int</span> minValue<span class="token punctuation">,</span><span class="token keyword">int</span> maxValue<span class="token punctuation">,</span><span class="token keyword">bool</span> normed<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//å®šä¹‰å­˜å‚¨ç›´æ–¹å›¾çš„çŸ©é˜µ</span>    Mat result<span class="token punctuation">;</span>    <span class="token comment">//è®¡ç®—å¾—åˆ°ç›´æ–¹å›¾binçš„æ•°ç›®ï¼Œç›´æ–¹å›¾æ•°ç»„çš„å¤§å°</span>    <span class="token keyword">int</span> histSize <span class="token operator">=</span> maxValue <span class="token operator">-</span> minValue <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">//å®šä¹‰ç›´æ–¹å›¾æ¯ä¸€ç»´çš„binçš„å˜åŒ–èŒƒå›´</span>    <span class="token keyword">float</span> range<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>minValue<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>maxValue <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">//å®šä¹‰ç›´æ–¹å›¾æ‰€æœ‰binçš„å˜åŒ–èŒƒå›´</span>    <span class="token keyword">const</span> <span class="token keyword">float</span><span class="token operator">*</span> ranges <span class="token operator">=</span> <span class="token punctuation">&#123;</span> range <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">//è®¡ç®—ç›´æ–¹å›¾ï¼Œsrcæ˜¯è¦è®¡ç®—ç›´æ–¹å›¾çš„å›¾åƒï¼Œ1æ˜¯è¦è®¡ç®—ç›´æ–¹å›¾çš„å›¾åƒæ•°ç›®ï¼Œ0æ˜¯è®¡ç®—ç›´æ–¹å›¾æ‰€ç”¨çš„å›¾åƒçš„é€šé“åºå·ï¼Œä»0ç´¢å¼•</span>    <span class="token comment">//Mat()æ˜¯è¦ç”¨çš„æ©æ¨¡ï¼Œresultä¸ºè¾“å‡ºçš„ç›´æ–¹å›¾ï¼Œ1ä¸ºè¾“å‡ºçš„ç›´æ–¹å›¾çš„ç»´åº¦ï¼ŒhistSizeç›´æ–¹å›¾åœ¨æ¯ä¸€ç»´çš„å˜åŒ–èŒƒå›´</span>    <span class="token comment">//rangesï¼Œæ‰€æœ‰ç›´æ–¹å›¾çš„å˜åŒ–èŒƒå›´ï¼ˆèµ·ç‚¹å’Œç»ˆç‚¹ï¼‰</span>    <span class="token function">calcHist</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>src<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token function">Mat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>result<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>histSize<span class="token punctuation">,</span><span class="token operator">&amp;</span>ranges<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//å½’ä¸€åŒ–</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>normed<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        result <span class="token operator">/=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>src<span class="token punctuation">.</span><span class="token function">total</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//ç»“æœè¡¨ç¤ºæˆåªæœ‰1è¡Œçš„çŸ©é˜µ</span>    <span class="token keyword">return</span> result<span class="token punctuation">.</span><span class="token function">reshape</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â€ƒâ€ƒé™¤äº†ä»¥ä¸Šå‡ ç§æ¯”è¾ƒç»å…¸çš„LBPç‰¹å¾å¤–ï¼Œè¿˜æœ‰è¯¸å¤šå˜ç§ï¼Œå¦‚TLBP(ä¸­å¿ƒåƒç´ ä¸å‘¨å›´æ‰€æœ‰åƒç´ æ¯”è¾ƒï¼Œè€Œä¸æ˜¯æ ¹æ®é‡‡æ ·ç‚¹çš„æ•°ç›®)ï¼ŒDLBP(ç¼–ç 4é‚»åŸŸçš„ç°åº¦å˜åŒ–ï¼Œæ¯ä¸ªæ–¹å‘ä¸Šç”¨ä¸¤ä¸ªæ¯”ç‰¹ç¼–ç )ï¼ŒMLBP(å°†ä¸­å¿ƒåƒç´ å€¼æ›¿æ¢ä¸ºé‡‡æ ·ç‚¹åƒç´ çš„å¹³å‡å€¼)ï¼ŒVLBPï¼ŒRGB-LBPç­‰ã€‚</p><h1 id="LBPç‰¹å¾çš„åº”ç”¨"><a href="#LBPç‰¹å¾çš„åº”ç”¨" class="headerlink" title="LBPç‰¹å¾çš„åº”ç”¨"></a>LBPç‰¹å¾çš„åº”ç”¨</h1><h2 id="ç›®æ ‡æ£€æµ‹"><a href="#ç›®æ ‡æ£€æµ‹" class="headerlink" title="ç›®æ ‡æ£€æµ‹"></a>ç›®æ ‡æ£€æµ‹</h2><p>â€ƒâ€ƒäººè„¸æ£€æµ‹ä¸­æ¯”è¾ƒå…¸å‹çš„æ¨¡å‹æ˜¯Haarç‰¹å¾ + AdaBooståˆ†ç±»å™¨ï¼Œç›®å‰OpenCVä¹Ÿæ”¯æŒLBP + AdaBoostå’ŒHOG + AdaBoostçš„æ–¹æ³•è¿›è¡Œç›®æ ‡æ£€æµ‹ï¼Œè€Œä¸”LBPç‰¹å¾çš„è®­ç»ƒé€Ÿåº¦è¾ƒå¿«ï¼Œé€‚ç”¨äºå®æ—¶æ£€æµ‹åœºæ™¯ã€‚</p><h2 id="äººè„¸è¯†åˆ«"><a href="#äººè„¸è¯†åˆ«" class="headerlink" title="äººè„¸è¯†åˆ«"></a>äººè„¸è¯†åˆ«</h2><p>â€ƒâ€ƒäººè„¸è¯†åˆ«ä¸­LBPç‰¹å¾å‘é‡ä¸»è¦æ˜¯ç”¨äºç›´æ–¹å›¾çš„æ¯”è¾ƒï¼Œé€šè¿‡è·ç¦»åº¦é‡çš„æ–¹å¼(ä¾‹å¦‚æ–¹å·®)æ‰¾åˆ°è®­ç»ƒæ•°æ®ä¸­ä¸è¾“å…¥å›¾åƒè·ç¦»æœ€å°çš„ç‰¹å¾å‘é‡ï¼Œå°†å…¶å¯¹åº”çš„ç±»åˆ«ä½œä¸ºè¯†åˆ«ç»“æœè¾“å‡ºã€‚</p><h1 id="åŸæ–‡é“¾æ¥"><a href="#åŸæ–‡é“¾æ¥" class="headerlink" title="åŸæ–‡é“¾æ¥"></a>åŸæ–‡é“¾æ¥</h1><p><a href="https://senitco.github.io/2017/06/12/image-feature-lbp/">å›¾åƒç‰¹å¾æå–ä¹‹LBPç‰¹å¾</a></p><h1 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h1><ul><li><a href="https://pdfs.semanticscholar.org/8e01/f162182365c7a275fb6b7ecaafe7b9719673.pdf">Paper: Gray Scale and Rotation Invariant Texture Classification with Local Binary Patterns</a></li><li><a href="https://pdfs.semanticscholar.org/33fa/d977a6b317cfd6ecd43d978687e0df8a7338.pdf">Paper: Multiresolution Gray Scale and Rotation Invariant Texture Classification with Local Binary Patterns</a></li><li><a href="http://www.ee.oulu.fi/mvg/files/pdf/pdf_494.pdf">Paper: Face Recognition with Local Binary Patterns</a></li><li><a href="http://www.cbsr.ia.ac.cn/users/lzhang/papers/ICB07/ICB07_Liao.pdf">Paper: Learning Multi-scale Block Local Binary Patterns for Face Recognition</a></li><li><a href="http://www.voidcn.com/blog/quincuntial/article/p-4988349.html">http://www.voidcn.com/blog/quincuntial/article/p-4988349.html</a></li><li><a href="http://blog.csdn.net/zouxy09/article/details/7929531">http://blog.csdn.net/zouxy09/article/details/7929531</a></li><li><a href="http://blog.jasonding.top/2014/11/04/Machine%20Learning/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91LBP%E7%BA%B9%E7%90%86%E7%89%B9%E5%BE%81/">http://blog.jasonding.top/2014/11/04/Machine%20Learning/%E3%80%90%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E3%80%91LBP%E7%BA%B9%E7%90%86%E7%89%B9%E5%BE%81/</a></li><li><a href="http://blog.csdn.net/liulina603/article/details/8291105">http://blog.csdn.net/liulina603/article/details/8291105</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å›¾åƒç‰¹å¾æå– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾åƒç‰¹å¾æå– </tag>
            
            <tag> LBP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾åƒç‰¹å¾æå–ä¹‹HOGç‰¹å¾</title>
      <link href="/2023/12/18/tu-xiang-te-zheng-ti-qu-zhi-hog-te-zheng/"/>
      <url>/2023/12/18/tu-xiang-te-zheng-ti-qu-zhi-hog-te-zheng/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>â€ƒâ€ƒæ–¹å‘æ¢¯åº¦ç›´æ–¹å›¾(Histogram of Oriented Gradient, HOG)ç‰¹å¾æ˜¯ä¸€ç§åœ¨è®¡ç®—æœºè§†è§‰å’Œå›¾åƒå¤„ç†ä¸­ç”¨æ¥è¿›è¡Œç‰©ä½“æ£€æµ‹çš„ç‰¹å¾æè¿°å­ã€‚<strong>å®ƒé€šè¿‡è®¡ç®—å’Œç»Ÿè®¡å›¾åƒå±€éƒ¨åŒºåŸŸçš„æ¢¯åº¦æ–¹å‘ç›´æ–¹å›¾æ¥æ„æˆç‰¹å¾</strong>ã€‚Hogç‰¹å¾ç»“åˆSVMåˆ†ç±»å™¨å·²ç»è¢«å¹¿æ³›åº”ç”¨äºå›¾åƒè¯†åˆ«ä¸­ï¼Œå°¤å…¶åœ¨è¡Œäººæ£€æµ‹ä¸­è·å¾—äº†æå¤§çš„æˆåŠŸã€‚  </p><h1 id="ç®—æ³•æ€æƒ³"><a href="#ç®—æ³•æ€æƒ³" class="headerlink" title="ç®—æ³•æ€æƒ³"></a>ç®—æ³•æ€æƒ³</h1><p>â€ƒâ€ƒHOGç‰¹å¾çš„æ ¸å¿ƒæ€æƒ³æ˜¯åœ¨ä¸€å¹…å›¾åƒä¸­ï¼Œå±€éƒ¨ç›®æ ‡çš„è¡¨è±¡å’Œå½¢çŠ¶(appearance and shape)èƒ½å¤Ÿè¢«æ¢¯åº¦å’Œè¾¹ç¼˜çš„æ–¹å‘å¯†åº¦ï¼ˆæ¢¯åº¦çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œè€Œæ¢¯åº¦ä¸»è¦å­˜åœ¨äºè¾¹ç¼˜åœ°æ–¹ï¼‰å¾ˆå¥½åœ°æè¿°ã€‚é€šè¿‡å°†æ•´å¹…å›¾åƒåˆ†ä¸ºå¤šä¸ªå°çš„è¿é€šåŒºåŸŸ(cells)ï¼Œå¹¶è®¡ç®—æ¯ä¸ªcellçš„æ¢¯åº¦æˆ–è¾¹ç¼˜æ–¹å‘ç›´æ–¹å›¾ï¼Œè¿™äº›ç›´æ–¹å›¾çš„ç»„åˆå¯ç”¨äºæ„æˆç‰¹å¾æè¿°å­ï¼Œä¸ºäº†æé«˜å‡†ç¡®ç‡ï¼Œå¯ä»¥å°†å±€éƒ¨ç›´æ–¹å›¾åœ¨å›¾åƒæ›´å¤§èŒƒå›´å†…(ç§°ä¸ºblock)è¿›è¡Œå¯¹æ¯”åº¦å½’ä¸€åŒ–(constrast-normalized)ã€‚æ‰€é‡‡ç”¨çš„æ–¹æ³•æ˜¯ï¼šå…ˆè®¡ç®—å„ç›´æ–¹å›¾åœ¨å¯¹åº”çš„blockä¸­çš„å¯†åº¦ï¼Œç„¶åæ ¹æ®è¿™ä¸ªå¯†åº¦å¯¹blockä¸­çš„æ‰€æœ‰cellåšå½’ä¸€åŒ–(normalize)ã€‚å½’ä¸€åŒ–æ“ä½œå¯¹å…‰ç…§å˜åŒ–å’Œé˜´å½±å…·æœ‰æ›´å¥½çš„é²æ£’æ€§ã€‚</p><h1 id="ç®—æ³•ç‰¹ç‚¹"><a href="#ç®—æ³•ç‰¹ç‚¹" class="headerlink" title="ç®—æ³•ç‰¹ç‚¹"></a>ç®—æ³•ç‰¹ç‚¹</h1><ul><li>HOGç‰¹å¾æ˜¯åœ¨å›¾åƒçš„å±€éƒ¨æ“ä½œï¼Œå¯¹å›¾åƒå‡ ä½•å’Œå…‰å­¦çš„å˜åŒ–æœ‰è¾ƒå¥½çš„ç¨³å¥æ€§ï¼Œè¿™ä¸¤ç§å˜åŒ–åªä¼šå‡ºç°åœ¨æ›´å¤§çš„ç©ºåŸŸä¸Šã€‚</li><li>åœ¨ç²—ç²’åº¦çš„ç©ºåŸŸæŠ½æ ·ã€ç»†ç²’åº¦çš„æ–¹å‘æŠ½æ ·ï¼Œä»¥åŠè¾ƒå¼ºçš„å±€éƒ¨å…‰å­¦å½’ä¸€åŒ–æ¡ä»¶ä¸‹ï¼Œåªè¦è¡Œäººå¤§ä½“ä¿æŒç›´ç«‹çš„å§¿åŠ¿ï¼Œå¯ä»¥å®¹è®¸è¡Œäººæœ‰ä¸€äº›ç»†å¾®çš„è‚¢ä½“åŠ¨ä½œï¼Œè€Œä¸å½±å“æ£€æµ‹æ•ˆæœã€‚</li></ul><h1 id="ç®—æ³•å®ç°"><a href="#ç®—æ³•å®ç°" class="headerlink" title="ç®—æ³•å®ç°"></a>ç®—æ³•å®ç°</h1><h2 id="å›¾åƒé¢„å¤„ç†"><a href="#å›¾åƒé¢„å¤„ç†" class="headerlink" title="å›¾åƒé¢„å¤„ç†"></a>å›¾åƒé¢„å¤„ç†</h2><ul><li>ç°åº¦åŒ–ï¼šHOGæå–çš„æ˜¯çº¹ç†ç‰¹å¾ï¼Œé¢œè‰²ä¿¡æ¯ä¸èµ·ä½œç”¨ï¼Œæ‰€ä»¥å°†å½©è‰²å›¾è½¬åŒ–ä¸ºç°åº¦å›¾ã€‚</li><li>Gammaæ ¡æ­£(å½’ä¸€åŒ–)ï¼šå¯¹å›¾åƒè¿›è¡ŒGammaæ ¡æ­£ï¼Œå®Œæˆå¯¹æ•´ä¸ªå›¾åƒçš„æ ‡å‡†åŒ–(å½’ä¸€åŒ–)ï¼Œå¯ä»¥è°ƒèŠ‚å›¾åƒçš„å¯¹æ¯”åº¦ï¼Œé™ä½å±€éƒ¨å…‰ç…§ä¸å‡åŒ€æˆ–è€…é˜´å½±çš„å½±å“ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šé™ä½å™ªå£°çš„å¹²æ‰°ï¼Œæé«˜ç‰¹å¾æè¿°å™¨å¯¹å…‰ç…§ç­‰å¹²æ‰°å› ç´ çš„é²æ£’æ€§ã€‚æ ¡æ­£å…¬å¼å¦‚ä¸‹ï¼š<br>$$<br>I(x, y) &#x3D; I(x, y)^{gamma}, gamma &#x3D; \dfrac{1}{2}<br>$$</li></ul><h2 id="è®¡ç®—å›¾åƒæ¢¯åº¦"><a href="#è®¡ç®—å›¾åƒæ¢¯åº¦" class="headerlink" title="è®¡ç®—å›¾åƒæ¢¯åº¦"></a>è®¡ç®—å›¾åƒæ¢¯åº¦</h2><p>â€ƒâ€ƒåˆ†åˆ«æ±‚å–å›¾åƒæ°´å¹³æ–¹å‘å’Œå‚ç›´æ–¹å‘çš„æ¢¯åº¦ï¼Œç„¶åè®¡ç®—æ¯ä¸ªåƒç´ ç‚¹çš„æ¢¯åº¦å¹…å€¼å’Œæ–¹å‘ï¼Œå¾®åˆ†æ±‚å›¾åƒæ¢¯åº¦ä¸ä»…å¯ä»¥æ•è·å›¾åƒè¾¹ç¼˜å’Œçº¹ç†ä¿¡æ¯ï¼Œè€Œä¸”å¯ä»¥å¼±åŒ–å…‰ç…§ä¸å‡åŒ€çš„å½±å“ã€‚<br>$$G_x(x,y) &#x3D; I(x+1,y) - I(x-1,y)$$<br>$$G_y(x,y) &#x3D; I(x,y+1) - I(x,y-1)$$<br>$$ \nabla G(x,y) &#x3D; \sqrt{G_x(x,y)^2+G_y(x,y)^2}$$<br>$$ \theta(x,y) &#x3D; arctan(G_y(x,y) &#x2F; G_x(x,y))$$<br>ä¸€èˆ¬é‡‡ç”¨æ¢¯åº¦ç®—å­å¯¹å›¾åƒè¿›è¡Œå·ç§¯è¿ç®—æ±‚å–å›¾åƒæ¢¯åº¦ï¼Œä¾‹å¦‚ç”¨ $[-1,0,1]$ æ¢¯åº¦ç®—å­å¯¹å›¾åƒè¿›è¡Œå·ç§¯æ“ä½œå¾—åˆ°æ°´å¹³æ–¹å‘çš„æ¢¯åº¦åˆ†é‡ï¼Œç”¨$[-1,0,1]^T$æ¢¯åº¦ç®—å­è¿›è¡Œå·ç§¯æ“ä½œå¾—åˆ°ç«–ç›´æ–¹å‘çš„æ¢¯åº¦åˆ†é‡ï¼Œç„¶åæ±‚å–å›¾åƒçš„æ¢¯åº¦å¹…å€¼å’Œæ–¹å‘ã€‚</p><h2 id="åœ¨cellä¸­è®¡ç®—æ¢¯åº¦æ–¹å‘ç›´æ–¹å›¾-Orientation-binning"><a href="#åœ¨cellä¸­è®¡ç®—æ¢¯åº¦æ–¹å‘ç›´æ–¹å›¾-Orientation-binning" class="headerlink" title="åœ¨cellä¸­è®¡ç®—æ¢¯åº¦æ–¹å‘ç›´æ–¹å›¾(Orientation binning)"></a>åœ¨cellä¸­è®¡ç®—æ¢¯åº¦æ–¹å‘ç›´æ–¹å›¾(Orientation binning)</h2><p>â€ƒâ€ƒå°†å›¾åƒåˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªè¿é€šåŒºåŸŸ(cell)ï¼Œä¾‹å¦‚æ¯ä¸ªcellä¸º$8 \times 8$ä¸ªåƒç´ ï¼Œç›¸é‚»cellä¹‹é—´ä¸é‡å ï¼Œå°†æ‰€æœ‰æ¢¯åº¦æ–¹å‘åˆ’åˆ†ä¸º9ä¸ªæ–¹å‘å—(bin)ï¼Œç„¶ååœ¨æ¯ä¸ªcellå†…ç»Ÿè®¡æ¢¯åº¦æ–¹å‘ç›´æ–¹å›¾ã€‚åœ¨è®¡ç®—æ¢¯åº¦æ–¹å‘æ—¶ï¼Œå¯æŠŠæ–¹å‘çš„è§’åº¦èŒƒå›´å®šä½$(0, 180^{\circ})$æˆ–è€…$(0, 360^{\circ})$ã€‚æœ€åæ¯ä¸ªcelléƒ½å¯¹åº”ä¸€ä¸ª9ç»´çš„ç‰¹å¾å‘é‡ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥è€ƒè™‘æ¢¯åº¦å¹…å€¼ä½œä¸ºbinçš„ç»Ÿè®¡æƒé‡ã€‚<br>â€ƒâ€ƒåœ¨è¡Œäººæ£€æµ‹ä¸­ï¼Œé€šè¿‡ç»™å±€éƒ¨å›¾åƒåŒºåŸŸè¿›è¡Œç¼–ç ï¼Œå¯ä»¥ä¿æŒå¯¹ç›®æ ‡å¯¹è±¡çš„å§¿åŠ¿å’Œå¤–è§‚çš„å¼±æ•æ„Ÿæ€§ï¼Œæ›´å¥½åœ°æ•è·å›¾åƒçš„è½®å»“å’Œçº¹ç†ä¿¡æ¯ã€‚</p><h2 id="åœ¨blockä¸­å½’ä¸€åŒ–æ¢¯åº¦æ–¹å‘ç›´æ–¹å›¾-Block-Normalization"><a href="#åœ¨blockä¸­å½’ä¸€åŒ–æ¢¯åº¦æ–¹å‘ç›´æ–¹å›¾-Block-Normalization" class="headerlink" title="åœ¨blockä¸­å½’ä¸€åŒ–æ¢¯åº¦æ–¹å‘ç›´æ–¹å›¾(Block Normalization)"></a>åœ¨blockä¸­å½’ä¸€åŒ–æ¢¯åº¦æ–¹å‘ç›´æ–¹å›¾(Block Normalization)</h2><p>â€ƒâ€ƒå°†å¤šä¸ªcellç»„åˆæˆæ›´å¤§è¿é€šå—(block)ï¼Œå°†blockå†…æ‰€æœ‰cellçš„ç‰¹å¾å‘é‡ä¸²è”èµ·æ¥ä¾¿å¾—åˆ°è¯¥blockçš„HOGç‰¹å¾æè¿°å­ï¼Œä¸åŒblockä¹‹é—´å¯èƒ½ç›¸äº’é‡å ï¼Œå¯ä»¥æœ‰æ•ˆåœ°åˆ©ç”¨å±€éƒ¨é‚»åŸŸä¿¡æ¯ã€‚ç±»æ¯”åœ¨å·ç§¯ç¥ç»ç½‘ç»œ(CNN)ä¸­ï¼Œæ©ç (Kernel)å’Œæ­¥é•¿(stride)çš„é€‰æ‹©ã€‚åœ¨æ›´å¤§èŒƒå›´å†…(block)ç»Ÿè®¡æ¢¯åº¦ç›´æ–¹å›¾ï¼Œå¹¶åšå½’ä¸€åŒ–å¤„ç†ï¼Œèƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”å…‰ç…§å’Œå¯¹æ¯”åº¦çš„å˜åŒ–ã€‚å¸¸ç”¨çš„å½’ä¸€åŒ–æ–¹æ³•æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>L2-norm<br>$$v &#x3D; \dfrac{v}{\sqrt{|v|_{2}^{2} + \varepsilon^2}}$$</li><li>L1-norm<br>$$v &#x3D; \dfrac{v}{|v|_{1} + \varepsilon}$$</li><li>L1-sqrt<br>$$v &#x3D; \sqrt{\dfrac{v}{|v|_{1} + \varepsilon}}$$<br>è¿˜æœ‰ä¸€ç§L2-Hysï¼Œå³å…ˆåšä¸€æ¬¡L2-norm,ç„¶åæŠŠå¤§äºç‰¹å®šå€¼(0.2)çš„åˆ†é‡å¹…å€¼ä¸ºè®¾ç½®ä¸º0.2å†åšä¸€æ¬¡L2-normï¼Œä¸€èˆ¬åœ¨æ£€æµ‹ä¸­é‡‡ç”¨L2-normæ•ˆæœæ›´å¥½ã€‚åœ¨ä¸€ä¸ªblockä¸­ï¼Œå¦‚æœcellçš„æ•°é‡ä¸º$2\times 2$ï¼Œé‚£blockçš„ç‰¹å¾æ•°ä¸º$2\times 2 \times 9 &#x3D; 36$ç»´ç‰¹å¾ã€‚</li></ul><h2 id="ç»Ÿè®¡æ•´å¹…å›¾åƒ-æ£€æµ‹çª—å£-çš„HOGç‰¹å¾"><a href="#ç»Ÿè®¡æ•´å¹…å›¾åƒ-æ£€æµ‹çª—å£-çš„HOGç‰¹å¾" class="headerlink" title="ç»Ÿè®¡æ•´å¹…å›¾åƒ(æ£€æµ‹çª—å£)çš„HOGç‰¹å¾"></a>ç»Ÿè®¡æ•´å¹…å›¾åƒ(æ£€æµ‹çª—å£)çš„HOGç‰¹å¾</h2><p>â€ƒâ€ƒåœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸æ˜¯é€‰å–å›ºå®šå¤§å°çš„æ»‘åŠ¨çª—å£æ¥æå–HOGç‰¹å¾ï¼Œå¯¹äºä¸€ä¸ª$64\times 128$çš„å›¾åƒçª—å£(window)ï¼Œæ¯$8\times 8$ä¸ªåƒç´ ç»„æˆä¸€ä¸ªcellï¼Œæ¯$2\times 2$ä¸ªcellç»„æˆä¸€ä¸ªblockï¼Œä¸€å…±æœ‰$(8-1)\times (16-1) &#x3D; 105$ä¸ªblockï¼Œå› æ­¤è¯¥å›¾åƒçš„çª—å£ç‰¹å¾ç»´æ•°ä¸º$105\times 36 &#x3D; 3780$ã€‚å½“ç„¶ä¹Ÿå¯ä»¥å°†æ•´å¹…å›¾åƒä½œä¸ºä¸€ä¸ªçª—å£æ¥æå–HOGç‰¹å¾ã€‚</p><h2 id="HOGç‰¹å¾-SVMåˆ†ç±»å™¨è¿›è¡Œè¡Œäººæ£€æµ‹"><a href="#HOGç‰¹å¾-SVMåˆ†ç±»å™¨è¿›è¡Œè¡Œäººæ£€æµ‹" class="headerlink" title="HOGç‰¹å¾ + SVMåˆ†ç±»å™¨è¿›è¡Œè¡Œäººæ£€æµ‹"></a>HOGç‰¹å¾ + SVMåˆ†ç±»å™¨è¿›è¡Œè¡Œäººæ£€æµ‹</h2><p>â€ƒâ€ƒè®­ç»ƒè¿‡ç¨‹ä¸­æ­£æ ·æœ¬ä¸ºå›¾ç‰‡ä¸­åŒ…å«æœ‰ç›®æ ‡åŒºåŸŸ(è¡Œäºº)çš„boundingboxï¼Œå°ºå¯¸ç»Ÿä¸€ä¸ºæ£€æµ‹çª—å£çš„å¤§å°å³$64\times 128$ï¼Œè´Ÿæ ·æœ¬ä¸éœ€è¦ç»Ÿä¸€å°ºå¯¸ï¼Œåªéœ€æ¯”æ£€æµ‹çª—å£å¤§ï¼Œä¸”å›¾ç‰‡ä¸­ä¸åŒ…å«æ£€æµ‹ç›®æ ‡ï¼Œå¯ä»»æ„æˆªå–å›¾ç‰‡ä¸­$64\times 128$å¤§å°çš„åŒºåŸŸæå–HOGç‰¹å¾ä½œä¸ºè´Ÿæ ·æœ¬çš„ç‰¹å¾å‘é‡ï¼Œå¹¶ä¸æ­£æ ·æœ¬å›¾ç‰‡ä¸­boundingboxåŒºåŸŸæå–å‡ºçš„HOGç‰¹å¾å‘é‡ä¸€èµ·è®­ç»ƒï¼Œå¾—åˆ°SVMçš„åˆ†ç±»æ¨¡å‹ã€‚<br>â€ƒâ€ƒæ£€æµ‹è¿‡ç¨‹ä¸­é‡‡ç”¨æ»‘åŠ¨çª—å£æ³•ï¼Œæ£€æµ‹çª—å£å°ºå¯¸å›ºå®šä¸å˜ï¼Œå¯¹å¾…æ£€æµ‹å›¾ç‰‡è¿›è¡Œå°ºåº¦ç¼©æ”¾ï¼Œåœ¨æ¯ä¸€å±‚çš„å›¾åƒä¸Šï¼Œç”¨å›ºå®šå¤§å°çš„æ»‘åŠ¨çª—å£æå–HOGç‰¹å¾ï¼Œå¹¶æ ¹æ®è®­ç»ƒå¥½çš„åˆ†ç±»æ¨¡å‹åˆ¤æ–­æ£€æµ‹çª—å£æ˜¯å¦ä¸ºç›®æ ‡(è¡Œäºº)ã€‚å› æ­¤HOG + SVMè¿›è¡Œè¡Œäººæ£€æµ‹çš„è¿‡ç¨‹å®é™…ä¸Šå°±æ˜¯å¯¹å›¾åƒçš„æ£€æµ‹çª—å£æå–HOGç‰¹å¾è¿›è¡Œåˆ†ç±»åˆ¤å†³çš„è¿‡ç¨‹ã€‚</p><h1 id="åŸå§‹ç½‘é¡µ"><a href="#åŸå§‹ç½‘é¡µ" class="headerlink" title="åŸå§‹ç½‘é¡µ"></a>åŸå§‹ç½‘é¡µ</h1><p><a href="https://senitco.github.io/2017/06/10/image-feature-hog/">å›¾åƒç‰¹å¾æå–ä¹‹HOGç‰¹å¾</a></p><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><ul><li><a href="http://lear.inrialpes.fr/people/triggs/pubs/Dalal-cvpr05.pdf">paper: Histograms of Oriented Gradients for Human Detection</a></li><li><a href="https://en.wikipedia.org/wiki/Histogram_of_oriented_gradients">wikipedia: Histogram of oriented gradients</a></li><li><a href="http://blog.csdn.net/zouxy09/article/details/7929348">http://blog.csdn.net/zouxy09/article/details/7929348</a></li><li><a href="http://blog.csdn.net/hujingshuang/article/details/47337707">http://blog.csdn.net/hujingshuang/article/details/47337707</a></li><li><a href="http://www.cnblogs.com/tornadomeet/archive/2012/08/15/2640754.html">http://www.cnblogs.com/tornadomeet/archive/2012/08/15/2640754.html</a></li><li><a href="http://shuokay.com/2016/07/18/hog/">http://shuokay.com/2016/07/18/hog/</a></li><li><a href="http://www.jianshu.com/p/6f69c751e9e7">http://www.jianshu.com/p/6f69c751e9e7</a></li><li><a href="http://blog.sina.com.cn/s/blog_60e6e3d50101bkpn.html">http://blog.sina.com.cn/s/blog_60e6e3d50101bkpn.html</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å›¾åƒç‰¹å¾æå– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾åƒç‰¹å¾æå– </tag>
            
            <tag> HOG </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç›¸æœºå†…å¤–å‚ä¸ä¿¯è§†å›¾è½¬æ¢</title>
      <link href="/2023/12/10/xiang-ji-nei-wai-can-yu-fu-shi-tu-zhuan-huan/"/>
      <url>/2023/12/10/xiang-ji-nei-wai-can-yu-fu-shi-tu-zhuan-huan/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸–ç•Œåæ ‡ç³»-X-w-Y-w-Z-w-åˆ°å›¾åƒåæ ‡ç³»-u-v-çš„å˜æ¢å…³ç³»"><a href="#ä¸–ç•Œåæ ‡ç³»-X-w-Y-w-Z-w-åˆ°å›¾åƒåæ ‡ç³»-u-v-çš„å˜æ¢å…³ç³»" class="headerlink" title="ä¸–ç•Œåæ ‡ç³»$(X_w,Y_w,Z_w)$åˆ°å›¾åƒåæ ‡ç³»$(u,v)$çš„å˜æ¢å…³ç³»"></a>ä¸–ç•Œåæ ‡ç³»$(X_w,Y_w,Z_w)$åˆ°å›¾åƒåæ ‡ç³»$(u,v)$çš„å˜æ¢å…³ç³»</h1><p>ç›¸æœºå¤–å‚ä¸­çš„æ—‹è½¬å’Œå¹³ç§»çš„æ–¹å‘ä¸ºç›¸æœºåæ ‡ç³»ä¸­å„ä¸ªè½´çš„æ–¹å‘ï¼Œè€Œä¸æ˜¯ä¸–ç•Œåæ ‡ç³»å„ä¸ªè½´çš„æ–¹å‘ï¼Œä»¥ç›¸æœºå…ˆç»•ç›¸æœºçš„$x$è½´æ—‹è½¬$pitch$å¼§åº¦ï¼Œç„¶åå†ç»•ç›¸æœºçš„$y$è½´æ—‹è½¬$yaw$å¼§åº¦ï¼Œæœ€åç»•ç›¸æœºçš„$z$è½´æ—‹è½¬$roll$å¼§åº¦å¾—åˆ°æ–°çš„ç›¸æœºä½ç½®ä¸ºä¾‹ï¼Œæ¯æ¬¡æ—‹è½¬æ—¶çš„æ—‹è½¬çŸ©é˜µçš„è®¡ç®—å¦‚ä¸‹æ‰€ç¤ºï¼š<br>$$<br>R_x&#x3D;<br>\begin{bmatrix}<br>1 &amp; 0 &amp; 0 \\<br>0 &amp; \cos(pitch) &amp; -\sin(pitch) \\<br>0 &amp; \sin(pitch) &amp; \cos(pitch)<br>\end{bmatrix}<br>$$</p><p>$$<br>R_{y}&#x3D;<br>\begin{bmatrix}<br>\cos(yaw) &amp; 0 &amp; \sin(yaw) \\<br>0 &amp; 1 &amp; 0 \\<br>-\sin(yaw) &amp; 0 &amp; \cos(yaw)<br>\end{bmatrix}<br>$$</p><p>$$<br>R_{z}&#x3D;<br>\begin{bmatrix}<br>\cos(roll) &amp; -\sin(roll) &amp; 0 \\<br>\sin(roll) &amp; \cos(roll) &amp; 0 \\<br>0 &amp; 0 &amp; 1<br>\end{bmatrix}<br>$$<br>å³ï¼Œç»¼åˆæ—‹è½¬çŸ©é˜µä¸º:<br>$$<br>R&#x3D;{R_z}{R_y}{R_x}&#x3D;<br>\begin{bmatrix}<br>c_{roll} c_{yaw} &amp; c_{roll} s_{yaw} s_{pitch}-s_{roll} c_{pitch} &amp; c_{roll} s_{yaw} c_{pitch}+s_{roll} s_{pitch} \\<br>s_{roll} c_{yaw} &amp; s_{roll} s_{yaw} s_{pitch}+c_{roll} c_{pitch} &amp; s_{roll} s_{yaw} c_{pitch}-c_{roll} s_{pitch} \\<br>-s_{yaw} &amp; c_{yaw} s_{pitch} &amp; c_{yaw} c_{pitch}<br>\end{bmatrix}<br>$$</p><p>å…¶ä¸­, $c_{yaw}&#x3D;\cos(yaw)$, $s_{yaw}&#x3D;\sin(yaw)$, $c_{pitch}&#x3D;\cos(pitch)$, $s_{pitch}&#x3D;\sin(pitch)$, $c_{roll}&#x3D;\cos(roll)$, $s_{roll}&#x3D;\sin(roll)$ã€‚</p><p>ç›¸æœºçš„å¹³ç§»çŸ©é˜µå¦‚ä¸‹æ‰€ç¤º:<br>$$<br>t&#x3D;<br>\begin{bmatrix}<br>t_{x} \\<br>t_{y} \\<br>t_{z}<br>\end{bmatrix}<br>$$<br>å…¶ä¸­ï¼Œ$t_{x}$, $t_{y}$, $t_{z}$åˆ†è¡¨è¡¨ç¤ºæ²¿ç€ç›¸æœºåæ ‡ç³»çš„åæ ‡è½´çš„å¹³ç§»æ–¹å‘ï¼Œè€Œä¸æ˜¯ä¸–ç•Œåæ ‡ç³»åæ ‡è½´çš„æ–¹å‘ã€‚<br>$$<br>Z_{c}<br>\begin{bmatrix}<br>u \\<br>v \\<br>1<br>\end{bmatrix}&#x3D;<br>\begin{bmatrix}<br>f_{x} &amp; {0} &amp; c_{x} &amp; {0} \\<br>{0} &amp; f_{y} &amp; c_{y} &amp; {0} \\<br>{0} &amp; {0} &amp; {1} &amp;{0}<br>\end{bmatrix}<br>\begin{bmatrix}<br>R &amp; t \\<br>0 &amp; 1<br>\end{bmatrix}<br>\begin{bmatrix}<br>{X_{w}} \\<br>{Y_{w}} \\<br>{Z_{w}} \\<br>1<br>\end{bmatrix}<br>$$<br>å…¶ä¸­$Z_{c}$å¯ä»¥ä½¿ç”¨ç›¸æœºå¤–å‚$(R,t)$å’Œä¸–ç•Œåæ ‡ç³»ä¸­çš„ç‚¹$(X_w,Y_w,Z_w)$æ±‚å¾—:<br>$$<br>\begin{bmatrix}<br>X_{c} \\<br>Y_{c} \\<br>Z_{c} \\<br>1<br>\end{bmatrix}&#x3D;<br>\begin{bmatrix}<br>R &amp; t \\<br>0 &amp; 1<br>\end{bmatrix}<br>\begin{bmatrix}<br>X_{w} \\<br>Y_{w} \\<br>Z_{w} \\<br>1<br>\end{bmatrix}&#x3D;<br>\begin{bmatrix}<br>R_{11} &amp; R_{12} &amp; R_{13} &amp; t_{x}  \\<br>R_{21} &amp; R_{22} &amp; R_{23} &amp; t_{y}  \\<br>R_{31} &amp; R_{32} &amp; R_{33} &amp; t_{z}  \\<br>0 &amp; 0 &amp; 0 &amp; 1<br>\end{bmatrix}<br>\begin{bmatrix}<br>X_{w} \\<br>Y_{w} \\<br>Z_{w} \\<br>1<br>\end{bmatrix}&#x3D;<br>\begin{bmatrix}<br>R_{11}X_{w}+R_{12}Y_{w}+R_{13}Z_{w}+t_{1} \\<br>R_{21}X_{w}+R_{22}Y_{w}+R_{23}Z_{w}+t_{2} \\<br>R_{31}X_{w}+R_{32}Y_{w}+R_{33}Z_{w}+t_{3} \\<br>1<br>\end{bmatrix}<br>$$<br>å³ï¼Œ$Z_{c}&#x3D;R_{31}X_{w}+R_{32}Y_{w}+R_{33}Z_{w}+t_{3}$ï¼Œè¿™æ ·ä¾¿å¯ä»¥å¾—åˆ°ä¸–ç•Œåæ ‡ç³»ä¸­çš„ç‚¹åˆ°å›¾åƒåæ ‡ç³»çš„å˜æ¢ã€‚</p><h1 id="æ˜ å°„å…³ç³»æ„å»º"><a href="#æ˜ å°„å…³ç³»æ„å»º" class="headerlink" title="æ˜ å°„å…³ç³»æ„å»º"></a>æ˜ å°„å…³ç³»æ„å»º</h1><p>å›¾åƒä¸­çš„æ¯ä¸ªç‚¹ $(u,v)$ åœ¨ä¸–ç•Œåæ ‡ç³»ä¸‹çš„åæ ‡ä¸º $(X_w,Y_w,Z_w)$ ï¼Œå‡è®¾å›¾åƒä¸­çš„æ¯ä¸ªç‚¹éƒ½ä¸ºåœ°é¢çš„ç‚¹ï¼Œé‚£ä¹ˆ $Z_w&#x3D;0$ï¼Œè¿™æ ·æˆ‘ä»¬ä¾¿å¯ä»¥å°†å›¾åƒåæ ‡ç³»ä¸­çš„ç‚¹è½¬æ¢åˆ°ä¸–ç•Œåæ ‡ç³»ä¸­ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦è®¾ç½®åˆç†çš„ä¸–ç•Œåæ ‡çš„æ˜ å°„èŒƒå›´ã€‚åœ¨ä¿¯è§†å›¾è½¬æ¢æ—¶ï¼Œä¿¯è§†å›¾ä¸­çš„ç‚¹å’Œä¸–ç•Œåæ ‡ç³»åœ°é¢ä¸Šçš„ç‚¹ $(X_w,Y_w,0)$ çš„æ¨ªçºµåæ ‡å…·æœ‰ä¸€å®šçš„å…³ç³»ï¼Œå³ï¼šç­‰æ¯”ç¼©æ”¾å…³ç³»ã€‚å› æ­¤ï¼Œå‡è®¾æˆ‘ä»¬ç”Ÿæˆå‘ä¿¯è§†å›¾çš„å¤§å°ä¸º(600,800),è€Œä¸–ç•Œåæ ‡ç³»ä¸‹æˆ‘ä»¬éœ€è¦æ˜ å°„çš„èŒƒå›´ä¸º(6000,8000)ï¼Œåˆ™æˆ‘ä»¬éœ€è¦è®¾ç½®ç¼©æ”¾ç³»æ•°ä¸º10å³å¯ã€‚æ˜ å°„å…³ç³»æ„å»ºä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><h2 id="è¾“å…¥å‚æ•°å®šä¹‰"><a href="#è¾“å…¥å‚æ•°å®šä¹‰" class="headerlink" title="è¾“å…¥å‚æ•°å®šä¹‰"></a>è¾“å…¥å‚æ•°å®šä¹‰</h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">cv<span class="token double-colon punctuation">::</span>Mat cam_R_ <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Mat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> CV_32FC1<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token class-name">Scalar</span><span class="token double-colon punctuation">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// æ—‹è½¬å‘é‡</span>cv<span class="token double-colon punctuation">::</span>Mat cam_T_ <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Mat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> CV_32FC1<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token class-name">Scalar</span><span class="token double-colon punctuation">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// å¹³ç§»å‘é‡</span>cv<span class="token double-colon punctuation">::</span>Mat cam_K <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Mat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> CV_32FC1<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token class-name">Scalar</span><span class="token double-colon punctuation">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å†…å‚çŸ©é˜µ</span>cv<span class="token double-colon punctuation">::</span>Mat cam_D <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Mat</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> CV_32FC1<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token class-name">Scalar</span><span class="token double-colon punctuation">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ç•¸å˜ç³»æ•°</span>cv<span class="token double-colon punctuation">::</span>Size map_size <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                         <span class="token comment">// ç¯è§†å›¾åƒå°ºå¯¸    </span><span class="token keyword">float</span> scale_size <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>                                          <span class="token comment">// ç¯è§†ç¼©æ”¾å°ºå¯¸</span>cv<span class="token double-colon punctuation">::</span>Mat2f bird_map <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token class-name">Mat2f</span><span class="token double-colon punctuation">::</span><span class="token function">zeros</span><span class="token punctuation">(</span>map_size<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ˜ å°„å‡½æ•°ç”Ÿæˆ"><a href="#æ˜ å°„å‡½æ•°ç”Ÿæˆ" class="headerlink" title="æ˜ å°„å‡½æ•°ç”Ÿæˆ"></a>æ˜ å°„å‡½æ•°ç”Ÿæˆ</h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">bool</span> <span class="token function">GetBirdViewMap</span><span class="token punctuation">(</span><span class="token keyword">const</span> cv<span class="token double-colon punctuation">::</span>Mat <span class="token operator">&amp;</span>cam_K<span class="token punctuation">,</span> <span class="token keyword">const</span> cv<span class="token double-colon punctuation">::</span>Mat <span class="token operator">&amp;</span>cam_D<span class="token punctuation">,</span>                    <span class="token keyword">const</span> cv<span class="token double-colon punctuation">::</span>Mat <span class="token operator">&amp;</span>cam_R<span class="token punctuation">,</span> <span class="token keyword">const</span> cv<span class="token double-colon punctuation">::</span>Mat <span class="token operator">&amp;</span>cam_T<span class="token punctuation">,</span>                    <span class="token keyword">const</span> <span class="token keyword">float</span> scale_size<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">int</span> map_width<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">int</span> map_height<span class="token punctuation">,</span>                    cv<span class="token double-colon punctuation">::</span>Mat2f <span class="token operator">&amp;</span>map<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// å®šä¹‰ä¸–ç•Œåæ ‡ç³»ä¸­çš„ç‚¹</span>    Eigen<span class="token double-colon punctuation">::</span>MatrixXf <span class="token function">P_w</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> map_width <span class="token operator">*</span> map_height<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> map_width<span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;</span> map_height<span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            P_w<span class="token punctuation">.</span><span class="token function">col</span><span class="token punctuation">(</span>map_width <span class="token operator">*</span> y <span class="token operator">+</span> x<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>x <span class="token operator">-</span> map_width <span class="token operator">/</span> <span class="token number">2.0f</span><span class="token punctuation">)</span> <span class="token operator">*</span> scale_size<span class="token punctuation">,</span>                <span class="token operator">-</span><span class="token punctuation">(</span>y <span class="token operator">-</span> map_height <span class="token operator">/</span> <span class="token number">2.0f</span><span class="token punctuation">)</span> <span class="token operator">*</span> scale_size<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// å®šä¹‰å¤–å‚çŸ©é˜µRT</span>    Eigen<span class="token double-colon punctuation">::</span>MatrixXf <span class="token function">RT</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat R_mat<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">Rodrigues</span><span class="token punctuation">(</span>cam_R<span class="token punctuation">,</span> R_mat<span class="token punctuation">)</span><span class="token punctuation">;</span>    RT <span class="token operator">&lt;&lt;</span> R_mat<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> R_mat<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> R_mat<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cam_T<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        R_mat<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> R_mat<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> R_mat<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cam_T<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        R_mat<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> R_mat<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> R_mat<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cam_T<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">// å®šä¹‰å†…å‚çŸ©é˜µ</span>    Eigen<span class="token double-colon punctuation">::</span>MatrixXf <span class="token function">K</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    K <span class="token operator">&lt;&lt;</span> cam_K<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cam_K<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cam_K<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span>        cam_K<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cam_K<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cam_K<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span>        cam_K<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cam_K<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cam_K<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token comment">// è®¡ç®—ç›¸æœºåæ ‡ç³»ä¸­çš„ç‚¹P_c</span>    Eigen<span class="token double-colon punctuation">::</span>MatrixXf <span class="token function">P_c</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> map_width <span class="token operator">*</span> map_height<span class="token punctuation">)</span><span class="token punctuation">;</span>    P_c <span class="token operator">=</span> RT <span class="token operator">*</span> P_w<span class="token punctuation">;</span>    P_c <span class="token operator">=</span> P_c<span class="token punctuation">.</span><span class="token function">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rowwise</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> P_c<span class="token punctuation">.</span><span class="token function">row</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å½’ä¸€åŒ–</span>    <span class="token comment">// æ„å»ºmapçŸ©é˜µ</span>    Eigen<span class="token double-colon punctuation">::</span>VectorXf x_vector <span class="token operator">=</span> P_c<span class="token punctuation">.</span><span class="token function">row</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Eigen<span class="token double-colon punctuation">::</span>VectorXf y_vector <span class="token operator">=</span> P_c<span class="token punctuation">.</span><span class="token function">row</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat x_mat <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Mat</span><span class="token punctuation">(</span>map_height<span class="token punctuation">,</span> map_width<span class="token punctuation">,</span> CV_32FC1<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat y_mat <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Mat</span><span class="token punctuation">(</span>map_height<span class="token punctuation">,</span> map_width<span class="token punctuation">,</span> CV_32FC1<span class="token punctuation">)</span><span class="token punctuation">;</span>    std<span class="token double-colon punctuation">::</span><span class="token function">memcpy</span><span class="token punctuation">(</span>x_mat<span class="token punctuation">.</span>data<span class="token punctuation">,</span> x_vector<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> x_mat<span class="token punctuation">.</span><span class="token function">total</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> x_mat<span class="token punctuation">.</span><span class="token function">elemSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    std<span class="token double-colon punctuation">::</span><span class="token function">memcpy</span><span class="token punctuation">(</span>y_mat<span class="token punctuation">.</span>data<span class="token punctuation">,</span> y_vector<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> y_mat<span class="token punctuation">.</span><span class="token function">total</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> y_mat<span class="token punctuation">.</span><span class="token function">elemSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">merge</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>cv<span class="token double-colon punctuation">::</span>Mat<span class="token operator">></span><span class="token punctuation">&#123;</span>x_mat<span class="token punctuation">,</span> y_mat<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ä½¿ç”¨ cv::fisheye::distortPoints å‡½æ•°è¿›è¡Œç•¸å˜</span>    cv<span class="token double-colon punctuation">::</span>fisheye<span class="token double-colon punctuation">::</span><span class="token function">distortPoints</span><span class="token punctuation">(</span>map<span class="token punctuation">,</span> map<span class="token punctuation">,</span> cam_K<span class="token punctuation">,</span> cam_D<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å›¾åƒæ˜ å°„"><a href="#å›¾åƒæ˜ å°„" class="headerlink" title="å›¾åƒæ˜ å°„"></a>å›¾åƒæ˜ å°„</h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// ä½¿ç”¨ remap è¿›è¡Œå›¾åƒé‡æ˜ å°„</span>cv<span class="token double-colon punctuation">::</span><span class="token function">remap</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> bird_view<span class="token punctuation">,</span> bird_map<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">noArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>INTER_LINEAR<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>BORDER_CONSTANT<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h1 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h1><h2 id="cv-fisheye-distortPointså‡½æ•°ä½¿ç”¨æ–¹æ³•"><a href="#cv-fisheye-distortPointså‡½æ•°ä½¿ç”¨æ–¹æ³•" class="headerlink" title="cv::fisheye::distortPointså‡½æ•°ä½¿ç”¨æ–¹æ³•"></a><code>cv::fisheye::distortPoints</code>å‡½æ•°ä½¿ç”¨æ–¹æ³•</h2><ul><li>å‡½æ•°å®šä¹‰<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> cv<span class="token double-colon punctuation">::</span>fisheye<span class="token double-colon punctuation">::</span><span class="token function">distortPoints</span><span class="token punctuation">(</span>InputArray undistorted<span class="token punctuation">,</span>OutputArray distorted<span class="token punctuation">,</span>InputArray K<span class="token punctuation">,</span>InputArray D<span class="token punctuation">,</span><span class="token keyword">double</span> alpha <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>å‚æ•°è§£é‡Š</li></ul><p><code>undistorted</code> :å»ç•¸å˜ç‚¹ï¼Œè¯¥å‡½æ•°å‡è®¾ç›¸æœºçš„å†…å‚ä¸ºå•ä½çŸ©é˜µï¼Œè¿™æ„å‘³ç€å¦‚æœä½ è¦ç•¸å˜å›¾åƒä¸­çš„ç‚¹ï¼Œä½ éœ€è¦å°†ä»–ä»¬ä¹˜ä»¥å†…å‚Kçš„é€†çŸ©é˜µ $K^{-1}$ ,è¿™æ ·çš„ç‚¹å…¶å®å°±æ˜¯åœ¨ç›¸æœºåæ ‡ä¸‹å½’ä¸€åŒ–åæ ‡çš„æ¨ªçºµåæ ‡å€¼ã€‚</p><p><code>distorted</code> ï¼š ç•¸å˜ç‚¹</p><p><code>K</code> ï¼šç›¸æœºå†…å‚çŸ©é˜µ</p><p><code>D</code> ï¼š ç›¸æœºç•¸å˜ç³»æ•°</p><p><code>alpha</code> ï¼š æ‹‰ä¼¸å‚æ•°ï¼Œæ§åˆ¶ç•¸å˜åçš„ç‚¹åæ ‡æ˜¯å¦åŠ ä¸Šé¢å¤–çš„å°ºåº¦å› å­ã€‚é»˜è®¤ä¸º 0.0ã€‚</p><blockquote><p>å‚è€ƒç½‘ç«™ï¼š<a href="https://docs.opencv.org/4.x/db/d58/group__calib3d__fisheye.html#ga75d8877a98e38d0b29b6892c5f8d7765">cv::fisheye::distortPoints</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ä¿¯è§†å›¾è½¬æ¢ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åæ ‡ç³»å˜æ¢ </tag>
            
            <tag> ä¿¯è§†å›¾è½¬æ¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>adbå‘½ä»¤ä½¿ç”¨æŒ‡å—</title>
      <link href="/2023/11/25/adb-ming-ling-shi-yong-zhi-nan/"/>
      <url>/2023/11/25/adb-ming-ling-shi-yong-zhi-nan/</url>
      
        <content type="html"><![CDATA[<ul><li>ç‚¹å‡»ä¸‹åˆ—é“¾æ¥ç›´æ¥è®¿é—®<br><a href="https://github.com/mzlogin/awesome-adb">ADB ç”¨æ³•é›†åˆ</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> adb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> adb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå‘½ä»¤å¿«é€Ÿæ•™ç¨‹</title>
      <link href="/2023/11/25/linux-ming-ling-kuai-su-jiao-cheng/"/>
      <url>/2023/11/25/linux-ming-ling-kuai-su-jiao-cheng/</url>
      
        <content type="html"><![CDATA[<ul><li>ç‚¹å‡»ä¸‹åˆ—é“¾æ¥ç›´æ¥è®¿é—®<br><a href="https://linuxtools-rst.readthedocs.io/zh-cn/latest/">Linuxå·¥å…·å¿«é€Ÿæ•™ç¨‹</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Linuxå‘½ä»¤ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linuxå‘½ä»¤ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Shellç¼–ç¨‹èŒƒä¾‹</title>
      <link href="/2023/11/25/shell-bian-cheng-fan-li/"/>
      <url>/2023/11/25/shell-bian-cheng-fan-li/</url>
      
        <content type="html"><![CDATA[<ul><li>ç‚¹å‡»ä¸‹åˆ—é“¾æ¥ç›´æ¥è®¿é—®<br><a href="https://tinylab-1.gitbook.io/shellbook/">Shellç¼–ç¨‹èŒƒä¾‹</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Shell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vimä»å…¥é—¨åˆ°ç²¾é€š</title>
      <link href="/2023/11/25/vim-cong-ru-men-dao-jing-tong/"/>
      <url>/2023/11/25/vim-cong-ru-men-dao-jing-tong/</url>
      
        <content type="html"><![CDATA[<ul><li>ç‚¹å‡»ä¸‹åˆ—é“¾æ¥ç›´æ¥è®¿é—®<br><a href="https://gitlab.com/wsdjeg/vim-galore-zh_cn">Vimä»å…¥é—¨åˆ°ç²¾é€š</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> vim </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›è°ƒå‡½æ•°ä¸bindæ–¹æ³•</title>
      <link href="/2023/11/25/hui-diao-han-shu-yu-bind-fang-fa/"/>
      <url>/2023/11/25/hui-diao-han-shu-yu-bind-fang-fa/</url>
      
        <content type="html"><![CDATA[<h1 id="å›è°ƒå‡½æ•°"><a href="#å›è°ƒå‡½æ•°" class="headerlink" title="å›è°ƒå‡½æ•°"></a>å›è°ƒå‡½æ•°</h1><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>å›è°ƒå‡½æ•°å°±æ˜¯ä¸€ä¸ªé€šè¿‡å‡½æ•°æŒ‡é’ˆè°ƒç”¨çš„å‡½æ•°ã€‚å¦‚æœä½ æŠŠå‡½æ•°çš„æŒ‡é’ˆï¼ˆåœ°å€ï¼‰ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œå½“è¿™ä¸ªæŒ‡é’ˆè¢«ç”¨æ¥è°ƒç”¨å…¶æ‰€æŒ‡å‘çš„å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å°±è¯´è¿™æ˜¯å›è°ƒå‡½æ•°ã€‚å›è°ƒå‡½æ•°ä¸æ˜¯ç”±è¯¥å‡½æ•°çš„å®ç°æ–¹ç›´æ¥è°ƒç”¨ï¼Œè€Œæ˜¯åœ¨ç‰¹å®šçš„äº‹ä»¶æˆ–æ¡ä»¶å‘ç”Ÿæ—¶ç”±å¦å¤–çš„ä¸€æ–¹è°ƒç”¨çš„ï¼Œç”¨äºå¯¹è¯¥äº‹ä»¶æˆ–æ¡ä»¶è¿›è¡Œå“åº”ã€‚Â   </p><h2 id="å›è°ƒå‡½æ•°æœºåˆ¶ï¼š-å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼ˆæ™®é€šå‡½æ•°å³å¯ï¼‰ï¼›-å°†æ­¤å‡½æ•°çš„åœ°å€æ³¨å†Œç»™è°ƒç”¨è€…ï¼›-ç‰¹å®šçš„äº‹ä»¶æˆ–æ¡ä»¶å‘ç”Ÿæ—¶ï¼Œè°ƒç”¨è€…ä½¿ç”¨å‡½æ•°æŒ‡é’ˆè°ƒç”¨å›è°ƒå‡½æ•°ã€‚"><a href="#å›è°ƒå‡½æ•°æœºåˆ¶ï¼š-å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼ˆæ™®é€šå‡½æ•°å³å¯ï¼‰ï¼›-å°†æ­¤å‡½æ•°çš„åœ°å€æ³¨å†Œç»™è°ƒç”¨è€…ï¼›-ç‰¹å®šçš„äº‹ä»¶æˆ–æ¡ä»¶å‘ç”Ÿæ—¶ï¼Œè°ƒç”¨è€…ä½¿ç”¨å‡½æ•°æŒ‡é’ˆè°ƒç”¨å›è°ƒå‡½æ•°ã€‚" class="headerlink" title="å›è°ƒå‡½æ•°æœºåˆ¶ï¼šÂ - å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼ˆæ™®é€šå‡½æ•°å³å¯ï¼‰ï¼›Â - å°†æ­¤å‡½æ•°çš„åœ°å€æ³¨å†Œç»™è°ƒç”¨è€…ï¼›Â - ç‰¹å®šçš„äº‹ä»¶æˆ–æ¡ä»¶å‘ç”Ÿæ—¶ï¼Œè°ƒç”¨è€…ä½¿ç”¨å‡½æ•°æŒ‡é’ˆè°ƒç”¨å›è°ƒå‡½æ•°ã€‚Â "></a>å›è°ƒå‡½æ•°æœºåˆ¶ï¼šÂ <br>- å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼ˆæ™®é€šå‡½æ•°å³å¯ï¼‰ï¼›Â <br>- å°†æ­¤å‡½æ•°çš„åœ°å€æ³¨å†Œç»™è°ƒç”¨è€…ï¼›Â <br>- ç‰¹å®šçš„äº‹ä»¶æˆ–æ¡ä»¶å‘ç”Ÿæ—¶ï¼Œè°ƒç”¨è€…ä½¿ç”¨å‡½æ•°æŒ‡é’ˆè°ƒç”¨å›è°ƒå‡½æ•°ã€‚Â </h2><p>æ³¨ï¼šä¸ºä»€ä¹ˆè¦ç‰¹å®šäº‹ä»¶æˆ–æ¡ä»¶å‘ç”Ÿï¼Ÿä¸åº”è¯¥éšæ—¶éƒ½å¯ä»¥è°ƒç”¨å›è°ƒå‡½æ•°å—ï¼ŸÂ <br>ä»¥ä¸‹æ˜¯å›è°ƒå‡½æ•°çš„ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼ˆç®€å•ç†è§£ï¼‰ï¼šÂ   </p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token keyword">typedef</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token operator">*</span>callback<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">,</span>callback p<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> a<span class="token operator">+</span>b<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span> <span class="token operator">*</span>args<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span>add<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª<code>callbak</code>çš„å‡½æ•°æŒ‡é’ˆï¼Œå‚æ•°ä¸ºä¸¤ä¸ªintï¼Œè¿”å›å€¼ä¸ºintï¼Œé€šè¿‡è°ƒç”¨å‡½æ•°åœ°å€æ¥è¿›è¡Œç®€å•çš„ç›¸åŠ è¿ç®—ã€‚Â   </p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token keyword">typedef</span> <span class="token keyword">int</span> <span class="token punctuation">(</span>callBack<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span>buffer<span class="token punctuation">,</span>size_t size<span class="token punctuation">,</span><span class="token keyword">char</span> <span class="token operator">*</span>p_out<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">callFunc</span><span class="token punctuation">(</span>callBack <span class="token operator">*</span>consume_bytes<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>p_out<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"callFunc\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span>buffer <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>    <span class="token function">consume_bytes</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>p_out<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ä¼ å…¥å€¼å¯ä»¥éšä¾¿å¡«</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">callBackFunc</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span>buffer<span class="token punctuation">,</span> size_t size<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>p_out<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"callBackFunc\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>p_out<span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">strcpy</span><span class="token punctuation">(</span>p_out<span class="token punctuation">,</span><span class="token string">"encoderCallback:this is string."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span> <span class="token operator">*</span>args<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">char</span> p_out<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token function">callFunc</span><span class="token punctuation">(</span>callBackFunc<span class="token punctuation">,</span>p_out<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span>p_out<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥æŠŠå›è°ƒå‡½æ•°å’Œè°ƒç”¨å‡½æ•°å°è£…æ‰¿ç±»å†è°ƒç”¨ã€‚</p><h2 id="å‡½æ•°æŒ‡é’ˆ"><a href="#å‡½æ•°æŒ‡é’ˆ" class="headerlink" title="å‡½æ•°æŒ‡é’ˆ"></a>å‡½æ•°æŒ‡é’ˆ</h2><p>åœ¨ç†è§£â€œå›è°ƒå‡½æ•°â€ä¹‹å‰ï¼Œé¦–å…ˆè®¨è®ºä¸‹å‡½æ•°æŒ‡é’ˆçš„æ¦‚å¿µ</p><p><strong>æ¦‚å¿µ</strong>ï¼šæŒ‡é’ˆæ˜¯ä¸€ä¸ªå˜é‡ï¼Œæ˜¯ç”¨æ¥æŒ‡å‘å†…å­˜åœ°å€çš„ã€‚ä¸€ä¸ªç¨‹åºè¿è¡Œæ—¶ï¼Œæ‰€æœ‰å’Œè¿è¡Œç›¸å…³çš„ç‰©ä»¶éƒ½æ˜¯éœ€è¦åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œè¿™å°±å†³å®šäº†ç¨‹åºè¿è¡Œæ—¶çš„ä»»ä½•ç‰©ä»¶éƒ½å¯ä»¥ç”¨æŒ‡é’ˆæ¥æŒ‡å‘å®ƒã€‚å‡½æ•°æ˜¯å­˜æ”¾åœ¨å†…å­˜ä»£ç åŒºåŸŸå†…çš„ï¼Œå®ƒä»¬åŒæ ·æœ‰åœ°å€ï¼Œå› æ­¤åŒæ ·å¯ä»¥ç”¨æŒ‡é’ˆæ¥å­˜å–å‡½æ•°ï¼ŒæŠŠè¿™ç§æŒ‡å‘å‡½æ•°å…¥å£åœ°å€çš„æŒ‡é’ˆç§°ä¸ºå‡½æ•°æŒ‡é’ˆã€‚</p><p>å…ˆæ¥çœ‹ä¸€ä¸ªHello Worldç¨‹åºï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span> <span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello World!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åï¼Œé‡‡ç”¨å‡½æ•°è°ƒç”¨çš„å½¢å¼æ¥å®ç°ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">Invoke</span><span class="token punctuation">(</span><span class="token keyword">char</span>\<span class="token operator">*</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>      <span class="token function">Invoke</span><span class="token punctuation">(</span><span class="token string">"Hello World!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>    <span class="token keyword">void</span> <span class="token function">Invoke</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> s<span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>      <span class="token function">printf</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”¨å‡½æ•°æŒ‡é’ˆçš„æ–¹å¼æ¥å®ç°ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">Invoke</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>      <span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>fp<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//å£°æ˜ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆ(fp)          </span>    fp<span class="token operator">=</span>Invoke<span class="token punctuation">;</span>              <span class="token comment">//å°†Invokeå‡½æ•°çš„å…¥å£åœ°å€èµ‹å€¼ç»™fp  </span>    <span class="token function">fp</span><span class="token punctuation">(</span><span class="token string">"Hello World!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//å‡½æ•°æŒ‡é’ˆfpå®ç°å‡½æ•°è°ƒç”¨  </span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>    <span class="token keyword">void</span> <span class="token function">Invoke</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> s<span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>      <span class="token function">printf</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”±ä¸ŠçŸ¥é“ï¼šå‡½æ•°æŒ‡é’ˆå‡½æ•°çš„å£°æ˜ä¹‹é—´å”¯ä¸€åŒºåˆ«å°±æ˜¯ï¼Œç”¨æŒ‡é’ˆå<code>*fp</code>ä»£æ›¿äº†å‡½æ•°å<code>Invoke</code>ï¼Œè¿™æ ·è¿™å£°æ˜äº†ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œç„¶åè¿›è¡Œèµ‹å€¼<code>fp=Invoke</code>å°±å¯ä»¥è¿›è¡Œå‡½æ•°æŒ‡é’ˆçš„è°ƒç”¨äº†ã€‚å£°æ˜å‡½æ•°æŒ‡é’ˆæ—¶ï¼Œåªè¦å‡½æ•°è¿”å›å€¼ç±»å‹ã€å‚æ•°ä¸ªæ•°ã€å‚æ•°ç±»å‹ç­‰ä¿æŒä¸€è‡´ï¼Œå°±å¯ä»¥å£°æ˜ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆäº†ã€‚æ³¨æ„ï¼Œå‡½æ•°æŒ‡é’ˆå¿…é¡»ç”¨æ‹¬å·æ‹¬èµ·æ¥ <code>void (*fp)(char* s)</code>ã€‚</p><p>å®é™…ä¸­ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œé€šå¸¸ç”¨å®å®šä¹‰çš„æ–¹å¼æ¥å£°æ˜å‡½æ•°æŒ‡é’ˆï¼Œå®ç°ç¨‹åºå¦‚ä¸‹ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">void</span> <span class="token punctuation">(</span>\<span class="token operator">*</span>FP<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">char</span>\<span class="token operator">*</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">void</span> <span class="token function">Invoke</span><span class="token punctuation">(</span><span class="token keyword">char</span>\<span class="token operator">*</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span>\<span class="token operator">*</span> argv\<span class="token punctuation">[</span>\<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>      FP fp<span class="token punctuation">;</span>      <span class="token comment">//é€šå¸¸æ˜¯ç”¨å®FPæ¥å£°æ˜ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆfp  </span>    fp<span class="token operator">=</span>Invoke<span class="token punctuation">;</span>      <span class="token function">fp</span><span class="token punctuation">(</span><span class="token string">"Hello World!\\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>    <span class="token keyword">void</span> <span class="token function">Invoke</span><span class="token punctuation">(</span><span class="token keyword">char</span>\<span class="token operator">*</span> s<span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>      <span class="token function">printf</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å‡½æ•°æŒ‡é’ˆæ•°ç»„"><a href="#å‡½æ•°æŒ‡é’ˆæ•°ç»„" class="headerlink" title="å‡½æ•°æŒ‡é’ˆæ•°ç»„"></a>å‡½æ•°æŒ‡é’ˆæ•°ç»„</h2><p>ä¸‹é¢ç”¨ç¨‹åºå¯¹å‡½æ•°æŒ‡é’ˆæ•°ç»„æ¥ä¸ªå¤§è‡´äº†è§£ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span>  </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string></span>  </span>using namespace std<span class="token punctuation">;</span>    <span class="token keyword">typedef</span> <span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>FP<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">void</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> s<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>cout<span class="token operator">&lt;&lt;</span>s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>  <span class="token keyword">void</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> s<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>cout<span class="token operator">&lt;&lt;</span>s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>  <span class="token keyword">void</span> <span class="token function">f3</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> s<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>cout<span class="token operator">&lt;&lt;</span>s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>      <span class="token keyword">void</span><span class="token operator">*</span> a<span class="token punctuation">[</span><span class="token operator">*</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>f1<span class="token punctuation">,</span>f2<span class="token punctuation">,</span>f3<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>   <span class="token comment">//å®šä¹‰äº†æŒ‡é’ˆæ•°ç»„ï¼Œè¿™é‡Œaæ˜¯ä¸€ä¸ªæ™®é€šæŒ‡é’ˆ  </span>    a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">"Hello World!n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ç¼–è¯‘é”™è¯¯ï¼ŒæŒ‡é’ˆæ•°ç»„ä¸èƒ½ç”¨ä¸‹æ ‡çš„æ–¹å¼æ¥è°ƒç”¨å‡½æ•°  </span>      FP f<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>f1<span class="token punctuation">,</span>f2<span class="token punctuation">,</span>f3<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>      <span class="token comment">//å®šä¹‰ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆçš„æ•°ç»„ï¼Œè¿™é‡Œçš„fæ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆ  </span>    f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">"Hello World!n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æ­£ç¡®ï¼Œå‡½æ•°æŒ‡é’ˆçš„æ•°ç»„è¿›è¡Œä¸‹æ ‡æ“ä½œå¯ä»¥è¿›è¡Œå‡½æ•°çš„é—´æ¥è°ƒç”¨  </span>          <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å›è°ƒå‡½æ•°-1"><a href="#å›è°ƒå‡½æ•°-1" class="headerlink" title="å›è°ƒå‡½æ•°"></a>å›è°ƒå‡½æ•°</h2><p><strong>æ¦‚å¿µ</strong>ï¼šå›è°ƒå‡½æ•°ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä½¿ç”¨è€…è‡ªå·±å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œä½¿ç”¨è€…è‡ªå·±å®ç°è¿™ä¸ªå‡½æ•°çš„ç¨‹åºå†…å®¹ï¼Œç„¶åæŠŠè¿™ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ å…¥åˆ«äººï¼ˆæˆ–ç³»ç»Ÿï¼‰çš„å‡½æ•°ä¸­ï¼Œç”±åˆ«äººï¼ˆæˆ–ç³»ç»Ÿï¼‰çš„å‡½æ•°åœ¨è¿è¡Œæ—¶æ¥è°ƒç”¨çš„å‡½æ•°ã€‚å‡½æ•°æ˜¯ä½ å®ç°çš„ï¼Œä½†ç”±åˆ«äººï¼ˆæˆ–ç³»ç»Ÿï¼‰çš„å‡½æ•°åœ¨è¿è¡Œæ—¶é€šè¿‡å‚æ•°ä¼ é€’çš„æ–¹å¼è°ƒç”¨ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„å›è°ƒå‡½æ•°ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ç”±åˆ«äººçš„å‡½æ•°è¿è¡ŒæœŸé—´æ¥å›è°ƒä½ å®ç°çš„å‡½æ•°ã€‚</p><p>æ ‡å‡†Hello Worldç¨‹åºï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span>\<span class="token operator">*</span> argv\<span class="token punctuation">[</span>\<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello World!\\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å°†å®ƒä¿®æ”¹æˆå‡½æ•°å›è°ƒæ ·å¼ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">//å®šä¹‰å›è°ƒå‡½æ•°  </span><span class="token keyword">void</span> <span class="token function">PrintfText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token punctuation">&#123;</span>      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello World!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>    <span class="token comment">//å®šä¹‰å®ç°å›è°ƒå‡½æ•°çš„"è°ƒç”¨å‡½æ•°"  </span><span class="token keyword">void</span> <span class="token function">CallPrintfText</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>callfuct<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>      <span class="token function">callfuct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>    <span class="token comment">//åœ¨mainå‡½æ•°ä¸­å®ç°å‡½æ•°å›è°ƒ  </span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>      <span class="token function">CallPrintfText</span><span class="token punctuation">(</span>PrintfText<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Â ä¿®æ”¹æˆå¸¦å‚çš„å›è°ƒæ ·å¼ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">//å®šä¹‰å¸¦å‚å›è°ƒå‡½æ•°  </span><span class="token keyword">void</span> <span class="token function">PrintfText</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> s<span class="token punctuation">)</span>   <span class="token punctuation">&#123;</span>      <span class="token function">printf</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>    <span class="token comment">//å®šä¹‰å®ç°å¸¦å‚å›è°ƒå‡½æ•°çš„"è°ƒç”¨å‡½æ•°"  </span><span class="token keyword">void</span> <span class="token function">CallPrintfText</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>callfuct<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">char</span><span class="token operator">*</span> s<span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>      <span class="token function">callfuct</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>    <span class="token comment">//åœ¨mainå‡½æ•°ä¸­å®ç°å¸¦å‚çš„å‡½æ•°å›è°ƒ  </span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>      <span class="token function">CallPrintfText</span><span class="token punctuation">(</span>PrintfText<span class="token punctuation">,</span><span class="token string">"Hello World!n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å›è°ƒå‡½æ•°çš„å‡ ç§å®ç°æ–¹å¼"><a href="#å›è°ƒå‡½æ•°çš„å‡ ç§å®ç°æ–¹å¼" class="headerlink" title="å›è°ƒå‡½æ•°çš„å‡ ç§å®ç°æ–¹å¼"></a>å›è°ƒå‡½æ•°çš„å‡ ç§å®ç°æ–¹å¼</h2><h3 id="æ™®é€šå‡½æ•°ä½œä¸ºå›è°ƒå‡½æ•°"><a href="#æ™®é€šå‡½æ•°ä½œä¸ºå›è°ƒå‡½æ•°" class="headerlink" title="æ™®é€šå‡½æ•°ä½œä¸ºå›è°ƒå‡½æ•°"></a>æ™®é€šå‡½æ•°ä½œä¸ºå›è°ƒå‡½æ•°</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token keyword">void</span> <span class="token function">programA_FunA1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"I'am ProgramA_FunA1 and be called..\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">programA_FunA2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"I'am ProgramA_FunA2 and be called..\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">programB_FunB1</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>callback<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"I'am programB_FunB1 and be called..\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token function">programA_FunA1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">programB_FunB1</span><span class="token punctuation">(</span>programA_FunA2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œç»“æœï¼š  </p><pre class="line-numbers language-none"><code class="language-none">I&#39;am ProgramA FunAl and be called..I&#39;am programB FunBl and be called..I&#39;am ProgramA FunA2 and be called..<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="ç±»çš„é™æ€å‡½æ•°ä½œä¸ºå›è°ƒå‡½æ•°"><a href="#ç±»çš„é™æ€å‡½æ•°ä½œä¸ºå›è°ƒå‡½æ•°" class="headerlink" title="ç±»çš„é™æ€å‡½æ•°ä½œä¸ºå›è°ƒå‡½æ•°"></a>ç±»çš„é™æ€å‡½æ•°ä½œä¸ºå›è°ƒå‡½æ•°</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token keyword">class</span> <span class="token class-name">ProgramA</span> <span class="token punctuation">&#123;</span> <span class="token keyword">public</span><span class="token operator">:</span>  <span class="token keyword">void</span> <span class="token function">FunA1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"I'am ProgramA.FunA1() and be called..\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">FunA2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"I'am ProgramA.FunA2() and be called..\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">ProgramB</span> <span class="token punctuation">&#123;</span> <span class="token keyword">public</span><span class="token operator">:</span>  <span class="token keyword">void</span> <span class="token function">FunB1</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>callback<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"I'am ProgramB.FunB1() and be called..\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  ProgramA PA<span class="token punctuation">;</span>  PA<span class="token punctuation">.</span><span class="token function">FunA1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  ProgramB PB<span class="token punctuation">;</span>  PB<span class="token punctuation">.</span><span class="token function">FunB1</span><span class="token punctuation">(</span>ProgramA<span class="token double-colon punctuation">::</span>FunA2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œç»“æœ  </p><pre class="line-numbers language-none"><code class="language-none">I&#39;am ProgramA.FunAl()and be called.I&#39;am ProgramB.FunBl()and be called.I&#39;am ProgramA.FunA2()and be called.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹å‡ºï¼Œä»¥ä¸Šä¸¤ç§æ–¹å¼æ²¡æœ‰ä»€ä¹ˆæœ¬è´¨çš„åŒºåˆ«ã€‚<br>ä½†è¿™ç§å®ç°æœ‰ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„ç¼ºç‚¹ï¼šstatic å‡½æ•°ä¸èƒ½è®¿é—®éstatic æˆå‘˜å˜é‡æˆ–å‡½æ•°ï¼Œä¼šä¸¥é‡é™åˆ¶å›è°ƒå‡½æ•°å¯ä»¥å®ç°çš„åŠŸèƒ½ã€‚</p><h3 id="ç±»çš„éé™æ€å‡½æ•°ä½œä¸ºå›è°ƒå‡½æ•°"><a href="#ç±»çš„éé™æ€å‡½æ•°ä½œä¸ºå›è°ƒå‡½æ•°" class="headerlink" title="ç±»çš„éé™æ€å‡½æ•°ä½œä¸ºå›è°ƒå‡½æ•°"></a>ç±»çš„éé™æ€å‡½æ•°ä½œä¸ºå›è°ƒå‡½æ•°</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token keyword">class</span> <span class="token class-name">ProgramA</span> <span class="token punctuation">&#123;</span> <span class="token keyword">public</span><span class="token operator">:</span>  <span class="token keyword">void</span> <span class="token function">FunA1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"I'am ProgramA.FunA1() and be called..\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token keyword">void</span> <span class="token function">FunA2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"I'am ProgramA.FunA2() and be called..\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">ProgramB</span> <span class="token punctuation">&#123;</span> <span class="token keyword">public</span><span class="token operator">:</span>  <span class="token keyword">void</span> <span class="token function">FunB1</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span>ProgramA<span class="token double-colon punctuation">::</span><span class="token operator">*</span>callback<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>context<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"I'am ProgramB.FunB1() and be called..\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">(</span><span class="token punctuation">(</span>ProgramA <span class="token operator">*</span><span class="token punctuation">)</span>context<span class="token operator">-></span><span class="token operator">*</span>callback<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  ProgramA PA<span class="token punctuation">;</span>  PA<span class="token punctuation">.</span><span class="token function">FunA1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  ProgramB PB<span class="token punctuation">;</span>  PB<span class="token punctuation">.</span><span class="token function">FunB1</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ProgramA<span class="token double-colon punctuation">::</span>FunA2<span class="token punctuation">,</span> <span class="token operator">&amp;</span>PA<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// æ­¤å¤„éƒ½è¦åŠ &amp;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œç»“æœ  </p><pre class="line-numbers language-none"><code class="language-none">I&#39;am ProgramA.FunAl()and be called.I&#39;am ProgramB.FunBl()and be called.I&#39;am ProgramA.FunA2()and be called.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¿™ç§æ–¹æ³•å¯ä»¥å¾—åˆ°é¢„æœŸçš„ç»“æœï¼Œçœ‹ä¼¼å®Œç¾ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨æ˜æ˜¾ä¸è¶³ã€‚<br>æ¯”å¦‚åœ¨programBä¸­FunB1è¿˜ä½¿ç”¨ programAçš„ç±»å‹ï¼Œä¹Ÿå°±æˆ‘é¢„å…ˆè¿˜è¦çŸ¥é“å›è°ƒå‡½æ•°æ‰€å±çš„ç±»å®šä¹‰ï¼Œå½“programBæƒ³ç‹¬ç«‹å°è£…æ—¶å°±ä¸å¥½ç”¨äº†ã€‚<br>â€‹</p><p>è¿™é‡Œè¿˜æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥é¿å…è¿™æ ·çš„é—®é¢˜ï¼Œå¯ä»¥æŠŠéstaticçš„å›è°ƒå‡½æ•° åŒ…è£…ä¸ºå¦ä¸€ä¸ªstaticå‡½æ•°ï¼Œè¿™ç§æ–¹å¼ä¹Ÿæ˜¯ä¸€ç§åº”ç”¨æ¯”è¾ƒå¹¿çš„æ–¹æ³•ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token keyword">class</span> <span class="token class-name">ProgramA</span> <span class="token punctuation">&#123;</span> <span class="token keyword">public</span><span class="token operator">:</span>  <span class="token keyword">void</span> <span class="token function">FunA1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"I'am ProgramA.FunA1() and be called..\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token keyword">void</span> <span class="token function">FunA2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"I'am ProgramA.FunA2() and be called..\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">FunA2Wrapper</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>context<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"I'am ProgramA.FunA2Wrapper() and be called..\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">(</span><span class="token punctuation">(</span>ProgramA <span class="token operator">*</span><span class="token punctuation">)</span>context<span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">FunA2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// æ­¤å¤„è°ƒç”¨çš„FunA2()æ˜¯contextçš„å‡½æ•°, ä¸æ˜¯this->FunA2()</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">ProgramB</span> <span class="token punctuation">&#123;</span> <span class="token keyword">public</span><span class="token operator">:</span>  <span class="token keyword">void</span> <span class="token function">FunB1</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span>ProgramA<span class="token double-colon punctuation">::</span><span class="token operator">*</span>callback<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>context<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"I'am ProgramB.FunB1() and be called..\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">(</span><span class="token punctuation">(</span>ProgramA <span class="token operator">*</span><span class="token punctuation">)</span>context<span class="token operator">-></span><span class="token operator">*</span>callback<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">void</span> <span class="token function">FunB2</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>callback<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>context<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"I'am ProgramB.FunB2() and be called..\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">callback</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  ProgramA PA<span class="token punctuation">;</span>  PA<span class="token punctuation">.</span><span class="token function">FunA1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  ProgramB PB<span class="token punctuation">;</span>  PB<span class="token punctuation">.</span><span class="token function">FunB1</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ProgramA<span class="token double-colon punctuation">::</span>FunA2<span class="token punctuation">,</span> <span class="token operator">&amp;</span>PA<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// æ­¤å¤„éƒ½è¦åŠ &amp;</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  PB<span class="token punctuation">.</span><span class="token function">FunB2</span><span class="token punctuation">(</span>ProgramA<span class="token double-colon punctuation">::</span>FunA2Wrapper<span class="token punctuation">,</span> <span class="token operator">&amp;</span>PA<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œç»“æœï¼š  </p><pre class="line-numbers language-none"><code class="language-none">I&#39;am ProgramA.FunA1()and be called..I&#39;am ProgramB.FunB1()and be called..I&#39;am ProgramA.FunA2()and be called..I&#39;am ProgramB.FunB2()and be called..I&#39;am ProgramA.FunA2Wrapper()and be called..I&#39;am ProgramA.FunA2()and be called..<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ç§æ–¹æ³•ç›¸å¯¹äºä¸Šä¸€ç§ï¼ŒProgramBä¸­æ²¡æœ‰ProgramAçš„ä»»ä½•ä¿¡æ¯äº†ï¼Œæ˜¯ä¸€ç§æ›´ç‹¬ç«‹çš„å®ç°æ–¹å¼ã€‚<br>FunB2()é€šè¿‡è°ƒç”¨FunA2Wrapper()ï¼Œå®ç°é—´æ¥çš„å¯¹FunA2()çš„è°ƒç”¨ã€‚FunA2()å¯ä»¥è®¿é—®å’Œè°ƒç”¨å¯¹ç±»å†…çš„ä»»ä½•å‡½æ•°å’Œå˜é‡ã€‚å¤šäº†ä¸€ä¸ªwrapperå‡½æ•°ï¼Œä¹Ÿå¤šäº†ä¸€äº›çµæ´»æ€§ã€‚<br>â€‹</p><p>ä¸Šé¢å€ŸåŠ©wrapperå‡½æ•°å®ç°å›è°ƒï¼Œè™½ç„¶å¾ˆçµæ´»ï¼Œä½†æ˜¯è¿˜æ˜¯ä¸å¤Ÿä¼˜ç§€ï¼Œæ¯”å¦‚ï¼š<br>1ï¼‰å¤šäº†ä¸€ä¸ªä¸æ˜¯å¤ªæœ‰å®é™…ç”¨å¤„çš„wrapperå‡½æ•°ã€‚<br>2ï¼‰wrapperä¸­è¿˜è¦å¯¹ä¼ å…¥çš„æŒ‡é’ˆè¿›è¡Œå¼ºåˆ¶è½¬æ¢ã€‚<br>3ï¼‰FunB2è°ƒç”¨æ—¶ï¼Œä¸ä½†è¦æŒ‡å®šwrapperå‡½æ•°çš„åœ°å€ï¼Œè¿˜è¦ä¼ å…¥PAçš„åœ°å€ã€‚<br>â€‹</p><h1 id="å‚è€ƒç½‘ç«™"><a href="#å‚è€ƒç½‘ç«™" class="headerlink" title="å‚è€ƒç½‘ç«™"></a>å‚è€ƒç½‘ç«™</h1><ul><li><a href="https://blog.csdn.net/ss49344/article/details/123089497">https://blog.csdn.net/ss49344/article/details/123089497</a></li><li><a href="https://blog.csdn.net/zhoupian/article/details/119495949">https://blog.csdn.net/zhoupian/article/details/119495949</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‡½æ•°å›è°ƒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‡½æ•°å›è°ƒ </tag>
            
            <tag> std::bind </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„å¸¸ç”¨ç®—æ³•ä¼š</title>
      <link href="/2023/11/25/shu-ju-jie-gou-he-suan-fa-bi-zhi-bi-hui-de-50-ge-dai-ma-shi-xian/"/>
      <url>/2023/11/25/shu-ju-jie-gou-he-suan-fa-bi-zhi-bi-hui-de-50-ge-dai-ma-shi-xian/</url>
      
        <content type="html"><![CDATA[<ul><li>ç‚¹å‡»ä¸‹åˆ—é“¾æ¥ç›´æ¥è®¿é—®<br><a href="https://github.com/wangzheng0822/algo">æ•°æ®ç»“æ„å’Œç®—æ³•å¿…çŸ¥å¿…ä¼šçš„50ä¸ªä»£ç å®ç°</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
            <tag> åŸºç¡€ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è¯´è®¾è®¡æ¨¡å¼</title>
      <link href="/2023/11/25/tu-shuo-she-ji-mo-shi/"/>
      <url>/2023/11/25/tu-shuo-she-ji-mo-shi/</url>
      
        <content type="html"><![CDATA[<ul><li>ç‚¹å‡»ä¸‹åˆ—é“¾æ¥ç›´æ¥è®¿é—®<br><a href="https://design-patterns.readthedocs.io/zh-cn/latest/index.html">å›¾è¯´è®¾è®¡æ¨¡å¼</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨å›¾åƒåæ ‡ç³»å˜æ¢</title>
      <link href="/2023/11/22/chang-yong-tu-xiang-zuo-biao-xi-bian-huan/"/>
      <url>/2023/11/22/chang-yong-tu-xiang-zuo-biao-xi-bian-huan/</url>
      
        <content type="html"><![CDATA[<h1 id="ç›¸æœºåæ ‡ç³»-X-c-Y-c-Z-c-åˆ°å›¾åƒåæ ‡ç³»-u-v-çš„å˜æ¢å…³ç³»"><a href="#ç›¸æœºåæ ‡ç³»-X-c-Y-c-Z-c-åˆ°å›¾åƒåæ ‡ç³»-u-v-çš„å˜æ¢å…³ç³»" class="headerlink" title="ç›¸æœºåæ ‡ç³»$(X_c,Y_c,Z_c)$åˆ°å›¾åƒåæ ‡ç³»$(u,v)$çš„å˜æ¢å…³ç³»"></a>ç›¸æœºåæ ‡ç³»$(X_c,Y_c,Z_c)$åˆ°å›¾åƒåæ ‡ç³»$(u,v)$çš„å˜æ¢å…³ç³»</h1><p>$$<br>{Z_{c}}\begin{bmatrix}<br>u \\<br>v \\<br>1<br>\end{bmatrix} &#x3D; \begin{bmatrix}<br>f_x &amp; 0 &amp; c_x &amp; 0 \\<br>0 &amp; f_y &amp; c_y &amp; 0 \\<br>0 &amp; 0 &amp; 1 &amp; 0<br>\end{bmatrix} \cdot \begin{bmatrix}<br>X_c \\<br>Y_c \\<br>Z_c \\<br>1<br>\end{bmatrix} &#x3D; \begin{bmatrix}<br>f_x X_c+c_x Z_c \\<br>f_y Y_c+c_y Z_c \\<br>Z_c<br>\end{bmatrix}<br>$$</p><p>å…¶ä¸­ï¼Œ$\left[ \begin{smallmatrix} f_x &amp; 0 &amp; c_x &amp; 0 \\ 0 &amp; f_y &amp; c_y &amp; 0 \\ 0 &amp; 0 &amp; 1 &amp; 0  \end{smallmatrix} \right]$ ä¸ºç›¸æœºçš„å†…å‚çŸ©é˜µï¼Œè¿›ä¸€æ­¥åŒ–ç®€å¾—: </p><p>$$<br>\begin{bmatrix}<br>u \\<br>v \\<br>1<br>\end{bmatrix}<br>&#x3D;\begin{bmatrix}<br>f_x &amp; 0 &amp; c_x &amp; 0 \\<br>0 &amp; f_y &amp; c_y &amp; 0 \\<br>0 &amp; 0 &amp; 1 &amp; 0<br>\end{bmatrix}<br>\cdot \begin{bmatrix}<br>X_c \\<br>Y_c \\<br>Z_c \\<br>1<br>\end{bmatrix}<br>&#x3D; \begin{bmatrix}<br>f_x X_c &#x2F; Z_c+c_x \\<br>f_y Y_c &#x2F; Z_c+c_y \\<br>1<br>\end{bmatrix}<br>$$</p><p>ç›¸æœºåæ ‡ç³»$(X_c,Y_c,Z_c)$åˆ°å›¾åƒåæ ‡ç³»$(u,v)$çš„å˜æ¢å…³ç³»å¦‚ä¸‹æ‰€ç¤º: </p><p>$$<br>\begin{cases}<br>    u &#x3D; \frac{f_x X_c}{Z_c} + c_x \\<br>    v &#x3D; \frac{f_y Y_c}{Z_c} + c_y<br>\end{cases}<br>$$</p><h1 id="ä¸–ç•Œåæ ‡ç³»-X-w-Y-w-Z-w-åˆ°å›¾åƒåæ ‡ç³»-u-v-çš„å˜æ¢å…³ç³»"><a href="#ä¸–ç•Œåæ ‡ç³»-X-w-Y-w-Z-w-åˆ°å›¾åƒåæ ‡ç³»-u-v-çš„å˜æ¢å…³ç³»" class="headerlink" title="ä¸–ç•Œåæ ‡ç³»$(X_w,Y_w,Z_w)$åˆ°å›¾åƒåæ ‡ç³»$(u,v)$çš„å˜æ¢å…³ç³»"></a>ä¸–ç•Œåæ ‡ç³»$(X_w,Y_w,Z_w)$åˆ°å›¾åƒåæ ‡ç³»$(u,v)$çš„å˜æ¢å…³ç³»</h1><p>ç›¸æœºå¤–å‚ä¸­çš„æ—‹è½¬å’Œå¹³ç§»çš„æ–¹å‘ä¸ºç›¸æœºåæ ‡ç³»ä¸­å„ä¸ªè½´çš„æ–¹å‘ï¼Œè€Œä¸æ˜¯ä¸–ç•Œåæ ‡ç³»å„ä¸ªè½´çš„æ–¹å‘ï¼Œä»¥ç›¸æœºå…ˆç»•ç›¸æœºçš„$x$è½´æ—‹è½¬$pitch$å¼§åº¦ï¼Œç„¶åå†ç»•ç›¸æœºçš„$y$è½´æ—‹è½¬$yaw$å¼§åº¦ï¼Œæœ€åç»•ç›¸æœºçš„$z$è½´æ—‹è½¬$roll$å¼§åº¦å¾—åˆ°æ–°çš„ç›¸æœºä½ç½®ä¸ºä¾‹ï¼Œæ¯æ¬¡æ—‹è½¬æ—¶çš„æ—‹è½¬çŸ©é˜µçš„è®¡ç®—å¦‚ä¸‹æ‰€ç¤ºï¼š<br>$$<br>R_x&#x3D;<br>\begin{bmatrix}<br>1 &amp; 0 &amp; 0 \\<br>0 &amp; \cos(pitch) &amp; -\sin(pitch) \\<br>0 &amp; \sin(pitch) &amp; \cos(pitch)<br>\end{bmatrix}<br>$$</p><p>$$<br>R_{y}&#x3D;<br>\begin{bmatrix}<br>\cos(yaw) &amp; 0 &amp; \sin(yaw) \\<br>0 &amp; 1 &amp; 0 \\<br>-\sin(yaw) &amp; 0 &amp; \cos(yaw)<br>\end{bmatrix}<br>$$</p><p>$$<br>R_{z}&#x3D;<br>\begin{bmatrix}<br>\cos(roll) &amp; -\sin(roll) &amp; 0 \\<br>\sin(roll) &amp; \cos(roll) &amp; 0 \\<br>0 &amp; 0 &amp; 1<br>\end{bmatrix}<br>$$<br>å³ï¼Œç»¼åˆæ—‹è½¬çŸ©é˜µä¸º:<br>$$<br>R&#x3D;{R_z}{R_y}{R_x}&#x3D;<br>\begin{bmatrix}<br>c_{roll} c_{yaw} &amp; c_{roll} s_{yaw} s_{pitch}-s_{roll} c_{pitch} &amp; c_{roll} s_{yaw} c_{pitch}+s_{roll} s_{pitch} \\<br>s_{roll} c_{yaw} &amp; s_{roll} s_{yaw} s_{pitch}+c_{roll} c_{pitch} &amp; s_{roll} s_{yaw} c_{pitch}-c_{roll} s_{pitch} \\<br>-s_{yaw} &amp; c_{yaw} s_{pitch} &amp; c_{yaw} c_{pitch}<br>\end{bmatrix}<br>$$</p><p>å…¶ä¸­, $c_{yaw}&#x3D;\cos(yaw)$, $s_{yaw}&#x3D;\sin(yaw)$, $c_{pitch}&#x3D;\cos(pitch)$, $s_{pitch}&#x3D;\sin(pitch)$, $c_{roll}&#x3D;\cos(roll)$, $s_{roll}&#x3D;\sin(roll)$ã€‚</p><p>ç›¸æœºçš„å¹³ç§»çŸ©é˜µå¦‚ä¸‹æ‰€ç¤º:<br>$$<br>t&#x3D;<br>\begin{bmatrix}<br>t_{x} \\<br>t_{y} \\<br>t_{z}<br>\end{bmatrix}<br>$$<br>å…¶ä¸­ï¼Œ$t_{x}$, $t_{y}$, $t_{z}$åˆ†è¡¨è¡¨ç¤ºæ²¿ç€ç›¸æœºåæ ‡ç³»çš„åæ ‡è½´çš„å¹³ç§»æ–¹å‘ï¼Œè€Œä¸æ˜¯ä¸–ç•Œåæ ‡ç³»åæ ‡è½´çš„æ–¹å‘ã€‚<br>$$<br>Z_{c}<br>\begin{bmatrix}<br>u \\<br>v \\<br>1<br>\end{bmatrix}&#x3D;<br>\begin{bmatrix}<br>f_{x} &amp; {0} &amp; c_{x} &amp; {0} \\<br>{0} &amp; f_{y} &amp; c_{y} &amp; {0} \\<br>{0} &amp; {0} &amp; {1} &amp;{0}<br>\end{bmatrix}<br>\begin{bmatrix}<br>R &amp; t \\<br>0 &amp; 1<br>\end{bmatrix}<br>\begin{bmatrix}<br>{X_{w}} \\<br>{Y_{w}} \\<br>{Z_{w}} \\<br>1<br>\end{bmatrix}<br>$$<br>å…¶ä¸­$Z_{c}$å¯ä»¥ä½¿ç”¨ç›¸æœºå¤–å‚$(R,t)$å’Œä¸–ç•Œåæ ‡ç³»ä¸­çš„ç‚¹$(X_w,Y_w,Z_w)$æ±‚å¾—:<br>$$<br>\begin{bmatrix}<br>X_{c} \\<br>Y_{c} \\<br>Z_{c} \\<br>1<br>\end{bmatrix}&#x3D;<br>\begin{bmatrix}<br>R &amp; t \\<br>0 &amp; 1<br>\end{bmatrix}<br>\begin{bmatrix}<br>X_{w} \\<br>Y_{w} \\<br>Z_{w} \\<br>1<br>\end{bmatrix}&#x3D;<br>\begin{bmatrix}<br>R_{11} &amp; R_{12} &amp; R_{13} &amp; t_{x}  \\<br>R_{21} &amp; R_{22} &amp; R_{23} &amp; t_{y}  \\<br>R_{31} &amp; R_{32} &amp; R_{33} &amp; t_{z}  \\<br>0 &amp; 0 &amp; 0 &amp; 1<br>\end{bmatrix}<br>\begin{bmatrix}<br>X_{w} \\<br>Y_{w} \\<br>Z_{w} \\<br>1<br>\end{bmatrix}&#x3D;<br>\begin{bmatrix}<br>R_{11}X_{w}+R_{12}Y_{w}+R_{13}Z_{w}+t_{x} \\<br>R_{21}X_{w}+R_{22}Y_{w}+R_{23}Z_{w}+t_{y} \\<br>R_{31}X_{w}+R_{32}Y_{w}+R_{33}Z_{w}+t_{z} \\<br>1<br>\end{bmatrix}<br>$$<br>å³ï¼Œ$Z_{c}&#x3D;R_{31}X_{w}+R_{32}Y_{w}+R_{33}Z_{w}+t_{3}$ï¼Œè¿™æ ·ä¾¿å¯ä»¥å¾—åˆ°ä¸–ç•Œåæ ‡ç³»ä¸­çš„ç‚¹åˆ°å›¾åƒåæ ‡ç³»çš„å˜æ¢ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åæ ‡ç³»å˜æ¢ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åæ ‡ç³»å˜æ¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è½¦è½½ç›¸æœºä¸åœ°é¢çš„åœ¨çº¿æ ‡å®š</title>
      <link href="/2023/11/16/che-zai-xiang-ji-yu-di-mian-de-zai-xian-biao-ding/"/>
      <url>/2023/11/16/che-zai-xiang-ji-yu-di-mian-de-zai-xian-biao-ding/</url>
      
        <content type="html"><![CDATA[<h1 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h1><p>ç›¸æœºä¸åœ°é¢çš„åœ¨çº¿æ ‡å®šæ˜¯ä¸€èˆ¬æŒ‡å®æ—¶ç”Ÿæˆç›¸æœºä¸é“è·¯å¹³é¢ä¹‹é—´çš„éåˆšä½“å˜æ¢ï¼Œç°æœ‰çš„è§£å†³æ–¹æ¡ˆå¸¸å¸¸åˆ©ç”¨é™æ€æ ‡å®šï¼Œåœ¨é¢å¯¹è½®èƒæ°”å‹å˜åŒ–ã€è½¦è¾†è½½é‡ä½“ç§¯å˜åŒ–å’Œé“è·¯è¡¨é¢å¤šæ ·æ€§ç­‰ç¯å¢ƒå˜åŒ–æ—¶å­˜åœ¨é—®é¢˜ã€‚å…¶ä»–åœ¨çº¿è§£å†³æ–¹æ¡ˆåˆ©ç”¨é“è·¯å…ƒç´ æˆ–å›¾åƒä¸­é‡å è§†å›¾ä¹‹é—´çš„å…‰åº¦ä¸€è‡´æ€§ï¼Œè¿™éœ€è¦åœ¨é“è·¯ä¸Šè¿ç»­æ£€æµ‹ç‰¹å®šç›®æ ‡æˆ–å€ŸåŠ©å¤šä¸ªæ‘„åƒå¤´æ¥è¿›è¡Œæ ‡å®šã€‚</p><p>è¿™é‡Œæå‡ºä¸€ç§åœ¨çº¿çš„å•ç›®ç›¸æœºä¸åœ°é¢æ ‡å®šè§£å†³æ–¹æ¡ˆï¼Œä¸éœ€è¦åœ¨è¡Œé©¶è¿‡ç¨‹ä¸­ä½¿ç”¨ä»»ä½•ç‰¹å®šç›®æ ‡ã€‚é€šè¿‡è½®é€Ÿé‡Œç¨‹è®¡è¿›è¡Œç²—åˆ°ç²¾çš„åœ°é¢ç‰¹å¾æå–ï¼Œå¹¶é€šè¿‡åŸºäºæ»‘åŠ¨çª—å£çš„å› å­å›¾ä¼˜åŒ–æ¥ä¼°è®¡ç›¸æœºä¸åœ°é¢çš„æ ‡å®šå‚æ•°ã€‚è€ƒè™‘åˆ°é©¾é©¶è¿‡ç¨‹ä¸­ç›¸æœºä¸åœ°é¢ä¹‹é—´çš„éåˆšæ€§å˜æ¢ï¼ŒåŒæ—¶æä¾›äº†è¡¡é‡æ ‡å®šæ€§èƒ½çš„æŒ‡æ ‡å’Œåœæ­¢æ ‡å‡†ï¼Œç”¨ä»¥å‘å¸ƒæ»¡æ„çš„æ ‡å®šç»“æœã€‚ä½¿ç”¨çœŸå®çš„æ•°æ®è¿›è¡Œçš„å¹¿æ³›å®éªŒè¡¨æ˜è¯¥ç®—æ³•æœ‰æ•ˆï¼Œå¹¶ä¸”ä¼˜äºç°æœ‰çš„æŠ€æœ¯ã€‚</p><h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>ç°ä»£è½¦è¾†é…å¤‡äº†å„ç§æ‘„åƒå¤´ï¼Œä»¥è·å–ä¸å‘¨å›´ç¯å¢ƒç›¸å…³çš„ä¸°å¯Œè¯­ä¹‰ä¿¡æ¯ï¼Œå¹¶å°†ç‰¹å¾ç»Ÿä¸€åœ¨å…±äº«çš„é¸Ÿç°å›¾ä¸­ï¼Œä»¥æ”¯æŒå¯è§£é‡Šçš„è¿åŠ¨è§„åˆ’ä»»åŠ¡ã€‚ç›¸æœºä¸åœ°é¢çš„æ ‡å®šåœ¨ç¡®å®šç›¸æœºåæ ‡å’Œåœ°é¢åæ ‡ä¹‹é—´çš„ç‰¹å¾ä½ç½®çš„å‡ ä½•å˜æ¢æ–¹é¢èµ·ç€å…³é”®ä½œç”¨ã€‚å®ƒæœ‰åŠ©äºæ¶ˆé™¤ç›¸æœºçš„é€è§†ç•¸å˜ï¼Œæä¾›é¸Ÿç°å›¾è¡¨ç¤ºç©ºé—´ï¼Œå¹¶ä¸”ä¾¿äºä¼°ç®—å®‰è£…åœ¨è½¦è¾†ä¸Šçš„ç›¸æœºä¸åœ°é¢ä¸Šä½ç½®ä¹‹é—´çš„è·ç¦»ï¼Œè¿™åœ¨å…ˆè¿›é©¾é©¶è¾…åŠ©ç³»ç»Ÿï¼ˆADASï¼‰å’Œè‡ªåŠ¨é©¾é©¶ç³»ç»Ÿä¸­è¢«å¹¿æ³›åº”ç”¨ã€‚</p><p>åœ¨è¿‡å»çš„å‡ åå¹´ä¸­ï¼Œå·²ç»æå‡ºäº†è®¸å¤šç›¸æœºä¸åœ°é¢çš„æ ‡å®šæ–¹æ³•ã€‚è¿™äº›æ–¹æ³•é€šå¸¸å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼Œå…¶ä¸€æ˜¯é™æ€æ ‡å®šï¼Œå…¶äºŒæ˜¯è¡Œé©¶è¿‡ç¨‹ä¸­çš„åœ¨çº¿æ ‡å®šã€‚ç¬¬ä¸€ç±»æ–¹æ³•é€šå¸¸ä½¿ç”¨è¯¸å¦‚æ£‹ç›˜æ ¼æˆ–æ‰‹åŠ¨æ ‡æ³¨çš„åœ°é¢ç‰©ä½“ç­‰å„ç§æ¨¡å¼ï¼Œäº‹å…ˆè®¡ç®—ç›¸æœºä¸åœ°é¢ä¹‹é—´çš„å˜æ¢å…³ç³»ã€‚ç„¶è€Œï¼Œç”±äºè½¦è¾†åœ¨é“è·¯ä¸Šè¡Œé©¶æ—¶ï¼Œç”±äºè½®èƒæ°”å‹å˜åŒ–ã€è½¦è¾†è½½è·å˜åŒ–ã€é“è·¯è¡¨é¢å¤šæ ·æ€§å’Œéƒ¨ä»¶æŒ¯åŠ¨ï¼Œæ­¤ç±»å˜æ¢æ˜¯éåˆšæ€§çš„ã€‚ç›¸æœºä¸åœ°é¢çš„æ ‡å®šåº”åœ¨è¡Œé©¶è¿‡ç¨‹ä¸­è¿›è¡Œå¤šæ¬¡ï¼Œä»¥è°ƒæ•´å‡ ä½•æŠ•å½±çš„å˜åŒ–ã€‚ä¾‹å¦‚ï¼Œç”±å‘¨å›´è§†å›¾é±¼çœ¼ç›¸æœºæ•è·çš„å›¾åƒåœ¨ä¸‹å›¾aä¸­ï¼Œé™æ€æ ‡å®šåœ¨ä¸‹å›¾bä¸­ä¼šå¯¼è‡´BEVå›¾åƒä¸å‡†ç¡®ã€‚åœ¨çº¿æ ‡å®šå¯ä»¥å‡å°å˜æ¢è¯¯å·®ï¼Œç¡®ä¿é€‚å½“åœ°å¤„ç†æŠ•å½±å˜åŒ–ï¼Œå¹¶ç”Ÿæˆä¸‹å›¾cä¸­å¯¹é½è‰¯å¥½çš„BEVå›¾åƒã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E8%BD%A6%E8%BD%BD%E7%9B%B8%E6%9C%BA%E4%B8%8E%E5%9C%B0%E9%9D%A2%E7%9A%84%E5%9C%A8%E7%BA%BF%E6%A0%87%E5%AE%9A/1.png"></p><p>ä¸Šå›¾åœ¨ç»™å®šçš„ç¯è§†å›¾é±¼çœ¼ç›¸æœºå›¾åƒaä¸­ï¼Œé™æ€æ ‡å®šåŒ…å«äº†å¤§é‡çš„ç›¸æœºåˆ°åœ°é¢ä¼°è®¡è¯¯å·®ï¼Œå¯¼è‡´BEVå›¾åƒä¸åŒ¹é…bï¼Œä½†æ˜¯æœ¬æ–‡çš„æ–¹æ³•åœ¨cä¸­ç”Ÿæˆäº†ä¸€ä¸ªå¯¹é½è‰¯å¥½çš„BEVå›¾åƒã€‚ç¬¬äºŒç±»ç°æœ‰æ–¹æ³•åº”ç”¨åœ¨çº¿æ ‡å®šï¼Œè¿™éœ€è¦ä»é“è·¯ä¸Šæå–å‡ºç‰¹å®šçš„å‡ ä½•å½¢çŠ¶ï¼Œä¾‹å¦‚å•ç›®ç›¸æœºçš„æ¶ˆå¤±ç‚¹å’Œå‘¨å›´è§†å›¾ç›¸æœºæå–çš„è½¦é“æ ‡çº¿ï¼Œæˆ–è€…å¤šä¸ªç›¸æœºä¹‹é—´é‡å åŒºåŸŸçš„å…‰åº¦ä¸€è‡´æ€§ï¼Œä»¥è¾…åŠ©æ ‡å®šè°ƒæ•´ã€‚ç„¶è€Œï¼Œåœ¨å„ç§è¡Œé©¶ç¯å¢ƒä¸­å¾ˆéš¾ä¿æŒè¿™äº›è¦æ±‚ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦åœ¨ä½¿ç”¨å•ä¸ªæ‘„åƒå¤´è¿ç»­å›¾åƒçš„æƒ…å†µä¸‹è¿›è¡Œç›¸æœºä¸åœ°é¢çš„æ ‡å®šï¼Œè€Œä¸ä¾èµ–äºä»»ä½•ç‰¹å®šçš„æ ‡å®šç›®æ ‡ã€‚</p><h1 id="å†…å®¹"><a href="#å†…å®¹" class="headerlink" title="å†…å®¹"></a>å†…å®¹</h1><p>æœ¬æ–‡é‡‡ç”¨äº†ä¸€ç§ä»ç²—åˆ°ç²¾çš„æ–¹æ³•ï¼Œåœ¨è½¦è¾†è¡Œé©¶åœ¨é“è·¯ä¸Šæ—¶ï¼Œé€šè¿‡å› å­å›¾ä¼˜åŒ–è·å–åœ°é¢ç‰¹å¾å¹¶ä¼˜åŒ–ç›¸æœºåˆ°åœ°é¢çš„æ ‡å®šå‚æ•°ï¼Œè€Œæ— éœ€ä½¿ç”¨ä»»ä½•ç‰¹å®šçš„æ ‡å®šç›®æ ‡ã€‚åˆ©ç”¨å›¾åƒä¸­æ°´å¹³çº¿åˆ†ç¦»åœ°é¢å’Œéåœ°é¢åŒºåŸŸï¼Œé€šè¿‡è½®å¼æµ‹ç¨‹æ³•é¢„æµ‹åœ°é¢ç‰¹å¾çš„ä½ç½®ï¼Œå¹¶ä½¿ç”¨åŸºäºå‡ ä½•çš„æ–¹æ³•éªŒè¯åœ°é¢ç‰¹å¾ã€‚å¯¹ä¸‰è§’æµ‹é‡çš„åœ°é¢ç‰¹å¾è¿›è¡Œå¹³é¢æ‹Ÿåˆï¼Œä»¥è·å–åœ°é¢çš„æ³•å‘é‡å’Œç›¸æœºåˆ°åœ°é¢çš„é«˜åº¦ï¼Œå¹¶é€šè¿‡å› å­å›¾ä¼˜åŒ–è¿›ä¸€æ­¥æ”¹è¿›è¿™äº›å‚æ•°ï¼Œä»¥ç¡®å®šç›¸æœºåˆ°åœ°é¢çš„å˜æ¢å…³ç³»ã€‚è€ƒè™‘åˆ°åœ¨é©¾é©¶è¿‡ç¨‹ä¸­ç›¸æœºåˆ°åœ°é¢çš„éåˆšæ€§å˜æ¢ï¼Œè¿˜æå‡ºäº†åº¦é‡æ ‡å®šæ€§èƒ½çš„æŒ‡æ ‡å’Œåœæ­¢å‡†åˆ™ï¼Œä»¥ç¡®ä¿æ ‡å®šè´¨é‡ã€‚</p><p>ä¸‹å›¾å±•ç¤ºäº†ç³»ç»Ÿæ¡†å›¾ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹æ¨¡å—ã€‚é¦–å…ˆåˆ©ç”¨è¿åŠ¨å­¦è‡ªè½¦æ¨¡å‹æ¢å¤å›¾åƒå…³é”®å¸§ä¹‹é—´çš„ç›¸å¯¹è¿åŠ¨ï¼Œä»¥ä¾¿è¿›è¡Œç›¸æœºå§¿æ€ä¼°è®¡å’Œåœ°é¢ç‚¹ä¸‰è§’æµ‹é‡ã€‚å…¶æ¬¡ä»å…³é”®å¸§ä¸­æå–ç²—ç³™çš„åœ°é¢ç‰¹å¾ï¼Œé€šè¿‡è½¦è¾†è¿åŠ¨è¿›è¡Œç‰¹å¾é¢„æµ‹ï¼Œå¹¶è¿›ä¸€æ­¥è¿›è¡Œä¼˜åŒ–åœ°é¢ç‰¹å¾éªŒè¯è¿‡ç¨‹ã€‚ç„¶åè¿›è¡Œåœ°é¢å¹³é¢æ‹Ÿåˆï¼Œè·å–åœ°é¢æ³•å‘é‡å’Œç›¸æœºåˆ°åœ°é¢çš„é«˜åº¦ã€‚ç„¶åé€šè¿‡å› å­å›¾ä¼˜åŒ–æ¥ç»†åŒ–ç›¸æœºå§¿æ€å’Œç›¸æœºåˆ°åœ°é¢çš„å˜æ¢å‚æ•°ï¼Œå¹¶æå‡ºäº†ä¸€ä¸ªåœæ­¢æ ‡å®šå‡†åˆ™ï¼Œç¡®å®šä½•æ—¶å‘å¸ƒç›¸æœºåˆ°åœ°é¢çš„æ ‡å®šç»“æœã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E8%BD%A6%E8%BD%BD%E7%9B%B8%E6%9C%BA%E4%B8%8E%E5%9C%B0%E9%9D%A2%E7%9A%84%E5%9C%A8%E7%BA%BF%E6%A0%87%E5%AE%9A/2.png"></p><h2 id="é€šè¿‡è½®é€Ÿé‡Œç¨‹è®¡æµ‹é‡çš„ç›¸æœºè¿åŠ¨"><a href="#é€šè¿‡è½®é€Ÿé‡Œç¨‹è®¡æµ‹é‡çš„ç›¸æœºè¿åŠ¨" class="headerlink" title="é€šè¿‡è½®é€Ÿé‡Œç¨‹è®¡æµ‹é‡çš„ç›¸æœºè¿åŠ¨"></a>é€šè¿‡è½®é€Ÿé‡Œç¨‹è®¡æµ‹é‡çš„ç›¸æœºè¿åŠ¨</h2><p>åˆ©ç”¨CANæ€»çº¿ç³»ç»Ÿæä¾›çš„è¿ç»­è½¦è½®é‡Œç¨‹è¯»æ•°ä¼°è®¡è½¦è¾†éšæ—¶é—´çš„å§¿æ€å˜åŒ–ï¼Œå¹¶ç¡®å®šç›¸æœºå…³é”®å¸§ä¹‹é—´çš„ç›¸å¯¹è¿åŠ¨ï¼Œä»¥æ¢å¤å•ç›®ç›¸æœºç³»ç»Ÿçš„å°ºåº¦å› å­ã€‚</p><h2 id="è¿ç»­å…³é”®å¸§çš„åœ°é¢æå–"><a href="#è¿ç»­å…³é”®å¸§çš„åœ°é¢æå–" class="headerlink" title="è¿ç»­å…³é”®å¸§çš„åœ°é¢æå–"></a>è¿ç»­å…³é”®å¸§çš„åœ°é¢æå–</h2><p>åœ°é¢ç‰¹å¾ï¼ˆå³è½¦è¾†æ‰€è¡Œé©¶çš„é“è·¯è¡¨é¢ä¸Šçš„ç‰¹å¾ï¼‰åœ¨ç›¸æœºä¸åœ°é¢æ ‡å®šä¸­èµ·ç€é‡è¦ä½œç”¨ã€‚åœ¨åŸå¸‚&#x2F;éƒŠåŒºç¯å¢ƒä¸­ï¼Œå¤§å¤šæ•°åœ°é¢ç‰¹å¾ä½äºå…·æœ‰ç›¸ä¼¼çº¹ç†çš„æ··å‡åœŸæˆ–æ²¥é’é“è·¯è¡¨é¢ä¸Šï¼Œè¿™äº›ç‰¹å¾å¾ˆéš¾æå–å’ŒåŒ¹é…ã€‚è¿™é‡Œæå‡ºäº†ä¸€ç§æ–°é¢–çš„ç²—åˆ°ç»†çš„åœ°é¢ç‰¹å¾æå–æ¶æ„ï¼Œç”¨äºç¨³å¥çš„ç›¸æœºä¸åœ°é¢æ ‡å®šã€‚</p><p>é¦–å…ˆï¼Œå¼•å…¥åœ°å¹³çº¿æå–æ–¹æ³•ï¼Œé€šè¿‡è½¦è¾†è¿åŠ¨é¢„æµ‹åœ°é¢ç‰¹å¾çš„ä½ç½®ï¼Œä»¥ä¾¿è¿›è¡Œç‰¹å¾åŒ¹é…ã€‚ç„¶åï¼Œåˆ©ç”¨å‡ ä½•æ–¹æ³•æ¥éªŒè¯åœ°é¢ç‰¹å¾ï¼Œå¹¶è¿›è¡Œåœ°é¢å¹³é¢æ‹Ÿåˆï¼Œä»¥è·å¾—åœ°é¢æ³•çº¿å‘é‡å’Œç›¸æœºä¸­å¿ƒåˆ°åœ°é¢çš„é«˜åº¦ã€‚åœ¨è¿›è¡Œæ ‡å®šæ—¶ï¼Œé€‰æ‹©ä»¥ç¨³å®šé€Ÿåº¦è¡Œé©¶æ—¶çš„å…³é”®å¸§ï¼Œè¿™æ ·å¯ä»¥åœ¨ä¸åŒçš„å›¾åƒå¸§ä¹‹é—´è·å¾—è¾ƒå°çš„ç›¸æœºå§¿æ€å˜åŒ–ï¼Œæœ‰åˆ©äºæ ‡å®šè¿‡ç¨‹çš„ç¨³å®šæ€§ï¼Œå…³é”®å¸§æ˜¯æŒ‡åœ¨æ—¶é—´åºåˆ—ä¸­é€‰æ‹©çš„ä¸€å¸§å›¾åƒï¼Œé€šå¸¸è¡¨ç¤ºä¸ºæ—¶é—´é—´éš”çš„èµ·ç‚¹ã€‚ä»é€‰æ‹©çš„å…³é”®å¸§å¼€å§‹ï¼Œé€šè¿‡KLTç¨€ç–å…‰æµç®—æ³•æå–å›¾åƒä¸­çš„è§’ç‚¹ç‰¹å¾ï¼Œå¹¶è¿›è¡Œè·Ÿè¸ªã€‚ç„¶åé€šè¿‡æ°´å¹³çº¿åˆ†å‰²å›¾åƒï¼Œå¯ä»¥ç­›é€‰ä½äºæ°´å¹³çº¿ä»¥ä¸‹çš„ç‰¹å¾ç‚¹æ¥é€‰æ‹©åœ°é¢ç‰¹å¾ï¼Œå¹¶åˆ©ç”¨è½¦è¾†çš„è¿åŠ¨ä¿¡æ¯è¿›ä¸€æ­¥é¢„æµ‹åœ°é¢ç‰¹å¾åœ¨ä¸‹ä¸€ä¸ªå…³é”®å¸§ä¸­çš„ä½ç½®ï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆåœ°æå–å’Œè·Ÿè¸ªåœ°é¢ç‰¹å¾ï¼Œä¸ºåç»­çš„ç›¸æœºåˆ°åœ°é¢æ ‡å®šå’Œåœºæ™¯ç†è§£æä¾›é‡è¦çš„ä¿¡æ¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E8%BD%A6%E8%BD%BD%E7%9B%B8%E6%9C%BA%E4%B8%8E%E5%9C%B0%E9%9D%A2%E7%9A%84%E5%9C%A8%E7%BA%BF%E6%A0%87%E5%AE%9A/3.png"></p><p>ä¸Šå›¾é€šè¿‡è½¦è¾†è¿åŠ¨è¿›è¡Œç‰¹å¾é¢„æµ‹ï¼Œè¿™é‡Œï¼ŒOkæ˜¯å…³é”®å¸§Ikçš„ç›¸æœºä¸­å¿ƒã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E8%BD%A6%E8%BD%BD%E7%9B%B8%E6%9C%BA%E4%B8%8E%E5%9C%B0%E9%9D%A2%E7%9A%84%E5%9C%A8%E7%BA%BF%E6%A0%87%E5%AE%9A/4.png"></p><p>ä¸Šå›¾ä¸ºç²—ç³™çš„åœ°é¢ç‰¹å¾æå–ï¼Œå¯¹äºæ¯ä¸ªç‰¹å¾ï¼Œé€šè¿‡è½¦è¾†è¿åŠ¨é¢„æµ‹å…¶åœ¨ä¸‹ä¸€ä¸ªå…³é”®å¸§ä¸­çš„ä½ç½®aã€‚å› æ­¤ï¼Œä¸æ²¡æœ‰ä»»ä½•é¢„æµ‹çš„KLTè·Ÿè¸ªå™¨ä¸­çš„ç‰¹å¾ç›¸æ¯”ï¼Œåœ¨bä¸­æœ‰æ›´å¤šçš„ã€è´¨é‡æ›´é«˜çš„åŒ¹é…ç‰¹å¾å¯¹ã€‚è¿›ä¸€æ­¥åœ¨dä¸­ä»bä¸­å‡åŒ€é‡‡æ ·&#x2F;é€‰æ‹©ç‰¹å¾ä»¥è¿›è¡Œè®¡ç®—ä¼˜åŒ–ã€‚è¿™é‡Œï¼Œçº¢è‰²çº¿æ®µçš„ç«¯ç‚¹è¡¨ç¤ºå…³é”®å¸§Ikå’ŒIk+1ä¹‹é—´çš„åŒ¹é…ç‰¹å¾ï¼Œç»¿è‰²çº¿æ˜¯åœ°å¹³çº¿ã€‚</p><h2 id="è·¨å…³é”®å¸§åœ°é¢ä¼˜åŒ–"><a href="#è·¨å…³é”®å¸§åœ°é¢ä¼˜åŒ–" class="headerlink" title="è·¨å…³é”®å¸§åœ°é¢ä¼˜åŒ–"></a>è·¨å…³é”®å¸§åœ°é¢ä¼˜åŒ–</h2><p>é‡‡ç”¨åŸºäºæ»‘åŠ¨çª—å£çš„å› å­å›¾ä¼˜åŒ–æ–¹æ³•æ¥ä¼˜åŒ–ç›¸æœºå§¿æ€ã€åœ°é¢æ³•å‘é‡å’Œç›¸æœºä¸­å¿ƒåˆ°åœ°é¢çš„é«˜åº¦ã€‚é€šè¿‡ä½¿ç”¨å•åº”æ€§å˜æ¢çŸ©é˜µï¼Œå¯ä»¥å°†å½“å‰å…³é”®å¸§çš„ç‰¹å¾ç‚¹æŠ•å½±åˆ°ä¸Šä¸€å…³é”®å¸§çš„å›¾åƒä¸­ã€‚ç„¶åé€šè¿‡æœ€å°åŒ–é‡æŠ•å½±è¯¯å·®æ¥ä¼˜åŒ–ç›¸æœºå§¿æ€å’Œåœ°é¢å‚æ•°ï¼Œä»¥ç¡®ä¿åœ¨ä¸Šä¸€å…³é”®å¸§ä¸­çš„ç‰¹å¾ç‚¹ä¸å½“å‰å…³é”®å¸§ä¸­çš„æŠ•å½±ç‚¹ä¹‹é—´çš„ä¸€è‡´æ€§ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œé¦–å…ˆè®¡ç®—ä»å½“å‰å…³é”®å¸§åˆ°ä¸Šä¸€å…³é”®å¸§çš„ç›¸æœºå§¿æ€å˜æ¢ã€‚ç„¶åï¼Œæ ¹æ®ç›¸æœºå§¿æ€å˜æ¢å°†å½“å‰å…³é”®å¸§çš„ç‰¹å¾ç‚¹æŠ•å½±åˆ°ä¸Šä¸€å…³é”®å¸§çš„å›¾åƒå¹³é¢ä¸Šã€‚æ¥ä¸‹æ¥è®¡ç®—æŠ•å½±ç‚¹ä¸ä¸Šä¸€å…³é”®å¸§ä¸­çš„ç‰¹å¾ç‚¹ä¹‹é—´çš„é‡æŠ•å½±è¯¯å·®ï¼Œå¹¶å°†å…¶ä½œä¸ºä¼˜åŒ–é—®é¢˜çš„ç›®æ ‡å‡½æ•°ã€‚é€šè¿‡æœ€å°åŒ–è¿™ä¸ªç›®æ ‡å‡½æ•°ï¼Œå¯ä»¥åŒæ—¶è°ƒæ•´ç›¸æœºå§¿æ€ã€åœ°é¢æ³•å‘é‡å’Œç›¸æœºä¸­å¿ƒåˆ°åœ°é¢çš„é«˜åº¦ï¼Œä»è€Œå¾—åˆ°æ›´å‡†ç¡®çš„åœ°é¢å‚æ•°ã€‚é€šè¿‡è¿™ç§è·¨å…³é”®å¸§çš„åœ°é¢ä¼˜åŒ–æ–¹æ³•ï¼Œå¯ä»¥æ›´å¥½åœ°ä¼˜åŒ–ç›¸æœºå§¿æ€å’Œåœ°é¢å‚æ•°ï¼Œæé«˜ç›¸æœºåˆ°åœ°é¢çš„æ ‡å®šç²¾åº¦ï¼Œå¹¶ä¸ºåç»­çš„è·¯å¾„è§„åˆ’å’Œåœºæ™¯æ„ŸçŸ¥ä»»åŠ¡æä¾›æ›´å‡†ç¡®çš„åœ°é¢ä¿¡æ¯ã€‚</p><h1 id="å®éªŒ"><a href="#å®éªŒ" class="headerlink" title="å®éªŒ"></a>å®éªŒ</h1><p>åœ¨å„ç§é©¾é©¶åœºæ™¯ä¸‹ä½¿ç”¨ä¹˜ç”¨è½¦å®ç°äº†æœ¬æ–‡çš„ç®—æ³•å¹¶è¿›è¡Œäº†å¤§é‡å®éªŒï¼Œè½¦è¾†å®‰è£…äº†ç”±å››ä¸ªå‘ä¸‹æœå‘çš„é±¼çœ¼æ‘„åƒæœºç»„æˆçš„å…¨æ™¯æ‘„åƒç³»ç»Ÿï¼ˆå‚è§ä¸‹å›¾aä¸­çš„ç¤ºä¾‹ï¼‰ï¼Œè¿™äº›æ‘„åƒæœºä¸è½¦è½®ç¼–ç å™¨æ•°æ®åŒæ­¥ã€‚æ‘„åƒæœºçš„å¸§ç‡ä¸º33Hzï¼Œå›¾åƒåˆ†è¾¨ç‡è°ƒæ•´ä¸º812Ã—540ã€‚æœ¬æ–‡æ”¶é›†äº†æ¥è‡ªä¸åŒåŒºåŸŸçš„é•¿åºåˆ—è¿ç»­æ•°æ®ï¼Œä»¥åˆ†ææœ¬æ–‡ç®—æ³•çš„æ•ˆç‡å’Œé²æ£’æ€§ï¼ˆå‚è§è¡¨Iï¼‰ã€‚è¿™äº›æ•°æ®æ¶µç›–äº†ä»å¹³å¦çš„é“ºè£…åœ°é¢ï¼ˆFPGï¼‰åˆ°åŸå¸‚ã€éƒŠåŒºå’Œå†œæ‘ç­‰ä¸åŒå¤©æ°”ã€å…‰ç…§å’Œé©¾é©¶æ¡ä»¶ä¸‹çš„å…¬å…±é“è·¯ï¼ŒFPGæ•°æ®æ¥è‡ªæå…¶å¹³å¦çš„æ²¥é’è·¯é¢ï¼Œç”¨äºéªŒè¯æœ¬æ–‡åŠ¨æ€æ ‡å®šçš„åŸºå‡†æ€§èƒ½ã€‚è¡¨Içš„æœ€åä¸€åˆ—è¡¨ç¤ºè½¦è¾†è¡Œé©¶è€Œä¸æ˜¯åœè½¦çš„æ—¶é—´ç™¾åˆ†æ¯”ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E8%BD%A6%E8%BD%BD%E7%9B%B8%E6%9C%BA%E4%B8%8E%E5%9C%B0%E9%9D%A2%E7%9A%84%E5%9C%A8%E7%BA%BF%E6%A0%87%E5%AE%9A/5.png"></p><p>ä¸Šå›¾æ˜¾ç¤ºæœ¬æ–‡çš„æ–¹æ³•åœ¨å…·æœ‰æŒ‘æˆ˜æ€§çš„é©¾é©¶åœºæ™¯ä¸­è¡¨ç°è‰¯å¥½ï¼Œå›¾ä¸­çš„æ ‡ç­¾ä¸è¡¨æ ¼Iä»ä¸Šåˆ°ä¸‹å¯¹åº”ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E8%BD%A6%E8%BD%BD%E7%9B%B8%E6%9C%BA%E4%B8%8E%E5%9C%B0%E9%9D%A2%E7%9A%84%E5%9C%A8%E7%BA%BF%E6%A0%87%E5%AE%9A/6.png"></p><p>å°†æœ¬æ–‡çš„æ–¹æ³•ä¸ç°æœ‰çš„æœ€å…ˆè¿›æ–¹æ³•è¿›è¡Œæ¯”è¾ƒï¼Œä»è€Œå®šæ€§åœ°æ£€éªŒæ€§èƒ½ï¼ŒåŒ…æ‹¬Liuç­‰äºº[23]ã€OECS[24]å’ŒROECS[25]åœ¨æœ¬æ–‡çš„æ•°æ®é›†ä¸Šçš„æ€§èƒ½ã€‚é¦–å…ˆæ¯”è¾ƒäº†åœ¨FPGæ•°æ®ä¸Šçš„æ ‡å®šæ€§èƒ½ï¼Œå¹¶åœ¨è¡¨IIä¸­æ€»ç»“äº†ç»“æœã€‚ä¸å¯¹æ‰‹ä¸€æ ·ï¼Œæœ¬æ–‡çš„æ–¹æ³•åœ¨è½¦è¾†è¡Œé©¶åœ¨FPGä¸Šæ—¶èƒ½å¤Ÿç”Ÿæˆè¿ç»­ç¨³å®šçš„ç›¸æœºåˆ°åœ°é¢çš„æ ‡å®šã€‚å› æ­¤æ˜¾ç¤ºäº†ä¸åœ°é¢çœŸå®ï¼ˆGTï¼‰æ ‡å®šçš„æ¬§æ‹‰è§’å·®çš„å¹³å‡å€¼ï¼Œå¹¶è¯„ä¼°ç»å¯¹å˜åŒ–é‡Î´rã€Î´på’ŒÎ´yã€‚è¿™é‡Œï¼ŒÎ´rã€Î´på’ŒÎ´yåˆ†åˆ«è¡¨ç¤ºæ»šè½¬è§’ã€ä¿¯ä»°è§’å’Œåèˆªè§’çš„å˜åŒ–é‡ã€‚è¡¨IIä¸­çš„Î´håˆ—æ˜¯ç›¸æœºä¸­å¿ƒåˆ°åœ°é¢çš„é«˜åº¦ä½ç§»ã€‚åœ¨è¡¨IIä¸­ï¼Œå³ä½¿åœ¨å›¾åƒä¸Šæ²¡æœ‰å¯è¾¨åˆ«çº¹ç†çš„æ··å‡åœŸè·¯é¢ä¸Šï¼Œæœ¬æ–‡çš„åœ¨çº¿æ–¹æ³•ä¹Ÿå–å¾—äº†æ›´å¥½çš„æ€§èƒ½ã€‚ä¾‹å¦‚ï¼Œæœ¬æ–‡çš„æ–¹æ³•åœ¨ä¿¯ä»°è§’ã€åèˆªè§’å’Œé«˜åº¦ä¼°è®¡æ–¹é¢åˆ†åˆ«è·å¾—äº†æ˜¾è‘—çš„ç»å¯¹å¢ç›Šï¼Œåˆ†åˆ«ä¸º44.4%ã€50.0%å’Œ71.2%ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E8%BD%A6%E8%BD%BD%E7%9B%B8%E6%9C%BA%E4%B8%8E%E5%9C%B0%E9%9D%A2%E7%9A%84%E5%9C%A8%E7%BA%BF%E6%A0%87%E5%AE%9A/7.png"></p><p>ä¸ºäº†å±•ç¤ºæœ¬æ–‡æå‡ºçš„æ–¹æ³•çš„ä¼˜è¶Šæ€§ï¼Œåœ¨ä¸‹å›¾ä¸­å‘ˆç°äº†è¯¯å·®ç›´æ–¹å›¾ï¼Œè·å¾—äº†ä¸åŒåŒºé—´çš„è¯¯å·®å·®å¼‚ï¼Œä½œä¸ºç›¸å¯¹äºæœ€å…ˆè¿›å·¥ä½œçš„æ€§èƒ½æå‡çš„æ€»å’Œã€‚æœ¬æ–‡çš„æ–¹æ³•åœ¨ä¸åŒæ°´å¹³ä¸‹å…·æœ‰ç›¸å¯¹è¾ƒå°çš„ç‰¹å¾è½¬ç§»è¯¯å·®fï¼Œå¹¶ä¸”è¯¯å·®ä¿æŒåœ¨0.83åƒç´ ä»¥å†…ï¼Œè¿™åœ¨ä¸åŒæ•°æ®åºåˆ—ä¸­ä¿æŒä¸€è‡´ã€‚æœ¬æ–‡çš„æ–¹æ³•åœ¨éƒŠåŒºæ•°æ®ä¸Šè·å¾—äº†æœ€ä½çš„æ€§èƒ½å¢ç›Š44.2%ï¼Œåœ¨åŸå¸‚æ•°æ®ä¸Šè·å¾—äº†æœ€é«˜çš„æ€§èƒ½å¢ç›Š67.6%ã€‚åœ¨ä»åŸå¸‚åˆ°å†œæ‘åœ°åŒºçš„å…¬å…±é“è·¯é©¾é©¶æ•°æ®ä¸­ï¼Œä¸æœ€å…ˆè¿›æ–¹æ³•ç›¸æ¯”ï¼Œæœ¬æ–‡çš„æ–¹æ³•åœ¨è¯¯å·®pæ–¹é¢è¡¨ç°æ›´å¥½ã€‚è¯¯å·®påœ¨0.75åƒç´ ä»¥å†…å˜åŒ–ï¼Œå¹¶ä¸”90.9%çš„è¯¯å·®åœ¨0.67åƒç´ ä»¥å†…ã€‚åœ¨è€ƒè™‘å¹³å¦é“è·¯æ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œæ€§èƒ½æé«˜äº†12.7%ï¼Œåœ¨éƒŠåŒºæ•°æ®ä¸­è·å¾—äº†æœ€é«˜å¾—åˆ†ï¼Œè€Œåœ¨FPGæ•°æ®ä¸­è·å¾—äº†æœ€ä½å¾—åˆ†ï¼Œä¸º1.59%ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E8%BD%A6%E8%BD%BD%E7%9B%B8%E6%9C%BA%E4%B8%8E%E5%9C%B0%E9%9D%A2%E7%9A%84%E5%9C%A8%E7%BA%BF%E6%A0%87%E5%AE%9A/8.png"></p><p>ä¸Šå›¾ä¸ºè¡¨Iä¸­æ•°æ®åºåˆ—çš„æ€§èƒ½ç›´æ–¹å›¾ã€‚æ°´å¹³è½´çš„å€¼å¯¹åº”äºè¯¯å·®ï¼Œå‚ç›´è½´æ˜¯æ¦‚ç‡å¯†åº¦ã€‚</p><p>ä¸‹å›¾å±•ç¤ºäº†åœ¨è½¦è¾†ä»¥é«˜é€Ÿç›´è¡Œæ—¶ä¸åŒæ–¹æ³•ç”Ÿæˆçš„é¸Ÿç°å›¾åƒçš„è§†è§‰ç»“æœã€‚æœ¬æ–‡çš„æ–¹æ³•ä¸ä¾èµ–äºä¸åŒæ‘„åƒå¤´ä¹‹é—´çš„é‡å åŒºåŸŸæˆ–ç‰¹å®šç‰©ä½“ï¼Œè·å¾—äº†è¾ƒå°çš„ç‰¹å¾æ®‹å·®è¯¯å·®ï¼Œå¹¶ç”Ÿæˆäº†æ›´å¥½å¯¹é½çš„é¸Ÿç°å›¾åƒï¼ŒåŸå› å¦‚ä¸‹ï¼š</p><p>ï¼ˆ1ï¼‰ç›´è¡Œè½¦é“æ ‡çº¿ä¸è½¦è¾†è¡Œé©¶æ–¹å‘å¹³è¡Œï¼›</p><p>ï¼ˆ2ï¼‰æ‘„åƒå¤´ä¹‹é—´çš„è½¦é“æ ‡çº¿äº’ç›¸é‡å ï¼›</p><p>ï¼ˆ3ï¼‰é“è·¯ä¸Šçš„æ··å‡åœŸè£‚ç¼åœ¨ç›¸é‚»æ‘„åƒå¤´é¸Ÿç°å›¾åƒçš„é‡å åŒºåŸŸä¸Šè¿æ¥åœ¨ä¸€èµ·ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E8%BD%A6%E8%BD%BD%E7%9B%B8%E6%9C%BA%E4%B8%8E%E5%9C%B0%E9%9D%A2%E7%9A%84%E5%9C%A8%E7%BA%BF%E6%A0%87%E5%AE%9A/9.png"></p><p>ä¸Šå›¾ä¸ºåœ¨è¡Œé©¶è¿‡ç¨‹ä¸­åŸå¸‚Iæ•°æ®çš„ç¤ºä¾‹ç»“æœã€‚ä¸Šå›¾å±•ç¤ºäº†aæœ¬æ–‡çš„ç»“æœï¼ŒbROECS[25]ï¼ŒcOECS[24]å’Œï¼ˆdï¼‰Liuç­‰äººçš„ç»“æœã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æœ¬æ–‡æå‡ºäº†ä¸€ç§åœ¨çº¿ç›¸æœºåˆ°åœ°é¢æ— ç›®æ ‡æ ‡å®šæ–¹æ³•ï¼Œç”¨äºåœ¨è¡Œé©¶è¿‡ç¨‹ä¸­ç”Ÿæˆç›¸æœºåæ ‡ä¸åœ°é¢åæ ‡ä¹‹é—´çš„éåˆšä½“å˜æ¢ã€‚é‡‡ç”¨äº†ä¸€ç§æ–°é¢–çš„ç²—åˆ°ç²¾çš„æ¶æ„æ¥é€‰æ‹©åœ°é¢ç‰¹å¾ï¼Œå¹¶é€šè¿‡åŸºäºå‡ ä½•çš„æ–¹æ³•è¿›è¡ŒéªŒè¯ã€‚å¯¹ä¸‰è§’åŒ–çš„åœ°é¢ç‰¹å¾è¿›è¡Œå¹³é¢æ‹Ÿåˆï¼Œä»¥è·å¾—åœ°é¢æ³•å‘é‡å’Œç›¸æœºåˆ°åœ°é¢çš„é«˜åº¦ï¼Œç„¶åé€šè¿‡æ»‘åŠ¨çª—å£çš„å› å­å›¾ä¼˜åŒ–å¯¹å…¶è¿›è¡Œä¼˜åŒ–ã€‚é€šè¿‡æ—‹è½¬å¹³å‡ç¡®å®šç›¸æœºåˆ°åœ°é¢çš„å˜æ¢ï¼Œå¹¶æä¾›åœæ­¢æ ‡å‡†æ¥å¹¿æ’­æ»¡è¶³æ ‡å®šç»“æœçš„æƒ…å†µã€‚ä½¿ç”¨ä»ä¸åŒå¤©æ°”å’Œé©¾é©¶æ¡ä»¶ä¸‹æ”¶é›†çš„çœŸå®æ•°æ®å¯¹æœ¬æ–‡çš„ç®—æ³•è¿›è¡Œäº†å¹¿æ³›æµ‹è¯•ï¼Œç»“æœæ˜¾ç¤ºæœ¬æ–‡çš„æ–¹æ³•æ˜¯æœ‰æ•ˆçš„ï¼Œå¹¶ä¸”ä¼˜äºæœ€å…ˆè¿›çš„æŠ€æœ¯ã€‚åœ¨æœªæ¥å°†å‡å°‘å› å­å›¾ä¼˜åŒ–çš„è¿è¡Œæ—¶é—´å¤æ‚åº¦ï¼Œå¹¶è¿›è¡Œå¯è§‚æµ‹æ€§åˆ†æï¼Œä»¥è¯†åˆ«å¸®åŠ©ä¸¢å¼ƒä¸éœ€è¦ç”¨äºæ ‡å®šè®¡ç®—çš„å§¿æ€å’Œåœ°é¢ç‰¹å¾çš„é€€åŒ–åœºæ™¯ã€‚</p><h1 id="æ–‡ç« é“¾æ¥"><a href="#æ–‡ç« é“¾æ¥" class="headerlink" title="æ–‡ç« é“¾æ¥"></a>æ–‡ç« é“¾æ¥</h1><p><a href="https://arxiv.org/pdf/2303.17137.pdf">å‚è€ƒæ–‡ç« </a></p><p><a href="https://mp.weixin.qq.com/s/nSMl6mf-cyc54tL-yLdJcw">åŸæ–‡é“¾æ¥</a></p>]]></content>
      
      
      <categories>
          
          <category> ç›¸æœºæ ‡å®š </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡ç«  </tag>
            
            <tag> 360ç¯è§† </tag>
            
            <tag> åœ¨çº¿æ ‡å®š </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å•åº”æ€§çŸ©é˜µåº”ç”¨ä¹‹é¸Ÿç°å›¾ç”Ÿæˆ</title>
      <link href="/2023/11/02/dan-ying-xing-ju-zhen-ying-yong-zhi-niao-kan-tu-sheng-cheng/"/>
      <url>/2023/11/02/dan-ying-xing-ju-zhen-ying-yong-zhi-niao-kan-tu-sheng-cheng/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> opencv </category>
          
      </categories>
      
      
        <tags>
            
            <tag> opencv </tag>
            
            <tag> é¸Ÿç°å›¾ </tag>
            
            <tag> å•åº”æ€§çŸ©é˜µ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é›¶åŸºç¡€å­¦ä¹ g2o</title>
      <link href="/2023/10/17/ling-ji-chu-xue-xi-g2o/"/>
      <url>/2023/10/17/ling-ji-chu-xue-xi-g2o/</url>
      
        <content type="html"><![CDATA[<h1 id="æ­£ç¯‡"><a href="#æ­£ç¯‡" class="headerlink" title="æ­£ç¯‡"></a>æ­£ç¯‡</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>g2oï¼ˆGeneral Graphic Optimizationï¼‰æ˜¯ä¸€ä¸ªåŸºäºå›¾ä¼˜åŒ–çš„åº“ï¼Œå°†éçº¿æ€§ä¼˜åŒ–ä¸å›¾è®ºç»“åˆèµ·æ¥çš„ç†è®ºï¼Œæˆ‘ä»¬å¯ä»¥<strong>åˆ©ç”¨g2oæ±‚è§£ä»»ä½•å¯ä»¥è¡¨ç¤ºä¸ºå›¾ä¼˜åŒ–çš„æœ€å°äºŒä¹˜é—®é¢˜</strong>ã€‚å›¾ä¼˜åŒ–å°±æ˜¯æŠŠä¼˜åŒ–é—®é¢˜è¡¨ç°æˆå›¾çš„æ–¹å¼ã€‚å›¾ç”±é¡¶ç‚¹å’Œè¾¹ç»„æˆï¼Œå…¶ä¸­<em>é¡¶ç‚¹è¡¨ç¤ºä¼˜åŒ–å˜é‡</em>ï¼Œ<em>è¾¹è¡¨ç¤ºè¯¯å·®é¡¹</em>ï¼Œå¯¹ä»»æ„ä¸€ä¸ªéçº¿æ€§æœ€å°äºŒä¹˜é—®é¢˜ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥æ„å»ºä¸ä¹‹å¯¹åº”çš„å›¾ã€‚</p><p>g2oçš„æ ¸é‡Œå¸¦æœ‰å„ç§å„æ ·çš„æ±‚è§£å™¨ï¼Œè€Œå®ƒçš„é¡¶ç‚¹ã€è¾¹çš„ç±»å‹åˆ™å¤šç§å¤šæ ·ã€‚é€šè¿‡è‡ªå®šä¹‰é¡¶ç‚¹å’Œè¾¹ï¼Œäº‹å®ä¸Šï¼Œåªè¦ä¸€ä¸ªä¼˜åŒ–é—®é¢˜èƒ½å¤Ÿè¡¨è¾¾æˆå›¾ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç”¨g2oå»æ±‚è§£å®ƒã€‚å¸¸è§çš„ï¼Œæ¯”å¦‚bundle adjustmentï¼ŒICPï¼Œæ•°æ®æ‹Ÿåˆï¼Œéƒ½å¯ä»¥ç”¨g2oæ¥åšã€‚</p><p>ä»ä»£ç å±‚é¢æ¥è¯´ï¼Œg2oæ˜¯ä¸€ä¸ªc++ç¼–å†™çš„é¡¹ç›®ï¼Œç”¨cmakeæ„å»ºã€‚å®ƒçš„githubåœ°å€åœ¨ï¼š<a href="https://github.com/RainerKuemmerle/g2o">https://github.com/RainerKuemmerle/g2o</a> </p><p>g2oçš„æºä»£ç æ–‡ä»¶å¤¹çš„å†…å®¹ï¼š</p><ul><li><code>apps</code>ã€€ã€€ã€€ã€€ ä¸€äº›åº”ç”¨ç¨‹åºã€‚å¥½ç”¨çš„g2o_viewerå°±åœ¨è¿™é‡Œã€‚å…¶ä»–è¿˜æœ‰ä¸€äº›ä¸å¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ç­‰ã€‚</li><li><code>core</code>ã€€ã€€ã€€ã€€ æ ¸å¿ƒç»„ä»¶ï¼Œå¾ˆé‡è¦ï¼åŸºæœ¬çš„é¡¶ç‚¹ã€è¾¹ã€å›¾ç»“æ„çš„å®šä¹‰ï¼Œç®—æ³•çš„å®šä¹‰ï¼Œæ±‚è§£å™¨æ¥å£çš„å®šä¹‰åœ¨è¿™é‡Œã€‚</li><li><code>examples</code>ã€€  ä¸€äº›ä¾‹ç¨‹ï¼Œå¯ä»¥å‚ç…§ç€è¿™é‡Œçš„ä¸œè¥¿æ¥å†™ã€‚ä¸è¿‡æ³¨é‡Šä¸å¤ªå¤šã€‚</li><li><code>solvers</code>ã€€ã€€  æ±‚è§£å™¨çš„å®ç°ã€‚ä¸»è¦æ¥è‡ªcholdmod, csparseã€‚åœ¨ä½¿ç”¨g2oæ—¶è¦å…ˆé€‰æ‹©å…¶ä¸­ä¸€ç§ã€‚</li><li><code>stuff</code>ã€€ã€€ã€€  å¯¹ç”¨æˆ·æ¥è®²å¯æœ‰å¯æ— çš„ä¸€äº›å·¥å…·å‡½æ•°ã€‚</li><li><code>types</code>ã€€ã€€ã€€  å„ç§é¡¶ç‚¹å’Œè¾¹ï¼Œå¾ˆé‡è¦ï¼æˆ‘ä»¬ç”¨æˆ·åœ¨æ„å»ºå›¾ä¼˜åŒ–é—®é¢˜æ—¶ï¼Œå…ˆè¦æƒ³å¥½è‡ªå·±çš„é¡¶ç‚¹å’Œè¾¹æ˜¯å¦å·²ç»æä¾›äº†å®šä¹‰ã€‚å¦‚æœæ²¡æœ‰ï¼Œè¦è‡ªå·±å®ç°ã€‚å¦‚æœæœ‰ï¼Œå°±ç”¨g2oæä¾›çš„å³å¯ã€‚</li></ul><p>å°±ç»éªŒè€Œè¨€ï¼Œ<code>solvers</code>ç»™äººçš„æ„Ÿè§‰æ˜¯å¤§åŒå°å¼‚(ä¸åŒçš„æ±‚è§£å™¨å¯èƒ½æœ‰é’ˆå¯¹æ€§çš„æ±‚è§£åœºæ™¯ï¼Œä½†æ˜¯å¯¹äºä¸€èˆ¬çš„ä¼˜åŒ–é—®é¢˜ï¼Œä¸€èˆ¬éƒ½é€‚ç”¨)ï¼Œè€Œ <code>types</code> çš„é€‰å–(å…³é”®å°±æ˜¯é¡¶ç‚¹å’Œè¾¹çš„å®šä¹‰)ï¼Œåˆ™æ˜¯ g2o ç”¨æˆ·ä¸»è¦å…³å¿ƒçš„å†…å®¹ã€‚ç„¶å <code>core</code> ä¸‹é¢çš„å†…å®¹ï¼Œæˆ‘ä»¬è¦äº‰å–å¼„çš„æ¯”è¾ƒç†Ÿæ‚‰ï¼Œæ‰èƒ½ç¡®ä¿ä½¿ç”¨ä¸­å‡ºç°é”™è¯¯å¯ä»¥æ­£ç¡®åœ°åº”å¯¹ã€‚</p><p>g2oçš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0g2o/g2o%E6%A1%86%E6%9E%B6%E5%9B%BE.png"></p><p>å…ˆçœ‹ä¸ŠåŠéƒ¨åˆ†ã€‚<code>SparseOptimizer</code>(ç¨€ç–ä¼˜åŒ–å™¨) æ˜¯æˆ‘ä»¬æœ€ç»ˆè¦ç»´æŠ¤çš„ä¸œä¸œã€‚å®ƒæ˜¯ä¸€ä¸ªOptimizableGraph(ä¼˜åŒ–å›¾)ï¼Œä»è€Œä¹Ÿæ˜¯ä¸€ä¸ªHyperGraph(è¶…å›¾)ã€‚ä¸€ä¸ª <code>SparseOptimizer</code> å«æœ‰å¾ˆå¤šä¸ªé¡¶ç‚¹ ï¼ˆéƒ½ç»§æ‰¿è‡ª <code>Base Vertex</code>ï¼‰å’Œå¾ˆå¤šä¸ªè¾¹ï¼ˆç»§æ‰¿è‡ª <code>BaseUnaryEdge</code>(ä¸€å…ƒè¾¹), <code>BaseBinaryEdge</code>(äºŒå…ƒè¾¹)æˆ–<code>BaseMultiEdge</code>(å¤šå…ƒè¾¹)ï¼‰ã€‚è¿™äº› <code>Base Vertex</code> å’Œ <code>Base Edge</code>éƒ½æ˜¯æŠ½è±¡çš„åŸºç±»ï¼Œè€Œå®é™…ç”¨çš„é¡¶ç‚¹å’Œè¾¹ï¼Œéƒ½æ˜¯å®ƒä»¬çš„æ´¾ç”Ÿç±»ã€‚æˆ‘ä»¬ç”¨ <code>SparseOptimizer.addVertex</code> å’Œ <code>SparseOptimizer.addEdge</code> å‘ä¸€ä¸ªå›¾ä¸­æ·»åŠ é¡¶ç‚¹å’Œè¾¹ï¼Œæœ€åè°ƒç”¨ <code>SparseOptimizer.optimize</code> å®Œæˆä¼˜åŒ–ã€‚</p><p>åœ¨ä¼˜åŒ–ä¹‹å‰ï¼Œéœ€è¦æŒ‡å®šæˆ‘ä»¬ç”¨çš„æ±‚è§£å™¨å’Œè¿­ä»£ç®—æ³•ã€‚ä»å›¾ä¸­ä¸‹åŠéƒ¨åˆ†å¯ä»¥çœ‹åˆ°ï¼Œä¸€ä¸ª <code>SparseOptimizer</code> æ‹¥æœ‰ä¸€ä¸ª <code>Optimization Algorithm</code>ç»§æ‰¿è‡ª<code>Gauss-Newton</code>, <code>Levernberg-Marquardt</code>, <code>Powell&#39;s dogleg</code> ä¸‰è€…ä¹‹ä¸€ï¼ˆæˆ‘ä»¬å¸¸ç”¨çš„æ˜¯GNæˆ–LMï¼‰ã€‚åŒæ—¶ï¼Œè¿™ä¸ª <code>Optimization Algorithm</code> æ‹¥æœ‰ä¸€ä¸ª<code>Solver</code>å®ƒå«æœ‰ä¸¤ä¸ªéƒ¨åˆ†ã€‚ä¸€ä¸ªæ˜¯ <code>SparseBlockMatrix</code> ï¼Œç”¨äºè®¡ç®—ç¨€ç–çš„é›…å¯æ¯”çŸ©é˜µå’Œæµ·å¡çŸ©é˜µï¼› ä¸€ä¸ªæ˜¯ <code>linearsolver</code> ï¼Œç”¨äºè®¡ç®—è¿­ä»£è¿‡ç¨‹ä¸­æœ€å…³é”®çš„ä¸€æ­¥ï¼š</p><p>$$H\Delta x&#x3D;-b$$</p><p>è¿™å°±éœ€è¦ä¸€ä¸ªçº¿æ€§æ–¹ç¨‹çš„æ±‚è§£å™¨ã€‚è€Œè¿™ä¸ªæ±‚è§£å™¨ï¼Œå¯ä»¥ä» PCG, CSparse, Choldmod ä¸‰è€…é€‰ä¸€ã€‚</p><p><strong>ç»¼ä¸Šæ‰€è¿°ï¼Œåœ¨g2oä¸­é€‰æ‹©ä¼˜åŒ–æ–¹æ³•ä¸€å…±éœ€è¦ä¸‰ä¸ªæ­¥éª¤ï¼š</strong></p><ul><li>é€‰æ‹©ä¸€ä¸ªçº¿æ€§æ–¹ç¨‹æ±‚è§£å™¨ï¼Œä» PCG, CSparse, Choldmodä¸­é€‰ï¼Œå®é™…åˆ™æ¥è‡ª g2o&#x2F;solvers æ–‡ä»¶å¤¹ä¸­å®šä¹‰çš„ä¸œä¸œã€‚</li><li>é€‰æ‹©ä¸€ä¸ª BlockSolver ã€‚</li><li>é€‰æ‹©ä¸€ä¸ªè¿­ä»£ç­–ç•¥ï¼Œä»GN, LM, Doglogä¸­é€‰ã€‚</li></ul><h1 id="æ‰«ç›²ç¯‡"><a href="#æ‰«ç›²ç¯‡" class="headerlink" title="æ‰«ç›²ç¯‡"></a>æ‰«ç›²ç¯‡</h1><h2 id="æœ€å°äºŒä¹˜"><a href="#æœ€å°äºŒä¹˜" class="headerlink" title="æœ€å°äºŒä¹˜"></a>æœ€å°äºŒä¹˜</h2><blockquote><p>å‚è€ƒç½‘ç«™ï¼š<a href="https://blog.csdn.net/qq_41598072/article/details/83984299">https://blog.csdn.net/qq_41598072/article/details/83984299</a><br>å¤§å®¶å¯ä»¥éšæ„æœç´¢ä¸€ä¸‹ï¼Œç›¸å…³çš„æ–‡ç« å¾ˆå¤šã€‚é•¿ç¯‡å¤§è®ºçš„ä¸å°‘ï¼Œåˆšå…¥é—¨çš„æœ‹å‹ä¸€çœ‹åˆ°é‚£äº›å…¬å¼å¯èƒ½å°±çœ‹ä¸ä¸‹å»äº†ã€‚æ¯”å¦‚ä¸‹é¢çš„è§£é‡Šï¼š</p></blockquote><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9waWMyLnpoaW1nLmNvbS84MC92Mi1jMjdkNWI0NzcwNjM5NDZiNmFiZmQxNWI1YTYzNTExNV9oZC5qcGc?x-oss-process=image/format,png"></p><p>æ¯«æ— ç–‘é—®ï¼Œè¿™æ ·çš„è§£é‡Šæ˜¯ä¸“ä¸šçš„ï¼Œä¸¥è°¨çš„ã€‚äº‹å®ä¸Šï¼Œè¿™æ˜¯æ·±åº¦å­¦ä¹ åœ£ç»é‡Œçš„è§£é‡Šã€‚æˆ‘å¹¶æ²¡æœ‰è¯‹æ¯å¤§å¸ˆçš„æ„æ€ï¼Œåªæ˜¯è§‰å¾—ç”¨ä¸€ä¸ªå…·ä½“çš„ä¾‹å­æ¥è¯´æ˜ï¼Œå¯èƒ½ä¼šè®©è¯»è€…æ›´åŠ å®¹æ˜“ç†è§£ï¼š</p><p>å°æ˜æ˜¯è·‘è¿è¾“çš„ï¼Œè·‘1å…¬é‡Œéœ€è¦6å—ï¼Œè·‘2å…¬é‡Œéœ€è¦5å—ï¼ˆé‚£æ®µæ—¶é—´åˆšå¥½æ²¹ä»·è·Œäº†ï¼‰ï¼Œè·‘3å…¬é‡Œéœ€è¦7å—ï¼Œè·‘4å…¬é‡Œéœ€è¦10å—ï¼Œè¯·é—®è·‘5å…¬é‡Œéœ€è¦å¤šå°‘å—ï¼Ÿ</p><p>å¦‚æœæˆ‘ä»¬æœ‰åˆä¸­æ•°å­¦åŸºç¡€ï¼Œåº”è¯¥ä¼šè‡ªç„¶è€Œç„¶åœ°æƒ³åˆ°ç”¨çº¿æ€§æ–¹ç¨‹ç»„æ¥åšï¼Œå¯¹å§ã€‚</p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9waWMxLnpoaW1nLmNvbS84MC92Mi1kMGRkYzFiM2EzNGRiOTE5Yzk0OGViOTAyZWQwMzEyOF9oZC5qcGc?x-oss-process=image/format,png"></p><p>è¿™é‡Œå‡å®šxæ˜¯å…¬é‡Œæ•°ï¼Œyæ˜¯è¿è¾“æˆæœ¬ï¼ˆÎ²1å’ŒÎ²2æ˜¯è¦æ±‚çš„ç³»æ•°ï¼‰ã€‚æˆ‘ä»¬æŠŠä¸Šé¢çš„ä¸€ç»„æ•°æ®ä»£å…¥å¾—åˆ°è¿™ä¹ˆå‡ ä¸ªæ–¹ç¨‹ï¼š</p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9waWMxLnpoaW1nLmNvbS84MC92Mi0zMWQ5OWY5YmIxZjViMDE0MDcyMTBhYTRiYmIzM2IwY19oZC5qcGc?x-oss-process=image/format,png"></p><p>å¦‚æœå­˜åœ¨è¿™æ ·çš„Î²1å’ŒÎ²2ï¼Œè®©æ‰€æœ‰çš„æ•°æ®$ï¼ˆxï¼Œyï¼‰&#x3D;ï¼ˆ1,6ï¼‰ï¼Œï¼ˆ2,5ï¼‰ï¼Œï¼ˆ3,7ï¼‰ï¼Œï¼ˆ4ï¼Œ10ï¼‰$ éƒ½èƒ½æ»¡è¶³çš„è¯ï¼Œé‚£ä¹ˆè§£ç­”å°±å¾ˆç®€å•äº†ï¼ŒÎ²1+5Î²2å°±æ˜¯5å…¬é‡Œçš„æˆæœ¬ï¼Œå¯¹å§ã€‚</p><p>ä½†é—æ†¾çš„æ˜¯ï¼Œè¿™æ ·çš„Î²1å’ŒÎ²2æ˜¯ä¸å­˜åœ¨çš„ï¼Œä¸Šé¢çš„æ–¹ç¨‹ç»„å¾ˆå®¹æ˜“ï¼Œä½ å¯ä»¥æŠŠå‰é¢ä¸¤ä¸ªè§£å‡ºæ¥å¾—åˆ°ä¸€ç»„Î²1å’ŒÎ²2ï¼Œåé¢ä¸¤ä¸ªä¹Ÿè§£å‡ºæ¥åŒæ ·å¾—åˆ°ä¸€ç»„Î²1å’ŒÎ²2ã€‚è¿™ä¸¤ç»„Î²1å’ŒÎ²2æ˜¯ä¸ä¸€æ ·çš„ã€‚</p><p>å½¢è±¡åœ°è¯´ï¼Œå°±æ˜¯ä½ æ‰¾ä¸åˆ°ä¸€æ¡ç›´çº¿ï¼Œç©¿è¿‡æ‰€æœ‰çš„ç‚¹ï¼Œå› ä¸ºä»–ä»¬ä¸åœ¨ä¸€æ¡ç›´çº¿ä¸Šã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9waWMyLnpoaW1nLmNvbS84MC92Mi04NWRlYTEzMTU4OTgyMzgxZDViMjcxMmM2YmY3MjI2MV9oZC5qcGc?x-oss-process=image/format,png"></p><p>å¯æ˜¯ç°å®ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬å°±å¸Œæœ›èƒ½æ‰¾åˆ°ä¸€æ¡ç›´çº¿ï¼Œè™½ç„¶ä¸èƒ½æ»¡è¶³æ‰€æœ‰æ¡ä»¶ï¼Œä½†èƒ½<strong>è¿‘ä¼¼</strong>åœ°è¡¨ç¤ºè¿™ä¸ªè¶‹åŠ¿ï¼Œæˆ–è€…è¯´ï¼Œèƒ½è¿‘ä¼¼åœ°çŸ¥é“5å…¬é‡Œçš„è¿è¾“æˆæœ¬ï¼Œè¿™ä¹Ÿæ˜¯æœ‰æ„ä¹‰çš„ã€‚</p><p>ç°å®ç”Ÿæ´»å½“ä¸­ï¼Œæœ‰å¾ˆå¤šè¿™æ ·çš„ä¾‹å­ï¼Œæƒ³èµ·ä»¥å‰åœ¨æŸå…¬å¸ä¸Šç­çš„æ—¶å€™ï¼ŒCEOè¯´æˆ‘ä»¬ç ”å‘éƒ¨åšäº‹æœ‰ä¸ªé—®é¢˜ï¼šä¸€ä¸ªç ”å‘ä»»åŠ¡ï¼Œè¦æ±‚ä¸‰ä¸ªæœˆåšå®Œï¼Œå› ä¸ºå‘¨æœŸå¤ªçŸ­ï¼Œå®Œæˆä¸äº†ï¼Œå°±å¹²è„†ä¸åšï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸å¯¹çš„ï¼Œè¦å°½å…¨åŠ›ï¼Œå“ªæ€•ä¸‰ä¸ªæœˆå®Œæˆäº†80%ï¼Œæˆ–è€…æœ€ç»ˆ4ä¸ªæœˆå®Œæˆï¼Œæ€»æ¯”ä¸ä½œä¸ºçš„å¥½ã€‚</p><p>å…¶å®æœ€å°äºŒä¹˜æ³•ä¹Ÿæ˜¯è¿™æ ·ï¼Œè¦å°½å…¨åŠ›è®©è¿™æ¡ç›´çº¿æœ€æ¥è¿‘è¿™äº›ç‚¹ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæ€ä¹ˆæ‰å«åšæœ€æ¥è¿‘å‘¢ï¼Ÿç›´è§‰å‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™æ¡ç›´çº¿åœ¨æ‰€æœ‰æ•°æ®ç‚¹ä¸­é—´ç©¿è¿‡ï¼Œè®©è¿™äº›ç‚¹åˆ°è¿™æ¡ç›´çº¿çš„è¯¯å·®ä¹‹å’Œè¶Šå°è¶Šå¥½ã€‚è¿™é‡Œæˆ‘ä»¬ç”¨æ–¹å·®æ¥ç®—æ›´å®¢è§‚ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŠŠæ¯ä¸ªç‚¹åˆ°ç›´çº¿çš„è¯¯å·®å¹³æ–¹åŠ èµ·æ¥ï¼š</p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9waWMxLnpoaW1nLmNvbS84MC92Mi05MzljOTExODY2N2VlMzgxNzI1NTQ3ZmE2MDUwNDFkY19oZC5qcGc?x-oss-process=image/format,png"></p><p>ï¼ˆå¦‚æœä¸Šé¢çš„å››ä¸ªæ–¹ç¨‹éƒ½èƒ½æ»¡è¶³ï¼Œé‚£ä¹ˆSçš„å€¼æ˜¾ç„¶ä¸º0ï¼Œè¿™æ˜¯æœ€å®Œç¾çš„ï¼Œä½†å¦‚æœåšä¸åˆ°å®Œç¾ï¼Œæˆ‘ä»¬å°±è®©è¿™ä¸ªSè¶Šå°è¶Šå¥½ï¼‰</p><p>æ¥ä¸‹æ¥çš„é—®é¢˜å°±æ˜¯ï¼Œå¦‚ä½•è®©è¿™ä¸ªSå˜å¾—æœ€å°ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªæ¦‚å¿µï¼Œå°±æ˜¯æ±‚åå¯¼æ•°ã€‚è¿™é‡Œæˆ‘æƒ³æä¸€ä¸‹ï¼Œåœ¨åŸ¹è®­çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°æœºå™¨å­¦ä¹ çš„æ•°å­¦åŸºç¡€è¯¾ç¨‹å½“ä¸­ï¼Œå¾®ç§¯åˆ†æ˜¯å¤§å®¶å°è±¡æœ€æ·±åˆ»çš„ï¼Œè€Œä¸”ä¹Ÿæœ€å®¹æ˜“ç†è§£ï¼šæ¯”å¦‚å¯¼æ•°å°±æ˜¯æ±‚å˜åŒ–ç‡ï¼Œè€Œåå¯¼æ•°åˆ™æ˜¯å½“å˜é‡è¶…è¿‡ä¸€ä¸ªçš„æ—¶å€™ï¼Œå¯¹å…¶ä¸­ä¸€ä¸ªå˜é‡æ±‚å˜åŒ–ç‡ã€‚å¦‚æœè¿™ä¸ªæ¦‚å¿µä¹Ÿå¿˜äº†ï¼Œå¯ä»¥å‚è€ƒæˆ‘åœ¨æ·±åº¦å­¦ä¹ å›ç­”é‡Œé‚£ä¸ªç‹å°äºŒå–çŒªçš„ä¾‹å­ã€‚è¿™é‡Œå°±ä¸ç»†è®²äº†ï¼š</p><p>è¦è®©Så–å¾—æœ€å°å€¼ï¼ˆæˆ–æœ€å¤§å€¼ï¼Œä½†æ˜¾ç„¶è¿™ä¸ªå‡½æ•°æ²¡æœ‰æœ€å¤§å€¼ï¼Œè‡ªå·±ç¢ç£¨ä¸€ä¸‹ï¼‰ï¼Œé‚£ä¹ˆSå¯¹äºÎ²1å’ŒÎ²2åˆ†åˆ«æ±‚åå¯¼ç»“æœä¸º0ï¼Œç”¨ä¸€ä¸ªç›´è§‚çš„å›¾æ¥è¡¨ç¤ºï¼š</p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9waWMyLnpoaW1nLmNvbS84MC92Mi05NjgwODUzMTY5YmNhMGRjY2M2OTY3OGM4MzM4NzQ2MV9oZC5qcGc?x-oss-process=image/format,png"></p><p>æˆ‘ä»¬çœ‹åˆ°è¿™æ¡æ›²çº¿ï¼Œå‰åŠéƒ¨åˆ†æ˜¯å‘ˆä¸‹é™çš„è¶‹åŠ¿ï¼Œä¹Ÿå°±æ˜¯å˜åŒ–ç‡ï¼ˆå¯¼æ•°ï¼‰ä¸ºè´Ÿçš„ï¼ŒååŠéƒ¨åˆ†å‘ˆä¸Šå‡çš„è¶‹åŠ¿ï¼Œä¹Ÿå°±æ˜¯å˜åŒ–ç‡ï¼ˆå¯¼æ•°ï¼‰ä¸ºæ­£ï¼Œé‚£ä¹ˆåˆ†ç•Œç‚¹çš„å¯¼æ•°ä¸º0ï¼Œä¹Ÿå°±æ˜¯å–å¾—æœ€å°å€¼çš„åœ°æ–¹ã€‚è¿™æ˜¯ä¸€ä¸ªå˜é‡çš„æƒ…å†µï¼Œå¯¹äºå¤šä¸ªå˜é‡çš„æƒ…å†µï¼Œè¦è®©Så–å¾—æœ€å°å€¼ï¼Œé‚£æœ€å¥½æ˜¯å¯¹Î²1å’ŒÎ²2åˆ†åˆ«æ±‚å¯¼ï¼ˆå¯¹Î²1æ±‚å¯¼çš„æ—¶å€™ï¼ŒæŠŠÎ²2å½“å¸¸é‡æ‰€ä»¥å«æ±‚åå¯¼ï¼‰ï¼Œå€¼ä¸º0ï¼š</p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9waWMyLnpoaW1nLmNvbS84MC92Mi05ZDlmZDA4MGM1YmZiOTAxMTc0NjM5YTVmMjM3Y2M2OV9oZC5qcGc?x-oss-process=image/format,png"></p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9waWMxLnpoaW1nLmNvbS84MC92Mi00ZTQ1OWRkNDQ1N2Q5ZDM1YTk3ZDU1NWUyMGJiYmU3OF9oZC5qcGc?x-oss-process=image/format,png"></p><p>çœ‹åˆ°è¿™ä¸ªæˆ‘ä»¬å°±ç†Ÿæ‚‰äº†ï¼Œä¸¤ä¸ªå˜é‡ï¼Œåˆšå¥½æœ‰ä¸¤ä¸ªæ–¹ç¨‹å¼ï¼Œåˆä¸­å­¦è¿‡ï¼Œé‚£ä¹ˆå¾ˆå®¹æ˜“å¾—å‡ºï¼š</p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9waWMyLnpoaW1nLmNvbS84MC92Mi1mMDMwYTk0Y2M4YjcwYjgzYjk4MDUxMDg0MTkyMTM5ZF9oZC5qcGc?x-oss-process=image/format,png"></p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9waWMxLnpoaW1nLmNvbS84MC92Mi0xYmM3ZTQ5OTYyY2EyMTI1NGI3YWU5N2M3OTNlNWYwY19oZC5qcGc?x-oss-process=image/format,png"></p><p>å…¶å®ä¹Ÿå°±æ„å‘³ç€</p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9waWM0LnpoaW1nLmNvbS84MC92Mi00ZTJhNzVmMWJkMmM0NzZmOTFlNmYzMDMwMzFiNzcyYl9oZC5qcGc?x-oss-process=image/format,png"></p><p>è¿™ä¸ªå‡½æ•°ä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦çš„ç›´çº¿ï¼Œè¿™æ¡ç›´çº¿è™½ç„¶ä¸èƒ½æŠŠé‚£äº›ç‚¹ä¸²èµ·æ¥ï¼Œä½†å®ƒèƒ½æœ€å¤§ç¨‹åº¦ä¸Šæ¥è¿‘è¿™äº›ç‚¹ã€‚ä¹Ÿå°±æ˜¯è¯´5å…¬é‡Œçš„æ—¶å€™ï¼Œæˆæœ¬ä¸º3.5+1.4x5&#x3D;10.5å—ï¼Œè™½ç„¶ä¸å®Œç¾ï¼Œä½†æ˜¯å¾ˆæ¥è¿‘å®é™…æƒ…å†µã€‚</p><h2 id="BAä¼˜åŒ–"><a href="#BAä¼˜åŒ–" class="headerlink" title="BAä¼˜åŒ–"></a>BAä¼˜åŒ–</h2><blockquote><p>å‚è€ƒç½‘ç«™: <a href="https://optsolution.github.io/archives/58892.html">https://optsolution.github.io/archives/58892.html</a></p></blockquote><h3 id="ç®€ä»‹-1"><a href="#ç®€ä»‹-1" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>Bundle Adjustmentä¸­æ–‡è¯‘ä¸º<strong>å…‰æŸæ³•å¹³å·®</strong>ï¼Œå¤§æ¦‚å¤§å®¶çœ‹åˆ°æ›´å¤šçš„ç¿»è¯‘å¯èƒ½ä¸ºæŸè°ƒæ•´ã€æ†é›†è°ƒæ•´æˆ–è€…æ†ç»‘è°ƒæ•´ç­‰ç­‰.æ‰€è°“bundleï¼Œæ¥æºäºbundle of lightï¼Œå…¶æœ¬æ„å°±æ˜¯æŒ‡çš„å…‰æŸï¼Œè¿™äº›å…‰æŸæŒ‡çš„æ˜¯ä¸‰ç»´ç©ºé—´ä¸­çš„ç‚¹æŠ•å½±åˆ°åƒå¹³é¢ä¸Šçš„å…‰æŸï¼Œè€Œé‡æŠ•å½±è¯¯å·®æ­£æ˜¯åˆ©ç”¨è¿™äº›å…‰æŸæ¥æ„å»ºçš„ï¼Œå› æ­¤ç§°ä¸ºå…‰æŸæ³•å¼ºè°ƒå…‰æŸä¹Ÿæ­£æ˜¯æè¿°å…¶ä¼˜åŒ–æ¨¡å‹æ˜¯å¦‚ä½•å»ºç«‹çš„ã€‚</p><p>å‰©ä¸‹çš„å°±æ˜¯å¹³å·®ï¼Œé‚£ä»€ä¹ˆæ˜¯å¹³å·®å‘¢ï¼Ÿç”±äºæµ‹é‡ä»ªå™¨çš„ç²¾åº¦ä¸å®Œå–„å’Œäººä¸ºå› ç´ åŠå¤–ç•Œæ¡ä»¶çš„å½±å“ï¼Œæµ‹é‡è¯¯å·®æ€»æ˜¯ä¸å¯é¿å…çš„ã€‚ä¸ºäº†æé«˜æˆæœçš„è´¨é‡ï¼Œå¤„ç†å¥½è¿™äº›æµ‹é‡ä¸­å­˜åœ¨çš„è¯¯å·®é—®é¢˜ï¼Œè§‚æµ‹å€¼çš„ä¸ªæ•°å¾€å¾€è¦å¤šäºç¡®å®šæœªçŸ¥é‡æ‰€å¿…é¡»è§‚æµ‹çš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯è¦è¿›è¡Œ<em>å¤šä½™è§‚æµ‹</em>ã€‚æœ‰äº†å¤šä½™è§‚æµ‹ï¼ŒåŠ¿å¿…åœ¨è§‚æµ‹ç»“æœä¹‹é—´äº§ç”ŸçŸ›ç›¾ï¼Œæµ‹é‡å¹³å·®çš„ç›®çš„å°±åœ¨äºæ¶ˆé™¤è¿™äº›çŸ›ç›¾è€Œæ±‚å¾—è§‚æµ‹é‡çš„æœ€å¯é ç»“æœå¹¶è¯„å®šæµ‹é‡æˆæœçš„ç²¾åº¦ã€‚æµ‹é‡å¹³å·®é‡‡ç”¨çš„åŸç†å°±æ˜¯â€œæœ€å°äºŒä¹˜æ³•â€ã€‚å¹³å·®ä¹Ÿå°±æ­£å¥½è¡¨è¿°äº†ä¸ºä»€ä¹ˆéœ€è¦BAä»¥åŠBAè¿™ä¸ªä¼˜åŒ–è¿‡ç¨‹åˆ°åº•æ˜¯æ€ä¹ˆè¿›è¡Œçš„ã€‚<strong>BAçš„æœ¬è´¨æ˜¯ä¸€ä¸ªä¼˜åŒ–æ¨¡å‹ï¼Œå…¶ç›®çš„æ˜¯æœ€å°åŒ–é‡æŠ•å½±è¯¯å·®</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0g2o/BA1.jpg"></p><p>è¿™äº›äº”é¢œå…­è‰²çš„çº¿å°±æ˜¯æˆ‘ä»¬è®²çš„å…‰æŸå•¦ï¼é‚£ç°åœ¨å°±è¯¥è¯´ä¸‹ä»€ä¹ˆå«é‡æŠ•å½±è¯¯å·®äº†ï¼Œé‡æŠ•å½±ä¹Ÿå°±æ˜¯æŒ‡çš„ç¬¬äºŒæ¬¡æŠ•å½±ï¼Œé‚£åˆ°åº•æ˜¯æ€ä¹ˆæŠ•å½±çš„å‘¢ï¼Ÿæˆ‘ä»¬æ¥æ•´ç†ä¸€ä¸‹å§ã€‚</p><ul><li>ç¬¬ä¸€æ¬¡æŠ•å½±æŒ‡çš„å°±æ˜¯ç›¸æœºåœ¨æ‹ç…§çš„æ—¶å€™ä¸‰ç»´ç©ºé—´ç‚¹æŠ•å½±åˆ°å›¾åƒä¸Š</li><li>ç¬¬äºŒæ¬¡æŠ•å½±æŒ‡çš„æ˜¯åˆ©ç”¨å‡ ä½•ä¿¡æ¯æ„å»ºä¸‰è§’å½¢æ¥ç¡®å®šä¸‰ç»´ç©ºé—´ç‚¹çš„ä½ç½®ï¼Œåˆ©ç”¨ç›¸æœºçŸ©é˜µå°†å¾—åˆ°çš„ä¸‰ç»´ç‚¹çš„åæ ‡æŠ•å½±åˆ°å›¾åƒä¸Šï¼Œè¿›è¡Œç¬¬äºŒæ¬¡æŠ•å½±ï¼Œä¹Ÿå°±æ˜¯é‡æŠ•å½±.é‡æŠ•å½±ä½¿ç”¨çš„ä¸‰ç»´ç‚¹çš„ä½ç½®æ˜¯æ ¹æ®ä¸‰è§’åŒ–å¾—åˆ°çš„ã€‚<blockquote><p>ç¬¬äºŒæ¬¡æŠ•å½±åˆ©ç”¨åˆ°äº†ä¸‰è§’åŒ–çš„åŸç†ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯ä¸‰è§’åŒ–å‘¢ï¼Ÿå‚åŠ åæ–‡ä¸‰è§’åŒ–ä»‹ç»ã€‚</p></blockquote></li></ul><p>ç°åœ¨æˆ‘ä»¬çŸ¥é“ä»€ä¹ˆæ˜¯é‡æŠ•å½±äº†ï¼Œé‚£é‡æŠ•å½±è¯¯å·®åˆ°åº•æ˜¯ä»€ä¹ˆæ ·çš„è¯¯å·®å‘¢ï¼Ÿè¿™ä¸ªè¯¯å·®æ˜¯æŒ‡çš„çœŸå®ä¸‰ç»´ç©ºé—´ç‚¹åœ¨å›¾åƒå¹³é¢ä¸Šçš„æŠ•å½±ï¼ˆä¹Ÿå°±æ˜¯å›¾åƒä¸Šçš„åƒç´ ç‚¹ï¼‰å’Œé‡æŠ•å½±ï¼ˆå…¶å®æ˜¯ç”¨æˆ‘ä»¬çš„è®¡ç®—å€¼å¾—åˆ°çš„è™šæ‹Ÿçš„åƒç´ ç‚¹ï¼‰çš„å·®å€¼ï¼Œå› ä¸ºç§ç§åŸå› è®¡ç®—å¾—åˆ°çš„å€¼å’Œå®é™…æƒ…å†µä¸ä¼šå®Œå…¨ç›¸ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªå·®å€¼ä¸å¯èƒ½æ°å¥½ä¸º0ï¼Œæ­¤æ—¶ä¹Ÿå°±éœ€è¦å°†è¿™äº›å·®å€¼çš„å’Œæœ€å°åŒ–è·å–æœ€ä¼˜çš„ç›¸æœºå‚æ•°åŠä¸‰ç»´ç©ºé—´ç‚¹çš„åæ ‡ã€‚</p><p>BAæ˜¯ä¸€ä¸ªå›¾ä¼˜åŒ–æ¨¡å‹ï¼Œé‚£é¦–å…ˆè‚¯å®šè¦æ„é€ ä¸€ä¸ªå›¾æ¨¡å‹äº†ï¼ˆæ²¡å­¦è¿‡å›¾è®ºä¹Ÿæ²¡äº‹ï¼Œåé¢è¿˜æ˜¯ä¼šå›åˆ°ä¸€èˆ¬çš„ä¼˜åŒ–æ¨¡å‹ï¼‰ã€‚æ—¢ç„¶æ˜¯å›¾æ¨¡å‹é‚£è‡ªç„¶å°±æœ‰èŠ‚ç‚¹å’Œè¾¹äº†ï¼Œè¿™ä¸ªå›¾æ¨¡å‹çš„èŠ‚ç‚¹ç”±ç›¸æœº$P_i$å’Œä¸‰ç»´ç©ºé—´ç‚¹$X_j$æ„æˆï¼Œå¦‚æœç‚¹$X_j$æŠ•å½±åˆ°ç›¸æœº$P_i$çš„å›¾åƒä¸Šåˆ™å°†è¿™ä¸¤ä¸ªèŠ‚ç‚¹è¿æ¥èµ·æ¥ã€‚è¿˜æ˜¯æ¥å¼ å›¾å§ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0g2o/BA2.png"></p><p>è¿™æ ·å°±ä¸€ç›®äº†ç„¶äº†ã€‚é‚£ä¹ˆæˆ‘ä»¬ç°åœ¨å°±å¯ä»¥é€šè¿‡è¿™ä¸ªå›¾æ¥æ„é€ ä¼˜åŒ–æ¨¡å‹äº†ã€‚</p><p>ä»¤ç‚¹$X_j$åœ¨ç›¸æœº$P_i$æ‹æ‘„åˆ°çš„å›¾åƒå½’ä¸€åŒ–åæ ‡ç³»ä¸Šçš„åæ ‡ä¸º$k(u_{i j}^{T},1)^{T}&#x3D;K_{i}^{-1}x_{i j}$ï¼Œå…¶é‡æŠ•å½±åçš„å›¾åƒå½’ä¸€åŒ–åæ ‡ç³»ä¸‹åæ ‡ä¸º$k^{\prime}(v_{i j}^{T},1)^{T}&#x3D;K_{i}^{-1}P_{i}X_{j}$ï¼Œå…¶ä¸­$K_{i}^{-1}$æ˜¯ä¸ºäº†åœ¨è®¡ç®—æ—¶èƒ½ä¸å—ç›¸æœºå†…å‚å½±å“,$k$å’Œ$k^{\prime}$æ˜¯å°†é½æ¬¡åæ ‡è½¬æ¢ä¸ºéé½æ¬¡åæ ‡çš„å¸¸æ•°é¡¹ï¼Œå¯ä»¥å¾—åˆ°è¯¥é‡æŠ•å½±è¯¯å·®ä¸º:<br>$$e_{i j}&#x3D;u_{i j}-v_{i j}$$<br>BAæ˜¯è¦å°†æ‰€æœ‰é‡æŠ•å½±è¯¯å·®çš„å’Œæœ€å°åŒ–ï¼Œé‚£ä¹ˆè¿™é‡Œè‡ªç„¶å°±è¦å¼€å§‹æ±‚å’Œäº†ã€‚<br>$$\operatorname*{min}<em>{R</em>{i},t_{i},X_{j}}\sum_{i,j}\sigma_{i j}||u_{i j}-v_{i j}||<em>{2}$$<br>å…¶ä¸­å½“ç‚¹$X_j$åœ¨ç›¸æœº$P_i$ä¸­æœ‰æŠ•å½±æ—¶$\sigma</em>{i j}&#x3D;1$ï¼Œå¦åˆ™ä¸º$\sigma_{i j}&#x3D;0$ã€‚åˆ°æ­¤æˆ‘ä»¬å°±å¾—åˆ°äº†BAä¼˜åŒ–æ¨¡å‹çš„æ•°å­¦å½¢å¼äº†ã€‚</p><p>æ—¢ç„¶æ˜¯ä¼˜åŒ–æ¨¡å‹ï¼Œé‚£è‡ªç„¶å°±åº”è¯¥ç”¨å„ç§ä¼˜åŒ–ç®—æ³•æ¥è¿›è¡Œè®¡ç®—äº†ã€‚å¸¸ç”¨çš„æ–¹æ³•æœ‰æœ€é€Ÿä¸‹é™æ³•ï¼Œç‰›é¡¿æ–¹æ³•ï¼Œé«˜æ–¯ç‰›é¡¿æ–¹æ³•ï¼ŒLMæ–¹æ³•ã€‚å…·ä½“ç»†èŠ‚<a href="https://optsolution.github.io/archives/58892.html">ç‚¹æˆ‘æŸ¥çœ‹</a></p><blockquote><p>å…·ä½“ç»†èŠ‚é¢„è§ˆ<a href="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0g2o/BA%E7%AE%80%E8%BF%B0.png">ç‚¹æˆ‘æŸ¥çœ‹</a></p></blockquote><h2 id="ä¸‰è§’åŒ–"><a href="#ä¸‰è§’åŒ–" class="headerlink" title="ä¸‰è§’åŒ–"></a>ä¸‰è§’åŒ–</h2><p>åœ¨å•ç›®SLAMä¸­ï¼Œä»…é€šè¿‡å•å¼ å›¾åƒæ— æ³•è·å¾—åƒç´ çš„æ·±åº¦ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä¸‰è§’æµ‹é‡(Triangulation)(æˆ–ä¸‰è§’åŒ–)çš„æ–¹æ³•æ¥ä¼°è®¡åœ°å›¾ç‚¹çš„æ·±åº¦ã€‚å³é€šè¿‡æŸä¸ªç‰¹å¾ç‚¹Påœ¨ä¸åŒå¸§å›¾åƒä¸­åƒç´ ç‚¹çš„ä½ç½®ï¼Œæ¥è®¡ç®—å‡ºè¯¥ç‰¹å¾ç‚¹åœ¨ä¸‰ç»´ç©ºé—´ä¸­çš„åæ ‡ï¼Œä¹Ÿå³è·å¾—ç‰¹å¾ç‚¹Pçš„æ·±åº¦ä¿¡æ¯ã€‚ç‰¹å¾ç‚¹åœ¨æŸä¸ªç›¸æœºä¸­è¢«è§‚æµ‹åˆ°ï¼Œæ ¹æ®ç›¸æœºä½å§¿å’Œè§‚æµ‹å‘é‡å¯ä»¥å¾—åˆ°3Dç©ºé—´ä¸­çš„ä¸€æ¡ä»ç›¸æœºä¸­å¿ƒå‡ºå‘çš„è§‚æµ‹â€œå°„çº¿â€ï¼Œå¤šä¸ªç›¸æœºä½å§¿è§‚æµ‹ä¼šäº§ç”Ÿå¤šæ¡è§‚æµ‹å°„çº¿ï¼Œç†æƒ³æƒ…å†µä¸‹è¿™äº›è§‚æµ‹å°„çº¿ç›¸äº¤äºç©ºé—´ä¸­ä¸€ç‚¹ï¼Œæ±‚æ‰€æœ‰è§‚æµ‹å°„çº¿çš„äº¤ç‚¹å°±æ˜¯ç‰¹å¾ç‚¹åœ¨3Dç©ºé—´çš„ä½ç½®ï¼Œè¿™å°±æ˜¯ä¸‰è§’åŒ–æœ€æœ´ç´ çš„æ€æƒ³ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0g2o/%E4%B8%89%E8%A7%92%E5%8C%96.png"></p><p>ä»¥ä¸¤è§†å›¾çš„ä¸‰è§’åŒ–ä¸ºä¾‹ï¼Œè€ƒè™‘$I_1$,$I_2$ä¸¤å¸§å›¾åƒï¼Œ$R,t$æ˜¯ç¬¬äºŒå¸§ç›¸å¯¹äºç¬¬ä¸€å¸§çš„æ—‹è½¬çŸ©é˜µå’Œå¹³ç§»å‘é‡ï¼ˆå¯¹åº”çš„å˜æ¢çŸ©é˜µæ˜¯$T_{12}$ï¼‰ã€‚åœ¨$I_1$ä¸­æœ‰ç‰¹å¾ç‚¹$p_1$ï¼Œå¯¹åº”äº$I_2$ä¸­çš„åŒ¹é…ç‚¹$p_2$ã€‚æ ¹æ®ç›¸æœºçš„å†…å‚æ•°çŸ©é˜µ$K$ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥è·å¾—$p_1$åœ¨å¸§å½’ä¸€åŒ–å›¾åƒå¹³é¢ä¸­çš„ç‚¹$x_1&#x3D;K^{-1}p_{1}$ï¼›$p_2$åœ¨$I_2$å¸§å½’ä¸€åŒ–å¹³é¢ä¸­çš„ç‚¹$x_2&#x3D;K^{-1}p_2$ã€‚</p><p>æ ¹æ®å¯¹æçº¦æŸï¼Œä»–ä»¬æ»¡è¶³å¦‚ä¸‹çš„å…³ç³»ï¼š<br>$$s_{1}x_{1}&#x3D;s_{2}Rx_{2}+t$$</p><p>å…ˆå¯¹å…¬å¼å·¦å³ä¸¤ç«¯å·¦ä¹˜åå¯¹ç§°çŸ©é˜µ$x^{\wedge}$ï¼Œå¾—åˆ°ï¼š</p><p>$$s_{1}x_{1}^{\wedge}x_{1}&#x3D;0&#x3D;s_{2}x_{1}^{\wedge}R x_{2}+x_{1}^{\wedge}t$$</p><p>æ ¹æ®ä¸Šè¿°å…¬å¼çš„å³ç«¯ï¼Œå¯ä»¥è®¡ç®—å‡º$s_2$ï¼Œè¿›è€Œè®¡ç®—å‡º$s_1$ï¼Œæˆ‘ä»¬ä¾¿å¯å¾—åˆ°è·¯æ ‡ç‚¹$P$åœ¨è¿™ä¸¤å¸§ä¸­çš„æ·±åº¦ã€‚ç„¶è€Œï¼Œåœ¨å®é™…çš„ä½å§¿ä¼°è®¡ä¸­ï¼Œæˆ‘ä»¬ä¼°è®¡çš„å€¼å¾€å¾€å­˜åœ¨è¯¯å·®ï¼Œä¸Šè¿°å…¬å¼ä¸ä¸¥æ ¼ä¸º0ã€‚è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥è®¡ç®—æœ€å°äºŒä¹˜è§£ã€‚</p><blockquote><p>å¤šè§†å›¾ä¸‰è§’åŒ–<a href="https://gutsgwh1997.github.io/2020/03/31/%E5%A4%9A%E8%A7%86%E5%9B%BE%E4%B8%89%E8%A7%92%E5%8C%96/">ç‚¹æˆ‘æŸ¥çœ‹</a><br>å…·ä½“ç»†èŠ‚é¢„è§ˆ<a href="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0g2o/%E5%A4%9A%E8%A7%86%E5%9B%BE%E4%B8%89%E8%A7%92%E5%8C%96.png">ç‚¹æˆ‘æŸ¥çœ‹</a></p></blockquote><h2 id="å¯¹æçº¦æŸ"><a href="#å¯¹æçº¦æŸ" class="headerlink" title="å¯¹æçº¦æŸ"></a>å¯¹æçº¦æŸ</h2><p>å¯¹æå‡ ä½•ï¼ˆEpipolar geometryï¼‰åˆå«å¯¹æçº¦æŸï¼Œæ˜¯æ ¹æ®å›¾åƒäºŒç»´å¹³é¢ä¿¡æ¯æ¥ä¼°è®¡å•ç›®ç›¸æœºå¸§é—´è¿åŠ¨æˆ–åŒç›®ç›¸æœºç›¸å¯¹ä½å§¿å…³ç³»çš„ä¸€ç§ç®—æ³•ã€‚ç›´è§‚æ¥è®²ï¼Œå½“ç›¸æœºåœ¨ä¸¤ä¸ªä¸åŒè§†è§’å¯¹åŒä¸€ç‰©ä½“è¿›è¡Œæ‹æ‘„æ—¶ï¼Œç‰©ä½“åœ¨ä¸¤å¹…å›¾åƒä¸­çš„æˆåƒè‚¯å®šä¼šæœ‰ä¸åŒï¼Œé‚£ä¹ˆï¼Œæ ¹æ®è¿™ä¸¤å¹…ä¸åŒçš„å›¾åƒï¼Œæˆ‘ä»¬å¦‚ä½•åˆ¤æ–­å‡ºç›¸æœºçš„ä½å§¿å‘ç”Ÿäº†æ€æ ·çš„å˜åŒ–ï¼Œè¿™æ­£æ˜¯å¯¹æå‡ ä½•è¦è§£å†³çš„é—®é¢˜ã€‚ç›´è§‚æ¥è¯´å°±æ˜¯åˆ©ç”¨$n$å¯¹åŒ¹é…ç‚¹å¯¹çš„å›¾åƒåæ ‡æ±‚è§£ç›¸æœºä½å§¿å˜æ¢å…³ç³»ã€‚</p><p>éœ€è¦æ˜ç¡®çš„æ˜¯ï¼Œåœ¨å¯¹æå‡ ä½•ä¸­ï¼Œæˆ‘ä»¬çš„å·²çŸ¥æ¡ä»¶ä»…ä»…æ˜¯æ¯å¹…å›¾åƒä¸­ç‰¹å¾ç‚¹çš„åƒç´ åæ ‡ï¼Œå½“ç„¶ï¼Œè®¡ç®—å¯¹æçº¦æŸçš„å‰ææ˜¯æˆ‘ä»¬å¿…é¡»çŸ¥é“ä¸¤å¹…å›¾åƒä¸­ç‰¹å¾ç‚¹ä¹‹é—´å‡†ç¡®çš„åŒ¹é…å…³ç³»ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0g2o/%E5%AF%B9%E6%9E%81%E5%87%A0%E4%BD%95%E7%A4%BA%E6%84%8F%E5%9B%BE.png"><br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0g2o/%E5%AF%B9%E6%9E%81%E5%87%A0%E4%BD%95%E6%8E%A8%E5%AF%BC.png"></p>]]></content>
      
      
      <categories>
          
          <category> g2o </category>
          
      </categories>
      
      
        <tags>
            
            <tag> g2o </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>360ç¯è§†ç›¸å…³è®ºæ–‡ä¸ä¸“åˆ©</title>
      <link href="/2023/10/09/360-huan-shi-xiang-guan-lun-wen-yu-zhuan-li/"/>
      <url>/2023/10/09/360-huan-shi-xiang-guan-lun-wen-yu-zhuan-li/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¯è§†ç›¸æœºæ ‡å®š"><a href="#ç¯è§†ç›¸æœºæ ‡å®š" class="headerlink" title="ç¯è§†ç›¸æœºæ ‡å®š"></a>ç¯è§†ç›¸æœºæ ‡å®š</h1><h2 id="åŸºäºè½¦é“çº¿çš„ç¯è§†ç›¸æœºæ ‡å®š"><a href="#åŸºäºè½¦é“çº¿çš„ç¯è§†ç›¸æœºæ ‡å®š" class="headerlink" title="åŸºäºè½¦é“çº¿çš„ç¯è§†ç›¸æœºæ ‡å®š"></a>åŸºäºè½¦é“çº¿çš„ç¯è§†ç›¸æœºæ ‡å®š</h2><ul><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E8%BD%A6%E9%81%93%E7%BA%BF%E4%B8%8E%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/2009_A_novel_approach_for_the_online_initial_calibration_of_extrinsic_parameters_for_a_car-mounted_camera.pdf">2009_A_novel_approach_for_the_online_initial_calibration_of_extrinsic_parameters_for_a_car-mounted_camera.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E8%BD%A6%E9%81%93%E7%BA%BF%E4%B8%8E%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/2012_Automatic_camera_calibration_for_driver_assistance_systems.pdf">2012_Automatic_camera_calibration_for_driver_assistance_systems.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E8%BD%A6%E9%81%93%E7%BA%BF%E4%B8%8E%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/2014_A_novel_method_for_camera_external_parameters_online_calibration_using_dotted_road_line.pdf">2014_A_novel_method_for_camera_external_parameters_online_calibration_using_dotted_road_line.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E8%BD%A6%E9%81%93%E7%BA%BF%E4%B8%8E%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/2014_Automatic_on-the-fly_extrinsic_camera_calibration_of_onboard_vehicular_cameras.pdf">2014_Automatic_on-the-fly_extrinsic_camera_calibration_of_onboard_vehicular_cameras.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E8%BD%A6%E9%81%93%E7%BA%BF%E4%B8%8E%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/2018_Automatic_Calibration_of_an_Around_View_Monitor_System_Exploiting_Lane_Markings.pdf">2018_Automatic_Calibration_of_an_Around_View_Monitor_System_Exploiting_Lane_Markings.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E8%BD%A6%E9%81%93%E7%BA%BF%E4%B8%8E%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/2020_Carcorder_Camera_Calibration_method_of_external_parameters_based_on_lane_line.pdf">2020_Carcorder_Camera_Calibration_method_of_external_parameters_based_on_lane_line.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E8%BD%A6%E9%81%93%E7%BA%BF%E4%B8%8E%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/2020_Online_Extrinsic_Camera_Calibration_for_Temporally_Consistent_IPM_Using_Lane_Boundary_Observations_with_a_Lane_Width_Prior.pdf">2020_Online_Extrinsic_Camera_Calibration_for_Temporally_Consistent_IPM_Using_Lane_Boundary_Observations_with_a_Lane_Width_Prior.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E8%BD%A6%E9%81%93%E7%BA%BF%E4%B8%8E%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/AUTO-CALIBRATION_AROUND-VIEW_MONITORING_SYSTEM.pdf">AUTO-CALIBRATION_AROUND-VIEW_MONITORING_SYSTEM.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E8%BD%A6%E9%81%93%E7%BA%BF%E4%B8%8E%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/Automatic_on-the-fly_extrinsic_camera_calibration_of_onboard_vehicular_cameras.pdf">Automatic_on-the-fly_extrinsic_camera_calibration_of_onboard_vehicular_cameras.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E8%BD%A6%E9%81%93%E7%BA%BF%E4%B8%8E%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/Estimating_Camera_Pose_from_H-Pattern_of_Parking_Lot.pdf">Estimating_Camera_Pose_from_H-Pattern_of_Parking_Lot.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E8%BD%A6%E9%81%93%E7%BA%BF%E4%B8%8E%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/%E4%B8%93%E5%88%A9_%E4%B8%80%E7%A7%8D%E8%BD%A6%E8%BD%BD%E7%9B%B8%E6%9C%BA%E7%9A%84%E5%9C%A8%E7%BA%BF%E6%A0%87%E5%AE%9A%E6%96%B9%E6%B3%95%E5%92%8C%E8%BD%A6%E8%BD%BD%E4%BF%A1%E6%81%AF%E5%A8%B1%E4%B9%90%E7%B3%BB%E7%BB%9F.pdf">ä¸“åˆ©_ä¸€ç§è½¦è½½ç›¸æœºçš„åœ¨çº¿æ ‡å®šæ–¹æ³•å’Œè½¦è½½ä¿¡æ¯å¨±ä¹ç³»ç»Ÿ.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E8%BD%A6%E9%81%93%E7%BA%BF%E4%B8%8E%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/%E4%BA%A4%E9%80%9A%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9B%B8%E6%9C%BA%E8%87%AA%E6%A0%87%E5%AE%9A%E4%BC%98%E5%8C%96%E6%96%B9%E6%B3%95%E7%A0%94%E7%A9%B6%E5%8F%8A%E5%BA%94%E7%94%A8_%E8%B5%B5%E6%80%9D%E9%9B%A8.caj">äº¤é€šåœºæ™¯ä¸­ç›¸æœºè‡ªæ ‡å®šä¼˜åŒ–æ–¹æ³•ç ”ç©¶åŠåº”ç”¨_èµµæ€é›¨.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E8%BD%A6%E9%81%93%E7%BA%BF%E4%B8%8E%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E5%85%AC%E8%B7%AF%E5%8F%8C%E5%B9%B3%E8%A1%8C%E7%BA%BF%E7%BB%84%E7%9A%84%E7%9B%B8%E6%9C%BA%E5%A4%96%E5%8F%82%E6%95%B0%E5%9C%A8%E7%BA%BF%E6%A0%87%E5%AE%9A_%E5%AD%99%E8%8B%B1%E6%85%A7.pdf">åŸºäºå…¬è·¯åŒå¹³è¡Œçº¿ç»„çš„ç›¸æœºå¤–å‚æ•°åœ¨çº¿æ ‡å®š_å­™è‹±æ…§.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E8%BD%A6%E9%81%93%E7%BA%BF%E4%B8%8E%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E6%B6%88%E5%A4%B1%E7%82%B9%E5%8F%8A%E6%A8%A1%E5%9E%8B%E5%8C%B9%E9%85%8D%E7%9A%84%E7%9B%B8%E6%9C%BA%E8%87%AA%E5%8A%A8%E6%A0%87%E5%AE%9A%E7%AE%97%E6%B3%95%E7%A0%94%E7%A9%B6_%E6%9D%8E%E5%A9%B5.caj">åŸºäºæ¶ˆå¤±ç‚¹åŠæ¨¡å‹åŒ¹é…çš„ç›¸æœºè‡ªåŠ¨æ ‡å®šç®—æ³•ç ”ç©¶_æå©µ.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E8%BD%A6%E9%81%93%E7%BA%BF%E4%B8%8E%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E9%81%93%E8%B7%AF%E7%89%B9%E5%BE%81%E7%9A%84%E8%BD%A6%E8%BD%BD%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A%E5%8A%A8%E6%80%81%E8%A1%A5%E5%81%BF%E7%AE%97%E6%B3%95_%E9%99%88%E5%86%9B.pdf">åŸºäºé“è·¯ç‰¹å¾çš„è½¦è½½ç›¸æœºæ ‡å®šåŠ¨æ€è¡¥å¿ç®—æ³•_é™ˆå†›.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E8%BD%A6%E9%81%93%E7%BA%BF%E4%B8%8E%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/%E8%BD%A6%E8%BD%BD%E7%9B%B8%E6%9C%BA%E8%87%AA%E5%8A%A8%E6%A0%87%E5%AE%9A%E5%92%8C%E5%BF%AB%E9%80%9F%E6%A0%87%E5%AE%9A%E6%8A%80%E6%9C%AF%E7%A0%94%E7%A9%B6_%E7%A5%81%E6%B7%BC.pdf">è½¦è½½ç›¸æœºè‡ªåŠ¨æ ‡å®šå’Œå¿«é€Ÿæ ‡å®šæŠ€æœ¯ç ”ç©¶_ç¥æ·¼.pdf</a></p></li></ul><p>-<a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E8%BD%A6%E9%81%93%E7%BA%BF%E4%B8%8E%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E8%BD%A6%E9%81%93%E7%BA%BF%E5%92%8C%E6%96%91%E9%A9%AC%E7%BA%BF%E7%9A%84%E9%81%93%E8%B7%AF%E7%8E%AF%E8%A7%86%E6%A0%87%E5%AE%9A.pdf">åŸºäºè½¦é“çº¿å’Œæ–‘é©¬çº¿çš„é“è·¯ç¯è§†æ ‡å®š.pdf</a></p><p>-<a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E8%BD%A6%E9%81%93%E7%BA%BF%E4%B8%8E%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E8%BD%A6%E9%81%93%E7%BA%BF%E7%9A%84%E7%8E%AF%E8%A7%86%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A.pdf">åŸºäºè½¦é“çº¿çš„ç¯è§†ç›¸æœºæ ‡å®š.pdf</a></p><h2 id="åŸºäºæ ‡å¿—ç‰©çš„ç¯è§†ç›¸æœºæ ‡å®š"><a href="#åŸºäºæ ‡å¿—ç‰©çš„ç¯è§†ç›¸æœºæ ‡å®š" class="headerlink" title="åŸºäºæ ‡å¿—ç‰©çš„ç¯è§†ç›¸æœºæ ‡å®š"></a>åŸºäºæ ‡å¿—ç‰©çš„ç¯è§†ç›¸æœºæ ‡å®š</h2><ul><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/A_flexible_vehicle_surround_view_camera_system_by_central-around_coordinate_mapping_model.pdf">A_flexible_vehicle_surround_view_camera_system_by_central-around_coordinate_mapping_model.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/An_automatic_online_camera_calibration_system_for_vehicular_applications.pdf">An_automatic_online_camera_calibration_system_for_vehicular_applications.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/Automatic_extrinsic_calibration_methods_for_surround_view_systems.pdf">Automatic_extrinsic_calibration_methods_for_surround_view_systems.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/CamOdoCal_Automatic_Intrinsic_and_Extrinsic_Calibration_of_a_Rig_with_Multiple_Generic_Cameras_and_Odometry.pdf">Automatic_surround_camera_calibration_method_in_road_scene_for_selfdriving_car.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/Extrinsic_self_calibration_of_the_surround_view_system_a_weakly_supervised_approach.pdf">CamOdoCal_Automatic_Intrinsic_and_Extrinsic_Calibration_of_a_Rig_with_Multiple_Generic_Cameras_and_Odometry.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/Method_for_the_automatic_measurement_of_camera_calibration_quality_in_a_surround_view_system.pdf">Extrinsic_self_calibration_of_the_surround_view_system_a_weakly_supervised_approach.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/Oecs_towards_online_extrinsics_correction_for_the_surround-view_system.pdf">Method_for_the_automatic_measurement_of_camera_calibration_quality_in_a_surround_view_system.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/Online_Camera-to-ground_Calibration_for_Autonomous_Driving.pdf">Oecs_towards_online_extrinsics_correction_for_the_surround-view_system.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/Online_Extrinsic_Multi-Camera_Calibration_Using_Ground_Plane_Induced_Homographies.pdf">Online_Camera-to-ground_Calibration_for_Autonomous_Driving.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/Online_calibration_of_exterior_orientations_of_a_vehicle_mounted_surround_view_camera_system.pdf">Online_Extrinsic_Multi-Camera_Calibration_Using_Ground_Plane_Induced_Homographies.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/Online_camera_pose_optimization_for_the_surround_view_system.pdf">Online_calibration_of_exterior_orientations_of_a_vehicle_mounted_surround_view_camera_system.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/Online_correction_of_camera_poses_for_the_surround_viewsystem_a_sparse_direct_approach.pdf">Online_camera_pose_optimization_for_the_surround_view_system.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/Pedestrian-Aware_Panoramic_Video_Stitching_Based_on_a_Structured_Camera_Array.pdf">Online_correction_of_camera_poses_for_the_surround_viewsystem_a_sparse_direct_approach.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/Pedestrian_aware_panoramic_video_stitching_based_on_a_structured_camera_array.pdf">Pedestrian-Aware_Panoramic_Video_Stitching_Based_on_a_Structured_Camera_Array.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/Revisit_surround_view_camera_system_calibration.pdf">Revisit_surround_view_camera_system_calibration.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/Rochade_robust_checkerboard_advanced_detection_for_camera_calibration(libcbdetect).pdf">Rochade_robust_checkerboard_advanced_detection_for_camera_calibration(libcbdetect).pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/Self-calibration_of_an_On-Board_Stereo-vision_System_for_Driver_Assistance_Systems.pdf">https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/Self-calibration_of_an_On-Board_Stereo-vision_System_for_Driver_Assistance_Systems.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%BF%97%E7%89%A9%E7%9A%84%E7%8E%AF%E8%A7%86%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/%E5%90%89%E5%88%A9%E7%8E%AF%E8%A7%86%E6%A3%8B%E7%9B%98%E6%A0%BC%E8%BF%AD%E4%BB%A3%E6%A0%87%E5%AE%9A%E6%96%B9%E6%A1%88.pdf">å‰åˆ©ç¯è§†æ£‹ç›˜æ ¼è¿­ä»£æ ‡å®šæ–¹æ¡ˆ.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%BF%97%E7%89%A9%E7%9A%84%E7%8E%AF%E8%A7%86%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/%E5%9B%9E%E5%AD%90%E5%BD%A2%E9%9A%8F%E6%9C%BA%E6%A0%87%E5%AE%9A.pdf">å›å­å½¢éšæœºæ ‡å®š.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%BF%97%E7%89%A9%E7%9A%84%E7%8E%AF%E8%A7%86%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8Ehairs%E8%A7%92%E7%82%B9%E6%A3%80%E6%B5%8B%E4%B8%8E%E8%81%9A%E7%B1%BB%E7%AE%97%E6%B3%95%E7%9A%84%E6%A3%8B%E7%9B%98%E6%A0%BC%E8%AF%86%E5%88%AB%E4%B8%8E%E7%8E%AF%E8%A7%86%E6%A0%87%E5%AE%9A.PDF">åŸºäºhairsè§’ç‚¹æ£€æµ‹ä¸èšç±»ç®—æ³•çš„æ£‹ç›˜æ ¼è¯†åˆ«ä¸ç¯è§†æ ‡å®š.PDF</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%BF%97%E7%89%A9%E7%9A%84%E7%8E%AF%E8%A7%86%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E5%85%AD%E5%9D%97%E5%9B%9E%E5%AD%90%E5%BD%A2%E6%A0%87%E5%AE%9A%E5%B8%83%E7%9A%84%E7%8E%AF%E8%A7%86%E9%9A%8F%E6%9C%BA%E6%A0%87%E5%AE%9A.PDF">åŸºäºå…­å—å›å­å½¢æ ‡å®šå¸ƒçš„ç¯è§†éšæœºæ ‡å®š.PDF</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%BF%97%E7%89%A9%E7%9A%84%E7%8E%AF%E8%A7%86%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E5%9C%86%E5%BD%A2%E6%A0%87%E5%AE%9A%E5%B8%83%E7%9A%84%E7%8E%AF%E8%A7%86%E6%A0%87%E5%AE%9A%E6%96%B9%E6%B3%95.PDF">åŸºäºåœ†å½¢æ ‡å®šå¸ƒçš„ç¯è§†æ ‡å®šæ–¹æ³•.PDF</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%BF%97%E7%89%A9%E7%9A%84%E7%8E%AF%E8%A7%86%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E5%AE%9D%E9%A9%AC%E6%A0%87%E8%AF%86%E4%B8%8E%E7%9F%A9%E5%BD%A2%E6%A1%86%E7%9A%84%E7%8E%AF%E8%A7%86%E6%A0%87%E5%AE%9A.pdf">åŸºäºå®é©¬æ ‡è¯†ä¸çŸ©å½¢æ¡†çš„ç¯è§†æ ‡å®š.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%BF%97%E7%89%A9%E7%9A%84%E7%8E%AF%E8%A7%86%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E5%B8%B8%E8%A7%84%E9%93%BA%E5%B8%83%E6%A0%87%E5%AE%9A%E7%9A%84%E7%8E%AF%E8%A7%86%E7%9B%B8%E6%9C%BA%E5%86%85%E5%8F%82%E6%A0%87%E5%AE%9A.PDF">åŸºäºå¸¸è§„é“ºå¸ƒæ ‡å®šçš„ç¯è§†ç›¸æœºå†…å‚æ ‡å®š.PDF</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%BF%97%E7%89%A9%E7%9A%84%E7%8E%AF%E8%A7%86%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E6%8F%8F%E8%BF%B0%E5%9B%A0%E5%AD%90%E7%9A%84%20%E6%A3%8B%E7%9B%98%E6%A0%BC%E8%A7%92%E7%82%B9%E6%A3%80%E6%B5%8B%E4%B8%8E%E7%8E%AF%E8%A7%86%E6%A0%87%E5%AE%9A.PDF">åŸºäºæè¿°å› å­çš„ æ£‹ç›˜æ ¼è§’ç‚¹æ£€æµ‹ä¸ç¯è§†æ ‡å®š.PDF</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%BF%97%E7%89%A9%E7%9A%84%E7%8E%AF%E8%A7%86%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E6%97%8B%E8%BD%AC%E6%A3%8B%E7%9B%98%E6%A0%BC%E5%8C%B9%E9%85%8D%E7%9A%84%E7%8E%AF%E8%A7%86%E6%A0%87%E5%AE%9A.PDF">åŸºäºæ—‹è½¬æ£‹ç›˜æ ¼åŒ¹é…çš„ç¯è§†æ ‡å®š.PDF</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%BF%97%E7%89%A9%E7%9A%84%E7%8E%AF%E8%A7%86%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E6%A3%8B%E7%9B%98%E6%A0%BC%E7%9A%84%E5%86%85%E5%8F%82%E6%A0%87%E5%AE%9A%E8%AF%84%E4%BC%B0.pdf">åŸºäºæ£‹ç›˜æ ¼çš„å†…å‚æ ‡å®šè¯„ä¼°.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%BF%97%E7%89%A9%E7%9A%84%E7%8E%AF%E8%A7%86%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E6%A3%8B%E7%9B%98%E6%A0%BC%E7%9A%84%E9%9A%8F%E6%9C%BA%E6%A0%87%E5%AE%9A.PDF">åŸºäºæ£‹ç›˜æ ¼çš„éšæœºæ ‡å®š.PDF</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%BF%97%E7%89%A9%E7%9A%84%E7%8E%AF%E8%A7%86%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E8%A7%92%E7%82%B9%E6%A3%80%E6%B5%8B%E5%92%8C%E5%85%89%E6%B5%81%E6%B3%95%E7%9A%84%E7%A7%BB%E5%8A%A8%E6%A0%87%E5%AE%9A.PDF">åŸºäºè§’ç‚¹æ£€æµ‹å’Œå…‰æµæ³•çš„ç§»åŠ¨æ ‡å®š.PDF</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%BF%97%E7%89%A9%E7%9A%84%E7%8E%AF%E8%A7%86%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/%E7%8E%AF%E8%A7%86%E6%A3%8B%E7%9B%98%E6%A0%BC%E7%BC%96%E7%A0%81%E6%A3%80%E6%B5%8B%E4%B8%8E%E5%8C%B9%E9%85%8D.pdf">ç¯è§†æ£‹ç›˜æ ¼ç¼–ç æ£€æµ‹ä¸åŒ¹é….pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%A0%87%E5%AE%9A/%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%BF%97%E7%89%A9%E7%9A%84%E7%8E%AF%E8%A7%86%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A/%E7%8E%AF%E8%A7%86%E7%9B%B8%E6%9C%BA%E7%9A%84%E7%A7%BB%E5%8A%A8%E6%A0%87%E5%AE%9A.pdf">ç¯è§†ç›¸æœºçš„ç§»åŠ¨æ ‡å®š.pdf</a></p></li></ul><h1 id="ç¯è§†è½¦é“çº¿æ£€æµ‹"><a href="#ç¯è§†è½¦é“çº¿æ£€æµ‹" class="headerlink" title="ç¯è§†è½¦é“çº¿æ£€æµ‹"></a>ç¯è§†è½¦é“çº¿æ£€æµ‹</h1><ul><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E7%8E%AF%E8%A7%86%E8%BD%A6%E9%81%93%E7%BA%BF%E6%A3%80%E6%B5%8B/%E4%B8%80%E7%A7%8D%E5%9F%BA%E4%BA%8E%E7%8E%AF%E8%A7%86%E5%9B%BE%E5%83%8F%E7%9A%84%E8%BD%A6%E9%81%93%E7%BA%BF%E6%A3%80%E6%B5%8B%E6%96%B9%E6%B3%95.pdf">ä¸€ç§åŸºäºç¯è§†å›¾åƒçš„è½¦é“çº¿æ£€æµ‹æ–¹æ³•.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E7%8E%AF%E8%A7%86%E8%BD%A6%E9%81%93%E7%BA%BF%E6%A3%80%E6%B5%8B/%E4%B8%80%E7%A7%8D%E7%8E%AF%E8%A7%86%E5%A4%8D%E7%94%A8%E7%9A%84%E8%BD%A6%E9%81%93%E7%BA%BF%E8%AF%86%E5%88%AB%E6%96%B9%E6%B3%95.pdf">ä¸€ç§ç¯è§†å¤ç”¨çš„è½¦é“çº¿è¯†åˆ«æ–¹æ³•.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E7%8E%AF%E8%A7%86%E8%BD%A6%E9%81%93%E7%BA%BF%E6%A3%80%E6%B5%8B/%E5%85%A8%E6%99%AF%E8%BD%A6%E8%BE%86%E9%A9%BE%E9%A9%B6%E8%BE%85%E5%8A%A9%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%BD%A6%E9%81%93%E7%BA%BF%E8%AF%86%E5%88%AB%E6%8A%80%E6%9C%AF%E7%A0%94%E7%A9%B6.caj">å…¨æ™¯è½¦è¾†é©¾é©¶è¾…åŠ©ç³»ç»Ÿçš„è½¦é“çº¿è¯†åˆ«æŠ€æœ¯ç ”ç©¶.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E7%8E%AF%E8%A7%86%E8%BD%A6%E9%81%93%E7%BA%BF%E6%A3%80%E6%B5%8B/%E5%9F%BA%E4%BA%8E%E5%85%A8%E6%99%AF%E8%A7%86%E8%A7%89%E7%9A%84%E6%B1%BD%E8%BD%A6%E9%A9%BE%E9%A9%B6%E8%BE%85%E5%8A%A9%E6%8A%80%E6%9C%AF%E7%A0%94%E7%A9%B6_%E5%B0%B9%E9%9B%AA%E9%BE%99.caj">åŸºäºå…¨æ™¯è§†è§‰çš„æ±½è½¦é©¾é©¶è¾…åŠ©æŠ€æœ¯ç ”ç©¶_å°¹é›ªé¾™.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E7%8E%AF%E8%A7%86%E8%BD%A6%E9%81%93%E7%BA%BF%E6%A3%80%E6%B5%8B/%E5%9F%BA%E4%BA%8E%E7%8E%AF%E8%A7%86%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%BD%A6%E9%81%93%E5%81%8F%E7%A6%BB%E9%A2%84%E8%AD%A6%E7%B3%BB%E7%BB%9F%E7%A0%94%E7%A9%B6_%E5%86%B7%E5%9D%A4.caj">åŸºäºç¯è§†ç³»ç»Ÿçš„è½¦é“åç¦»é¢„è­¦ç³»ç»Ÿç ”ç©¶_å†·å¤.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E7%8E%AF%E8%A7%86%E8%BD%A6%E9%81%93%E7%BA%BF%E6%A3%80%E6%B5%8B/%E5%9F%BA%E4%BA%8E%E9%B1%BC%E7%9C%BC%E7%8E%AF%E8%A7%86%E7%9A%84%E8%BD%A6%E9%81%93%E7%BA%BF%E6%A3%80%E6%B5%8B%E6%8A%80%E6%9C%AF%E7%A0%94%E7%A9%B6.caj">åŸºäºç¯è§†ç³»ç»Ÿçš„è½¦é“åç¦»é¢„è­¦ç³»ç»Ÿç ”ç©¶_å†·å¤.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E7%8E%AF%E8%A7%86%E8%BD%A6%E9%81%93%E7%BA%BF%E6%A3%80%E6%B5%8B/%E5%9F%BA%E4%BA%8E%E9%B1%BC%E7%9C%BC%E7%8E%AF%E8%A7%86%E7%9A%84%E8%BD%A6%E9%81%93%E7%BA%BF%E6%A3%80%E6%B5%8B%E6%8A%80%E6%9C%AF%E7%A0%94%E7%A9%B6_%E5%AD%99%E5%AE%9B%E8%B7%AF.caj">åŸºäºé±¼çœ¼ç¯è§†çš„è½¦é“çº¿æ£€æµ‹æŠ€æœ¯ç ”ç©¶_å­™å®›è·¯.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E7%8E%AF%E8%A7%86%E8%BD%A6%E9%81%93%E7%BA%BF%E6%A3%80%E6%B5%8B/%E7%8E%AF%E8%A7%86%E8%BD%A6%E9%81%93%E7%BA%BF%E8%AF%86%E5%88%AB%E6%96%B9%E6%B3%95%E3%80%81%E8%A3%85%E7%BD%AE%E5%8F%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8F%AF%E8%AF%BB%E5%AD%98%E5%82%A8%E4%BB%8B%E8%B4%A8.pdf">ç¯è§†è½¦é“çº¿è¯†åˆ«æ–¹æ³•ã€è£…ç½®åŠè®¡ç®—æœºå¯è¯»å­˜å‚¨ä»‹è´¨.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E7%8E%AF%E8%A7%86%E8%BD%A6%E9%81%93%E7%BA%BF%E6%A3%80%E6%B5%8B/%E7%8E%AF%E8%A7%86%E9%B1%BC%E7%9C%BC%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%A0%94%E7%A9%B6%E8%BF%9B%E5%B1%95_%E5%8C%85%E4%BF%8A.caj">ç¯è§†é±¼çœ¼å›¾åƒå¤„ç†æ·±åº¦å­¦ä¹ ç ”ç©¶è¿›å±•_åŒ…ä¿Š.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E7%8E%AF%E8%A7%86%E8%BD%A6%E9%81%93%E7%BA%BF%E6%A3%80%E6%B5%8B/A_lane_detection_method_based_on_a_ridge_detector_and_regional_G-RANSAC.pdf">A_lane_detection_method_based_on_a_ridge_detector_and_regional_G-RANSAC.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E7%8E%AF%E8%A7%86%E8%BD%A6%E9%81%93%E7%BA%BF%E6%A3%80%E6%B5%8B/%E8%BD%A6%E9%81%93%E5%81%8F%E7%A6%BB%E9%A2%84%E8%AD%A6%E8%A7%86%E8%A7%89%E7%B3%BB%E7%BB%9F%E7%AE%97%E6%B3%95%E6%94%B9%E8%BF%9B%E7%A0%94%E7%A9%B6_%E8%91%9B%E5%B9%B3%E6%B7%91.caj">è½¦é“åç¦»é¢„è­¦è§†è§‰ç³»ç»Ÿç®—æ³•æ”¹è¿›ç ”ç©¶_è‘›å¹³æ·‘.caj</a></p></li></ul><h1 id="æ‹¼æ¥ä¼˜åŒ–"><a href="#æ‹¼æ¥ä¼˜åŒ–" class="headerlink" title="æ‹¼æ¥ä¼˜åŒ–"></a>æ‹¼æ¥ä¼˜åŒ–</h1><ul><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/A_memory-efficient_architecture_of_full_HD_around_view_monitor_systems.pdf">A_memory-efficient_architecture_of_full_HD_around_view_monitor_systems.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/Auto-calibration_around-view_monitoring_system.pdf">Auto-calibration_around-view_monitoring_system.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/Effective_photometric_alignment_for_surround_view_monitoring_system.pdf">Effective_photometric_alignment_for_surround_view_monitoring_system.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/Embedded_system_implementation_for_vehicle_around_view_monitoring.pdf">Embedded_system_implementation_for_vehicle_around_view_monitoring.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/Image_stitching_method_for_surround_view_image_without_seamline.pdf">Image_stitching_method_for_surround_view_image_without_seamline.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/Matlab%E6%A0%87%E5%AE%9A__%E6%98%A0%E5%B0%84%E8%A1%A8__A_Calibration_Method_for_the_Surround-View_Parking_Assistant_System_2020.pdf">Matlabæ ‡å®š__æ˜ å°„è¡¨__A_Calibration_Method_for_the_Surround-View_Parking_Assistant_System_2020.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/Photometric_alignment_for_surround_view_camera_system.pdf">Photometric_alignment_for_surround_view_camera_system.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/ROECS_A_Robust_Semi-direct_Pipeline_Towards_Online_Extrinsics_Correction_of_the_Surround-view_System.pdf">ROECS_A_Robust_Semi-direct_Pipeline_Towards_Online_Extrinsics_Correction_of_the_Surround-view_System.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/Ring_fusion_of_fisheye_images_based_on_corner_detection_algorithm_for_around_view.pdf">Ring_fusion_of_fisheye_images_based_on_corner_detection_algorithm_for_around_view.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/Robust_Accurate_Extrinsic_Calibration_of_Static_Non-overlapping_Cameras.pdf">Robust_Accurate_Extrinsic_Calibration_of_Static_Non-overlapping_Cameras.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/SEAMLESS_3D_SURROUND_VIEW_WITH_A_NOVEL_BURGER_MODEL.pdf">SEAMLESS_3D_SURROUND_VIEW_WITH_A_NOVEL_BURGER_MODEL.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/Wide-scoped_Surrounding_Top-view_Monitor_for_Advanced_Driver_Assistance_Systems.pdf">Wide-scoped_Surrounding_Top-view_Monitor_for_Advanced_Driver_Assistance_Systems.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%85%A8%E6%99%AF%E8%A7%86%E5%9B%BE%E6%B3%8A%E8%BD%A6%E8%BE%85%E5%8A%A9%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%A4%9A%E8%A7%86%E7%82%B9%E8%A7%86%E9%A2%91%E6%8B%BC%E6%8E%A5_2016_%E9%99%88%E6%B5%A9.caj">å…¨æ™¯è§†å›¾æ³Šè½¦è¾…åŠ©ç³»ç»Ÿä¸­çš„å¤šè§†ç‚¹è§†é¢‘æ‹¼æ¥_2016_é™ˆæµ©.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%87%A0%E4%BD%95%E5%AF%B9%E9%BD%90_%E5%85%89%E5%BA%A6%E5%AF%B9%E9%BD%90%E4%BC%98%E5%8C%96_A_surround_view_camera_solution_for_embedded_systems__2014.pdf">å‡ ä½•å¯¹é½_å…‰åº¦å¯¹é½ä¼˜åŒ–_A_surround_view_camera_solution_for_embedded_systems__2014.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%8A%A0%E6%9D%83%E6%8B%BC%E6%8E%A5_%E5%AE%8C%E6%95%B4%E8%BF%87%E7%A8%8B_A_flexible_vehicle_surround_view_camera_system_by_central-around_coordinate_mapping_model_2018.pdf">åŠ æƒæ‹¼æ¥_å®Œæ•´è¿‡ç¨‹_A_flexible_vehicle_surround_view_camera_system_by_central-around_coordinate_mapping_model_2018.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%8A%A0%E6%9D%83%E8%9E%8D%E5%90%88__%E8%88%B9%E8%88%B6%E6%A8%A1%E5%9E%8B__3D_Surround_View_for_Advanced_Driver_Assistance_Systems__2017.pdf">åŠ æƒèåˆ__èˆ¹èˆ¶æ¨¡å‹__3D_Surround_View_for_Advanced_Driver_Assistance_Systems__2017.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92_Bird%E2%80%99s-Eye_View_Vision_System_for_Vehicle_Surrounding_Monitoring.pdf">åŠ¨æ€è§„åˆ’_Birdâ€™s-Eye_View_Vision_System_for_Vehicle_Surrounding_Monitoring.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%9C%86%E5%BD%A2%E6%A3%80%E6%B5%8B__Automatic_circle_pattern_extraction_and_camera_calibration_using_fast_adaptive_binarization_and_plane_homography.pdf">åœ†å½¢æ£€æµ‹__Automatic_circle_pattern_extraction_and_camera_calibration_using_fast_adaptive_binarization_and_plane_homography.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%9F%BA%E4%BA%8E%E5%B8%A7%E5%BA%8F%E5%88%97%E7%9A%84%E7%A8%80%E7%96%8F%E7%89%B9%E5%BE%81%E5%8C%B9%E9%85%8D_Online_continuous_stereo_extrinsic_parameter_estimation.pdf">åŸºäºå¸§åºåˆ—çš„ç¨€ç–ç‰¹å¾åŒ¹é…_Online_continuous_stereo_extrinsic_parameter_estimation.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%9F%BA%E4%BA%8E%E5%B9%B3%E8%A1%8C%E8%BD%A6%E9%81%93%E7%BA%BF_2007_Online_extrinsic_parameters_calibration_for_stereovision_systems_used_in_far-range_detection_vehicle_applications.pdf">åŸºäºå¹³è¡Œè½¦é“çº¿_2007_Online_extrinsic_parameters_calibration_for_stereovision_systems_used_in_far-range_detection_vehicle_applications.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%9F%BA%E4%BA%8E%E7%89%B9%E5%BE%81%E5%8C%B9%E9%85%8D_Photometric_and_geometric_rectification_for_stereoscopic_images.pdf">åŸºäºç‰¹å¾åŒ¹é…_Photometric_and_geometric_rectification_for_stereoscopic_images.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%9F%BA%E4%BA%8E%E7%9B%B8%E9%82%BB%E6%91%84%E5%83%8F%E5%A4%B4%E7%9A%84%E7%89%B9%E5%BE%81%E5%8C%B9%E9%85%8D_2019_High-Precision_Online_Markerless_Stereo_Extrinsic_Calibration.pdf">åŸºäºç›¸é‚»æ‘„åƒå¤´çš„ç‰¹å¾åŒ¹é…_2019_High-Precision_Online_Markerless_Stereo_Extrinsic_Calibration.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%9F%BA%E4%BA%8E%E7%9B%B8%E9%82%BB%E6%91%84%E5%83%8F%E5%A4%B4%E7%9A%84%E7%89%B9%E5%BE%81%E5%8C%B9%E9%85%8D_2019_High-Precision_Online_Markerless_Stereo_Extrinsic_Calibration.pdf">å­˜ç–‘__åœ†å½¢æ ‡å®šæ¿è‡ªåŠ¨æ ‡æ³¨__An_Automatic_Calibration_Method_for_AVM_Cameras_2020.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%AD%98%E7%96%91__%E5%9C%86%E5%BD%A2%E6%A0%87%E5%AE%9A%E6%9D%BF%E8%87%AA%E5%8A%A8%E6%A0%87%E6%B3%A8__An_Automatic_Calibration_Method_for_AVM_Cameras_2020.pdf">å­˜ç–‘__åœ†å½¢æ ‡å®šæ¿è‡ªåŠ¨æ ‡æ³¨__An_Automatic_Calibration_Method_for_AVM_Cameras_2020.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%BC%80%E6%BA%90__Matlab%E5%B7%A5%E5%85%B7%E7%AE%B1%E8%BF%9B%E8%A1%8C%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A__A_toolbox_for_easily_calibrating_omnidirectional_cameras.pdf">å¼€æº__Matlabå·¥å…·ç®±è¿›è¡Œç›¸æœºæ ‡å®š__A_toolbox_for_easily_calibrating_omnidirectional_cameras.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%BC%80%E6%BA%90_matlab_%E9%B1%BC%E7%9C%BC%E5%9B%BE%E5%83%8F%E7%9F%AB%E6%AD%A3%E5%92%8C%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A_Minimal_Solvers_for_Single-View_Lens-Distorted_Camera_Auto-Calibration.pdf">å¼€æº_matlab_é±¼çœ¼å›¾åƒçŸ«æ­£å’Œç›¸æœºæ ‡å®š_Minimal_Solvers_for_Single-View_Lens-Distorted_Camera_Auto-Calibration.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E6%8B%BC%E6%8E%A5%E7%BC%9D%E4%BC%98%E5%8C%96_Online_calibration_of_exterior_orientations_of_a_vehicle-mounted_surround-view_camera_system.pdf">æ‹¼æ¥ç¼ä¼˜åŒ–_Online_calibration_of_exterior_orientations_of_a_vehicle-mounted_surround-view_camera_system.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E6%8B%BC%E7%BC%9D%E4%BA%AE%E5%BA%A6%E5%B7%AE%E5%BC%82%E4%BC%98%E5%8C%96__2014_Photometric_alignment_for_surround_view_camera_system.pdf">æ‹¼ç¼äº®åº¦å·®å¼‚ä¼˜åŒ–__2014_Photometric_alignment_for_surround_view_camera_system.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E6%A0%87%E5%AE%9A%E6%9D%BF_2017_%E4%BC%B0%E8%AE%A1%E5%B9%B6%E4%BC%98%E5%8C%96_Automatic_Extrinsic_Calibration_Methods_for_Surround_View_Systems.pdf">æ ‡å®šæ¿_2017_ä¼°è®¡å¹¶ä¼˜åŒ–_Automatic_Extrinsic_Calibration_Methods_for_Surround_View_Systems.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E7%89%B9%E5%BE%81%E5%8C%B9%E9%85%8D_Camodocal_Automatic_intrinsic_and_extrinsic_calibration_of_a_rig.pdf">ç‰¹å¾åŒ¹é…_Camodocal_Automatic_intrinsic_and_extrinsic_calibration_of_a_rig.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E8%87%AA%E9%80%82%E5%BA%94%E6%8B%BC%E6%8E%A5%E7%9F%AB%E6%AD%A3_2006_Digital_photograph_stitching_with_optimized_matching_of_gradient_and_curvature.pdf">è‡ªé€‚åº”æ‹¼æ¥çŸ«æ­£_2006_Digital_photograph_stitching_with_optimized_matching_of_gradient_and_curvature.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E8%87%AA%E9%80%82%E5%BA%94%E6%B5%8B%E5%85%89%E7%9F%AB%E6%AD%A3_Eliminating_ghosting_and_exposure_artifacts_in_image_mosaics.pdf">è‡ªé€‚åº”æµ‹å…‰çŸ«æ­£_Eliminating_ghosting_and_exposure_artifacts_in_image_mosaics.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E4%B8%80%E7%A7%8D%E6%8B%BC%E6%8E%A5%E5%8C%BA%E5%9F%9F%E8%9E%8D%E5%90%88%E6%9D%83%E9%87%8D%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.pdf">ä¸€ç§æ‹¼æ¥åŒºåŸŸèåˆæƒé‡è®¡ç®—æ–¹æ³•.pdf</a></p></li></ul><h2 id="å¤šæ³¢æ®µæ‹¼ç¼ä¼˜åŒ–"><a href="#å¤šæ³¢æ®µæ‹¼ç¼ä¼˜åŒ–" class="headerlink" title="å¤šæ³¢æ®µæ‹¼ç¼ä¼˜åŒ–"></a>å¤šæ³¢æ®µæ‹¼ç¼ä¼˜åŒ–</h2><ul><li><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%A4%9A%E6%B3%A2%E6%AE%B5%E6%8B%BC%E7%BC%9D%E4%BC%98%E5%8C%96/SEAMLESS%203D%20SURROUND%20VIEW%20WITH%20A%20NOVEL%20BURGER%20MODEL/SEAMLESS_3D_SURROUND_VIEW_WITH_A_NOVEL_BURGER_MODEL.pdf">SEAMLESS 3D SURROUND VIEW WITH A NOVEL BURGER MODEL&#x2F;SEAMLESS_3D_SURROUND_VIEW_WITH_A_NOVEL_BURGER_MODEL.pdf</a></li></ul><h3 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h3><ul><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%A4%9A%E6%B3%A2%E6%AE%B5%E6%8B%BC%E7%BC%9D%E4%BC%98%E5%8C%96/SEAMLESS%203D%20SURROUND%20VIEW%20WITH%20A%20NOVEL%20BURGER%20MODEL/%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0_Fast_Approximate_Energy_Minimization_via_Graph_Cuts.pdf">SEAMLESS 3D SURROUND VIEW WITH A NOVEL BURGER MODEL&#x2F;å‚è€ƒæ–‡ç« _Fast_Approximate_Energy_Minimization_via_Graph_Cuts.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%A4%9A%E6%B3%A2%E6%AE%B5%E6%8B%BC%E7%BC%9D%E4%BC%98%E5%8C%96/SEAMLESS%203D%20SURROUND%20VIEW%20WITH%20A%20NOVEL%20BURGER%20MODEL/%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0_Graphcut_textures_mage_and_video_synthesis_using.pdf">SEAMLESS 3D SURROUND VIEW WITH A NOVEL BURGER MODEL&#x2F;å‚è€ƒæ–‡ç« _Graphcut_textures_mage_and_video_synthesis_using.pdf</a></p></li></ul><h2 id="å¸¸è§æ‹¼ç¼ä¼˜åŒ–"><a href="#å¸¸è§æ‹¼ç¼ä¼˜åŒ–" class="headerlink" title="å¸¸è§æ‹¼ç¼ä¼˜åŒ–"></a>å¸¸è§æ‹¼ç¼ä¼˜åŒ–</h2><ul><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%B8%B8%E8%A7%81%E6%8B%BC%E7%BC%9D%E4%BC%98%E5%8C%96/BurtAdelson_spline83.pdf">BurtAdelson_spline83.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%B8%B8%E8%A7%81%E6%8B%BC%E7%BC%9D%E4%BC%98%E5%8C%96/Pedestrian-Aware_Panoramic_Video_Stitching_Based_on_a_Structured_Camera_Array.pdf">Pedestrian-Aware_Panoramic_Video_Stitching_Based_on_a_Structured_Camera_Array.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%B8%B8%E8%A7%81%E6%8B%BC%E7%BC%9D%E4%BC%98%E5%8C%96/Sequential_image_stitching_for_mobile_panoramas.pdf">Sequential_image_stitching_for_mobile_panoramas.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%B8%B8%E8%A7%81%E6%8B%BC%E7%BC%9D%E4%BC%98%E5%8C%96/%E4%B8%80%E7%A7%8D%E6%B6%88%E9%99%A4%E5%9B%BE%E5%83%8F%E6%8B%BC%E6%8E%A5%E7%BC%9D%E5%92%8C%E9%AC%BC%E5%BD%B1%E7%9A%84%E5%BF%AB%E9%80%9F%E6%8B%BC%E6%8E%A5%E7%AE%97%E6%B3%95_%E7%9E%BF%E4%B8%AD.pdf">ä¸€ç§æ¶ˆé™¤å›¾åƒæ‹¼æ¥ç¼å’Œé¬¼å½±çš„å¿«é€Ÿæ‹¼æ¥ç®—æ³•_ç¿ä¸­.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%B8%B8%E8%A7%81%E6%8B%BC%E7%BC%9D%E4%BC%98%E5%8C%96/%E5%9B%BE%E5%83%8F%E6%8B%BC%E6%8E%A5%E7%9A%84%E6%94%B9%E8%BF%9B%E7%AE%97%E6%B3%95_%E6%96%B9%E8%B4%A4%E5%8B%87.pdf">å›¾åƒæ‹¼æ¥çš„æ”¹è¿›ç®—æ³•_æ–¹è´¤å‹‡.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%B8%B8%E8%A7%81%E6%8B%BC%E7%BC%9D%E4%BC%98%E5%8C%96/%E5%9F%BA%E4%BA%8E%E5%A4%9A%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A%E7%9A%84%E5%85%A8%E6%99%AF%E5%90%88%E6%88%90%E6%96%B9%E6%B3%95%E7%A0%94%E7%A9%B6.caj">åŸºäºå¤šç›¸æœºæ ‡å®šçš„å…¨æ™¯åˆæˆæ–¹æ³•ç ”ç©¶.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E5%B8%B8%E8%A7%81%E6%8B%BC%E7%BC%9D%E4%BC%98%E5%8C%96/%E5%A4%9A%E7%BC%96%E7%BB%84%E5%8F%98%E8%A7%92%E5%BA%A6%E8%BD%A6%E8%BE%86%E5%85%A8%E6%99%AF%E7%8E%AF%E8%A7%86%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%A0%94%E7%A9%B6_%E6%B1%9F%E5%BF%97%E5%9B%BD.caj">å¤šç¼–ç»„å˜è§’åº¦è½¦è¾†å…¨æ™¯ç¯è§†ç³»ç»Ÿçš„ç ”ç©¶_æ±Ÿå¿—å›½.caj</a></p></li></ul><h2 id="äº®åº¦å‡è¡¡"><a href="#äº®åº¦å‡è¡¡" class="headerlink" title="äº®åº¦å‡è¡¡"></a>äº®åº¦å‡è¡¡</h2><h3 id="ä¸“åˆ©"><a href="#ä¸“åˆ©" class="headerlink" title="ä¸“åˆ©"></a>ä¸“åˆ©</h3><ul><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1/%E4%B8%93%E5%88%A9/%E4%B8%80%E7%A7%8D%E5%85%A8%E6%99%AF%E5%9B%BE%E6%8B%BC%E6%8E%A5%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1%E6%96%B9%E6%B3%95%E5%8F%8A%E7%B3%BB%E7%BB%9F---%E5%9B%9B%E8%B7%AF%E5%8E%9F%E5%9B%BE%E9%87%8D%E5%8F%A0%E5%8C%BA%E5%9F%9F%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1.pdf">ä¸€ç§å…¨æ™¯å›¾æ‹¼æ¥äº®åº¦å‡è¡¡æ–¹æ³•åŠç³»ç»Ÿâ€”å››è·¯åŸå›¾é‡å åŒºåŸŸäº®åº¦å‡è¡¡.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1/%E4%B8%93%E5%88%A9/%E4%B8%80%E7%A7%8D%E5%85%A8%E6%99%AF%E7%8E%AF%E8%A7%86%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1%E6%96%B9%E6%B3%95---%E5%9B%9B%E8%B7%AF%E4%BF%AF%E8%A7%86%E5%9B%BE%E5%A4%84%E7%90%86.pdf">ä¸€ç§å…¨æ™¯ç¯è§†ç³»ç»Ÿçš„äº®åº¦å‡è¡¡æ–¹æ³•â€”å››è·¯ä¿¯è§†å›¾å¤„ç†.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1/%E4%B8%93%E5%88%A9/%E4%B8%80%E7%A7%8D%E5%9F%BA%E4%BA%8E%E9%87%8D%E5%8F%A0%E5%8C%BA%E5%9F%9F%E7%89%B9%E5%BE%81%E7%82%B9%E5%AF%B9%E7%9A%84%E5%9B%BE%E5%83%8F%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1%E6%96%B9%E6%B3%95---%E7%89%B9%E5%BE%81%E5%8C%B9%E9%85%8D%E9%80%89%E6%8B%A9%E9%87%8D%E5%8F%A0%E5%8C%BA%E5%9F%9F%E5%90%8E%E8%BF%9B%E8%A1%8C%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1.pdf">ä¸€ç§åŸºäºé‡å åŒºåŸŸç‰¹å¾ç‚¹å¯¹çš„å›¾åƒäº®åº¦å‡è¡¡æ–¹æ³•â€”ç‰¹å¾åŒ¹é…é€‰æ‹©é‡å åŒºåŸŸåè¿›è¡Œäº®åº¦å‡è¡¡.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1/%E4%B8%93%E5%88%A9/%E4%B8%80%E7%A7%8D%E6%B1%BD%E8%BD%A6360%E5%85%A8%E6%99%AF%E6%98%BE%E7%A4%BA%E7%9A%84%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1%E6%96%B9%E6%B3%95---%E5%9B%9B%E8%B7%AFYUV%E5%8A%A0%E6%9D%83%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1.pdf">ä¸€ç§æ±½è½¦360å…¨æ™¯æ˜¾ç¤ºçš„äº®åº¦å‡è¡¡æ–¹æ³•â€”å››è·¯YUVåŠ æƒäº®åº¦å‡è¡¡.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1/%E4%B8%93%E5%88%A9/%E4%B8%80%E7%A7%8D%E8%BD%A6%E8%BD%BD%E7%8E%AF%E8%A7%86%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1%E6%96%B9%E6%B3%95%E5%8F%8A%E7%B3%BB%E7%BB%9F---%E5%9B%9B%E8%B7%AF%E4%BF%AF%E8%A7%86%E5%9B%BE%E9%87%8D%E5%8F%A0%E5%8C%BA%E5%9F%9F%E9%87%8D%E5%8F%A0%E5%8C%BA%E5%9F%9F%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1.pdf">ä¸€ç§è½¦è½½ç¯è§†ç³»ç»Ÿä¸­çš„äº®åº¦å‡è¡¡æ–¹æ³•åŠç³»ç»Ÿâ€”å››è·¯ä¿¯è§†å›¾é‡å åŒºåŸŸé‡å åŒºåŸŸäº®åº¦å‡è¡¡.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1/%E4%B8%93%E5%88%A9/%E8%BD%A6%E8%BD%BD360%E7%8E%AF%E8%A7%86%E7%B3%BB%E7%BB%9F%E5%9B%9B%E8%B7%AF%E6%99%BA%E8%83%BD%E6%9B%9D%E5%85%89%E7%AD%96%E7%95%A5---%E5%9B%9B%E8%B7%AF%E5%8E%9F%E5%9B%BE%E5%A4%84%E7%90%86.pdf">è½¦è½½360ç¯è§†ç³»ç»Ÿå››è·¯æ™ºèƒ½æ›å…‰ç­–ç•¥â€”å››è·¯åŸå›¾å¤„ç†.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1/%E4%B8%93%E5%88%A9/%E8%BD%A6%E8%BD%BD%E7%8E%AF%E8%A7%86%E7%9B%B8%E6%9C%BA%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%8E%AF%E8%A7%86%E5%9B%BE%E4%BA%AE%E5%BA%A6%E4%B8%8E%E9%A2%9C%E8%89%B2%E4%B8%80%E8%87%B4%E6%80%A7%E8%B0%83%E6%95%B4%E6%96%B9%E6%B3%95.pdf">è½¦è½½ç¯è§†ç›¸æœºç³»ç»Ÿä¸­ç¯è§†å›¾äº®åº¦ä¸é¢œè‰²ä¸€è‡´æ€§è°ƒæ•´æ–¹æ³•.pdf</a></p></li></ul><h2 id="æ–‡ç« "><a href="#æ–‡ç« " class="headerlink" title="æ–‡ç« "></a>æ–‡ç« </h2><ul><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1/%E6%96%87%E7%AB%A0/A_surround_view_camera_solution_for_embedded_systems.pdf">A_surround_view_camera_solution_for_embedded_systems.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1/%E6%96%87%E7%AB%A0/Adjustable_image_registration_and_brightness_for_surrounding_top-view_monitoring_system.pdf">Adjustable_image_registration_and_brightness_for_surrounding_top-view_monitoring_system.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1/%E6%96%87%E7%AB%A0/Effective_Photometric_Alignment_for_Surround_View_Monitoring_System.pdf">Effective_Photometric_Alignment_for_Surround_View_Monitoring_System.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1/%E6%96%87%E7%AB%A0/Informational_birds_eye_view_system_for_parking_assistance.pdf">Informational_birds_eye_view_system_for_parking_assistance.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1/%E6%96%87%E7%AB%A0/Method_and_apparatus_for_a_surround_view_camera_system_photometric_alignment.pdf">Method_and_apparatus_for_a_surround_view_camera_system_photometric_alignment.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1/%E6%96%87%E7%AB%A0/PHOTOMETRIC_ALIGNMENT_FOR_SURROUND_VIEW_CAMERA_SYSTEM.pdf">PHOTOMETRIC_ALIGNMENT_FOR_SURROUND_VIEW_CAMERA_SYSTEM.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1/%E6%96%87%E7%AB%A0/%E7%94%A8%E4%BA%8E%E8%BD%A6%E8%BD%BD%E7%8E%AF%E8%A7%86%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1%E6%96%B9%E6%B3%95%E5%92%8C%E8%A3%85%E7%BD%AE_%E8%83%A1%E6%8C%AF%E7%A8%8B.caj">ç”¨äºè½¦è½½ç¯è§†ç³»ç»Ÿçš„äº®åº¦å‡è¡¡æ–¹æ³•å’Œè£…ç½®_èƒ¡æŒ¯ç¨‹.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1/%E4%B8%93%E5%88%A9/%E5%9F%BA%E4%BA%8E%E4%BA%AE%E5%BA%A6%E8%A1%A5%E5%81%BF%E7%9A%84%E7%8E%AF%E8%A7%86%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.PDF">åŸºäºäº®åº¦è¡¥å¿çš„ç¯è§†äº®åº¦å‡è¡¡è®¡ç®—æ–¹æ³•.PDF</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E6%8B%BC%E6%8E%A5%E4%BC%98%E5%8C%96/%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1/%E4%B8%93%E5%88%A9/%E5%9F%BA%E4%BA%8E%E8%9E%8D%E5%90%88%E5%8C%BA%E5%9F%9F%E7%9A%84%E7%8E%AF%E8%A7%86%E4%BA%AE%E5%BA%A6%E5%9D%87%E8%A1%A1.PDF">åŸºäºèåˆåŒºåŸŸçš„ç¯è§†äº®åº¦å‡è¡¡.PDF</a></p></li></ul><h1 id="é“°æ¥å·¥ç¨‹è½¦è¾†360ç¯è§†"><a href="#é“°æ¥å·¥ç¨‹è½¦è¾†360ç¯è§†" class="headerlink" title="é“°æ¥å·¥ç¨‹è½¦è¾†360ç¯è§†"></a>é“°æ¥å·¥ç¨‹è½¦è¾†360ç¯è§†</h1><ul><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E9%93%B0%E6%8E%A5%E5%B7%A5%E7%A8%8B%E8%BD%A6%E8%BE%86360%E7%8E%AF%E8%A7%86/Research_on_semi_trailer_panoramic_surround_view_system_based_on_feature_point_matching.pdf">AVM&#x2F;é“°æ¥å·¥ç¨‹è½¦è¾†360ç¯è§†&#x2F;Research_on_semi_trailer_panoramic_surround_view_system_based_on_feature_point_matching.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E9%93%B0%E6%8E%A5%E5%B7%A5%E7%A8%8B%E8%BD%A6%E8%BE%86360%E7%8E%AF%E8%A7%86/VAVM_A_Flexible_Technique_for_Variable-angle_Around_View_Monitor_System_towards_Articulated_Engineering_Vehicle.pdf">AVM&#x2F;é“°æ¥å·¥ç¨‹è½¦è¾†360ç¯è§†&#x2F;VAVM_A_Flexible_Technique_for_Variable-angle_Around_View_Monitor_System_towards_Articulated_Engineering_Vehicle.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E9%93%B0%E6%8E%A5%E5%B7%A5%E7%A8%8B%E8%BD%A6%E8%BE%86360%E7%8E%AF%E8%A7%86/video2_compress.mp4">AVM&#x2F;é“°æ¥å·¥ç¨‹è½¦è¾†360ç¯è§†&#x2F;video2_compress.mp4</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E9%93%B0%E6%8E%A5%E5%B7%A5%E7%A8%8B%E8%BD%A6%E8%BE%86360%E7%8E%AF%E8%A7%86/%E9%92%88%E5%AF%B9%E9%93%B0%E6%8E%A5%E5%B7%A5%E7%A8%8B%E8%BD%A6%E8%BE%86%E7%9A%84%E5%8F%98%E8%A7%92%E5%BA%A6%E5%85%A8%E6%99%AF%E7%8E%AF%E8%A7%86%E7%B3%BB%E7%BB%9F%E7%A0%94%E7%A9%B6.pdf">AVM&#x2F;é“°æ¥å·¥ç¨‹è½¦è¾†360ç¯è§†&#x2F;é’ˆå¯¹é“°æ¥å·¥ç¨‹è½¦è¾†çš„å˜è§’åº¦å…¨æ™¯ç¯è§†ç³»ç»Ÿç ”ç©¶.pdf</a></p></li></ul><h1 id="åŸºç¡€è®ºæ–‡"><a href="#åŸºç¡€è®ºæ–‡" class="headerlink" title="åŸºç¡€è®ºæ–‡"></a>åŸºç¡€è®ºæ–‡</h1><ul><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/360_%E6%B3%8A%E8%BD%A6%E8%BE%85%E5%8A%A9%E7%B3%BB%E7%BB%9F%E5%85%A8%E6%99%AF%E6%88%90%E5%83%8F%E7%9A%84%E7%A0%94%E7%A9%B6_%E6%B1%9F%E9%BE%99.caj">360_æ³Šè½¦è¾…åŠ©ç³»ç»Ÿå…¨æ™¯æˆåƒçš„ç ”ç©¶_æ±Ÿé¾™.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/360_%E8%BD%A6%E8%BD%BD%E7%8E%AF%E8%A7%86%E7%B3%BB%E7%BB%9F%E5%9B%BE%E5%83%8F%E6%8B%BC%E6%8E%A5%E6%8A%80%E6%9C%AF%E7%A0%94%E7%A9%B6_%E5%86%AF%E8%81%AA.caj">360_è½¦è½½ç¯è§†ç³»ç»Ÿå›¾åƒæ‹¼æ¥æŠ€æœ¯ç ”ç©¶_å†¯èª.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/3D_Surround_View_for_Advanced_Driver_Assistance_Systems.pdf">3D_Surround_View_for_Advanced_Driver_Assistance_Systems.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/AVSP%E6%8B%BC%E6%8E%A5_FAQ.pdf">AVSPæ‹¼æ¥_FAQ.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/AVSP%E6%8B%BC%E6%8E%A5%E8%B0%83%E8%AF%95%E6%8C%87%E5%8D%97.pdf">AVSPæ‹¼æ¥è°ƒè¯•æŒ‡å—.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/A_Novel_AVM_Calibration_Method_Using_Unaligned_SquareCalibration_Boards.pdf">A_Novel_AVM_Calibration_Method_Using_Unaligned_SquareCalibration_Boards.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/CompComm.2017.8322916.pdf">CompComm.2017.8322916.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/Effective_Photometric_Alignment_for_Surround_View_Monitoring_System.pdf">Effective_Photometric_Alignment_for_Surround_View_Monitoring_System.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/PHOTOMETRIC_ALIGNMENT_FOR_SURROUND_VIEW_CAMERA_SYSTEM.pdf">PHOTOMETRIC_ALIGNMENT_FOR_SURROUND_VIEW_CAMERA_SYSTEM.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/Surround_view_fisheye_camera_perception_for_automated_driving_overview_survey_challenges.pdf">Surround_view_fisheye_camera_perception_for_automated_driving_overview_survey_challenges.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/s11042-018-6744-4.pdf">s11042-018-6744-4.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E4%B8%89%E7%BB%B4%E5%8F%AF%E5%8F%98%E8%A7%86%E8%A7%92%E5%91%A8%E7%95%8C%E7%8E%AF%E8%A7%86%E7%B3%BB%E7%BB%9F%E7%AE%97%E6%B3%95%E7%A0%94%E7%A9%B6%E5%92%8C%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%AE%9E%E7%8E%B0_%E9%9F%A6%E6%B7%BB%E5%85%83.caj">ä¸‰ç»´å¯å˜è§†è§’å‘¨ç•Œç¯è§†ç³»ç»Ÿç®—æ³•ç ”ç©¶å’ŒåµŒå…¥å¼å®ç°_éŸ¦æ·»å…ƒ.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E5%9F%BA%E4%BA%8E%E5%A4%9A%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A%E7%9A%84%E5%85%A8%E6%99%AF%E5%90%88%E6%88%90%E6%96%B9%E6%B3%95%E7%A0%94%E7%A9%B6.caj">åŸºäºå¤šç›¸æœºæ ‡å®šçš„å…¨æ™¯åˆæˆæ–¹æ³•ç ”ç©¶.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E5%9F%BA%E4%BA%8E%E8%BD%A6%E8%BD%BD%E7%9A%84%E5%A4%9A%E7%9B%B8%E6%9C%BA%E8%81%94%E5%90%88%E6%A0%87%E5%AE%9A_%E7%8E%8B%E7%91%9E.caj">åŸºäºè½¦è½½çš„å¤šç›¸æœºè”åˆæ ‡å®š_ç‹ç‘.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E5%9F%BA%E4%BA%8E%E9%B1%BC%E7%9C%BC%E6%91%84%E5%83%8F%E5%A4%B4%E7%9A%84%E6%B1%BD%E8%BD%A6%E7%8E%AF%E8%A7%86%E6%8A%80%E6%9C%AF%E7%A0%94%E7%A9%B6_%E6%A0%BE%E5%A9%A7.caj">åŸºäºé±¼çœ¼æ‘„åƒå¤´çš„æ±½è½¦ç¯è§†æŠ€æœ¯ç ”ç©¶_æ ¾å©§.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E5%A4%9A%E7%BC%96%E7%BB%84%E5%8F%98%E8%A7%92%E5%BA%A6%E8%BD%A6%E8%BE%86%E5%85%A8%E6%99%AF%E7%8E%AF%E8%A7%86%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%A0%94%E7%A9%B6_%E6%B1%9F%E5%BF%97%E5%9B%BD.caj">å¤šç¼–ç»„å˜è§’åº¦è½¦è¾†å…¨æ™¯ç¯è§†ç³»ç»Ÿçš„ç ”ç©¶_æ±Ÿå¿—å›½.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%BD%A6%E8%BD%BD%E5%85%A8%E6%99%AF%E7%8E%AF%E8%A7%86%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%9B%BE%E5%83%8F%E6%8B%BC%E6%8E%A5%E6%8A%80%E6%9C%AF%E7%A0%94%E7%A9%B6_%E4%BD%95%E6%83%A0%E6%B4%8B.caj">è½¦è½½å…¨æ™¯ç¯è§†ç³»ç»Ÿä¸­çš„å›¾åƒæ‹¼æ¥æŠ€æœ¯ç ”ç©¶_ä½•æƒ æ´‹.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%BD%A6%E8%BD%BD%E5%85%A8%E6%99%AF%E8%A7%86%E8%A7%89%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A%E6%96%B9%E6%B3%95%E7%9A%84%E7%A0%94%E7%A9%B6_%E8%83%A1%E8%AF%97%E5%8D%89.caj">è½¦è½½å…¨æ™¯è§†è§‰ç³»ç»Ÿä¸­ç›¸æœºæ ‡å®šæ–¹æ³•çš„ç ”ç©¶_èƒ¡è¯—å‰.caj</a></p></li></ul><h2 id="è°ƒç ”åˆ†æ"><a href="#è°ƒç ”åˆ†æ" class="headerlink" title="è°ƒç ”åˆ†æ"></a>è°ƒç ”åˆ†æ</h2><h3 id="è°ƒç ”æ–‡ç« "><a href="#è°ƒç ”æ–‡ç« " class="headerlink" title="è°ƒç ”æ–‡ç« "></a>è°ƒç ”æ–‡ç« </h3><ul><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/2009_A_novel_approach_for_the_online_initial_calibration_of_extrinsic_parameters_for_a_car-mounted_camera.pdf">2009_A_novel_approach_for_the_online_initial_calibration_of_extrinsic_parameters_for_a_car-mounted_camera.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/2012_Automatic_camera_calibration_for_driver_assistance_systems.pdf">2012_Automatic_camera_calibration_for_driver_assistance_systems.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/2014_Automatic_on-the-fly_extrinsic_camera_calibration_of_onboard_vehicular_cameras.pdf">2014_Automatic_on-the-fly_extrinsic_camera_calibration_of_onboard_vehicular_cameras.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/2020_Carcorder_Camera_Calibration_method_of_external_parameters_based_on_lane_line.pdf">2020_Carcorder_Camera_Calibration_method_of_external_parameters_based_on_lane_line.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/2020_Online_Extrinsic_Camera_Calibration_for_Temporally_Consistent_IPM_Using_Lane_Boundary_Observations_with_a_Lane_Width_Prior.pdf">2020_Online_Extrinsic_Camera_Calibration_for_Temporally_Consistent_IPM_Using_Lane_Boundary_Observations_with_a_Lane_Width_Prior.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/3D_Surround_View_for_Advanced_Driver_Assistance_Systems.pdf">3D_Surround_View_for_Advanced_Driver_Assistance_Systems.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/A_Calibration_Method_for_the_Surround-View_Parking_Assistant_System_2020.pdf">A_Calibration_Method_for_the_Surround-View_Parking_Assistant_System_2020.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/A_Novel_AVM_Calibration_Method_Using_Unaligned_SquareCalibration_Boards.pdf">A_Novel_AVM_Calibration_Method_Using_Unaligned_SquareCalibration_Boards.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/A_flexible_vehicle_surround_view_camera_system_by_central-around_coordinate_mapping_model.pdf">A_flexible_vehicle_surround_view_camera_system_by_central-around_coordinate_mapping_model.pdf</a></p></li><li><p><a href="A_memory-efficient_architecture_of_full_HD_around_view_monitor_systems.pdf">A_memory-efficient_architecture_of_full_HD_around_view_monitor_systems.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/A_novel_approach_for_the_online_initial_calibration_of_extrinsic_parameters_for_a_carcarmounted.pdf">A_novel_approach_for_the_online_initial_calibration_of_extrinsic_parameters_for_a_carcarmounted.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/A_novel_method_for_camera_external_parameters_online_calibration_using_dotted_road_line.pdf">A_novel_method_for_camera_external_parameters_online_calibration_using_dotted_road_line.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/A_surround_view_camera_solution_for_embedded_systems__2014.pdf">A_surround_view_camera_solution_for_embedded_systems__2014.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/An_Automatic_Calibration_Method_for_AVM_Cameras_2020.pdf">An_Automatic_Calibration_Method_for_AVM_Cameras_2020.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/Auto-calibration_around-view_monitoring_system.pdf">Auto-calibration_around-view_monitoring_system.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/Automatic_Calibration_of_an_Around_View_Monitor_System_Exploiting_Lane_Markings.pdf">Automatic_Calibration_of_an_Around_View_Monitor_System_Exploiting_Lane_Markings.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/Automatic_Extrinsic_Calibration_Methods_for_Surround_View_Systems.pdf">Automatic_Extrinsic_Calibration_Methods_for_Surround_View_Systems.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/Bird%E2%80%99s-Eye_View_Vision_System_for_Vehicle_Surrounding_Monitoring.pdf">Birdâ€™s-Eye_View_Vision_System_for_Vehicle_Surrounding_Monitoring.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/Effective_Photometric_Alignment_for_Surround_View_Monitoring_System.pdf">Effective_Photometric_Alignment_for_Surround_View_Monitoring_System.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/Embedded_system_implementation_for_vehicle_around_view_monitoring.pdf">Embedded_system_implementation_for_vehicle_around_view_monitoring.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/Fast_Approximate_Energy_Minimization_via_Graph_Cuts.pdf">Fast_Approximate_Energy_Minimization_via_Graph_Cuts.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/Graphcut_textures_mage_and_video_synthesis_using.pdf">Graphcut_textures_mage_and_video_synthesis_using.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/Minimal_Solvers_for_Single-View_Lens-Distorted_Camera_Auto-Calibration.pdf">Minimal_Solvers_for_Single-View_Lens-Distorted_Camera_Auto-Calibration.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/Oecs_towards_online_extrinsics_correction_for_the_surround-view_system.pdf">Oecs_towards_online_extrinsics_correction_for_the_surround-view_system.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/Online_calibration_of_exterior_orientations_of_a_vehicle-mounted_surround-view_camera_system.pdf">Online_calibration_of_exterior_orientations_of_a_vehicle-mounted_surround-view_camera_system.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/Online_extrinsic_parameters_calibration_for_stereovision_systems_used_in_far-range_detection_vehicle_applications.pdf">Online_extrinsic_parameters_calibration_for_stereovision_systems_used_in_far-range_detection_vehicle_applications.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/PHOTOMETRIC_ALIGNMENT_FOR_SURROUND_VIEW_CAMERA_SYSTEM.pdf">PHOTOMETRIC_ALIGNMENT_FOR_SURROUND_VIEW_CAMERA_SYSTEM.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/Panoramic_video_stitching_of_dual_cameras_based_on_spatio-temporal_seam_optimization.pdf">Panoramic_video_stitching_of_dual_cameras_based_on_spatio-temporal_seam_optimization.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/Pedestrian-Aware_Panoramic_Video_Stitching_Based_on_a_Structured_Camera_Array.pdf">Pedestrian-Aware_Panoramic_Video_Stitching_Based_on_a_Structured_Camera_Array.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/REVISIT_SURROUND-VIEW_CAMERA_SYSTEM_CALIBRATION.pdf">REVISIT_SURROUND-VIEW_CAMERA_SYSTEM_CALIBRATION.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/ROECS_A_Robust_Semi-direct_Pipeline_Towards_Online_Extrinsics_Correction_of_the_Surround-view_System.pdf">ROECS_A_Robust_Semi-direct_Pipeline_Towards_Online_Extrinsics_Correction_of_the_Surround-view_System.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/Ring_fusion_of_fisheye_images_based_on_corner_detection_algorithm_for_around_view.pdf">Ring_fusion_of_fisheye_images_based_on_corner_detection_algorithm_for_around_view.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/Robust_Accurate_Extrinsic_Calibration_of_Static_Non-overlapping_Cameras.pdf">Robust_Accurate_Extrinsic_Calibration_of_Static_Non-overlapping_Cameras.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/SEAMLESS_3D_SURROUND_VIEW_WITH_A_NOVEL_BURGER_MODEL.pdf">SEAMLESS_3D_SURROUND_VIEW_WITH_A_NOVEL_BURGER_MODEL.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/online_camera_pose_optimization_for_the_surround-view_system.pdf">online_camera_pose_optimization_for_the_surround-view_system.pdf</a></p></li></ul><h3 id="å…¶å®ƒæ–‡ç« "><a href="#å…¶å®ƒæ–‡ç« " class="headerlink" title="å…¶å®ƒæ–‡ç« "></a>å…¶å®ƒæ–‡ç« </h3><ul><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/360_%E6%B3%8A%E8%BD%A6%E8%BE%85%E5%8A%A9%E7%B3%BB%E7%BB%9F%E5%85%A8%E6%99%AF%E6%88%90%E5%83%8F%E7%9A%84%E7%A0%94%E7%A9%B6_%E6%B1%9F%E9%BE%99.caj">360_æ³Šè½¦è¾…åŠ©ç³»ç»Ÿå…¨æ™¯æˆåƒçš„ç ”ç©¶_æ±Ÿé¾™.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/360_%E8%BD%A6%E8%BD%BD%E7%8E%AF%E8%A7%86%E7%B3%BB%E7%BB%9F%E5%9B%BE%E5%83%8F%E6%8B%BC%E6%8E%A5%E6%8A%80%E6%9C%AF%E7%A0%94%E7%A9%B6_%E5%86%AF%E8%81%AA.caj">360_è½¦è½½ç¯è§†ç³»ç»Ÿå›¾åƒæ‹¼æ¥æŠ€æœ¯ç ”ç©¶_å†¯èª.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/Vision-based_Parking-slot_Detection_A_DCNN-based_Approach_and_A_Large-scale_Benchmark_Dataset.pdf">Vision-based_Parking-slot_Detection_A_DCNN-based_Approach_and_A_Large-scale_Benchmark_Dataset.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/Wide-scoped_Surrounding_Top-view_Monitor_for_Advanced_Driver_Assistance_Systems.pdf">Wide-scoped_Surrounding_Top-view_Monitor_for_Advanced_Driver_Assistance_Systems.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/%E4%B8%89%E7%BB%B4%E5%8F%AF%E5%8F%98%E8%A7%86%E8%A7%92%E5%91%A8%E7%95%8C%E7%8E%AF%E8%A7%86%E7%B3%BB%E7%BB%9F%E7%AE%97%E6%B3%95%E7%A0%94%E7%A9%B6%E5%92%8C%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%AE%9E%E7%8E%B0_%E9%9F%A6%E6%B7%BB%E5%85%83.caj">ä¸‰ç»´å¯å˜è§†è§’å‘¨ç•Œç¯è§†ç³»ç»Ÿç®—æ³•ç ”ç©¶å’ŒåµŒå…¥å¼å®ç°_éŸ¦æ·»å…ƒ.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/%E5%85%A8%E6%99%AF%E8%A7%86%E5%9B%BE%E6%B3%8A%E8%BD%A6%E8%BE%85%E5%8A%A9%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%A4%9A%E8%A7%86%E7%82%B9%E8%A7%86%E9%A2%91%E6%8B%BC%E6%8E%A5_2016_%E9%99%88%E6%B5%A9.caj">å…¨æ™¯è§†å›¾æ³Šè½¦è¾…åŠ©ç³»ç»Ÿä¸­çš„å¤šè§†ç‚¹è§†é¢‘æ‹¼æ¥_2016_é™ˆæµ©.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/%E5%8A%A0%E6%9D%83%E8%9E%8D%E5%90%88__%E8%88%B9%E8%88%B6%E6%A8%A1%E5%9E%8B__3D_Surround_View_for_Advanced_Driver_Assistance_Systems__2017.pdf">åŠ æƒèåˆ__èˆ¹èˆ¶æ¨¡å‹__3D_Surround_View_for_Advanced_Driver_Assistance_Systems__2017.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/%E5%9C%86%E5%BD%A2%E6%A3%80%E6%B5%8B__Automatic_circle_pattern_extraction_and_camera_calibration_using_fast_adaptive_binarization_and_plane_homography.pdf">åœ†å½¢æ£€æµ‹__Automatic_circle_pattern_extraction_and_camera_calibration_using_fast_adaptive_binarization_and_plane_homography.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/%E5%9F%BA%E4%BA%8E%E5%A4%9A%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A%E7%9A%84%E5%85%A8%E6%99%AF%E5%90%88%E6%88%90%E6%96%B9%E6%B3%95%E7%A0%94%E7%A9%B6.caj">åŸºäºå¤šç›¸æœºæ ‡å®šçš„å…¨æ™¯åˆæˆæ–¹æ³•ç ”ç©¶.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/%E5%9F%BA%E4%BA%8E%E5%B8%A7%E5%BA%8F%E5%88%97%E7%9A%84%E7%A8%80%E7%96%8F%E7%89%B9%E5%BE%81%E5%8C%B9%E9%85%8D_Online_continuous_stereo_extrinsic_parameter_estimation.pdf">åŸºäºå¸§åºåˆ—çš„ç¨€ç–ç‰¹å¾åŒ¹é…_Online_continuous_stereo_extrinsic_parameter_estimation.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/%E5%9F%BA%E4%BA%8E%E7%89%B9%E5%BE%81%E5%8C%B9%E9%85%8D_Photometric_and_geometric_rectification_for_stereoscopic_images.pdf">åŸºäºç‰¹å¾åŒ¹é…_Photometric_and_geometric_rectification_for_stereoscopic_images.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/%E5%9F%BA%E4%BA%8E%E7%9B%B8%E9%82%BB%E6%91%84%E5%83%8F%E5%A4%B4%E7%9A%84%E7%89%B9%E5%BE%81%E5%8C%B9%E9%85%8D_2019_High-Precision_Online_Markerless_Stereo_Extrinsic_Calibration.pdf">åŸºäºç›¸é‚»æ‘„åƒå¤´çš„ç‰¹å¾åŒ¹é…_2019_High-Precision_Online_Markerless_Stereo_Extrinsic_Calibration.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/%E5%9F%BA%E4%BA%8E%E8%BD%A6%E8%BD%BD%E7%9A%84%E5%A4%9A%E7%9B%B8%E6%9C%BA%E8%81%94%E5%90%88%E6%A0%87%E5%AE%9A_%E7%8E%8B%E7%91%9E.caj">åŸºäºè½¦è½½çš„å¤šç›¸æœºè”åˆæ ‡å®š_ç‹ç‘.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/%E5%9F%BA%E4%BA%8E%E9%B1%BC%E7%9C%BC%E6%91%84%E5%83%8F%E5%A4%B4%E7%9A%84%E6%B1%BD%E8%BD%A6%E7%8E%AF%E8%A7%86%E6%8A%80%E6%9C%AF%E7%A0%94%E7%A9%B6_%E6%A0%BE%E5%A9%A7.caj">åŸºäºé±¼çœ¼æ‘„åƒå¤´çš„æ±½è½¦ç¯è§†æŠ€æœ¯ç ”ç©¶_æ ¾å©§.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/%E5%A4%9A%E7%BC%96%E7%BB%84%E5%8F%98%E8%A7%92%E5%BA%A6%E8%BD%A6%E8%BE%86%E5%85%A8%E6%99%AF%E7%8E%AF%E8%A7%86%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%A0%94%E7%A9%B6_%E6%B1%9F%E5%BF%97%E5%9B%BD.caj">å¤šç¼–ç»„å˜è§’åº¦è½¦è¾†å…¨æ™¯ç¯è§†ç³»ç»Ÿçš„ç ”ç©¶_æ±Ÿå¿—å›½.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/%E5%BC%80%E6%BA%90__Matlab%E5%B7%A5%E5%85%B7%E7%AE%B1%E8%BF%9B%E8%A1%8C%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A__A_toolbox_for_easily_calibrating_omnidirectional_cameras.pdf">å¼€æº__Matlabå·¥å…·ç®±è¿›è¡Œç›¸æœºæ ‡å®š__A_toolbox_for_easily_calibrating_omnidirectional_cameras.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/%E6%8B%BC%E7%BC%9D%E4%BA%AE%E5%BA%A6%E5%B7%AE%E5%BC%82%E4%BC%98%E5%8C%96__2014_Photometric_alignment_for_surround_view_camera_system.pdf">æ‹¼ç¼äº®åº¦å·®å¼‚ä¼˜åŒ–__2014_Photometric_alignment_for_surround_view_camera_system.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/%E7%89%B9%E5%BE%81%E5%8C%B9%E9%85%8D_Camodocal_Automatic_intrinsic_and_extrinsic_calibration_of_a_rig.pdf">ç‰¹å¾åŒ¹é…_Camodocal_Automatic_intrinsic_and_extrinsic_calibration_of_a_rig.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/%E8%87%AA%E9%80%82%E5%BA%94%E6%8B%BC%E6%8E%A5%E7%9F%AB%E6%AD%A3_2006_Digital_photograph_stitching_with_optimized_matching_of_gradient_and_curvature.pdf">è‡ªé€‚åº”æ‹¼æ¥çŸ«æ­£_2006_Digital_photograph_stitching_with_optimized_matching_of_gradient_and_curvature.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/%E8%87%AA%E9%80%82%E5%BA%94%E6%B5%8B%E5%85%89%E7%9F%AB%E6%AD%A3_Eliminating_ghosting_and_exposure_artifacts_in_image_mosaics.pdf">è‡ªé€‚åº”æµ‹å…‰çŸ«æ­£_Eliminating_ghosting_and_exposure_artifacts_in_image_mosaics.pdf</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/%E8%BD%A6%E8%BD%BD%E5%85%A8%E6%99%AF%E7%8E%AF%E8%A7%86%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%9B%BE%E5%83%8F%E6%8B%BC%E6%8E%A5%E6%8A%80%E6%9C%AF%E7%A0%94%E7%A9%B6_%E4%BD%95%E6%83%A0%E6%B4%8B.caj">è½¦è½½å…¨æ™¯ç¯è§†ç³»ç»Ÿä¸­çš„å›¾åƒæ‹¼æ¥æŠ€æœ¯ç ”ç©¶_ä½•æƒ æ´‹.caj</a></p></li><li><p><a href="https://github.com/geiyiren/MyBlogPaper1/blob/main/AVM/%E5%9F%BA%E7%A1%80%E8%AE%BA%E6%96%87/%E8%B0%83%E7%A0%94%E5%88%86%E6%9E%90/%E8%B0%83%E7%A0%94%E6%96%87%E7%AB%A0/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/%E8%BD%A6%E8%BD%BD%E5%85%A8%E6%99%AF%E8%A7%86%E8%A7%89%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9B%B8%E6%9C%BA%E6%A0%87%E5%AE%9A%E6%96%B9%E6%B3%95%E7%9A%84%E7%A0%94%E7%A9%B6_%E8%83%A1%E8%AF%97%E5%8D%89.caj">è½¦è½½å…¨æ™¯è§†è§‰ç³»ç»Ÿä¸­ç›¸æœºæ ‡å®šæ–¹æ³•çš„ç ”ç©¶_èƒ¡è¯—å‰.caj</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> è®ºæ–‡ä¸ä¸“åˆ© </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®ºæ–‡ä¸ä¸“åˆ© </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdownä½¿ç”¨è§„èŒƒ</title>
      <link href="/2023/10/08/markdown-shi-yong-gui-fan/"/>
      <url>/2023/10/08/markdown-shi-yong-gui-fan/</url>
      
        <content type="html"><![CDATA[<p><a href="http://masikkk.com/article/MathJax/">mathjaxä½¿ç”¨æ–¹æ³•</a></p><h2 id="Markdownå…¬å¼æ•´ç†"><a href="#Markdownå…¬å¼æ•´ç†" class="headerlink" title="Markdownå…¬å¼æ•´ç†"></a><a href="#Markdown%E5%85%AC%E5%BC%8F%E6%95%B4%E7%90%86" title="Markdownå…¬å¼æ•´ç†"></a>Markdownå…¬å¼æ•´ç†</h2><p>Markdownæ”¯æŒLatexçš„æ•°å­¦å…¬å¼ç®€ç›´æ˜¯å¤ªæ£’äº†. ä½†æ˜¯ç›®å‰çš„<code>Mathtype3</code>ä»ç„¶æ²¡æœ‰è¿ç§»æ‰€æœ‰çš„LatexæŒ‡ä»¤è¿‡æ¥, åªæ˜¯æ”¯æŒå…¶ä¸­çš„ä¸€éƒ¨åˆ†, å¤§å¤šæ•°ä¸æ”¯æŒçš„æŒ‡ä»¤å…¶å®éƒ½æ˜¯æ¯”è¾ƒå†·é—¨çš„, ä½œç”¨ä¸æ˜¯å¾ˆå¤§. æ„Ÿè°¢<a href="https://www.zybuluo.com/codeep/note/163962">Cmd Markdown å…¬å¼æŒ‡å¯¼æ‰‹å†Œ</a>å’Œ<a href="https://www.cnblogs.com/1024th/p/11623258.html">LaTeXå…¬å¼æ‰‹å†Œ</a>, æ•´ç†æ—¶å‚è€ƒäº†å®ƒä»¬. å¦‚æœä½ ä¸æƒ³æ‰‹æ•²å…¬å¼, æƒ³ç›´æ¥è¿›è¡Œç”¨å›¾ç‰‡è¿›è¡Œè¯†åˆ«, å¯ä»¥ä¸Š<a href="https://www.latexlive.com/">å¦ˆå’ªå”çš„ç½‘ç«™</a>æˆ–è€…ä½¿ç”¨<code>Mathpix</code>ç›´æ¥å¯¹å…¬å¼è¿›è¡Œè¯†åˆ«, å®ƒç”šè‡³èƒ½å¤Ÿè¯†åˆ«ä¸­æ–‡, åœ¨å†™è®ºæ–‡å’ŒæŠ¥å‘Šæ—¶å¦‚æœæœ‰å…¬å¼ä¾æ®, å¦ˆå’ªå”çš„ç½‘ç«™ä¼šéå¸¸å¥½ç”¨.</p><h2 id="å…¬å¼ä½¿ç”¨åŸºç¡€"><a href="#å…¬å¼ä½¿ç”¨åŸºç¡€" class="headerlink" title="å…¬å¼ä½¿ç”¨åŸºç¡€"></a><a href="#%E5%85%AC%E5%BC%8F%E4%BD%BF%E7%94%A8%E5%9F%BA%E7%A1%80" title="å…¬å¼ä½¿ç”¨åŸºç¡€"></a>å…¬å¼ä½¿ç”¨åŸºç¡€</h2><h3 id="æ’å…¥å…¬å¼"><a href="#æ’å…¥å…¬å¼" class="headerlink" title="æ’å…¥å…¬å¼"></a><a href="#%E6%8F%92%E5%85%A5%E5%85%AC%E5%BC%8F" title="æ’å…¥å…¬å¼"></a>æ’å…¥å…¬å¼</h3><p>$\LaTeX$ çš„æ•°å­¦å…¬å¼åˆ†ä¸ºä¸¤ç§, åˆ†åˆ«æ˜¯è¡Œå†…å…¬å¼å’Œç‹¬ç«‹å…¬å¼.</p><p>è¡Œå†…å…¬å¼å¯ä»¥è¿™æ ·ä½¿ç”¨:</p><p><code>$ å…¬å¼å†…å®¹ $</code></p><p>è¡Œå†…å…¬å¼æ˜¯åµŒå…¥åœ¨ä¸€è¡Œæ–‡å­—ä¸­çš„å…¬å¼, ä¾‹å¦‚:</p><p><code>$ J_\alpha(x) = \sum_&#123;m=0&#125;^\infty \frac&#123;(-1)^m&#125;&#123;m! \Gamma (m + \alpha + 1)&#125; &#123;\left(&#123; \frac&#123;x&#125;&#123;2&#125; &#125;\right)&#125;^&#123;2m + \alpha&#125; \text &#123;ï¼Œè¡Œå†…å…¬å¼ç¤ºä¾‹&#125; $</code></p><p>$ J_\alpha(x) &#x3D; \sum_{m&#x3D;0}^\infty \frac{(-1)^m}{m! \Gamma (m + \alpha + 1)} {\left({ \frac{x}{2} }\right)}^{2m + \alpha} \text {ï¼Œè¡Œå†…å…¬å¼ç¤ºä¾‹} $</p><p>ç‹¬ç«‹å…¬å¼å¯ä»¥è¿™æ ·ä½¿ç”¨:</p><p><code>$$ å…¬å¼å†…å®¹ $$</code></p><p>ç‹¬ç«‹å…¬å¼å¯ä»¥å†™å¤šè¡Œè¿ç»­çš„å†…å®¹, é€‚åˆå†™ä¸€æ®µå…¬å¼. ä¾‹å¦‚:</p><p><code>$$ J_\alpha(x) = \sum_&#123;m=0&#125;^\infty \frac&#123;(-1)^m&#125;&#123;m! \Gamma (m + \alpha + 1)&#125; &#123;\left(&#123; \frac&#123;x&#125;&#123;2&#125; &#125;\right)&#125;^&#123;2m + \alpha&#125; \text &#123;ï¼Œç‹¬ç«‹å…¬å¼ç¤ºä¾‹&#125; $$</code><br>$$<br>J_\alpha(x) &#x3D; \sum_{m&#x3D;0}^\infty \frac{(-1)^m}{m! \Gamma (m + \alpha + 1)} {\left({ \frac{x}{2} }\right)}^{2m + \alpha} \text {ï¼Œç‹¬ç«‹å…¬å¼ç¤ºä¾‹}<br>$$</p><h3 id="ä¸Šä¸‹æ ‡"><a href="#ä¸Šä¸‹æ ‡" class="headerlink" title="ä¸Šä¸‹æ ‡"></a><a href="#%E4%B8%8A%E4%B8%8B%E6%A0%87" title="ä¸Šä¸‹æ ‡"></a>ä¸Šä¸‹æ ‡</h3><p><code>^</code> è¡¨ç¤ºä¸Šæ ‡, <code>_</code> è¡¨ç¤ºä¸‹æ ‡. å¦‚æœä¸Šä¸‹æ ‡çš„å†…å®¹å¤šäºä¸€ä¸ªå­—ç¬¦, éœ€è¦ç”¨ <code>&#123;&#125;</code> å°†è¿™äº›å†…å®¹æ‹¬æˆä¸€ä¸ªæ•´ä½“. ä¸Šä¸‹æ ‡å¯ä»¥åµŒå¥—, ä¹Ÿå¯ä»¥åŒæ—¶ä½¿ç”¨.</p><p>ä¾‹å¦‚:</p><p><code>$$ x^&#123;y^z&#125;=(1+&#123;\rm e&#125;^x)^&#123;-2xy^w&#125; $$</code></p><p>æ˜¾ç¤º:<br>$$<br>x^{y^z}&#x3D;(1+{\rm e}^x)^{-2xy^w}<br>$$<br>å¦‚æœæƒ³åœ¨å·¦å³ä¸¤è¾¹éƒ½åŠ ä¸Šä¸Šä¸‹æ ‡, å¯ä»¥ä½¿ç”¨<code>\sideset</code>å‘½ä»¤:</p><p><code>$$ \sideset&#123;^1_2&#125;&#123;^3_4&#125;\bigotimes $$</code></p><p>æ˜¾ç¤º:<br>$$<br>\sideset{^1_2}{^3_4}\bigotimes<br>$$</p><p>æˆ–è€…:</p><p><code>$$&#123;&#125;_1^2\!X_3^4$$</code><br>$$<br>{}_1^2X_3^4<br>$$</p><h3 id="æ‹¬å·å’Œåˆ†éš”ç¬¦"><a href="#æ‹¬å·å’Œåˆ†éš”ç¬¦" class="headerlink" title="æ‹¬å·å’Œåˆ†éš”ç¬¦"></a><a href="#%E6%8B%AC%E5%8F%B7%E5%92%8C%E5%88%86%E9%9A%94%E7%AC%A6" title="æ‹¬å·å’Œåˆ†éš”ç¬¦"></a>æ‹¬å·å’Œåˆ†éš”ç¬¦</h3><p><code>()</code>, <code>[]</code> å’Œ <code>|</code> è¡¨ç¤ºç¬¦å·æœ¬èº«, ä½¿ç”¨ <code>\&#123;\&#125;</code> æ¥è¡¨ç¤º <code>&#123;&#125;</code> . å½“è¦æ˜¾ç¤ºå¤§å·çš„æ‹¬å·æˆ–åˆ†éš”ç¬¦æ—¶,è¦ç”¨ <code>\left</code> å’Œ <code>\right</code> .</p><p>ä¾‹å¦‚:</p><p><code>$$ f(x,y,z) = 3y^2z \left( 3+\frac&#123;7x+5&#125;&#123;1+y^2&#125; \right) $$</code><br>$$<br>f(x,y,z) &#x3D; 3y^2z \left( 3+\frac{7x+5}{1+y^2} \right)<br>$$<br><code>\left.</code> æˆ– <code>\right.</code> èƒ½å¤Ÿè¿›è¡ŒåŒ¹é…è€Œä¸æ˜¾ç¤ºæœ¬èº«, ä¾‹å¦‚:</p><p><code>$$ \left. \frac&#123; &#123;\rm d&#125;u&#125;&#123; &#123;\rm d&#125;x&#125; \right| _&#123;x=0&#125; $$</code><br>$$<br>\left. \frac{ {\rm d}u}{ {\rm d}x} \right| _{x&#x3D;0}<br>$$<br><code>$$\left. \frac&#123;a&#125;&#123;b&#125; \right \&#125;$$</code><br>$$<br>\left. \frac{a}{b} \right \}<br>$$<br>ä¸‹é¢æœ‰äº›ç‰¹æ®Šçš„æ‹¬å·:</p><table><thead><tr><th>æ˜¾ç¤º</th><th>è¾“å…¥</th><th>æ˜¾ç¤º</th><th>è¾“å…¥</th></tr></thead><tbody><tr><td>$\langle$</td><td><code>\langle</code></td><td>$\rangle$</td><td><code>\rangle</code></td></tr><tr><td>$\lceil$</td><td><code>\lceil</code></td><td>$\rceil$</td><td><code>\rceil</code></td></tr><tr><td>$\lfloor$</td><td><code>\lfloor</code></td><td>$\rfloor$</td><td><code>\rfloor</code></td></tr><tr><td>$\lbrace$</td><td><code>\lbrace</code></td><td>$\rbrace$</td><td><code>\rbrace</code></td></tr><tr><td>$\lVert$</td><td><code>\lVert</code></td><td>$\rVert$</td><td><code>\rVert</code></td></tr></tbody></table><p>å¯ä»¥ä½¿ç”¨ <code>\big, \Big, \bigg, \Bigg</code> æ§åˆ¶æ‹¬å·çš„å¤§å°, ä¾‹å¦‚:</p><p><code>$$\Bigg ( \bigg [ \Big \&#123; \big \langle \left | \| \frac&#123;a&#125;&#123;b&#125; \| \right | \big \rangle \Big \&#125; \bigg ] \Bigg )$$</code></p><p>æ˜¾ç¤º:<br>$$<br>\Bigg ( \bigg [ \Big \{ \big \langle \left | | \frac{a}{b} | \right | \big \rangle \Big \} \bigg ] \Bigg )<br>$$</p><h3 id="åˆ†æ•°"><a href="#åˆ†æ•°" class="headerlink" title="åˆ†æ•°"></a><a href="#%E5%88%86%E6%95%B0" title="åˆ†æ•°"></a>åˆ†æ•°</h3><p>é€šå¸¸ä½¿ç”¨ <code>\frac &#123;åˆ†å­&#125; &#123;åˆ†æ¯&#125;</code> å‘½ä»¤äº§ç”Ÿä¸€ä¸ªåˆ†æ•°ï¼Œåˆ†æ•°å¯åµŒå¥—ã€‚<br>ä¾¿æ·æƒ…å†µå¯ç›´æ¥è¾“å…¥ <code>\frac ab</code> æ¥å¿«é€Ÿç”Ÿæˆä¸€ä¸ª ã€‚<br>å¦‚æœåˆ†å¼å¾ˆå¤æ‚ï¼Œäº¦å¯ä½¿ç”¨ <code>åˆ†å­ \over åˆ†æ¯</code> å‘½ä»¤ï¼Œæ­¤æ—¶åˆ†æ•°ä»…æœ‰ä¸€å±‚ã€‚</p><p>ä¾‹å¦‚:</p><p><code>$$\frac&#123;a-1&#125;&#123;b-1&#125; \quad and \quad &#123;a+1\over b+1&#125;$$</code></p><p>æ˜¾ç¤º:<br>$$<br>\frac{a-1}{b-1} \quad and \quad {a+1\over b+1}<br>$$</p><p>ä¹Ÿå¯ä»¥æ§åˆ¶åˆ†æ•°çš„å¤§å°, å¦‚<code>$$\tfrac&#123;2&#125;&#123;4&#125; = 0.5$$</code>æ˜¯å°å‹åˆ†æ•°:<br>$$<br>\tfrac{2}{4} &#x3D; 0.5<br>$$<br>åŒç†, <code>\cfrac</code>(è¿åˆ†æ•°ä½¿ç”¨)å’Œ<code>\dfrac</code>éƒ½è¡¨ç¤ºå¤§å‹åˆ†æ•°.</p><h3 id="å¼€æ ¹å·"><a href="#å¼€æ ¹å·" class="headerlink" title="å¼€æ ¹å·"></a><a href="#%E5%BC%80%E6%A0%B9%E5%8F%B7" title="å¼€æ ¹å·"></a>å¼€æ ¹å·</h3><p>ä½¿ç”¨ <code>\sqrt [æ ¹æŒ‡æ•°ï¼Œçœç•¥æ—¶ä¸º2] &#123;è¢«å¼€æ–¹æ•°&#125;</code> å‘½ä»¤è¾“å…¥å¼€æ ¹å·. ä¾‹å¦‚:</p><p><code>$$\surd, \sqrt&#123;2&#125;, \sqrt[n]&#123;&#125;, \sqrt[3]&#123;\frac&#123;x^3+y^3&#125;&#123;2&#125;&#125;$$</code>  </p><h3 id="å‘é‡"><a href="#å‘é‡" class="headerlink" title="å‘é‡"></a><a href="#%E5%90%91%E9%87%8F" title="å‘é‡"></a>å‘é‡</h3><p>ä½¿ç”¨ <code>\vec&#123;å‘é‡&#125;</code> æ¥è‡ªåŠ¨äº§ç”Ÿä¸€ä¸ªå‘é‡. ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>\overrightarrow</code> ç­‰å‘½ä»¤è‡ªå®šä¹‰å­—æ¯ä¸Šæ–¹çš„ç¬¦å·. ä¾‹å¦‚:</p><p><code>$$\vec&#123;a&#125; \cdot \vec&#123;b&#125;=0$$</code><br>$$<br>\vec{a} \cdot \vec{b}&#x3D;0<br>$$<br><code>$$\overleftarrow&#123;xy&#125; \quad and \quad \overleftrightarrow&#123;xy&#125; \quad and \quad \overrightarrow&#123;xy&#125;$$</code><br>$$<br>\overleftarrow{xy} \quad and \quad \overleftrightarrow{xy} \quad and \quad \overrightarrow{xy}<br>$$</p><h3 id="å¯¼æ•°å’Œå¾®åˆ†"><a href="#å¯¼æ•°å’Œå¾®åˆ†" class="headerlink" title="å¯¼æ•°å’Œå¾®åˆ†"></a><a href="#%E5%AF%BC%E6%95%B0%E5%92%8C%E5%BE%AE%E5%88%86" title="å¯¼æ•°å’Œå¾®åˆ†"></a>å¯¼æ•°å’Œå¾®åˆ†</h3><p>å¸¸è§çš„å¾®åˆ†ç¬¦å·é€šè¿‡<code>\mathrm&#123;d&#125;&#123;ç¬¦å·&#125;</code>æ¥è¾“å…¥ä¸€ä¸ªå¸¸è§çš„å¾®åˆ†. å…¶ä¸­çš„<code>\mathrm</code>æ˜¯ä¸ºäº†ç¾è§‚æ‰åŠ ä¸Šçš„, ä¹Ÿå¯ä»¥ç›´æ¥è¾“å…¥<code>dç¬¦å·</code>. ä½¿ç”¨<code>\partial&#123;ç¬¦å·&#125;</code>æ¥è·å¾—ä¸€ä¸ªåå¯¼ç¬¦å·, <code>\nabla</code>ç”Ÿæˆä¸€ä¸ªæ¢¯åº¦ç¬¦å·.</p><p><code>$$dt, \mathrm&#123;d&#125;t, \partial t, \nabla\psi$$</code><br>$$<br>dt, \mathrm{d}t, \partial t, \nabla\psi<br>$$<br><code>$$dy/dx, \mathrm&#123;d&#125;y/\mathrm&#123;d&#125;x, \frac&#123;dy&#125;&#123;dx&#125;, \frac&#123;\mathrm&#123;d&#125;y&#125;&#123;\mathrm&#123;d&#125;x&#125;, \frac&#123;\partial^2&#125;&#123;\partial x_1\partial x_2&#125;y$$</code><br>$$<br>dy&#x2F;dx, \mathrm{d}y&#x2F;\mathrm{d}x, \frac{dy}{dx}, \frac{\mathrm{d}y}{\mathrm{d}x}, \frac{\partial^2}{\partial x_1\partial x_2}y<br>$$<br><code>$$\prime, \backprime, f^\prime, f&#39;, f&#39;&#39;, f^&#123;(3)&#125;, \dot y, \ddot y$$</code><br>$$<br>\prime, \backprime, f^\prime, fâ€™, fâ€™â€™, f^{(3)}, \dot y, \ddot y<br>$$</p><h3 id="ç§¯åˆ†"><a href="#ç§¯åˆ†" class="headerlink" title="ç§¯åˆ†"></a><a href="#%E7%A7%AF%E5%88%86" title="ç§¯åˆ†"></a>ç§¯åˆ†</h3><p>ä½¿ç”¨ <code>\int_ç§¯åˆ†ä¸‹é™^ç§¯åˆ†ä¸Šé™ &#123;è¢«ç§¯è¡¨è¾¾å¼&#125;</code> æ¥è¾“å…¥ä¸€ä¸ªç§¯åˆ†. ä¾‹å¦‚:</p><p><code>$$\int_0^1 &#123;x^2&#125; \,&#123;\rm d&#125;x$$</code></p><p>æ˜¾ç¤º:<br>$$<br>\int_0^1 {x^2} \,{\rm d}x<br>$$<br><code>\,</code> å’Œ <code>&#123;\rm d&#125;</code> éƒ¨åˆ†å¯çœç•¥, åŠ å…¥èƒ½ä½¿å¼å­æ›´ç¾è§‚. <code>&#123;\rm d&#125;</code>å¯ä»¥ç”¨<code>\mathrm&#123;d&#125;</code>ç­‰ä»·æ›¿æ¢.</p><p><code>$$\iint_&#123;D&#125;^&#123;W&#125; \, \mathrm&#123;d&#125;x\,\mathrm&#123;d&#125;y$$</code><br>$$<br>\iint_{D}^{W} \, \mathrm{d}x\,\mathrm{d}y<br>$$<br><code>$$\iiint_&#123;E&#125;^&#123;V&#125; \, \mathrm&#123;d&#125;x\,\mathrm&#123;d&#125;y\,\mathrm&#123;d&#125;z$$</code><br>$$<br>\iiint_{E}^{V} \, \mathrm{d}x\,\mathrm{d}y\,\mathrm{d}z<br>$$<br><code>$$\oint_&#123;C&#125; x^3\, \mathrm&#123;d&#125;x + 4y^2\, \mathrm&#123;d&#125;y$$</code><br>$$<br>\oint_{C} x^3\, \mathrm{d}x + 4y^2\, \mathrm{d}y<br>$$</p><h3 id="æé™"><a href="#æé™" class="headerlink" title="æé™"></a><a href="#%E6%9E%81%E9%99%90" title="æé™"></a>æé™</h3><p>ä½¿ç”¨ <code>\lim_&#123;å˜é‡ \to è¡¨è¾¾å¼&#125; è¡¨è¾¾å¼</code> æ¥è¾“å…¥ä¸€ä¸ªæé™. å¦‚æœ‰å…¶ä»–éœ€æ±‚, å¯ä»¥æ›´æ”¹ <code>\to</code> ç¬¦å·è‡³ä»»æ„ç¬¦å·. ä¾‹å¦‚:</p><p><code>$$ \lim_&#123;n \to +\infty&#125; \frac&#123;1&#125;&#123;n(n+1)&#125; \quad and \quad \lim_&#123;x\leftarrow&#123;ç¤ºä¾‹&#125;&#125; \frac&#123;1&#125;&#123;n(n+1)&#125; $$</code></p><p>æ˜¾ç¤º:<br>$$<br>\lim_{n \to +\infty} \frac{1}{n(n+1)} \quad and \quad \lim_{x\leftarrow{ç¤ºä¾‹}} \frac{1}{n(n+1)}<br>$$<br>å¦‚æœåœ¨è¡Œå†…çš„è¯, æ˜¾ç¤ºä¼šå°†æé™æ”¾åˆ°ä¸‹æ ‡çš„ä½ç½®:</p><p>è¡Œå†…å…¬å¼ç¤ºä¾‹:</p><p><code>$\lim_&#123;x \to \infty&#125; \frac&#123;1&#125;&#123;n(n+1)&#125;$</code></p><p>$\lim_{x \to \infty} \frac{1}{n(n+1)}$</p><p>å¯ä»¥é€šè¿‡<code>\limits</code>å¼ºåˆ¶åŠ åˆ°ä¸‹æ–¹æˆ–ä¸Šæ–¹.</p><p><code>$\lim\limits_&#123;x \to \infty&#125; \frac&#123;1&#125;&#123;n(n+1)&#125;$</code></p><p>$\lim\limits_{x \to \infty} \frac{1}{n(n+1)}$</p><p>æˆ–è€…é€šè¿‡<code>\displaystyle</code>å¼ºåˆ¶è½¬ä¸ºç‹¬ç«‹å…¬å¼æ¨¡å¼:</p><p><code>$\displaystyle \lim_&#123;x \to \infty&#125; \frac&#123;1&#125;&#123;n(n+1)&#125;$</code></p><p>$\displaystyle \lim_{x \to \infty} \frac{1}{n(n+1)}$</p><h3 id="ç´¯åŠ å’Œç´¯ä¹˜"><a href="#ç´¯åŠ å’Œç´¯ä¹˜" class="headerlink" title="ç´¯åŠ å’Œç´¯ä¹˜"></a><a href="#%E7%B4%AF%E5%8A%A0%E5%92%8C%E7%B4%AF%E4%B9%98" title="ç´¯åŠ å’Œç´¯ä¹˜"></a>ç´¯åŠ å’Œç´¯ä¹˜</h3><p>ä½¿ç”¨ <code>\sum_&#123;ä¸‹æ ‡è¡¨è¾¾å¼&#125;^&#123;ä¸Šæ ‡è¡¨è¾¾å¼&#125; &#123;ç´¯åŠ è¡¨è¾¾å¼&#125;</code> æ¥è¾“å…¥ä¸€ä¸ªç´¯åŠ . ä¸ä¹‹ç±»ä¼¼, ä½¿ç”¨ <code>\prod</code> <code>\bigcup</code> <code>\bigcap</code> æ¥åˆ†åˆ«è¾“å…¥ç´¯ä¹˜ã€å¹¶é›†å’Œäº¤é›†. æ­¤ç±»ç¬¦å·åœ¨è¡Œå†…æ˜¾ç¤ºæ—¶ä¸Šä¸‹æ ‡è¡¨è¾¾å¼å°†ä¼šç§»è‡³å³ä¸Šè§’å’Œå³ä¸‹è§’.</p><p>ç‹¬ç«‹å…¬å¼ç¤ºä¾‹:</p><p><code>$$\sum_&#123;i=1&#125;^n \frac&#123;1&#125;&#123;i^2&#125; \quad and \quad \prod_&#123;i=1&#125;^n \frac&#123;1&#125;&#123;i^2&#125; \quad and \quad \bigcup_&#123;i=1&#125;^&#123;2&#125; R$$</code></p><p>æ˜¾ç¤º:<br>$$<br>\sum_{i&#x3D;1}^n \frac{1}{i^2} \quad and \quad \prod_{i&#x3D;1}^n \frac{1}{i^2} \quad and \quad \bigcup_{i&#x3D;1}^{2} R<br>$$</p><blockquote><p>å’Œæé™ä¸€æ ·, è¡Œå†…å¯ä»¥é€šè¿‡<code>\limts</code>å°†å†…å®¹å¼ºåˆ¶åŠ åˆ°ä¸Šæ–¹æˆ–ä¸‹æ–¹.</p></blockquote><h3 id="äºŒé¡¹å¼"><a href="#äºŒé¡¹å¼" class="headerlink" title="äºŒé¡¹å¼"></a><a href="#%E4%BA%8C%E9%A1%B9%E5%BC%8F" title="äºŒé¡¹å¼"></a>äºŒé¡¹å¼</h3><p>çœ‹ä¾‹å­å³å¯.</p><p>äºŒé¡¹å¼ç³»æ•°:</p><p><code>$$\dbinom&#123;n&#125;&#123;r&#125;=\binom&#123;n&#125;&#123;n-r&#125;=\mathrm&#123;C&#125;_n^r=\mathrm&#123;C&#125;_n^&#123;n-r&#125;$$</code><br>$$<br>\dbinom{n}{r}&#x3D;\binom{n}{n-r}&#x3D;\mathrm{C}_n^r&#x3D;\mathrm{C}_n^{n-r}<br>$$<br>å°äºŒé¡¹å¼ç³»æ•°:</p><p><code>$$\tbinom&#123;n&#125;&#123;r&#125;=\tbinom&#123;n&#125;&#123;n-r&#125;=\mathrm&#123;C&#125;_n^r=\mathrm&#123;C&#125;_n^&#123;n-r&#125;$$</code><br>$$<br>\tbinom{n}{r}&#x3D;\tbinom{n}{n-r}&#x3D;\mathrm{C}_n^r&#x3D;\mathrm{C}_n^{n-r}<br>$$<br>å¤§å‹äºŒé¡¹å¼ç³»æ•°:</p><p><code>$$\binom&#123;n&#125;&#123;r&#125;=\dbinom&#123;n&#125;&#123;n-r&#125;=\mathrm&#123;C&#125;_n^r=\mathrm&#123;C&#125;_n^&#123;n-r&#125;$$</code><br>$$<br>\binom{n}{r}&#x3D;\dbinom{n}{n-r}&#x3D;\mathrm{C}_n^r&#x3D;\mathrm{C}_n^{n-r}<br>$$</p><h3 id="è‡ªå®šä¹‰å‡½æ•°"><a href="#è‡ªå®šä¹‰å‡½æ•°" class="headerlink" title="è‡ªå®šä¹‰å‡½æ•°"></a><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0" title="è‡ªå®šä¹‰å‡½æ•°"></a>è‡ªå®šä¹‰å‡½æ•°</h3><p>ä½¿ç”¨<code>\operatorname&#123;å‡½æ•°å&#125;</code>å°±èƒ½å°†å…¶ä½œä¸ºè‡ªå®šä¹‰çš„å‡½æ•°è¿›è¡Œä½¿ç”¨, ä¾‹å¦‚:</p><p><code>$$\operatorname&#123;sh&#125;k, \operatorname&#123;ch&#125;l, \operatorname&#123;th&#125;m, \operatorname&#123;coth&#125;n$$</code></p><p>æ˜¾ç¤º:<br>$$<br>\operatorname{sh}k, \operatorname{ch}l, \operatorname{th}m, \operatorname{coth}n<br>$$</p><h3 id="æ¨¡è¿ç®—"><a href="#æ¨¡è¿ç®—" class="headerlink" title="æ¨¡è¿ç®—"></a><a href="#%E6%A8%A1%E8%BF%90%E7%AE%97" title="æ¨¡è¿ç®—"></a>æ¨¡è¿ç®—</h3><p>ç›´æ¥çœ‹ä¾‹å­å³å¯.</p><p><code>$$s_k \equiv 0 \pmod&#123;m&#125;$$</code><br>$$<br>s_k \equiv 0 \pmod{m}<br>$$<br><code>$$a \bmod b$$</code><br>$$<br>a \bmod b<br>$$</p><h3 id="ç»å¯¹å€¼å’ŒèŒƒæ•°"><a href="#ç»å¯¹å€¼å’ŒèŒƒæ•°" class="headerlink" title="ç»å¯¹å€¼å’ŒèŒƒæ•°"></a><a href="#%E7%BB%9D%E5%AF%B9%E5%80%BC%E5%92%8C%E8%8C%83%E6%95%B0" title="ç»å¯¹å€¼å’ŒèŒƒæ•°"></a>ç»å¯¹å€¼å’ŒèŒƒæ•°</h3><p>ç”¨<code>\left\vert s \right\vert</code>å³å¯ç»™Zä¸¤ä¾§åŠ ä¸Šç»å¯¹å€¼.</p><p>$$<br>\left\vert Z \right\vert<br>$$<br>ç”¨<code>\lVert s \rVert</code>å³å¯ç»™Zä¸¤ä¾§åŠ ä¸ŠèŒƒæ•°.<br>$$<br>\lVert Z \rVert<br>$$<br>ç¬¦å·å‡½æ•°<code>\sgn</code>åœ¨å½“å‰ç‰ˆæœ¬ä¸­æš‚ä¸æ”¯æŒ.</p><h3 id="è¿æ¥"><a href="#è¿æ¥" class="headerlink" title="è¿æ¥"></a><a href="#%E8%BF%9E%E6%8E%A5" title="è¿æ¥"></a>è¿æ¥</h3><table><thead><tr><th>æ˜¾ç¤º</th><th>è¾“å…¥</th></tr></thead><tbody><tr><td>$\fbox{a+b+c+d}$</td><td><code>\fbox&#123;a+b+c+d&#125;</code></td></tr><tr><td>$\overleftarrow{a+b+c+d}$</td><td><code>\overleftarrow&#123;a+b+c+d&#125;</code></td></tr><tr><td>$\overrightarrow{a+b+c+d}$</td><td><code>\overrightarrow&#123;a+b+c+d&#125;</code></td></tr><tr><td>$\overleftrightarrow{a+b+c+d}$</td><td><code>\overleftrightarrow&#123;a+b+c+d&#125;</code></td></tr><tr><td>$\underleftarrow{a+b+c+d}$</td><td><code>\underleftarrow&#123;a+b+c+d&#125;</code></td></tr><tr><td>$\underrightarrow{a+b+c+d}$</td><td><code>\underrightarrow&#123;a+b+c+d&#125;</code></td></tr><tr><td>$\underleftrightarrow{a+b+c+d}$</td><td><code>\underleftrightarrow&#123;a+b+c+d&#125;</code></td></tr><tr><td>$\overline{a+b+c+d}$</td><td><code>\overline&#123;a+b+c+d&#125;</code></td></tr><tr><td>$\underline{a+b+c+d}$</td><td><code>\underline&#123;a+b+c+d&#125;</code></td></tr><tr><td>$\overbrace{a+b+c+d}^{Sample}$</td><td><code>\overbrace&#123;a+b+c+d&#125;^&#123;Sample&#125;</code></td></tr><tr><td>$\underbrace{a+b+c+d}_{Sample}$</td><td><code>\underbrace&#123;a+b+c+d&#125;_&#123;Sample&#125;</code></td></tr><tr><td>$\overbrace{a+\underbrace{b+c}_{1.0}+d}^{2.0}$</td><td><code>\overbrace&#123;a+\underbrace&#123;b+c&#125;_&#123;1.0&#125;+d&#125;^&#123;2.0&#125;</code></td></tr><tr><td>$\underbrace{a\cdot a\cdots a}_{b\text{ times}}$</td><td><code>\underbrace&#123;a\cdot a\cdots a&#125;_&#123;b\text&#123; times&#125;&#125;</code></td></tr><tr><td>$\underrightarrow{1â„ƒ&#x2F;min}$</td><td><code>\underrightarrow&#123;1â„ƒ/min&#125;</code></td></tr></tbody></table><h3 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a><a href="#%E6%B3%A8%E9%87%8A" title="æ³¨é‡Š"></a>æ³¨é‡Š</h3><p>ç”¨<code>\text &#123;æ–‡å­—&#125;</code>æ¥æ·»åŠ æ–¹ç¨‹ä¸­çš„æ³¨é‡Šæ–‡æœ¬, åœ¨æ³¨é‡Šä¸­ä»ç„¶å¯ä»¥ä½¿ç”¨<code>$ å…¬å¼ $</code>å°†å†…å®¹å…¬å¼åŒ–.</p><pre class="line-numbers language-auto" data-language="auto"><code class="language-auto">f(n)&#x3D; \begin&#123;cases&#125;n&#x2F;2, &amp; \text &#123;if $n$ is even&#125; \\3n+1, &amp;\text&#123;if $n$ is odd&#125;\end&#123;cases&#125; <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ˜¾ç¤º:<br>$$<br>f(n)&#x3D; \begin{cases}<br>n&#x2F;2, &amp; \text {if $n$ is even} \\<br>3n+1, &amp;\text{if $n$ is odd}<br>\end{cases}<br>$$</p><h3 id="ç©ºæ ¼"><a href="#ç©ºæ ¼" class="headerlink" title="ç©ºæ ¼"></a><a href="#%E7%A9%BA%E6%A0%BC" title="ç©ºæ ¼"></a>ç©ºæ ¼</h3><table><thead><tr><th>æ•ˆæœ</th><th>å†™æ³•</th><th>é—´è·</th><th>åç§°</th></tr></thead><tbody><tr><td>$\alpha\qquad\beta$</td><td><code>\alpha\qquad\beta</code></td><td>${\displaystyle mm}$</td><td>2 ä¸ª quad ç©ºæ ¼</td></tr><tr><td>$\alpha \quad \beta$</td><td><code>\alpha\quad\beta</code></td><td>${\displaystyle m}$</td><td>quad ç©ºæ ¼</td></tr><tr><td>$\alpha\ \beta$</td><td><code>\alpha\ \beta</code></td><td>${\displaystyle {\frac{m}{3}}}$</td><td>å¤§ç©ºæ ¼</td></tr><tr><td>$\alpha\;\beta$</td><td><code>\alpha\;\beta</code></td><td>${\displaystyle {\frac {2m}{7}}}$</td><td>ä¸­ç­‰ç©ºæ ¼</td></tr><tr><td>$\alpha\,\beta$</td><td><code>\alpha\,\beta</code></td><td>${\displaystyle {\frac {m}{6}}}$</td><td>å°ç©ºæ ¼</td></tr><tr><td>$\alpha\beta$</td><td><code>\alpha\beta</code></td><td>${\displaystyle 0}$</td><td>æ²¡æœ‰ç©ºæ ¼</td></tr><tr><td>$\alpha!\beta$</td><td><code>\alpha\!\beta</code></td><td>${\displaystyle {-\frac {m}{6}}}$</td><td>ç´§è´´</td></tr></tbody></table><h3 id="åˆ é™¤çº¿"><a href="#åˆ é™¤çº¿" class="headerlink" title="åˆ é™¤çº¿"></a><a href="#%E5%88%A0%E9%99%A4%E7%BA%BF" title="åˆ é™¤çº¿"></a>åˆ é™¤çº¿</h3><p>ä½¿ç”¨åˆ é™¤çº¿åŠŸèƒ½å¿…é¡»å£°æ˜ <code>$$</code> ç¬¦å·.</p><p>åœ¨å…¬å¼å†…ä½¿ç”¨ <code>\require&#123;cancel&#125;</code> æ¥å…è®¸ <strong>ç‰‡æ®µåˆ é™¤çº¿</strong> çš„æ˜¾ç¤º.<br>å£°æ˜ç‰‡æ®µåˆ é™¤çº¿å, ä½¿ç”¨ <code>\cancel&#123;å­—ç¬¦&#125;</code>ã€<code>\bcancel&#123;å­—ç¬¦&#125;</code>ã€<code>\xcancel&#123;å­—ç¬¦&#125;</code> å’Œ <code>\cancelto&#123;å­—ç¬¦&#125;</code> æ¥å®ç°å„ç§ç‰‡æ®µåˆ é™¤çº¿æ•ˆæœ.</p><pre class="line-numbers language-auto" data-language="auto"><code class="language-auto">$$\require&#123;cancel&#125;\begin&#123;array&#125;&#123;rl&#125;\verb|y+\cancel&#123;x&#125;| &amp; y+\cancel&#123;x&#125;\\\verb|\cancel&#123;y+x&#125;| &amp; \cancel&#123;y+x&#125;\\\verb|y+\bcancel&#123;x&#125;| &amp; y+\bcancel&#123;x&#125;\\\verb|y+\xcancel&#123;x&#125;| &amp; y+\xcancel&#123;x&#125;\\\verb|y+\cancelto&#123;0&#125;&#123;x&#125;| &amp; y+\cancelto&#123;0&#125;&#123;x&#125;\\\verb+\frac&#123;1\cancel9&#125;&#123;\cancel95&#125; &#x3D; \frac15+&amp; \frac&#123;1\cancel9&#125;&#123;\cancel95&#125; &#x3D; \frac15 \\\end&#123;array&#125;$$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯å¾—:<br>$$<br>\require{cancel}<br>\begin{array}{rl}<br>\verb|y+\cancel{x}| &amp; y+\cancel{x}\\<br>\verb|\cancel{y+x}| &amp; \cancel{y+x}\\<br>\verb|y+\bcancel{x}| &amp; y+\bcancel{x}\\<br>\verb|y+\xcancel{x}| &amp; y+\xcancel{x}\\<br>\verb|y+\cancelto{0}{x}| &amp; y+\cancelto{0}{x}\\<br>\verb+\frac{1\cancel9}{\cancel95} &#x3D; \frac15+&amp; \frac{1\cancel9}{\cancel95} &#x3D; \frac15 \\<br>\end{array}<br>$$<br>ä½¿ç”¨ <code>\require&#123;enclose&#125;</code> æ¥å…è®¸ <strong>æ•´æ®µåˆ é™¤çº¿</strong> çš„æ˜¾ç¤º.<br>å£°æ˜æ•´æ®µåˆ é™¤çº¿å, ä½¿ç”¨ <code>\enclose&#123;åˆ é™¤çº¿æ•ˆæœ&#125;&#123;å­—ç¬¦&#125;</code> æ¥å®ç°å„ç§æ•´æ®µåˆ é™¤çº¿æ•ˆæœ.<br>å…¶ä¸­, åˆ é™¤çº¿æ•ˆæœæœ‰ <code>horizontalstrike</code>ã€<code>verticalstrike</code>ã€<code>updiagonalstrike</code> å’Œ <code>downdiagonalstrike</code>, å¯å åŠ ä½¿ç”¨.</p><h2 id="ä½¿ç”¨å‚è€ƒ"><a href="#ä½¿ç”¨å‚è€ƒ" class="headerlink" title="ä½¿ç”¨å‚è€ƒ"></a><a href="#%E4%BD%BF%E7%94%A8%E5%8F%82%E8%80%83" title="ä½¿ç”¨å‚è€ƒ"></a>ä½¿ç”¨å‚è€ƒ</h2><h3 id="å¤§æ‹¬å·å’Œè¡Œæ ‡"><a href="#å¤§æ‹¬å·å’Œè¡Œæ ‡" class="headerlink" title="å¤§æ‹¬å·å’Œè¡Œæ ‡"></a><a href="#%E5%A4%A7%E6%8B%AC%E5%8F%B7%E5%92%8C%E8%A1%8C%E6%A0%87" title="å¤§æ‹¬å·å’Œè¡Œæ ‡"></a>å¤§æ‹¬å·å’Œè¡Œæ ‡</h3><p>ä½¿ç”¨ <code>\left</code> å’Œ <code>\right</code> æ¥åˆ›å»ºè‡ªåŠ¨åŒ¹é…é«˜åº¦çš„ (åœ†æ‹¬å·), [æ–¹æ‹¬å·] å’Œ {èŠ±æ‹¬å·} . åœ¨æ¯ä¸ªå…¬å¼æœ«å°¾å‰ä½¿ç”¨ <code>\tag&#123;è¡Œæ ‡&#125;</code> æ¥å®ç°è¡Œæ ‡. ä¾‹å¦‚:</p><pre class="line-numbers language-auto" data-language="auto"><code class="language-auto">$$f\left(   \left[      \frac&#123;       1+\left\&#123;x,y\right\&#125;     &#125;&#123;       \left(          \frac&#123;x&#125;&#123;y&#125;+\frac&#123;y&#125;&#123;x&#125;       \right)       \left(u+1\right)     &#125;+a   \right]^&#123;3&#x2F;2&#125;\right)\tag&#123;è¡Œæ ‡&#125;$$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ˜¾ç¤º:<br>$$<br>f\left(<br>\left[<br>\frac{<br>1+\left\{x,y\right\}<br>}{<br>\left(<br>\frac{x}{y}+\frac{y}{x}<br>\right)<br>\left(u+1\right)<br>}+a<br>\right]^{3&#x2F;2}<br>\right)<br>\tag{è¡Œæ ‡}<br>$$<br>å¦‚æœä½ éœ€è¦åœ¨ä¸åŒçš„è¡Œæ˜¾ç¤ºå¯¹åº”æ‹¬å·, å¯ä»¥åœ¨æ¯ä¸€è¡Œå¯¹åº”å¤„ä½¿ç”¨ <code>\left.</code> æˆ– <code>\right.</code> æ¥æ”¾ä¸€ä¸ªâ€å½±å­â€æ‹¬å·:</p><pre class="line-numbers language-auto" data-language="auto"><code class="language-auto">\begin&#123;aligned&#125;a&#x3D;&amp;\left(1+2+3+  \cdots \right. \\&amp; \cdots+ \left. \infty-2+\infty-1+\infty\right)\end&#123;aligned&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ˜¾ç¤º:<br>$$<br>\begin{aligned}<br>a&#x3D;&amp;\left(1+2+3+ \cdots \right. \\<br>&amp; \cdots+ \left. \infty-2+\infty-1+\infty\right)<br>\end{aligned}<br>$$<br>å¦‚æœä½ éœ€è¦å°†è¡Œå†…æ˜¾ç¤ºçš„åˆ†éš”ç¬¦ä¹Ÿå˜å¤§, å¯ä»¥ä½¿ç”¨ <code>\middle</code> :</p><pre class="line-numbers language-auto" data-language="auto"><code class="language-auto">\left\langle    q\middle\|  \frac&#123;\frac&#123;x&#125;&#123;y&#125;&#125;&#123;\frac&#123;u&#125;&#123;v&#125;&#125;\middle|    p \right\rangle<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ˜¾ç¤º:<br>$$<br>\left\langle<br>q<br>\middle|<br>\frac{\frac{x}{y}}{\frac{u}{v}}<br>\middle|<br>p<br>\right\rangle<br>$$</p><h3 id="çŸ©é˜µ"><a href="#çŸ©é˜µ" class="headerlink" title="çŸ©é˜µ"></a><a href="#%E7%9F%A9%E9%98%B5" title="çŸ©é˜µ"></a>çŸ©é˜µ</h3><h4 id="æ— æ¡†çŸ©é˜µ"><a href="#æ— æ¡†çŸ©é˜µ" class="headerlink" title="æ— æ¡†çŸ©é˜µ"></a><a href="#%E6%97%A0%E6%A1%86%E7%9F%A9%E9%98%B5" title="æ— æ¡†çŸ©é˜µ"></a>æ— æ¡†çŸ©é˜µ</h4><p>åœ¨å¼€å¤´ä½¿ç”¨ <code>begin&#123;matrix&#125;</code>, åœ¨ç»“å°¾ä½¿ç”¨ <code>end&#123;matrix&#125;</code>, åœ¨ä¸­é—´æ’å…¥çŸ©é˜µå…ƒç´ , æ¯ä¸ªå…ƒç´ ä¹‹é—´æ’å…¥ <code>&amp;</code> , å¹¶åœ¨æ¯è¡Œç»“å°¾å¤„ä½¿ç”¨ <code>\\</code> .<br>ä½¿ç”¨çŸ©é˜µæ—¶å¿…é¡»å£°æ˜ <code>$</code> æˆ– <code>$$</code> ç¬¦å·.</p><p>ä¾‹å¦‚:</p><pre class="line-numbers language-auto" data-language="auto"><code class="language-auto">$$        \begin&#123;matrix&#125;        1 &amp; x &amp; x^2 \\        1 &amp; y &amp; y^2 \\        1 &amp; z &amp; z^2 \\        \end&#123;matrix&#125;$$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ˜¾ç¤º:<br>$$<br>\begin{matrix}<br>1 &amp; x &amp; x^2 \\<br>1 &amp; y &amp; y^2 \\<br>1 &amp; z &amp; z^2 \\<br>\end{matrix}<br>$$</p><h4 id="è¾¹æ¡†çŸ©é˜µ"><a href="#è¾¹æ¡†çŸ©é˜µ" class="headerlink" title="è¾¹æ¡†çŸ©é˜µ"></a><a href="#%E8%BE%B9%E6%A1%86%E7%9F%A9%E9%98%B5" title="è¾¹æ¡†çŸ©é˜µ"></a>è¾¹æ¡†çŸ©é˜µ</h4><p>åœ¨å¼€å¤´å°† <code>matrix</code> æ›¿æ¢ä¸º <code>pmatrix</code> <code>bmatrix</code> <code>Bmatrix</code> <code>vmatrix</code> <code>Vmatrix</code>, å°±èƒ½è·å¾—ä¸åŒæ ·å¼çš„å¸¦æ¡†çŸ©é˜µ.</p><p>ä¾‹å¦‚:</p><pre class="line-numbers language-auto" data-language="auto"><code class="language-auto">$ \begin&#123;matrix&#125; 1 &amp; 2 \\ 3 &amp; 4 \\ \end&#123;matrix&#125; $$ \begin&#123;pmatrix&#125; 1 &amp; 2 \\ 3 &amp; 4 \\ \end&#123;pmatrix&#125; $$ \begin&#123;bmatrix&#125; 1 &amp; 2 \\ 3 &amp; 4 \\ \end&#123;bmatrix&#125; $$ \begin&#123;Bmatrix&#125; 1 &amp; 2 \\ 3 &amp; 4 \\ \end&#123;Bmatrix&#125; $$ \begin&#123;vmatrix&#125; 1 &amp; 2 \\ 3 &amp; 4 \\ \end&#123;vmatrix&#125; $$ \begin&#123;Vmatrix&#125; 1 &amp; 2 \\ 3 &amp; 4 \\ \end&#123;Vmatrix&#125; $<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ˜¾ç¤º:</p><table><thead><tr><th>matrix</th><th>pmatrix</th><th>bmatrix</th><th>Bmatrix</th><th>vmatrix</th><th>Vmatrix</th></tr></thead><tbody><tr><td>$ \begin{matrix} 1 &amp; 2 \\\ 3 &amp; 4 \end{matrix} $</td><td>$ \begin{pmatrix} 1 &amp; 2 \\\ 3 &amp; 4 \end{pmatrix} $</td><td>$ \begin{bmatrix} 1 &amp; 2 \\\ 3 &amp; 4 \end{bmatrix} $</td><td>$ \begin{Bmatrix} 1 &amp; 2 \\\ 3 &amp; 4 \end{Bmatrix} $</td><td>$ \begin{vmatrix} 1 &amp; 2 \\\ 3 &amp; 4 \end{vmatrix} $</td><td>$ \begin{Vmatrix} 1 &amp; 2 \\\ 3 &amp; 4 \end{Vmatrix} $</td></tr></tbody></table><h4 id="å¸¦çœç•¥å·çš„çŸ©é˜µ"><a href="#å¸¦çœç•¥å·çš„çŸ©é˜µ" class="headerlink" title="å¸¦çœç•¥å·çš„çŸ©é˜µ"></a><a href="#%E5%B8%A6%E7%9C%81%E7%95%A5%E5%8F%B7%E7%9A%84%E7%9F%A9%E9%98%B5" title="å¸¦çœç•¥å·çš„çŸ©é˜µ"></a>å¸¦çœç•¥å·çš„çŸ©é˜µ</h4><p>ä½¿ç”¨ <code>\cdots</code> $\cdots$ , <code>\ddots</code> $\ddots$ , <code>\vdots</code> $\vdots$ æ¥è¾“å…¥çœç•¥ç¬¦å·.</p><p>ä¾‹å¦‚:</p><pre class="line-numbers language-auto" data-language="auto"><code class="language-auto">$$        \begin&#123;pmatrix&#125;        1 &amp; a_1 &amp; a_1^2 &amp; \cdots &amp; a_1^n \\        1 &amp; a_2 &amp; a_2^2 &amp; \cdots &amp; a_2^n \\        \vdots &amp; \vdots &amp; \vdots &amp; \ddots &amp; \vdots \\        1 &amp; a_m &amp; a_m^2 &amp; \cdots &amp; a_m^n \\        \end&#123;pmatrix&#125;$$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¾—åˆ°:<br>$$<br>\begin{pmatrix}<br>1 &amp; a_1 &amp; a_1^2 &amp; \cdots &amp; a_1^n \\<br>1 &amp; a_2 &amp; a_2^2 &amp; \cdots &amp; a_2^n \\<br>\vdots &amp; \vdots &amp; \vdots &amp; \ddots &amp; \vdots \\<br>1 &amp; a_m &amp; a_m^2 &amp; \cdots &amp; a_m^n<br>\end{pmatrix}<br>$$</p><h4 id="å¸¦åˆ†å‰²ç¬¦å·çš„çŸ©é˜µ"><a href="#å¸¦åˆ†å‰²ç¬¦å·çš„çŸ©é˜µ" class="headerlink" title="å¸¦åˆ†å‰²ç¬¦å·çš„çŸ©é˜µ"></a><a href="#%E5%B8%A6%E5%88%86%E5%89%B2%E7%AC%A6%E5%8F%B7%E7%9A%84%E7%9F%A9%E9%98%B5" title="å¸¦åˆ†å‰²ç¬¦å·çš„çŸ©é˜µ"></a>å¸¦åˆ†å‰²ç¬¦å·çš„çŸ©é˜µ</h4><p>åˆ©ç”¨æ•°ç»„æˆ–è¡¨æ ¼çš„æ’ç‰ˆè¿›è¡Œåˆ†å‰².</p><pre class="line-numbers language-auto" data-language="auto"><code class="language-auto">$$\left[    \begin&#123;array&#125;&#123;cc|c&#125;      1&amp;2&amp;3\\      4&amp;5&amp;6    \end&#123;array&#125;\right]$$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­ <code>cc|c</code> ä»£è¡¨åœ¨ä¸€ä¸ªä¸‰åˆ—çŸ©é˜µä¸­çš„ç¬¬äºŒå’Œç¬¬ä¸‰åˆ—ä¹‹é—´æ’å…¥åˆ†å‰²çº¿.</p><p>æ˜¾ç¤º:<br>$$<br>\left[<br>\begin{array}{cc|c}<br>1&amp;2&amp;3\\<br>4&amp;5&amp;6<br>\end{array}<br>\right]<br>$$</p><h4 id="è¡Œä¸­çŸ©é˜µ"><a href="#è¡Œä¸­çŸ©é˜µ" class="headerlink" title="è¡Œä¸­çŸ©é˜µ"></a><a href="#%E8%A1%8C%E4%B8%AD%E7%9F%A9%E9%98%B5" title="è¡Œä¸­çŸ©é˜µ"></a>è¡Œä¸­çŸ©é˜µ</h4><p>ä¾‹å¦‚:</p><p><code>$\bigl( \begin&#123;smallmatrix&#125; a &amp; b \\ c &amp; d \end&#123;smallmatrix&#125; \bigr)$</code></p><p>æ˜¾ç¤º$\bigl( \begin{smallmatrix} a &amp; b \\\ c &amp; d \end{smallmatrix} \bigr)$.</p><h3 id="æ–¹ç¨‹ç»„"><a href="#æ–¹ç¨‹ç»„" class="headerlink" title="æ–¹ç¨‹ç»„"></a><a href="#%E6%96%B9%E7%A8%8B%E7%BB%84" title="æ–¹ç¨‹ç»„"></a>æ–¹ç¨‹ç»„</h3><h4 id="æ¡ä»¶è¡¨è¾¾å¼"><a href="#æ¡ä»¶è¡¨è¾¾å¼" class="headerlink" title="æ¡ä»¶è¡¨è¾¾å¼"></a><a href="#%E6%9D%A1%E4%BB%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F" title="æ¡ä»¶è¡¨è¾¾å¼"></a>æ¡ä»¶è¡¨è¾¾å¼</h4><p>ä½¿ç”¨ <code>begin&#123;cases&#125;</code> æ¥åˆ›é€ ä¸€ç»„æ¡ä»¶è¡¨è¾¾å¼, åœ¨æ¯ä¸€è¡Œæ¡ä»¶ä¸­æ’å…¥ <code>&amp;</code> æ¥æŒ‡å®šéœ€è¦å¯¹é½çš„å†…å®¹, å¹¶åœ¨æ¯ä¸€è¡Œç»“å°¾å¤„ä½¿ç”¨ <code>\\</code>, ä»¥ <code>end&#123;cases&#125;</code> ç»“æŸ.</p><pre class="line-numbers language-auto" data-language="auto"><code class="language-auto">$$        f(n) &#x3D;        \begin&#123;cases&#125;        n&#x2F;2,  &amp; \text&#123;if $n$ is even&#125; \\        3n+1, &amp; \text&#123;if $n$ is odd&#125;        \end&#123;cases&#125;$$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ˜¾ç¤º:<br>$$<br>f(n) &#x3D;<br>\begin{cases}<br>n&#x2F;2, &amp; \text{if $n$ is even} \\<br>3n+1, &amp; \text{if $n$ is odd}<br>\end{cases}<br>$$<br>å¦‚æœæƒ³è¦è®©æ¡ä»¶è¡¨è¾¾å¼å˜ä¸ºå·¦å¯¹é½æ˜¾ç¤º, å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼:</p><pre class="line-numbers language-auto" data-language="auto"><code class="language-auto">$$        \left.        \begin&#123;array&#125;&#123;l&#125;        \text&#123;if $n$ is even:&#125;&amp;n&#x2F;2\\        \text&#123;if $n$ is odd:&#125;&amp;3n+1        \end&#123;array&#125;        \right\&#125;        &#x3D;f(n)$$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ˜¾ç¤º:<br>$$<br>\left.<br>\begin{array}{l}<br>\text{if $n$ is even:}&amp;n&#x2F;2\\<br>\text{if $n$ is odd:}&amp;3n+1<br>\end{array}<br>\right\}<br>=f(n)<br>$$<br>åœ¨æ¢è¡Œæ—¶å¯ä»¥ç”¨<code>\\[?ex]</code>ä½¿å¾—å…¶é€‚é…è¡Œé«˜<code>?</code>. <strong>ä¸€ä¸ª <code>[ex]</code> æŒ‡ä¸€ä¸ª â€œX-Heightâ€, å³xå­—æ¯é«˜åº¦. å¯ä»¥æ ¹æ®æƒ…å†µæŒ‡å®šå¤šä¸ª <code>[ex]</code>, å¦‚ <code>[3ex]</code>ã€<code>[4ex]</code> ç­‰.</strong> å…¶å®å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨ <code>\\[2ex]</code> è¯­å¥, åªè¦ä½ è§‰å¾—åˆé€‚.</p><h4 id="è¾“å…¥æ–¹ç¨‹ç»„"><a href="#è¾“å…¥æ–¹ç¨‹ç»„" class="headerlink" title="è¾“å…¥æ–¹ç¨‹ç»„"></a><a href="#%E8%BE%93%E5%85%A5%E6%96%B9%E7%A8%8B%E7%BB%84" title="è¾“å…¥æ–¹ç¨‹ç»„"></a>è¾“å…¥æ–¹ç¨‹ç»„</h4><p>æ–¹ç¨‹ç»„ä¸å…‰å¯ä»¥é€šè¿‡æ¡ä»¶è¡¨è¾¾å¼çš„<code>\begin&#123;cases&#125;â€¦\end&#123;cases&#125;</code>å®ç°, è¿˜å¯ä»¥ä½¿ç”¨ <code>\begin&#123;array&#125;â€¦\end&#123;array&#125;</code> å’Œ <code>\left\&#123;â€¦\right.</code> æ¥åˆ›å»ºä¸€ä¸ªæ–¹ç¨‹ç»„. ä¾‹å¦‚:</p><pre class="line-numbers language-auto" data-language="auto"><code class="language-auto">\left\&#123; \begin&#123;array&#125;&#123;c&#125;a_1x+b_1y+c_1z&#x3D;d_1 \\ a_2x+b_2y+c_2z&#x3D;d_2 \\ a_3x+b_3y+c_3z&#x3D;d_3\end&#123;array&#125;\right. <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>$$<br>\left\{<br>\begin{array}{c}<br>a_1x+b_1y+c_1z&#x3D;d_1 \\<br>a_2x+b_2y+c_2z&#x3D;d_2 \\<br>a_3x+b_3y+c_3z&#x3D;d_3<br>\end{array}<br>\right.<br>$$</p><h4 id="å¯¹é½æ–¹ç¨‹ç»„"><a href="#å¯¹é½æ–¹ç¨‹ç»„" class="headerlink" title="å¯¹é½æ–¹ç¨‹ç»„"></a><a href="#%E5%AF%B9%E9%BD%90%E6%96%B9%E7%A8%8B%E7%BB%84" title="å¯¹é½æ–¹ç¨‹ç»„"></a>å¯¹é½æ–¹ç¨‹ç»„</h4><p>ä½¿ç”¨ <code>\begin&#123;aligned&#125;â€¦\end&#123;aligned&#125;</code>è·å¾—ä¸€åˆ—æ•´é½ä¸”å±…ä¸­çš„æ–¹ç¨‹å¼åºåˆ—. é€šè¿‡<code>&amp;</code>æ¥æ§åˆ¶æ–¹ç¨‹å¯¹é½çš„ä½ç½®.</p><p>ä¾‹å¦‚:</p><pre class="line-numbers language-auto" data-language="auto"><code class="language-auto">\begin&#123;aligned&#125;f(x) &amp; &#x3D; (m+n)^2 \\     &amp; &#x3D; m^2+2mn+n^2 \\\end&#123;aligned&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ˜¾ç¤º:<br>$$<br>\begin{aligned}<br>f(x) &amp; &#x3D; (m+n)^2 \\<br>&amp; &#x3D; m^2+2mn+n^2 \\<br>\end{aligned}<br>$$</p><h3 id="æ•°ç»„å’Œè¡¨æ ¼"><a href="#æ•°ç»„å’Œè¡¨æ ¼" class="headerlink" title="æ•°ç»„å’Œè¡¨æ ¼"></a><a href="#%E6%95%B0%E7%BB%84%E5%92%8C%E8%A1%A8%E6%A0%BC" title="æ•°ç»„å’Œè¡¨æ ¼"></a>æ•°ç»„å’Œè¡¨æ ¼</h3><p>é€šå¸¸, ä¸€ä¸ªæ ¼å¼åŒ–åçš„è¡¨æ ¼æ¯”å•çº¯çš„æ–‡å­—æˆ–æ’ç‰ˆåçš„æ–‡å­—æ›´å…·æœ‰å¯è¯»æ€§. æ•°ç»„å’Œè¡¨æ ¼å‡ä»¥ <code>begin&#123;array&#125;</code> å¼€å¤´, å¹¶åœ¨å…¶åå®šä¹‰åˆ—æ•°åŠæ¯ä¸€åˆ—çš„æ–‡æœ¬å¯¹é½å±æ€§, <code>c</code> <code>l</code> <code>r</code> åˆ†åˆ«ä»£è¡¨å±…ä¸­ã€å·¦å¯¹é½åŠå³å¯¹é½. è‹¥éœ€è¦æ’å…¥å‚ç›´åˆ†å‰²çº¿, åœ¨å®šä¹‰å¼ä¸­æ’å…¥ <code>|</code> , è‹¥è¦æ’å…¥æ°´å¹³åˆ†å‰²çº¿, åœ¨ä¸‹ä¸€è¡Œè¾“å…¥å‰æ’å…¥ <code>\hline</code> . ä¸çŸ©é˜µç›¸ä¼¼, æ¯è¡Œå…ƒç´ é—´å‡é¡»è¦æ’å…¥ <code>&amp;</code> , æ¯è¡Œå…ƒç´ ä»¥ <code>\\</code> ç»“å°¾, æœ€åä»¥ <code>end&#123;array&#125;</code> ç»“æŸæ•°ç»„.</p><p>ä¾‹å¦‚:</p><pre class="line-numbers language-auto" data-language="auto"><code class="language-auto">$$\begin&#123;array&#125;&#123;c|lcr&#125;n &amp; \text&#123;å·¦å¯¹é½&#125; &amp; \text&#123;å±…ä¸­å¯¹é½&#125; &amp; \text&#123;å³å¯¹é½&#125; \\\hline1 &amp; 0.24 &amp; 1 &amp; 125 \\2 &amp; -1 &amp; 189 &amp; -8 \\3 &amp; -20 &amp; 2000 &amp; 1+10i\end&#123;array&#125;$$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ˜¾ç¤º:<br>$$<br>\begin{array}{c|lcr}<br>n &amp; \text{å·¦å¯¹é½} &amp; \text{å±…ä¸­å¯¹é½} &amp; \text{å³å¯¹é½} \\<br>\hline<br>1 &amp; 0.24 &amp; 1 &amp; 125 \\<br>2 &amp; -1 &amp; 189 &amp; -8 \\<br>3 &amp; -20 &amp; 2000 &amp; 1+10i<br>\end{array}<br>$$</p><h4 id="åµŒå¥—"><a href="#åµŒå¥—" class="headerlink" title="åµŒå¥—"></a><a href="#%E5%B5%8C%E5%A5%97" title="åµŒå¥—"></a>åµŒå¥—</h4><p>å¤šä¸ªæ•°ç»„&#x2F;è¡¨æ ¼å¯ <strong>äº’ç›¸åµŒå¥—</strong> å¹¶ç»„æˆä¸€ç»„æ•°ç»„&#x2F;ä¸€ç»„è¡¨æ ¼. ä½¿ç”¨åµŒå¥—å‰å¿…é¡»å£°æ˜ <code>$$</code> ç¬¦å·. ä¾‹å¦‚:</p><pre class="line-numbers language-auto" data-language="auto"><code class="language-auto">$$% outer vertical array of arrays å¤–å±‚å‚ç›´è¡¨æ ¼\begin&#123;array&#125;&#123;c&#125;    % inner horizontal array of arrays å†…å±‚æ°´å¹³è¡¨æ ¼    \begin&#123;array&#125;&#123;cc&#125;        % inner array of minimum values å†…å±‚&quot;æœ€å°å€¼&quot;æ•°ç»„        \begin&#123;array&#125;&#123;c|cccc&#125;        \text&#123;min&#125; &amp; 0 &amp; 1 &amp; 2 &amp; 3\\        \hline        0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\        1 &amp; 0 &amp; 1 &amp; 1 &amp; 1\\        2 &amp; 0 &amp; 1 &amp; 2 &amp; 2\\        3 &amp; 0 &amp; 1 &amp; 2 &amp; 3        \end&#123;array&#125;    &amp;        % inner array of maximum values å†…å±‚&quot;æœ€å¤§å€¼&quot;æ•°ç»„        \begin&#123;array&#125;&#123;c|cccc&#125;        \text&#123;max&#125;&amp;0&amp;1&amp;2&amp;3\\        \hline        0 &amp; 0 &amp; 1 &amp; 2 &amp; 3\\        1 &amp; 1 &amp; 1 &amp; 2 &amp; 3\\        2 &amp; 2 &amp; 2 &amp; 2 &amp; 3\\        3 &amp; 3 &amp; 3 &amp; 3 &amp; 3        \end&#123;array&#125;    \end&#123;array&#125;    % å†…å±‚ç¬¬ä¸€è¡Œè¡¨æ ¼ç»„ç»“æŸ    \\    % inner array of delta values å†…å±‚ç¬¬äºŒè¡ŒDeltaå€¼æ•°ç»„        \begin&#123;array&#125;&#123;c|cccc&#125;        \Delta&amp;0&amp;1&amp;2&amp;3\\        \hline        0 &amp; 0 &amp; 1 &amp; 2 &amp; 3\\        1 &amp; 1 &amp; 0 &amp; 1 &amp; 2\\        2 &amp; 2 &amp; 1 &amp; 0 &amp; 1\\        3 &amp; 3 &amp; 2 &amp; 1 &amp; 0        \end&#123;array&#125;        % å†…å±‚ç¬¬äºŒè¡Œè¡¨æ ¼ç»„ç»“æŸ\end&#123;array&#125;$$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ˜¾ç¤º:<br>$$<br>\begin{array}{c}<br>\begin{array}{cc}<br>\begin{array}{c|cccc}<br>\text{min} &amp; 0 &amp; 1 &amp; 2 &amp; 3\\<br>\hline<br>0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\<br>1 &amp; 0 &amp; 1 &amp; 1 &amp; 1\\<br>2 &amp; 0 &amp; 1 &amp; 2 &amp; 2\\<br>3 &amp; 0 &amp; 1 &amp; 2 &amp; 3<br>\end{array}<br>&amp;<br>\begin{array}{c|cccc}<br>\text{max}&amp;0&amp;1&amp;2&amp;3\\<br>\hline<br>0 &amp; 0 &amp; 1 &amp; 2 &amp; 3\\<br>1 &amp; 1 &amp; 1 &amp; 2 &amp; 3\\<br>2 &amp; 2 &amp; 2 &amp; 2 &amp; 3\\<br>3 &amp; 3 &amp; 3 &amp; 3 &amp; 3<br>\end{array}<br>\end{array}<br>\\<br>\begin{array}{c|cccc}<br>\Delta&amp;0&amp;1&amp;2&amp;3\\<br>\hline<br>0 &amp; 0 &amp; 1 &amp; 2 &amp; 3\\<br>1 &amp; 1 &amp; 0 &amp; 1 &amp; 2\\<br>2 &amp; 2 &amp; 1 &amp; 0 &amp; 1\\<br>3 &amp; 3 &amp; 2 &amp; 1 &amp; 0<br>\end{array}<br>% å†…å±‚ç¬¬äºŒè¡Œè¡¨æ ¼ç»„ç»“æŸ<br>\end{array}<br>$$</p><h3 id="è¿åˆ†æ•°"><a href="#è¿åˆ†æ•°" class="headerlink" title="è¿åˆ†æ•°"></a><a href="#%E8%BF%9E%E5%88%86%E6%95%B0" title="è¿åˆ†æ•°"></a>è¿åˆ†æ•°</h3><p>å°±åƒè¾“å…¥åˆ†å¼æ—¶ä½¿ç”¨ <code>\frac</code> ä¸€æ ·, ä½¿ç”¨ <code>\cfrac</code> æ¥åˆ›å»ºä¸€ä¸ªè¿åˆ†æ•°. ä¸è¦ä½¿ç”¨æ™®é€šçš„ <code>\frac</code> æˆ– <code>\over</code> æ¥åˆ›å»º, å¦åˆ™ä¼šçœ‹èµ·æ¥å¾ˆä¸‘. ä¾‹å¦‚:</p><pre class="line-numbers language-auto" data-language="auto"><code class="language-auto">$$x &#x3D; a_0 + \cfrac&#123;1^2&#125;&#123;a_1          + \cfrac&#123;2^2&#125;&#123;a_2          + \cfrac&#123;3^2&#125;&#123;a_3 + \cfrac&#123;4^4&#125;&#123;a_4 + \cdots&#125;&#125;&#125;&#125;$$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ˜¾ç¤º:<br>$$<br>x &#x3D; a_0 + \cfrac{1^2}{a_1<br>+ \cfrac{2^2}{a_2<br>+ \cfrac{3^2}{a_3 + \cfrac{4^4}{a_4 + \cdots}}}}<br>$$<br>åä¾‹, ä½¿ç”¨<code>\frac</code>å’Œ<code>\over</code>:</p><pre class="line-numbers language-auto" data-language="auto"><code class="language-auto">$$x &#x3D; a_0 + \frac&#123;1^2&#125;&#123;a_1          + \frac&#123;2^2&#125;&#123;a_2          + \frac&#123;3^2&#125;&#123;a_3 + \frac&#123;4^4&#125;&#123;a_4 + \cdots&#125;&#125;&#125;&#125;$$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ˜¾ç¤º:<br>$$<br>x &#x3D; a_0 + \frac{1^2}{a_1<br>+ \frac{2^2}{a_2<br>+ \frac{3^2}{a_3 + \frac{4^4}{a_4 + \cdots}}}}<br>$$<br>å½“ç„¶, å¯ä»¥ä½¿ç”¨ <code>\frac</code> æ¥è¡¨è¾¾è¿åˆ†æ•°çš„ <strong>ç´§ç¼©è®°æ³•</strong> . ä¾‹å¦‚:</p><pre class="line-numbers language-auto" data-language="auto"><code class="language-auto">x &#x3D; a_0 + \frac&#123;1^2&#125;&#123;a_1+&#125;          \frac&#123;2^2&#125;&#123;a_2+&#125;          \frac&#123;3^2&#125;&#123;a_3 +&#125; \frac&#123;4^4&#125;&#123;a_4 +&#125; \cdots<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ˜¾ç¤º:<br>$$<br>x &#x3D; a_0 + \frac{1^2}{a_1+}<br>\frac{2^2}{a_2+}<br>\frac{3^2}{a_3 +} \frac{4^4}{a_4 +} \cdots<br>$$<br>è¿åˆ†æ•°é€šå¸¸éƒ½å¤ªå¤§ä»¥è‡³äºä¸æ˜“æ’ç‰ˆ, å»ºè®®ä½¿ç”¨ <code>[a0;a1,a2,a3,â€¦]</code> ä¸€æ ·çš„ç´§ç¼©è®°æ³•.</p><h2 id="ç¬¦å·æ±‡æ€»"><a href="#ç¬¦å·æ±‡æ€»" class="headerlink" title="ç¬¦å·æ±‡æ€»"></a><a href="#%E7%AC%A6%E5%8F%B7%E6%B1%87%E6%80%BB" title="ç¬¦å·æ±‡æ€»"></a>ç¬¦å·æ±‡æ€»</h2><p>è¿™é‡Œçš„ç¬¦å·æ­£å¸¸ä½¿ç”¨ç»å¯¹å¤Ÿäº†, å¦‚æœè¿˜æœ‰æ›´å¥‡è‘©çš„ç¬¦å·éœ€è¦ä½¿ç”¨å¯ä»¥å‚è€ƒä¹‹å‰æˆ‘å¼•ç”¨çš„æ–‡ç« . å› ä¸ºåŒä¸€ä¸ªç¬¦å·å¯èƒ½æœ‰ä¸åŒçš„ä½¿ç”¨é¢†åŸŸ, æ‰€ä»¥ä¸åŒçš„è¡¨å¯èƒ½æœ‰é‡å çš„åœ°æ–¹.</p><p><code>|</code> ç¬¦å·åœ¨è¢«å½“ä½œåˆ†éš”ç¬¦æ—¶ä¼šäº§ç”Ÿé”™è¯¯çš„é—´éš”, å› æ­¤åœ¨éœ€è¦åˆ†éš”æ—¶æœ€å¥½ä½¿ç”¨ <code>\mid</code> æ¥ä»£æ›¿å®ƒ.</p><h3 id="ä¸‰è§’"><a href="#ä¸‰è§’" class="headerlink" title="ä¸‰è§’"></a><a href="#%E4%B8%89%E8%A7%92" title="ä¸‰è§’"></a>ä¸‰è§’</h3><table><thead><tr><th>æ˜¾ç¤º</th><th>è¾“å…¥</th><th>æ˜¾ç¤º</th><th>è¾“å…¥</th><th>æ˜¾ç¤º</th><th>è¾“å…¥</th></tr></thead><tbody><tr><td>$30^\circ$</td><td><code>30^\circ</code></td><td>$\bot$</td><td><code>\bot</code></td><td>$\angle A$</td><td><code>\angle A</code></td></tr><tr><td>$\sin$</td><td><code>\sin</code></td><td>$\cos$</td><td><code>\cos</code></td><td>$\tan$</td><td><code>\tan</code></td></tr><tr><td>$\csc$</td><td><code>\csc</code></td><td>$\sec$</td><td><code>\sec</code></td><td>$\cot$</td><td><code>\cot</code></td></tr><tr><td>$\sinh$</td><td><code>\sinh</code></td><td>$\cosh$</td><td><code>\cosh</code></td><td>$\tanh$</td><td><code>\tanh</code></td></tr><tr><td>$\arcsin$</td><td><code>\arcsin</code></td><td>$\arccos$</td><td><code>\arccos</code></td><td>$\arctan$</td><td><code>\arctan</code></td></tr><tr><td>$\textrm{arccsc}$</td><td><code>\textrm&#123;arccsc&#125;</code></td><td>$\textrm{arcsec}$</td><td><code>\textrm&#123;arcsec&#125;</code></td><td>$\textrm{arccot}$</td><td><code>\textrm&#123;arccot&#125;</code></td></tr><tr><td>$\sin^{-1}$</td><td><code>\sin^&#123;-1&#125;</code></td><td>$\cos^{-1}$</td><td><code>\cos^&#123;-1&#125;</code></td><td>$\tan^{-1}$</td><td><code>\tan^&#123;-1&#125;</code></td></tr><tr><td>$\sinh^{-1}$</td><td><code>\sinh^&#123;-1&#125;</code></td><td>$\cosh^{-1}$</td><td><code>\cosh^&#123;-1&#125;</code></td><td>$\tanh^{-1}$</td><td><code>\tanh^&#123;-1&#125;</code></td></tr><tr><td>$\sphericalangle$</td><td><code>sphericalangle</code></td><td>$\measuredangle$</td><td><code>\measuredangle</code></td><td></td><td></td></tr></tbody></table><h3 id="å¯¹æ•°"><a href="#å¯¹æ•°" class="headerlink" title="å¯¹æ•°"></a><a href="#%E5%AF%B9%E6%95%B0" title="å¯¹æ•°"></a>å¯¹æ•°</h3><table><thead><tr><th>æ˜¾ç¤º</th><th>è¾“å…¥</th><th>æ˜¾ç¤º</th><th>è¾“å…¥</th><th>æ˜¾ç¤º</th><th>è¾“å…¥</th></tr></thead><tbody><tr><td>$\log$</td><td><code>\logâ€‹</code></td><td>$\lg$</td><td><code>\lgâ€‹</code></td><td>$\ln$</td><td><code>\ln</code></td></tr><tr><td>$\exp$</td><td><code>\expâ€‹</code></td><td>$\log_{e}$</td><td><code>\log_&#123;e&#125;â€‹</code></td><td>$\log_{10}$</td><td><code>\log_&#123;10&#125;</code></td></tr></tbody></table><h3 id="å¾®ç§¯åˆ†å’Œå¯¼æ•°"><a href="#å¾®ç§¯åˆ†å’Œå¯¼æ•°" class="headerlink" title="å¾®ç§¯åˆ†å’Œå¯¼æ•°"></a><a href="#%E5%BE%AE%E7%A7%AF%E5%88%86%E5%92%8C%E5%AF%BC%E6%95%B0" title="å¾®ç§¯åˆ†å’Œå¯¼æ•°"></a>å¾®ç§¯åˆ†å’Œå¯¼æ•°</h3><table><thead><tr><th>æ˜¾ç¤º</th><th>è¾“å…¥</th><th>æ˜¾ç¤º</th><th>è¾“å…¥</th><th>æ˜¾ç¤º</th><th>è¾“å…¥</th></tr></thead><tbody><tr><td>$\int$</td><td><code>\int</code></td><td>$\iint$</td><td><code>\iint</code></td><td>$\iiint$</td><td><code>\iiint</code></td></tr><tr><td>$\iiiint$</td><td><code>\iiiint</code></td><td>$\oint$</td><td><code>\oint</code></td><td>$\prime$</td><td><code>\prime</code></td></tr><tr><td>$\lim$</td><td><code>\lim</code></td><td>$\infty$</td><td><code>\infty</code></td><td>$\nabla$</td><td><code>\nabla</code></td></tr></tbody></table><h3 id="å…¶ä»–å…¬å¼"><a href="#å…¶ä»–å…¬å¼" class="headerlink" title="å…¶ä»–å…¬å¼"></a><a href="#%E5%85%B6%E4%BB%96%E5%85%AC%E5%BC%8F" title="å…¶ä»–å…¬å¼"></a>å…¶ä»–å…¬å¼</h3><table><thead><tr><th>æ˜¾ç¤º</th><th>è¾“å…¥</th><th>æ˜¾ç¤º</th><th>è¾“å…¥</th><th>æ˜¾ç¤º</th><th>è¾“å…¥</th></tr></thead><tbody><tr><td>$\inf$</td><td><code>\inf</code></td><td>$\arg$</td><td><code>\arg</code></td><td>$\det$</td><td><code>\det</code></td></tr><tr><td>$\dim$</td><td><code>\dim</code></td><td>$\gcd$</td><td><code>\gcd</code></td><td>$\ker$</td><td><code>\ker</code></td></tr><tr><td>$\Pr$</td><td><code>\Pr</code></td><td>$\deg$</td><td><code>\deg</code></td><td>$\sup$</td><td><code>\sup</code></td></tr><tr><td>$\hom$</td><td><code>\hom</code></td><td>$\max$</td><td><code>\max</code></td><td>$\min$</td><td><code>\min</code></td></tr></tbody></table><h3 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a><a href="#%E8%BF%90%E7%AE%97%E7%AC%A6" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h3><table><thead><tr><th>ç¬¦å·</th><th>å…¬å¼</th><th>ç¬¦å·</th><th>å…¬å¼</th><th>ç¬¦å·</th><th>å…¬å¼</th></tr></thead><tbody><tr><td>$+$</td><td><code>+</code></td><td>$-$</td><td><code>-</code></td><td>$\pm$</td><td><code>\pm</code></td></tr><tr><td>$\mp$</td><td><code>\mp</code></td><td>$\dotplus$</td><td><code>\dotplus</code></td><td>$\times$</td><td><code>\times</code></td></tr><tr><td>$\div$</td><td><code>\div</code></td><td>$\divideontimes$</td><td><code>\divideontimes</code></td><td>$&#x2F;$</td><td><code>/</code></td></tr><tr><td>$\backslash$</td><td><code>\backslash</code></td><td>$\cdot$</td><td><code>\cdot</code></td><td>$*$</td><td><code>*</code>æˆ–<code>\ast</code></td></tr><tr><td>$\star$</td><td><code>\star</code></td><td>$\circ$</td><td><code>\circ</code></td><td>$\bullet$</td><td><code>\bullet</code></td></tr><tr><td>$\boxplus$</td><td><code>\boxplus</code></td><td>$\boxminus$</td><td><code>\boxminus</code></td><td>$\boxtimes$</td><td><code>\boxtimes</code></td></tr><tr><td>$\boxdot$</td><td><code>\boxdot</code></td><td>$\oplus$</td><td><code>\oplus</code></td><td>$\ominus$</td><td><code>\ominus</code></td></tr><tr><td>$\otimes$</td><td><code>\otimes</code></td><td>$\oslash$</td><td><code>\oslash</code></td><td>$\odot$</td><td><code>\odot</code></td></tr><tr><td>$\circleddash$</td><td><code>\circleddash</code></td><td>$\circledcirc$</td><td><code>\circledcirc</code></td><td>$\circledast$</td><td><code>\circledast</code></td></tr><tr><td>$\bigoplus$</td><td><code>\bigoplus</code></td><td>$\bigotimes$</td><td><code>\bigotimes</code></td><td>$\bigodot$</td><td><code>\bigodot</code></td></tr></tbody></table><h3 id="é›†åˆç›¸å…³"><a href="#é›†åˆç›¸å…³" class="headerlink" title="é›†åˆç›¸å…³"></a><a href="#%E9%9B%86%E5%90%88%E7%9B%B8%E5%85%B3" title="é›†åˆç›¸å…³"></a>é›†åˆç›¸å…³</h3><table><thead><tr><th>ç¬¦å·</th><th>å…¬å¼</th><th>ç¬¦å·</th><th>å…¬å¼</th><th>ç¬¦å·</th><th>å…¬å¼</th></tr></thead><tbody><tr><td>$\{ \}$</td><td><code>\&#123; \&#125;</code></td><td>$\O$</td><td><code>\O</code>, <code>\empty</code>, <code>emptyset</code></td><td>$\varnothing$</td><td><code>\varnothing</code></td></tr><tr><td>$\in$</td><td><code>\in</code></td><td>$\notin$</td><td><code>\notin</code>æˆ–<code>\not\in</code></td><td>$\ni$</td><td><code>\ni</code></td></tr><tr><td>$\not\ni$</td><td><code>\not\ni</code></td><td>$\cap$</td><td><code>\cap</code></td><td>$\Cap$</td><td><code>\Cap</code></td></tr><tr><td>$\sqcap$</td><td><code>\sqcap</code></td><td>$\bigcap$</td><td><code>\bigcap</code></td><td>$\cup$</td><td><code>\cup</code></td></tr><tr><td>$\Cup$</td><td><code>\Cup</code></td><td>$\sqcup$</td><td><code>\sqcup</code></td><td>$\bigcup$</td><td><code>\bigcup</code></td></tr><tr><td>$\bigsqcup$</td><td><code>\bigsqcup</code></td><td>$\uplus$</td><td><code>\uplus</code></td><td>$\biguplus$</td><td><code>\biguplus</code></td></tr><tr><td>$\bigvee$</td><td><code>\bigvee</code></td><td>$\bigwedge$</td><td><code>\bigwedge</code></td><td></td><td></td></tr><tr><td>$\setminus$</td><td><code>\setminus</code></td><td>$\smallsetminus$</td><td><code>\smallsetminus</code></td><td>$\times$</td><td><code>\times</code></td></tr><tr><td>$\supset$</td><td><code>\subset</code></td><td>$\Subset$</td><td><code>\Subset</code></td><td>$\sqsubset$</td><td><code>\sqsubset</code></td></tr><tr><td>$\circleddash$</td><td><code>\supset</code></td><td>$\Supset$</td><td><code>\Supset</code></td><td>$\sqsupset$</td><td><code>\sqsupset</code></td></tr><tr><td>$\subseteq$</td><td><code>\subseteq</code></td><td>$\nsubseteq$</td><td><code>\nsubseteq</code></td><td>$\subsetneq$</td><td><code>\subsetneq</code></td></tr><tr><td>$\varsubsetneq$</td><td><code>\varsubsetneq</code></td><td>$\sqsubseteq$</td><td><code>\sqsubseteq</code></td><td></td><td></td></tr><tr><td>$\supseteq$</td><td><code>\supseteq</code></td><td>$\nsupseteq$</td><td><code>\nsupseteq</code></td><td>$\supsetneq$</td><td><code>\supsetneq</code></td></tr><tr><td>$\varsupsetneq$</td><td><code>\varsupsetneq</code></td><td>$\sqsupseteq$</td><td><code>\sqsupseteq</code></td><td></td><td></td></tr><tr><td>$\subseteqq$</td><td><code>\subseteqq</code></td><td>$\nsubseteqq$</td><td><code>\nsubseteqq</code></td><td>$\subsetneqq$</td><td><code>\subsetneqq</code></td></tr><tr><td>$\varsubsetneqq$</td><td><code>\varsubsetneqq</code></td><td></td><td></td><td></td><td></td></tr><tr><td>$\supseteqq$</td><td><code>\supseteqq</code></td><td>$\nsupseteqq$</td><td><code>\nsupseteqq</code></td><td>$\supsetneqq$</td><td><code>\supsetneqq</code></td></tr><tr><td>$\varsupsetneqq$</td><td><code>\varsupsetneqq</code></td><td></td><td></td><td></td><td></td></tr></tbody></table><h3 id="å…³ç³»ç¬¦å·"><a href="#å…³ç³»ç¬¦å·" class="headerlink" title="å…³ç³»ç¬¦å·"></a><a href="#%E5%85%B3%E7%B3%BB%E7%AC%A6%E5%8F%B7" title="å…³ç³»ç¬¦å·"></a>å…³ç³»ç¬¦å·</h3><table><thead><tr><th>ç¬¦å·</th><th>å…¬å¼</th><th>ç¬¦å·</th><th>å…¬å¼</th><th>ç¬¦å·</th><th>å…¬å¼</th></tr></thead><tbody><tr><td>$&#x3D;$</td><td><code>=</code></td><td>$\ne$</td><td><code>\ne</code>æˆ–<code>\neq</code></td><td>$\equiv$</td><td><code>\equiv</code></td></tr><tr><td>$\not\equiv$</td><td><code>\not\equiv</code></td><td>$\doteq$</td><td><code>\doteq</code></td><td>$\doteqdot$</td><td><code>\doteqdot</code></td></tr><tr><td>$\sim$</td><td><code>\sim</code></td><td>$\nsim$</td><td><code>\nsim</code></td><td>$\backsim$</td><td><code>\backsim</code></td></tr><tr><td>$\thicksim$</td><td><code>\thicksim</code></td><td>$\simeq$</td><td><code>\simeq</code></td><td>$\backsimeq$</td><td><code>\backsimeq</code></td></tr><tr><td>$\eqsim$</td><td><code>\eqsim</code></td><td>$\cong$</td><td><code>\cong</code></td><td>$\ncong$</td><td><code>\ncong</code></td></tr><tr><td>$\approx$</td><td><code>\approx</code></td><td>$\thickapprox$</td><td><code>\thickapprox</code></td><td>$\approxeq$</td><td><code>\approxeq</code></td></tr><tr><td>$\asymp$</td><td><code>\asymp</code></td><td>$\propto$</td><td><code>\propto</code></td><td>$\varpropto$</td><td><code>\varpropto</code></td></tr><tr><td>$&lt;$</td><td><code>&lt;</code></td><td>$\nless$</td><td><code>\nless</code></td><td>$\ll$</td><td><code>\ll</code></td></tr><tr><td>$\not\ll$</td><td><code>\not\ll</code></td><td>$\lll$</td><td><code>\lll</code></td><td>$\not\lll$</td><td><code>\not\lll</code></td></tr><tr><td>$\lessdot$</td><td><code>\lessdot</code></td><td>$\le$</td><td><code>\le</code>æˆ–<code>\leq</code></td><td>$\lneq$</td><td><code>\lneq</code></td></tr><tr><td>$\leqq$</td><td><code>\leqq</code></td><td>$\nleq$</td><td><code>\nleq</code></td><td>$\nleqq$</td><td><code>\nleqq</code></td></tr><tr><td>$\lneqq$</td><td><code>\lneqq</code></td><td>$\lvertneqq$</td><td><code>\lvertneqq</code></td><td>$\leqslant$</td><td><code>\leqslant</code></td></tr><tr><td>$\nleqslant$</td><td><code>\nleqslant</code></td><td>$\eqslantless$</td><td><code>\eqslantless</code></td><td>$\lesssim$</td><td><code>\lesssim</code></td></tr><tr><td>$\lnsim$</td><td><code>\lnsim</code></td><td>$\lessapprox$</td><td><code>\lessapprox</code></td><td>$\lnapprox$</td><td><code>\lnapprox</code></td></tr><tr><td>$&gt;$</td><td><code>&gt;</code></td><td>$\ngtr$</td><td><code>\ngtr</code></td><td>$\gg$</td><td><code>\gg</code></td></tr><tr><td>$\not\gg$</td><td><code>\not\gg</code></td><td>$\ggg$</td><td><code>\ggg</code></td><td>$\not\ggg$</td><td><code>\not\ggg</code></td></tr><tr><td>$\gtrdot$</td><td><code>\gtrdot</code></td><td>$\ge$</td><td><code>\ge</code>æˆ–<code>\geq</code></td><td>$\gneq$</td><td><code>\gneq</code></td></tr><tr><td>$\geqq$</td><td><code>\geqq</code></td><td>$\ngeq$</td><td><code>\ngeq</code></td><td>$\ngeqq$</td><td><code>\ngeqq</code></td></tr><tr><td>$\gneqq$</td><td><code>\gneqq</code></td><td>$\gvertneqq$</td><td><code>\gvertneqq</code></td><td>$\geqslant$</td><td><code>\geqslant</code></td></tr><tr><td>$\ngeqslant$</td><td><code>\ngeqslant</code></td><td>$\eqslantgtr$</td><td><code>\eqslantgtr</code></td><td>$\gtrsim$</td><td><code>\gtrsim</code></td></tr><tr><td>$\gnsim$</td><td><code>\gnsim</code></td><td>$\gtrapprox$</td><td><code>\gtrapprox</code></td><td>$\gnapprox$</td><td><code>\gnapprox</code></td></tr><tr><td>$\lessgtr$</td><td><code>\lessgtr</code></td><td>$\lesseqgtr$</td><td><code>\lesseqgtr</code></td><td>$\lesseqqgtr$</td><td><code>\lesseqqgtr</code></td></tr><tr><td>$\gtrless$</td><td><code>\gtrless</code></td><td>$\gtreqless$</td><td><code>\gtreqless</code></td><td>$\gtreqqless$</td><td><code>\gtreqqless</code></td></tr></tbody></table><h3 id="é€»è¾‘ç¬¦å·"><a href="#é€»è¾‘ç¬¦å·" class="headerlink" title="é€»è¾‘ç¬¦å·"></a><a href="#%E9%80%BB%E8%BE%91%E7%AC%A6%E5%8F%B7" title="é€»è¾‘ç¬¦å·"></a>é€»è¾‘ç¬¦å·</h3><table><thead><tr><th>ç¬¦å·</th><th>å…¬å¼</th><th>ç¬¦å·</th><th>å…¬å¼</th><th>ç¬¦å·</th><th>å…¬å¼</th></tr></thead><tbody><tr><td>$\forall$</td><td><code>\forall</code></td><td>$\exists$</td><td><code>\exists</code></td><td>$\nexists$</td><td><code>\nexists</code></td></tr><tr><td>$\therefore$</td><td><code>\therefore</code></td><td>$\because$</td><td><code>\because</code></td><td>$\And$</td><td><code>\And</code></td></tr><tr><td>$\or$</td><td><code>\or</code>, <code>\lor</code>, <code>\vee</code></td><td>$\and$</td><td><code>\and</code>, <code>\land</code>, <code>\wedge</code></td><td>$\overline{abc}$</td><td><code>\overline&#123;abc&#125;</code></td></tr><tr><td>$\neg$</td><td><code>\lnot</code>, <code>\neg</code></td><td>$\not\operatorname{R}$</td><td><code>\not\operatorname&#123;R&#125;</code></td><td>$\bar{abc}$</td><td><code>\bar&#123;abc&#125;</code></td></tr></tbody></table><h3 id="å„ç§ç®­å¤´"><a href="#å„ç§ç®­å¤´" class="headerlink" title="å„ç§ç®­å¤´"></a><a href="#%E5%90%84%E7%A7%8D%E7%AE%AD%E5%A4%B4" title="å„ç§ç®­å¤´"></a>å„ç§ç®­å¤´</h3><table><thead><tr><th>ç®­å¤´</th><th>å…¬å¼</th><th>ç®­å¤´</th><th>å…¬å¼</th><th>ç®­å¤´</th><th>å…¬å¼</th></tr></thead><tbody><tr><td>$\Rrightarrow$</td><td><code>\Rrightarrow</code></td><td>$\Lleftarrow$</td><td><code>\Lleftarrow</code></td><td>$\Rightarrow$</td><td><code>\Rightarrow</code></td></tr><tr><td>$\nRightarrow$</td><td><code>\nRightarrow</code></td><td>$\Longrightarrow$</td><td><code>\Longrightarrow</code></td><td>$\implies$</td><td><code>\implies</code></td></tr><tr><td>$\Leftarrow$</td><td><code>\Leftarrow</code></td><td>$\nLeftarrow$</td><td><code>\nLeftarrow</code></td><td>$\Longleftarrow$</td><td><code>\Longleftarrow</code></td></tr><tr><td>$\Leftrightarrow$</td><td><code>\Leftrightarrow</code></td><td>$\nLeftrightarrow$</td><td><code>\nLeftrightarrow</code></td><td>$\Longleftrightarrow$</td><td><code>\Longleftrightarrow</code></td></tr><tr><td>$\iff$</td><td><code>\iff</code></td><td>$\Uparrow$</td><td><code>\Uparrow</code></td><td>$\Downarrow$</td><td><code>\Downarrow</code></td></tr><tr><td>$\Updownarrow$</td><td><code>\Updownarrow</code></td><td>$\rightarrow$</td><td><code>\rightarrow</code>, <code>\to</code></td><td>$\nrightarrow$</td><td><code>\nrightarrow</code></td></tr><tr><td>$\longrightarrow$</td><td><code>\longrightarrow</code></td><td>$\leftarrow$</td><td><code>\leftarrow</code>,<code>\gets</code></td><td>$\nleftarrow$</td><td><code>\nleftarrow</code></td></tr><tr><td>$\longleftarrow$</td><td><code>\longleftarrow</code></td><td>$\leftrightarrow$</td><td><code>\leftrightarrow</code></td><td>$\nleftrightarrow$</td><td><code>\nleftrightarrow</code></td></tr><tr><td>$\longleftrightarrow$</td><td><code>\longleftrightarrow</code></td><td>$\uparrow$</td><td><code>\uparrow</code></td><td>$\downarrow$</td><td><code>\downarrow</code></td></tr><tr><td>$\updownarrow$</td><td><code>\updownarrow</code></td><td>$\nearrow$</td><td><code>\nearrow</code></td><td>$\swarrow$</td><td><code>\swarrow</code></td></tr><tr><td>$\nwarrow$</td><td><code>\nwarrow</code></td><td>$\searrow$</td><td><code>\searrow</code></td><td>$\mapsto$</td><td><code>\mapsto</code></td></tr><tr><td>$\longmapsto$</td><td><code>\longmapsto</code></td><td>$\rightharpoonup$</td><td><code>\rightharpoonup</code></td><td>$\rightharpoondown$</td><td><code>\rightharpoondown</code></td></tr><tr><td>$\leftharpoonup$</td><td><code>\leftharpoonup</code></td><td>$\leftharpoondown$</td><td><code>\leftharpoondown</code></td><td>$\upharpoonleft$</td><td><code>\upharpoonleft</code></td></tr><tr><td>$\upharpoonright$</td><td><code>\upharpoonright</code></td><td>$\downharpoonleft$</td><td><code>\downharpoonleft</code></td><td>$\downharpoonright$</td><td><code>\downharpoonright</code></td></tr><tr><td>$\rightleftharpoons$</td><td><code>\rightleftharpoons</code></td><td>$\leftrightharpoons$</td><td><code>\leftrightharpoons</code></td><td>$\curvearrowleft$</td><td><code>\curvearrowleft</code></td></tr><tr><td>$\circlearrowleft$</td><td><code>\circlearrowleft</code></td><td>$\Lsh$</td><td><code>\Lsh</code></td><td>$\upuparrows$</td><td><code>\upuparrows</code></td></tr><tr><td>$\rightrightarrows$</td><td><code>\rightrightarrows</code></td><td>$\rightleftarrows$</td><td><code>\rightleftarrows</code></td><td>$\rightarrowtail$</td><td><code>\rightarrowtail</code></td></tr><tr><td>$\looparrowright$</td><td><code>\looparrowright</code></td><td>$\curvearrowright$</td><td><code>\curvearrowright</code></td><td>$\circlearrowright$</td><td><code>\circlearrowright</code></td></tr><tr><td>$\Rsh$</td><td><code>\Rsh</code></td><td>$\downdownarrows$</td><td><code>\downdownarrows</code></td><td>$\leftleftarrows$</td><td><code>\leftleftarrows</code></td></tr><tr><td>$\leftrightarrows$</td><td><code>\leftrightarrows</code></td><td>$\leftarrowtail$</td><td><code>\leftarrowtail</code></td><td>$\looparrowleft$</td><td><code>\looparrowleft</code></td></tr><tr><td>$\hookrightarrow$</td><td><code>\hookrightarrow</code></td><td>$\hookleftarrow$</td><td><code>\hookleftarrow</code></td><td>$\multimap$</td><td><code>\multimap</code></td></tr><tr><td>$\leftrightsquigarrow$</td><td><code>\leftrightsquigarrow</code></td><td>$\rightsquigarrow$</td><td><code>\rightsquigarrow</code></td><td>$\twoheadrightarrow$</td><td><code>\twoheadrightarrow</code></td></tr><tr><td>$\twoheadleftarrow$</td><td><code>\twoheadleftarrow</code></td><td></td><td></td><td></td><td></td></tr></tbody></table><h3 id="å¸¦å¸½ç¬¦å·"><a href="#å¸¦å¸½ç¬¦å·" class="headerlink" title="å¸¦å¸½ç¬¦å·"></a><a href="#%E5%B8%A6%E5%B8%BD%E7%AC%A6%E5%8F%B7" title="å¸¦å¸½ç¬¦å·"></a>å¸¦å¸½ç¬¦å·</h3><table><thead><tr><th>æ•ˆæœ</th><th>å…¬å¼</th><th>æ•ˆæœ</th><th>å…¬å¼</th><th>æ•ˆæœ</th><th>å…¬å¼</th></tr></thead><tbody><tr><td>$\dot{a}$</td><td><code>\dot&#123;a&#125;</code></td><td>$\ddot{a}$</td><td><code>\ddot&#123;a&#125;</code></td><td>$\acute{a}$</td><td><code>\acute&#123;a&#125;</code></td></tr><tr><td>$\grave{a}$</td><td><code>\grave&#123;a&#125;</code></td><td>$\check{a}$</td><td><code>\check&#123;a&#125;</code></td><td>$\tilde{a}$</td><td><code>\tilde&#123;a&#125;</code></td></tr><tr><td>$\bar{a}$</td><td><code>\bar&#123;a&#125;</code></td><td>$\hat{a}$</td><td><code>\hat&#123;a&#125;</code></td><td>$\widehat{abc}$</td><td><code>\widehat&#123;abc&#125;</code></td></tr><tr><td>$\vec{a}$</td><td><code>\vec&#123;a&#125;</code></td><td>$\breve{a}$</td><td><code>\breve&#123;a&#125;</code></td><td>$\widetilde{abc}$</td><td><code>\widetilde&#123;abc&#125;</code></td></tr></tbody></table><h3 id="å¸Œè…Šå­—æ¯"><a href="#å¸Œè…Šå­—æ¯" class="headerlink" title="å¸Œè…Šå­—æ¯"></a><a href="#%E5%B8%8C%E8%85%8A%E5%AD%97%E6%AF%8D" title="å¸Œè…Šå­—æ¯"></a>å¸Œè…Šå­—æ¯</h3><h4 id="å¤§å†™å¸Œè…Šå­—æ¯"><a href="#å¤§å†™å¸Œè…Šå­—æ¯" class="headerlink" title="å¤§å†™å¸Œè…Šå­—æ¯"></a><a href="#%E5%A4%A7%E5%86%99%E5%B8%8C%E8%85%8A%E5%AD%97%E6%AF%8D" title="å¤§å†™å¸Œè…Šå­—æ¯"></a>å¤§å†™å¸Œè…Šå­—æ¯</h4><table><thead><tr><th>å­—æ¯</th><th>å…¬å¼</th><th>å­—æ¯</th><th>å…¬å¼</th><th>å­—æ¯</th><th>å…¬å¼</th></tr></thead><tbody><tr><td>$\Alpha$</td><td><code>\Alpha</code></td><td>$\Beta$</td><td><code>\Beta</code></td><td>$\Gamma$</td><td><code>\Gamma</code></td></tr><tr><td>$\Delta$</td><td><code>\Delta</code></td><td>$\Epsilon$</td><td><code>\Epsilon</code></td><td>$\Zeta$</td><td><code>\Zeta</code></td></tr><tr><td>$\Eta$</td><td><code>\Eta</code></td><td>$\Theta$</td><td><code>\Theta</code></td><td>$\Iota$</td><td><code>\Iota</code></td></tr><tr><td>$\Kappa$</td><td><code>\Kappa</code></td><td>$\Lambda$</td><td><code>\Lambda</code></td><td>$\Mu$</td><td><code>\Mu</code></td></tr><tr><td>$\Nu$</td><td><code>\Nu</code></td><td>$\Xi$</td><td><code>\Xi</code></td><td>$\Omicron$</td><td><code>\Omicron</code></td></tr><tr><td>$\Pi$</td><td><code>\Pi</code></td><td>$\Rho$</td><td><code>\Rho</code></td><td>$\Sigma$</td><td><code>\Sigma</code></td></tr><tr><td>$\Tau$</td><td><code>\Tau</code></td><td>$\Upsilon$</td><td><code>\Upsilon</code></td><td>$\Phi$</td><td><code>\Phi</code></td></tr><tr><td>$\Chi$</td><td><code>\Chiâ€‹</code></td><td>$\Psi$</td><td><code>\Psi</code></td><td>$\Omega$</td><td><code>\Omega</code></td></tr></tbody></table><p>PS: å¦‚æœå…¬å¼å‡ºç°æ ‡çº¢, åªæ˜¯å› ä¸ºæ–°ç‰ˆæœ¬çš„MathTypeä¸æ”¯æŒåœ¨å½“å‰é¡µé¢çš„æ˜¾ç¤º.</p><h4 id="å°å†™å¸Œè…Šå­—æ¯"><a href="#å°å†™å¸Œè…Šå­—æ¯" class="headerlink" title="å°å†™å¸Œè…Šå­—æ¯"></a><a href="#%E5%B0%8F%E5%86%99%E5%B8%8C%E8%85%8A%E5%AD%97%E6%AF%8D" title="å°å†™å¸Œè…Šå­—æ¯"></a>å°å†™å¸Œè…Šå­—æ¯</h4><table><thead><tr><th>å­—æ¯</th><th>å…¬å¼</th><th>å­—æ¯</th><th>å…¬å¼</th><th>å­—æ¯</th><th>å…¬å¼</th></tr></thead><tbody><tr><td>$\alpha$</td><td><code>\alpha</code></td><td>$\beta$</td><td><code>\beta</code></td><td>$\gamma$</td><td><code>\gamma</code></td></tr><tr><td>$\delta$</td><td><code>\delta</code></td><td>$\epsilon$</td><td><code>\epsilon</code></td><td>$\zeta$</td><td><code>\zeta</code></td></tr><tr><td>$\eta$</td><td><code>\eta</code></td><td>$\theta$</td><td><code>\theta</code></td><td>$\iota$</td><td><code>\iota</code></td></tr><tr><td>$\kappa$</td><td><code>\kappa</code></td><td>$\lambda$</td><td><code>\lambda</code></td><td>$\mu$</td><td><code>\mu</code></td></tr><tr><td>$\nu$</td><td><code>\nu</code></td><td>$\omicron$</td><td><code>\omicron</code></td><td>$\xi$</td><td><code>\xi</code></td></tr><tr><td>$\pi$</td><td><code>\pi</code></td><td>$\rho$</td><td><code>\rho</code></td><td>$\sigma$</td><td><code>\sigma</code></td></tr><tr><td>$\tau$</td><td><code>\tau</code></td><td>$\upsilon$</td><td><code>\upsilon</code></td><td>$\phi$</td><td><code>\phi</code></td></tr><tr><td>$\chi$</td><td><code>\chi</code></td><td>$\psi$</td><td><code>psi</code></td><td>$\omega$</td><td><code>\omega</code></td></tr></tbody></table><h4 id="éƒ¨åˆ†å­—æ¯å˜é‡ä¸“ç”¨å½¢å¼"><a href="#éƒ¨åˆ†å­—æ¯å˜é‡ä¸“ç”¨å½¢å¼" class="headerlink" title="éƒ¨åˆ†å­—æ¯å˜é‡ä¸“ç”¨å½¢å¼"></a><a href="#%E9%83%A8%E5%88%86%E5%AD%97%E6%AF%8D%E5%8F%98%E9%87%8F%E4%B8%93%E7%94%A8%E5%BD%A2%E5%BC%8F" title="éƒ¨åˆ†å­—æ¯å˜é‡ä¸“ç”¨å½¢å¼"></a>éƒ¨åˆ†å­—æ¯å˜é‡ä¸“ç”¨å½¢å¼</h4><p>ä»¥<code>\var-</code>å¼€å¤´.</p><table><thead><tr><th>å­—æ¯</th><th>å…¬å¼</th><th>å­—æ¯</th><th>å…¬å¼</th></tr></thead><tbody><tr><td>$\varepsilon$</td><td><code>\varepsilon</code></td><td>$\varrho$</td><td><code>\varrho</code></td></tr><tr><td>$\varphi$</td><td><code>\varphi</code></td><td>$\varsigma$</td><td><code>\varsigma</code></td></tr><tr><td>$\varkappa$</td><td><code>\varkappa</code></td><td>$\vartheta$</td><td><code>\vartheta</code></td></tr><tr><td>$\varpi$</td><td><code>\varpi</code></td><td>$\digamma$</td><td><code>\digamm</code></td></tr></tbody></table><h4 id="ç±»å­—æ¯å’Œå¸¸æ•°"><a href="#ç±»å­—æ¯å’Œå¸¸æ•°" class="headerlink" title="ç±»å­—æ¯å’Œå¸¸æ•°"></a><a href="#%E7%B1%BB%E5%AD%97%E6%AF%8D%E5%92%8C%E5%B8%B8%E6%95%B0" title="ç±»å­—æ¯å’Œå¸¸æ•°"></a>ç±»å­—æ¯å’Œå¸¸æ•°</h4><table><thead><tr><th>å­—æ¯</th><th>å…¬å¼</th><th>å­—æ¯</th><th>å…¬å¼</th><th>å­—æ¯</th><th>å…¬å¼</th></tr></thead><tbody><tr><td>$\infty$</td><td><code>\infty</code></td><td>$\aleph$</td><td><code>\aleph</code></td><td>$\complement$</td><td><code>\complement</code></td></tr><tr><td>$\backepsilon$</td><td><code>\backepsilon</code></td><td>$\eth$</td><td><code>\eth</code></td><td>$\Finv$</td><td><code>\Finv</code></td></tr><tr><td>$\hbar$</td><td><code>\hbar</code></td><td>$\theta$</td><td><code>\Im</code></td><td>$\imath$</td><td><code>\imath</code></td></tr><tr><td>$\jmath$</td><td><code>\jmath</code></td><td>$\Bbbk$</td><td><code>\Bbbk</code></td><td>$\ell$</td><td><code>\ell</code></td></tr><tr><td>$\mho$</td><td><code>\mho</code></td><td>$\wp$</td><td><code>\wp</code></td><td>$\Re$</td><td><code>\Re</code></td></tr><tr><td>$\circledS$</td><td><code>\circledS</code></td><td></td><td></td><td></td><td></td></tr></tbody></table><h2 id="å­—ä½“è½¬æ¢"><a href="#å­—ä½“è½¬æ¢" class="headerlink" title="å­—ä½“è½¬æ¢"></a><a href="#%E5%AD%97%E4%BD%93%E8%BD%AC%E6%8D%A2" title="å­—ä½“è½¬æ¢"></a>å­—ä½“è½¬æ¢</h2><p>ç”¨<code>&#123;\å­—ä½“ &#123;éœ€è½¬æ¢çš„éƒ¨åˆ†å­—ç¬¦&#125;&#125;</code>æ¥å˜æ›´å­—ä½“, å…¬å¼é»˜è®¤ä¸ºæ„å¤§åˆ©ä½“.</p><table><thead><tr><th>è¾“å…¥</th><th>è¯´æ˜</th><th>æ˜¾ç¤º</th><th>è¾“å…¥</th><th>è¯´æ˜</th><th>æ˜¾ç¤º</th></tr></thead><tbody><tr><td><code>\rm</code></td><td>ç½—é©¬ä½“</td><td>${\rm Sample}$</td><td><code>\cal</code></td><td>èŠ±ä½“</td><td>${\cal Sample}$</td></tr><tr><td><code>\it</code></td><td>æ„å¤§åˆ©ä½“</td><td>${\it Sample}$</td><td><code>\Bbb</code></td><td>é»‘æ¿ç²—ä½“</td><td>${\Bbb Sample}$</td></tr><tr><td><code>\bf</code></td><td>ç²—ä½“</td><td>${\bf Sample}$</td><td><code>\mit</code></td><td>æ•°å­¦æ–œä½“</td><td>${\mit Sample}$</td></tr><tr><td><code>\sf</code></td><td>ç­‰çº¿ä½“</td><td>${\sf Sample}$</td><td><code>\scr</code></td><td>æ‰‹å†™ä½“</td><td>${\scr Sample}$</td></tr><tr><td><code>\tt</code></td><td>æ‰“å­—æœºä½“</td><td>${\tt Sample}$</td><td><code>\frak</code></td><td>æ—§å¾·å¼å­—ä½“</td><td>${\frak Sample}$</td></tr></tbody></table><p>å¦‚æœæƒ³ç›´æ¥ä»æ–œä½“å˜ä¸ºéæ–œä½“, å¯ä»¥ä½¿ç”¨<code>\text&#123;å†…å®¹&#125;</code>.<br>$$<br>\begin{array}{cc}<br>\mathrm{Bad} &amp; \mathrm{Better} \\<br>\hline \\<br>\int_0^1 x^2 dx &amp; \int_0^1 x^2 \,{\rm d}x<br>\end{array}<br>$$</p><h2 id="æ›´æ”¹å­—ä½“é¢œè‰²"><a href="#æ›´æ”¹å­—ä½“é¢œè‰²" class="headerlink" title="æ›´æ”¹å­—ä½“é¢œè‰²"></a><a href="#%E6%9B%B4%E6%94%B9%E5%AD%97%E4%BD%93%E9%A2%9C%E8%89%B2" title="æ›´æ”¹å­—ä½“é¢œè‰²"></a>æ›´æ”¹å­—ä½“é¢œè‰²</h2><p><code>MathJax3</code>è¿˜ä¸æ”¯æŒæ¸²æŸ“å­—ä½“çš„é¢œè‰², å¤§å¤šæ•°æƒ…å†µä¸‹è¿™ä¸ªé¢œè‰²ä¹Ÿæ˜¯ä¸€ä¸ªé¸¡è‚‹åŠŸèƒ½. å¦‚æœæƒ³çŸ¥é“å¦‚ä½•æ·»åŠ å¯ä»¥çœ‹æ–‡ç« æœ€å¼€å¤´è¯´çš„ä¸¤ç¯‡åšå®¢, é‡Œé¢æœ‰å†™åˆ°æ›´æ”¹é¢œè‰²çš„è¯¦ç»†æ–¹æ³•.</p><h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><ul><li><a href="http://masikkk.com/article/MathJax/">MathJaxæ•°å­¦å…¬å¼</a></li><li><a href="https://adaning.github.io/posts/54490.html">Markdownå…¬å¼æ•´ç†l</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdownä½¿ç”¨è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äº‘é‡Œé›¾é‡Œå¡å°”æ›¼æ»¤æ³¢</title>
      <link href="/2023/10/08/yun-li-wu-li-qia-er-man-lu-bo/"/>
      <url>/2023/10/08/yun-li-wu-li-qia-er-man-lu-bo/</url>
      
        <content type="html"><![CDATA[<h1 id="å¡å°”æ›¼æ»¤æ³¢ç®€ä»‹"><a href="#å¡å°”æ›¼æ»¤æ³¢ç®€ä»‹" class="headerlink" title="å¡å°”æ›¼æ»¤æ³¢ç®€ä»‹"></a>å¡å°”æ›¼æ»¤æ³¢ç®€ä»‹</h1><ul><li><strong>ç›®çš„</strong>Â ï¼šå¯¹çº¿æ€§ç³»ç»ŸçŠ¶æ€çš„ä¼°è®¡</li></ul><p>å¡å°”æ›¼æ»¤æ³¢ï¼ˆKalman filteringï¼‰ä¸€ç§åˆ©ç”¨çº¿æ€§ç³»ç»ŸçŠ¶æ€æ–¹ç¨‹ï¼Œé€šè¿‡ç³»ç»Ÿè¾“å…¥è¾“å‡ºè§‚æµ‹æ•°æ®ï¼Œå¯¹ç³»ç»ŸçŠ¶æ€è¿›è¡Œæœ€ä¼˜ä¼°è®¡çš„ç®—æ³•ã€‚ç”±äºè§‚æµ‹æ•°æ®ä¸­åŒ…æ‹¬ç³»ç»Ÿä¸­çš„å™ªå£°å’Œå¹²æ‰°çš„å½±å“ï¼Œæ‰€ä»¥æœ€ä¼˜ä¼°è®¡ä¹Ÿå¯çœ‹ä½œæ˜¯æ»¤æ³¢è¿‡ç¨‹ã€‚ æ–¯å¦åˆ©Â·æ–½å¯†ç‰¹(Stanley Schmidt)é¦–æ¬¡å®ç°äº†å¡å°”æ›¼æ»¤æ³¢å™¨ã€‚å¡å°”æ›¼åœ¨NASAåŸƒå§†æ–¯ç ”ç©¶ä¸­å¿ƒè®¿é—®æ—¶ï¼Œå‘ç°ä»–çš„æ–¹æ³•å¯¹äºè§£å†³é˜¿æ³¢ç½—è®¡åˆ’çš„è½¨é“é¢„æµ‹å¾ˆæœ‰ç”¨ï¼Œåæ¥é˜¿æ³¢ç½—é£èˆ¹çš„å¯¼èˆªç”µè„‘ä½¿ç”¨äº†è¿™ç§æ»¤æ³¢å™¨ã€‚ Â </p><h1 id="å¡å°”æ›¼æ»¤æ³¢åŸç†"><a href="#å¡å°”æ›¼æ»¤æ³¢åŸç†" class="headerlink" title="å¡å°”æ›¼æ»¤æ³¢åŸç†"></a>å¡å°”æ›¼æ»¤æ³¢åŸç†</h1><ul><li><strong>æ–¹æ³•</strong>Â ï¼šåˆ©ç”¨çŠ¶æ€è¿‡ç¨‹ä¸­çš„å™ªå£°Ï‰ å’Œ è§‚æµ‹å™ªå£°Ï… ï¼Œç»™äºˆåˆç†çš„æƒé‡ï¼Œå¯¹çŠ¶æ€x è¿›è¡Œä¼°è®¡</li></ul><p>è¯¦è§£çš„åŸæ–‡é“¾æ¥ï¼š<a href="http://www.bzarg.com/p/how-a-kalman-filter-works-in-pictures/">http://www.bzarg.com/p/how-a-kalman-filter-works-in-pictures/</a> å¯¹æ­¤ï¼Œè¿›è¡Œä¸€äº›ç®€å•çš„æè¿°ï¼Œåªæ±‚é€šä¿—æ˜“æ‡‚ï¼š å‡å¦‚æƒ³å¼€å‘äº†ä¸€ä¸ªå¯ä»¥åœ¨æ ‘æ—é‡Œåˆ°å¤„è·‘çš„å°æœºå™¨äººï¼Œé‚£ä¹ˆéœ€è¦çŸ¥é“å®ƒå®æ—¶æ‰€åœ¨çš„ä½ç½®ï¼Œæ‰èƒ½å¯¼èˆªã€‚ å¯ä»¥åœ¨æœºå™¨äººä¸Šè£…GPSå®šä½è£…ç½®ï¼Œç²¾åº¦å¤§çº¦ä¸º10ç±³ï¼Œ ä½†æ ‘æ—é‡Œæœ‰å¾ˆå¤šæ²Ÿå£‘å’Œæ‚¬å´–ï¼Œå¦‚æœæœºå™¨äººèµ°é”™äº†ä¸€æ­¥ï¼Œå°±æœ‰å¯èƒ½æ‰ä¸‹æ‚¬å´–ï¼Œæ‰€ä»¥è¿™è¿œè¿œä¸å¤Ÿã€‚ æ­¤æ—¶è¿˜å¯ä»¥è·å–ä¸€äº›è¿åŠ¨çš„ä¿¡æ¯: æ·»åŠ é‡Œç¨‹è®¡å’Œæƒ¯æ€§æƒ¯æ€§æµ‹é‡å•å…ƒè®°å½•è¿åŠ¨çš„è¿‡ç¨‹ï¼Œåˆ¤æ–­å‡ºæœºå™¨äººçš„å§¿åŠ¿å’Œè¡Œèµ°è·ç¦»ã€‚ è·å–å‘é€ç»™ç”µæœºçš„æŒ‡ä»¤ï¼ŒçŸ¥é“æœºå™¨äººæ˜¯å¦åœ¨æœä¸€ä¸ªæ–¹å‘ç§»åŠ¨å¹¶ä¸”æ²¡æœ‰äººå¹²é¢„ï¼Œé¢„æµ‹åœ¨ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼Œæœºå™¨äººå¾ˆå¯èƒ½æœç€ç›¸åŒçš„æ–¹å‘ç§»åŠ¨ã€‚ ä½†ç”±äºä¼ æ„Ÿå™¨çš„ç²¾åº¦ã€æ ‘æ—é‡Œçš„å‘å‘æ´¼æ´¼å’Œè‡ªç„¶ç•Œçš„é£ç­‰å½±å“ï¼Œé‡Œç¨‹è®¡å’Œæƒ¯æ€§æµ‹é‡å•å…ƒå®é™…å¹¶ä¸èƒ½éå¸¸ç²¾ç¡®è¡¨ç¤ºæœºå™¨äººå®é™…å§¿åŠ¿å’Œè¡Œèµ°è·ç¦»ï¼Œé¢„æµ‹ä¹Ÿä¸æ˜¯å¾ˆå®Œç¾ã€‚ GPS ã€é‡Œç¨‹è®¡å’Œæƒ¯æ€§æµ‹é‡å•å…ƒç­‰ä¼ æ„Ÿå™¨å‘Šè¯‰äº†æˆ‘ä»¬ä¸€äº›çŠ¶æ€ä¿¡æ¯ï¼Œæˆ‘ä»¬çš„é¢„æµ‹å‘Šè¯‰äº†æˆ‘ä»¬æœºå™¨äººä¼šæ€æ ·è¿åŠ¨ï¼Œä½†éƒ½åªæ˜¯é—´æ¥çš„ï¼Œå¹¶ä¸”ä¼´éšç€ä¸€äº›ä¸ç¡®å®šå’Œä¸å‡†ç¡®æ€§ã€‚ ä½†æ˜¯ï¼Œå¦‚æœä½¿ç”¨æ‰€æœ‰å¯¹æˆ‘ä»¬å¯ç”¨çš„ä¿¡æ¯ï¼Œæ ¹æ®å…¶æœ¬èº«çš„å™ªå£°ï¼Œåˆ†é…ä¸€å®šçš„æƒé‡ï¼Œå°±èƒ½å¾—åˆ°ä¸€ä¸ªæ¯”ä»»ä½•ä¾æ®è‡ªèº«ä¼°è®¡æ›´å¥½çš„ç»“æœï¼Œè¿™å°±æ˜¯å¡å°”æ›¼æ»¤æ³¢çš„ç”¨å¤„ã€‚ Â  Â </p><h1 id="å¡å°”æ›¼æ»¤æ³¢çš„äº”ä¸ªå…¬å¼"><a href="#å¡å°”æ›¼æ»¤æ³¢çš„äº”ä¸ªå…¬å¼" class="headerlink" title="å¡å°”æ›¼æ»¤æ³¢çš„äº”ä¸ªå…¬å¼"></a>å¡å°”æ›¼æ»¤æ³¢çš„äº”ä¸ªå…¬å¼</h1><p>å…ˆäº†è§£ä¸€ä¸‹å¡å°”æ›¼æ»¤æ³¢çš„äº”ä¸ªå…¬å¼ï¼š</p><ul><li><strong>å…¬å¼1</strong>ï¼šè®¡ç®—é¢„æµ‹çŠ¶æ€å€¼</li></ul><p>$$<br>x_{k}^\prime&#x3D;A x_{k-1} + Bu_{k-1}<br>$$</p><p>$$<br>\hat{a}<br>$$</p><p>$$<br>a^\prime<br>$$</p><ul><li><p><strong>å…¬å¼2</strong>ï¼šè®¡ç®—é¢„æµ‹å€¼å’ŒçœŸå®å€¼ä¹‹é—´çš„é¢„æµ‹è¯¯å·®åæ–¹å·®çŸ©é˜µ<br>$$<br>P_{k}^\prime &#x3D;A P_{k-1} A^T+Q<br>$$</p></li><li><p><strong>å…¬å¼3</strong>ï¼šæ±‚å¾—å¡å°”æ›¼å¢ç›Š<br>$$<br>K_k &#x3D;P_{k}^\prime H^T(H P_{k}^\prime H^T+R)^{-1}<br>$$</p></li><li><p><strong>å…¬å¼4</strong>ï¼šè®¡ç®—ä¼°è®¡å€¼<br>$$<br>x_k &#x3D;x_{k}^\prime+K_k(Z_k-H x_{k}^\prime)<br>$$</p></li><li><p><strong>å…¬å¼5</strong>ï¼šè®¡ç®—ä¼°è®¡å€¼å’ŒçœŸå®å€¼ä¹‹é—´çš„è¯¯å·®åæ–¹å·®çŸ©é˜µ<br>$$<br>P_k &#x3D;(I-K_k H) P_{k}^\prime<br>$$</p></li></ul><h1 id="å¡å°”æ›¼æ»¤æ³¢çš„å…¬å¼æ¨å¯¼"><a href="#å¡å°”æ›¼æ»¤æ³¢çš„å…¬å¼æ¨å¯¼" class="headerlink" title="å¡å°”æ›¼æ»¤æ³¢çš„å…¬å¼æ¨å¯¼"></a>å¡å°”æ›¼æ»¤æ³¢çš„å…¬å¼æ¨å¯¼</h1><h2 id="ç¬¦å·è¯´æ˜"><a href="#ç¬¦å·è¯´æ˜" class="headerlink" title="ç¬¦å·è¯´æ˜"></a>ç¬¦å·è¯´æ˜</h2><p>$x_k: {k}$ æ—¶åˆ»çš„çŠ¶æ€<br>$\hat{x}_{k}^\prime: k$ æ—¶åˆ»çš„é¢„æµ‹çŠ¶æ€ (æœªä¼˜åŒ–)<br>$\hat{x}_k: k$ æ—¶åˆ»çš„ä¼˜åŒ–é¢„æµ‹çŠ¶æ€<br>$\tilde{x}_k: k$ æ—¶åˆ»çš„çŠ¶æ€æ–°æ¯ (çŠ¶æ€ - é¢„æµ‹çŠ¶æ€)  </p><p>$Z_k: {k}$ æ—¶åˆ»çš„è§‚æµ‹å€¼<br>$\hat{Z}_{k}^\prime: {k}$ æ—¶åˆ»çš„é¢„æµ‹è§‚æµ‹å€¼ (æœªä¼˜åŒ–)<br>$\hat{Z}_k: {k}$ æ—¶åˆ»çš„ä¼˜åŒ–é¢„æµ‹è§‚æµ‹å€¼<br>$\tilde{Z}_k: {k}$ æ—¶åˆ»çš„è§‚æµ‹æ–°æ¯ (è§‚æµ‹ - é¢„æµ‹è§‚æµ‹)  </p><p>$A$ : çŠ¶æ€è½¬ç§»çŸ©é˜µ<br>$B$ ï¼šè¾“å…¥æ§åˆ¶çŸ©é˜µ<br>$H$ : è§‚æµ‹çŸ©é˜µ<br>$Q$ : é¢„æµ‹å™ªå£°åæ–¹å·®çŸ©é˜µ<br>$R$ : è§‚æµ‹å™ªå£°åæ–¹å·®çŸ©é˜µ<br>$P$ : è¯¯å·®çŸ©é˜µ  </p><p>$K_k: {k}$ æ—¶åˆ»çš„å¡å°”æ›¼å¢ç›Š (è§‚æµ‹æƒé‡)<br>$\omega_k: {k}$ æ—¶åˆ»çš„è¿‡ç¨‹å™ªå£°<br>${v}_k: {k}$ æ—¶åˆ»çš„è§‚æµ‹å™ªå£°<br>$u_k: {k}$ æ—¶åˆ»å¤–ç•Œå¯¹ç³»ç»Ÿçš„ä½œç”¨  </p><h2 id="æ¦‚å¿µè¯´æ˜"><a href="#æ¦‚å¿µè¯´æ˜" class="headerlink" title="æ¦‚å¿µè¯´æ˜"></a>æ¦‚å¿µè¯´æ˜</h2><h3 id="é«˜æ–¯åˆ†å¸ƒ"><a href="#é«˜æ–¯åˆ†å¸ƒ" class="headerlink" title="é«˜æ–¯åˆ†å¸ƒ"></a>é«˜æ–¯åˆ†å¸ƒ</h3><p>é€šè¿‡æ¦‚ç‡å¯†åº¦å‡½æ•°æ¥å®šä¹‰é«˜æ–¯åˆ†å¸ƒï¼š </p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E5%8D%A1%E5%B0%94%E6%9B%BC%E6%BB%A4%E6%B3%A2/3-13.png" alt="3"> Â </p><p>é«˜æ–¯åˆ†å¸ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°æ˜¯ï¼š<br>$$<br>p(y)&#x3D;\frac{1}{\sigma \sqrt{2 \pi}} e^{-\frac{(y-\mu)^2}{2 \sigma^2}}<br>$$</p><p>å‡å€¼ä¸º$Î¼$ï¼Œæ ‡å‡†å·®ä¸º$Ïƒ$ è€Œä¸Šè¿°çš„è¿‡ç¨‹å™ªå£°$\omega$ å’Œ è§‚æµ‹å™ªå£°$\upsilon$çš†æœä»é«˜æ–¯åˆ†å¸ƒã€‚ Â </p><h3 id="åæ–¹å·®çŸ©é˜µ"><a href="#åæ–¹å·®çŸ©é˜µ" class="headerlink" title="åæ–¹å·®çŸ©é˜µ"></a>åæ–¹å·®çŸ©é˜µ</h3><ul><li><p><strong>æ–¹å·®</strong>ï¼šå„ä¸ªæ ·æœ¬ä¸æ ·æœ¬å‡å€¼çš„å·®çš„å¹³æ–¹å’Œçš„å‡å€¼ï¼Œåº¦é‡ä¸€ç»„æ•°æ®çš„åˆ†æ•£ç¨‹åº¦ã€‚ </p></li><li><p><strong>åæ–¹å·®</strong>ï¼šä¸¤ä¸ªå˜é‡æ€»ä½“è¯¯å·®çš„æœŸæœ›ï¼Œåº¦é‡ä¸¤ä¸ªå˜é‡çº¿æ€§ç›¸å…³æ€§ç¨‹åº¦ã€‚ å½“ä¸¤ä¸ªå˜é‡æ˜¯ç›¸åŒçš„æƒ…å†µï¼Œåæ–¹å·®å°±æ˜¯æ–¹å·®ã€‚ å¦‚æœä¸¤ä¸ªå˜é‡çš„å˜åŒ–è¶‹åŠ¿ç›¸åï¼Œå…¶ä¸­ä¸€ä¸ªå˜é‡å¤§äºè‡ªèº«çš„æœŸæœ›å€¼æ—¶ï¼Œå¦å¤–ä¸€ä¸ªå´å°äºè‡ªèº«çš„æœŸæœ›å€¼ï¼Œé‚£ä¹ˆä¸¤ä¸ªå˜é‡ä¹‹é—´çš„åæ–¹å·®å°±æ˜¯è´Ÿå€¼ã€‚ ä¸¤è€…ä¹‹é—´çš„è”ç³»æˆ–è€…å…³ç³»ï¼Œå…³ç³»è¶Šå¤§ï¼Œåæ–¹å·®è¶Šå¤§ã€‚ </p></li><li><p><strong>åæ–¹å·®çŸ©é˜µ</strong>ï¼šæ•°æ®é›†ä¸­ä¸¤ä¸¤å˜é‡çš„åæ–¹å·®ç»„æˆï¼Œæ¯ä¸ªå…ƒç´ æ˜¯å„ä¸ªå‘é‡å…ƒç´ ä¹‹é—´çš„åæ–¹å·® å™ªå£°åæ–¹å·®çŸ©é˜µè¶Šå°è¯´æ˜å™ªå£°çš„è¯¯å·®è¶Šå°ï¼Œå¯ä¿¡åº¦è¶Šé«˜ï¼Œå…¶å¯¹è§’çº¿ä¸Šçš„å€¼å°±æ˜¯æ–¹å·®ã€‚ è¯¯å·®åæ–¹å·®çŸ©é˜µè¶Šå°è¯´æ˜è¿‡ç¨‹å™ªå£°å’Œé‡æµ‹å™ªå£°çš„å…³ç³»è¶Šå°ï¼Œç”¨æ¯”ä¾‹åˆ†å¼€è¿‡ç¨‹å™ªå£°$\omega$ å’Œ è§‚æµ‹å™ªå£°$\upsilon$ï¼Œå¦‚æœå…³ç³»è¶Šå°ï¼Œåˆ†å¼€çš„è¶Šç²¾ç¡®ã€‚æ¯”å¦‚ä¸€å †ç™½ç ‚ç³–å’Œç›ï¼Œå¦‚æœä¸¤ç§æ··åˆçš„å¾ˆå‡åŒ€ï¼Œè¯´å®ƒå…³ç³»å¾ˆå¤§ï¼Œä¹Ÿå°±è¶Šéš¾ç”¨æ¯”ä¾‹çš„æ–¹æ³•å°†å…¶åˆ†å¼€ã€‚</p></li></ul><p> Â </p><h2 id="æ›´æ–°ä¼˜åŒ–çš„çŠ¶æ€ä¼°è®¡å€¼"><a href="#æ›´æ–°ä¼˜åŒ–çš„çŠ¶æ€ä¼°è®¡å€¼" class="headerlink" title="æ›´æ–°ä¼˜åŒ–çš„çŠ¶æ€ä¼°è®¡å€¼"></a>æ›´æ–°ä¼˜åŒ–çš„çŠ¶æ€ä¼°è®¡å€¼</h2><p>å‡å®škæ—¶åˆ»çš„ç³»ç»ŸçŠ¶æ€ä¸k-1æ—¶åˆ»æœ‰å…³ï¼Œå¹¶ä¸”å†…éƒ¨æœ‰å™ªå£°ï¼Œåˆ™:</p><ul><li>çŠ¶æ€æ–¹ç¨‹<br>$$x_k&#x3D;Ax_{k-1}+Ï‰_{k-1}$$</li><li>è§‚æµ‹æ–¹ç¨‹<br>$$Z_k&#x3D;Hx_k+Ï…_k$$</li></ul><h2 id="4-4-æ±‚ä¼˜åŒ–é¢„æµ‹çŠ¶æ€"><a href="#4-4-æ±‚ä¼˜åŒ–é¢„æµ‹çŠ¶æ€" class="headerlink" title="4.4. æ±‚ä¼˜åŒ–é¢„æµ‹çŠ¶æ€"></a>4.4. æ±‚ä¼˜åŒ–é¢„æµ‹çŠ¶æ€</h2><p>åœ¨æ— å™ªå£°æƒ…å†µä¸‹çš„é¢„æµ‹</p><ul><li>é¢„æµ‹çŠ¶æ€<br>$$<br>\hat{x}<em>{k}^\prime&#x3D;A\hat{x}</em>{k-1}^\prime<br>$$</li><li>é¢„æµ‹è§‚æµ‹<br>$$\hat{Z}<em>{k}^\prime&#x3D;H\hat{x}</em>{k}^\prime&#x3D;HA\hat{x}_{k-1}^\prime$$</li><li>è§‚æµ‹æ–°æ¯(è§‚æµ‹-é¢„æµ‹è§‚æµ‹)<br>$$\hat{Z}<em>k&#x3D;Z_k-\hat{Z}</em>{k}^\prime $$</li></ul><p>è§‚æµ‹æ–°æ¯ååº”äº†é¢„æµ‹å™ªå£°$\omega$å’Œè§‚æµ‹å™ªå£°$\upsilon$å¯¹çŠ¶æ€çš„ç»¼åˆå½±å“<br>å°†è¿‡ç¨‹å™ªå£°$Ï‰k$Â çœ‹ä½œä¸€ä¸ª <strong>æ–°æ¯ $\times$ æ¯”ä¾‹</strong>ï¼Œåˆ™ Â </p><ul><li>ä¼˜åŒ–é¢„æµ‹çŠ¶æ€</li></ul><p>$$<br>\hat{x}<em>k&#x3D;A \hat{x}</em>{k-1}+K_k \tilde{Z}<em>k&#x3D;A \hat{x}</em>{k-1}+K_k(Z_k-H \hat{x}_{k}^\prime)<br>$$</p><blockquote><p>ä»…å¡å°”æ›¼å¢ç›Š$K_k$ä¸ºæœªçŸ¥æ—¶ Â </p></blockquote><h2 id="4-5-æ±‚å¡å°”æ›¼å¢ç›Š"><a href="#4-5-æ±‚å¡å°”æ›¼å¢ç›Š" class="headerlink" title="4.5. æ±‚å¡å°”æ›¼å¢ç›Š"></a>4.5. æ±‚å¡å°”æ›¼å¢ç›Š</h2><p>è¯¯å·®åæ–¹å·®çŸ©é˜µï¼š </p><p>$$<br>P_k&#x3D;E[\tilde{x},\tilde{x}_{k}^{T}]<br>$$</p><p>è€Œå¡å°”æ›¼å¢ç›Š$K_k$åº”è¯¥ä½¿è¯¯å·®åæ–¹å·®çŸ©é˜µ$P_k$æœ€å° </p><ul><li>çŠ¶æ€æ–°æ¯(çŠ¶æ€ - é¢„æµ‹çŠ¶æ€)</li></ul><p>$$<br>\begin{aligned}<br>\hat{x}<em>k<br>&amp;&#x3D;x_k-\hat{x}<em>k\<br>&amp;&#x3D;Ax</em>{k-1}+\omega</em>{k-1}-[A\hat{x}<em>{k-1}+K_k(Z_k-H\hat{x}</em>{k}^\prime)]\<br>&amp;&#x3D;Ax_{k-1}+\omega_{k-1}-[A\hat{x}<em>{k-1}+K_k(Hx_k+\upsilon_k-HA\hat{x}</em>{k-1})]\<br>&amp;&#x3D;Ax_{k-1}+\omega_{k-1}-{(I-K_kH)A\hat{x}<em>{k-1}+K_k[H(AX</em>{k-1}+\omega_{k-1})+\upsilon_k]}\<br>&amp;&#x3D;Ax_{k-1}-(I-K_kH)A\hat{x}<em>{k-1}-K_kHAx</em>{k-1}+(I-K_kH)\omega_{k-1}-K_k\nu_k\&amp;&#x3D;(I-K_kH)Ax_{k-1}-(I-K_kH)A\hat{x}<em>{k-1}+(I-K_kH)\omega</em>{k-1}-K_k\mathrm{u}<em>k\<br>&amp;&#x3D;(I-K_kH)A(x</em>{k-1}-\hat{x}<em>{k-1})+(I-K_kH)\omega</em>{k-1}-K_k\mathrm{u}<em>k\<br>&amp;&#x3D;(I-K_kH)[A(x</em>{k-1}-\hat{x}<em>{k-1})+\omega</em>{k-1}]-K_k\mathrm{u}_k<br>\end{aligned}<br>$$<br>å‡è®¾åœ¨æ— å™ªå£°æƒ…å†µä¸‹ï¼ŒçŠ¶æ€æ–°æ¯:</p><p>$$<br>\tilde{x}<em>k&#x3D;(I-K_k H) A(x</em>{k-1}-\hat{x}<em>{k-1})&#x3D;(I-K_k H)(x_k-\hat{x}</em>{k}^\prime)<br>$$ </p><p>åˆ™è¯¯å·®åæ–¹å·®çŸ©é˜µï¼š</p><p>$$<br>P_k&#x3D;E[\tilde{x}<em>k \tilde{x}</em>{k}^T]&#x3D;E[[(I-K_k H)(x_k-\hat{x}<em>{k}^\prime)][(I-K_k H)(x_k-\hat{x}</em>{k}^\prime)]^T]<br>$$</p><p>æ­¤æ—¶ï¼Œæ¥çœ‹çœ‹é¢„æµ‹è¯¯å·®åæ–¹å·®çŸ©é˜µï¼š<br>$$<br>{\cal P}<em>{k}^\prime&#x3D;E[{\tilde{x}}</em>{k}^\prime{\tilde{x}}<em>{k}^\prime{}^{T}\bigr]&#x3D;E[(x</em>{k}-{\hat{x}}<em>{k}^\prime)(x</em>{k}-{\hat{x}}_{k}^\prime)^{T}\bigr]<br>$$ </p><p>æ­¤æ—¶ï¼Œå†æŠŠè¯¯å·®åæ–¹å·®çŸ©é˜µå±•å¼€ï¼š<br>$$<br>\begin{aligned}<br>{P_{k}}&amp;&#x3D;(I-K_{k}H)E<a href="I-K_%7Bk%7DH">[(x_{k}-\hat{x}<em>{k}^\prime)][(x</em>{k}-\hat{x}_{k}^\prime)]^{T}</a>^{T}+K_{k}E[{\upsilon}<em>{k}\upsilon</em>{k}^{T}]{K}<em>{k}^{T}\<br>&amp;&#x3D;(I-K</em>{k}H)P_{k}^\prime(I-K_{k}H)^{T}+K_{k}RK_{k}^{T}\<br>&amp;&#x3D;(P_{k}^\prime-K_{k}HP_{k}^\prime)(I-K_{k}H)^{T}+K_{k}RK_{k}^{T}\<br>&amp;&#x3D;P_{k}^\prime-K_{k}HP_{k}^\prime-P_{k}^\primeH^{T}K_{k}^{T}+K_{k}HP_{k}^\primeH^{T}K_{k}^{T}+K_{k}RK_{k}^{T}\<br>&amp;&#x3D;P_{k}^\prime-K_{k}HP_{k}^\prime-P_{k}^\primeH^{T}K_{k}^{T}+K_{k}(HP_{k}^\primeH^{T}+R)K_{k}^{T}<br>\end{aligned}<br>$$</p><p>è‹¥ä½¿ç”¨Tè¡¨ç¤ºè¯¯å·®åæ–¹å·®çŸ©é˜µçš„å¯¹è§’çº¿ï¼Œåˆ™ Â  </p><p>$$<br>T[P_{k}]&#x3D;T[P_{k}^\prime]-2T[K_{k}HP_{k}^\prime]+T[K_{k}(HP_{k}^\primeH^{T}+R){K_{k}}^{T}]<br>$$</p><p>å¯¹T[PkÂ ]æ±‚å¯¼ï¼Œå°±å¯æ‰¾åˆ°æœ€å°çš„å‡æ–¹å·®ï¼Œä½¿T[PkÂ ]æœ€å°ï¼Œå°±èƒ½å¾—åˆ°å¡å°”æ›¼å¢ç›ŠKk å¯¹T[PkÂ ]æ±‚å¯¼ï¼š </p><p>$$<br>\frac{d(T[P_k])}{dK_k}&#x3D;-2(HP_{k}^\prime)^T+2K_k(HP_{k}^\primeH^T+R)<br>$$</p><p>ä»¤å…¶ä¸º0ï¼Œåˆ™å¡å°”æ›¼å¢ç›Šï¼š</p><p>$$<br>K_{k}&#x3D;P_{K}^\primeH^{T}(HP_{K}^\primeH^{T}+R)^{-1}<br>$$</p><p>å…¶ä¸­è§‚æµ‹çŸ©é˜µHå’Œè§‚æµ‹å™ªå£°åæ–¹å·®çŸ©é˜µRä¸ºå¸¸æ•°ï¼Œæ‰€ä»¥å¡å°”æ›¼å¢ç›ŠKkä¸é¢„æµ‹è¯¯å·®åæ–¹å·®çŸ©é˜µPkâ€™Â æœ‰å…³ Â </p><h2 id="4-6-æ±‚é¢„æµ‹è¯¯å·®åæ–¹å·®çŸ©é˜µ"><a href="#4-6-æ±‚é¢„æµ‹è¯¯å·®åæ–¹å·®çŸ©é˜µ" class="headerlink" title="4.6. æ±‚é¢„æµ‹è¯¯å·®åæ–¹å·®çŸ©é˜µ"></a>4.6. æ±‚é¢„æµ‹è¯¯å·®åæ–¹å·®çŸ©é˜µ</h2><p>å‡è®¾è§‚æµ‹çŸ©é˜µÂ <em>H</em>Â &#x3D; 1ï¼Œé‚£ä¹ˆå¡å°”æ›¼å¢ç›Šï¼š </p><p>$$<br>K_{k}&#x3D;P_{K}^\prime(P_{K}^\prime+R)^{-1}&#x3D;\frac{1}{1+\frac{R}{P_{K}^\prime}}<br>$$Â </p><p>åˆ™$P_{k}^\prime$Â è¶Šå¤§ï¼Œ$K_k$è¶Šå¤§ï¼Œæƒé‡é‡è§†åé¦ˆæµ‹é‡ åˆ™$P_{k}^\prime$Â è¶Šå°ï¼Œ$K_k$è¶Šå°ï¼Œæƒé‡é‡è§†é¢„æµ‹å€¼ Â  æ­¤æ—¶ï¼Œæ¥çœ‹çœ‹ä¸‹ä¸€çŠ¶æ€çš„é¢„æµ‹è¯¯å·®åæ–¹å·®çŸ©é˜µï¼š</p><p>$$<br>\begin{aligned}P_{k+1}â€™&amp;&#x3D;E[\tilde{x}<em>{k+1}^\prime\tilde{x}</em>{k+1}^\prime\bigr]\&amp;&#x3D;E[(x_{k+1}-\hat{x}<em>{k+1}^\prime)(x</em>{k+1}-\hat{x}_{k+1}^\prime)^T\bigr]\&amp;&#x3D;E[(Ax_k+:\omega_k-A\hat{x}_k)(Ax_k+:\omega_k-A\hat{x}_k)^T\bigr]\&amp;&#x3D;E[(A(x_k-\hat{x}_k)+:\omega_k)(A(x_k-\hat{x}_k)+:\omega_k)^T\bigr]\end{aligned}<br>$$</p><p>å› ä¸ºçŠ¶æ€x å’Œè¿‡ç¨‹å™ªå£°Ï‰kæ˜¯ç‹¬ç«‹çš„ï¼Œæ‰€ä»¥å†ç®€åŒ– </p><p>$$<br>\begin{aligned}P_{k+1}^\prime&amp;&#x3D;E[(A\tilde{x}<em>{k}+:\omega</em>{k})(A\tilde{x}<em>{k}+:\omega</em>{k})^{T}]\&amp;&#x3D;E[(A\tilde{x}<em>{k})(A\tilde{x}</em>{k})^{T}]+E[\omega_{k}\omega_{k}^{T}]\&amp;&#x3D;AP_{k}A^{T}+:Q\end{aligned}<br>$$</p><p>  å…¶ä¸­çŠ¶æ€è½¬ç§»çŸ©é˜µ$A$å’Œé¢„æµ‹å™ªå£°åæ–¹å·®çŸ©é˜µ$Q$ä¸ºå¸¸æ•°ï¼Œæ‰€ä»¥é¢„æµ‹è¯¯å·®åæ–¹å·®çŸ©é˜µ$P_{k}^\prime$Â ä¸ä¸Šä¸€çŠ¶æ€çš„è¯¯å·®åæ–¹å·®çŸ©é˜µ$P_{k-1}$æœ‰å…³ Â </p><h2 id="4-7-æ±‚è¯¯å·®åæ–¹å·®çŸ©é˜µ"><a href="#4-7-æ±‚è¯¯å·®åæ–¹å·®çŸ©é˜µ" class="headerlink" title="4.7. æ±‚è¯¯å·®åæ–¹å·®çŸ©é˜µ"></a>4.7. æ±‚è¯¯å·®åæ–¹å·®çŸ©é˜µ</h2><p>$$<br>\begin{aligned}<br>P_{k}&amp;&#x3D;P_{k}^\prime-K_{k}HP_{k}^\prime-P_{k}^\primeH^\primeK_{k}^\prime+K_{k}(HP_{k}^\primeH^\prime+R){K_{k}}^\prime\<br>&amp;&#x3D;P_{k}^\prime-P_{k}^\primeH^\prime(HP_{k}^\primeH^\prime+R)^{-1}HP_{k}^\prime-P_{k}^\primeH^\prime[P_{k}^\primeH^\prime(HP_{k}^\primeH^\prime+R)^{-1}]^{T}+\<br>&amp;P_{k}^\primeH^\prime[P_{k}^\primeH^\prime(HP_{k}^\primeH^\prime+R)^{-1}]^{T}\<br>&amp;&#x3D;P_{k}^\prime-P_{k}^\primeH^\prime(HP_{K}^\primeH^\prime+R)^{-1}HP_{k}^\prime\<br>&amp;&#x3D;P_{k}^\prime-K_{k}HP_{k}^\prime\<br>&amp;&#x3D;(I-K_{k}H)P_{k}^\prime<br>\end{aligned}<br>$$</p><h2 id="4-8-åŠ å…¥å¤–ç•Œå¯¹ç³»ç»Ÿçš„ä½œç”¨"><a href="#4-8-åŠ å…¥å¤–ç•Œå¯¹ç³»ç»Ÿçš„ä½œç”¨" class="headerlink" title="4.8. åŠ å…¥å¤–ç•Œå¯¹ç³»ç»Ÿçš„ä½œç”¨"></a>4.8. åŠ å…¥å¤–ç•Œå¯¹ç³»ç»Ÿçš„ä½œç”¨</h2><p>åœ¨åŠ å…¥å¤–ç•Œå¯¹ç³»ç»Ÿçš„ä½œç”¨æ—¶ï¼Œå¯æ•´ç†å‡ºå¡å°”æ›¼æ»¤æ³¢çš„äº”ä¸ªå…¬å¼ï¼š</p><ul><li><p>é¢„æµ‹<br>$$<br>\begin{array}{rcl}{\hat{x}<em>{k}^\prime&#x3D;}&amp;{A\hat{x}</em>{k-1}+}&amp;{B:{u}<em>{k-1}}\{P</em>{k}^\prime&#x3D;}&amp;{AP_{k-1}A^{T}+}&amp;{Q}\\end{array}<br>$$</p></li><li><p>æ ¡æ­£<br>$$<br>\begin{aligned}{rcl}{K_{k}&#x3D;}&amp;{P_{K}^\primeH^{T}(HP_{k}^\primeH^{T}+R)^{-1}}\{x_{k}&#x3D;}&amp;{x_{K}^\prime+K_{k}(Z_{k}-Hx_{k}^\prime)}\{P_{k}~&#x3D;}&amp;{(I-K_{k}H)P_{k}^\prime}\\end{aligned}<br>$$</p></li></ul><h2 id="5-å¡å°”æ›¼æ»¤æ³¢åº”ç”¨"><a href="#5-å¡å°”æ›¼æ»¤æ³¢åº”ç”¨" class="headerlink" title="5. å¡å°”æ›¼æ»¤æ³¢åº”ç”¨"></a>5. å¡å°”æ›¼æ»¤æ³¢åº”ç”¨</h2><p>ç”¨pythonæ¥ç®€å•è¯´æ˜ Â </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltdelta_t <span class="token operator">=</span> <span class="token number">0.1</span>                               <span class="token comment"># æ¯ç§’é’Ÿé‡‡ä¸€æ¬¡æ ·</span>end_t <span class="token operator">=</span> <span class="token number">7</span>                                   <span class="token comment"># æ—¶é—´é•¿åº¦</span>time_t <span class="token operator">=</span> end_t <span class="token operator">*</span> <span class="token number">10</span>                         <span class="token comment"># é‡‡æ ·æ¬¡æ•°</span>t <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> end_t<span class="token punctuation">,</span> delta_t<span class="token punctuation">)</span>            <span class="token comment"># è®¾ç½®æ—¶é—´æ•°ç»„</span>u <span class="token operator">=</span> <span class="token number">1</span>                                       <span class="token comment"># å®šä¹‰å¤–ç•Œå¯¹ç³»ç»Ÿçš„ä½œç”¨ åŠ é€Ÿåº¦</span>x <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">*</span> u <span class="token operator">*</span> t <span class="token operator">**</span> <span class="token number">2</span>                      <span class="token comment"># å®é™…çœŸå®ä½ç½®</span>v_var <span class="token operator">=</span> <span class="token number">1</span>                                   <span class="token comment"># æµ‹é‡å™ªå£°çš„æ–¹å·®</span><span class="token comment"># åˆ›å»ºé«˜æ–¯å™ªå£°ï¼Œç²¾ç¡®åˆ°å°æ•°ç‚¹åä¸¤ä½</span>v_noise <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token builtin">round</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> v_var<span class="token punctuation">,</span> time_t<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>X <span class="token operator">=</span> np<span class="token punctuation">.</span>mat<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                      <span class="token comment"># å®šä¹‰é¢„æµ‹ä¼˜åŒ–å€¼çš„åˆå§‹çŠ¶æ€</span>v <span class="token operator">=</span> np<span class="token punctuation">.</span>mat<span class="token punctuation">(</span>v_noise<span class="token punctuation">)</span>                         <span class="token comment"># å®šä¹‰æµ‹é‡å™ªå£°</span>z <span class="token operator">=</span> x <span class="token operator">+</span> v                                   <span class="token comment"># å®šä¹‰æµ‹é‡å€¼ï¼ˆå‡è®¾æµ‹é‡å€¼=å®é™…çŠ¶æ€å€¼+å™ªå£°ï¼‰</span>A <span class="token operator">=</span> np<span class="token punctuation">.</span>mat<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> delta_t<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>          <span class="token comment"># å®šä¹‰çŠ¶æ€è½¬ç§»çŸ©é˜µ</span>B <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span>delta_t <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>delta_t<span class="token punctuation">]</span><span class="token punctuation">]</span>   <span class="token comment"># å®šä¹‰è¾“å…¥æ§åˆ¶çŸ©é˜µ</span>P <span class="token operator">=</span> np<span class="token punctuation">.</span>mat<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token comment"># å®šä¹‰åˆå§‹çŠ¶æ€åæ–¹å·®çŸ©é˜µ</span>Q <span class="token operator">=</span> np<span class="token punctuation">.</span>mat<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.001</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.001</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token comment"># å®šä¹‰çŠ¶æ€è½¬ç§»(é¢„æµ‹å™ªå£°)åæ–¹å·®çŸ©é˜µ</span>H <span class="token operator">=</span> np<span class="token punctuation">.</span>mat<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                          <span class="token comment"># å®šä¹‰è§‚æµ‹çŸ©é˜µ</span>R <span class="token operator">=</span> np<span class="token punctuation">.</span>mat<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                             <span class="token comment"># å®šä¹‰è§‚æµ‹å™ªå£°åæ–¹å·®</span>X_mat <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span>time_t<span class="token punctuation">)</span>                    <span class="token comment"># åˆå§‹åŒ–è®°å½•ç³»ç»Ÿé¢„æµ‹ä¼˜åŒ–å€¼çš„åˆ—è¡¨</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>time_t<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># é¢„æµ‹</span>    X_predict <span class="token operator">=</span> A <span class="token operator">*</span> X <span class="token operator">+</span> np<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>B<span class="token punctuation">,</span> u<span class="token punctuation">)</span>        <span class="token comment"># ä¼°ç®—çŠ¶æ€å˜é‡</span>    P_predict <span class="token operator">=</span> A <span class="token operator">*</span> P <span class="token operator">*</span> A<span class="token punctuation">.</span>T <span class="token operator">+</span> Q             <span class="token comment"># ä¼°ç®—çŠ¶æ€è¯¯å·®åæ–¹å·®</span>    <span class="token comment"># æ ¡æ­£</span>    K <span class="token operator">=</span> P_predict <span class="token operator">*</span> H<span class="token punctuation">.</span>T <span class="token operator">/</span> <span class="token punctuation">(</span>H <span class="token operator">*</span> P_predict <span class="token operator">*</span> H<span class="token punctuation">.</span>T <span class="token operator">+</span> R<span class="token punctuation">)</span>     <span class="token comment"># æ›´æ–°å¡å°”æ›¼å¢ç›Š</span>    X <span class="token operator">=</span> X_predict <span class="token operator">+</span> K <span class="token operator">*</span> <span class="token punctuation">(</span>z<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> i<span class="token punctuation">]</span> <span class="token operator">-</span> H <span class="token operator">*</span> X_predict<span class="token punctuation">)</span>       <span class="token comment"># æ›´æ–°é¢„æµ‹ä¼˜åŒ–å€¼</span>    P <span class="token operator">=</span> <span class="token punctuation">(</span>np<span class="token punctuation">.</span>eye<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">-</span> K <span class="token operator">*</span> H<span class="token punctuation">)</span> <span class="token operator">*</span> P_predict                 <span class="token comment"># æ›´æ–°çŠ¶æ€è¯¯å·®åæ–¹å·®</span>    <span class="token comment"># è®°å½•ç³»ç»Ÿçš„é¢„æµ‹ä¼˜åŒ–å€¼</span>    X_mat<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> X<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span>    <span class="token comment"># è®¾ç½®æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'å®é™…çŠ¶æ€å€¼'</span><span class="token punctuation">)</span>             <span class="token comment"># è®¾ç½®æ›²çº¿æ•°å€¼</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>X_mat<span class="token punctuation">,</span> <span class="token string">"g"</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'é¢„æµ‹ä¼˜åŒ–å€¼'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>z<span class="token punctuation">.</span>T<span class="token punctuation">,</span> <span class="token string">"r--"</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'æµ‹é‡å€¼'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">"æ—¶é—´"</span><span class="token punctuation">)</span>                               <span class="token comment"># è®¾ç½®Xè½´çš„åå­—</span>plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"ä½ç§»"</span><span class="token punctuation">)</span>                               <span class="token comment"># è®¾ç½®Yè½´çš„åå­—</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"å¡å°”æ›¼æ»¤æ³¢ç¤ºæ„å›¾"</span><span class="token punctuation">)</span>                     <span class="token comment"># è®¾ç½®æ ‡é¢˜</span>plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span>                                    <span class="token comment"># è®¾ç½®å›¾ä¾‹</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>                                      <span class="token comment"># æ˜¾ç¤ºå›¾è¡¨</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Â  è¿è¡Œä¸Šé¢çš„å¡å°”æ›¼æ»¤æ³¢ï¼Œå¾—åˆ°ä¸‹å›¾ï¼š Â  <img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E5%8D%A1%E5%B0%94%E6%9B%BC%E6%BB%A4%E6%B3%A2/9-5.png" alt="9"> Â  å¯ä»¥çœ‹å‡ºï¼Œå°½ç®¡æµ‹é‡å€¼æ³¢åŠ¨å¾ˆå¤§ï¼Œä½†æœ€ç»ˆçš„é¢„æµ‹ä¼˜åŒ–å€¼ä¸å®é™…çŠ¶æ€å€¼ç›¸å·®ä¸å¤§ã€‚</p><h1 id="åŸæ–‡é“¾æ¥"><a href="#åŸæ–‡é“¾æ¥" class="headerlink" title="åŸæ–‡é“¾æ¥"></a>åŸæ–‡é“¾æ¥</h1><p><a href="https://blog.csdn.net/qq_32618327/article/details/89669062">å¡å°”æ›¼æ»¤æ³¢çš„ç†è§£ã€æ¨å¯¼å’Œåº”ç”¨</a></p><h1 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h1><ul><li><p>pythonçš„ä»£ç åœ°å€<br><a href="https://github.com/JoveH-H/A-simple-explanation/blob/master/Kalman/_filtering.py">https://github.com/JoveH-H/A-simple-explanation/blob/master/Kalman\_filtering.py</a></p></li><li><p>jupyter notebookçš„ä»£ç åœ°å€<br><a href="https://github.com/JoveH-H/A-simple-explanation/blob/master/ipynb/Kalman/_filtering.ipynb">https://github.com/JoveH-H/A-simple-explanation/blob/master/ipynb/Kalman\_filtering.ipynb</a></p></li><li><p>å¡å°”æ›¼æ»¤æ³¢ â€“ ä»æ¨å¯¼åˆ°åº”ç”¨(ä¸€)<br><a href="https://blog.csdn.net/heyijia0327/article/details/17487467#">https://blog.csdn.net/heyijia0327/article/details/17487467#</a> </p></li><li><p>å¡å°”æ›¼æ»¤æ³¢ â€“ ä»æ¨å¯¼åˆ°åº”ç”¨(äºŒ)<br><a href="https://blog.csdn.net/heyijia0327/article/details/17667341">https://blog.csdn.net/heyijia0327/article/details/17667341</a> </p></li><li><p>å¡å°”æ›¼æ»¤æ³¢ç®—æ³•â€“æ ¸å¿ƒå…¬å¼æ¨å¯¼å¯¼è®º<br><a href="https://zhuanlan.zhihu.com/p/24312995">https://zhuanlan.zhihu.com/p/24312995</a> </p></li><li><p>è¯¦è§£å¡å°”æ›¼æ»¤æ³¢åŸç†<br><a href="http://baijiahao.baidu.com/s?id=1604230489177143048&amp;wfr=spider&amp;for=pc">http://baijiahao.baidu.com/s?id=1604230489177143048&amp;wfr=spider&amp;for=pc</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å¡å°”æ›¼æ»¤æ³¢ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¡å°”æ›¼æ»¤ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾åƒé«˜æ–¯æ¨¡ç³ŠåŸç†</title>
      <link href="/2023/09/20/tu-xiang-gao-si-mo-hu-yuan-li/"/>
      <url>/2023/09/20/tu-xiang-gao-si-mo-hu-yuan-li/</url>
      
        <content type="html"><![CDATA[<h1 id="1-é«˜æ–¯æ¨¡ç³Šä»‹ç»"><a href="#1-é«˜æ–¯æ¨¡ç³Šä»‹ç»" class="headerlink" title="1. é«˜æ–¯æ¨¡ç³Šä»‹ç»"></a>1. é«˜æ–¯æ¨¡ç³Šä»‹ç»</h1><p><a href="https://baike.baidu.com/item/%E9%AB%98%E6%96%AF%E6%A8%A1%E7%B3%8A/10885810?fr=aladdin">é«˜æ–¯æ¨¡ç³Š</a>ï¼ˆè‹±è¯­ï¼šGaussian Blurï¼‰ï¼Œä¹Ÿå«é«˜æ–¯å¹³æ»‘ï¼Œæ˜¯åœ¨Adobe Photoshopã€GIMPä»¥åŠPaint.NETç­‰å›¾åƒå¤„ç†è½¯ä»¶ä¸­å¹¿æ³›ä½¿ç”¨çš„å¤„ç†æ•ˆæœï¼Œé€šå¸¸ç”¨å®ƒæ¥å‡å°‘å›¾åƒå™ªå£°ä»¥åŠé™ä½ç»†èŠ‚å±‚æ¬¡ã€‚è¿™ç§æ¨¡ç³ŠæŠ€æœ¯ç”Ÿæˆçš„å›¾åƒï¼Œå…¶è§†è§‰æ•ˆæœå°±åƒæ˜¯ç»è¿‡ä¸€ä¸ª_åŠé€æ˜å±å¹•_åœ¨è§‚å¯Ÿå›¾åƒï¼Œè¿™ä¸é•œå¤´ç„¦å¤–æˆåƒæ•ˆæœæ•£æ™¯ä»¥åŠæ™®é€šç…§æ˜é˜´å½±ä¸­çš„æ•ˆæœéƒ½æ˜æ˜¾ä¸åŒã€‚é«˜æ–¯å¹³æ»‘ä¹Ÿç”¨äºè®¡ç®—æœºè§†è§‰ç®—æ³•ä¸­çš„é¢„å…ˆå¤„ç†é˜¶æ®µï¼Œä»¥å¢å¼ºå›¾åƒåœ¨ä¸åŒæ¯”ä¾‹å¤§å°ä¸‹çš„å›¾åƒæ•ˆæœï¼ˆå‚è§å°ºåº¦ç©ºé—´è¡¨ç¤ºä»¥åŠå°ºåº¦ç©ºé—´å®ç°ï¼‰ã€‚ ä»æ•°å­¦çš„è§’åº¦æ¥çœ‹ï¼Œå›¾åƒçš„é«˜æ–¯æ¨¡ç³Šè¿‡ç¨‹å°±æ˜¯<strong>å›¾åƒä¸æ­£æ€åˆ†å¸ƒåšå·ç§¯</strong>ã€‚ç”±äº<a href="https://so.csdn.net/so/search?q=%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83&spm=1001.2101.3001.7020">æ­£æ€åˆ†å¸ƒ</a>åˆå«ä½œé«˜æ–¯åˆ†å¸ƒï¼Œæ‰€ä»¥è¿™é¡¹æŠ€æœ¯å°±å«ä½œé«˜æ–¯æ¨¡ç³Šã€‚å›¾åƒä¸åœ†å½¢æ–¹æ¡†æ¨¡ç³Šåšå·ç§¯å°†ä¼šç”Ÿæˆæ›´åŠ ç²¾ç¡®çš„ç„¦å¤–æˆåƒæ•ˆæœã€‚ç”±äºé«˜æ–¯å‡½æ•°çš„å‚…ç«‹å¶å˜æ¢æ˜¯å¦å¤–ä¸€ä¸ªé«˜æ–¯å‡½æ•°ï¼Œæ‰€ä»¥é«˜æ–¯æ¨¡ç³Šå¯¹äºå›¾åƒæ¥è¯´å°±æ˜¯ä¸€ä¸ªä½é€šæ»¤æ³¢å™¨ã€‚</p><h1 id="2-é«˜æ–¯æ¨¡ç³ŠåŸç†"><a href="#2-é«˜æ–¯æ¨¡ç³ŠåŸç†" class="headerlink" title="2. é«˜æ–¯æ¨¡ç³ŠåŸç†"></a>2. é«˜æ–¯æ¨¡ç³ŠåŸç†</h1><h2 id="2-1-çŸ©é˜µèŒƒå›´çš„åƒç´ å¹³å‡å€¼"><a href="#2-1-çŸ©é˜µèŒƒå›´çš„åƒç´ å¹³å‡å€¼" class="headerlink" title="2.1 çŸ©é˜µèŒƒå›´çš„åƒç´ å¹³å‡å€¼"></a>2.1 çŸ©é˜µèŒƒå›´çš„åƒç´ å¹³å‡å€¼</h2><p>â€œæ¨¡ç³Šâ€ï¼Œå°±æ˜¯å°†å›¾åƒä¸­æ¯ä¸ªåƒç´ å€¼è¿›è¡Œé‡ç½®çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹é‡‡ç”¨å°†æ¯ä¸€ä¸ªåƒç´ éƒ½è®¾ç½®æˆå‘¨è¾¹åƒç´ çš„å¹³å‡å€¼ã€‚<br><img src="https://img-blog.csdnimg.cn/20190710164929254.png#pic_center"><br>ä¸Šå›¾ä¸­ï¼Œ2æ˜¯ä¸­é—´ç‚¹ï¼Œå‘¨è¾¹ç‚¹éƒ½æ˜¯1ã€‚å‡è®¾å‘¨è¾¹çš„ç‚¹å¯¹ä¸­é—´ç‚¹çš„å½±å“éƒ½æ˜¯ç›¸åŒçš„ï¼Œå³æ„é€ çš„å·ç§¯ç®—å­å¦‚ä¸‹ï¼š<br><img src="https://img-blog.csdnimg.cn/20190710165031905.png#pic_center"><br>ç„¶åè®¡ç®—æ±‚å’Œï¼š<br><img src="https://img-blog.csdnimg.cn/20190710165104885.png#pic_center"><br>å°†å›¾ä¸­â€˜2â€™ç½®ä¸ºï¼š<br><img src="https://img-blog.csdnimg.cn/20190710165130993.png#pic_center"><br>â€œä¸­é—´ç‚¹â€å–â€å‘¨å›´ç‚¹â€çš„å¹³å‡å€¼ï¼Œå˜æˆ10&#x2F;9ã€‚åœ¨æ•°å€¼ä¸Šï¼Œè¿™æ˜¯ä¸€ç§â€å¹³æ»‘åŒ–â€ã€‚åœ¨å›¾å½¢ä¸Šï¼Œå°±ç›¸å½“äºäº§ç”Ÿâ€æ¨¡ç³Šâ€æ•ˆæœï¼Œâ€ä¸­é—´ç‚¹â€å¤±å»ç»†èŠ‚ã€‚<br>æ˜¾ç„¶ï¼Œè®¡ç®—å¹³å‡å€¼æ—¶ï¼Œå–å€¼èŒƒå›´è¶Šå¤§ï¼Œâ€æ¨¡ç³Šæ•ˆæœâ€è¶Šå¼ºçƒˆã€‚å¦‚ä¸‹ä¸‰å¹…å›¾ï¼Œåˆ†åˆ«è¡¨ç¤ºåŸå›¾ï¼Œ3X3å’Œ5X5çš„æ¨¡ç³Šæ•ˆæœå›¾ã€‚<br><img src="https://img-blog.csdnimg.cn/20190710165231413.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMzMjA4ODUx,size_16,color_FFFFFF,t_70#pic_center"><br><img src="https://img-blog.csdnimg.cn/20190710165240445.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMzMjA4ODUx,size_16,color_FFFFFF,t_70#pic_center"><br><img src="https://img-blog.csdnimg.cn/20190710165251475.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMzMjA4ODUx,size_16,color_FFFFFF,t_70#pic_center"><br>æ¥ä¸‹æ¥çš„é—®é¢˜å°±æ˜¯ï¼Œæ—¢ç„¶æ¯ä¸ªç‚¹éƒ½è¦å–å‘¨è¾¹åƒç´ çš„å¹³å‡å€¼ï¼Œé‚£ä¹ˆåº”è¯¥å¦‚ä½•åˆ†é…æƒé‡å‘¢ï¼Ÿ<br>å¦‚æœä½¿ç”¨ç®€å•å¹³å‡ï¼Œæ˜¾ç„¶ä¸æ˜¯å¾ˆåˆç†ï¼Œå› ä¸ºå›¾åƒéƒ½æ˜¯è¿ç»­çš„ï¼Œè¶Šé è¿‘çš„ç‚¹å…³ç³»è¶Šå¯†åˆ‡ï¼Œè¶Šè¿œç¦»çš„ç‚¹å…³ç³»è¶Šç–è¿œã€‚å› æ­¤ï¼ŒåŠ æƒå¹³å‡æ›´åˆç†ï¼Œè·ç¦»è¶Šè¿‘çš„ç‚¹æƒé‡è¶Šå¤§ï¼Œè·ç¦»è¶Šè¿œçš„ç‚¹æƒé‡è¶Šå°ã€‚</p><h2 id="2-2-æ­£æ€åˆ†å¸ƒçš„æƒé‡"><a href="#2-2-æ­£æ€åˆ†å¸ƒçš„æƒé‡" class="headerlink" title="2.2 æ­£æ€åˆ†å¸ƒçš„æƒé‡"></a>2.2 æ­£æ€åˆ†å¸ƒçš„æƒé‡</h2><p>æ­£æ€åˆ†å¸ƒæ˜¾ç„¶æ˜¯ä¸€ç§å¯å–çš„æƒé‡åˆ†é…æ¨¡å¼ã€‚<br>åœ¨å›¾å½¢ä¸Šï¼Œæ­£æ€åˆ†å¸ƒæ˜¯ä¸€ç§é’Ÿå½¢æ›²çº¿ï¼Œè¶Šæ¥è¿‘ä¸­å¿ƒï¼Œå–å€¼è¶Šå¤§ï¼Œè¶Šè¿œç¦»ä¸­å¿ƒï¼Œå–å€¼è¶Šå°ã€‚<br>è®¡ç®—å¹³å‡å€¼çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦å°†â€ä¸­å¿ƒç‚¹â€ä½œä¸ºåŸç‚¹ï¼Œå…¶ä»–ç‚¹æŒ‰ç…§å…¶åœ¨æ­£æ€æ›²çº¿ä¸Šçš„ä½ç½®ï¼Œåˆ†é…æƒé‡ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªåŠ æƒå¹³å‡å€¼ã€‚<br><strong>é«˜æ–¯å‡½æ•°</strong>ï¼š<br><img src="https://img-blog.csdnimg.cn/20190710165445985.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMzMjA4ODUx,size_16,color_FFFFFF,t_70#pic_center"><br>æ­£æ€åˆ†å¸ƒçš„å¯†åº¦å‡½æ•°å«åšâ€é«˜æ–¯å‡½æ•°â€ï¼ˆGaussian functionï¼‰ã€‚å®ƒçš„ä¸€ç»´å½¢å¼æ˜¯ï¼š<br><img src="https://img-blog.csdnimg.cn/20190710165500256.png#pic_center"><br>å…¶ä¸­ï¼ŒÎ¼æ˜¯xçš„å‡å€¼ï¼ŒÏƒæ˜¯xçš„æ–¹å·®ã€‚å› ä¸ºè®¡ç®—å¹³å‡å€¼çš„æ—¶å€™ï¼Œä¸­å¿ƒç‚¹å°±æ˜¯åŸç‚¹ï¼Œæ‰€ä»¥Î¼ç­‰äº0ã€‚<br><img src="https://img-blog.csdnimg.cn/20190710165619153.png#pic_center"><br>ä¸Šé¢çš„æ­£æ€åˆ†å¸ƒæ˜¯ä¸€ç»´çš„ï¼Œå›¾åƒéƒ½æ˜¯äºŒç»´çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦äºŒç»´çš„æ­£æ€åˆ†å¸ƒã€‚<br><img src="https://img-blog.csdnimg.cn/20190710165637205.png#pic_center"><br><img src="https://img-blog.csdnimg.cn/20190710165647749.png#pic_center"><br>æœ‰äº†è¿™ä¸ªå‡½æ•° ï¼Œå°±å¯ä»¥è®¡ç®—æ¯ä¸ªç‚¹çš„æƒé‡äº†ã€‚<br><strong>æƒé‡çŸ©é˜µï¼š</strong><br>å‡å®šä¸­å¿ƒç‚¹çš„åæ ‡æ˜¯ï¼ˆ0,0ï¼‰ï¼Œé‚£ä¹ˆè·ç¦»å®ƒæœ€è¿‘çš„8ä¸ªç‚¹çš„åæ ‡å¦‚ä¸‹ï¼š<br><img src="https://img-blog.csdnimg.cn/20190710165732243.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMzMjA4ODUx,size_16,color_FFFFFF,t_70#pic_center"><br>æ›´è¿œçš„ç‚¹ä»¥æ­¤ç±»æ¨ã€‚<br>ä¸ºäº†è®¡ç®—æƒé‡çŸ©é˜µï¼Œéœ€è¦è®¾å®šÏƒçš„å€¼ã€‚å‡å®šÏƒ&#x3D;1.5ï¼ˆÏƒå€¼è¶Šå¤§å›¾åƒè¶Šå¹³æ»‘&#x2F;æ¨¡ç³Šï¼‰ï¼Œåˆ™æ¨¡ç³ŠåŠå¾„ä¸º1çš„æƒé‡çŸ©é˜µå¦‚ä¸‹ï¼š<br><img src="https://img-blog.csdnimg.cn/20190710165814728.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMzMjA4ODUx,size_16,color_FFFFFF,t_70#pic_center"><br>è¿™9ä¸ªç‚¹çš„æƒé‡æ€»å’Œç­‰äº0.4787147ï¼Œå¦‚æœåªè®¡ç®—è¿™9ä¸ªç‚¹çš„åŠ æƒå¹³å‡ï¼Œè¿˜å¿…é¡»è®©å®ƒä»¬çš„æƒé‡ä¹‹å’Œç­‰äº1ï¼Œå› æ­¤ä¸Šé¢9ä¸ªå€¼è¿˜è¦åˆ†åˆ«é™¤ä»¥0.4787147ï¼Œå¾—åˆ°æœ€ç»ˆçš„æƒé‡çŸ©é˜µ<br><img src="https://img-blog.csdnimg.cn/20190710165827157.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMzMjA4ODUx,size_16,color_FFFFFF,t_70#pic_center"></p><h1 id="3-è®¡ç®—é«˜æ–¯æ¨¡ç³Š"><a href="#3-è®¡ç®—é«˜æ–¯æ¨¡ç³Š" class="headerlink" title="3. è®¡ç®—é«˜æ–¯æ¨¡ç³Š"></a>3. è®¡ç®—é«˜æ–¯æ¨¡ç³Š</h1><p>æœ‰äº†æƒé‡çŸ©é˜µï¼Œå°±å¯ä»¥è®¡ç®—é«˜æ–¯æ¨¡ç³Šçš„å€¼äº†ã€‚å‡è®¾ç°æœ‰9ä¸ªåƒç´ ç‚¹ï¼Œç°åº¦å€¼ï¼ˆ0-255ï¼‰å¦‚ä¸‹ï¼š<br><img src="https://img-blog.csdnimg.cn/20190710165929224.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMzMjA4ODUx,size_16,color_FFFFFF,t_70#pic_center"><br>æ¯ä¸ªç‚¹ä¹˜ä»¥è‡ªå·±çš„æƒé‡å€¼ï¼š<br><img src="https://img-blog.csdnimg.cn/20190710165945192.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMzMjA4ODUx,size_16,color_FFFFFF,t_70#pic_center"><br>å°†è¿™9ä¸ªå€¼åŠ èµ·æ¥ï¼Œå°±æ˜¯ä¸­å¿ƒç‚¹çš„é«˜æ–¯æ¨¡ç³Šçš„å€¼ã€‚<br>å¯¹æ‰€æœ‰ç‚¹é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œå°±å¾—åˆ°äº†é«˜æ–¯æ¨¡ç³Šåçš„å›¾åƒã€‚å¦‚æœåŸå›¾æ˜¯å½©è‰²å›¾ç‰‡ï¼Œå¯ä»¥å¯¹RGBä¸‰ä¸ªé€šé“åˆ†åˆ«åšé«˜æ–¯æ¨¡ç³Šã€‚</p><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://baike.baidu.com/item/%E9%AB%98%E6%96%AF%E6%A8%A1%E7%B3%8A/10885810?fr=aladdin">https://baike.baidu.com/item/é«˜æ–¯æ¨¡ç³Š/10885810?fr=aladdin</a><br><a href="https://www.jianshu.com/p/302a895c12dd">https://www.jianshu.com/p/302a895c12dd</a><br>å›¾åƒå¤„ç†ç³»åˆ—ç¬”è®°ï¼š <a href="https://blog.csdn.net/qq_33208851/article/details/95335809">https://blog.csdn.net/qq_33208851&#x2F;article&#x2F;details&#x2F;95335809</a></p><p>æœ¬æ–‡è½¬è‡ª <a href="https://blog.csdn.net/qq_33208851/article/details/95349944">https://blog.csdn.net/qq_33208851/article/details/95349944</a>ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> opencv </category>
          
      </categories>
      
      
        <tags>
            
            <tag> opencv </tag>
            
            <tag> å›¾åƒå˜æ¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨å›¾åƒå˜æ¢</title>
      <link href="/2023/09/20/chang-yong-tu-xiang-bian-huan/"/>
      <url>/2023/09/20/chang-yong-tu-xiang-bian-huan/</url>
      
        <content type="html"><![CDATA[<h1 id="å½¢æ€å­¦å˜æ¢"><a href="#å½¢æ€å­¦å˜æ¢" class="headerlink" title="å½¢æ€å­¦å˜æ¢"></a>å½¢æ€å­¦å˜æ¢</h1><p>å½¢æ€å­¦å˜æ¢æ˜¯ä¸€ç»„ç”¨äºå›¾åƒå¤„ç†ä¸­çš„æ•°å­¦æ“ä½œï¼Œç”¨äºæ”¹å˜å›¾åƒä¸­ç‰©ä½“çš„å½¢çŠ¶ã€å¤§å°å’Œç»“æ„ã€‚è¿™äº›æ“ä½œé€šå¸¸ç”¨äºå¤„ç†äºŒå€¼å›¾åƒï¼ˆé»‘ç™½å›¾åƒï¼‰ï¼Œç”¨äºåˆ†å‰²å›¾åƒä¸­çš„ç‰©ä½“ã€å»é™¤å™ªå£°ã€æŸ¥æ‰¾è½®å»“ç­‰ï¼Œæœ€åˆæ˜¯ä¸ºäº†åˆ†æå’Œå¤„ç†äºŒå€¼å›¾åƒä¸­çš„å½¢çŠ¶ã€ç»“æ„å’Œç‰¹å¾è€Œå¼€å‘çš„ã€‚</p><h2 id="è…èš€ä¸è†¨èƒ€"><a href="#è…èš€ä¸è†¨èƒ€" class="headerlink" title="è…èš€ä¸è†¨èƒ€"></a>è…èš€ä¸è†¨èƒ€</h2><p>ä¸å·ç§¯æ“ä½œç±»ä¼¼(å—¯â€¦ ä»€ä¹ˆæ˜¯å·ç§¯â€¦<a href="https://setosa.io/ev/image-kernels/">ç‚¹æˆ‘æŸ¥çœ‹</a>),å‡è®¾æœ‰å›¾åƒAå’Œç»“æ„å…ƒç´ B,ç»“æ„å…ƒç´ Båœ¨Aä¸Šé¢ç§»åŠ¨,å…¶ä¸­Bå®šä¹‰å…¶ä¸­å¿ƒä¸ºé”šç‚¹ï¼Œè®¡ç®—Bè¦†ç›–ä¸‹Açš„æœ€å¤§åƒç´ å€¼ç”¨æ¥æ›¿æ¢é”šç‚¹çš„åƒç´ ï¼Œå…¶ä¸­Bä½œä¸ºç»“æ„ä½“å¯ä»¥æ˜¯ä»»æ„å½¢çŠ¶ã€‚éšç€é”šç‚¹åœ¨å›¾åƒä¸Šçš„ç§»åŠ¨ï¼Œç»“æ„Bå°±å¯å¯¹å›¾åƒä¸Šçš„æ¯ä¸ªåƒç´ è¿›è¡Œå¤„ç†ã€‚</p><p>è†¨èƒ€æ“ä½œç”¨äºæ‰©å¤§å›¾åƒä¸­çš„ç™½è‰²åŒºåŸŸï¼Œå³é€šè¿‡ç»“æ„å…ƒç´ çš„ç§»åŠ¨æ¥æ‰©å±•ç™½è‰²åƒç´ ã€‚å¦‚æœç»“æ„å…ƒç´ çš„ä¸­å¿ƒè¦†ç›–äº†è‡³å°‘ä¸€ä¸ªç™½è‰²åƒç´ ï¼Œåˆ™ä¸­å¿ƒä½ç½®çš„åƒç´ è¢«ç½®ä¸ºç™½è‰²ã€‚è†¨èƒ€æ“ä½œé€šå¸¸ç”¨äºå¡«å……ç©ºæ´ã€è¿æ¥æ–­å¼€çš„å¯¹è±¡å’Œæ‰©å±•ç‰©ä½“ã€‚è…èš€å’Œè†¨èƒ€æ˜¯æ•°å­¦å½¢æ€å­¦æœ€åŸºæœ¬çš„å˜æ¢ã€‚</p><p>å›¾åƒè†¨èƒ€ä¸»è¦é’ˆå¯¹çš„æ˜¯é˜ˆå€¼åŒ–åçš„å›¾åƒã€‚å›¾åƒè†¨èƒ€ç±»ä¼¼äºâ€œé¢†åŸŸè¢«æ‰©å¼ â€ï¼Œå°†å›¾åƒä¸­çš„é«˜äº®åŒºåŸŸæˆ–ç™½è‰²éƒ¨åˆ†è¿›è¡Œæ‰©å¢ç²—åŒ–ï¼Œå…¶è¿è¡Œç»“æœå›¾æ¯”åŸå›¾çš„é«˜äº®åŒºåŸŸæ›´å¤§ã€‚å…¶åŸç†æ˜¯ï¼šå°†æ ¸åœ¨åŸå§‹å›¾åƒä¸­è¿›è¡Œéå†ï¼Œç„¶åå°†åŸå§‹å›¾åƒéå†åˆ°çš„åƒç´ ç‚¹çš„å€¼ä¸è‡ªå®šä¹‰å·ç§¯æ ¸(å…¨ä¸º1çš„äºŒç»´çŸ©é˜µ)å¾—å€¼è¿›è¡Œä¸è¿ç®—ï¼Œåƒç´ ç‚¹ä¸å¯¹åº”æ ¸ä¸€ ä¸€å¯¹åº”è¿›è¡Œä¸ï¼Œå½“å·ç§¯æ ¸å¯¹åº”çš„å…ƒç´ å€¼åªè¦æœ‰ä¸€ä¸ªä¸º1æ—¶ï¼Œè®¾ç½®å·ç§¯æ ¸ä¸­å¿ƒå€¼çš„åƒç´ ç‚¹ä¸º1ï¼Œå¦‚æœå…¨ä¸º0ï¼Œ,åˆ™å…¶å€¼è®¾ç½®ä¸º0ã€‚</p><p>å›¾åƒè…èš€ä¸»è¦é’ˆå¯¹çš„æ˜¯é˜ˆå€¼åŒ–åçš„å›¾åƒã€‚å›¾åƒè…èš€ç±»ä¼¼äºâ€œé¢†åŸŸè¢«èš•é£Ÿâ€ï¼Œå°†å›¾åƒä¸­çš„é«˜äº®åŒºåŸŸæˆ–ç™½è‰²éƒ¨åˆ†è¿›è¡Œç¼©å‡ç»†åŒ–ï¼Œå…¶è¿è¡Œç»“æœå›¾æ¯”åŸå›¾çš„é«˜äº®åŒºåŸŸæ›´å°ã€‚å…¶åŸç†æ˜¯ï¼šå°†æ ¸åœ¨åŸå§‹å›¾åƒä¸­è¿›è¡Œéå†ï¼Œç„¶åå°†åŸå§‹å›¾åƒéå†åˆ°çš„åƒç´ ç‚¹çš„å€¼ä¸è‡ªå®šä¹‰å·ç§¯æ ¸(å…¨ä¸º1çš„äºŒç»´çŸ©é˜µ)å¾—å€¼è¿›è¡Œä¸è¿ç®—ï¼Œåƒç´ ç‚¹ä¸å¯¹åº”æ ¸ä¸€ ä¸€å¯¹åº”è¿›è¡Œä¸ï¼Œå½“å·ç§¯æ ¸å¯¹åº”çš„å…ƒç´ å€¼å‡ä¸º1æ—¶ï¼Œè®¾ç½®å·ç§¯æ ¸ä¸­å¿ƒå€¼çš„åƒç´ ç‚¹ä¸º1ï¼Œå¦åˆ™å…¶å€¼è®¾ç½®ä¸º0</p><p>ä¸€å¤´é›¾æ°´ï¼Œç›´æ¥çœ‹å›¾â€¦</p><table><thead><tr><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/df2fe5f21358787937bf255254be8820.png"></th><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/7ffd7403a2a42acc16899afdda0b19a0.png"></th><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/6b29fcd3560f6d0db69c76561679ee41.png"></th></tr></thead><tbody><tr><td><strong>è…èš€å˜æ¢</strong></td><td><strong>åŸå›¾</strong></td><td><strong>è†¨èƒ€å˜æ¢</strong></td></tr></tbody></table><p>æ³¨ï¼šå·ç§¯æ ¸çš„å¤§å°ä¸º5Ã—5ã€‚</p><p><strong>è…èš€å°±æ˜¯ä½¿å¾—â€œç™½è‰²â€åŒºåŸŸå˜å°ï¼Œè†¨èƒ€å°±æ˜¯ä½¿å¾—â€œç™½è‰²â€åŒºåŸŸå˜å¤§ã€‚</strong></p><h2 id="å¼€è¿ç®—ä¸é—­è¿ç®—"><a href="#å¼€è¿ç®—ä¸é—­è¿ç®—" class="headerlink" title="å¼€è¿ç®—ä¸é—­è¿ç®—"></a>å¼€è¿ç®—ä¸é—­è¿ç®—</h2><p>å¼€è¿ç®—æ˜¯å°†è…èš€ï¼ˆErosionï¼‰æ“ä½œå’Œè†¨èƒ€ï¼ˆDilationï¼‰æ“ä½œä¾æ¬¡åº”ç”¨äºå›¾åƒçš„æ“ä½œã€‚é¦–å…ˆæ‰§è¡Œè…èš€æ“ä½œï¼Œç„¶åå†æ‰§è¡Œè†¨èƒ€æ“ä½œã€‚å¼€è¿ç®—é€šå¸¸ç”¨äºä»¥ä¸‹æƒ…å†µï¼š</p><ul><li>å»é™¤å°çš„å™ªå£°å’Œæ–‘ç‚¹ï¼šé€šè¿‡è…èš€æ“ä½œå¯ä»¥ç¼©å°å°çš„ç™½è‰²åŒºåŸŸï¼Œç„¶åé€šè¿‡è†¨èƒ€æ“ä½œå°†å®ƒä»¬æ¢å¤åˆ°åŸå§‹å¤§å°ï¼Œä»è€Œå»é™¤å°çš„å™ªå£°å’Œæ–‘ç‚¹ã€‚</li><li>åˆ†ç¦»è¿æ¥çš„ç‰©ä½“ï¼šå¼€è¿ç®—å¯ä»¥åˆ†ç¦»è¿æ¥åœ¨ä¸€èµ·çš„ç‰©ä½“ï¼Œä½¿å®ƒä»¬å˜å¾—æ›´è¿œç¦»å½¼æ­¤ã€‚</li></ul><p>é—­è¿ç®—æ˜¯å°†è†¨èƒ€ï¼ˆDilationï¼‰æ“ä½œå’Œè…èš€ï¼ˆErosionï¼‰æ“ä½œä¾æ¬¡åº”ç”¨äºå›¾åƒçš„æ“ä½œã€‚é¦–å…ˆæ‰§è¡Œè†¨èƒ€æ“ä½œï¼Œç„¶åå†æ‰§è¡Œè…èš€æ“ä½œã€‚é—­è¿ç®—é€šå¸¸ç”¨äºä»¥ä¸‹æƒ…å†µï¼š</p><ul><li>å¡«å……ç‰©ä½“å†…çš„å°å­”ï¼šé€šè¿‡è†¨èƒ€æ“ä½œå¯ä»¥å¡«å……ç‰©ä½“å†…çš„å°å­”ï¼Œç„¶åé€šè¿‡è…èš€æ“ä½œæ¥è¿˜åŸç‰©ä½“çš„å¤§å°ã€‚</li><li>è¿æ¥æ–­å¼€çš„ç‰©ä½“ï¼šé—­è¿ç®—å¯ä»¥è¿æ¥æ–­å¼€çš„ç‰©ä½“ï¼Œä½¿å®ƒä»¬ç›¸äº’æ¥è§¦ã€‚</li></ul><p>åœ¨å›¾åƒåˆ†å‰²ä¸­ï¼Œå¼€è¿ç®—å¯ä»¥åˆ†ç¦»ç›¸é‚»ç‰©ä½“ï¼Œé—­è¿ç®—å¯ç”¨äºè¿æ¥ç‰©ä½“ã€‚åœ¨å…‰å­¦å­—ç¬¦è¯†åˆ«ï¼ˆOCRï¼‰ä¸­ï¼Œå¼€è¿ç®—å¯ç”¨äºå»é™¤æ–‡æœ¬å­—ç¬¦ä¹‹é—´çš„å¹²æ‰°ï¼Œé—­è¿ç®—å¯ç”¨äºè¿æ¥å­—ç¬¦çš„ç¬”ç”»ã€‚åœ¨åŒ»å­¦å½±åƒä¸­ï¼Œè¿™äº›æ“ä½œå¯ç”¨äºå¤„ç†Xå°„çº¿å›¾åƒæˆ–CTæ‰«æå›¾åƒä¸­çš„ç»“æ„ã€‚</p><p>ä¸€å¤´é›¾æ°´ï¼Œç›´æ¥çœ‹å›¾â€¦</p><table><thead><tr><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/28953503336881d61c9b80472ab7a96f.png"></th><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/7ffd7403a2a42acc16899afdda0b19a0.png" alt="åŸå§‹å›¾åƒ"></th><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/60951e8e70e0276c13faa177bc76695e.png"></th></tr></thead><tbody><tr><td><strong>å¼€è¿ç®—</strong></td><td><strong>åŸå›¾</strong></td><td><strong>é—­è¿ç®—</strong></td></tr></tbody></table><p>æ³¨ï¼šå·ç§¯æ ¸çš„å¤§å°ä¸º5Ã—5ã€‚</p><p>å—¯â€¦ æœ‰å•¥åŒºåˆ«â€¦. å› ä¸ºå¼€è¿ç®—å’Œé—­è¿ç®—éƒ½æ˜¯è…èš€å’Œè†¨èƒ€ç›¸ç»“åˆçš„ï¼Œæ— éæ˜¯é¡ºåºä¸åŒï¼Œå› æ­¤ï¼Œå¯¹äºä¸Šè¿°å›¾åƒçš„å½±å“ä¸å¤§ã€‚</p><table><thead><tr><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/0d6668004a819e172f8c6ac9ca7d8864.png"></th><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/311d90b895603171b85bc3054f80143e.png"></th><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/8b39caf08ec08e1441b49cd645c20e63.png"></th></tr></thead><tbody><tr><td><strong>å¼€è¿ç®—</strong></td><td><strong>åŸå›¾</strong></td><td><strong>é—­è¿ç®—</strong></td></tr></tbody></table><p><strong>å¼€è¿ç®—å°±æ˜¯å¡«å……ç™½è‰²ç©ºæ´ï¼Œé—­è¿ç®—å°±æ˜¯æ–­å¼€é»‘è‰²è¿æ¥ï¼Œå¼€è¿ç®—å’Œé—­è¿ç®—éƒ½åŸºæœ¬ä¿æŒå›¾åƒåŸæ¥çš„å°ºå¯¸å’Œå½¢çŠ¶ã€‚</strong></p><h2 id="å½¢æ€å­¦æ¢¯åº¦"><a href="#å½¢æ€å­¦æ¢¯åº¦" class="headerlink" title="å½¢æ€å­¦æ¢¯åº¦"></a>å½¢æ€å­¦æ¢¯åº¦</h2><p>å½¢æ€å­¦æ¢¯åº¦é€šè¿‡è®¡ç®—å›¾åƒä¸­æ¯ä¸ªåƒç´ ç‚¹çš„äº®åº¦å˜åŒ–ç¨‹åº¦æ¥å®ç°ï¼Œä»è€Œå¯ä»¥çªå‡ºç‰©ä½“çš„è¾¹ç•Œã€‚å½¢æ€å­¦æ¢¯åº¦æ“ä½œé€šå¸¸å¯¹äºŒå€¼å›¾åƒæˆ–ç°åº¦å›¾åƒè¿›è¡Œå¤„ç†ã€‚</p><p>å½¢æ€å­¦æ¢¯åº¦æ“ä½œé€šå¸¸é€šè¿‡ä»¥ä¸‹å…¬å¼æ¥è®¡ç®—æ¯ä¸ªåƒç´ çš„æ¢¯åº¦å€¼ï¼š</p><p>Gradient(x,y)&#x3D;Dilation(x,y)-Erosion(x,y)</p><p>Dilation(x,y) è¡¨ç¤ºå¯¹å›¾åƒè¿›è¡Œè†¨èƒ€æ“ä½œï¼ŒErosion(x,y) è¡¨ç¤ºå¯¹å›¾åƒè¿›è¡Œè…èš€æ“ä½œã€‚è¿™æ„å‘³ç€å½¢æ€å­¦æ¢¯åº¦æ˜¯è†¨èƒ€å›¾åƒå’Œè…èš€å›¾åƒä¹‹é—´çš„å·®å¼‚ã€‚è¿™ç§æ“ä½œçªå‡ºäº†ç‰©ä½“çš„è¾¹ç¼˜ï¼Œå› ä¸ºè¾¹ç¼˜åƒç´ çš„å€¼åœ¨è†¨èƒ€å’Œè…èš€ä¹‹é—´äº§ç”Ÿæœ€å¤§çš„å˜åŒ–ã€‚å½¢æ€å­¦æ¢¯åº¦çš„åº”ç”¨å¦‚ä¸‹ï¼š</p><ul><li>è¾¹ç¼˜æ£€æµ‹ï¼šå½¢æ€å­¦æ¢¯åº¦å¯ç”¨äºæ£€æµ‹å›¾åƒä¸­çš„è¾¹ç¼˜ï¼Œä½¿å…¶æˆä¸ºå›¾åƒå¤„ç†ä¸­å¸¸ç”¨çš„è¾¹ç¼˜æ£€æµ‹å·¥å…·ã€‚åœ¨è¾¹ç¼˜æ£€æµ‹ä¸­ï¼Œç‰©ä½“è¾¹ç•Œé€šå¸¸æ˜¯æ„Ÿå…´è¶£çš„åŒºåŸŸï¼Œå½¢æ€å­¦æ¢¯åº¦å¯ä»¥å¸®åŠ©æ‰¾åˆ°è¿™äº›è¾¹ç•Œã€‚</li><li>ç‰©ä½“åˆ†å‰²ï¼šå½¢æ€å­¦æ¢¯åº¦å¯ä»¥ç”¨äºåˆ†å‰²å›¾åƒä¸­çš„ä¸åŒç‰©ä½“ï¼Œå› ä¸ºå®ƒå¯ä»¥çªå‡ºç‰©ä½“ä¹‹é—´çš„è¾¹ç•Œã€‚è¿™åœ¨è®¡ç®—æœºè§†è§‰å’Œå›¾åƒåˆ†æä¸­éå¸¸æœ‰ç”¨ã€‚</li><li>çº¹ç†åˆ†æï¼šåœ¨çº¹ç†åˆ†æä¸­ï¼Œå½¢æ€å­¦æ¢¯åº¦å¯ä»¥ç”¨äºæ£€æµ‹å’Œæè¿°å›¾åƒä¸­çš„çº¹ç†ç‰¹å¾ï¼Œä»è€Œæœ‰åŠ©äºåˆ†ç±»å’Œè¯†åˆ«ä»»åŠ¡ã€‚</li><li>å›¾åƒå¢å¼ºï¼šå½¢æ€å­¦æ¢¯åº¦æ“ä½œå¯ä»¥å¢å¼ºå›¾åƒä¸­ç‰©ä½“çš„è½®å»“å’Œè¾¹ç¼˜ï¼Œä½¿å®ƒä»¬æ›´æ¸…æ™°å¯è§ï¼Œè¿™åœ¨å›¾åƒæ”¹è¿›å’Œå¯è§†åŒ–ä¸­å¾ˆæœ‰ç”¨ã€‚</li><li>åŒ»å­¦å½±åƒå¤„ç†ï¼šåœ¨åŒ»å­¦å›¾åƒä¸­ï¼Œå½¢æ€å­¦æ¢¯åº¦å¯ä»¥ç”¨äºæ£€æµ‹è¡€ç®¡ã€éª¨éª¼å’Œç»„ç»‡çš„è¾¹ç•Œï¼Œä»è€Œå¸®åŠ©åŒ»ç”Ÿè¿›è¡Œè¯Šæ–­ã€‚</li></ul><p>å¯¹å›¾åƒè¿›è¡Œå½¢æ€å­¦æ¢¯åº¦è®¡ç®—æ—¶çš„æ•ˆæœå¦‚ä¸‹ï¼š</p><table><thead><tr><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/7ffd7403a2a42acc16899afdda0b19a0.png"></th><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/fcbca0d7334a7df27f68aad79fcc65fd.png"></th></tr></thead><tbody><tr><td><strong>åŸå›¾</strong></td><td><strong>å½¢æ€å­¦æ¢¯</strong></td></tr></tbody></table><p>é€šè¿‡ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œå½¢æ€å­¦æ¢¯åº¦å¯¹å›¾åƒçš„è¾¹ç¼˜æ£€æµ‹å…·æœ‰æ˜æ˜¾çš„æ•ˆæœã€‚</p><h2 id="é¡¶å¸½ä¸é»‘å¸½"><a href="#é¡¶å¸½ä¸é»‘å¸½" class="headerlink" title="é¡¶å¸½ä¸é»‘å¸½"></a>é¡¶å¸½ä¸é»‘å¸½</h2><p>é¡¶å¸½å’Œé»‘å¸½æ˜¯å½¢æ€å­¦å›¾åƒå¤„ç†ä¸­çš„ä¸¤ç§æ“ä½œï¼Œå®ƒä»¬åˆ†åˆ«ç”¨äºçªå‡ºå›¾åƒä¸­çš„äº®åŒºåŸŸå’Œæš—åŒºåŸŸï¼Œå¸¸ç”¨äºå›¾åƒå¢å¼ºå’Œç‰¹å¾æå–ã€‚é¡¶å¸½æ“ä½œæ˜¯åŸå§‹å›¾åƒä¸å¼€è¿ç®—çš„ç»“æœä¹‹å·®ã€‚å¼€è¿ç®—é€šå¸¸ç”¨äºå»é™¤å›¾åƒä¸­çš„å™ªå£°æˆ–è¿æ¥åˆ†æ•£çš„ç‰©ä½“ï¼Œå› æ­¤é¡¶å¸½æ“ä½œå¯ä»¥çªå‡ºå›¾åƒä¸­çš„å°äº®åŒºåŸŸæˆ–ç‰©ä½“çš„ç»†èŠ‚ã€‚é¡¶å¸½æ“ä½œé€šå¸¸ç”¨äºä»¥ä¸‹æƒ…å†µï¼š</p><ul><li>äº®ç‰©ä½“æ£€æµ‹ï¼šå½“äº®ç‰©ä½“ä¸èƒŒæ™¯çš„äº®åº¦å·®å¼‚å¾ˆå°æ—¶ï¼Œé¡¶å¸½æ“ä½œå¯ä»¥çªå‡ºè¿™äº›äº®ç‰©ä½“ã€‚</li><li>çº¹ç†åˆ†æï¼šç”¨äºåˆ†æå›¾åƒä¸­çš„çº¹ç†å’Œç»†èŠ‚ã€‚</li><li>å›¾åƒå¢å¼ºï¼šå¯ä»¥å¢å¼ºå›¾åƒä¸­çš„ç»†èŠ‚ï¼Œä½¿å…¶æ›´æ¸…æ™°å¯è§ã€‚</li></ul><p>é»‘å¸½æ“ä½œæ˜¯é—­è¿ç®—çš„ç»“æœä¸åŸå§‹å›¾åƒä¹‹å·®ã€‚é—­è¿ç®—é€šå¸¸ç”¨äºå¡«å……ç‰©ä½“å†…çš„å°å­”æˆ–è¿æ¥ç‰©ä½“ï¼Œå› æ­¤é»‘å¸½æ“ä½œå¯ä»¥çªå‡ºå›¾åƒä¸­çš„å°æš—åŒºåŸŸæˆ–ç‰©ä½“çš„ç»†èŠ‚ã€‚é»‘å¸½æ“ä½œé€šå¸¸ç”¨äºä»¥ä¸‹æƒ…å†µï¼š</p><ul><li>æš—ç‰©ä½“æ£€æµ‹ï¼šå½“æš—ç‰©ä½“ä¸èƒŒæ™¯çš„äº®åº¦å·®å¼‚å¾ˆå°æ—¶ï¼Œé»‘å¸½æ“ä½œå¯ä»¥çªå‡ºè¿™äº›æš—ç‰©ä½“ã€‚</li><li>å°å­”å¡«å……ï¼šç”¨äºå¡«å……ç‰©ä½“å†…çš„å°å­”æˆ–è£‚ç¼ï¼Œä»¥è¿˜åŸç‰©ä½“çš„å½¢çŠ¶ã€‚</li><li>å›¾åƒå¢å¼ºï¼šå¯ä»¥å¢å¼ºå›¾åƒä¸­çš„ç»†èŠ‚ï¼Œç‰¹åˆ«æ˜¯æš—åŒºåŸŸçš„ç»†èŠ‚ã€‚</li></ul><p>åº”ç”¨ç¤ºä¾‹ï¼š</p><ul><li>åŒ»å­¦å½±åƒï¼šé¡¶å¸½å’Œé»‘å¸½æ“ä½œå¯ç”¨äºåŒ»å­¦å½±åƒä¸­çš„ç—…å˜æ£€æµ‹å’Œè¡€ç®¡åˆ†æã€‚</li><li>å·¥ä¸šæ£€æµ‹ï¼šåœ¨åˆ¶é€ ä¸šä¸­ï¼Œå®ƒä»¬å¯ç”¨äºæ£€æµ‹äº§å“è¡¨é¢ä¸Šçš„ç¼ºé™·æˆ–å¾®å°çš„ç‘•ç–µã€‚</li><li>çº¹ç†åˆ†æï¼šç”¨äºçº¹ç†åˆ†æå’Œçº¹ç†ç‰¹å¾æå–ï¼Œä¾‹å¦‚åœ¨å›¾åƒåˆ†ç±»æˆ–å›¾åƒæ£€ç´¢ä¸­ã€‚</li><li>æ•°å­—å›¾åƒå¤„ç†ï¼šå¸¸ç”¨äºæ•°å­—å›¾åƒå¤„ç†ä¸­çš„å„ç§å›¾åƒå¢å¼ºå’Œé¢„å¤„ç†ä»»åŠ¡ã€‚</li></ul><p>æ€»ä¹‹ï¼Œé¡¶å¸½å’Œé»‘å¸½æ“ä½œæ˜¯å½¢æ€å­¦å›¾åƒå¤„ç†ä¸­çš„ä¸¤ç§é‡è¦å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©çªå‡ºå›¾åƒä¸­çš„äº®æš—åŒºåŸŸå’Œç»†èŠ‚ï¼Œç”¨äºä¸åŒçš„å›¾åƒåˆ†æå’Œå¢å¼ºä»»åŠ¡ã€‚é€‰æ‹©é€‚å½“çš„æ“ä½œå–å†³äºå…·ä½“çš„åº”ç”¨åœºæ™¯å’Œç›®æ ‡ã€‚</p><p>ä¸€å¤´é›¾æ°´ï¼Œç›´æ¥çœ‹å›¾â€¦</p><table><thead><tr><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/4bbcac92cf2200b7e9865fa07d1e73c3.png"></th><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/311d90b895603171b85bc3054f80143e.png"></th><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/4f8310d681cc934306a65da7641bb029.png"></th></tr></thead><tbody><tr><td><strong>é¡¶å¸½</strong></td><td><strong>åŸå›¾</strong></td><td><strong>é»‘å¸½</strong></td></tr></tbody></table><p>ç»“åˆå¼€è¿ç®—å’Œé—­è¿ç®—ï¼Œå°±å¯ä»¥çœ‹å‡ºé¡¶å¸½å’Œé»‘å¸½æ“ä½œä¸ä¹‹çš„å…³ç³»ï¼Œä½†æ˜¯å…·ä½“åº”ç”¨èµ·æ¥æ˜¯ä»€ä¹ˆæ ·å­çš„å‘¢ï¼Ÿçœ‹ä¸‹å›¾ï¼š</p><table><thead><tr><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/aa5e50980c5e180aa26224402a463e6e.png"></th><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/4693bd3b37c710f59bbc5155dd0bcba2.png"></th><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/5e779f81df404e04a55ad2c946aed599.png"></th></tr></thead><tbody><tr><td><strong>åŸå›¾</strong></td><td><strong>é—­è¿ç®—</strong></td><td><strong>é»‘å¸½</strong></td></tr></tbody></table><p>| <img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/e1040dba7d87a8279fac9a8ee3ef6b64.png"> | <strong><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/3e16fd13019d0bd17319d5190ca46760.png"></strong> | <img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/d565b8b1a2af708a41f010d0b6f7e810.png"> |<br>| <strong>åŸå›¾</strong>                                                | <strong>å¼€è¿ç®—</strong>                                                | <strong>é¡¶å¸½</strong>                                            |</p><p><strong>é¡¶å¸½æ“ä½œæ˜¯åŸå§‹å›¾åƒä¸å¼€è¿ç®—çš„ç»“æœä¹‹å·®ã€‚é»‘å¸½æ“ä½œæ˜¯é—­è¿ç®—çš„ç»“æœä¸åŸå§‹å›¾åƒä¹‹å·®ã€‚</strong></p><h1 id="å‡ ä½•å˜æ¢"><a href="#å‡ ä½•å˜æ¢" class="headerlink" title="å‡ ä½•å˜æ¢"></a>å‡ ä½•å˜æ¢</h1><p>å‡ ä½•å˜æ¢æ˜¯æ•°å­—å›¾åƒå¤„ç†é¢†åŸŸä¸­çš„å…³é”®æ¦‚å¿µï¼Œç”¨äºæ”¹å˜å›¾åƒçš„å‡ ä½•ç»“æ„å’Œå¤–è§‚ï¼Œè€Œä¸æ¶‰åŠåƒç´ å€¼çš„ä¿®æ”¹ã€‚è¿™äº›å˜æ¢å…è®¸æˆ‘ä»¬å¯¹å›¾åƒè¿›è¡Œç¼©æ”¾ã€æ—‹è½¬ã€å¹³ç§»ã€æ‹‰ä¼¸å’Œæ‰­æ›²ç­‰æ“ä½œï¼Œä»¥æ»¡è¶³ç‰¹å®šçš„éœ€æ±‚å’Œåº”ç”¨åœºæ™¯ã€‚å‡ ä½•å˜æ¢åœ¨å›¾åƒå¤„ç†ä¸­æœ‰å¹¿æ³›çš„åº”ç”¨ï¼Œä»ç®€å•çš„å°ºå¯¸è°ƒæ•´åˆ°å¤æ‚çš„åœºæ™¯æ ¡æ­£å’Œç‰¹æ•ˆæ·»åŠ ã€‚å®ƒä»¬ä¸ºæˆ‘ä»¬æä¾›äº†å¼ºå¤§çš„å·¥å…·ï¼Œç”¨äºæ”¹å–„å›¾åƒè´¨é‡ã€åˆ†æå›¾åƒå†…å®¹ä»¥åŠå®ç°å„ç§è®¡ç®—æœºè§†è§‰ä»»åŠ¡ã€‚æ— è®ºæ˜¯åŒ»å­¦å½±åƒåˆ†æã€è‡ªåŠ¨é©¾é©¶ã€è§†é¢‘æ¸¸æˆè¿˜æ˜¯è‰ºæœ¯åˆ›ä½œï¼Œå‡ ä½•å˜æ¢éƒ½æ˜¯ä¸å¯æˆ–ç¼ºçš„å·¥å…·ï¼Œä¸ºå›¾åƒå¤„ç†å’Œè®¡ç®—æœºè§†è§‰é¢†åŸŸçš„ä¸æ–­å‘å±•æä¾›äº†å…³é”®æ”¯æŒã€‚</p><h2 id="ä»¿å°„å˜æ¢"><a href="#ä»¿å°„å˜æ¢" class="headerlink" title="ä»¿å°„å˜æ¢"></a>ä»¿å°„å˜æ¢</h2><p>ä»¿å°„å˜æ¢æ˜¯æŒ‡åœ¨å‘é‡ç©ºé—´ä¸­è¿›è¡Œä¸€æ¬¡çº¿æ€§å˜æ¢(ä¹˜ä»¥ä¸€ä¸ªçŸ©é˜µ)å¹¶åŠ ä¸Šä¸€ä¸ªå¹³ç§»(åŠ ä¸Šä¸€ä¸ªå‘é‡)ï¼Œå˜æ¢ä¸ºå¦ä¸€ä¸ªå‘é‡ç©ºé—´çš„è¿‡ç¨‹ã€‚åœ¨æœ‰é™ç»´çš„æƒ…å†µä¸‹ï¼Œæ¯ä¸ªä»¿å°„å˜æ¢å¯ä»¥ç”±ä¸€ä¸ªçŸ©é˜µAå’Œä¸€ä¸ªå‘é‡bç»™å‡ºï¼Œå®ƒå¯ä»¥å†™ä½œAå’Œä¸€ä¸ªé™„åŠ çš„åˆ—bã€‚ä¸€ä¸ªä»¿å°„å˜æ¢å¯¹åº”äºä¸€ä¸ªçŸ©é˜µå’Œä¸€ä¸ªå‘é‡çš„ä¹˜æ³•ï¼Œè€Œä»¿å°„å˜æ¢çš„å¤åˆå¯¹åº”äºæ™®é€šçš„çŸ©é˜µä¹˜æ³•ï¼Œåªè¦åŠ å…¥ä¸€ä¸ªé¢å¤–çš„è¡Œåˆ°çŸ©é˜µçš„åº•ä¸‹ï¼Œè¿™ä¸€è¡Œå…¨éƒ¨æ˜¯0é™¤äº†æœ€å³è¾¹æ˜¯ä¸€ä¸ª1ï¼Œè€Œåˆ—å‘é‡çš„åº•ä¸‹è¦åŠ ä¸Šä¸€ä¸ª1.</p><p>ä»¿å°„å˜æ¢æè¿°äº†ä¸€ç§äºŒç»´ä»¿å°„å˜æ¢çš„åŠŸèƒ½ï¼Œå®ƒæ˜¯ä¸€ç§äºŒç»´åæ ‡ä¹‹é—´çš„çº¿æ€§å˜æ¢ï¼Œä¿æŒäºŒç»´å›¾å½¢çš„â€œå¹³ç›´æ€§â€(å³å˜æ¢åç›´çº¿è¿˜æ˜¯ç›´çº¿ï¼Œåœ†å¼§è¿˜æ˜¯åœ†å¼§)å’Œâ€œå¹³è¡Œæ€§â€(å…¶å®æ˜¯ä¿æŒäºŒç»´å›¾å½¢é—´çš„ç›¸å¯¹ä½ç½®å…³ç³»ä¸å˜ï¼Œå¹³è¡Œçº¿è¿˜æ˜¯å¹³è¡Œçº¿ï¼Œè€Œç›´çº¿ä¸Šçš„ç‚¹ä½ç½®é¡ºåºä¸å˜ï¼Œå¦ç‰¹åˆ«æ³¨æ„å‘é‡é—´å¤¹è§’å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–)ã€‚ä»¿å°„å˜æ¢å¯ä»¥é€šè¿‡ä¸€ç³»åˆ—çš„åŸå­å˜æ¢çš„å¤åˆæ¥å®ç°åŒ…æ‹¬ï¼šå¹³ç§»(Translation)ã€ç¼©æ”¾(Scale)ã€ç¿»è½¬(Flip)ã€æ—‹è½¬(Rotation)å’Œé”™åˆ‡(Shear).</p><p>äº‹å®ä¸Šï¼Œä»¿å°„å˜æ¢ä»£è¡¨çš„æ˜¯ä¸¤å¹…å›¾ä¹‹é—´çš„å…³ç³»ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨2x3çŸ©é˜µæ¥è¡¨ç¤ºä»¿å°„å˜æ¢å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/0112ba5cf3ed3070df2c9b16a0977592.png"></p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/593c901c84ab56cf201b071ea784d283.png"></p><p>è€ƒè™‘åˆ°æˆ‘ä»¬è¦ä½¿ç”¨çŸ©é˜µAå’ŒBå¯¹äºŒç»´å‘é‡X&#x3D;[x,y]Tåšå˜æ¢ï¼Œæ‰€ä»¥ä¹Ÿèƒ½è¡¨ç¤ºä¸ºä¸‹åˆ—å½¢å¼ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/1c55f47f42310736e8d18d997a3a688f.png"></p><p>å¾—åˆ°å¦‚ä¸‹æ•ˆæœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/2d9e26acd785f952e36ead506de2d417.png"></p><p>ä»ä¸Šé¢è§£é‡Šä¸­æˆ‘ä»¬å¾—çŸ¥ä»¿å°„å˜æ¢è¡¨ç¤ºçš„å°±æ˜¯ä¸¤å¹…å›¾ç‰‡çš„ä¸€ç§è”ç³»ï¼Œå…³äºè¿™ç§è”ç³»çš„ä¿¡æ¯å¤§è‡´å¯ä»¥ä»ä»¥ä¸‹ä¸¤ç§åœºæ™¯è·å¾—ã€‚</p><p>a. æˆ‘ä»¬å·²çŸ¥Xå’ŒTè€Œä¸”æˆ‘ä»¬çŸ¥é“ä»–ä»¬æ˜¯æœ‰è”ç³»çš„ï¼Œæ¥ä¸‹æ¥çš„å·¥ä½œå°±æ˜¯æ±‚è§£çŸ©é˜µM</p><p>b. æˆ‘ä»¬ä¸€è‡´Må’ŒXè¦æ±‚å¾—T,æˆ‘ä»¬åªéœ€è¦åº”ç”¨ç®—å¼T&#x3D;M.Xå³å¯ã€‚å¯¹äºè¿™ç§è”ç³»çš„ä¿¡æ¯å¯ä»¥ç”¨çŸ©é˜µMæ¸…æ™°çš„è¡¨è¾¾(å³ç»™å‡ºæ˜ç¡®çš„2x3çŸ©é˜µ)æˆ–è€…ä¹Ÿå¯ä»¥ç”¨ä¸¤å¹…å›¾ç‰‡ç‚¹ä¹‹é—´å‡ ä½•å…³ç³»æ¥è¡¨è¾¾ã€‚</p><p>å› ä¸ºçŸ©é˜µMè”ç³»ç€ä¸¤å¹…å›¾ç‰‡ï¼Œæˆ‘ä»¬ä»¥å…¶è¡¨ç¤ºä¸¤å›¾ä¸­å„ä¸‰ç‚¹ç›´æ¥çš„è”ç³»ä¸ºä¾‹ï¼Œå¦‚ä¸‹:</p><p>ç‚¹1,2å’Œ3(åœ¨å›¾ä¸€ä¸­å½¢æˆä¸€ä¸ªä¸‰è§’)ä¸å›¾äºŒä¸­ä¸‰ä¸ªç‚¹ä¸€ä¸€æ˜ å°„ï¼Œä»ç„¶å½¢æˆä¸‰è§’å½¢ï¼Œä½†å½¢çŠ¶å·²ç»å¤§å¤§æ”¹å˜ã€‚å¦‚æœæˆ‘ä»¬èƒ½é€šè¿‡è¿™æ ·ä¸¤ç»„ä¸‰ç‚¹æ±‚å‡ºä»¿å°„å˜æ¢ï¼ˆä½ èƒ½é€‰æ‹©è‡ªå·±å–œæ¬¢çš„ç‚¹ï¼‰ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±èƒ½æŠŠä»¿å°„å˜æ¢åº”ç”¨åˆ°å›¾åƒä¸­æ‰€æœ‰çš„ç‚¹ã€‚</p><p>å¯¹å®é™…çš„å›¾åƒè¿›è¡Œä»¿å°„å˜æ¢çš„æ•ˆæœå¦‚ä¸‹ï¼š</p><table><thead><tr><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/38c2d8927c01a06858a43fe180df10bf.png"></th><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/a1bdbc0eb00b913a9ec23e1a92074091.png"></th></tr></thead><tbody><tr><td><strong>åŸå›¾</strong></td><td><strong>ä»¿å°„å˜æ¢</strong></td></tr></tbody></table><p><strong>ä»¿å°„å˜æ¢æ˜¯å°†çŸ©å½¢å˜æ¢æˆå¹³è¡Œå››è¾¹å½¢ï¼Œå˜æ¢åå„è¾¹ä¾æ—§å¹³è¡Œã€‚</strong></p><h2 id="é€è§†å˜æ¢"><a href="#é€è§†å˜æ¢" class="headerlink" title="é€è§†å˜æ¢"></a>é€è§†å˜æ¢</h2><p>é€è§†å˜æ¢ä¸èƒ½ä¿è¯ç‰©ä½“å½¢çŠ¶çš„â€œå¹³è¡Œæ€§â€ã€‚ä»¿å°„å˜æ¢æ˜¯é€è§†å˜æ¢çš„ç‰¹æ®Šå½¢å¼ã€‚é€è§†å˜æ¢æ˜¯å°†ä¸€ä¸ªå¹³é¢æŠ•å½±åˆ°å¦ä¸€ä¸ªå¹³é¢ï¼Œç®€å•ç†è§£å°±æ˜¯æŠŠä¸€å¼ å›¾ç‰‡æŠ•å½±åˆ°å¦ä¸€å¼ å›¾ç‰‡ï¼Œæ±‚çš„æ˜¯åŒä¸€å¼ å›¾ç‰‡åˆ°å®ƒçš„æŠ•å½±å›¾ç‰‡ä¹‹é—´çš„å˜æ¢ã€‚é€è§†å˜æ¢æ˜¯å°†æˆåƒæŠ•å½±åˆ°ä¸€ä¸ªæ–°çš„è§†å¹³é¢ï¼Œä¹Ÿç§°ä½œæŠ•å½±æ˜ å°„ã€‚å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/ce8be3b8d534d31b2192bcbc583e3a81.png"></p><p>é€è§†å˜æ¢åŸç†å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/645bf3d7e15e69e8a183a1be8755b91f.png"></p><p>ä¸Šè¿°å…¬å¼ä¸­ï¼Œ (<em>u</em>,<em>v</em>) ä»£è¡¨åŸå§‹å›¾åƒåæ ‡ï¼Œ (<em>x</em>,<em>y</em>) ä¸ºç»è¿‡é€è§†å˜æ¢çš„å›¾ç‰‡åæ ‡ï¼Œå…¶ä¸­å˜æ¢çŸ©é˜µä¸º3Ã—3 å½¢å¼ã€‚è¿›è€Œå¯ä»¥å¾—åˆ°ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/57a9929d24923ac6eb7581731ccfe3e6.png"></p><p>åœ¨åŸå›¾ä¸Šå–4ç‚¹åæ ‡ä¸æ–°å›¾å¯¹åº”ï¼Œç›¸å½“äºåˆ—å‡ºæ–¹ç¨‹ç»„ï¼Œè§£å‡ºå˜æ¢çŸ©é˜µã€‚é€šè¿‡å˜æ¢çŸ©é˜µï¼Œåœ¨è¾“å…¥åŸå›¾åƒåæ ‡çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç›´æ¥æ±‚è§£æ–°å›¾å¹³é¢åæ ‡ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/7c71e1a5dbcf76e3543a33c99c3171cc.png"></p><p>å…¶ä¸­ï¼Œ (<em>x</em>,<em>y</em>)æ˜¯åŸå›¾åæ ‡ï¼Œ<span style="display: inline-block; vertical-align: middle;"><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/å¸¸ç”¨å›¾åƒå˜æ¢/c002438d0c0f30cdbb142c65c99ef72b.png" alt="" style="max-height: 1.5em;"></span>æ˜¯å˜æ¢åçš„åæ ‡ï¼›<span style="display: inline-block; vertical-align: middle;"><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/å¸¸ç”¨å›¾åƒå˜æ¢/c03622f9b4a0db4e9018790e5490f206.png" alt="" style="max-height: 1.5em;"></span> ä¸ºæ—‹è½¬é‡ï¼Œ<span style="display: inline-block; vertical-align: middle;"><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/å¸¸ç”¨å›¾åƒå˜æ¢/a057b24fb85fb51287d74dba2baef71c.png" alt="" style="max-height: 1.5em;"></span>  ä¸ºå¹³ç§»é‡ã€‚å› ä¸ºé€è§†å˜æ¢æ˜¯éçº¿æ€§çš„ï¼Œæ‰€ä»¥ä¸èƒ½é½æ¬¡æ€§è¡¨ç¤ºï¼›é€è§†å˜æ¢çŸ©é˜µä¸º3Ã—3ã€‚é€è§†å˜æ¢çš„æ–¹ç¨‹ç»„æœ‰8ä¸ªæœªçŸ¥æ•°ï¼Œæ‰€ä»¥è¦æ±‚è§£å°±éœ€è¦æ‰¾åˆ°4ç»„æ˜ å°„ç‚¹ï¼Œå››ä¸ªç‚¹å°±åˆšå¥½ç¡®å®šäº†ä¸€ä¸ªä¸‰ç»´ç©ºé—´ã€‚</p><p>åˆ©ç”¨é€è§†å˜æ¢å¸¸å¸¸è¿›è¡Œå›¾åƒçš„â€œæ‘†æ­£â€ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><table><thead><tr><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/ecfb0ef920f80807ce2f9227c6aeff55.png"></th><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/5a59ba2712377bcb27bd960e2a078dba.png"></th></tr></thead><tbody><tr><td><strong>åŸå›¾</strong></td><td><strong>é€è§†å˜æ¢</strong></td></tr></tbody></table><p><strong>é€è§†å˜æ¢ç”¨äºå°†ä¸€ä¸ªäºŒç»´å¹³é¢ä¸Šçš„å›¾åƒä»ä¸€ç§è§†è§’æˆ–æŠ•å½±æ–¹å¼è½¬æ¢ä¸ºå¦ä¸€ç§è§†è§’æˆ–æŠ•å½±æ–¹å¼çš„æ–¹æ³•ã€‚å®ƒçš„ä¸»è¦ç›®çš„æ˜¯æ¶ˆé™¤æˆ–æ ¡æ­£ç”±äºè§‚å¯Ÿè§’åº¦æˆ–ä½ç½®å˜åŒ–å¼•èµ·çš„æŠ•å½±ç•¸å˜ï¼Œä»¥ä¾¿æ›´å‡†ç¡®åœ°åˆ†ææˆ–å‘ˆç°å›¾åƒä¸­çš„å¯¹è±¡ã€‚</strong></p><h1 id="å»ç•¸å˜"><a href="#å»ç•¸å˜" class="headerlink" title="å»ç•¸å˜"></a>å»ç•¸å˜</h1><p>è¿™é‡Œé‡ç‚¹ä»‹ç»é±¼çœ¼ç›¸æœºä¸ºä¾‹å±•å¼€ä»‹ç»ã€‚é¦–å…ˆï¼Œé±¼çœ¼é•œå¤´ä¸ºä»€ä¹ˆå¯ä»¥è·å¾—æ¯”æ™®é€šé•œå¤´æ›´å¤§çš„è§†é‡èŒƒå›´å‘¢ï¼Œä»–ä»¬ä¸¤è€…ä¹‹é—´çš„å·®åˆ«åœ¨å“ªï¼Ÿ</p><p>å…¶å®ï¼Œæˆ‘ä»¬å¹³å¸¸æ¥è§¦çš„å¤§å¤šæ•°é•œå¤´éƒ½å¯ä»¥è¿‘ä¼¼çœ‹åšé’ˆå­”ç›¸æœºæ¨¡å‹ï¼Œè¯¥æ¨¡å‹ä¸‹ï¼Œå…‰çº¿æ²¿ç›´çº¿ä¼ æ’­ï¼Œåƒä¸ç‰©ä¹‹é—´æ˜¯ç›¸ä¼¼çš„ï¼Œæˆ–è€…æ›´ä¸¥æ ¼åœ°ç”¨æ•°å­¦è¯­è¨€æ¥è¯´ï¼Œåƒä¸ç‰©ä¹‹é—´æ˜¯ç»è¿‡äº†é€è§†å˜æ¢ï¼ˆPerspective Transformï¼‰ã€‚åœ¨é€è§†å˜æ¢ä¸‹ï¼Œç›´çº¿ç»è¿‡å˜æ¢ä»æ˜¯ç›´çº¿ï¼Œæ›²çº¿ç»è¿‡å˜æ¢ä»æ˜¯æ›²çº¿ï¼Œä¸¤ç›´çº¿äº¤ç‚¹ç»è¿‡å˜æ¢ä»æ˜¯ä¸¤ç›´çº¿ç›¸äº¤çš„ç‚¹ç­‰ã€‚æ­£å› ä¸ºæŠ•å½±å˜æ¢ä¿æŒäº†å¾ˆå¤šå‡ ä½•æ€§è´¨ä¸å˜ï¼Œæ‰€ä»¥æˆ‘ä»¬çœ‹ç…§ç‰‡æ˜¯èƒ½å¤Ÿä¸åŸåœºæ™¯è”ç³»èµ·æ¥çš„ï¼Œç…§ç‰‡ä¸åŸåœºæ™¯ä¹‹é—´å­˜åœ¨æŸäº›ç›¸ä¼¼çš„ç‰¹æ€§ã€‚é‚£ä¹ˆé±¼çœ¼é•œå¤´ä¸ºä»€ä¹ˆå¯ä»¥è·å¾—æ¯”æ™®é€šé•œå¤´æ›´å¤§çš„è§†é‡èŒƒå›´å‘¢ï¼Œä»–ä»¬ä¸¤è€…ä¹‹é—´çš„å·®åˆ«åœ¨å“ªï¼Ÿ</p><p>ä»æŸç§æ„ä¹‰ä¸Šæ¥è¯´ï¼Œç›¸æœºé•œå¤´æ‰€èµ·çš„ä½œç”¨ï¼Œå°±æ˜¯åšäº†ä¸€ä¸ªæ•°å­¦å˜æ¢ï¼Œå°†ç‰©ç©ºé—´å˜æ¢ä¸ºåƒç©ºé—´ï¼Œæˆåƒå¹³é¢å°±æ˜¯åœ¨åƒç©ºé—´å†…åˆ‡äº†ä¸€åˆ€ï¼Œæˆªå–äº†ä¸€ä¸ªå¹³é¢ï¼Œæˆä¸ºæ‹ä¸‹çš„ç…§ç‰‡ã€‚</p><p>ä½†åŸºäºé’ˆå­”ç›¸æœºæ¨¡å‹çš„é•œå¤´å­˜åœ¨ä¸€ä¸ªç¼ºé™·â€”â€”å…‰çº¿å§‹ç»ˆæ²¿ç›´çº¿ä¼ æ’­ä½¿å¾—é•œå¤´éš¾ä»¥æ•æ‰ä½äºè¾¹ç¼˜çš„ç‰©ä½“ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯¹äºåŒæ ·é•¿åº¦çš„çº¢è‰²ç®­å¤´ï¼Œè¶Šé è¿‘è¾¹ç¼˜çš„ç»è¿‡é•œå¤´æˆåƒåå°±å˜å¾—è¶Šé•¿ï¼Œè€Œå®é™…ä¸Šæˆ‘ä»¬åº•ç‰‡çš„å°ºå¯¸æ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥æç«¯æ¥è¿‘è¾¹ç¼˜çš„ç‰©ä½“æ™®é€šçš„é•œå¤´å°±æ— æ³•æˆåƒè®°å½•äº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/784946d7aeaf0b77e4b5e91eb85e0e78.png"></p><p>äºæ˜¯äººä»¬æƒ³åˆ°çš„æ°´ä¸‹çš„é±¼ã€‚ç”±äºæ°´çš„æŠ˜å°„ç‡æ¯”ç©ºæ°”å¤§ï¼Œå…‰çº¿ä»ç©ºæ°”è¿›å…¥æ°´ä¸­ï¼ŒæŠ˜å°„è§’æ¯”å…¥å°„è§’æ›´å°ï¼Œå¹¶ä¸”å…¥å°„è§’è¶Šå¤§ï¼Œè¿™ä¸ªå˜å°çš„ç¨‹åº¦ä¹Ÿè¶Šå¤§ã€‚ç”±äºè¿™ä¸ªç‰¹æ€§ï¼Œä½¿å¾—åœ¨æ°´ä¸­å‘ä¸Šçœ‹æ—¶ï¼Œèƒ½ä¸€çœ¼çœ‹åˆ°æ•´ä¸ªæ°´é¢ä¸Šçš„è¿™ä¸ªåŠçƒå½¢ç©ºé—´ï¼Œæ•´ä¸ªç©ºé—´çš„å½±åƒéƒ½èƒŒæ‰­æ›²ã€å‹ç¼©åˆ°äº†ä¸€ä¸ªåŠé¡¶è§’çº¦ä¸º48Â°çš„é”¥å½¢å†…ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/ab3ff1d293450f796c8a04a36468a708.png"></p><p>åœ¨è¿™ä¸ªé”¥å½¢ç©ºé—´å†…éƒ¨ï¼Œæ˜¯æ¥è‡ªæ°´é¢ä¸Šçš„ç©ºé—´çš„å…‰çº¿ï¼Œåœ¨è¿™ä¸ªé”¥å½¢å¤–éƒ¨ï¼Œæ˜¯æ¥è‡ªæ°´é¢ä¸‹æ™¯è‰²çš„åå°„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ°´ä¸‹å‘ä¸Šçœ‹ï¼Œåœ¨ä¸€ä¸ªåœˆä¹‹å¤–ï¼Œåªèƒ½çœ‹åˆ°æ°´åº•çš„æ™¯è‰²ï¼›æ‰€æœ‰æ°´é¢ä¸Šçš„æ™¯è‰²ï¼Œéƒ½è¢«å‹ç¼©åœ¨ä¸€ä¸ªåœˆå†…ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚é±¼çœ¼é•œå¤´ä¹Ÿæ˜¯äººä»¬æ ¹æ®è¿™ç§ç‰¹æ€§å‘æ˜çš„ï¼Œå¦å¤–ï¼Œé±¼çœ¼é•œå¤´çš„å‰é•œç‰‡ç›´å¾„å¾ˆçŸ­ï¼Œä¸”å‘ˆæŠ›ç‰©çŠ¶åƒå‰éƒ¨å‡¸å‡ºï¼Œä¸é±¼çš„çœ¼ç›ååˆ†ç›¸ä¼¼ï¼Œâ€œé±¼çœ¼é•œå¤´â€å› æ­¤è€Œå¾—åã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/6a0cdceaaeabedb67171931925741dac.jpeg"></p><p>é±¼çœ¼é•œå¤´ä¸€èˆ¬æ˜¯ç”±åå‡ ä¸ªä¸åŒçš„é€é•œç»„åˆè€Œæˆçš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨æˆåƒçš„è¿‡ç¨‹ä¸­ï¼Œå…¥å°„å…‰çº¿ç»è¿‡ä¸åŒç¨‹åº¦çš„æŠ˜å°„ï¼ŒæŠ•å½±åˆ°å°ºå¯¸æœ‰é™çš„æˆåƒå¹³é¢ä¸Šï¼Œä½¿å¾—é±¼çœ¼é•œå¤´ä¸æ™®é€šé•œå¤´ç›¸æ¯”èµ·æ¥æ‹¥æœ‰äº†æ›´å¤§çš„è§†é‡èŒƒå›´ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/8f225713814103dc0d3d5d279921a18e.png"></p><p>åœ¨ç ”ç©¶é±¼çœ¼ç›¸æœºæˆåƒæ—¶ï¼Œå¯ä»¥å°†ä¸Šé¢çš„é•œå¤´ç»„ç®€åŒ–ä¸ºä¸€ä¸ªçƒé¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ<em>O1-XcYcZc</em>ä¸ºç›¸æœºåæ ‡ç³»ï¼ŒO2-xyä¸ºæˆåƒå¹³é¢ã€‚ç°å®ä¸–ç•Œæœ‰ä¸€ç‚¹P,å…¥å°„è§’Î¸ï¼Œå¦‚æœæŒ‰ç…§æ™®é€šç›¸æœºçš„é’ˆå­”ç›¸æœºæ¨¡å‹ï¼Œå…¥å°„å…‰çº¿PO1ç»è¿‡é•œå¤´ä¹‹åä¸æ”¹å˜è·¯çº¿,Pã€O1ã€<span style="display: inline-block; vertical-align: middle;"><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/å¸¸ç”¨å›¾åƒå˜æ¢/561fc8fc43f1ead10dd35a66513d00a5.png" alt="" style="max-height: 1.5em;"></span>ä¸‰ç‚¹å…±çº¿ï¼Œ<span style="display: inline-block; vertical-align: middle;"><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/å¸¸ç”¨å›¾åƒå˜æ¢/561fc8fc43f1ead10dd35a66513d00a5.png" alt="" style="max-height: 1.5em;"></span>ä¸ºPçš„åƒç‚¹ï¼Œä½†æ˜¯å¯¹äºé±¼çœ¼ç›¸æœºï¼Œå…¥å°„å…‰çº¿PO1ç»è¿‡é•œå¤´åä¼šå‘ç”ŸæŠ˜å°„ï¼Œå› æ­¤Pçš„åƒç‚¹ä¸º<em>p</em>ï¼Œæåæ ‡è¡¨ç¤ºä¸ºï¼ˆrï¼ŒÏ†ï¼‰ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/7d8730b23f213a652c7831c05825b3b7.png"></p><p>æ ¹æ®æŠ•å½±å‡½æ•°çš„ä¸åŒï¼Œé±¼çœ¼ç›¸æœºçš„è®¾è®¡æ¨¡å‹å¤§è‡´èƒ½è¢«åˆ†ä¸ºäº”ç§ï¼šé€è§†æŠ•å½±ï¼ˆå³é’ˆå­”ç›¸æœºæ¨¡å‹ï¼‰ã€ç­‰ç§¯æŠ•å½±ã€ç­‰è·æŠ•å½±ã€ä½“è§†æŠ•å½±ã€æ­£äº¤æŠ•å½±ã€‚è€Œå®é™…çš„é•œå¤´å› ä¸ºå„ç§åŸå› å¹¶ä¸ä¼šç²¾ç¡®çš„ç¬¦åˆæŠ•å½±æ¨¡å‹ï¼Œä¸ºäº†æ–¹ä¾¿é±¼çœ¼ç›¸æœºçš„æ ‡å®šï¼Œä¸€èˆ¬å–rå…³äºÎ¸æ³°å‹’å±•å¼€å¼çš„å‰5é¡¹æ¥è¿‘ä¼¼é±¼çœ¼é•œå¤´çš„å®é™…æŠ•å½±å‡½æ•°ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/fa31e394765b87121758996872f7340e.png"></p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/ea2695d35ac1024134b00751cfad39a0.png"></p><p>å‡è®¾ç›¸æœºåæ ‡ç³»ä¸‹æœ‰ä¸€ç‚¹P(x,y,z)ï¼Œç‚¹P(x,y,z)å¦‚æœæŒ‰ç…§é’ˆå­”ç›¸æœºæ¨¡å‹æŠ•å½±ï¼Œåˆ™ä¸å­˜åœ¨ç•¸å˜ï¼Œåƒç‚¹ä¸ºP0(a,b)ã€‚ä¸å¦¨å‡è®¾f&#x3D;1ï¼ˆæœ€ç»ˆå¯ä»¥æ±‚å¾—rd å’Œrçš„æ¯”å€¼ä¸fæ— å…³ï¼‰,å¯æ±‚å¾—P0 ç‚¹åæ ‡yä»¥åŠå…¥å°„è§’Î¸ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/b7807a8872366727b6299499d28345f5.png"></p><p>ç”±äºç•¸å˜çš„å­˜åœ¨ï¼Œåƒç‚¹åˆ°å›¾åƒä¸­å¿ƒçš„è·ç¦»rè¢«å‹ç¼©æˆrd,å®é™…çš„åƒç‚¹ä½ç½®ä¸ºpâ€™(xâ€™,y),æœ‰|Opâ€™|&#x3D;rd,|OP0|&#x3D;rã€‚ç»“åˆç­‰è·æŠ•å½±å‡½æ•°æœ‰ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/f3a9b01ac3248215c5904b2b87d9c74f.png"></p><p>å› ä¸ºf&#x3D;1ï¼ŒÎ¸d çš„ä¸€æ¬¡é¡¹ç³»æ•°k0 å¯ä»¥ä¸º1ï¼Œæœ€ç»ˆå¯ä»¥å¾—åˆ°OpenCVä¸­ä½¿ç”¨çš„é±¼çœ¼ç›¸æœºæ¨¡å‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/a821cb9a522abf758657aeab932fd8dc.png"></p><p>ç”±ç›¸ä¼¼ä¸‰è§’å½¢åŸç†ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/4543df1de58c719a6be4c04ca947624b.png"></p><p>æ‰€ä»¥å°±æ±‚å¾—äº†ç•¸å˜åç‚¹pâ€™ çš„åæ ‡ä¸ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/eb3e8f28d45e99d9ba53eefb2d2a8d4b.png"></p><p>æœ€ååˆ©ç”¨ç›¸æœºå†…å‚å°†åƒå¹³é¢çš„ç‚¹è½¬æ¢åˆ°åƒç´ åæ ‡ç³»å°±å¾—åˆ°äº†æœ€ç»ˆå›¾åƒä¸Šçš„ç‚¹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/d10563806f7a6f97c687a2b74f4e4543.png"></p><p>é±¼çœ¼ç›¸æœºæ‹æ‘„çš„å›¾åƒå»ç•¸å˜åçš„æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><table><thead><tr><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/1f0d3bb10e87bd6e364a92c8e5406a41.png"></th><th><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/06680c23f161c764dc5e05cee7011e22.png"><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%83%8F%E5%8F%98%E6%8D%A2/06680c23f161c764dc5e05cee7011e22.png"></th></tr></thead><tbody><tr><td><strong>åŸå›¾</strong></td><td><strong>å»ç•¸å˜å›¾åƒ</strong></td></tr></tbody></table><p><strong>å¯ä»¥çœ‹å‡ºå»ç•¸å˜å›¾åƒçš„è§†é‡ç›¸æ¯”ä¸åŸå§‹å›¾åƒè§†é‡èŒƒå›´æœ‰æ‰€å‡å°ï¼Œä½†ç‰©ä½“æ›´è´´è¿‘å®é™…å°ºå¯¸ã€‚</strong></p><h1 id="å®éªŒ"><a href="#å®éªŒ" class="headerlink" title="å®éªŒ"></a>å®éªŒ</h1><ul><li><p>code</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/opencv.hpp></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui/highgui.hpp></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc/imgproc.hpp></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstdlib></span> </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string></span>  </span><span class="token comment">/** * @description: è…èš€å˜æ¢ * @return &#123;*&#125; * @author: wangshuaiyang */</span><span class="token keyword">int</span> <span class="token function">MyErode</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>Mat input_image<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    cv<span class="token double-colon punctuation">::</span>Mat src_img <span class="token operator">=</span> input_image<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat my_struct <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">getStructuringElement</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>MORPH_RECT<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ;</span>    cv<span class="token double-colon punctuation">::</span>Mat dst_img<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">morphologyEx</span><span class="token punctuation">(</span>src_img<span class="token punctuation">,</span> dst_img<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>MORPH_ERODE<span class="token punctuation">,</span> my_struct<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"è…èš€å˜æ¢"</span><span class="token punctuation">,</span> dst_img<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imwrite</span><span class="token punctuation">(</span><span class="token string">"è…èš€å˜æ¢.png"</span><span class="token punctuation">,</span> dst_img<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * @description: è†¨èƒ€å˜æ¢ * @return &#123;*&#125; * @author: wangshuaiyang */</span><span class="token keyword">int</span> <span class="token function">MyDilate</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>Mat input_image<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    cv<span class="token double-colon punctuation">::</span>Mat src_img <span class="token operator">=</span> input_image<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat my_struct <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">getStructuringElement</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>MORPH_RECT<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åå­—å½¢ç»“æ„å…ƒç´ ;</span>    cv<span class="token double-colon punctuation">::</span>Mat dst_img<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">morphologyEx</span><span class="token punctuation">(</span>src_img<span class="token punctuation">,</span> dst_img<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>MORPH_DILATE<span class="token punctuation">,</span> my_struct<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"è†¨èƒ€å˜æ¢"</span><span class="token punctuation">,</span> dst_img<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imwrite</span><span class="token punctuation">(</span><span class="token string">"è†¨èƒ€å˜æ¢.png"</span><span class="token punctuation">,</span> dst_img<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * @description: å¼€è¿ç®— * @return &#123;*&#125; * @author: wangshuaiyang */</span><span class="token keyword">int</span> <span class="token function">MyOpen</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>Mat input_image<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    cv<span class="token double-colon punctuation">::</span>Mat src_img <span class="token operator">=</span> input_image<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat my_struct <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">getStructuringElement</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>MORPH_RECT<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åå­—å½¢ç»“æ„å…ƒç´ ;</span>    cv<span class="token double-colon punctuation">::</span>Mat dst_img<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">morphologyEx</span><span class="token punctuation">(</span>src_img<span class="token punctuation">,</span> dst_img<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>MORPH_OPEN<span class="token punctuation">,</span> my_struct<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"å¼€è¿ç®—"</span><span class="token punctuation">,</span> dst_img<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imwrite</span><span class="token punctuation">(</span><span class="token string">"å¼€è¿ç®—.png"</span><span class="token punctuation">,</span> dst_img<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * @description: é—­è¿ç®— * @return &#123;*&#125; * @author: wangshuaiyang */</span><span class="token keyword">int</span> <span class="token function">MyClose</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>Mat input_image<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    cv<span class="token double-colon punctuation">::</span>Mat src_img <span class="token operator">=</span> input_image<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat my_struct <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">getStructuringElement</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>MORPH_RECT<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åå­—å½¢ç»“æ„å…ƒç´ ;</span>    cv<span class="token double-colon punctuation">::</span>Mat dst_img<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">morphologyEx</span><span class="token punctuation">(</span>src_img<span class="token punctuation">,</span> dst_img<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>MORPH_CLOSE<span class="token punctuation">,</span> my_struct<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"é—­è¿ç®—"</span><span class="token punctuation">,</span> dst_img<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imwrite</span><span class="token punctuation">(</span><span class="token string">"é—­è¿ç®—.png"</span><span class="token punctuation">,</span> dst_img<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * @description: é¡¶å¸½ * @return &#123;*&#125; * @author: wangshuaiyang */</span><span class="token keyword">int</span> <span class="token function">MyTopHat</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>Mat input_image<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    cv<span class="token double-colon punctuation">::</span>Mat src_img <span class="token operator">=</span> input_image<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat my_struct <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">getStructuringElement</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>MORPH_RECT<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åå­—å½¢ç»“æ„å…ƒç´ ;</span>    cv<span class="token double-colon punctuation">::</span>Mat dst_img<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">morphologyEx</span><span class="token punctuation">(</span>src_img<span class="token punctuation">,</span> dst_img<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>MORPH_TOPHAT<span class="token punctuation">,</span> my_struct<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"é¡¶å¸½"</span><span class="token punctuation">,</span> dst_img<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imwrite</span><span class="token punctuation">(</span><span class="token string">"é¡¶å¸½.png"</span><span class="token punctuation">,</span> dst_img<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * @description: é»‘å¸½ * @return &#123;*&#125; * @author: wangshuaiyang */</span><span class="token keyword">int</span> <span class="token function">MyBlackHat</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>Mat input_image<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    cv<span class="token double-colon punctuation">::</span>Mat src_img <span class="token operator">=</span> input_image<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat my_struct <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">getStructuringElement</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>MORPH_RECT<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åå­—å½¢ç»“æ„å…ƒç´ ;</span>    cv<span class="token double-colon punctuation">::</span>Mat dst_img<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">morphologyEx</span><span class="token punctuation">(</span>src_img<span class="token punctuation">,</span> dst_img<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>MORPH_BLACKHAT<span class="token punctuation">,</span> my_struct<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"é»‘å¸½"</span><span class="token punctuation">,</span> dst_img<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imwrite</span><span class="token punctuation">(</span><span class="token string">"é»‘å¸½.png"</span><span class="token punctuation">,</span> dst_img<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * @description: å½¢æ€å­¦æ¢¯åº¦ * @return &#123;*&#125; * @author: wangshuaiyang */</span><span class="token keyword">int</span> <span class="token function">MyGradient</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>Mat input_image<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    cv<span class="token double-colon punctuation">::</span>Mat src_img <span class="token operator">=</span> input_image<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat my_struct <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">getStructuringElement</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>MORPH_RECT<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åå­—å½¢ç»“æ„å…ƒç´ ;</span>    cv<span class="token double-colon punctuation">::</span>Mat dst_img<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">morphologyEx</span><span class="token punctuation">(</span>src_img<span class="token punctuation">,</span> dst_img<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>MORPH_GRADIENT<span class="token punctuation">,</span> my_struct<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"å½¢æ€å­¦æ¢¯åº¦"</span><span class="token punctuation">,</span> dst_img<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imwrite</span><span class="token punctuation">(</span><span class="token string">"å½¢æ€å­¦æ¢¯åº¦.png"</span><span class="token punctuation">,</span> dst_img<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * @description: ä»¿å°„å˜æ¢ * @return &#123;*&#125; * @author: wangshuaiyang */</span><span class="token keyword">int</span> <span class="token function">MyAffine</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>Mat input_image<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    cv<span class="token double-colon punctuation">::</span>Mat src_img <span class="token operator">=</span> input_image<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">float</span> scale_x <span class="token operator">=</span> <span class="token number">0.7</span><span class="token punctuation">;</span>     <span class="token comment">// æ°´å¹³ç¼©æ”¾å› å­</span>    <span class="token keyword">float</span> scale_y <span class="token operator">=</span> <span class="token number">0.3</span><span class="token punctuation">;</span>     <span class="token comment">// å‚ç›´ç¼©æ”¾å› å­</span>    <span class="token keyword">float</span> theta <span class="token operator">=</span> CV_PI <span class="token operator">/</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">// æ—‹è½¬è§’åº¦</span>    <span class="token keyword">float</span> tx <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>           <span class="token comment">// æ°´å¹³å¹³ç§»é‡</span>    <span class="token keyword">float</span> ty <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>           <span class="token comment">// å‚ç›´å¹³ç§»é‡</span>    <span class="token keyword">float</span> shear_x <span class="token operator">=</span> <span class="token number">0.8</span><span class="token punctuation">;</span>     <span class="token comment">// Xè½´é”™åˆ‡</span>    <span class="token keyword">float</span> shear_y <span class="token operator">=</span> <span class="token number">0.2</span><span class="token punctuation">;</span>     <span class="token comment">// Yè½´é”™åˆ‡</span>    cv<span class="token double-colon punctuation">::</span>Mat warpMatrix <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token class-name">Mat</span><span class="token double-colon punctuation">::</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> CV_32FC1<span class="token punctuation">)</span><span class="token punctuation">;</span>    warpMatrix<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> scale_x <span class="token operator">*</span> <span class="token function">cos</span><span class="token punctuation">(</span>theta<span class="token punctuation">)</span><span class="token punctuation">;</span>    warpMatrix<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">-</span>shear_y <span class="token operator">*</span> scale_y <span class="token operator">*</span> <span class="token function">sin</span><span class="token punctuation">(</span>theta<span class="token punctuation">)</span><span class="token punctuation">;</span>    warpMatrix<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span> tx<span class="token punctuation">;</span>    warpMatrix<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> shear_x <span class="token operator">*</span> scale_x <span class="token operator">*</span> <span class="token function">sin</span><span class="token punctuation">(</span>theta<span class="token punctuation">)</span><span class="token punctuation">;</span>    warpMatrix<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> scale_y <span class="token operator">*</span> <span class="token function">cos</span><span class="token punctuation">(</span>theta<span class="token punctuation">)</span><span class="token punctuation">;</span>    warpMatrix<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span> ty<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat dst_img<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">warpAffine</span><span class="token punctuation">(</span>src_img<span class="token punctuation">,</span> dst_img<span class="token punctuation">,</span> warpMatrix<span class="token punctuation">,</span> src_img<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"ä»¿å°„å˜æ¢"</span><span class="token punctuation">,</span> dst_img<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imwrite</span><span class="token punctuation">(</span><span class="token string">"ä»¿å°„å˜æ¢.png"</span><span class="token punctuation">,</span> dst_img<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// é¼ æ ‡æ“ä½œ è‡ªå·±å‡†å¤‡ç»“æ„ä½“</span><span class="token keyword">struct</span> <span class="token class-name">ImageData</span><span class="token punctuation">&#123;</span>    cv<span class="token double-colon punctuation">::</span>Mat img<span class="token punctuation">;</span>                <span class="token comment">// ç›®æ ‡å›¾åƒ ç”¨äºç‚¹å‡» ç¡®å®šåæ ‡</span>    std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>cv<span class="token double-colon punctuation">::</span>Point2f<span class="token operator">></span> points<span class="token punctuation">;</span> <span class="token comment">// å­˜æ”¾åŸå›¾çš„åæ ‡ é€šè¿‡é¼ æ ‡çš„ç‚¹å‡»è¿›è¡Œå­˜æ”¾</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">//é¼ æ ‡æ“ä½œçš„å›è°ƒå‡½æ•°:ç”¨äºé€‰æ‹©å››ä¸ªè§’çš„ç‚¹ï¼ˆä½¿ç”¨æ–¹æ³•ï¼šä»å·¦ä¸Šè§’å¼€å§‹é¡ºæ—¶é’ˆé€‰æ‹©å››ä¸ªç‚¹ï¼Œé€‰å®Œä¹‹åå›è½¦æ“ä½œï¼‰</span><span class="token keyword">void</span> <span class="token function">mouseHundle</span><span class="token punctuation">(</span><span class="token keyword">int</span> event<span class="token punctuation">,</span><span class="token keyword">int</span> x<span class="token punctuation">,</span><span class="token keyword">int</span> y<span class="token punctuation">,</span><span class="token keyword">int</span> flag<span class="token punctuation">,</span><span class="token keyword">void</span> <span class="token operator">*</span>arg<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// å¼ºåˆ¶è½¬æ¢</span>    <span class="token keyword">struct</span> <span class="token class-name">ImageData</span> <span class="token operator">*</span>d <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">ImageData</span> <span class="token operator">*</span><span class="token punctuation">)</span>arg<span class="token punctuation">;</span>    <span class="token comment">// å¦‚æœæŒ‰ä¸‹çš„æ˜¯é¼ æ ‡å·¦é”®</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>event <span class="token operator">==</span> cv<span class="token double-colon punctuation">::</span>EVENT_LBUTTONDOWN<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token comment">// ç”¨åœ†å½¢æ¥æ ‡è®°ä¸‹é¼ æ ‡æŒ‰ä¸‹å·¦é”®æ ‡è®°çš„ä½ç½®</span>        cv<span class="token double-colon punctuation">::</span><span class="token function">circle</span><span class="token punctuation">(</span>d<span class="token operator">-></span>img<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Point</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> CV_AA<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åœ¨å›¾ä¸Šæ ‡è®°,åœ†å¿ƒä¸ºç‚¹å‡»çš„ä½ç½®</span>        cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"Image"</span><span class="token punctuation">,</span> d<span class="token operator">-></span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>                                       <span class="token comment">// åŸçª—å£ä¸Šè¿›è¡Œæ˜¾ç¤ºæ ‡è®°ç‚¹</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"é€‰æ‹©ç‚¹%d: %d,%d...\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>d<span class="token operator">-></span>points<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é€è§†å˜æ¢ éœ€è¦ä½¿ç”¨å››ä¸ªç‚¹çš„åæ ‡</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token operator">-></span>points<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            d<span class="token operator">-></span>points<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span><span class="token function">Point2f</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æŠŠç‚¹å‡»ä¸‹æ¥çš„åæ ‡è¿›è¡Œå­˜å‚¨</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span>        <span class="token punctuation">&#123;</span>            cv<span class="token double-colon punctuation">::</span><span class="token function">setMouseCallback</span><span class="token punctuation">(</span><span class="token string">"Image"</span><span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å–æ¶ˆé¼ æ ‡å›è°ƒ</span>            cv<span class="token double-colon punctuation">::</span><span class="token function">destroyWindow</span><span class="token punctuation">(</span><span class="token string">"Image"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * @description: é€è§†å˜æ¢ * @return &#123;*&#125; * @author: wangshuaiyang */</span><span class="token keyword">int</span> <span class="token function">MyPerspectiveTF</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>Mat input_image<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    cv<span class="token double-colon punctuation">::</span>Mat src_img <span class="token operator">=</span> input_image<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat dst_img<span class="token punctuation">;</span>    ImageData data<span class="token punctuation">;</span>    data<span class="token punctuation">.</span>img <span class="token operator">=</span> src_img<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">"Image"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">setMouseCallback</span><span class="token punctuation">(</span><span class="token string">"Image"</span><span class="token punctuation">,</span> mouseHundle<span class="token punctuation">,</span> <span class="token operator">&amp;</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"Image"</span><span class="token punctuation">,</span> src_img<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"è¯·åœ¨å›¾åƒä¸Šç‚¹å‡»å››ä¸ªç‚¹ï¼Œç„¶åæŒ‰ä»»æ„é”®ç»§ç»­...\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Size dst_size <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">190</span><span class="token punctuation">,</span> <span class="token number">260</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¾“å‡ºå›¾åƒçš„å°ºå¯¸</span>    std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>cv<span class="token double-colon punctuation">::</span>Point2f<span class="token operator">></span> outputPoints<span class="token punctuation">;</span> <span class="token comment">// è¾“å‡ºå›¾åƒä¸Šçš„å¯¹åº”ç‚¹</span>    outputPoints<span class="token punctuation">.</span><span class="token function">emplace_back</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span><span class="token function">Point2f</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    outputPoints<span class="token punctuation">.</span><span class="token function">emplace_back</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span><span class="token function">Point2f</span><span class="token punctuation">(</span>dst_size<span class="token punctuation">.</span>width<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    outputPoints<span class="token punctuation">.</span><span class="token function">emplace_back</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span><span class="token function">Point2f</span><span class="token punctuation">(</span>dst_size<span class="token punctuation">.</span>width<span class="token punctuation">,</span> dst_size<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    outputPoints<span class="token punctuation">.</span><span class="token function">emplace_back</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span><span class="token function">Point2f</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> dst_size<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>outputPoints<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">4</span> <span class="token operator">||</span> data<span class="token punctuation">.</span>points<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">4</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"è¯·é€‰æ‹©4ä¸ªç‚¹å³å¯"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    cv<span class="token double-colon punctuation">::</span>Mat perspectiveMatrix <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">getPerspectiveTransform</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>points<span class="token punctuation">,</span> outputPoints<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">warpPerspective</span><span class="token punctuation">(</span>src_img<span class="token punctuation">,</span> dst_img<span class="token punctuation">,</span> perspectiveMatrix<span class="token punctuation">,</span> dst_size<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"é€è§†å˜æ¢"</span><span class="token punctuation">,</span> dst_img<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imwrite</span><span class="token punctuation">(</span><span class="token string">"é€è§†å˜æ¢.png"</span><span class="token punctuation">,</span> dst_img<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// åˆ¤æ–­å‚æ•°è¾“å…¥æ˜¯å¦æ­£ç¡®</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>argc <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"å‚æ•°é”™è¯¯,è¯·ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ ¼å¼: "</span> <span class="token operator">&lt;&lt;</span> argv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"[å›¾åƒè·¯å¾„] [å›¾åƒå˜æ¢ç±»å‹(1,2,3,...)] "</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> mode <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">atoi</span><span class="token punctuation">(</span>argv<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>mode <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"è¯´æ˜ï¼š\n[0] è¯´æ˜\n[1] å›¾åƒè…èš€å˜æ¢\n[2] å›¾åƒè†¨èƒ€å˜æ¢\n[3] å¼€è¿ç®—\n[4] é—­è¿ç®—\n[5] é¡¶å¸½\n[6] é»‘å¸½\n[7] å½¢æ€å­¦æ¢¯åº¦\n[8] ä»¿å°„å˜æ¢\n[9] é€è§†å˜æ¢\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// è·å¾—å›¾åƒ</span>    cv<span class="token double-colon punctuation">::</span>Mat img <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">imread</span><span class="token punctuation">(</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>IMREAD_GRAYSCALE<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"åŸå§‹å›¾åƒ"</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imwrite</span><span class="token punctuation">(</span><span class="token string">"åŸå§‹å›¾åƒ.png"</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">switch</span> <span class="token punctuation">(</span>mode<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>    <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"å›¾åƒè…èš€å˜æ¢...\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ret <span class="token operator">=</span> <span class="token function">MyErode</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"å›¾åƒè†¨èƒ€å˜æ¢...\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ret <span class="token operator">=</span> <span class="token function">MyDilate</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"å¼€è¿ç®—...\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ret <span class="token operator">=</span> <span class="token function">MyOpen</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"é—­è¿ç®—...\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ret <span class="token operator">=</span> <span class="token function">MyClose</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token keyword">case</span> <span class="token number">5</span><span class="token operator">:</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"é¡¶å¸½...\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ret <span class="token operator">=</span> <span class="token function">MyTopHat</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token keyword">case</span> <span class="token number">6</span><span class="token operator">:</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"é»‘å¸½...\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ret <span class="token operator">=</span> <span class="token function">MyBlackHat</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token keyword">case</span> <span class="token number">7</span><span class="token operator">:</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"å½¢æ€å­¦æ¢¯åº¦...\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ret <span class="token operator">=</span> <span class="token function">MyGradient</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token keyword">case</span> <span class="token number">8</span><span class="token operator">:</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ä»¿å°„å˜æ¢...\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ret <span class="token operator">=</span> <span class="token function">MyAffine</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token keyword">case</span> <span class="token number">9</span><span class="token operator">:</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"é€è§†å˜æ¢...\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ret <span class="token operator">=</span> <span class="token function">MyPerspectiveTF</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>ç¼–è¯‘å‘½ä»¤</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">g++ image_transform.cpp <span class="token parameter variable">-o</span> image_transform <span class="token parameter variable">-lopencv_core</span> <span class="token parameter variable">-lopencv_highgui</span> <span class="token parameter variable">-lopencv_imgproc</span> <span class="token parameter variable">-lopencv_imgcodecs</span> <span class="token parameter variable">-lopencv_calib3d</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>è¿è¡Œå‘½ä»¤</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">./image_transform å›¾åƒè·¯å¾„ å›¾åƒå˜æ¢ç±»å‹<span class="token punctuation">(</span><span class="token number">1,2</span>,3,<span class="token punctuation">..</span>.<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><h1 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h1><ol><li><a href="https://blog.csdn.net/qq_16137569/article/details/112398976">https://blog.csdn.net/qq_16137569/article/details/112398976</a></li><li>æ•°å­—å›¾åƒå¤„ç†ï¼ˆç¬¬å››ç‰ˆï¼‰</li></ol>]]></content>
      
      
      <categories>
          
          <category> opencv </category>
          
      </categories>
      
      
        <tags>
            
            <tag> opencv </tag>
            
            <tag> å›¾åƒå˜æ¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OpenGL_ESå¸¸ç”¨é—®ç­”</title>
      <link href="/2023/06/21/opengl-es-chang-yong-wen-da/"/>
      <url>/2023/06/21/opengl-es-chang-yong-wen-da/</url>
      
        <content type="html"><![CDATA[<h1 id="glUseProgramä»€ä¹ˆæ—¶å€™ä½¿ç”¨"><a href="#glUseProgramä»€ä¹ˆæ—¶å€™ä½¿ç”¨" class="headerlink" title="glUseProgramä»€ä¹ˆæ—¶å€™ä½¿ç”¨?"></a>glUseProgramä»€ä¹ˆæ—¶å€™ä½¿ç”¨?</h1><p>glUseProgramæ˜¯OpenGLä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºæŒ‡å®šå½“å‰ä½¿ç”¨çš„ç€è‰²å™¨ç¨‹åºå¯¹è±¡ã€‚ç€è‰²å™¨ç¨‹åºå¯¹è±¡æ˜¯ç”±é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡æ®µç€è‰²å™¨ç»„æˆçš„ï¼Œç”¨äºæè¿°æ¸²æŸ“ç®¡çº¿ä¸­çš„å›¾å½¢å¤„ç†å’Œå…‰æ …åŒ–é˜¶æ®µã€‚</p><p>glUseProgramå‡½æ•°çš„è°ƒç”¨æ—¶æœºé€šå¸¸æ˜¯åœ¨ç»˜åˆ¶åœºæ™¯ä¹‹å‰ã€‚å½“ä½ åˆ›å»ºå¹¶ç¼–è¯‘å¥½é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡æ®µç€è‰²å™¨ï¼Œå¹¶å°†å®ƒä»¬é“¾æ¥ä¸ºä¸€ä¸ªç€è‰²å™¨ç¨‹åºå¯¹è±¡åï¼Œä½ éœ€è¦ä½¿ç”¨glUseProgramæ¥å‘Šè¯‰OpenGLåœ¨ç»˜åˆ¶æ—¶è¦ä½¿ç”¨è¿™ä¸ªç€è‰²å™¨ç¨‹åºã€‚</p><p>å…·ä½“çš„æ­¥éª¤é€šå¸¸æ˜¯è¿™æ ·çš„ï¼š</p><blockquote><ol><li>åˆ›å»ºé¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡æ®µç€è‰²å™¨ï¼Œå¹¶ç¼–è¯‘å®ƒä»¬ã€‚</li><li>åˆ›å»ºä¸€ä¸ªç€è‰²å™¨ç¨‹åºå¯¹è±¡ï¼Œå¹¶å°†é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡æ®µç€è‰²å™¨é™„åŠ åˆ°è¯¥å¯¹è±¡ä¸Šã€‚</li><li>é“¾æ¥ç€è‰²å™¨ç¨‹åºå¯¹è±¡ã€‚</li><li>åœ¨æ¯æ¬¡ç»˜åˆ¶åœºæ™¯ä¹‹å‰ï¼Œè°ƒç”¨glUseProgramå‡½æ•°ï¼Œå°†ç€è‰²å™¨ç¨‹åºå¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’è¿›å»ï¼Œä»¥æŒ‡å®šå½“å‰ä½¿ç”¨çš„ç€è‰²å™¨ç¨‹åºã€‚</li><li>æ‰§è¡Œç»˜åˆ¶æ“ä½œï¼ŒOpenGLå°†ä½¿ç”¨å½“å‰æŒ‡å®šçš„ç€è‰²å™¨ç¨‹åºè¿›è¡Œæ¸²æŸ“ã€‚</li></ol></blockquote><p>é€šè¿‡glUseProgramå‡½æ•°ï¼Œä½ å¯ä»¥åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­çµæ´»åœ°åˆ‡æ¢ä¸åŒçš„ç€è‰²å™¨ç¨‹åºï¼Œä»¥å®ç°ä¸åŒçš„æ¸²æŸ“æ•ˆæœæˆ–å®ç°ç‰¹å®šçš„å›¾å½¢å¤„ç†ç®—æ³•ã€‚</p><h1 id="glActiveTextureä»€ä¹ˆæ—¶å€™ä½¿ç”¨"><a href="#glActiveTextureä»€ä¹ˆæ—¶å€™ä½¿ç”¨" class="headerlink" title="glActiveTextureä»€ä¹ˆæ—¶å€™ä½¿ç”¨?"></a>glActiveTextureä»€ä¹ˆæ—¶å€™ä½¿ç”¨?</h1><p>glActiveTextureæ˜¯OpenGLä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºæŒ‡å®šå½“å‰æ´»åŠ¨çš„çº¹ç†å•å…ƒã€‚çº¹ç†å•å…ƒæ˜¯ç”¨äºå­˜å‚¨å’Œå¤„ç†çº¹ç†æ•°æ®çš„ç¡¬ä»¶å•å…ƒã€‚</p><p>glActiveTextureå‡½æ•°çš„è°ƒç”¨æ—¶æœºé€šå¸¸æ˜¯åœ¨è®¾ç½®çº¹ç†ä¹‹å‰ã€‚åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œä½ å¯èƒ½ä¼šä½¿ç”¨å¤šä¸ªçº¹ç†ï¼Œä¾‹å¦‚ä¸€å¼ ç”¨äºæ¼«åå°„è´´å›¾ï¼Œä¸€å¼ ç”¨äºæ³•çº¿è´´å›¾ç­‰ã€‚glActiveTextureå‡½æ•°å…è®¸ä½ æŒ‡å®šå½“å‰è¦æ“ä½œçš„çº¹ç†å•å…ƒï¼Œä»¥ä¾¿åç»­çš„çº¹ç†ç›¸å…³å‡½æ•°èƒ½å¤Ÿä½œç”¨äºæŒ‡å®šçš„å•å…ƒã€‚</p><p>å…·ä½“çš„æ­¥éª¤é€šå¸¸æ˜¯è¿™æ ·çš„ï¼š</p><ol><li>åœ¨ç»‘å®šçº¹ç†ä¹‹å‰ï¼Œè°ƒç”¨glActiveTextureå‡½æ•°ï¼Œä¼ é€’ä¸€ä¸ªçº¹ç†å•å…ƒçš„ç´¢å¼•ä½œä¸ºå‚æ•°ã€‚å¸¸ç”¨çš„ç´¢å¼•å€¼ä¸ºGL_TEXTURE0ã€GL_TEXTURE1ç­‰ï¼Œè¡¨ç¤ºä¸åŒçš„çº¹ç†å•å…ƒã€‚</li><li>ç»‘å®šçº¹ç†å¯¹è±¡åˆ°æŒ‡å®šçš„çº¹ç†å•å…ƒã€‚ä½¿ç”¨glBindTextureå‡½æ•°å°†çº¹ç†å¯¹è±¡ä¸å½“å‰æ´»åŠ¨çš„çº¹ç†å•å…ƒå…³è”èµ·æ¥ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨glBindTexture(GL_TEXTURE_2D, textureID)å°†çº¹ç†å¯¹è±¡ç»‘å®šåˆ°å½“å‰æ´»åŠ¨çš„çº¹ç†å•å…ƒä¸Šã€‚</li><li>è®¾ç½®çº¹ç†å‚æ•°å’Œä¸Šä¼ çº¹ç†æ•°æ®ç­‰æ“ä½œã€‚åœ¨glActiveTextureå‡½æ•°å’ŒglBindTextureå‡½æ•°ä¹‹åï¼Œä½ å¯ä»¥æ‰§è¡Œä¸€ç³»åˆ—ä¸çº¹ç†ç›¸å…³çš„æ“ä½œï¼Œå¦‚è®¾ç½®çº¹ç†è¿‡æ»¤æ–¹å¼ã€çº¹ç†ç¯ç»•æ–¹å¼ã€ä¸Šä¼ çº¹ç†æ•°æ®ç­‰ã€‚</li></ol><p>é€šè¿‡glActiveTextureå‡½æ•°ï¼Œä½ å¯ä»¥åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ä½¿ç”¨å¤šä¸ªçº¹ç†å•å…ƒï¼Œå¹¶å¯¹æ¯ä¸ªçº¹ç†å•å…ƒè¿›è¡Œç‹¬ç«‹çš„è®¾ç½®å’Œç»‘å®šã€‚è¿™æ ·å¯ä»¥å®ç°æ›´å¤æ‚çš„çº¹ç†æ˜ å°„æ•ˆæœï¼Œå¦‚å¤šé‡çº¹ç†ã€ç«‹æ–¹ä½“è´´å›¾ç­‰ã€‚</p><h1 id="æ€ä¹ˆä»ç¼“å†²åŒºè¯»å–åƒç´ æ•°æ®ï¼Ÿ"><a href="#æ€ä¹ˆä»ç¼“å†²åŒºè¯»å–åƒç´ æ•°æ®ï¼Ÿ" class="headerlink" title="æ€ä¹ˆä»ç¼“å†²åŒºè¯»å–åƒç´ æ•°æ®ï¼Ÿ"></a>æ€ä¹ˆä»ç¼“å†²åŒºè¯»å–åƒç´ æ•°æ®ï¼Ÿ</h1><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// è¯»å–é¢œè‰²ç¼“å†²åŒºçš„åƒç´ æ•°æ®</span>       std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span><span class="token operator">></span> <span class="token function">pixelData</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// RGBAæ ¼å¼ï¼Œæ¯ä¸ªåƒç´ 4ä¸ªå­—èŠ‚</span>       <span class="token function">glReadPixels</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> GL_RGBA<span class="token punctuation">,</span> GL_UNSIGNED_BYTE<span class="token punctuation">,</span> pixelData<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// æ£€æŸ¥åƒç´ æ•°æ®</span>       <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>       <span class="token punctuation">&#123;</span>           <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>           <span class="token punctuation">&#123;</span>               <span class="token keyword">int</span> pixelIndex <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">+</span> j<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// æ¯ä¸ªåƒç´ 4ä¸ªå­—èŠ‚</span>               <span class="token keyword">unsigned</span> <span class="token keyword">char</span> red <span class="token operator">=</span> pixelData<span class="token punctuation">[</span>pixelIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>               <span class="token keyword">unsigned</span> <span class="token keyword">char</span> green <span class="token operator">=</span> pixelData<span class="token punctuation">[</span>pixelIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>               <span class="token keyword">unsigned</span> <span class="token keyword">char</span> blue <span class="token operator">=</span> pixelData<span class="token punctuation">[</span>pixelIndex <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>               <span class="token keyword">unsigned</span> <span class="token keyword">char</span> alpha <span class="token operator">=</span> pixelData<span class="token punctuation">[</span>pixelIndex <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>               <span class="token comment">// æ‰“å°åƒç´ å€¼</span>               <span class="token function">LOGI</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"åƒç´ (%d, %d): R=%d, G=%d, B=%d, A=%d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> red<span class="token punctuation">,</span> green<span class="token punctuation">,</span> blue<span class="token punctuation">,</span> alpha<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token punctuation">&#125;</span>       <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="æ€ä¹ˆè·å–opengl-esçš„é”™è¯¯ä»£ç ï¼Ÿ"><a href="#æ€ä¹ˆè·å–opengl-esçš„é”™è¯¯ä»£ç ï¼Ÿ" class="headerlink" title="æ€ä¹ˆè·å–opengl esçš„é”™è¯¯ä»£ç ï¼Ÿ"></a>æ€ä¹ˆè·å–opengl esçš„é”™è¯¯ä»£ç ï¼Ÿ</h1><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">EGLint status2 <span class="token operator">=</span> <span class="token function">eglGetError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">if</span> <span class="token punctuation">(</span>status2 <span class="token operator">!=</span> EGL_SUCCESS<span class="token punctuation">)</span>       <span class="token punctuation">&#123;</span>           <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>           <span class="token function">LOGI</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"eglSwapBuffers failed!!!, status= %d\n"</span><span class="token punctuation">,</span> status2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¸§ç¼“å†²ä¸å®Œæ•´ï¼ŒeglSwapBuffers æ‰§è¡Œå¤±è´¥&#125;</span>       <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="VAOç»‘å®šæ€ä¹ˆä½¿ç”¨ï¼Ÿ"><a href="#VAOç»‘å®šæ€ä¹ˆä½¿ç”¨ï¼Ÿ" class="headerlink" title="VAOç»‘å®šæ€ä¹ˆä½¿ç”¨ï¼Ÿ"></a>VAOç»‘å®šæ€ä¹ˆä½¿ç”¨ï¼Ÿ</h1><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token function">glBindVertexArray</span><span class="token punctuation">(</span>VAO<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç»‘å®šé¡¶ç‚¹æ•°ç»„å¯¹è±¡,æ‰§è¡ŒVAOç»‘å®šä¹‹åå…¶åçš„æ‰€æœ‰VBOé…ç½®éƒ½æ˜¯è¿™ä¸ªVAOå¯¹è±¡çš„ä¸€éƒ¨åˆ†ã€‚å…·ä½“æ¥è¯´ï¼ŒglBindVertexArrayçš„ä½œç”¨æ˜¯å°†VAOä¸å½“å‰ä¸Šä¸‹æ–‡ç›¸å…³çš„é¡¶ç‚¹çŠ¶æ€ç»‘å®šåœ¨ä¸€èµ·ã€‚é¡¶ç‚¹çŠ¶æ€åŒ…æ‹¬é¡¶ç‚¹å±æ€§æŒ‡é’ˆã€é¡¶ç‚¹ç¼“å†²å¯¹è±¡ç­‰ã€‚å½“æˆ‘ä»¬éœ€è¦ç»˜åˆ¶æ—¶ï¼Œåªéœ€ç»‘å®šç›¸åº”çš„VAOï¼ŒOpenGLä¼šè‡ªåŠ¨åº”ç”¨ä¹‹å‰è®¾ç½®çš„é¡¶ç‚¹çŠ¶æ€ã€‚</p><h1 id="glDrawElementså‡½æ•°æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"><a href="#glDrawElementså‡½æ•°æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ" class="headerlink" title="glDrawElementså‡½æ•°æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"></a>glDrawElementså‡½æ•°æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h1><p>glDrawElementså‡½æ•°ç”¨äºç»˜åˆ¶ç´¢å¼•åŒ–çš„å›¾å…ƒï¼Œå®ƒå¹¶ä¸ä¼šå°†ç»˜åˆ¶ç»“æœä¿å­˜åœ¨ä»»ä½•åœ°æ–¹ã€‚å®ƒçš„ä½œç”¨æ˜¯æ ¹æ®ç´¢å¼•æ•°æ®æ¥æŒ‡å®šç»˜åˆ¶é¡¶ç‚¹çš„é¡ºåºï¼Œå¹¶å°†è¿™äº›é¡¶ç‚¹æ¸²æŸ“åˆ°å½“å‰å¸§ç¼“å†²å¯¹è±¡ä¸­ã€‚<br>ç»˜åˆ¶ç»“æœçš„ä¿å­˜é€šå¸¸å‘ç”Ÿåœ¨å¸§ç¼“å†²å¯¹è±¡ï¼ˆFramebuffer Object, FBOï¼‰ä¸­ã€‚å¸§ç¼“å†²å¯¹è±¡æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„OpenGLå¯¹è±¡ï¼Œå®ƒå¯ä»¥ä½œä¸ºæ¸²æŸ“ç›®æ ‡æ¥ä¿å­˜ç»˜åˆ¶ç»“æœã€‚å¯ä»¥å°†å¸§ç¼“å†²å¯¹è±¡ä¸çº¹ç†æˆ–æ¸²æŸ“ç¼“å†²å¯¹è±¡å…³è”ï¼Œä»¥ä¾¿å°†ç»˜åˆ¶ç»“æœä¿å­˜åœ¨çº¹ç†æˆ–æ¸²æŸ“ç¼“å†²å¯¹è±¡ä¸­ã€‚<br>åœ¨ä½¿ç”¨glDrawElementsä¹‹å‰ï¼Œéœ€è¦å…ˆåˆ›å»ºå¹¶ç»‘å®šé¡¶ç‚¹æ•°ç»„å¯¹è±¡ï¼ˆVAOï¼‰ï¼Œå¹¶å°†ç´¢å¼•æ•°æ®å­˜å‚¨åœ¨ç´¢å¼•ç¼“å†²å¯¹è±¡ï¼ˆIndex Buffer Object, IBOï¼‰ä¸­ã€‚ç„¶åï¼Œé€šè¿‡glBindVertexArrayç»‘å®šVAOï¼Œä½¿ç”¨glBindBufferå°†IBOç»‘å®šåˆ°GL_ELEMENT_ARRAY_BUFFERç›®æ ‡ï¼Œä»¥å‘Šè¯‰OpenGLä½¿ç”¨IBOä¸­çš„ç´¢å¼•æ¥ç»˜åˆ¶é¡¶ç‚¹ã€‚</p><h1 id="æ€ä¹ˆè®¾ç½®çº¹ç†é‡‡æ ·æ–¹å¼å’Œçº¹ç†æ‹‰ä¼¸æ–¹å¼ï¼Ÿ"><a href="#æ€ä¹ˆè®¾ç½®çº¹ç†é‡‡æ ·æ–¹å¼å’Œçº¹ç†æ‹‰ä¼¸æ–¹å¼ï¼Ÿ" class="headerlink" title="æ€ä¹ˆè®¾ç½®çº¹ç†é‡‡æ ·æ–¹å¼å’Œçº¹ç†æ‹‰ä¼¸æ–¹å¼ï¼Ÿ"></a>æ€ä¹ˆè®¾ç½®çº¹ç†é‡‡æ ·æ–¹å¼å’Œçº¹ç†æ‹‰ä¼¸æ–¹å¼ï¼Ÿ</h1><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// ## è®¾ç½®çº¹ç†æ‹‰ä¼¸æ–¹å¼</span><span class="token function">glTexParameterf</span><span class="token punctuation">(</span>GL_TEXTURE_2D<span class="token punctuation">,</span> GL_TEXTURE_WRAP_S<span class="token punctuation">,</span> GL_CLAMP_TO_EDGE<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®¾ç½®çº¹ç† S æ¨ªè½´ï¼‰çš„æ‹‰ä¼¸æ–¹å¼ä¸ºæˆªå–</span><span class="token function">glTexParameterf</span><span class="token punctuation">(</span>GL_TEXTURE_2D<span class="token punctuation">,</span> GL_TEXTURE_WRAP_T<span class="token punctuation">,</span> GL_CLAMP_TO_EDGE<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®¾ç½®çº¹ç† T çºµè½´ï¼‰çš„æ‹‰ä¼¸æ–¹å¼ä¸ºæˆªå–</span><span class="token comment">// ## è®¾ç½®çº¹ç†é‡‡æ ·æ–¹å¼</span><span class="token function">glTexParameteri</span><span class="token punctuation">(</span>GL_TEXTURE_2D<span class="token punctuation">,</span> GL_TEXTURE_MIN_FILTER<span class="token punctuation">,</span> GL_LINEAR<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†çº¹ç†ç¼©å°æ—¶(GL_TEXTURE_MIN_FILTER)ï¼Œä¼šè¿›è¡Œçº¿æ€§æ’å€¼(GL_LINEAR)æ¥è®¡ç®—æ–°çš„çº¹ç†åƒç´ å€¼ã€‚</span><span class="token function">glTexParameteri</span><span class="token punctuation">(</span>GL_TEXTURE_2D<span class="token punctuation">,</span> GL_TEXTURE_MAG_FILTER<span class="token punctuation">,</span> GL_LINEAR<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†çº¹ç†æ”¾å¤§æ—¶(GL_TEXTURE_MAG_FILTER)ï¼Œä¼šè¿›è¡Œçº¿æ€§æ’å€¼(GL_LINEAR)æ¥è®¡ç®—æ–°çš„çº¹ç†åƒç´ å€¼ã€‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨OpenGLä¸­ï¼Œçº¹ç†å‚æ•°æ˜¯ä¸å½“å‰ç»‘å®šçš„çº¹ç†å¯¹è±¡ç›¸å…³è”çš„ã€‚å½“ä½ è°ƒç”¨glTexParameterfå‡½æ•°è®¾ç½®çº¹ç†å‚æ•°æ—¶ï¼Œå®ƒä¼šä½œç”¨äºå½“å‰ç»‘å®šçš„çº¹ç†å¯¹è±¡ã€‚<br>è¦ç¡®å®šglTexParameterfè®¾ç½®çš„æ˜¯å“ªä¸ªçº¹ç†çš„å‚æ•°ï¼Œéœ€è¦åœ¨è°ƒç”¨è¯¥å‡½æ•°ä¹‹å‰é€šè¿‡glBindTextureå‡½æ•°å°†ç›¸åº”çš„çº¹ç†å¯¹è±¡ç»‘å®šåˆ°å½“å‰çº¹ç†ç›®æ ‡ã€‚</p><h1 id="Surfaceviewå’ŒGLSurfaceviewæœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#Surfaceviewå’ŒGLSurfaceviewæœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="Surfaceviewå’ŒGLSurfaceviewæœ‰ä»€ä¹ˆåŒºåˆ«"></a>Surfaceviewå’ŒGLSurfaceviewæœ‰ä»€ä¹ˆåŒºåˆ«</h1><p>SurfaceViewå’ŒGLSurfaceViewæ˜¯Androidä¸­ç”¨äºå›¾å½¢æ¸²æŸ“çš„ä¸¤ä¸ªé‡è¦è§†å›¾ç±»ï¼Œå®ƒä»¬ä¹‹é—´æœ‰ä»¥ä¸‹åŒºåˆ«ï¼š</p><ol><li><p>åŠŸèƒ½å’Œç”¨é€”ï¼šSurfaceViewæ˜¯ç”¨äºæ˜¾ç¤ºæ™®é€š2Då›¾å½¢å’Œè§†é¢‘çš„è§†å›¾ï¼Œè€ŒGLSurfaceViewåˆ™æ˜¯ä¸“é—¨ç”¨äºæ˜¾ç¤ºOpenGL ESå›¾å½¢çš„è§†å›¾ã€‚GLSurfaceViewæä¾›äº†ä¸OpenGL ESæ¸²æŸ“ç›¸å…³çš„åŠŸèƒ½å’Œæ¥å£ï¼Œå¯ä»¥æ›´æ–¹ä¾¿åœ°è¿›è¡ŒOpenGL ESçš„åˆå§‹åŒ–ã€æ¸²æŸ“å’Œäº¤äº’æ“ä½œã€‚</p></li><li><p>æ¸²æŸ“æœºåˆ¶ï¼šSurfaceViewä½¿ç”¨åŒç¼“å†²æœºåˆ¶è¿›è¡Œç»˜åˆ¶ï¼Œå³åœ¨åå°çº¿ç¨‹ä¸­æ¸²æŸ“å›¾å½¢ï¼Œå¹¶å°†æ¸²æŸ“ç»“æœé€šè¿‡SurfaceHolderè¿›è¡Œæ˜¾ç¤ºã€‚è¿™ç§æœºåˆ¶ä½¿å¾—SurfaceViewèƒ½å¤Ÿåœ¨ä¸»UIçº¿ç¨‹ä¹‹å¤–è¿›è¡Œç»˜åˆ¶ï¼Œé€‚ç”¨äºéœ€è¦é¢‘ç¹æ›´æ–°çš„å›¾å½¢æˆ–è§†é¢‘åœºæ™¯ã€‚GLSurfaceViewä¹Ÿé‡‡ç”¨äº†åŒç¼“å†²æœºåˆ¶ï¼Œä½†å®ƒä½¿ç”¨äº†ä¸“é—¨çš„æ¸²æŸ“çº¿ç¨‹ï¼Œå¹¶æä¾›äº†OpenGL ESæ¸²æŸ“ä¸Šä¸‹æ–‡çš„ç®¡ç†å’Œæ§åˆ¶ã€‚</p></li><li><p>å¯¹æ€§èƒ½çš„è¦æ±‚ï¼šç”±äºSurfaceViewåœ¨å•ç‹¬çš„çº¿ç¨‹ä¸­è¿›è¡Œæ¸²æŸ“ï¼Œå› æ­¤å®ƒæ›´é€‚åˆäºéœ€è¦é«˜æ€§èƒ½æ¸²æŸ“çš„åœºæ™¯ï¼Œå¦‚è§†é¢‘æ’­æ”¾ã€æ¸¸æˆç­‰ã€‚GLSurfaceViewåœ¨åº•å±‚ä½¿ç”¨äº†OpenGL ESï¼Œå› æ­¤å¯ä»¥æ›´é«˜æ•ˆåœ°è¿›è¡Œå›¾å½¢æ¸²æŸ“ï¼Œå¹¶æä¾›äº†æ›´å¤šä¸OpenGL ESç›¸å…³çš„åŠŸèƒ½å’Œç‰¹æ€§ã€‚</p></li><li><p>äº¤äº’å¤„ç†ï¼šSurfaceViewçš„UIäº‹ä»¶å¤„ç†æ˜¯åœ¨ä¸»UIçº¿ç¨‹ä¸­è¿›è¡Œçš„ï¼Œè€ŒGLSurfaceViewå¯ä»¥é€šè¿‡è®¾ç½®Rendereræ¥å¤„ç†ä¸OpenGL ESç›¸å…³çš„äº¤äº’äº‹ä»¶ï¼Œå¦‚è§¦æ‘¸äº‹ä»¶ã€æŒ‰é”®äº‹ä»¶ç­‰ã€‚</p></li><li><p>ä½¿ç”¨SurfaceViewæ—¶å€™éœ€è¦å•ç‹¬å¼€å¯çº¿ç¨‹è¿›è¡Œå¾ªç¯æ¸²æŸ“ï¼Œè€ŒGLSurfaceViewåœ¨æ¯å¸§æ¸²æŸ“ä¹‹å‰ä¼šè‡ªåŠ¨è°ƒç”¨onDrawFrameå‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†æ¸²æŸ“ç¨‹åºå†™åœ¨onDrawFrameä¸­ï¼Œæ— çº¿å•ç‹¬å¼€å¯çº¿ç¨‹ã€‚</p></li><li><p>ä½¿ç”¨SurfaceViewæ—¶å€™éœ€è¦ç»‘å®šçª—å£å¹¶è®¾ç½®çª—å£å±æ€§ï¼Œè€ŒGLSurfaceViewé»˜è®¤ç»‘å®šå½“å‰çª—å£ï¼Œæ— éœ€é¢å¤–ç»‘å®šã€‚</p></li></ol><p>ç»¼ä¸Šæ‰€è¿°ï¼ŒSurfaceViewé€‚ç”¨äºæ™®é€šçš„2Då›¾å½¢å’Œè§†é¢‘æ˜¾ç¤ºï¼Œè€ŒGLSurfaceViewåˆ™ä¸“æ³¨äºOpenGL ESå›¾å½¢æ¸²æŸ“ï¼Œå¹¶æä¾›æ›´é«˜æ€§èƒ½å’Œæ›´å¤šçš„OpenGL ESåŠŸèƒ½ã€‚é€‰æ‹©ä½¿ç”¨å“ªä¸ªç±»å–å†³äºä½ çš„å…·ä½“éœ€æ±‚å’Œåœºæ™¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> OpenGL ES </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenGL ES </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++å¯¹è±¡ä¼˜åŒ–</title>
      <link href="/2023/05/29/c-dui-xiang-you-hua/"/>
      <url>/2023/05/29/c-dui-xiang-you-hua/</url>
      
        <content type="html"><![CDATA[<h1 id="å¯¹è±¡ä½¿ç”¨è¿‡ç¨‹ä¸­èƒŒåè°ƒç”¨äº†å“ªäº›æ–¹æ³•"><a href="#å¯¹è±¡ä½¿ç”¨è¿‡ç¨‹ä¸­èƒŒåè°ƒç”¨äº†å“ªäº›æ–¹æ³•" class="headerlink" title="å¯¹è±¡ä½¿ç”¨è¿‡ç¨‹ä¸­èƒŒåè°ƒç”¨äº†å“ªäº›æ–¹æ³•"></a>å¯¹è±¡ä½¿ç”¨è¿‡ç¨‹ä¸­èƒŒåè°ƒç”¨äº†å“ªäº›æ–¹æ³•</h1><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Test</span><span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span><span class="token function">Test</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">ma</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"Test(int)"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token operator">~</span><span class="token function">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"~Test()"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">Test</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Test <span class="token operator">&amp;</span>t<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">ma</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>ma<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"Test (const Test &amp;t)"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>Test<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Test <span class="token operator">&amp;</span>t<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"operator="</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>ma <span class="token operator">=</span> t<span class="token punctuation">.</span>ma<span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">private</span><span class="token operator">:</span><span class="token keyword">int</span> ma<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"--- 1 ---"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>Test t1<span class="token punctuation">;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"--- 2 ---"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>Test <span class="token function">t2</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"--- 3 ---"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>Test t3 <span class="token operator">=</span> t1<span class="token punctuation">;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"--- 4 ---"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>Test t4 <span class="token operator">=</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"--- 5 ---"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>t4 <span class="token operator">=</span> t2<span class="token punctuation">;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"--- 6 ---"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>t4 <span class="token operator">=</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"--- 7 ---"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>t4 <span class="token operator">=</span> <span class="token punctuation">(</span>Test<span class="token punctuation">)</span><span class="token number">30</span><span class="token punctuation">;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"--- 8 ---"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>t4 <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"--- 9 ---"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token comment">//Test *p = &amp;Test(40;)</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"--- 10 ---"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token keyword">const</span> Test <span class="token operator">&amp;</span>ref <span class="token operator">=</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è¿è¡Œç»“æœ"><a href="#è¿è¡Œç»“æœ" class="headerlink" title="è¿è¡Œç»“æœ"></a>è¿è¡Œç»“æœ</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">--- <span class="token number">1</span> ---Test<span class="token punctuation">(</span>int<span class="token punctuation">)</span>--- <span class="token number">2</span> ---Test <span class="token punctuation">(</span>const Test <span class="token operator">&amp;</span>t<span class="token punctuation">)</span>--- <span class="token number">3</span> ---Test <span class="token punctuation">(</span>const Test <span class="token operator">&amp;</span>t<span class="token punctuation">)</span>--- <span class="token number">4</span> ---Test<span class="token punctuation">(</span>int<span class="token punctuation">)</span>--- <span class="token number">5</span> ---<span class="token assign-left variable">operator</span><span class="token operator">=</span>--- <span class="token number">6</span> ---Test<span class="token punctuation">(</span>int<span class="token punctuation">)</span><span class="token assign-left variable">operator</span><span class="token operator">=</span>~Test<span class="token punctuation">(</span><span class="token punctuation">)</span>--- <span class="token number">7</span> ---Test<span class="token punctuation">(</span>int<span class="token punctuation">)</span><span class="token assign-left variable">operator</span><span class="token operator">=</span>~Test<span class="token punctuation">(</span><span class="token punctuation">)</span>--- <span class="token number">8</span> ---Test<span class="token punctuation">(</span>int<span class="token punctuation">)</span><span class="token assign-left variable">operator</span><span class="token operator">=</span>~Test<span class="token punctuation">(</span><span class="token punctuation">)</span>--- <span class="token number">9</span> ------ <span class="token number">10</span> ---Test<span class="token punctuation">(</span>int<span class="token punctuation">)</span>~Test<span class="token punctuation">(</span><span class="token punctuation">)</span>~Test<span class="token punctuation">(</span><span class="token punctuation">)</span>~Test<span class="token punctuation">(</span><span class="token punctuation">)</span>~Test<span class="token punctuation">(</span><span class="token punctuation">)</span>~Test<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h2><ul><li>1<br>æ­£å¸¸ä½¿ç”¨æ„é€ å‡½æ•°ç”Ÿæˆt1ï¼Œä¼ å…¥å‚æ•°æœ‰é»˜è®¤å€¼</li><li>2<br>å¸¸è§çš„æ‹·è´æ„é€ </li><li>3<br>æ‹·è´æ„é€ </li><li>4<br>C++ç¼–è¯‘å™¨å¯¹äºå¯¹è±¡æ„é€ çš„ä¼˜åŒ–ï¼Œç”¨ä¸´æ—¶å¯¹è±¡ç”Ÿæˆæ–°å¯¹è±¡çš„æ—¶å€™ï¼Œä¸´æ—¶å¯¹è±¡å°±ä¸äº§ç”Ÿäº†ï¼Œç›´æ¥æ„é€ æ–°å¯¹è±¡ï¼Œå› æ­¤è¿™é‡Œç­‰ä»·äºç›´æ¥è°ƒç”¨å¸¸è§„æ„é€ å‡½æ•°ï¼Œä¸è°ƒç”¨æ‹·è´æ„é€ <br>Test(20)æ˜¾å¼ç”Ÿæˆä¸´æ—¶å¯¹è±¡ï¼Œç”Ÿå­˜å‘¨æœŸä¸ºæ‰€åœ¨è¯­å¥<br>å› æ­¤è¿™é‡Œçš„Test t4 &#x3D; Test(20);ç­‰ä»·äºTest t4(20);</li><li>5<br>è°ƒç”¨äº†èµ‹å€¼è¿ç®—ç¬¦é‡è½½å‡½æ•°</li><li>6<br>ä½¿ç”¨ä¸´æ—¶å¯¹è±¡ä¸ºå·²ç»å­˜åœ¨çš„å¯¹è±¡èµ‹å€¼ï¼Œè¿™æ—¶ä¸´æ—¶å¯¹è±¡éœ€è¦ç”Ÿæˆï¼Œè¦ä¸æ— æ³•èµ‹å€¼ï¼Œæ˜¾å¼ç”Ÿæˆä¸´æ—¶å¯¹è±¡</li><li>7<br>æŠŠ30å¼ºåˆ¶è½¬æ¢ä¸ºTestï¼Œç„¶åå°†int è½¬æ¢ä¸º Test(int)ï¼Œè¿™æ—¶å°±è¦çœ‹è¿™ä¸ªç±»æœ‰æ²¡æœ‰è¾“å…¥ä¸ºintçš„æ„é€ å‡½æ•°ï¼Œè¿›è€Œè°ƒç”¨ã€‚è¿™æ—¶ä¸´æ—¶å¯¹è±¡éœ€è¦ç”Ÿæˆï¼Œè¦ä¸æ— æ³•èµ‹å€¼ï¼Œæ˜¾å¼ç”Ÿæˆä¸´æ—¶å¯¹è±¡</li><li>8<br>æŠŠ30å¼ºåˆ¶è½¬æ¢ä¸ºTestï¼Œç„¶åå°†int è½¬æ¢ä¸º Test(int)ï¼Œè¿™æ—¶å°±è¦çœ‹è¿™ä¸ªç±»æœ‰æ²¡æœ‰è¾“å…¥ä¸ºintçš„æ„é€ å‡½æ•°ï¼Œè¿›è€Œè°ƒç”¨ã€‚è¿™æ—¶ä¸´æ—¶å¯¹è±¡éœ€è¦ç”Ÿæˆï¼Œè¦ä¸æ— æ³•èµ‹å€¼ï¼Œéšå¼ç”Ÿæˆä¸´æ—¶å¯¹è±¡</li><li>9<br>è¿™é‡Œçš„ä¸´æ—¶å¯¹è±¡éœ€è¦ç”Ÿæˆï¼Œä¸”å‡ºäº†è¯­å¥ä¸´æ—¶å¯¹è±¡å°±ä¼šè°ƒç”¨ææ„å‡½æ•°ï¼Œå› æ­¤è¿™é‡Œè¯´æ˜ä½¿ç”¨æŒ‡é’ˆæŒ‡å‘ä¸´æ—¶å¯¹è±¡æ˜¯ä¸å®‰å…¨çš„ï¼Œå› æ­¤è¿™é‡Œç›´æ¥è¿è¡Œæ˜¯æŠ¥é”™çš„ï¼Œæ— æ³•è·å–å³å€¼çš„åœ°å€</li><li>10<br>è¿™é‡Œçš„ä¸´æ—¶å¯¹è±¡éœ€è¦ç”Ÿæˆï¼Œä¸”å‡ºäº†è¯­å¥ä¸´æ—¶å¯¹è±¡ä¸ä¼šè°ƒç”¨ææ„å‡½æ•°</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Test</span><span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span><span class="token function">Test</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">ma</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">mb</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"Test(int, int)"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token operator">~</span><span class="token function">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"~Test()"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">Test</span><span class="token punctuation">(</span><span class="token keyword">const</span> Test <span class="token operator">&amp;</span>src<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">ma</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span>ma<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">mb</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span>mb<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"Test(const Test &amp;)"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>Test <span class="token keyword">operator</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Test <span class="token operator">&amp;</span>src<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>ma <span class="token operator">=</span> src<span class="token punctuation">.</span>ma<span class="token punctuation">;</span>mb <span class="token operator">=</span> src<span class="token punctuation">.</span>mb<span class="token punctuation">;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"operator = "</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">private</span><span class="token operator">:</span><span class="token keyword">int</span> ma<span class="token punctuation">;</span><span class="token keyword">int</span> mb<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>Test <span class="token function">t1</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"--- 3 ---"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>Test <span class="token function">t2</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"--- 4 ---"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>Test t3 <span class="token operator">=</span> t2<span class="token punctuation">;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"--- 5 ---"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token keyword">static</span> Test t4 <span class="token operator">=</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"--- 6 ---"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>t2 <span class="token operator">=</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"--- 7 ---"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>t2 <span class="token operator">=</span> <span class="token punctuation">(</span>Test<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"--- 8 ---"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>t2 <span class="token operator">=</span> <span class="token number">60</span><span class="token punctuation">;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"--- 9 ---"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>Test <span class="token operator">*</span>p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"--- 10 ---"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>Test <span class="token operator">*</span>p2 <span class="token operator">=</span> <span class="token keyword">new</span> Test<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"--- 11 ---"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token comment">// Test *p3 = &amp;Test(80,80);</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"--- 12 ---"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token keyword">const</span> Test <span class="token operator">&amp;</span>p4 <span class="token operator">=</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">delete</span> p1<span class="token punctuation">;</span><span class="token keyword">delete</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> p2<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>Test <span class="token function">t5</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è¿è¡Œç»“æœ-1"><a href="#è¿è¡Œç»“æœ-1" class="headerlink" title="è¿è¡Œç»“æœ"></a>è¿è¡Œç»“æœ</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Test<span class="token punctuation">(</span>int, int<span class="token punctuation">)</span>Test<span class="token punctuation">(</span>int, int<span class="token punctuation">)</span>--- <span class="token number">3</span> ---Test<span class="token punctuation">(</span>int, int<span class="token punctuation">)</span>--- <span class="token number">4</span> ---Test<span class="token punctuation">(</span>const Test <span class="token operator">&amp;</span><span class="token punctuation">)</span>--- <span class="token number">5</span> ---Test<span class="token punctuation">(</span>int, int<span class="token punctuation">)</span>--- <span class="token number">6</span> ---Test<span class="token punctuation">(</span>int, int<span class="token punctuation">)</span>operator <span class="token operator">=</span> ~Test<span class="token punctuation">(</span><span class="token punctuation">)</span>~Test<span class="token punctuation">(</span><span class="token punctuation">)</span>--- <span class="token number">7</span> ---Test<span class="token punctuation">(</span>int, int<span class="token punctuation">)</span>operator <span class="token operator">=</span> ~Test<span class="token punctuation">(</span><span class="token punctuation">)</span>~Test<span class="token punctuation">(</span><span class="token punctuation">)</span>--- <span class="token number">8</span> ---Test<span class="token punctuation">(</span>int, int<span class="token punctuation">)</span>operator <span class="token operator">=</span> ~Test<span class="token punctuation">(</span><span class="token punctuation">)</span>~Test<span class="token punctuation">(</span><span class="token punctuation">)</span>--- <span class="token number">9</span> ---Test<span class="token punctuation">(</span>int, int<span class="token punctuation">)</span>--- <span class="token number">10</span> ---Test<span class="token punctuation">(</span>int, int<span class="token punctuation">)</span>Test<span class="token punctuation">(</span>int, int<span class="token punctuation">)</span>--- <span class="token number">11</span> ------ <span class="token number">12</span> ---Test<span class="token punctuation">(</span>int, int<span class="token punctuation">)</span>~Test<span class="token punctuation">(</span><span class="token punctuation">)</span>~Test<span class="token punctuation">(</span><span class="token punctuation">)</span>~Test<span class="token punctuation">(</span><span class="token punctuation">)</span>~Test<span class="token punctuation">(</span><span class="token punctuation">)</span>~Test<span class="token punctuation">(</span><span class="token punctuation">)</span>~Test<span class="token punctuation">(</span><span class="token punctuation">)</span>~Test<span class="token punctuation">(</span><span class="token punctuation">)</span>~Test<span class="token punctuation">(</span><span class="token punctuation">)</span>~Test<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è§£æ-1"><a href="#è§£æ-1" class="headerlink" title="è§£æ"></a>è§£æ</h2><ul><li>5<br>ä½¿ç”¨ä¸´æ—¶æ„é€ åŒç±»å‹æ–°å¯¹è±¡çš„æ—¶å€™ï¼Œä¸´æ—¶å¯¹è±¡è¢«ä¼˜åŒ–ï¼Œç±»ä¼¼äºä¸Šæ–‡çš„ç¬¬4é¡¹</li><li>7<br>é€—å·è¡¨è¾¾å¼çš„å€¼ä¸ºæœ€åä¸€ä¸ªå‚æ•°çš„å€¼ï¼Œå³:t2 &#x3D; (Test)(50);è¿™é‡Œå°†50è¿›è¡Œäº†å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚ç¼–è¯‘å™¨å°±ä¼šå»æ‰¾æœ‰æ²¡æœ‰å¸¦ä¸€ä¸ªæ•´å‹è¾“å…¥çš„æ„é€ å‡½æ•°å»å®ç°ã€‚</li><li>11<br>ä¸èƒ½ä½¿ç”¨æŒ‡é’ˆæŒ‡å‘ä¸´æ—¶å¯¹è±¡ï¼Œä¸´æ—¶å¯¹è±¡ä½¿ç”¨åææ„ã€‚</li><li>12<br>ä½¿ç”¨å¼•ç”¨å˜é‡æŒ‡å‘ä¸´æ—¶å¯¹è±¡ï¼Œç›¸å½“äºç»™ä¸´æ—¶å¯¹è±¡èµ·äº†ä¸€ä¸ªåˆ«åï¼Œå¼•ç”¨å¯¹è±¡é”€æ¯æ—¶ï¼Œä¸´æ—¶å¯¹è±¡æ‰ä¼šææ„ã€‚</li></ul><h1 id="å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­å¯¹è±¡èƒŒåè°ƒç”¨äº†å“ªäº›æ–¹æ³•"><a href="#å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­å¯¹è±¡èƒŒåè°ƒç”¨äº†å“ªäº›æ–¹æ³•" class="headerlink" title="å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­å¯¹è±¡èƒŒåè°ƒç”¨äº†å“ªäº›æ–¹æ³•"></a>å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­å¯¹è±¡èƒŒåè°ƒç”¨äº†å“ªäº›æ–¹æ³•</h1><h2 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Test</span><span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span><span class="token function">Test</span><span class="token punctuation">(</span><span class="token keyword">int</span> data <span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">ma</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"Test(int)"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token operator">~</span><span class="token function">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"~Test"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">Test</span><span class="token punctuation">(</span><span class="token keyword">const</span> Test <span class="token operator">&amp;</span>t<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">ma</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>ma<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"Test(const Test &amp;)"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Test<span class="token operator">&amp;</span>t<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">"operator="</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>ma<span class="token operator">=</span>t<span class="token punctuation">.</span>ma<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> ma<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">private</span><span class="token operator">:</span><span class="token keyword">int</span> ma<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>Test <span class="token function">GetObject</span><span class="token punctuation">(</span>Test t<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> val<span class="token operator">=</span>t<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Test <span class="token function">tmp</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> tmp<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>Test t1<span class="token punctuation">;</span>Test t2<span class="token punctuation">;</span>t2<span class="token operator">=</span><span class="token function">GetObject</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç¨‹åºè¿è¡Œç»“æœ"><a href="#ç¨‹åºè¿è¡Œç»“æœ" class="headerlink" title="ç¨‹åºè¿è¡Œç»“æœ"></a>ç¨‹åºè¿è¡Œç»“æœ</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Test<span class="token punctuation">(</span>int<span class="token punctuation">)</span>Test<span class="token punctuation">(</span>int<span class="token punctuation">)</span><span class="token operator">==</span><span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">==</span><span class="token operator">=</span>Test<span class="token punctuation">(</span>const Test <span class="token operator">&amp;</span><span class="token punctuation">)</span>Test<span class="token punctuation">(</span>int<span class="token punctuation">)</span><span class="token assign-left variable">operator</span><span class="token operator">=</span>~Test~Test~Test~Test<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><ul><li>Test(int)<br>è°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°</li><li>Test(int)<br>è°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°</li><li>Test(const Test &amp;)<br>æ‰§è¡Œ<code>GetObject(t1)</code>æ—¶éœ€è¦å°†å®å‚t1ä¼ é€’ç»™<code>GetObject(Test t)</code>å‡½æ•°çš„å½¢å‚<code>t</code>,è¿™é‡Œæ˜¯ä¸èƒ½æ˜¯ç›´æ¥çš„èµ‹å€¼ï¼Œåº”è¯¥æ˜¯åˆå§‹åŒ–ï¼Œå³:è¦é»˜è®¤è°ƒç”¨æ„é€ å‡½æ•°(æ‹·è´æ„é€ å‡½æ•°)ï¼Œå› æ­¤è¿™é‡Œå®é™…æ˜¯è°ƒç”¨äº†<code>Test(const Test &amp;)</code>å‡½æ•°ã€‚</li><li>Test(int)<br>è¿™é‡Œæ˜¯<code>GetObject(Test t)</code>å‡½æ•°å†…éƒ¨è°ƒç”¨äº†é»˜è®¤æ„é€ å‡½æ•°</li><li>operator&#x3D;<br>ç”±äº<code>GetObject(Test t)</code>å‡½æ•°å†…éƒ¨çš„<code>tmp</code>å˜é‡åœ¨å‡½æ•°ç»“æŸåå°±ä¼šè¢«é‡Šæ”¾æ²¡æœ‰åŠæ³•å†æŠŠå‚æ•°ä¼ é€’å‡ºå»ï¼Œå› æ­¤è¿™é‡Œå…¶å®ä¹Ÿåœ¨è°ƒç”¨æ„é€ å‡½æ•°ï¼Œéœ€è¦æ„é€ ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼Œä½¿ç”¨å‡½æ•°é‡è½½è¿›è¡Œå€¼ä¼ é€’</li><li>~Test<br>ä¾æ¬¡æ‰§è¡Œä¸´æ—¶å¯¹è±¡çš„ææ„</li><li>~Test<br>ä¾æ¬¡æ‰§è¡Œä¸´æ—¶å¯¹è±¡çš„ææ„</li><li>~Test<br>ä¾æ¬¡æ‰§è¡Œä¸´æ—¶å¯¹è±¡çš„ææ„</li><li>~Test<br>ä¾æ¬¡æ‰§è¡Œä¸´æ—¶å¯¹è±¡çš„ææ„</li></ul>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> å¯¹è±¡ä¼˜åŒ– </tag>
            
            <tag> c++è¯¾ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é±¼çœ¼ç›¸æœºå¤–å‚æ ‡å®š</title>
      <link href="/2023/05/29/yu-yan-xiang-ji-wai-can-biao-ding/"/>
      <url>/2023/05/29/yu-yan-xiang-ji-wai-can-biao-ding/</url>
      
        <content type="html"><![CDATA[<h1 id="å‚è€ƒç½‘ç«™"><a href="#å‚è€ƒç½‘ç«™" class="headerlink" title="å‚è€ƒç½‘ç«™"></a>å‚è€ƒç½‘ç«™</h1><p>å¾…æ•´ç†</p><p><a href="https://zhuanlan.zhihu.com/p/603296375">AVMç¯è§†ç³»ç»Ÿâ€”â€”é±¼çœ¼ç›¸æœºå»ç•¸å˜ç®—æ³•</a></p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// å¤–å‚æ±‚è§£</span>std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>cv<span class="token double-colon punctuation">::</span>Point3f<span class="token operator">></span> object_points<span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span><span class="token function">solvePnP</span><span class="token punctuation">(</span>object_points<span class="token punctuation">,</span> image_points_undist_new<span class="token punctuation">,</span> cam_K<span class="token punctuation">[</span>cam_index<span class="token punctuation">]</span><span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">noArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cam_R<span class="token punctuation">[</span>cam_index<span class="token punctuation">]</span><span class="token punctuation">,</span> cam_T<span class="token punctuation">[</span>cam_index<span class="token punctuation">]</span><span class="token punctuation">,</span>                   <span class="token boolean">false</span><span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>SOLVEPNP_ITERATIVE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ERROR: solvePnP cam_index[%d]\n"</span><span class="token punctuation">,</span> cam_index<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">float</span> projection_error <span class="token operator">=</span> <span class="token function">ComputeProjectionError</span><span class="token punctuation">(</span>object_points<span class="token punctuation">,</span> image_points_undist_new<span class="token punctuation">,</span> cam_K<span class="token punctuation">[</span>cam_index<span class="token punctuation">]</span><span class="token punctuation">,</span> cam_R<span class="token punctuation">[</span>cam_index<span class="token punctuation">]</span><span class="token punctuation">,</span> cam_T<span class="token punctuation">[</span>cam_index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"projection_error1: "</span> <span class="token operator">&lt;&lt;</span> projection_error <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span><span class="token comment">// å®šä¹‰è¿­ä»£ç»ˆæ­¢æ¡ä»¶ï¼šæœ€å¤§è¿­ä»£æ¬¡æ•°ä¸º 100ï¼Œæ”¶æ•›é˜ˆå€¼ä¸º 0.001</span>cv<span class="token double-colon punctuation">::</span>TermCriteria <span class="token function">termCrit</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>TermCriteria<span class="token double-colon punctuation">::</span>MAX_ITER <span class="token operator">|</span> cv<span class="token double-colon punctuation">::</span>TermCriteria<span class="token double-colon punctuation">::</span>EPS<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">0.001</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ä½¿ç”¨ L-Mï¼ˆLevenberg-Marquardtï¼‰ ç®—æ³•è¿›è¡Œè¿­ä»£ä¼˜åŒ–ï¼Œä¸æ–­å‡å°é‡æŠ•å½±è¯¯å·®</span>cv<span class="token double-colon punctuation">::</span>Mat RR <span class="token operator">=</span> cam_R<span class="token punctuation">[</span>cam_index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cv<span class="token double-colon punctuation">::</span>Mat TT <span class="token operator">=</span> cam_R<span class="token punctuation">[</span>cam_index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cv<span class="token double-colon punctuation">::</span><span class="token function">solvePnPRefineLM</span><span class="token punctuation">(</span>object_points<span class="token punctuation">,</span> image_points_undist_new<span class="token punctuation">,</span> cam_K<span class="token punctuation">[</span>cam_index<span class="token punctuation">]</span><span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">noArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> RR<span class="token punctuation">,</span> TT<span class="token punctuation">,</span> termCrit<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ä½¿ç”¨è™šæ‹Ÿè§†è§‰ä¼ºæœ (Virtual Visual Servoing)æ–¹æ³•è¿›è¡Œè¿­ä»£ä¼˜åŒ–ï¼Œä¸æ–­å‡å°é‡æŠ•å½±è¯¯å·®</span><span class="token comment">// cv::solvePnPRefineVVS(object_points, image_points_undist_new, cam_K[cam_index], cv::noArray(), RR, TT, termCrit);</span>cam_R<span class="token punctuation">[</span>cam_index<span class="token punctuation">]</span> <span class="token operator">=</span> RR<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cam_R<span class="token punctuation">[</span>cam_index<span class="token punctuation">]</span> <span class="token operator">=</span> TT<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">&#x2F;** * @description: è¾“å…¥ç•¸å˜å›¾ï¼Œè¾“å‡ºå»ç•¸å˜å›¾ * @param &#123;Mat&#125; &amp;img_dist * @param &#123;Mat&#125; &amp;img_undist * @return &#123;*&#125; * @author: wangshuaiyang *&#x2F;int TAvmCal::DistToUndistImage(cv::Mat img_dist, cv::Mat &amp;img_undist, int cam_index)&#123;    int ret &#x3D; 0;#if 1    &#x2F;&#x2F; æ–°çš„ç›¸æœºå†…å‚çŸ©é˜µå’Œå›¾åƒå°ºå¯¸ï¼ˆå¯é€‰ï¼‰    float scale &#x3D; 2.5;    cv::Mat new_cam_K &#x3D; cam_K[cam_index].clone();    new_cam_K.at&lt;float&gt;(0, 0) &#x3D; new_cam_K.at&lt;float&gt;(0, 0);     &#x2F;&#x2F; fx    new_cam_K.at&lt;float&gt;(1, 1) &#x3D; new_cam_K.at&lt;float&gt;(0, 0);     &#x2F;&#x2F; fy    new_cam_K.at&lt;float&gt;(0, 2) &#x3D; new_cam_K.at&lt;float&gt;(0, 0) * 5; &#x2F;&#x2F; cx    new_cam_K.at&lt;float&gt;(1, 2) &#x3D; new_cam_K.at&lt;float&gt;(0, 0) * 2; &#x2F;&#x2F; cy    cv::Size new_size &#x3D; cv::Size(img_dist.size().width * scale, img_dist.size().height * scale);    cv::fisheye::undistortImage(img_dist, img_undist, cam_K[cam_index], cam_D[cam_index], new_cam_K, new_size);    cv::resize(img_undist, img_undist, img_dist.size());#else    cv::Mat mapx;    cv::Mat mapy;    &#x2F;&#x2F; è®¡ç®—çŸ«æ­£å›¾    float point_u_tmp[2];    float point_d_tmp[2];    float scale &#x3D; 2.5;    int offset_x &#x3D; 1000;    int offset_y &#x3D; 300;    int w &#x3D; img_dist.cols * scale;    int h &#x3D; img_dist.rows * scale;    mapx.create(h, w, CV_32FC1);    mapy.create(h, w, CV_32FC1);    for (int col &#x3D; 0; col &lt; w; col +&#x3D; 1)    &#123;        for (int row &#x3D; 0; row &lt; h; row +&#x3D; 1)        &#123;            &#x2F;&#x2F; å½’ä¸€åŒ–            std::vector&lt;cv::Point2d&gt; unDist_points(1);            std::vector&lt;cv::Point2d&gt; dist_points(1);            point_u_tmp[0] &#x3D; col - offset_x;            point_u_tmp[1] &#x3D; row - offset_y;            unDist_points[0].x &#x3D; (point_u_tmp[0] - cam_K[cam_index].at&lt;float&gt;(0, 2)) &#x2F; cam_K[cam_index].at&lt;float&gt;(0, 0);            unDist_points[0].y &#x3D; (point_u_tmp[1] - cam_K[cam_index].at&lt;float&gt;(1, 2)) &#x2F; cam_K[cam_index].at&lt;float&gt;(1, 1);            cv::fisheye::distortPoints(unDist_points, dist_points, cam_K[cam_index], cam_D[cam_index]);            mapx.at&lt;float&gt;(row, col) &#x3D; dist_points[0].x;            mapy.at&lt;float&gt;(row, col) &#x3D; dist_points[0].y;        &#125;    &#125;    cv::remap(img_dist, img_undist, mapx, mapy, cv::INTER_LINEAR);    cv::resize(img_undist, img_undist, img_dist.size());#endif#if  SHOW_DETECT_PROCESS    cv::imshow(&quot;image_remap_fish&quot;, img_undist);    cv::waitKey(0);#endif    return 0;&#125;&#x2F;** * @description: è®¡ç®—é‡æŠ•å½±è¯¯å·®(ä½¿ç”¨å‡æ–¹è¯¯å·®ï¼ŒRMS) * @return &#123;*&#125; * @author: wangshuaiyang *&#x2F;float TAvmCal::ComputeProjectionError(const std::vector&lt;cv::Point3f&gt; &amp;objectPoints,                                      const std::vector&lt;cv::Point2f&gt; &amp;imagePoints,                                      const cv::Mat &amp;cameraMatrix,                                      const cv::Mat &amp;rvec,                                      const cv::Mat &amp;tvec)&#123;    &#x2F;&#x2F; ä½¿ç”¨ä¼°è®¡çš„ç›¸æœºä½å§¿å°†ä¸–ç•Œåæ ‡ç³»ä¸­çš„ä¸‰ç»´ç‚¹æŠ•å½±åˆ°å›¾åƒå¹³é¢ä¸Š    std::vector&lt;cv::Point2f&gt; projectedPoints;    cv::projectPoints(objectPoints, rvec, tvec, cameraMatrix, cv::noArray(), projectedPoints);    &#x2F;&#x2F; è®¡ç®—é‡æŠ•å½±è¯¯å·®    float RMS_Error &#x3D; 0.0;    for (size_t i &#x3D; 0; i &lt; imagePoints.size(); ++i)    &#123;        float dx &#x3D; projectedPoints[i].x - imagePoints[i].x;        float dy &#x3D; projectedPoints[i].y - imagePoints[i].y;        RMS_Error +&#x3D; (dx * dx + dy * dy);    &#125;    RMS_Error &#x2F;&#x3D; (float)imagePoints.size();    RMS_Error &#x3D; std::sqrt(RMS_Error);    &#x2F;&#x2F; è¿”å›æ€»çš„é‡æŠ•å½±è¯¯å·®    return RMS_Error;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> é±¼çœ¼ç›¸æœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> é±¼çœ¼ç›¸æœºå¤–å‚æ ‡å®š </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>name</title>
      <link href="/2023/05/29/0-mo-ban/"/>
      <url>/2023/05/29/0-mo-ban/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Class </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tag </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yoloV1åˆ°yoloV11ç³»ç»Ÿå­¦ä¹ </title>
      <link href="/2023/05/29/yolov1-dao-yolov11-xi-tong-xue-xi/"/>
      <url>/2023/05/29/yolov1-dao-yolov11-xi-tong-xue-xi/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h1><p>CNNå¸¸è§çš„å±‚åŒ…æ‹¬ï¼šå…¨è¿æ¥å±‚ã€å·ç§¯å±‚ã€æ± åŒ–å±‚ã€æ¿€æ´»å±‚ç­‰ã€‚å¤šå±‚æ„ŸçŸ¥å™¨åŒ…å«å…¨è¿æ¥å±‚å’Œæ¿€æ´»å±‚ï¼ŒCNNåœ¨å¤šå±‚æ„ŸçŸ¥å™¨çš„åŸºç¡€ä¸ŠåŠ å…¥äº†å·ç§¯å±‚(æ± åŒ–å±‚å…¶å®ä¹Ÿæ˜¯å·ç§¯è¿ç®—ï¼Œç”¨æ¥å‡å°‘æ•°æ®è§„æ¨¡çš„)</p><h2 id="Denseå±‚-å…¨è¿æ¥å±‚"><a href="#Denseå±‚-å…¨è¿æ¥å±‚" class="headerlink" title="Denseå±‚(å…¨è¿æ¥å±‚)"></a>Denseå±‚(å…¨è¿æ¥å±‚)</h2><p>å…¨è¿æ¥å±‚(Fully connected dence layers)ï¼Œæ­£å¦‚å…¶åï¼ŒæŒ‡çš„æ˜¯å±‚ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šè¿æ¥å®ƒä¸‹ä¸€å±‚çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚ç†è®ºä¸Šè®²ï¼Œåªè¦ç¥ç»å…ƒè¶³å¤Ÿå¤š(å›¾ä¸­ç»¿è‰²åœˆ)ï¼Œç¥ç»ç½‘ç»œå¯ä»¥é€¼è¿‘ä»»æ„å‡½æ•°ã€‚</p><p>å…¨è¿æ¥å±‚è¾“å‡ºå°ºå¯¸çš„è®¡ç®—å…¬å¼ï¼šå…¨è¿æ¥çš„å®è´¨å°±æ˜¯çŸ©é˜µç›¸ä¹˜ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šè¾“å…¥å‘é‡Xä¹˜ä»¥æƒé‡çŸ©é˜µWï¼ŒåŠ ä¸Šåç½®Bå¾—åˆ°è¾“å‡ºï¼Œæ‰€ä»¥è¾“å‡ºå‘é‡å¤§å°ç­‰äºæƒé‡çŸ©é˜µçš„è¡Œæ•°ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-4.png" alt="alt text"><br>è®¡ç®—å…¬å¼$Y &#x3D; WX + B$<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-5.png" alt="alt text"></p><h2 id="Convå±‚-å·ç§¯å±‚"><a href="#Convå±‚-å·ç§¯å±‚" class="headerlink" title="Convå±‚(å·ç§¯å±‚)"></a>Convå±‚(å·ç§¯å±‚)</h2><p>å¯¹äºä¸€å¼ è¾“å…¥å›¾ç‰‡ï¼Œå¤§å°ä¸º[W, H]ï¼Œå¦‚æœç”Ÿæˆä¸€å¼ [X, Y]çš„ç‰¹å¾å›¾ï¼Œéœ€è¦WHXYä¸ªå‚æ•°ï¼Œè¿™å³æ˜¯å…¨è¿æ¥å±‚(Fully connected dence layers)ï¼Œè¿™ä¸ªå‚æ•°é‡å®åœ¨å¤ªåºå¤§ï¼Œç½‘ç»œå¾ˆéš¾è®­ç»ƒã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-6.png" alt="alt text"></p><p>å·ç§¯å±‚çš„æœ¬è´¨å°±æ˜¯ç”¨æ¥è§£å†³è¿™ç§è®¡ç®—é‡çˆ†ç‚¸çš„é—®é¢˜ã€‚å·ç§¯çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p><ul><li>å±€éƒ¨æ„ŸçŸ¥åŸŸ </li><li>æƒå€¼å…±äº«</li></ul><p>å±€éƒ¨æ„ŸçŸ¥ï¼šå±€éƒ¨æ„ŸçŸ¥çš„ä¸€å±‚çš„ç¥ç»å…ƒåªè¿æ¥åˆ°å‰ä¸€å±‚çš„å±€éƒ¨åŒºåŸŸï¼Œä¸åŒäºå…¨è¿æ¥ã€‚è¿™æ ·åšä¹Ÿæœ‰ç¥ç»å­¦åŸç†æ”¯æ’‘ï¼šä¸€ä¸ªç¥ç»å…ƒå¹¶éæ¥æ”¶å…¶å®ƒæ‰€æœ‰ç¥ç»å…ƒä¼ æ¥çš„åˆºæ¿€éƒ½äº§ç”Ÿååº”ï¼Œå®ƒé¦–å…ˆä¼šå°†å…¶ç›¸é‚»ç¥ç»å…ƒä¼ æ¥çš„åˆºæ¿€è¿›è¡Œç§¯ç´¯ï¼Œåˆ°ä¸€å®šæ—¶å€™äº§ç”Ÿè‡ªå·±çš„åˆºæ¿€å¹¶ä¼ é€’ç»™ä¸€äº›ä¸å®ƒç›¸é‚»çš„ç¥ç»å…ƒã€‚è¿™ä¸ªç›¸é‚»å°±æ˜¯å±€éƒ¨æ„ŸçŸ¥çš„æ¦‚å¿µï¼Œå¯¹äºå›¾åƒè¯†åˆ«è€Œè¨€ï¼Œå…¶çš„ç©ºé—´è”ç³»ä¹Ÿæ˜¯å±€éƒ¨çš„åƒç´ è”ç³»è¾ƒä¸ºç´§å¯†ï¼Œè€Œè·ç¦»è¾ƒè¿œçš„åƒç´ ç›¸å…³æ€§åˆ™è¾ƒå¼±ã€‚å› æ­¤ï¼Œæ¯ä¸ªç¥ç»å…ƒå…¶å®æ²¡æœ‰å¿…è¦å¯¹å…¨å±€å›¾åƒè¿›è¡Œæ„ŸçŸ¥(å…¨å±€è¿æ¥)ï¼Œåªéœ€å¯¹å±€éƒ¨è¿›è¡Œæ„ŸçŸ¥(å±€éƒ¨è¿æ¥)ï¼Œç„¶ååœ¨æ›´é«˜å±‚å°†å±€éƒ¨ä¿¡æ¯ç»¼åˆèµ·æ¥å°±å¾—åˆ°äº†å…¨å±€ä¿¡æ¯ã€‚ä¸‹å›¾å±•ç¤ºäº†å…¨è¿æ¥ä¸å±€éƒ¨è¿æ¥çš„å·®åˆ«ï¼šå…¨è¿æ¥çš„å‚æ•°å¯ä»¥ä»$10^{12}$æ¬¡é™åˆ°$10^8$<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-7.png" alt="alt text"></p><p>æƒå€¼å…±äº«ï¼šé‡‡ç”¨å±€éƒ¨è¿æ¥åï¼Œå‚æ•°è¿˜æ˜¯å¤ªå¤šäº†ï¼Œéœ€è¦å¼•å…¥æƒå€¼å…±äº«çš„æ¦‚å¿µï¼Œå¦‚ä¸Šå›¾çš„å±€éƒ¨è¿æ¥ä¸­ï¼Œå¯¹äº1Mä¸ªç¥ç»å…ƒï¼Œæ¯ä¸ªç¥ç»å…ƒçš„æ„ŸçŸ¥é‡ä¸º10x10ï¼Œé‚£ä¹ˆå‚æ•°é‡å³ä¸º 1M * 10 * 10ï¼Œå¦‚æœè¿™1Mä¸ªç¥ç»å…ƒçš„10 * 10çš„å‚æ•°éƒ½æ˜¯ç›¸ç­‰çš„ï¼Œé‚£ä¹ˆå‚æ•°é‡å°†ä¼šé™ä¸º100äº†ã€‚å…¶ä¸­éšå«çš„åŸç†æ˜¯ï¼šå›¾åƒçš„ä¸€éƒ¨åˆ†ç»Ÿè®¡ç‰¹æ€§ä¸å…¶å®ƒéƒ¨åˆ†æ˜¯ä¸€æ ·çš„ï¼Œæ„å‘³ç€ï¼šå¯¹äºå›¾åƒçš„æ‰€æœ‰ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨ç›¸åŒçš„æƒé‡å€¼ã€‚å·ç§¯å±‚çš„è®¡ç®—è¿‡ç¨‹ï¼šå¦‚ä¸‹å›¾(æ¥æºäºç½‘ç»œï¼Œä¾µåˆ )æ‰€ç¤ºå±•ç¤ºäº†:è¾“å…¥(1, 5, 5, 3)ï¼Œæ„æ€æ˜¯batch&#x3D;1ï¼Œå›¾åƒHeightIn &#x3D; 5ï¼Œ WidthIn &#x3D; 5ï¼Œ channel &#x3D; 3(ä»£è¡¨RGBä¸‰é¢œè‰²é€šé“)å·ç§¯æ ¸ï¼š(2, 3, 3, 3)ï¼Œæ„æ€æ˜¯2ä¸ªå·ç§¯æ ¸ï¼Œå›¾åƒHeightKernel &#x3D; 3ï¼Œ WidthKernel&#x3D; 3ï¼Œ channel &#x3D; 3(ä¸è¾“å…¥channelå¿…é¡»ç›¸ç­‰)å¡«å……ï¼špadding &#x3D; 1æ­¥é•¿ï¼š stride &#x3D; 2è¾“å‡ºï¼š(2, 3, 3)ï¼Œè¡¨ç¤º2ä¸ªfeature mapï¼Œæå–2ç±»ç‰¹å¾ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-8.png" alt="alt text"></p><p>å·ç§¯å±‚è¾“å‡ºå°ºå¯¸çš„è®¡ç®—å…¬å¼ï¼š<br>HeightOut &#x3D; (HeightIn - HeightKernel + 2 * padding) &#x2F; stride + 1Widthout Â &#x3D; (WidthIn - WidthKernel + 2 * padding) &#x2F; stride + 1</p><h2 id="Poolingå±‚-æ± åŒ–å±‚"><a href="#Poolingå±‚-æ± åŒ–å±‚" class="headerlink" title="Poolingå±‚(æ± åŒ–å±‚)"></a>Poolingå±‚(æ± åŒ–å±‚)</h2><p>æ± åŒ–å³ä¸‹é‡‡æ ·(downsamples)ï¼Œä¸€èˆ¬åœ¨å·ç§¯å±‚åé¢ï¼Œç›®çš„æ˜¯ä¸ºäº†å‡å°‘ç‰¹å¾å›¾(å‡å°‘ç½‘ç»œçš„å‚æ•°)ï¼Œä»è€Œå‡å°è®¡ç®—é‡ï¼Œå¹¶ä¸”åœ¨ä¸€å®šç¨‹åº¦ä¸Šèƒ½æ§åˆ¶è¿‡æ‹Ÿåˆã€‚å¸¸è§çš„æ± åŒ–å±‚ä¸ºæœ€å¤§å€¼æ± åŒ–å±‚(max-pooling)ä¸å¹³å‡å€¼æ± åŒ–å±‚(mean-polling)ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå…¶strideä¸º2ï¼Œä¿è¯ä¸¤ä¸ªæ± åŒ–åŒºä¸é‡å (å¦åˆ™ä¸ºé‡å æ± åŒ–)<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-9.png" alt="alt text"></p><p>æ± åŒ–å±‚è¾“å‡ºå°ºå¯¸çš„è®¡ç®—å…¬å¼ï¼š<br>HeightOut &#x3D; (HeightIn - HeightKernel + 2 * padding) &#x2F; stride + 1Widthout Â &#x3D; (WidthIn - WidthKernel + 2 * padding) &#x2F; stride + 1<br>æ± åŒ–å±‚çš„è¾“å‡ºæ·±åº¦ä¸è¾“å…¥çš„æ·±åº¦ç›¸åŒï¼Œæ± åŒ–å¯¹æ¯ä¸€ä¸ªæ·±åº¦åˆ‡ç‰‡è¿›è¡Œè®¡ç®—ã€‚</p><h2 id="Activationå±‚-æ¿€æ´»å±‚"><a href="#Activationå±‚-æ¿€æ´»å±‚" class="headerlink" title="Activationå±‚(æ¿€æ´»å±‚)"></a>Activationå±‚(æ¿€æ´»å±‚)</h2><p>CNNä¸­ç»å¸¸æ˜¯ä¸€ä¸ªå·ç§¯å±‚åè·Ÿä¸€ä¸ªæ¿€æ´»å±‚ï¼Œæ¿€æ´»å±‚æ˜¯ä¸€ä¸ªéçº¿æ€§å±‚ï¼Œæ­£å¦‚ç¥ç»å…ƒæœ‰ä¸€å®šçš„é˜ˆå€¼ï¼Œåªæœ‰ä¿¡å·å¼ºåº¦å¤§äºæŸä¸ªå€¼ï¼Œç¥ç»å…ƒæ‰èƒ½è¢«æ¿€æ´»ï¼Œå°†ä¿¡å·å‘å°„åˆ°ä¸‹ä¸€ä¸ªç¥ç»å…ƒã€‚å…¶æ•°å­¦å¯è§†åŒ–è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤º:<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-10.png" alt="alt text"></p><p>å¼•å…¥æ¿€æ´»å‡½æ•°æ˜¯ä¸ºäº†å¢åŠ ç¥ç»ç½‘ç»œçš„éçº¿æ€§ï¼Œå¦‚æœä¸ç”¨æ¿€æ´»å‡½æ•°ï¼Œæ¯ä¸€å±‚éƒ½æ˜¯ä¸Šä¸€å±‚çš„çº¿æ€§è¾“å…¥ï¼Œè¿™æ ·ä¸€æ¥ï¼Œæ— è®ºç¥ç»ç½‘ç»œæœ‰å¤šå°‘å±‚ï¼Œè¾“å‡ºéƒ½æ˜¯è¾“å…¥çš„çº¿æ€§ç»„åˆï¼Œè¿™ç§æƒ…å†µå°±æ˜¯æœ€åŸå§‹çš„æ„ŸçŸ¥æœºã€‚å¼•å…¥æ¿€æ´»å‡½æ•°åˆ™å¼•å…¥äº†éçº¿æ€§å› ç´ ï¼Œä½¿å¾—ç¥ç»ç½‘ç»œå¯ä»¥ä»»æ„é€¼è¿‘ä»»ä½•éçº¿æ€§å‡½æ•°ï¼Œè¿™æ ·ç¥ç»ç½‘ç»œå°±å¯ä»¥åº”ç”¨åˆ°ä¼—å¤šçš„éçº¿æ€§æ¨¡å‹ä¸­ã€‚</p><p>å¸¸è§çš„æ¿€æ´»å‡½æ•°æœ‰å¦‚ä¸‹å‡ ç§ï¼š</p><ul><li><p>sigmoid<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-11.png" alt="alt text"></p></li><li><p>tanh<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-12.png" alt="alt text"></p></li><li><p>relu<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-13.png" alt="alt text"></p></li></ul><p>å®ƒä»¬å„è‡ªæœ‰å…¶ä¼˜ç¼ºç‚¹ï¼Œç°åœ¨å¸¸ç”¨çš„æ˜¯reluï¼Œå…¶ä¸éœ€è¦æŒ‡æ•°è¿ç®—ï¼Œå¤æ‚åº¦ä½ï¼Œä¸”ä¸ä¼šå‡ºç°æ¢¯åº¦é¥±å’Œã€æ¶ˆå¤±é—®é¢˜ï¼Œæ”¶æ•›é€Ÿåº¦å¿«ã€‚</p><h2 id="Softmaxå±‚"><a href="#Softmaxå±‚" class="headerlink" title="Softmaxå±‚"></a>Softmaxå±‚</h2><p>Softmax æ˜¯ç”¨äºå¤šç±»åˆ†ç±»é—®é¢˜çš„æ¿€æ´»å‡½æ•°ï¼Œåœ¨å¤šç±»åˆ†ç±»é—®é¢˜ä¸­ï¼Œè¶…è¿‡ä¸¤ä¸ªç±»çš„æ ‡ç­¾åˆ™éœ€è¦ç±»æˆå‘˜å…³ç³»ã€‚æ˜¯sigmoidåœ¨å¤šåˆ†ç±»ä¸Šçš„æ¨å¹¿ï¼Œç›®çš„æ˜¯å°†å¤šåˆ†ç±»çš„ç»“æœä»¥æ¦‚ç‡çš„å½¢å¼å±•ç°å‡ºæ¥ï¼Œå¯¹äºé•¿åº¦ä¸º K çš„ä»»æ„å®å‘é‡ï¼ŒSoftmax å¯ä»¥å°†å…¶å‹ç¼©ä¸ºé•¿åº¦ä¸º Kï¼Œå€¼åœ¨(0ï¼Œ1)èŒƒå›´å†…ï¼Œå¹¶ä¸”å‘é‡ä¸­å…ƒç´ çš„æ€»å’Œä¸º 1 çš„å®å‘é‡ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-14.png" alt="alt text"></p><hr><p>YOLOç³»åˆ—æ£€æµ‹å™¨çš„æ•´ä½“ç»“æ„åŒ…æ‹¬å››ä¸ªéƒ¨åˆ†ï¼šInputã€Backboneã€Neckå’ŒHeadã€‚<br>Inputæ˜¯ç‰©ä½“æ£€æµ‹å™¨çš„è¾“å…¥ï¼ŒåŒ…æ‹¬resizeå’Œå›¾åƒå¢å¼ºç­‰ä¸€ç³»åˆ—æ“ä½œã€‚<br>Backboneè´Ÿè´£ä»è¾“å…¥å›¾åƒä¸­æå–æœ‰ç”¨çš„ç‰¹å¾ã€‚å®ƒé€šå¸¸æ˜¯ä¸€ä¸ªå·ç§¯ç¥ç»ç½‘ç»œ(CNN)ï¼Œåœ¨å¤§è§„æ¨¡çš„å›¾åƒåˆ†ç±»ä»»åŠ¡ä¸­è®­ç»ƒï¼Œå¦‚ImageNetã€‚éª¨å¹²ç½‘åœ¨ä¸åŒçš„å°ºåº¦ä¸Šæ•æ‰å±‚æ¬¡åŒ–çš„ç‰¹å¾ï¼Œåœ¨è¾ƒæ—©çš„å±‚ä¸­æå–ä½å±‚æ¬¡çš„ç‰¹å¾(å¦‚è¾¹ç¼˜å’Œçº¹ç†)ï¼Œåœ¨è¾ƒæ·±çš„å±‚ä¸­æå–é«˜å±‚æ¬¡çš„ç‰¹å¾(å¦‚ç‰©ä½“éƒ¨åˆ†å’Œè¯­ä¹‰ä¿¡æ¯)ã€‚<br>Neckæ˜¯è¿æ¥Backboneå’ŒHeadçš„ä¸€ä¸ªä¸­é—´éƒ¨ä»¶ã€‚å®ƒèšé›†å¹¶ç»†åŒ–éª¨å¹²ç½‘æå–çš„ç‰¹å¾ï¼Œé€šå¸¸ä¾§é‡äºåŠ å¼ºä¸åŒå°ºåº¦çš„ç©ºé—´å’Œè¯­ä¹‰ä¿¡æ¯ã€‚é¢ˆéƒ¨å¯èƒ½åŒ…æ‹¬é¢å¤–çš„å·ç§¯å±‚ã€ç‰¹å¾é‡‘å­—å¡”ç½‘ç»œ(FPN)ï¼Œæˆ–å…¶ä»–æœºåˆ¶ï¼Œä»¥æé«˜ç‰¹å¾çš„ä»£è¡¨æ€§ã€‚<br>Headæ˜¯ç‰©ä½“æ£€æµ‹å™¨çš„æœ€åç»„æˆéƒ¨åˆ†ï¼Œå®ƒè´Ÿè´£æ ¹æ®Backboneå’ŒNeckæä¾›çš„ç‰¹å¾è¿›è¡Œé¢„æµ‹ã€‚å®ƒé€šå¸¸ç”±ä¸€ä¸ªæˆ–å¤šä¸ªç‰¹å®šä»»åŠ¡çš„å­ç½‘ç»œç»„æˆï¼Œæ‰§è¡Œåˆ†ç±»ã€å®šä½ã€‚æœ€åä¸€ä¸ªåå¤„ç†æ­¥éª¤ï¼Œå¦‚éæå¤§å€¼æŠ‘åˆ¶(NMS)ï¼Œè¿‡æ»¤æ‰é‡å çš„é¢„æµ‹ï¼Œåªä¿ç•™ç½®ä¿¡åº¦æœ€é«˜çš„æ£€æµ‹ã€‚</p><p>åœ¨ä»¥ä¸‹çš„YOLOæ¨¡å‹ä¸­ï¼Œæœ¬æ–‡å°†ä½¿ç”¨Inputã€Backboneã€Neckå’ŒHeadæ¥æè¿°æ¶æ„ã€‚</p><h1 id="YOLOv1-2015"><a href="#YOLOv1-2015" class="headerlink" title="YOLOv1(2015)"></a>YOLOv1(2015)</h1><p>è®ºæ–‡åœ°å€ï¼š<a href="https://arxiv.org/pdf/1506.02640.pdf">https://arxiv.org/pdf/1506.02640.pdf</a></p><p>ä»£ç åœ°å€ï¼š<a href="https://github.com/AlexeyAB/darknet">https://github.com/AlexeyAB/darknet</a></p><p>You Only Look Once(YOLO)ï¼Œç”±Ross Girshickç­‰äººå‘è¡¨äºCVPR 2016ï¼Œåœ¨é‚£ä¸ªæ·±åº¦å­¦ä¹ ç›®æ ‡æ£€æµ‹å™¨çˆ†å‘çš„å¹´ä»£ï¼ŒYOLOä»R-CNNç³»åˆ—ã€SSDç³»åˆ—ã€EfficientDetç³»åˆ—ä¸­è„±é¢–è€Œå‡ºï¼Œå‘å±•æˆä¸ºæœ€å‡ºè‰²çš„ç›®æ ‡æ£€æµ‹ã€‚æ—¶è‡³ä»Šæ—¥ï¼Œå…¶ä»–ç³»åˆ—ç›®æ ‡æ£€æµ‹å™¨æ—©å·²é”€å£°åŒ¿è¿¹ï¼Œè€ŒYOLOå´åå£°å¤§å™ªï¼Œæˆä¸ºå·¥ä¸šç•Œã€å­¦æœ¯ç•Œçš„å® å„¿ã€‚<br>åœ¨YOLOv1å‡ºç°ä¹‹å‰ï¼ŒR-CNNç³»åˆ—ç®—æ³•åœ¨ç›®æ ‡æ£€æµ‹é¢†åŸŸç‹¬å é³Œå¤´ã€‚R-CNNç³»åˆ—æ£€æµ‹ç²¾åº¦é«˜ï¼Œä½†æ˜¯ç”±äºå…¶ç½‘ç»œç»“æ„æ˜¯åŒé˜¶æ®µçš„ç‰¹ç‚¹ï¼Œä½¿å¾—å®ƒçš„æ£€æµ‹é€Ÿåº¦ä¸èƒ½æ»¡è¶³å®æ—¶æ€§ï¼Œé¥±å—è¯Ÿç—…ã€‚ä¸ºäº†æ‰“ç ´è¿™ä¸€åƒµå±€ï¼Œå•é˜¶æ®µçš„ç›®æ ‡æ£€æµ‹ç½‘ç»œYOLOæ¨ªç©ºå‡ºä¸–ï¼Œå®ƒçš„æ£€æµ‹é€Ÿåº¦éå¸¸å¿«ï¼Œæ¯ç§’å¯ä»¥å¤„ç†45å¸§å›¾ç‰‡ï¼Œèƒ½å¤Ÿè½»æ¾åœ°å®ç°å®æ—¶æ£€æµ‹ã€‚</p><ul><li>ç½‘ç»œç»“æ„<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image.png" alt="alt text"><br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-1.png" alt="alt text"></li></ul><p>è¾“å…¥ç»´åº¦ï¼š448Ã—448Ã—3 (ä¸‰é€šé“448Ã—448åƒç´ å›¾åƒ)<br>è¾“å‡ºç»´åº¦ï¼š7Ã—7Ã—30 (7Ã—7ä¸ªç½‘æ ¼ï¼Œ20ä¸ªç±»åˆ«(VOC2012æ•°æ®é›†)+2ä¸ªBox(x,y,w,h,c))</p><p>å®ç°è¿‡ç¨‹<br>YOLO çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯æŠŠç›®æ ‡æ£€æµ‹è½¬å˜æˆä¸€ä¸ªå›å½’é—®é¢˜ï¼Œåˆ©ç”¨æ•´å¼ å›¾ä½œä¸ºç½‘ç»œçš„è¾“å…¥ï¼Œä»…ä»…ç»è¿‡ä¸€ä¸ªç¥ç»ç½‘ç»œï¼Œå¾—åˆ°è¾¹ç•Œæ¡†(bounding box)çš„ä½ç½®åŠå…¶æ‰€å±çš„ç±»åˆ«ã€‚</p><p>1.å°†ä¸€å¹…å›¾åƒåˆ†æˆ SÃ—Sä¸ªç½‘æ ¼ï¼Œå¦‚æœæŸä¸ªç›®æ ‡çš„ä¸­å¿ƒè½åœ¨è¿™ä¸ªç½‘æ ¼ä¸­ï¼Œåˆ™è¿™ä¸ªç½‘æ ¼å°±è´Ÿè´£é¢„æµ‹è¿™ä¸ªç›®æ ‡ã€‚<br>2.æ¯ä¸ªç½‘æ ¼è¦é¢„æµ‹ B ä¸ªè¾¹ç•Œæ¡†ï¼Œæ¯ä¸ªè¾¹ç•Œæ¡†è¦é¢„æµ‹ (x, y, w, h) å’Œ confidence å…±5ä¸ªå€¼ã€‚<br>3.æ¯ä¸ªç½‘æ ¼è¿˜è¦é¢„æµ‹ä¸€ä¸ªç±»åˆ«ä¿¡æ¯ï¼Œè®°ä¸º C ä¸ªç±»ã€‚<br>4.æ€»çš„æ¥è¯´ï¼ŒSÃ—S ä¸ªç½‘æ ¼ï¼Œæ¯ä¸ªç½‘æ ¼è¦é¢„æµ‹ Bä¸ªè¾¹ç•Œæ¡† ï¼Œè¿˜è¦é¢„æµ‹ C ä¸ªç±»ã€‚ç½‘ç»œè¾“å‡ºå°±æ˜¯ä¸€ä¸ª S Ã— S Ã— (5Ã—B+C) çš„å¼ é‡ã€‚ </p><p>åœ¨å®é™…è¿‡ç¨‹ä¸­ï¼ŒYOLOv1æŠŠä¸€å¼ å›¾ç‰‡åˆ’åˆ†ä¸ºäº†7Ã—7ä¸ªç½‘æ ¼ï¼Œå¹¶ä¸”æ¯ä¸ªç½‘æ ¼é¢„æµ‹2ä¸ªBoxï¼Œ20ä¸ªç±»åˆ«ã€‚å³S&#x3D;7ï¼ŒB&#x3D;2ï¼ŒC&#x3D;20ã€‚é‚£ä¹ˆç½‘ç»œè¾“å‡ºçš„shapeä¹Ÿå°±æ˜¯ï¼š7Ã—7Ã—30ã€‚</p><ul><li><p>Input<br>ç½‘ç»œè¾“å…¥ï¼š448Ã—448Ã—3 (ä¸‰é€šé“448Ã—448åƒç´ å›¾åƒ)ã€‚å…¶ä¸­è®­ç»ƒæ˜¯224Ã—224ï¼Œæµ‹è¯•æ˜¯448Ã—448ã€‚</p></li><li><p>Backbone<br>GoogLeNet(24Ã—Conv+2Ã—FC+reshape)ï¼Œæ·»åŠ Dropouté˜²æ­¢è¿‡æ‹Ÿåˆï¼›æœ€åä¸€å±‚ä½¿ç”¨çº¿æ€§æ¿€æ´»å‡½æ•°ï¼Œå…¶ä½™å±‚éƒ½ä½¿ç”¨ReLUæ¿€æ´»å‡½æ•°ã€‚</p></li><li><p>Neck<br>æ— </p></li><li><p>Head<br>è¾“å‡ºç»´åº¦ï¼š7Ã—7Ã—30 (7Ã—7ä¸ªç½‘æ ¼ï¼Œ20ä¸ªç±»åˆ«(VOC2012æ•°æ®é›†)+2ä¸ªBox(x,y,w,h,c))</p></li></ul><p>æŸå¤±ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼šä½ç½®é¢„æµ‹æŸå¤±ï¼šMSEï¼Œç½®ä¿¡åº¦é¢„æµ‹æŸå¤±ï¼šMSEï¼Œç±»åˆ«é¢„æµ‹æŸå¤±ï¼šMSEã€‚</p><ul><li>æ€§èƒ½è¡¨ç°<br>æ•°æ®é›†ï¼šPASCAL VOC 2007ï¼ŒGPUç¡¬ä»¶ï¼šNvidiaGeforce GTX Titan Xï¼ŒYOLOv1å¯¹æ¯”åŒæ—¶æœŸç®—æ³•æ€§èƒ½æŒ‡æ ‡ï¼š<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-20.png" alt="alt text"></li></ul><p>YOLOv2(2016)</p><p>è®ºæ–‡åœ°å€ï¼š<a href="https://arxiv.org/pdf/1612.08242.pdf">https://arxiv.org/pdf/1612.08242.pdf</a></p><p>ä»£ç åœ°å€ï¼š<a href="https://github.com/AlexeyAB/darknet">https://github.com/AlexeyAB/darknet</a></p><p>æ—¶éš”ä¸€å¹´ï¼ŒYOLOv2éš†é‡ç™»åœºï¼Œåœ¨ YOLOv1 çš„åŸºç¡€ä¸Šï¼Œè¿›è¡Œäº†å¤§é‡æ”¹è¿›ï¼Œé‡ç‚¹è§£å†³YOLOv1å¬å›ç‡å’Œå®šä½ç²¾åº¦æ–¹é¢çš„ä¸è¶³ã€‚</p><ul><li>ç½‘ç»œç»“æ„<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-2.png" alt="alt text"></li></ul><p>è¾“å…¥ç»´åº¦ï¼š416Ã—416Ã—3 (ä¸‰é€šé“416Ã—416åƒç´ å›¾åƒ)<br>è¾“å‡ºç»´åº¦ï¼š13Ã—13Ã—125 (13Ã—13ä¸ªç½‘æ ¼ï¼Œ5ä¸ªBox(20ä¸ªç±»åˆ«,x,y,w,h,c))</p><p>æ”¹è¿›ç»†èŠ‚</p><ul><li><p>Input<br>ç½‘ç»œè¾“å…¥ï¼š416Ã—416Ã—3 (ä¸‰é€šé“416Ã—416åƒç´ å›¾åƒ)</p></li><li><p>Backbone<br>Darknet-19(19Ã—Conv+5Ã—MaxPool+AvgPool+Softmax)ï¼Œæ•´ä½“ä¸Šé‡‡ç”¨äº†19ä¸ªå·ç§¯å±‚ï¼Œ5ä¸ªæ± åŒ–å±‚ï¼Œæ²¡æœ‰FCå±‚ï¼Œæ¯ä¸€ä¸ªå·ç§¯åéƒ½ä½¿ç”¨BNå’ŒReLUé˜²æ­¢è¿‡æ‹Ÿåˆ(èˆå¼ƒdropout)ï¼›</p></li></ul><p>é€Ÿåº¦å¿«äº†è¿‘6å€ã€‚åœ¨æ¯ä¸€å±‚å·ç§¯åï¼Œéƒ½å¢åŠ äº†BNè¿›è¡Œé¢„å¤„ç†ï¼ŒBN å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†(ç»Ÿä¸€æ ¼å¼ã€å‡è¡¡åŒ–ã€å»å™ªç­‰)èƒ½å¤Ÿå¤§å¤§æé«˜è®­ç»ƒé€Ÿåº¦ï¼Œæå‡è®­ç»ƒæ•ˆæœã€‚é‡‡ç”¨äº†é™ç»´çš„æ€æƒ³ï¼ŒæŠŠ1Ã—1çš„å·ç§¯ç½®äº3Ã—3ä¹‹é—´ï¼Œç”¨æ¥å‹ç¼©ç‰¹å¾ã€‚</p><ul><li><p>Neck<br>æå‡ºpassthroughå±‚ï¼šæŠŠé«˜åˆ†è¾¨ç‡ç‰¹å¾æ‹†åˆ†å åŠ å¤§åˆ°ä½åˆ†è¾¨ç‡ç‰¹å¾ä¸­ï¼Œè¿›è¡Œç‰¹å¾èåˆï¼Œæœ‰åˆ©äºå°ç›®æ ‡çš„æ£€æµ‹ï¼›é€Ÿåº¦æ–¹é¢ï¼Œç›¸æ¯”äºVGG çš„306.9äº¿æ¬¡ï¼Œ<br>PassThroughå±‚çš„æ•´ç†æ“ä½œæµç¨‹å¦‚ä¸‹ï¼š<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-15.png" alt="alt text"><br>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒåŸç‰¹å¾å›¾æ˜¯4x4x3çš„ä¸€ä¸ª3ç»´çŸ©é˜µï¼Œé‡‡ç”¨<code>äº¤å‰å–æ•°</code>çš„æ–¹æ³•ï¼Œå°†ç›¸åŒçš„æ•°å•ç‹¬å½¢æˆä¸€ä¸ª2x2çš„ä¸‰ç»´çŸ©é˜µï¼Œæœ€ç»ˆä¼šæœ‰4ä¸ªè¿™æ ·çš„çŸ©é˜µï¼Œä¹Ÿå°±æ˜¯å‰é¢æ‰€è¯´çš„ç‰¹å¾å›¾é•¿å®½å‡åŠï¼Œæ·±åº¦å¢åŠ 4å€ã€‚è¿™æ ·å°±å’Œæ›´æ·±çš„ç‰¹å¾å›¾ä¿æŒç›¸åŒçš„å°ºå¯¸ï¼Œå¯ä»¥è¿›è¡Œèåˆï¼Œå¢åŠ ç‰¹å¾çš„ä¸°å¯Œæ€§ã€‚<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-16.png" alt="alt text"></p></li><li><p>Head<br>è¾“å‡ºç»´åº¦ï¼š13Ã—13Ã—125 (13Ã—13ä¸ªç½‘æ ¼ï¼Œ5ä¸ªBox(20ä¸ªç±»åˆ«,x,y,w,h,c))</p></li></ul><p>æŸå¤±å‡½æ•°ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼šä½ç½®é¢„æµ‹æŸå¤±ï¼šMSEï¼Œç½®ä¿¡åº¦é¢„æµ‹æŸå¤±ï¼šMSEï¼Œç±»åˆ«é¢„æµ‹æŸå¤±ï¼šMSEã€‚</p><p>å¼•å…¥äº† Anchors box æœºåˆ¶ï¼Œä½¿ç”¨ K-means èšç±»æ–¹æ³•å¾—åˆ° Anchor Box çš„å¤§å°ï¼Œé€‰æ‹©å…·æœ‰ä»£è¡¨æ€§çš„å°ºå¯¸çš„Anchor Boxè¿›è¡Œä¸€å¼€å§‹çš„åˆå§‹åŒ–ï¼Œé€šè¿‡æå‰ç­›é€‰å¾—åˆ°çš„å…·æœ‰ä»£è¡¨æ€§å…ˆéªŒæ¡†Anchorsï¼Œä½¿å¾—ç½‘ç»œåœ¨è®­ç»ƒæ—¶æ›´å®¹æ˜“æ”¶æ•›ã€‚</p><ul><li><ul><li>æ€§èƒ½è¡¨ç°<br>æ•°æ®é›†ï¼šPASCAL VOC 2007ï¼ŒGPUç¡¬ä»¶ï¼šNvidia Geforce GTX Titan Xï¼ŒYOLOv2å¯¹æ¯”åŒæ—¶æœŸç®—æ³•æ€§èƒ½æŒ‡æ ‡ï¼š<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-21.png" alt="alt text"></li></ul></li></ul><h1 id="YOLOv3-2018"><a href="#YOLOv3-2018" class="headerlink" title="YOLOv3(2018)"></a>YOLOv3(2018)</h1><p>è®ºæ–‡åœ°å€ï¼š<a href="https://arxiv.org/pdf/1804.02767.pdf">https://arxiv.org/pdf/1804.02767.pdf</a></p><p>ä»£ç åœ°å€ï¼š<a href="https://github.com/AlexeyAB/darknet">https://github.com/AlexeyAB/darknet</a></p><p>åœ¨YOLOv2çš„åŸºç¡€ä¸Šè¿›è¡Œäº†æ”¹è¿›ï¼Œå¼•å…¥äº†ä¸€ç³»åˆ—çš„å˜åŒ–ä»¥æé«˜æ£€æµ‹æ€§èƒ½ã€‚YOLOv3çš„åˆ›æ–°ä¸æ”¹è¿›åŒ…æ‹¬ï¼šè¿›è¡Œå¤šå°ºåº¦è®­ç»ƒï¼Œç½‘ç»œè¾“å‡ºä¸‰ä¸ªå°ºåº¦çš„feature mapï¼›è®¾è®¡äº†æ–°çš„ç½‘ç»œç»“æ„ï¼Œä½¿ç”¨FPNç½‘ç»œç‰¹å¾é‡‘å­—å¡”è¿›è¡Œç‰¹å¾èåˆï¼Œæ·»åŠ äº†æ®‹å·®è¿æ¥æ¨¡å—ï¼›åœ¨åˆ†ç±»éƒ¨åˆ†ä½¿ç”¨äº†Logisticæ¥ä»£æ›¿ä¹‹å‰çš„softmaxã€‚ç”±äºä»–åå¯¹å°†YOLOç”¨äºå†›äº‹å’Œéšç§çª¥æ¢ï¼Œ2020å¹´2æœˆå®£å¸ƒåœæ­¢æ›´æ–°YOLOã€‚</p><ul><li>ç½‘ç»œç»“æ„<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-18.png" alt="alt text"></li></ul><p>è¾“å…¥ç»´åº¦ï¼š416Ã—416Ã—3 (ä¸‰é€šé“416Ã—416åƒç´ å›¾åƒ)<br>è¾“å‡ºç»´åº¦ï¼šNÃ—NÃ—255 (NÃ—Nä¸ªç½‘æ ¼(ä½¿ç”¨äº†å¤šå°ºåº¦ï¼ŒNå–13&#x2F;26&#x2F;52)ï¼Œ3ä¸ªBox(80ä¸ªç±»åˆ«,x,y,w,h,c))</p><p>æ”¹è¿›ç»†èŠ‚</p><ul><li><p>Input<br>ç½‘ç»œè¾“å…¥ï¼š416Ã—416Ã—3 (ä¸‰é€šé“416Ã—416åƒç´ å›¾åƒ)</p></li><li><p>Backbone<br>Darknet-53ï¼ŒDarknet-53ä¸»è¦ç”±1Ã—1å’Œ3Ã—3çš„å·ç§¯å±‚ç»„æˆï¼Œæ¯ä¸ªå·ç§¯å±‚ä¹‹ååŒ…å«ä¸€ä¸ªæ‰¹é‡å½’ä¸€åŒ–å±‚å’Œä¸€ä¸ªLeaky ReLUï¼ŒåŠ å…¥è¿™ä¸¤ä¸ªéƒ¨åˆ†çš„ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢è¿‡æ‹Ÿåˆã€‚å·ç§¯å±‚ã€æ‰¹é‡å½’ä¸€åŒ–å±‚ä»¥åŠLeaky ReLUå…±åŒç»„æˆDarknet-53ä¸­çš„åŸºæœ¬å·ç§¯å•å…ƒCBLã€‚å› ä¸ºåœ¨Darknet-53ä¸­å…±åŒ…å«53ä¸ªè¿™æ ·çš„CBLï¼Œæ‰€ä»¥ç§°å…¶ä¸ºDarknet-53ã€‚</p></li><li><p>Neck<br>FPN(å¤šå°ºåº¦æ£€æµ‹ï¼Œç‰¹å¾èåˆ)</p></li><li><p>Head<br>è¾“å‡ºç»´åº¦ï¼šNÃ—NÃ—255 (NÃ—Nä¸ªç½‘æ ¼(ä½¿ç”¨äº†å¤šå°ºåº¦ï¼ŒNå–13&#x2F;26&#x2F;52)ï¼Œ3ä¸ªBox(80ä¸ªç±»åˆ«,x,y,w,h,c))</p></li></ul><p>æŸå¤±ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼š ä½ç½®é¢„æµ‹æŸå¤±ï¼šMSEï¼Œç½®ä¿¡åº¦é¢„æµ‹æŸå¤±ï¼šCEï¼Œç±»åˆ«é¢„æµ‹æŸå¤±ï¼šCEã€‚</p><p>å¤šæ ‡ç­¾é¢„æµ‹(softmaxåˆ†ç±»å‡½æ•°æ›´æ”¹ä¸ºlogisticåˆ†ç±»å™¨)ï¼›</p><ul><li>æ€§èƒ½è¡¨ç°<br>æ•°æ®é›†ï¼šCOCOï¼ŒGPUç¡¬ä»¶ï¼šNvidia Geforce GTX Titan Xï¼ŒYOLOv3å¯¹æ¯”åŒæ—¶æœŸç®—æ³•æ€§èƒ½æŒ‡æ ‡ï¼š<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-22.png" alt="alt text"></li></ul><h1 id="YOLOv4-2020"><a href="#YOLOv4-2020" class="headerlink" title="YOLOv4(2020)"></a>YOLOv4(2020)</h1><p>è®ºæ–‡åœ°å€ï¼š<a href="https://arxiv.org/pdf/2004.10934.pdf">https://arxiv.org/pdf/2004.10934.pdf</a></p><p>ä»£ç åœ°å€ï¼š<a href="https://github.com/WongKinYiu/PyTorch_YOLOv4">https://github.com/WongKinYiu/PyTorch_YOLOv4</a></p><p>ä¸¤å¹´è¿‡å»äº†ï¼ŒYOLOæ²¡æœ‰æ–°ç‰ˆæœ¬ã€‚ç›´åˆ°2020å¹´4æœˆï¼ŒAlexey Bochkovskiyã€Chien-Yao Wangå’ŒHong-Yuan Mark Liaoåœ¨ArXivå‘å¸ƒäº†YOLOv4ã€‚èµ·åˆï¼Œä¸åŒçš„ä½œè€…æå‡ºä¸€ä¸ªæ–°çš„YOLO â€œå®˜æ–¹ â€œç‰ˆæœ¬è®©äººæ„Ÿè§‰å¾ˆå¥‡æ€ªï¼›ç„¶è€Œï¼ŒYOLOv4ä¿æŒäº†ç›¸åŒçš„YOLOç†å¿µâ€”â€”å®æ—¶ã€å¼€æºã€ç«¯åˆ°ç«¯å’ŒDarkNetæ¡†æ¶â€”â€”è€Œä¸”æ”¹è¿›éå¸¸ä»¤äººæ»¡æ„ï¼Œç¤¾åŒºè¿…é€Ÿæ¥å—äº†è¿™ä¸ªç‰ˆæœ¬ä½œä¸ºå®˜æ–¹çš„YOLOv4ã€‚</p><ul><li>ç½‘ç»œç»“æ„<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-19.png" alt="alt text"></li></ul><p>è¾“å…¥ç»´åº¦ï¼š608Ã—608Ã—3 (ä¸‰é€šé“608Ã—608åƒç´ å›¾åƒ)<br>è¾“å‡ºç»´åº¦ï¼šNÃ—NÃ—255 (NÃ—Nä¸ªç½‘æ ¼(ä½¿ç”¨äº†å¤šå°ºåº¦ï¼ŒNå–19&#x2F;38&#x2F;76)ï¼Œ3ä¸ªBox(80ä¸ªç±»åˆ«,x,y,w,h,c))</p><ul><li><p>Input<br>resize(608Ã—608Ã—3)ã€Mosaicæ•°æ®å¢å¼ºã€SATè‡ªå¯¹æŠ—è®­ç»ƒæ•°æ®å¢å¼º</p></li><li><p>Backbone<br>CSPDarknet53ï¼ŒCSPæ¨¡å—ï¼šæ›´ä¸°å¯Œçš„æ¢¯åº¦ç»„åˆï¼ŒåŒæ—¶å‡å°‘è®¡ç®—é‡ã€è·¨å°æ‰¹é‡æ ‡å‡†åŒ–(CmBN)å’ŒMishæ¿€æ´»ã€DropBlockæ­£åˆ™åŒ–(éšæœºåˆ é™¤ä¸€å¤§å—ç¥ç»å…ƒ)ã€é‡‡ç”¨æ”¹è¿›SAMæ³¨æ„åŠ›æœºåˆ¶ï¼šåœ¨ç©ºé—´ä½ç½®ä¸Šæ·»åŠ æƒé‡ï¼›</p></li></ul><p>ä½¿ç”¨MIshæ¿€æ´»å‡½æ•°ä»£æ›¿äº†åŸæ¥çš„Leaky ReLUï¼ŒSPPæœ€åˆçš„è®¾è®¡ç›®çš„æ˜¯ç”¨æ¥ä½¿å·ç§¯ç¥ç»ç½‘ç»œä¸å—å›ºå®šè¾“å…¥å°ºå¯¸çš„é™åˆ¶ã€‚åœ¨YOLOv4ä¸­ï¼Œä½œè€…å¼•å…¥SPPï¼Œæ˜¯å› ä¸ºå®ƒæ˜¾è‘—åœ°å¢åŠ äº†æ„Ÿå—é‡ï¼Œåˆ†ç¦»å‡ºäº†æœ€é‡è¦çš„ä¸Šä¸‹æ–‡ç‰¹å¾ï¼Œ</p><ul><li><p>Neck<br>SPP(é€šè¿‡æœ€å¤§æ± åŒ–å°†ä¸åŒå°ºå¯¸çš„è¾“å…¥å›¾åƒå˜å¾—å°ºå¯¸ä¸€è‡´)ã€PANnet(å¯¹åŸPANetæ–¹æ³•è¿›è¡Œäº†ä¿®æ”¹, ä½¿ç”¨å¼ é‡è¿æ¥(concat)ä»£æ›¿äº†åŸæ¥çš„æ·å¾„è¿æ¥(shortcut connection)ã€‚)PANetçš„ç¤ºæ„å›¾ï¼Œä¸»è¦åŒ…å«FPNã€Bottom-up path augmentationã€Adaptive feature poolingã€Fully-connected fusionå››ä¸ªéƒ¨åˆ†ã€‚</p></li><li><p>Head<br>è¾“å‡ºç»´åº¦ï¼šNÃ—NÃ—255 (NÃ—Nä¸ªç½‘æ ¼(ä½¿ç”¨äº†å¤šå°ºåº¦ï¼ŒNå–19&#x2F;38&#x2F;76)ï¼Œ3ä¸ªBox(80ä¸ªç±»åˆ«,x,y,w,h,c))</p></li></ul><p>æŸå¤±ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼šä½ç½®é¢„æµ‹æŸå¤±ï¼šCIoU Lossï¼Œç½®ä¿¡åº¦é¢„æµ‹æŸå¤±ï¼šäº¤å‰ç†µæŸå¤±ï¼Œç±»åˆ«é¢„æµ‹æŸå¤±ï¼šäº¤å‰ç†µæŸå¤±ã€‚</p><p>DIoU_nms</p><ul><li>æ€§èƒ½è¡¨ç°<br>æ•°æ®é›†ï¼šCOCOï¼ŒGPUç¡¬ä»¶ï¼šNvidia Tesla V100ï¼ŒYOLOv4å¯¹æ¯”åŒæ—¶æœŸç®—æ³•æ€§èƒ½æŒ‡æ ‡ï¼š<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-23.png" alt="alt text"></li></ul><h1 id="YOLOv5-2020"><a href="#YOLOv5-2020" class="headerlink" title="YOLOv5(2020)"></a>YOLOv5(2020)</h1><p>è®ºæ–‡åœ°å€ï¼šæ— <br>ä»£ç åœ°å€ï¼š<a href="https://github.com/ultralytics/yolov5">https://github.com/ultralytics/yolov5</a></p><p>YOLOv5[72]æ˜¯åœ¨YOLOv4ä¹‹åå‡ ä¸ªæœˆäº2020å¹´ç”±Glenn Jocherå‘å¸ƒã€‚<br>YOLOv5æ˜¯ä¸€ä¸ªåœ¨COCOæ•°æ®é›†ä¸Šé¢„è®­ç»ƒçš„ç‰©ä½“æ£€æµ‹æ¶æ„å’Œæ¨¡å‹ç³»åˆ—ï¼Œå®ƒä»£è¡¨äº†Ultralyticså¯¹æœªæ¥è§†è§‰AIæ–¹æ³•çš„å¼€æºç ”ç©¶ï¼Œå…¶ä¸­åŒ…å«äº†ç»è¿‡æ•°åƒå°æ—¶çš„ç ”ç©¶å’Œå¼€å‘è€Œå½¢æˆçš„ç»éªŒæ•™è®­å’Œæœ€ä½³å®è·µã€‚<br>YOLOv5æ˜¯YOLOç³»åˆ—çš„ä¸€ä¸ªå»¶ç”³ï¼Œæ‚¨ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯åŸºäºYOLOv3ã€YOLOv4çš„æ”¹è¿›ä½œå“ã€‚YOLOv5æ²¡æœ‰ç›¸åº”çš„è®ºæ–‡è¯´æ˜ï¼Œä½†æ˜¯ä½œè€…åœ¨Githubä¸Šç§¯æåœ°å¼€æ”¾æºä»£ç ï¼Œé€šè¿‡å¯¹æºç åˆ†æï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å¾ˆå¿«åœ°äº†è§£YOLOv5çš„ç½‘ç»œæ¶æ„å’Œå·¥ä½œåŸç†ã€‚</p><ul><li>ç½‘ç»œç»“æ„<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-24.png" alt="alt text"></li></ul><p>è¾“å…¥ç»´åº¦ï¼š640Ã—640Ã—3 (ä¸‰é€šé“640Ã—640åƒç´ å›¾åƒ)<br>è¾“å‡ºç»´åº¦ï¼šNÃ—NÃ—255 (NÃ—Nä¸ªç½‘æ ¼(ä½¿ç”¨äº†å¤šå°ºåº¦ï¼ŒNå–20&#x2F;40&#x2F;80)ï¼Œ3ä¸ªBox(80ä¸ªç±»åˆ«,x,y,w,h,c))</p><ul><li>Input<br>ç½‘ç»œè¾“å…¥ï¼š640Ã—640Ã—3 (ä¸‰é€šé“640Ã—640åƒç´ å›¾åƒ)</li></ul><p>YOLOv5é‡‡ç”¨äº†ç°åº¦å¡«å……çš„æ–¹å¼ç»Ÿä¸€è¾“å…¥å°ºå¯¸ï¼Œé¿å…äº†ç›®æ ‡å˜å½¢çš„é—®é¢˜ã€‚ç°åº¦å¡«å……çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯å°†åŸå›¾çš„é•¿å®½ç­‰æ¯”ç¼©æ”¾å¯¹åº”ç»Ÿä¸€å°ºå¯¸ï¼Œç„¶åå¯¹äºç©ºç™½éƒ¨åˆ†ç”¨ç°è‰²å¡«å……ã€‚</p><ul><li><p>Backbone<br>CSPDarknet53(CSPæ¨¡å—ï¼Œæ¯ä¸€ä¸ªå·ç§¯å±‚åéƒ½ä½¿ç”¨BNå’ŒLeaky ReLUé˜²æ­¢è¿‡æ‹Ÿåˆï¼ŒFocusæ¨¡å—)ï¼›<br>Focus ç»“æ„å¼•å…¥äº†YOLOv5ï¼Œç”¨äºç›´æ¥å¤„ç†è¾“å…¥çš„å›¾ç‰‡ï¼Œé€šè¿‡é™ç»´å’Œå‹ç¼©è¾“å…¥ç‰¹å¾å›¾ï¼Œä»è€Œå‡å°‘è®¡ç®—é‡å’Œæé«˜æ„Ÿå—é‡ï¼ŒåŒæ—¶æé«˜ç›®æ ‡æ£€æµ‹çš„ç²¾åº¦å’Œæ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›ã€‚</p></li><li><p>Neck<br>SPPã€PAN</p></li><li><p>Head<br>è¾“å‡ºç»´åº¦ï¼šNÃ—NÃ—255 (NÃ—Nä¸ªç½‘æ ¼(ä½¿ç”¨äº†å¤šå°ºåº¦ï¼ŒNå–20&#x2F;40&#x2F;80)ï¼Œ3ä¸ªBox(80ä¸ªç±»åˆ«,x,y,w,h,c))</p></li></ul><p>æŸå¤±ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼šä½ç½®é¢„æµ‹æŸå¤±ï¼šCIoU Lossï¼Œç½®ä¿¡åº¦é¢„æµ‹æŸå¤±ï¼šäº¤å‰ç†µæŸå¤±ï¼Œç±»åˆ«é¢„æµ‹æŸå¤±ï¼šäº¤å‰ç†µæŸå¤±ã€‚</p><p>æ¯æ¬¡è®­ç»ƒæ—¶ï¼Œè‡ªé€‚åº”çš„è®¡ç®—ä¸åŒè®­ç»ƒé›†ä¸­çš„æœ€ä½³é”šæ¡†å€¼ã€‚</p><ul><li>æ€§èƒ½è¡¨ç°<br>æ•°æ®é›†ï¼šCOCOï¼ŒGPUç¡¬ä»¶ï¼šNvidia Tesla V100ï¼ŒYOLOv5å¯¹æ¯”åŒæ—¶æœŸç®—æ³•æ€§èƒ½æŒ‡æ ‡ï¼š<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-25.png" alt="alt text"></li></ul><h1 id="YOLOv6-2020"><a href="#YOLOv6-2020" class="headerlink" title="YOLOv6(2020)"></a>YOLOv6(2020)</h1><p>è®ºæ–‡åœ°å€ï¼š<a href="https://arxiv.org/pdf/2209.02976.pdf">https://arxiv.org/pdf/2209.02976.pdf</a></p><p>ä»£ç åœ°å€ï¼š<a href="https://github.com/meituan/YOLOv6">https://github.com/meituan/YOLOv6</a></p><p>YOLOv6 æ˜¯ç¾å›¢è§†è§‰æ™ºèƒ½éƒ¨ç ”å‘çš„ä¸€æ¬¾ç›®æ ‡æ£€æµ‹æ¡†æ¶ï¼Œè‡´åŠ›äºå·¥ä¸šåº”ç”¨ã€‚æœ¬æ¡†æ¶åŒæ—¶ä¸“æ³¨äºæ£€æµ‹çš„ç²¾åº¦å’Œæ¨ç†æ•ˆç‡ï¼Œåœ¨å·¥ä¸šç•Œå¸¸ç”¨çš„å°ºå¯¸æ¨¡å‹ä¸­ï¼šYOLOv6-nano åœ¨ COCO ä¸Šç²¾åº¦å¯è¾¾ 35.0% APï¼Œåœ¨ T4 ä¸Šæ¨ç†é€Ÿåº¦å¯è¾¾ 1242 FPSï¼›YOLOv6-s åœ¨ COCO ä¸Šç²¾åº¦å¯è¾¾ 43.1% APï¼Œåœ¨ T4 ä¸Šæ¨ç†é€Ÿåº¦å¯è¾¾ 520 FPSã€‚åœ¨éƒ¨ç½²æ–¹é¢ï¼ŒYOLOv6 æ”¯æŒ GPU(TensorRT)ã€CPU(OPENVINO)ã€ARM(MNNã€TNNã€NCNN)ç­‰ä¸åŒå¹³å°çš„éƒ¨ç½²ï¼Œæå¤§åœ°ç®€åŒ–å·¥ç¨‹éƒ¨ç½²æ—¶çš„é€‚é…å·¥ä½œã€‚</p><ul><li>ç½‘ç»œç»“æ„<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-26.png" alt="alt text"></li></ul><p>è¾“å…¥ç»´åº¦ï¼š640Ã—640Ã—3 (ä¸‰é€šé“640Ã—640åƒç´ å›¾åƒ)<br>è¾“å‡ºç»´åº¦ï¼šNÃ—NÃ—85 (NÃ—Nä¸ªç½‘æ ¼(ä½¿ç”¨äº†å¤šå°ºåº¦ï¼ŒNå–20&#x2F;40&#x2F;80)ï¼Œ1ä¸ªBox(80ä¸ªç±»åˆ«,x,y,w,h,c))</p><ul><li><p>Input<br>ç½‘ç»œè¾“å…¥ï¼š640Ã—640Ã—3 (ä¸‰é€šé“640Ã—640åƒç´ å›¾åƒ)</p></li><li><p>Backbone<br>EfficientRep Backbone å’Œ Rep-PAN Neckï¼Œå…¶ä¸»è¦è´¡çŒ®ç‚¹åœ¨äºï¼š<br>ï¬å¼•å…¥äº† RepVGG style ç»“æ„ã€‚<br>ï¬åŸºäºç¡¬ä»¶æ„ŸçŸ¥æ€æƒ³é‡æ–°è®¾è®¡äº† Backbone å’Œ Neckã€‚ RepVGG Style ç»“æ„æ˜¯ä¸€ç§åœ¨è®­ç»ƒæ—¶å…·æœ‰å¤šåˆ†æ”¯æ‹“æ‰‘ï¼Œè€Œåœ¨å®é™…éƒ¨ç½²æ—¶å¯ä»¥ç­‰æ•ˆèåˆä¸ºå•ä¸ª 3x3 å·ç§¯çš„ä¸€ç§å¯é‡å‚æ•°åŒ–çš„ç»“æ„(èåˆè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤º)ã€‚é€šè¿‡èåˆæˆçš„ 3x3 å·ç§¯ç»“æ„ï¼Œå¯ä»¥æœ‰æ•ˆåˆ©ç”¨è®¡ç®—å¯†é›†å‹ç¡¬ä»¶è®¡ç®—èƒ½åŠ›(æ¯”å¦‚ GPU)ï¼ŒåŒæ—¶ä¹Ÿå¯è·å¾— GPU&#x2F;CPU ä¸Šå·²ç»é«˜åº¦ä¼˜åŒ–çš„ NVIDIA cuDNN å’Œ Intel MKL ç¼–è¯‘æ¡†æ¶çš„å¸®åŠ©ã€‚ </p></li><li><p>Neck<br>å°†åŸå§‹çš„ SPPF ä¼˜åŒ–è®¾è®¡ä¸ºæ›´åŠ é«˜æ•ˆçš„ SimSPPFã€‚</p></li></ul><p>Rep-PAN åŸºäº PANæ‹“æ‰‘æ–¹å¼ï¼Œç”¨ RepBlock æ›¿æ¢äº† YOLOv5 ä¸­ä½¿ç”¨çš„ CSP-Blockï¼Œ</p><ul><li>Head<br>è¾“å‡ºç»´åº¦ï¼šNÃ—NÃ—85 (NÃ—Nä¸ªç½‘æ ¼(ä½¿ç”¨äº†å¤šå°ºåº¦ï¼ŒNå–20&#x2F;40&#x2F;80)ï¼Œ1ä¸ªBox(80ä¸ªç±»åˆ«,x,y,w,h,c))</li></ul><p>æŸå¤±ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼šä½ç½®é¢„æµ‹æŸå¤±ï¼šSIoU Lossï¼Œç½®ä¿¡åº¦é¢„æµ‹æŸå¤±ï¼šäº¤å‰ç†µæŸå¤±ï¼Œç±»åˆ«é¢„æµ‹æŸå¤±ï¼šäº¤å‰ç†µæŸå¤±ã€‚</p><p>DIoU_Nmsã€Efficient Decoupled Headã€SimOTAæ ‡ç­¾åˆ†é…ç­–ç•¥ï¼›<br>é‡‡ç”¨ Hybrid Channels ç­–ç•¥é‡æ–°è®¾è®¡äº†ä¸€ä¸ªæ›´é«˜æ•ˆçš„è§£è€¦å¤´ç»“æ„ï¼Œåœ¨ç»´æŒç²¾åº¦çš„åŒæ—¶é™ä½äº†å»¶æ—¶ï¼Œç¼“è§£äº†è§£è€¦å¤´ä¸­ 3x3 å·ç§¯å¸¦æ¥çš„é¢å¤–å»¶æ—¶å¼€é”€ã€‚</p><ul><li>æ€§èƒ½è¡¨ç°<br>æ•°æ®é›†ï¼šCOCOï¼ŒGPUç¡¬ä»¶ï¼šNvidia Tesla T4ï¼ŒYOLOv6å¯¹æ¯”åŒæ—¶æœŸç®—æ³•æ€§èƒ½æŒ‡æ ‡ï¼š<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-27.png" alt="alt text"></li></ul><p>YOLOv7(2022)</p><p>è®ºæ–‡åœ°å€ï¼š<a href="https://arxiv.org/pdf/2207.02696.pdf">https://arxiv.org/pdf/2207.02696.pdf</a></p><p>ä»£ç åœ°å€ï¼š<a href="https://github.com/WongKinYiu/yolov7">https://github.com/WongKinYiu/yolov7</a></p><p>å½“æ—¶ï¼Œåœ¨5 FPSåˆ°160 FPSçš„èŒƒå›´å†…ï¼Œå®ƒçš„é€Ÿåº¦å’Œå‡†ç¡®åº¦è¶…è¿‡äº†æ‰€æœ‰å·²çŸ¥çš„ç‰©ä½“æ£€æµ‹å™¨ã€‚</p><ul><li><p>ç½‘ç»œç»“æ„<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-28.png" alt="alt text"></p></li><li><p>Input<br>ç½‘ç»œè¾“å…¥ï¼š640Ã—640Ã—3 (ä¸‰é€šé“640Ã—640åƒç´ å›¾åƒ)<br>è¾“å‡ºç»´åº¦ï¼šNÃ—NÃ—85 (NÃ—Nä¸ªç½‘æ ¼(ä½¿ç”¨äº†å¤šå°ºåº¦ï¼ŒNå–20&#x2F;40&#x2F;80)ï¼Œ1ä¸ªBox(80ä¸ªç±»åˆ«,x,y,w,h,c))</p></li><li><p>Backbone<br>Darknet-53(CSPæ¨¡å—æ›¿æ¢äº†ELANæ¨¡å—ï¼›ä¸‹é‡‡æ ·å˜æˆMP2å±‚ï¼›æ¯ä¸€ä¸ªå·ç§¯å±‚åéƒ½ä½¿ç”¨BNå’ŒSiLUé˜²æ­¢è¿‡æ‹Ÿåˆ)ï¼›<br>ELAN ç”±å¤šä¸ª CBS æ„æˆï¼Œå…¶è¾“å…¥è¾“å‡ºç‰¹å¾å¤§å°ä¿æŒä¸å˜ï¼Œé€šé“æ•°åœ¨å¼€å§‹çš„ä¸¤ä¸ª CBS ä¼šæœ‰å˜åŒ–ï¼Œ åé¢çš„å‡ ä¸ªè¾“å…¥é€šé“éƒ½æ˜¯å’Œè¾“å‡ºé€šé“ä¿æŒä¸€è‡´çš„ï¼Œç»è¿‡æœ€åä¸€ä¸ª CBS è¾“å‡ºä¸ºéœ€è¦çš„é€šé“ã€‚</p></li><li><p>Neck<br>SPPã€PAN<br>å°† YOLOV5 ä¸­çš„ CSP æ¨¡å—æ¢æˆäº† ELAN-H æ¨¡å—ï¼Œ åŒæ—¶ä¸‹é‡‡æ ·å˜ä¸ºäº† MP2 å±‚ã€‚</p></li><li><p>Head<br>è¾“å‡ºç»´åº¦ï¼šNÃ—NÃ—85 (NÃ—Nä¸ªç½‘æ ¼(ä½¿ç”¨äº†å¤šå°ºåº¦ï¼ŒNå–20&#x2F;40&#x2F;80)ï¼Œ1ä¸ªBox(80ä¸ªç±»åˆ«,x,y,w,h,c))</p></li></ul><p>æŸå¤±ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼šä½ç½®é¢„æµ‹æŸå¤±ï¼šSIoU Lossï¼Œç½®ä¿¡åº¦é¢„æµ‹æŸå¤±ï¼šäº¤å‰ç†µæŸå¤±ï¼Œç±»åˆ«é¢„æµ‹æŸå¤±ï¼šäº¤å‰ç†µæŸå¤±ã€‚</p><p>CIoU_Lossã€DIoU_Nmsã€SimOTAæ ‡ç­¾åˆ†é…ç­–ç•¥ã€å¸¦è¾…åŠ©å¤´çš„è®­ç»ƒ(é€šè¿‡å¢åŠ è®­ç»ƒæˆæœ¬ï¼Œæå‡ç²¾åº¦ï¼ŒåŒæ—¶ä¸å½±å“æ¨ç†çš„æ—¶é—´)ï¼›<br>ç»è¿‡ RepConv è°ƒæ•´é€šé“æ•°ï¼Œæœ€åä½¿ç”¨ 1x1 å·ç§¯å»é¢„æµ‹ objectnessã€class å’Œ bbox ä¸‰éƒ¨åˆ†ã€‚RepConv åœ¨è®­ç»ƒå’Œæ¨ç†æ˜¯æœ‰ä¸€å®šçš„åŒºåˆ«ã€‚è®­ç»ƒæ—¶æœ‰ä¸‰ä¸ªåˆ†æ”¯çš„ç›¸åŠ è¾“å‡ºï¼Œéƒ¨ç½²æ—¶ä¼šå°†åˆ†æ”¯çš„å‚æ•°é‡å‚æ•°åŒ–åˆ°ä¸»åˆ†æ”¯ä¸Šã€‚</p><ul><li>æ€§èƒ½è¡¨ç°<br>æ•°æ®é›†ï¼šCOCOï¼ŒGPUç¡¬ä»¶ï¼šNvidia Tesla V100ï¼ŒYOLOv7å¯¹æ¯”åŒæ—¶æœŸç®—æ³•æ€§èƒ½æŒ‡æ ‡ï¼š<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-29.png" alt="alt text"></li></ul><h1 id="YOLOv8-2023"><a href="#YOLOv8-2023" class="headerlink" title="YOLOv8(2023)"></a>YOLOv8(2023)</h1><p>è®ºæ–‡åœ°å€ï¼š<br>ä»£ç åœ°å€ï¼š<a href="https://github.com/ultralytics/ultralytics">https://github.com/ultralytics/ultralytics</a></p><p>YOLOv8ç»§æ‰¿è‡ªYOLOv5ï¼Œåœ¨é€Ÿåº¦å’Œå‡†ç¡®æ€§æ–¹é¢å…·æœ‰æ— ä¸ä¼¦æ¯”çš„æ€§èƒ½ã€‚å…¶æµçº¿å‹è®¾è®¡ä½¿å…¶é€‚ç”¨äºå„ç§åº”ç”¨ï¼Œå¹¶å¯è½»æ¾é€‚åº”ä»è¾¹ç¼˜è®¾å¤‡åˆ°äº‘ API ç­‰ä¸åŒç¡¬ä»¶å¹³å°ã€‚ä½¿å…¶æˆä¸ºå„ç§ç‰©ä½“æ£€æµ‹ä¸è·Ÿè¸ªã€å®ä¾‹åˆ†å‰²ã€å›¾åƒåˆ†ç±»å’Œå§¿æ€ä¼°è®¡ä»»åŠ¡çš„ç»ä½³é€‰æ‹©ã€‚</p><ul><li>ç½‘ç»œç»“æ„<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-30.png" alt="alt text"></li></ul><p>ç½‘ç»œè¾“å…¥ï¼š640Ã—640Ã—3 (ä¸‰é€šé“640Ã—640åƒç´ å›¾åƒ)<br>è¾“å‡ºç»´åº¦ï¼šNÃ—NÃ—85 (NÃ—Nä¸ªç½‘æ ¼(ä½¿ç”¨äº†å¤šå°ºåº¦ï¼ŒNå–20&#x2F;40&#x2F;80)ï¼Œ1ä¸ªBox(80ä¸ªç±»åˆ«,x,y,w,h,c))</p><ul><li><p>Input<br>ç½‘ç»œè¾“å…¥ï¼š640Ã—640Ã—3 (ä¸‰é€šé“640Ã—640åƒç´ å›¾åƒ)</p></li><li><p>Backbone<br>Darknet-53(C3æ¨¡å—æ¢æˆäº†C2Fæ¨¡å—)</p></li><li><p>Neck<br>SPPã€PAN</p></li><li><p>Head<br>è¾“å‡ºç»´åº¦ï¼šNÃ—NÃ—85 (NÃ—Nä¸ªç½‘æ ¼(ä½¿ç”¨äº†å¤šå°ºåº¦ï¼ŒNå–20&#x2F;40&#x2F;80)ï¼Œ1ä¸ªBox(80ä¸ªç±»åˆ«,x,y,w,h,c))</p></li></ul><p>æŸå¤±ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼šä½ç½®é¢„æµ‹æŸå¤±ï¼šDFL + CIoU Lossï¼Œç½®ä¿¡åº¦é¢„æµ‹æŸå¤±ï¼šäº¤å‰ç†µæŸå¤±ï¼Œç±»åˆ«é¢„æµ‹æŸå¤±ï¼šVFL Lossã€‚</p><p>DIOU_Nmsã€ä½¿ç”¨äº†Task-Aligned AssigneråŒ¹é…æ–¹å¼ã€‚ã€Decoupled Headï¼›</p><ul><li>æ€§èƒ½è¡¨ç°<br>æ•°æ®é›†ï¼šCOCOï¼ŒGPUç¡¬ä»¶ï¼šNvidia Tesla A100ï¼ŒYOLOv8å¯¹æ¯”åŒæ—¶æœŸç®—æ³•æ€§èƒ½æŒ‡æ ‡ï¼š<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-31.png" alt="alt text"></li></ul><h1 id="YOLOv9-2024"><a href="#YOLOv9-2024" class="headerlink" title="YOLOv9(2024)"></a>YOLOv9(2024)</h1><p>è®ºæ–‡åœ°å€ï¼š<a href="https://arxiv.org/pdf/2402.13616.pdf">https://arxiv.org/pdf/2402.13616.pdf</a></p><p>ä»£ç åœ°å€ï¼š<a href="https://github.com/WongKinYiu/yolov9">https://github.com/WongKinYiu/yolov9</a></p><p>è·ç¦»YOLOv8å‘å¸ƒä»…1å¹´çš„æ—¶é—´ï¼Œv9è¯ç”Ÿäº†ï¼v9ç»§æ‰¿è‡ªv7ï¼Œä¸»è¦è´¡çŒ®åŒ…æ‹¬ï¼šå¯ç¼–ç¨‹æ¢¯åº¦ä¿¡æ¯(PGI)+å¹¿ä¹‰é«˜æ•ˆå±‚èšåˆç½‘ç»œ(GELAN)ã€‚ä¸YOLOv8ç›¸æ¯”ï¼Œå…¶å‡ºè‰²çš„è®¾è®¡ä½¿æ·±åº¦æ¨¡å‹çš„å‚æ•°æ•°é‡å‡å°‘äº†49%ï¼Œè®¡ç®—é‡å‡å°‘äº†43%ï¼Œä½†åœ¨MS COCOæ•°æ®é›†ä¸Šä»æœ‰0.6%çš„APæ”¹è¿›ã€‚ æ— è®ºæ˜¯è½»é‡çº§è¿˜æ˜¯å¤§å‹æ¨¡å‹ï¼Œå®ƒéƒ½å®Œèƒœï¼Œä¸€ä¸¾æˆä¸ºç›®æ ‡æ£€æµ‹é¢†åŸŸæ–°SOTAã€‚</p><ul><li>ç½‘ç»œç»“æ„<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-32.png" alt="alt text"></li></ul><p>ç½‘ç»œè¾“å…¥ï¼š640Ã—640Ã—3 (ä¸‰é€šé“640Ã—640åƒç´ å›¾åƒ)<br>è¾“å‡ºç»´åº¦ï¼šNÃ—NÃ—85 (NÃ—Nä¸ªç½‘æ ¼(ä½¿ç”¨äº†å¤šå°ºåº¦ï¼ŒNå–20&#x2F;40&#x2F;80)ï¼Œ1ä¸ªBox(80ä¸ªç±»åˆ«,x,y,w,h,c))</p><ul><li><p>Input<br>ç½‘ç»œè¾“å…¥ï¼š640Ã—640Ã—3 (ä¸‰é€šé“640Ã—640åƒç´ å›¾åƒ)</p></li><li><p>Backbone<br>YOLOv7çš„è¾…åŠ©è®­ç»ƒå¤´Aux-&gt;PGI(CBLinear,CBFuse)<br>ELAN-&gt;GELAN<br>PGI çš„æ¨ç†è¿‡ç¨‹ä»…ä½¿ç”¨äº†ä¸»åˆ†æ”¯ï¼Œå› æ­¤ä¸éœ€è¦é¢å¤–çš„æ¨ç†æˆæœ¬ï¼›</p></li></ul><p>è¾…åŠ©å¯é€†åˆ†æ”¯æ˜¯ä¸ºäº†å¤„ç†ç¥ç»ç½‘ç»œåŠ æ·±å¸¦æ¥çš„é—®é¢˜ï¼Œ ç½‘ç»œåŠ æ·±ä¼šé€ æˆä¿¡æ¯ç“¶é¢ˆï¼Œå¯¼è‡´æŸå¤±å‡½æ•°æ— æ³•ç”Ÿæˆå¯é çš„æ¢¯åº¦ï¼›</p><ul><li>Neck</li><li>Head<br>è¾“å‡ºç»´åº¦ï¼šNÃ—NÃ—85 (NÃ—Nä¸ªç½‘æ ¼(ä½¿ç”¨äº†å¤šå°ºåº¦ï¼ŒNå–20&#x2F;40&#x2F;80)ï¼Œ1ä¸ªBox(80ä¸ªç±»åˆ«,x,y,w,h,c))</li></ul><p>æŸå¤±ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼šä½ç½®é¢„æµ‹æŸå¤±ï¼šDFL + CIoU Lossï¼Œç½®ä¿¡åº¦é¢„æµ‹æŸå¤±ï¼šäº¤å‰ç†µæŸå¤±ï¼Œç±»åˆ«é¢„æµ‹æŸå¤±ï¼šäº¤å‰ç†µæŸå¤±ã€‚</p><p>DIOU_Nmsã€TALæ ‡ç­¾åˆ†é…ç­–ç•¥ã€Decoupled Headï¼›é”šæ¡†ï¼šAnchor Free</p><ul><li>æ€§èƒ½è¡¨ç°<br>æ•°æ®é›†ï¼šCOCOï¼ŒGPUç¡¬ä»¶ï¼šNvidia Tesla A100ï¼ŒYOLOv9å¯¹æ¯”åŒæ—¶æœŸç®—æ³•æ€§èƒ½æŒ‡æ ‡ï¼š<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-33.png" alt="alt text"></li></ul><h1 id="YOLOv10-2024"><a href="#YOLOv10-2024" class="headerlink" title="YOLOv10(2024)"></a>YOLOv10(2024)</h1><p>è®ºæ–‡åœ°å€ï¼š<a href="https://arxiv.org/abs/2405.14458.pdf">https://arxiv.org/abs/2405.14458.pdf</a></p><p>ä»£ç åœ°å€ï¼š<a href="https://github.com/THU-MIG/yolov10">https://github.com/THU-MIG/yolov10</a></p><ul><li>ç½‘ç»œç»“æ„<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-34.png" alt="alt text"></li></ul><p>ç½‘ç»œè¾“å…¥ï¼š640Ã—640Ã—3 (ä¸‰é€šé“640Ã—640åƒç´ å›¾åƒ)<br>è¾“å‡ºç»´åº¦ï¼šNÃ—NÃ—85 (NÃ—Nä¸ªç½‘æ ¼(ä½¿ç”¨äº†å¤šå°ºåº¦ï¼ŒNå–20&#x2F;40&#x2F;80)ï¼Œ1ä¸ªBox(80ä¸ªç±»åˆ«,x,y,w,h,c))</p><ul><li><p>Input<br>ç½‘ç»œè¾“å…¥ï¼š416Ã—416Ã—3 (ä¸‰é€šé“416Ã—416åƒç´ å›¾åƒ)<br>ç½‘ç»œè¾“å‡ºï¼š300x6(300ä¸ªBox(x1,y1,x2,y2,score,class))</p></li><li><p>Backbone<br>CIBé‡‡ç”¨å»‰ä»·çš„æ·±åº¦å·ç§¯è¿›è¡Œç©ºé—´æ··åˆï¼Œå¹¶é‡‡ç”¨æˆæœ¬æ•ˆç›Šé«˜çš„ç‚¹å·ç§¯è¿›è¡Œé€šé“æ··åˆã€‚</p></li><li><p>Neck<br>PSAæ¨¡å—é¦–å…ˆé€šè¿‡1Ã—1å·ç§¯å°†ç‰¹å¾å‡åŒ€åœ°åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ã€‚ç„¶åï¼Œåªæœ‰ä¸€éƒ¨åˆ†è¿›å…¥ç”±å¤šå¤´è‡ªæ³¨æ„åŠ›æ¨¡å—(MHSA)å’Œå‰é¦ˆç½‘ç»œ(FFN)ç»„æˆçš„NPSAå—ã€‚æœ€åï¼Œä¸¤éƒ¨åˆ†ç‰¹å¾è¢«è¿æ¥å¹¶é€šè¿‡1Ã—1å·ç§¯èåˆ</p></li><li><p>Head<br>æŸå¤±ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼šä½ç½®é¢„æµ‹æŸå¤±ï¼šDFL + CIoU Lossï¼Œç½®ä¿¡åº¦é¢„æµ‹æŸå¤±ï¼šäº¤å‰ç†µæŸå¤±ï¼Œç±»åˆ«é¢„æµ‹æŸå¤±ï¼šäº¤å‰ç†µæŸå¤±ã€‚</p></li></ul><p>æ— NMSè®­ç»ƒçš„ä¸€è‡´åŒé‡åˆ†é…</p><ul><li>æ€§èƒ½è¡¨ç°<br>æ•°æ®é›†ï¼šCOCOï¼ŒGPUç¡¬ä»¶ï¼šNvidia Tesla A100ï¼ŒYOLOv10å¯¹æ¯”åŒæ—¶æœŸç®—æ³•æ€§èƒ½æŒ‡æ ‡ï¼š<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-35.png" alt="alt text"></li></ul><h1 id="YOLOv11-2024"><a href="#YOLOv11-2024" class="headerlink" title="YOLOv11(2024)"></a>YOLOv11(2024)</h1><p>è®ºæ–‡åœ°å€ï¼š<br>ä»£ç åœ°å€ï¼š<a href="https://github.com/ultralytics/ultralytics">https://github.com/ultralytics/ultralytics</a></p><p>YOLOv11ç»§æ‰¿è‡ªYOLOv8ï¼Œåœ¨YOLOv8åŸºç¡€ä¸Šè¿›è¡Œäº†æ”¹è¿›ï¼Œä½¿åŒç­‰ç²¾åº¦ä¸‹å‚æ•°é‡é™ä½20%ï¼Œåœ¨é€Ÿåº¦å’Œå‡†ç¡®æ€§æ–¹é¢å…·æœ‰æ— ä¸ä¼¦æ¯”çš„æ€§èƒ½ã€‚å…¶æµçº¿å‹è®¾è®¡ä½¿å…¶é€‚ç”¨äºå„ç§åº”ç”¨ï¼Œå¹¶å¯è½»æ¾é€‚åº”ä»è¾¹ç¼˜è®¾å¤‡åˆ°äº‘ API ç­‰ä¸åŒç¡¬ä»¶å¹³å°ã€‚ä½¿å…¶æˆä¸ºå„ç§ç‰©ä½“æ£€æµ‹ä¸è·Ÿè¸ªã€å®ä¾‹åˆ†å‰²ã€å›¾åƒåˆ†ç±»å’Œå§¿æ€ä¼°è®¡ä»»åŠ¡çš„ç»ä½³é€‰æ‹©ã€‚</p><ul><li>ç½‘ç»œç»“æ„<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-36.png" alt="alt text"></li></ul><p>ç½‘ç»œè¾“å…¥ï¼š640Ã—640Ã—3 (ä¸‰é€šé“640Ã—640åƒç´ å›¾åƒ)<br>è¾“å‡ºç»´åº¦ï¼šNÃ—NÃ—85 (NÃ—Nä¸ªç½‘æ ¼(ä½¿ç”¨äº†å¤šå°ºåº¦ï¼ŒNå–20&#x2F;40&#x2F;80)ï¼Œ1ä¸ªBox(80ä¸ªç±»åˆ«,x,y,w,h,c))</p><ul><li><p>Input<br>ç½‘ç»œè¾“å…¥ï¼š640Ã—640Ã—3 (ä¸‰é€šé“640Ã—640åƒç´ å›¾åƒ)</p></li><li><p>Backbone<br>Darknet-53(C2Fæ¨¡å—æ¢æˆäº†C3k2æ¨¡å—)<br>C3k2ï¼Œç»§æ‰¿è‡ªç±»C2fï¼Œå…¶ä¸­é€šè¿‡c3kè®¾ç½®Falseæˆ–è€…Tureæ¥å†³å®šé€‰æ‹©ä½¿ç”¨C3kè¿˜æ˜¯Bottle- Neck</p></li><li><p>Neck<br>SPPFã€PAN<br>C2PSA æ¨¡å—æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ç¥ç»ç½‘ç»œå±‚ï¼Œå¸¦æœ‰æ³¨æ„åŠ›æœºåˆ¶ï¼Œç”¨äºå¢å¼ºç‰¹å¾æå–å’Œå¤„ç†ã€‚å€Ÿé‰´V10 PSAç»“æ„ï¼Œå®ç°äº†C2PSAå’ŒC2fPSAï¼Œæœ€ç»ˆé€‰æ‹©äº†åŸºäºC2çš„C2PSAã€‚</p></li><li><p>Head<br>è¾“å‡ºç»´åº¦ï¼šNÃ—NÃ—85 (NÃ—Nä¸ªç½‘æ ¼(ä½¿ç”¨äº†å¤šå°ºåº¦ï¼ŒNå–20&#x2F;40&#x2F;80)ï¼Œ1ä¸ªBox(80ä¸ªç±»åˆ«,x,y,w,h,c))</p></li></ul><p>æŸå¤±ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼šä½ç½®é¢„æµ‹æŸå¤±ï¼šDFL + CIoU Lossï¼Œç½®ä¿¡åº¦é¢„æµ‹æŸå¤±ï¼šäº¤å‰ç†µæŸå¤±ï¼Œç±»åˆ«é¢„æµ‹æŸå¤±ï¼šVFL Lossã€‚</p><p>åˆ†ç±»æ£€æµ‹å¤´å¼•å…¥äº†DWConv(æ›´åŠ è½»é‡çº§ï¼Œä¸ºåç»­äºŒæ¬¡åˆ›æ–°æä¾›äº†æ”¹è¿›ç‚¹)</p><ul><li>æ€§èƒ½è¡¨ç°<br>æ•°æ®é›†ï¼šCOCOï¼ŒGPUç¡¬ä»¶ï¼šNvidia Tesla T4ï¼ŒYOLOv11å¯¹æ¯”åŒæ—¶æœŸç®—æ³•æ€§èƒ½æŒ‡æ ‡ï¼š<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-37.png" alt="alt text"><br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yoloV1%E5%88%B0yoloV11%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-38.png" alt="alt text"></li></ul>]]></content>
      
      
      <categories>
          
          <category> yolo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> yolo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yolov5æ¨¡å‹ç²¾åº¦è¯„ä¼°æ–¹æ³•</title>
      <link href="/2023/05/29/yolov5-mo-xing-jing-du-ping-gu-fang-fa/"/>
      <url>/2023/05/29/yolov5-mo-xing-jing-du-ping-gu-fang-fa/</url>
      
        <content type="html"><![CDATA[<h1 id="æŒ‡æ ‡è¯„ä¼°-é‡è¦çš„ä¸€äº›å®šä¹‰"><a href="#æŒ‡æ ‡è¯„ä¼°-é‡è¦çš„ä¸€äº›å®šä¹‰" class="headerlink" title="æŒ‡æ ‡è¯„ä¼°(é‡è¦çš„ä¸€äº›å®šä¹‰)"></a>æŒ‡æ ‡è¯„ä¼°(é‡è¦çš„ä¸€äº›å®šä¹‰)</h1><h2 id="ğŸ“š-IOU"><a href="#ğŸ“š-IOU" class="headerlink" title="ğŸ“š IOU"></a>ğŸ“š IOU</h2><p>(IOU) (<em>Intersection Over Union</em>) åŸºäº<em>Jaccard</em>ç´¢å¼•ï¼Œç”¨äºè¯„ä¼°ä¸¤ä¸ªè¾¹ç•Œæ¡†ä¹‹é—´çš„é‡å ç¨‹åº¦ã€‚å®ƒéœ€è¦ä¸€ä¸ªçœŸå®å›å½’æ¡† (a ground truth bounding box) (B_{gt}) å’Œä¸€ä¸ªé¢„æµ‹å›å½’æ¡†(a predicted bounding box) (B_{p}) è®¡ç®—å¾—åˆ°ã€‚é€šè¿‡åº”ç”¨ IOU æˆ‘ä»¬èƒ½å¤Ÿåˆ¤æ–­å‡ºé¢„æµ‹ç»“æœæ˜¯æœ‰æ•ˆ(True Positive) æˆ–è€… æ— æ•ˆ(False Positive)</p><p>(IOU) ä¹Ÿç§°é‡å åº¦ è¡¨ç¤ºè®¡ç®—é¢„æµ‹å›å½’æ¡†å’ŒçœŸå®å›å½’æ¡†çš„äº¤å¹¶æ¯”,è®¡ç®—å…¬å¼å¦‚ä¸‹:</p><p>(large{IOU&#x3D;dfrac{arealeft( B_pcap B_{g t}right) }{arealeft( B_pcup B_{g t}right) } })</p><p>å…¶ä¸­: (B_p:é¢„æµ‹å›å½’æ¡†)ï¼Œ (B_{g t}:çœŸå®å›å½’æ¡†)</p><p>ä¸‹å›¾å¯è§†åŒ–äº†çœŸå®å›å½’æ¡†ï¼ˆç»¿è‰²ï¼‰å’Œ é¢„æµ‹å›å½’æ¡†ï¼ˆçº¢è‰²ï¼‰ä¹‹é—´çš„IOUã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yolov5%E6%A8%A1%E5%9E%8B%E7%B2%BE%E5%BA%A6%E8%AF%84%E4%BC%B0%E6%96%B9%E6%B3%95/image.png"></p><p>å›¾1.1 ; (IOU) çš„è®¡ç®—ã€‚ç»¿è‰²: (B_{g t}) ï¼Œ çº¢è‰²:(B_{p})</p><h2 id="TP-amp-FP-amp-FN-amp-TN"><a href="#TP-amp-FP-amp-FN-amp-TN" class="headerlink" title="TP&amp;FP&amp;FN&amp;TN"></a>TP&amp;FP&amp;FN&amp;TN</h2><table><thead><tr><th></th><th>Positive</th><th>Negative</th></tr></thead><tbody><tr><td>True</td><td>TP</td><td>TN</td></tr><tr><td>False</td><td>FP</td><td>FN</td></tr></tbody></table><p>æŒ‡æ ‡çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µï¼š</p><ul><li>TPï¼ˆTrue Postivesï¼‰ï¼š åˆ†ç±»å™¨æŠŠæ­£ä¾‹æ­£ç¡®çš„åˆ†ç±»-é¢„æµ‹ä¸ºæ­£ä¾‹ã€‚(IOU &gt;&#x3D; <em>é˜ˆå€¼</em>)</li><li>FNï¼ˆFalse Negativesï¼‰ï¼šåˆ†ç±»å™¨æŠŠæ­£ä¾‹é”™è¯¯çš„åˆ†ç±»-é¢„æµ‹ä¸ºè´Ÿä¾‹ã€‚(IOU &lt; <em>é˜ˆå€¼</em>)</li><li>FPï¼ˆFalse Postivesï¼‰ï¼šåˆ†ç±»å™¨æŠŠè´Ÿä¾‹é”™è¯¯çš„åˆ†ç±»-é¢„æµ‹ä¸ºæ­£ä¾‹</li><li>TNï¼ˆTrue Negativesï¼‰ï¼šåˆ†ç±»å™¨æŠŠè´Ÿä¾‹æ­£ç¡®çš„åˆ†ç±»-é¢„æµ‹ä¸ºè´Ÿä¾‹ï¼ˆ<em>yolov5ä¸­æ²¡æœ‰åº”ç”¨åˆ°</em>ï¼‰</li></ul><p>yolov5ä¸­æ²¡æœ‰åº”ç”¨TNçš„åŸå› : TNä»£è¡¨çš„æ˜¯æ‰€æœ‰å¯èƒ½çš„æœªæ­£ç¡®æ£€æµ‹åˆ°çš„è¾¹ç•Œæ¡†ã€‚ç„¶è€Œåœ¨yoloåœ¨ç›®æ ‡æ£€æµ‹ä»»åŠ¡ä¸­ï¼Œæ¯ä¸ªç½‘æ ¼ä¼šç”Ÿæˆå¾ˆå¤šçš„é¢„æµ‹è¾¹ç•Œæ¡†ï¼Œæœ‰è®¸å¤šçš„é¢„æµ‹è¾¹ç•Œæ¡†æ˜¯æ²¡æœ‰ç›¸åº”çš„çœŸå®æ ‡ç­¾æ¡†ï¼Œå¯¼è‡´æœªæ­£ç¡®æ£€æµ‹åˆ°çš„è¾¹ç•Œæ¡†æ•°é‡è¿œè¿œå¤§äºæ­£ç¡®æ£€æµ‹åˆ°çš„è¾¹ç•Œæ¡†ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¸ä½¿ç”¨TNçš„åŸå› ã€‚</p><p>threshold: depending on the metric, it is usually set to 50%, 75% or 95%.</p><h2 id="Precision"><a href="#Precision" class="headerlink" title="Precision"></a>Precision</h2><p>Precision å®šä¹‰ï¼šæ¨¡å‹è¯†åˆ«ç›¸å…³ç›®æ ‡çš„èƒ½åŠ›ã€‚åˆ†ç±»æ­£ç¡®çš„æ ·æœ¬åœ¨æ‰€æœ‰æ ·æœ¬ä¸­çš„æ•°é‡æ¯”ä¾‹ï¼Œå…¬å¼å¦‚ä¸‹:</p><p>(Precision &#x3D;dfrac{TP}{TP+FP}&#x3D;dfrac{TP}{all  detections})</p><h2 id="Recall"><a href="#Recall" class="headerlink" title="Recall"></a>Recall</h2><p>Recall å®šä¹‰ï¼šæ˜¯æ¨¡å‹æ‰¾åˆ°çœŸå®å›å½’æ¡†(<em>å³æ ‡ç­¾æ ‡æ³¨çš„æ¡†</em>)çš„èƒ½åŠ›ã€‚è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p><p>(Recall &#x3D; dfrac{TP}{TP+FN}&#x3D;dfrac{TP}{all  ground  truths})</p><h2 id="mAP"><a href="#mAP" class="headerlink" title="mAP"></a>mAP</h2><p>å¤šæ ‡ç­¾å›¾åƒåˆ†ç±»ä»»åŠ¡ä¸­å›¾ç‰‡çš„æ ‡ç­¾ä¸æ­¢ä¸€ä¸ªï¼Œå› æ­¤è¯„ä»·ä¸èƒ½ç”¨æ™®é€šå•æ ‡ç­¾å›¾åƒåˆ†ç±»çš„æ ‡å‡†ï¼Œå³mean accuracyï¼Œè¯¥ä»»åŠ¡é‡‡ç”¨çš„æ˜¯å’Œä¿¡æ¯æ£€ç´¢ä¸­ç±»ä¼¼çš„æ–¹æ³•â€”mAPï¼Œè™½ç„¶å…¶å­—é¢æ„æ€å’Œmean average precisionçœ‹èµ·æ¥å·®ä¸å¤šï¼Œä½†æ˜¯è®¡ç®—æ–¹æ³•è¦ç¹çå¾—å¤š,mAP ä¼šç»Ÿè®¡æ‰€æœ‰ Confidence å€¼ä¸‹çš„ PRå€¼ï¼Œè€Œå®é™…ä½¿ç”¨æ—¶ï¼Œ<strong>ä¼šè®¾å®šä¸€ä¸ª Confidence é˜ˆå€¼ï¼Œä½äºè¯¥é˜ˆå€¼çš„ç›®æ ‡ä¼šè¢«ä¸¢å¼ƒï¼Œè¿™éƒ¨åˆ†ç›®æ ‡åœ¨ç»Ÿè®¡ mAP æ—¶ä¹Ÿä¼šæœ‰ä¸€å®šçš„è´¡çŒ®</strong>ã€‚</p><p><a href="https://baike.baidu.com/item/%E7%BD%AE%E4%BF%A1%E5%BA%A6/7908802?fr=aladdin">Confidence</a> (ç½®ä¿¡åº¦):åœ¨ç»Ÿè®¡å­¦ä¸­ï¼Œä¸€ä¸ªæ¦‚ç‡æ ·æœ¬çš„ç½®ä¿¡åŒºé—´ï¼ˆConfidence intervalï¼‰æ˜¯å¯¹è¿™ä¸ªæ ·æœ¬çš„æŸä¸ªæ€»ä½“å‚æ•°çš„åŒºé—´ä¼°è®¡ã€‚ç½®ä¿¡åŒºé—´å±•ç°çš„æ˜¯è¿™ä¸ªå‚æ•°çš„çœŸå®å€¼æœ‰ä¸€å®šæ¦‚ç‡è½åœ¨æµ‹é‡ç»“æœçš„å‘¨å›´çš„ç¨‹åº¦ã€‚ç½®ä¿¡åŒºé—´ç»™å‡ºçš„æ˜¯è¢«æµ‹é‡å‚æ•°æµ‹é‡å€¼çš„å¯ä¿¡ç¨‹åº¦èŒƒå›´ï¼Œå³å‰é¢æ‰€è¦æ±‚çš„â€œä¸€å®šæ¦‚ç‡â€ã€‚è¿™ä¸ªæ¦‚ç‡ä¹Ÿè¢«ç§°ä¸ºç½®ä¿¡æ°´å¹³ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/yolov5%E6%A8%A1%E5%9E%8B%E7%B2%BE%E5%BA%A6%E8%AF%84%E4%BC%B0%E6%96%B9%E6%B3%95/image-1.png"> (çº¢è‰²æ›²çº¿ä»£è¡¨,äººä¸ºçš„æ–¹å¼å°†PRæ›²çº¿å˜æˆå•è°ƒé€’å‡ï¼Œä½¿å¾—è®¡ç®—é¢ç§¯æ›´å®¹æ˜“ã€‚)</p><ul><li><p>APï¼ˆAverage Percisionï¼‰ï¼šAPä¸ºå¹³å‡ç²¾åº¦ï¼ŒæŒ‡çš„æ˜¯æ‰€æœ‰å›¾ç‰‡å†…çš„å…·ä½“æŸä¸€ç±»çš„PRæ›²çº¿ä¸‹çš„é¢ç§¯(æ¨ªè½´ä¸ºRecallï¼Œçºµè½´ä¸ºPrecision)ã€‚</p></li><li><p>APè¡¡é‡çš„æ˜¯å¯¹ä¸€ä¸ªç±»æ£€æµ‹å¥½åï¼ŒmAPå°±æ˜¯å¯¹å¤šä¸ªç±»çš„æ£€æµ‹å¥½åã€‚åœ¨å¤šç±»å¤šç›®æ ‡æ£€æµ‹ä¸­ï¼Œè®¡ç®—å‡ºæ¯ä¸ªç±»åˆ«çš„APåï¼Œå†é™¤äºç±»åˆ«æ€»æ•°ï¼Œå³æ‰€æœ‰ç±»åˆ«APçš„å¹³å‡å€¼ï¼Œæ¯”å¦‚æœ‰ä¸¤ç±»ï¼Œç±»Açš„APå€¼æ˜¯0.5ï¼Œç±»Bçš„APå€¼æ˜¯0.2ï¼Œé‚£ä¹ˆ (mAP)=ï¼ˆ0.5+0.2ï¼‰&#x2F;2&#x3D;0.35ã€‚</p></li><li><p>MAP: <strong>æ˜¯æŒ‡æ‰€æœ‰å›¾ç‰‡å†…çš„æ‰€æœ‰ç±»åˆ«çš„APçš„å¹³å‡å€¼</strong>,mapè¶Šé«˜ä»£è¡¨æ¨¡å‹é¢„æµ‹ç²¾åº¦å€¼è¶Šé«˜ã€‚</p></li><li><p>(<a href="mailto:&#109;&#x41;&#80;&#x40;&#48;&#x2e;&#53;">&#109;&#x41;&#80;&#x40;&#48;&#x2e;&#53;</a>) ï¼š(mAP)æ˜¯ç”¨(Precision)å’Œ(Recall)ä½œä¸ºä¸¤è½´ä½œå›¾åå›´æˆçš„é¢ç§¯ï¼Œ(m)è¡¨ç¤ºå¹³å‡ï¼Œ@åé¢çš„æ•°è¡¨ç¤ºåˆ¤å®šæ­£è´Ÿæ ·æœ¬çš„ (IOU) é˜ˆå€¼ï¼Œå…¶ä¸­ @0.5è¡¨ç¤ºIOUé˜ˆå€¼å–0.5ã€‚</p></li><li><p>(<a href="mailto:&#x6d;&#65;&#x50;&#64;&#48;&#x2e;&#x35;">&#x6d;&#65;&#x50;&#64;&#48;&#x2e;&#x35;</a>:0.95)ï¼šåªä»¥ (IOU&#x3D;0.5) çš„é˜€å€¼çš„æ—¶å€™ä¸ä¸€å®šå°±æ˜¯å¥½çš„æ¨¡å‹ï¼Œå¯èƒ½ä»…ä»…åœ¨0.5é˜€å€¼è¡¨ç°çš„å¾ˆå¥½ï¼Œåœ¨0.6,0.7â€¦é˜€å€¼è¡¨ç°çš„å¾ˆå·®ï¼Œä¸ºäº†æ›´å¥½åœ°è¯„ä¼°æ•´ä½“æ¨¡å‹çš„å‡†ç¡®åº¦ï¼Œå› æ­¤è®¡ç®—ä¸€ä¸ªæ¨¡å‹åœ¨å„ä¸ªIOUå€¼çš„AP(mAP)å–å¹³å‡å€¼ã€‚</p></li></ul><p>æ–¹æ³•æ˜¯ï¼šè®¡ç®—æ¯ä¸ªåˆ†ç±»çš„APï¼Œæ±‚å’Œå†å¹³å‡ï¼Œå¾—åˆ°çš„å°±æ˜¯mAP,å®ƒæ˜¯ç›´æ¥æŠŠmAPå½“æˆAPï¼Œç„¶åå†æŠŠIOUå€¼å¤§äº0.5çš„ (AP(mAP)) ï¼Œä»¥0.05çš„å¢é‡,åˆ°0.95ï¼Œä¹Ÿå°±æ˜¯ä»¥ ((0.5, 0.55, 0.6, 0.65, 0.7, 0.75, 0.8, 0.85, 0.9, 0.95)) (IOUå€¼) çš„ (AP(mAP)) çš„å¹³å‡å€¼å½“æˆ (AP(at IoU&#x3D;.50:.05:.95)) ï¼Œé€šè¿‡(IOUå¢é‡) çš„æ–¹å¼å¾—åˆ° (<a href="mailto:&#109;&#65;&#x50;&#64;&#48;&#46;&#53;">&#109;&#65;&#x50;&#64;&#48;&#46;&#53;</a>:0.95) ç»“æœã€‚</p><h1 id="ç›®æ ‡æ£€æµ‹ä¸­çš„mAPè®¡ç®—"><a href="#ç›®æ ‡æ£€æµ‹ä¸­çš„mAPè®¡ç®—" class="headerlink" title="ç›®æ ‡æ£€æµ‹ä¸­çš„mAPè®¡ç®—"></a>ç›®æ ‡æ£€æµ‹ä¸­çš„mAPè®¡ç®—</h1><h2 id="yolov5è®¡ç®—IOUæºç è§£æ"><a href="#yolov5è®¡ç®—IOUæºç è§£æ" class="headerlink" title="yolov5è®¡ç®—IOUæºç è§£æ"></a>yolov5è®¡ç®—IOUæºç è§£æ</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># è®¡ç®—ä¸¤æ¡†çš„ç‰¹å®šiou (DIou, DIou, CIou) </span><span class="token keyword">def</span> <span class="token function">bbox_iou</span><span class="token punctuation">(</span>box1<span class="token punctuation">,</span> box2<span class="token punctuation">,</span> xywh<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> GIoU<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> DIoU<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> CIoU<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> eps<span class="token operator">=</span><span class="token number">1e-7</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># Returns Intersection over Union (IoU) of box1(1,4) to box2(n,4)</span>    <span class="token comment"># Get the coordinates of bounding boxes ä¸‹é¢æ¡ä»¶è¯­å¥ä½œç”¨æ˜¯:è¿›è¡Œåæ ‡è½¬æ¢ä»è€Œè·å–yoloæ ¼å¼è¾¹ç•Œæ¡†çš„åæ ‡</span>    <span class="token keyword">if</span> xywh<span class="token punctuation">:</span>  <span class="token comment"># transform from xywh to xyxy</span>        <span class="token punctuation">(</span>x1<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> w1<span class="token punctuation">,</span> h1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>x2<span class="token punctuation">,</span> y2<span class="token punctuation">,</span> w2<span class="token punctuation">,</span> h2<span class="token punctuation">)</span> <span class="token operator">=</span> box1<span class="token punctuation">.</span>chunk<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> box2<span class="token punctuation">.</span>chunk<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>        w1_<span class="token punctuation">,</span> h1_<span class="token punctuation">,</span> w2_<span class="token punctuation">,</span> h2_ <span class="token operator">=</span> w1 <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> h1 <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> w2 <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> h2 <span class="token operator">/</span> <span class="token number">2</span>        b1_x1<span class="token punctuation">,</span> b1_x2<span class="token punctuation">,</span> b1_y1<span class="token punctuation">,</span> b1_y2 <span class="token operator">=</span> x1 <span class="token operator">-</span> w1_<span class="token punctuation">,</span> x1 <span class="token operator">+</span> w1_<span class="token punctuation">,</span> y1 <span class="token operator">-</span> h1_<span class="token punctuation">,</span> y1 <span class="token operator">+</span> h1_        b2_x1<span class="token punctuation">,</span> b2_x2<span class="token punctuation">,</span> b2_y1<span class="token punctuation">,</span> b2_y2 <span class="token operator">=</span> x2 <span class="token operator">-</span> w2_<span class="token punctuation">,</span> x2 <span class="token operator">+</span> w2_<span class="token punctuation">,</span> y2 <span class="token operator">-</span> h2_<span class="token punctuation">,</span> y2 <span class="token operator">+</span> h2_    <span class="token keyword">else</span><span class="token punctuation">:</span>  <span class="token comment"># x1, y1, x2, y2 = box1</span>        b1_x1<span class="token punctuation">,</span> b1_y1<span class="token punctuation">,</span> b1_x2<span class="token punctuation">,</span> b1_y2 <span class="token operator">=</span> box1<span class="token punctuation">.</span>chunk<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>        b2_x1<span class="token punctuation">,</span> b2_y1<span class="token punctuation">,</span> b2_x2<span class="token punctuation">,</span> b2_y2 <span class="token operator">=</span> box2<span class="token punctuation">.</span>chunk<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>        w1<span class="token punctuation">,</span> h1 <span class="token operator">=</span> b1_x2 <span class="token operator">-</span> b1_x1<span class="token punctuation">,</span> b1_y2 <span class="token operator">-</span> b1_y1        w2<span class="token punctuation">,</span> h2 <span class="token operator">=</span> b2_x2 <span class="token operator">-</span> b2_x1<span class="token punctuation">,</span> b2_y2 <span class="token operator">-</span> b2_y1    <span class="token comment"># Intersection area è·å–ä¸¤ä¸ªæ¡†ç›¸äº¤çš„é¢ç§¯ã€‚</span>    <span class="token triple-quoted-string string">"""    left_line = max(b1_x1, b2_x1)    reft_line = min(b1_x2, b2_x2)    top_line = max(b1_y1, b2_y1)    bottom_line = min(b1_y2, b2_y2)    intersect = (reight_line - left_line) * (bottom_line - top_line)    """</span>    inter <span class="token operator">=</span> <span class="token punctuation">(</span>flow<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span>b1_x2<span class="token punctuation">,</span> b2_x2<span class="token punctuation">)</span> <span class="token operator">-</span> flow<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>b1_x1<span class="token punctuation">,</span> b2_x1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>clamp<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">*</span> \            <span class="token punctuation">(</span>flow<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span>b1_y2<span class="token punctuation">,</span> b2_y2<span class="token punctuation">)</span> <span class="token operator">-</span> flow<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>b1_y1<span class="token punctuation">,</span> b2_y1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>clamp<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token comment"># Union Area  ä¸¤ä¸ªæ¡†å¹¶åˆ°é¢ç§¯</span>    union <span class="token operator">=</span> w1 <span class="token operator">*</span> h1 <span class="token operator">+</span> w2 <span class="token operator">*</span> h2 <span class="token operator">-</span> inter <span class="token operator">+</span> eps    <span class="token comment"># IoU </span>    iou <span class="token operator">=</span> inter <span class="token operator">/</span> union    <span class="token keyword">if</span> CIoU <span class="token keyword">or</span> DIoU <span class="token keyword">or</span> GIoU<span class="token punctuation">:</span>        cw <span class="token operator">=</span> flow<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>b1_x2<span class="token punctuation">,</span> b2_x2<span class="token punctuation">)</span> <span class="token operator">-</span> flow<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span>b1_x1<span class="token punctuation">,</span> b2_x1<span class="token punctuation">)</span>  <span class="token comment"># convex (smallest enclosing box) width</span>        ch <span class="token operator">=</span> flow<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>b1_y2<span class="token punctuation">,</span> b2_y2<span class="token punctuation">)</span> <span class="token operator">-</span> flow<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span>b1_y1<span class="token punctuation">,</span> b2_y1<span class="token punctuation">)</span>  <span class="token comment"># convex height</span>        <span class="token keyword">if</span> CIoU <span class="token keyword">or</span> DIoU<span class="token punctuation">:</span>  <span class="token comment"># Distance or Complete IoU https://arxiv.org/abs/1911.08287v1</span>            c2 <span class="token operator">=</span> cw <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> ch <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> eps  <span class="token comment"># convex diagonal squared</span>            rho2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>b2_x1 <span class="token operator">+</span> b2_x2 <span class="token operator">-</span> b1_x1 <span class="token operator">-</span> b1_x2<span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>b2_y1 <span class="token operator">+</span> b2_y2 <span class="token operator">-</span> b1_y1 <span class="token operator">-</span> b1_y2<span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">4</span>  <span class="token comment"># center dist ** 2</span>            <span class="token keyword">if</span> CIoU<span class="token punctuation">:</span>  <span class="token comment"># https://github.com/Zzh-tju/DIoU-SSD-pytorch/blob/master/utils/box/box_utils.py#L47</span>                v <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">/</span> math<span class="token punctuation">.</span>pi <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> flow<span class="token punctuation">.</span><span class="token builtin">pow</span><span class="token punctuation">(</span>flow<span class="token punctuation">.</span>atan<span class="token punctuation">(</span>w2 <span class="token operator">/</span> <span class="token punctuation">(</span>h2 <span class="token operator">+</span> eps<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> flow<span class="token punctuation">.</span>atan<span class="token punctuation">(</span>w1 <span class="token operator">/</span> <span class="token punctuation">(</span>h1 <span class="token operator">+</span> eps<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>                <span class="token keyword">with</span> flow<span class="token punctuation">.</span>no_grad<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    alpha <span class="token operator">=</span> v <span class="token operator">/</span> <span class="token punctuation">(</span>v <span class="token operator">-</span> iou <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> eps<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> iou <span class="token operator">-</span> <span class="token punctuation">(</span>rho2 <span class="token operator">/</span> c2 <span class="token operator">+</span> v <span class="token operator">*</span> alpha<span class="token punctuation">)</span>  <span class="token comment"># CIoU</span>            <span class="token keyword">return</span> iou <span class="token operator">-</span> rho2 <span class="token operator">/</span> c2  <span class="token comment"># DIoU</span>        c_area <span class="token operator">=</span> cw <span class="token operator">*</span> ch <span class="token operator">+</span> eps  <span class="token comment"># convex area</span>        <span class="token keyword">return</span> iou <span class="token operator">-</span> <span class="token punctuation">(</span>c_area <span class="token operator">-</span> union<span class="token punctuation">)</span> <span class="token operator">/</span> c_area  <span class="token comment"># GIoU https://arxiv.org/pdf/1902.09630.pdf</span>    <span class="token keyword">return</span> iou  <span class="token comment"># IoU</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="yolov5è®¡ç®—APæºç é€è¡Œè§£æ"><a href="#yolov5è®¡ç®—APæºç é€è¡Œè§£æ" class="headerlink" title="yolov5è®¡ç®—APæºç é€è¡Œè§£æ"></a>yolov5è®¡ç®—APæºç é€è¡Œè§£æ</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># æ ¹æ®PRæ›²çº¿è®¡ç®—AP </span><span class="token keyword">def</span> <span class="token function">compute_ap</span><span class="token punctuation">(</span>recall<span class="token punctuation">,</span> precision<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">""" Compute the average precision, given the recall and precision curves    # Arguments        recall:    The recall curve (list)        precision: The precision curve (list)    # Returns        Average precision, precision curve, recall curve    """</span>    <span class="token comment"># Append sentinel values to beginning and end å°†å¼€åŒºé—´ç»™è¡¥ä¸Šï¼Œè¡¥æˆé—­åˆçš„åŒºé—´ã€‚</span>    mrec <span class="token operator">=</span> np<span class="token punctuation">.</span>concatenate<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> recall<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>     mpre <span class="token operator">=</span> np<span class="token punctuation">.</span>concatenate<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> precision<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># Compute the precision envelope </span>    <span class="token triple-quoted-string string">"""    äººä¸ºçš„æŠŠPRæ›²çº¿å˜æˆå•è°ƒé€’å‡çš„,ä¾‹å¦‚:    np.maximum(accumulate(np.array([21, 23, 18, 19, 20, 13, 12, 11]) ) => np.array([23, 23, 20, 20, 20, 13, 12, 11])    """</span>    mpre <span class="token operator">=</span> np<span class="token punctuation">.</span>flip<span class="token punctuation">(</span>np<span class="token punctuation">.</span>maximum<span class="token punctuation">.</span>accumulate<span class="token punctuation">(</span>np<span class="token punctuation">.</span>flip<span class="token punctuation">(</span>mpre<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># Integrate area under curve</span>    method <span class="token operator">=</span> <span class="token string">'interp'</span>  <span class="token comment"># methods: 'continuous', 'interp'</span>    <span class="token keyword">if</span> method <span class="token operator">==</span> <span class="token string">'interp'</span><span class="token punctuation">:</span> <span class="token comment"># é»˜è®¤é‡‡ç”¨ interpolated-precision æ›²çº¿ï¼Œ</span>        x <span class="token operator">=</span> np<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">)</span>  <span class="token comment"># 101-point interp (COCO)</span>        ap <span class="token operator">=</span> np<span class="token punctuation">.</span>trapz<span class="token punctuation">(</span>np<span class="token punctuation">.</span>interp<span class="token punctuation">(</span>x<span class="token punctuation">,</span> mrec<span class="token punctuation">,</span> mpre<span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>  <span class="token comment"># integrate</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>  <span class="token comment"># 'continuous'</span>        i <span class="token operator">=</span> np<span class="token punctuation">.</span>where<span class="token punctuation">(</span>mrec<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">!=</span> mrec<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token comment"># points where x axis (recall) changes</span>        ap <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">(</span>mrec<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> mrec<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> mpre<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># area under curve</span>    <span class="token keyword">return</span> ap<span class="token punctuation">,</span> mpre<span class="token punctuation">,</span> mrec<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h1><ul><li><a href="https://github.com/rafaelpadilla/Object-Detection-Metrics">https://github.com/rafaelpadilla/Object-Detection-Metrics</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> yolov5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> yolov5 </tag>
            
            <tag> æ¨¡å‹ç²¾åº¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yolov5æ¨¡å‹ç»“æ„ç®€åŒ–å®ä¾‹</title>
      <link href="/2023/05/29/yolov5-mo-xing-jie-gou-jian-hua-shi-li/"/>
      <url>/2023/05/29/yolov5-mo-xing-jie-gou-jian-hua-shi-li/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å®é™…ä½¿ç”¨yolov5sæ—¶ï¼Œä¸ºäº†æå‡æ¨ç†é€Ÿåº¦ï¼ŒHQé¡¹ç›®ä¸­è¿›è¡Œäº†ä¸€å®šçš„ç®€åŒ–æ“ä½œï¼Œå…·ä½“æƒ…å†µå¦‚ä¸‹ã€‚</p><h1 id="å®˜æ–¹é…ç½®æ–‡ä»¶-VS-HQé…ç½®æ–‡ä»¶"><a href="#å®˜æ–¹é…ç½®æ–‡ä»¶-VS-HQé…ç½®æ–‡ä»¶" class="headerlink" title="å®˜æ–¹é…ç½®æ–‡ä»¶ VS  HQé…ç½®æ–‡ä»¶"></a>å®˜æ–¹é…ç½®æ–‡ä»¶ <em>VS</em>  HQé…ç½®æ–‡ä»¶</h1><h2 id="å®˜æ–¹yolov5s-v6-0ç‰ˆæœ¬çš„ç½‘ç»œç»“æ„é…ç½®"><a href="#å®˜æ–¹yolov5s-v6-0ç‰ˆæœ¬çš„ç½‘ç»œç»“æ„é…ç½®" class="headerlink" title="å®˜æ–¹yolov5s-v6.0ç‰ˆæœ¬çš„ç½‘ç»œç»“æ„é…ç½®"></a>å®˜æ–¹yolov5s-v6.0ç‰ˆæœ¬çš„ç½‘ç»œç»“æ„é…ç½®</h2><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># YOLOv5 ğŸš€ by Ultralytics, GPL-3.0 license</span><span class="token comment"># Parameters</span><span class="token key atrule">nc</span><span class="token punctuation">:</span> <span class="token number">80</span>  <span class="token comment"># number of classes</span><span class="token key atrule">depth_multiple</span><span class="token punctuation">:</span> <span class="token number">0.33</span>  <span class="token comment"># model depth multiple</span><span class="token key atrule">width_multiple</span><span class="token punctuation">:</span> <span class="token number">0.50</span>  <span class="token comment"># layer channel multiple</span><span class="token key atrule">anchors</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">]</span>  <span class="token comment"># P3/8</span>  <span class="token punctuation">-</span> <span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">61</span><span class="token punctuation">,</span> <span class="token number">62</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span><span class="token number">119</span><span class="token punctuation">]</span>  <span class="token comment"># P4/16</span>  <span class="token punctuation">-</span> <span class="token punctuation">[</span><span class="token number">116</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">156</span><span class="token punctuation">,</span><span class="token number">198</span><span class="token punctuation">,</span> <span class="token number">373</span><span class="token punctuation">,</span><span class="token number">326</span><span class="token punctuation">]</span>  <span class="token comment"># P5/32</span><span class="token comment"># YOLOv5 v6.0 backbone</span><span class="token key atrule">backbone</span><span class="token punctuation">:</span>  <span class="token comment"># [from, number, module, args]</span>  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 0-P1/2</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 1-P2/4</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 3-P3/8</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 5-P4/16</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 7-P5/32</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> SPPF<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 9</span>  <span class="token punctuation">]</span><span class="token comment"># YOLOv5 v6.0 head</span><span class="token key atrule">head</span><span class="token punctuation">:</span>  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> nn.Upsample<span class="token punctuation">,</span> <span class="token punctuation">[</span>None<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'nearest'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Concat<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># cat backbone P4</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token boolean important">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 13</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> nn.Upsample<span class="token punctuation">,</span> <span class="token punctuation">[</span>None<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'nearest'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Concat<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># cat backbone P3</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token boolean important">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 17 (P3/8-small)</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Concat<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># cat head P4</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token boolean important">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 20 (P4/16-medium)</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Concat<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># cat head P5</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token boolean important">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 23 (P5/32-large)</span>   <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Detect<span class="token punctuation">,</span> <span class="token punctuation">[</span>nc<span class="token punctuation">,</span> anchors<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># Detect(P3, P4, P5)</span>  <span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="HQé¡¹ç›®ä¸­å®é™…ä½¿ç”¨çš„ç½‘ç»œç»“æ„é…ç½®"><a href="#HQé¡¹ç›®ä¸­å®é™…ä½¿ç”¨çš„ç½‘ç»œç»“æ„é…ç½®" class="headerlink" title="HQé¡¹ç›®ä¸­å®é™…ä½¿ç”¨çš„ç½‘ç»œç»“æ„é…ç½®"></a>HQé¡¹ç›®ä¸­å®é™…ä½¿ç”¨çš„ç½‘ç»œç»“æ„é…ç½®</h2><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># YOLOv5 ğŸš€ by Ultralytics, GPL-3.0 license</span><span class="token comment"># Parameters</span><span class="token key atrule">nc</span><span class="token punctuation">:</span> <span class="token number">80</span>  <span class="token comment"># number of classes</span><span class="token key atrule">depth_multiple</span><span class="token punctuation">:</span> <span class="token number">0.33</span>  <span class="token comment"># model depth multiple</span><span class="token key atrule">width_multiple</span><span class="token punctuation">:</span> <span class="token number">0.50</span>  <span class="token comment"># layer channel multiple</span><span class="token key atrule">anchors</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span>  <span class="token comment"># P3/8</span>  <span class="token punctuation">-</span> <span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">]</span>  <span class="token comment"># P4/16</span>  <span class="token punctuation">-</span> <span class="token punctuation">[</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">,</span> <span class="token number">98</span><span class="token punctuation">,</span><span class="token number">108</span><span class="token punctuation">]</span>  <span class="token comment"># P5/32</span><span class="token comment"># YOLOv5 v6.0 backbone</span><span class="token key atrule">backbone</span><span class="token punctuation">:</span>  <span class="token comment"># [from, number, module, args]</span>  <span class="token comment"># [[-1, 1, Conv, [64, 6, 2, 2]],  # 0-P1/2</span>  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 0-P1/2</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 1-P2/4</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 3-P3/8</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 5-P4/16</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 7-P5/32</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> SPPF<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 9</span>  <span class="token punctuation">]</span><span class="token comment"># YOLOv5 v6.0 head</span><span class="token key atrule">head</span><span class="token punctuation">:</span>  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> nn.Upsample<span class="token punctuation">,</span> <span class="token punctuation">[</span>None<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'nearest'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Concat<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># cat backbone P4</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token boolean important">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 13</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> nn.Upsample<span class="token punctuation">,</span> <span class="token punctuation">[</span>None<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'nearest'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Concat<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># cat backbone P3</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token boolean important">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 17 (P3/8-small)</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Concat<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># cat head P4</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token boolean important">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 20 (P4/16-medium)</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Concat<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># cat head P5</span>   <span class="token punctuation">[</span><span class="token number">-1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> C3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token boolean important">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 23 (P5/32-large)</span>   <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Detect<span class="token punctuation">,</span> <span class="token punctuation">[</span>nc<span class="token punctuation">,</span> anchors<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># Detect(P3, P4, P5)</span>  <span class="token punctuation">]</span>  <span class="token comment"># ç›¸æ¯”ä¸åŸå§‹çš„yolov5sç½‘ç»œç»“æ„çš„ä¿®æ”¹ç‚¹ï¼š</span>  <span class="token comment"># - backboneä¸­çš„C3ç»“æ„ä½¿ç”¨Convä»£æ›¿</span>  <span class="token comment"># - headä¸­ä½¿ç”¨äº†C3ç»“æ„,ä½†æ˜¯æ²¡æœ‰ä½¿ç”¨add,C3æ­¤æ—¶ç­‰ä»·ä¸ä¸¤ä¸ªå·ç§¯çº§è”</span>  <span class="token comment"># - å·ç§¯å±‚çš„æ¿€æ´»å‡½æ•°æœ‰SiLUå‡½æ•°æ”¹ä¸ºäº†ReLUå‡½æ•°</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h1><h2 id="backboneä¸­çš„C3ç»“æ„ä½¿ç”¨Convä»£æ›¿"><a href="#backboneä¸­çš„C3ç»“æ„ä½¿ç”¨Convä»£æ›¿" class="headerlink" title="backboneä¸­çš„C3ç»“æ„ä½¿ç”¨Convä»£æ›¿"></a>backboneä¸­çš„C3ç»“æ„ä½¿ç”¨Convä»£æ›¿</h2><h2 id="headä¸­ä½¿ç”¨äº†C3ç»“æ„-ä½†æ˜¯æ²¡æœ‰ä½¿ç”¨add-C3æ­¤æ—¶ç­‰ä»·ä¸ä¸¤ä¸ªå·ç§¯çº§è”"><a href="#headä¸­ä½¿ç”¨äº†C3ç»“æ„-ä½†æ˜¯æ²¡æœ‰ä½¿ç”¨add-C3æ­¤æ—¶ç­‰ä»·ä¸ä¸¤ä¸ªå·ç§¯çº§è”" class="headerlink" title="headä¸­ä½¿ç”¨äº†C3ç»“æ„,ä½†æ˜¯æ²¡æœ‰ä½¿ç”¨add,C3æ­¤æ—¶ç­‰ä»·ä¸ä¸¤ä¸ªå·ç§¯çº§è”"></a>headä¸­ä½¿ç”¨äº†C3ç»“æ„,ä½†æ˜¯æ²¡æœ‰ä½¿ç”¨add,C3æ­¤æ—¶ç­‰ä»·ä¸ä¸¤ä¸ªå·ç§¯çº§è”</h2><h2 id="å·ç§¯å±‚çš„æ¿€æ´»å‡½æ•°æœ‰SiLUå‡½æ•°æ”¹ä¸ºäº†ReLUå‡½æ•°"><a href="#å·ç§¯å±‚çš„æ¿€æ´»å‡½æ•°æœ‰SiLUå‡½æ•°æ”¹ä¸ºäº†ReLUå‡½æ•°" class="headerlink" title="å·ç§¯å±‚çš„æ¿€æ´»å‡½æ•°æœ‰SiLUå‡½æ•°æ”¹ä¸ºäº†ReLUå‡½æ•°"></a>å·ç§¯å±‚çš„æ¿€æ´»å‡½æ•°æœ‰SiLUå‡½æ•°æ”¹ä¸ºäº†ReLUå‡½æ•°</h2>]]></content>
      
      
      <categories>
          
          <category> yolov5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> yolov5 </tag>
            
            <tag> ä¼˜åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ åŸºç¡€çŸ¥è¯†</title>
      <link href="/2023/05/29/shen-du-xue-xi-ji-chu-zhi-shi/"/>
      <url>/2023/05/29/shen-du-xue-xi-ji-chu-zhi-shi/</url>
      
        <content type="html"><![CDATA[<h1 id="ROI-Pooling"><a href="#ROI-Pooling" class="headerlink" title="ROI Pooling"></a>ROI Pooling</h1><h2 id="ä»€ä¹ˆæ˜¯ROIï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ROIï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ROIï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ROIï¼Ÿ</h2><p>ROIæ˜¯ Region of interest çš„ç®€å†™ï¼ŒæŒ‡çš„æ˜¯ Faster R-CNN ç»“æ„ä¸­ï¼Œç»è¿‡ RPN å±‚åï¼Œäº§ç”Ÿçš„ proposal å¯¹åº”çš„ box æ¡†ã€‚</p><p>ROI Pooling é¡¾åæ€ä¹‰ï¼Œæ˜¯ pooling å±‚çš„ä¸€ç§ï¼Œè€Œä¸”æ˜¯é’ˆå¯¹ ROIs çš„ poolingã€‚æ•´ä¸ª ROI çš„è¿‡ç¨‹ï¼Œå°±æ˜¯å°†è¿™äº› proposal æŠ å‡ºæ¥çš„è¿‡ç¨‹ï¼Œå¾—åˆ°å¤§å°ç»Ÿä¸€çš„ feature mapã€‚</p><h2 id="ROI-Pooling-çš„è¾“å…¥"><a href="#ROI-Pooling-çš„è¾“å…¥" class="headerlink" title="ROI Pooling çš„è¾“å…¥"></a>ROI Pooling çš„è¾“å…¥</h2><p>ROI Pooling è¯¥å±‚æœ‰ä¸¤ä¸ªè¾“å…¥ï¼š</p><ol><li>ä»å…·æœ‰å¤šä¸ªå·ç§¯æ ¸æ± åŒ–çš„æ·±åº¦ç½‘ç»œä¸­è·å¾—çš„å›ºå®šå¤§å°çš„feature mapsï¼›</li><li>ä¸€ä¸ªè¡¨ç¤ºæ‰€æœ‰ ROI çš„ N*5 çš„çŸ©é˜µï¼Œå…¶ä¸­Nè¡¨ç¤ºROIçš„æ•°ç›®ã€‚ä¸€åˆ—è¡¨ç¤ºå›¾åƒindexï¼Œå…¶ä½™å››åˆ—è¡¨ç¤ºå…¶ä½™çš„å·¦ä¸Šè§’å’Œå³ä¸‹è§’åæ ‡ï¼›</li></ol><h2 id="ROI-Pooling-çš„è¾“å‡º"><a href="#ROI-Pooling-çš„è¾“å‡º" class="headerlink" title="ROI Pooling çš„è¾“å‡º"></a>ROI Pooling çš„è¾“å‡º</h2><p>è¾“å‡ºæ˜¯ batch ä¸ª vectorï¼Œå…¶ä¸­ batch çš„å€¼ç­‰äº roi çš„ä¸ªæ•°ï¼Œvectorçš„å¤§å°ä¸º channel âˆ— w âˆ— hï¼›ROI Pooling çš„è¿‡ç¨‹å°±æ˜¯å°†ä¸€ä¸ªä¸ªå¤§å°ä¸åŒçš„ box çŸ©å½¢æ¡†ï¼Œéƒ½æ˜ å°„æˆå¤§å°ä¸º w âˆ— h çš„çŸ©å½¢æ¡†ã€‚</p><p><img src="/../../../MyBlogImage1/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image.png"><br><img src="/../../../MyBlogImage1/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-1.png"></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å…ˆæŠŠ roi ä¸­çš„åæ ‡æ˜ å°„åˆ° feature map ä¸Šï¼Œæ˜ å°„è§„åˆ™æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯æŠŠå„ä¸ªåæ ‡é™¤ä»¥è¾“å…¥å›¾ç‰‡ä¸ feature map çš„å¤§å°çš„æ¯”å€¼ï¼Œå¾—åˆ°äº† feature map ä¸Šçš„ box åæ ‡åï¼Œæˆ‘ä»¬ä½¿ç”¨ pooling å¾—åˆ°è¾“å‡ºï¼›ç”±äºè¾“å…¥çš„å›¾ç‰‡å¤§å°ä¸ä¸€ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„ spp poolingï¼ˆç©ºé—´é‡‘å­—å¡”æ± åŒ–ï¼‰ï¼Œspp pooling åœ¨ pooling çš„è¿‡ç¨‹ä¸­éœ€è¦è®¡ç®— pooling åçš„ç»“æœå¯¹åº”çš„åƒç´ ç‚¹åæ˜ å°„åˆ° feature map ä¸Šæ‰€å çš„èŒƒå›´ï¼Œç„¶ååœ¨é‚£ä¸ªèŒƒå›´ä¸­è¿›è¡Œå– max æˆ–è€…å– averageã€‚ç†è§£èµ·æ¥æœ‰ç‚¹ç»•ï¼Œçœ‹åé¢ï¼Œä½ ä¼šè±ç„¶å¼€æœ—ã€‚</p><h2 id="ROI-poolingå…·ä½“æ“ä½œå¦‚ä¸‹"><a href="#ROI-poolingå…·ä½“æ“ä½œå¦‚ä¸‹" class="headerlink" title="ROI poolingå…·ä½“æ“ä½œå¦‚ä¸‹"></a>ROI poolingå…·ä½“æ“ä½œå¦‚ä¸‹</h2><ol><li>æ ¹æ®è¾“å…¥imageï¼Œå°† ROI æ˜ å°„åˆ° feature map å¯¹åº”ä½ç½®ï¼›</li><li>å°†æ˜ å°„åçš„åŒºåŸŸåˆ’åˆ†ä¸ºç›¸åŒå¤§å°çš„ sectionsï¼ˆsectionsæ•°é‡ä¸è¾“å‡ºçš„ç»´åº¦ç›¸åŒï¼‰ï¼›</li><li>å¯¹æ¯ä¸ª sections è¿›è¡Œ max pooling æ“ä½œï¼›</li></ol><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä»ä¸åŒå¤§å°çš„æ–¹æ¡†å¾—åˆ°å›ºå®šå¤§å°çš„ç›¸åº”çš„ feature mapsã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè¾“å‡ºçš„ feature maps çš„å¤§å°ä¸å–å†³äº ROI å’Œå·ç§¯ feature maps å¤§å°ã€‚ROI pooling æœ€å¤§çš„å¥½å¤„å°±åœ¨äºæå¤§åœ°æé«˜äº†å¤„ç†é€Ÿåº¦ã€‚</p><h2 id="ROI-pooling-example"><a href="#ROI-pooling-example" class="headerlink" title="ROI pooling example"></a>ROI pooling example</h2><p>æˆ‘ä»¬æœ‰ä¸€ä¸ª 8âˆ—8 å¤§å°çš„ feature mapï¼Œä¸€ä¸ªROIï¼Œä»¥åŠè¾“å‡ºå¤§å°ä¸º2âˆ—2.</p><p>è¾“å…¥çš„å›ºå®šå¤§å°çš„feature map<br><img src="/../../../MyBlogImage1/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-2.png"></p><p>region proposal æŠ•å½±ä¹‹åä½ç½®ï¼ˆå·¦ä¸Šè§’ï¼Œå³ä¸‹è§’åæ ‡ï¼‰ï¼š (0,3)ï¼Œ(7,8)ã€‚ </p><p><img src="/../../../MyBlogImage1/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-3.png"></p><p>å°†å…¶åˆ’åˆ†ä¸ºï¼ˆ2<em>2ï¼‰ä¸ª sectionsï¼ˆå› ä¸ºè¾“å‡ºå¤§å°ä¸º2</em>2ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ï¼š  </p><p><img src="/../../../MyBlogImage1/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-4.png"></p><p>å¯¹æ¯ä¸ªsectionåšmax poolingï¼Œå¯ä»¥å¾—åˆ°ï¼š  </p><p><img src="/../../../MyBlogImage1/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-5.png"></p><p>æ•´ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š<br><img src="/../../../MyBlogImage1/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/f95107258e128dac79e9bec44cb09941.gif">  </p><p>è¯´æ˜ï¼šåœ¨æ­¤æ¡ˆä¾‹ä¸­ region proposals æ˜¯ 5<em>7 å¤§å°çš„ï¼Œåœ¨ pooling ä¹‹åéœ€è¦å¾—åˆ° 2</em>2 çš„ï¼Œæ‰€ä»¥åœ¨ 5<em>7 çš„ç‰¹å¾å›¾åˆ’åˆ†æˆ 2</em>2 çš„æ—¶å€™ä¸æ˜¯ç­‰åˆ†çš„ï¼Œè¡Œæ˜¯ 5&#x2F;2ï¼Œç¬¬ä¸€è¡Œå¾—åˆ°2ï¼Œå‰©ä¸‹çš„é‚£ä¸€è¡Œæ˜¯3ï¼Œåˆ—æ˜¯7&#x2F;2ï¼Œç¬¬ä¸€åˆ—å¾—åˆ°3ï¼Œå‰©ä¸‹é‚£ä¸€åˆ—æ˜¯4ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> åŸºç¡€çŸ¥è¯† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å•ä¾‹æ¨¡å¼</title>
      <link href="/2023/05/19/dan-li-mo-shi/"/>
      <url>/2023/05/19/dan-li-mo-shi/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h1><ul><li>å½“å­˜åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªå˜é‡ä»…åˆå§‹åŒ–ä¸€æ¬¡ï¼Œå´è¢«å¤šä¸ªæ–‡ä»¶å¤šæ¬¡ä½¿ç”¨çš„æƒ…å†µä¸‹è€ƒè™‘å•ä¾‹æ¨¡å¼</li><li>å¯å®ç°ä¸€æ¬¡åˆå§‹åŒ–ï¼Œå¤šæ–‡ä»¶å¤šæ¬¡ä½¿ç”¨</li><li>ä¾‹å¦‚ ï¼šç›¸æœºçš„å†…å‚å’Œå¤–å‚ä¸€èˆ¬åªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œç„¶åç›´æ¥ä½¿ç”¨ã€‚</li></ul><h1 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h1><h1 id="å£°æ˜ä¸å®šä¹‰"><a href="#å£°æ˜ä¸å®šä¹‰" class="headerlink" title="å£°æ˜ä¸å®šä¹‰"></a>å£°æ˜ä¸å®šä¹‰</h1><h3 id="ParametersInit-h"><a href="#ParametersInit-h" class="headerlink" title="ParametersInit.h"></a>ParametersInit.h</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">__PARAMETERS_INIT_H__</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">__PARAMETERS_INIT_H__</span></span><span class="token comment">// for thread-safe singleton</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token keyword">class</span> <span class="token class-name">ParametersInit</span><span class="token punctuation">&#123;</span><span class="token keyword">private</span><span class="token operator">:</span>    <span class="token keyword">static</span> ParametersInit <span class="token operator">*</span>m_instance<span class="token punctuation">;</span>    <span class="token keyword">static</span> pthread_once_t _once<span class="token punctuation">;</span>    <span class="token keyword">int</span> m_test<span class="token punctuation">;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token function">ParametersInit</span><span class="token punctuation">(</span><span class="token comment">/* args */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">~</span><span class="token function">ParametersInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//ä½¿ç”¨pthread_onceä¿è¯init()åªè°ƒç”¨ä¸€æ¬¡</span>    <span class="token keyword">static</span> ParametersInit <span class="token operator">*</span><span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">camParametersInit</span><span class="token punctuation">(</span><span class="token keyword">int</span> in_test<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> <span class="token function">getTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ParametersInit-cpp"><a href="#ParametersInit-cpp" class="headerlink" title="ParametersInit.cpp"></a>ParametersInit.cpp</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"../inc/ParametersInit.h"</span></span><span class="token comment">// é™æ€æˆå‘˜å‡½æ•°å¿…é¡»åˆå§‹åŒ–åä½¿ç”¨</span>pthread_once_t ParametersInit<span class="token double-colon punctuation">::</span>_once <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>ParametersInit <span class="token operator">*</span>ParametersInit<span class="token double-colon punctuation">::</span>m_instance<span class="token operator">=</span><span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token class-name">ParametersInit</span><span class="token double-colon punctuation">::</span><span class="token function">ParametersInit</span><span class="token punctuation">(</span><span class="token comment">/* args */</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token class-name">ParametersInit</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">ParametersInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token class-name">ParametersInit</span><span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>m_instance<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        m_instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ParametersInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>ParametersInit <span class="token operator">*</span><span class="token class-name">ParametersInit</span><span class="token double-colon punctuation">::</span><span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">pthread_once</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>_once<span class="token punctuation">,</span> ParametersInit<span class="token double-colon punctuation">::</span>init<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> m_instance<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token class-name">ParametersInit</span><span class="token double-colon punctuation">::</span><span class="token function">camParametersInit</span><span class="token punctuation">(</span><span class="token keyword">int</span> in_test<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    m_test <span class="token operator">=</span> in_test<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token class-name">ParametersInit</span><span class="token double-colon punctuation">::</span><span class="token function">getTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> m_test<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><h3 id="init-cpp"><a href="#init-cpp" class="headerlink" title="init.cpp"></a>init.cpp</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ParametersInit.h"</span></span>ParametersInit <span class="token operator">*</span>m_Instance <span class="token operator">=</span> <span class="token class-name">ParametersInit</span><span class="token double-colon punctuation">::</span><span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>m_Instance<span class="token operator">-></span><span class="token function">camParametersInit</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="use1-cpp"><a href="#use1-cpp" class="headerlink" title="use1.cpp"></a>use1.cpp</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ParametersInit.h"</span></span>ParametersInit <span class="token operator">*</span>m_Instance <span class="token operator">=</span> <span class="token class-name">ParametersInit</span><span class="token double-colon punctuation">::</span><span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è¿™é‡Œå¯ä»¥ç›´æ¥ä½¿ç”¨init.cppåˆå§‹åŒ–çš„å‚æ•°ParametersInit::m_test</span><span class="token keyword">int</span> m_test <span class="token operator">=</span> m_Instance<span class="token operator">-></span><span class="token function">getTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//m_test=100</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>å‚è€ƒç½‘ç«™: <a href="https://blog.csdn.net/CoderAldrich/article/details/83114881">https://blog.csdn.net/CoderAldrich/article/details/83114881</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
            <tag> å•ä¾‹æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++å¤šçº¿ç¨‹å¸¸ç”¨æ¡ˆä¾‹</title>
      <link href="/2023/05/10/c-duo-xian-cheng-chang-yong-an-li/"/>
      <url>/2023/05/10/c-duo-xian-cheng-chang-yong-an-li/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¡ˆä¾‹1"><a href="#æ¡ˆä¾‹1" class="headerlink" title="æ¡ˆä¾‹1"></a>æ¡ˆä¾‹1</h1><h2 id="æ¡ˆä¾‹è¯´æ˜"><a href="#æ¡ˆä¾‹è¯´æ˜" class="headerlink" title="æ¡ˆä¾‹è¯´æ˜"></a>æ¡ˆä¾‹è¯´æ˜</h2><p>ä½¿ç”¨C++11 stdåº“ä¸­çš„çº¿ç¨‹å’Œæ¡ä»¶å˜é‡å®ç°notify_oneçš„ä¸€ä¸ªç®€å•ä¾‹å­ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªçº¿ç¨‹å‘ä¸€ä¸ªé˜Ÿåˆ—ä¸­æ·»åŠ å…ƒç´ ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä»é˜Ÿåˆ—ä¸­åˆ é™¤å…ƒç´ ã€‚çº¿ç¨‹é€šè¿‡æ¡ä»¶å˜é‡è¿›è¡ŒåŒæ­¥ã€‚</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;thread></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;queue></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mutex></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;condition_variable></span></span>std<span class="token double-colon punctuation">::</span>queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> queue<span class="token punctuation">;</span>std<span class="token double-colon punctuation">::</span>mutex mtx<span class="token punctuation">;</span>std<span class="token double-colon punctuation">::</span>condition_variable cv<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">producer</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> value<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        std<span class="token double-colon punctuation">::</span>this_thread<span class="token double-colon punctuation">::</span><span class="token function">sleep_for</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>chrono<span class="token double-colon punctuation">::</span><span class="token function">seconds</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ¨¡æ‹Ÿç”Ÿäº§</span>        std<span class="token double-colon punctuation">::</span>lock_guard<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>mutex<span class="token operator">></span> <span class="token function">lock</span><span class="token punctuation">(</span>mtx<span class="token punctuation">)</span><span class="token punctuation">;</span>        queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Produced: "</span> <span class="token operator">&lt;&lt;</span> i <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>        cv<span class="token punctuation">.</span><span class="token function">notify_one</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é€šçŸ¥æ¶ˆè´¹è€…</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">consumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        std<span class="token double-colon punctuation">::</span>unique_lock<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>mutex<span class="token operator">></span> <span class="token function">lock</span><span class="token punctuation">(</span>mtx<span class="token punctuation">)</span><span class="token punctuation">;</span>        cv<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span>lock<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span> <span class="token keyword">return</span> <span class="token operator">!</span>queue<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç­‰å¾…ç›´åˆ°é˜Ÿåˆ—ä¸ä¸ºç©º</span>        <span class="token keyword">int</span> value <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        queue<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Consumed: "</span> <span class="token operator">&lt;&lt;</span> value <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    std<span class="token double-colon punctuation">::</span>thread <span class="token function">t1</span><span class="token punctuation">(</span>producer<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    std<span class="token double-colon punctuation">::</span>thread <span class="token function">t2</span><span class="token punctuation">(</span>consumer<span class="token punctuation">)</span><span class="token punctuation">;</span>    t1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    t2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç”Ÿäº§è€…çº¿ç¨‹åœ¨æ¯æ¬¡æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°é˜Ÿåˆ—åéƒ½ä¼šè°ƒç”¨notify_one()æ¥é€šçŸ¥æ¶ˆè´¹è€…çº¿ç¨‹ã€‚æ¶ˆè´¹è€…çº¿ç¨‹åœ¨wait()å‡½æ•°ä¸­ç­‰å¾…ï¼Œç›´åˆ°æ”¶åˆ°é€šçŸ¥å¹¶ä¸”é˜Ÿåˆ—ä¸ä¸ºç©ºæ‰ä¼šç»§ç»­æ‰§è¡Œã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶åœ¨ä¸Šè¿°ä»£ç ä¸­æˆ‘ä»¬çš„æ¶ˆè´¹è€…çº¿ç¨‹æ˜¯ä¸€ä¸ªæ— é™å¾ªç¯ï¼Œä½†åœ¨å®é™…çš„ç¨‹åºä¸­ï¼Œä½ éœ€è¦æœ‰ä¸€ç§æœºåˆ¶æ¥ç»“æŸè¿™ä¸ªçº¿ç¨‹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ™ºèƒ½æŒ‡é’ˆçš„ä½¿ç”¨</title>
      <link href="/2023/05/10/zhi-neng-zhi-zhen-de-shi-yong/"/>
      <url>/2023/05/10/zhi-neng-zhi-zhen-de-shi-yong/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>åœ¨ C++ ä¸­ï¼Œæ™ºèƒ½æŒ‡é’ˆæ˜¯ä¸€ç§å¯¹è±¡ï¼Œå®ƒå¤„ç†å†…å­˜ç®¡ç†çš„é—®é¢˜ï¼Œä½¿ç¨‹åºå‘˜æ›´åŠ ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘è€Œä¸æ˜¯å†…å­˜ç®¡ç†ã€‚C++ æ ‡å‡†åº“ä¸­æä¾›äº†å‡ ç§ç±»å‹çš„æ™ºèƒ½æŒ‡é’ˆï¼ŒåŒ…æ‹¬ï¼š</p><ul><li><p><code>std::unique_ptr</code>: å®ƒä»£è¡¨ç‹¬å æ‰€æœ‰æƒçš„æ¦‚å¿µã€‚ä¸€ä¸ª <code>std::unique_ptr</code> å¯¹è±¡åœ¨ä»»ä½•æ—¶é—´éƒ½æ‹¥æœ‰å®ƒæ‰€æŒ‡å‘çš„å¯¹è±¡ã€‚å½“ <code>std::unique_ptr</code> è¢«é”€æ¯ï¼ˆä¾‹å¦‚ï¼Œå½“ç¦»å¼€å…¶ä½œç”¨åŸŸæ—¶ï¼‰ï¼Œå®ƒæ‰€æŒ‡å‘çš„å¯¹è±¡ä¹Ÿä¼šè¢«é”€æ¯ï¼ˆå³è°ƒç”¨å…¶ææ„å‡½æ•°ï¼‰ã€‚</p></li><li><p><code>std::shared_ptr</code>: å®ƒä»£è¡¨å…±äº«æ‰€æœ‰æƒçš„æ¦‚å¿µã€‚å¤šä¸ª <code>std::shared_ptr</code> å¯¹è±¡å¯ä»¥æ‹¥æœ‰åŒä¸€ä¸ªå¯¹è±¡ã€‚å½“æœ€åä¸€ä¸ªæ‹¥æœ‰è¯¥å¯¹è±¡çš„ <code>std::shared_ptr</code> è¢«é”€æ¯æ—¶ï¼Œå®ƒæ‰€æŒ‡å‘çš„å¯¹è±¡ä¹Ÿä¼šè¢«é”€æ¯ã€‚</p></li><li><p><code>std::weak_ptr</code>: å®ƒæ˜¯ä¸ºäº†é…åˆ <code>std::shared_ptr</code> è€Œå­˜åœ¨çš„ï¼Œå®ƒæä¾›äº†ä¸€ç§æ–¹å¼è®¿é—® <code>std::shared_ptr</code> æ‰€ç®¡ç†çš„å¯¹è±¡ï¼Œä½†æ˜¯ä¸å¢åŠ å¼•ç”¨è®¡æ•°ã€‚è¿™å¯¹äºè§£å†³ <code>std::shared_ptr</code> å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼ˆå³ï¼Œä¸¤ä¸ª <code>std::shared_ptr</code> ç›¸äº’å¼•ç”¨ï¼Œå¯¼è‡´å®ƒä»¬éƒ½ä¸ä¼šè¢«é”€æ¯ï¼‰æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚</p></li></ul><p>æ™ºèƒ½æŒ‡é’ˆçš„ä½¿ç”¨å¯ä»¥æå¤§åœ°ç®€åŒ–å†…å­˜ç®¡ç†ï¼Œé¿å…å†…å­˜æ³„æ¼å’Œå…¶ä»–ä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†ç›¸å…³çš„é”™è¯¯ã€‚ç„¶è€Œï¼Œå®ƒä»¬å¹¶ä¸èƒ½è§£å†³æ‰€æœ‰çš„å†…å­˜ç®¡ç†é—®é¢˜ï¼Œä»ç„¶éœ€è¦ç¨‹åºå‘˜å°å¿ƒè°¨æ…åœ°è®¾è®¡ä»–ä»¬çš„ä»£ç ã€‚</p><h1 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h1><h2 id="std-unique-ptrç¤ºä¾‹"><a href="#std-unique-ptrç¤ºä¾‹" class="headerlink" title="std::unique_ptrç¤ºä¾‹"></a><code>std::unique_ptr</code>ç¤ºä¾‹</h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;memory></span></span><span class="token keyword">struct</span> <span class="token class-name">Foo</span> <span class="token punctuation">&#123;</span>    <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Foo::Foo\n"</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>    <span class="token operator">~</span><span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Foo::~Foo\n"</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>    <span class="token keyword">void</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Foo::bar\n"</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">const</span> Foo <span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"f(const Foo&amp;)\n"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    std<span class="token double-colon punctuation">::</span>unique_ptr<span class="token operator">&lt;</span>Foo<span class="token operator">></span> <span class="token function">p1</span><span class="token punctuation">(</span><span class="token keyword">new</span> Foo<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// p1 ç‹¬å  Foo</span>    p1<span class="token operator">-></span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è¾“å‡º "Foo::bar"</span>    <span class="token punctuation">&#123;</span>        std<span class="token double-colon punctuation">::</span>unique_ptr<span class="token operator">&lt;</span>Foo<span class="token operator">></span> <span class="token function">p2</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">move</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ç°åœ¨ p2 ç‹¬å  Foo</span>        <span class="token function">f</span><span class="token punctuation">(</span><span class="token operator">*</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span>        p1 <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">move</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ç°åœ¨ p1 ç‹¬å  Foo</span>    <span class="token punctuation">&#125;</span>    p1<span class="token operator">-></span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è¾“å‡º "Foo::bar"</span>    <span class="token comment">// Foo çš„ææ„å™¨åœ¨è¿™é‡Œè¢«è°ƒç”¨ï¼Œå› ä¸º p1 è¢«é”€æ¯</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="std-shared-ptrç¤ºä¾‹"><a href="#std-shared-ptrç¤ºä¾‹" class="headerlink" title="std::shared_ptrç¤ºä¾‹"></a><code>std::shared_ptr</code>ç¤ºä¾‹</h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;memory></span></span><span class="token keyword">struct</span> <span class="token class-name">Foo</span> <span class="token punctuation">&#123;</span>    <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Foo::Foo\n"</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>    <span class="token operator">~</span><span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Foo::~Foo\n"</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>    <span class="token keyword">void</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Foo::bar\n"</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    std<span class="token double-colon punctuation">::</span>shared_ptr<span class="token operator">&lt;</span>Foo<span class="token operator">></span> p1 <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">make_shared</span><span class="token generic class-name"><span class="token operator">&lt;</span>Foo<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// è¿™é‡Œï¼Œæˆ‘ä»¬ä¸å†éœ€è¦ä½¿ç”¨ newã€‚std::make_shared æ˜¯ä¸€ä¸ªæ›´å®‰å…¨ï¼Œæ›´é«˜æ•ˆçš„æ–¹å¼æ¥åˆ†é…å…±äº«å¯¹è±¡ã€‚</span>        p1<span class="token operator">-></span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è¾“å‡º "Foo::bar"</span>    <span class="token punctuation">&#123;</span>        std<span class="token double-colon punctuation">::</span>shared_ptr<span class="token operator">&lt;</span>Foo<span class="token operator">></span> p2 <span class="token operator">=</span> p1<span class="token punctuation">;</span>        p2<span class="token operator">-></span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è¾“å‡º "Foo::bar"</span>        <span class="token comment">// Foo çš„å®ä¾‹ä»æœªè¢«åˆ é™¤ï¼Œå› ä¸º p1 å’Œ p2 éƒ½è¿˜åœ¨ä½œç”¨åŸŸå†…</span>    <span class="token punctuation">&#125;</span>        p1<span class="token operator">-></span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è¾“å‡º "Foo::bar"</span>        <span class="token comment">// Foo çš„ææ„å™¨åœ¨è¿™é‡Œè¢«è°ƒç”¨ï¼Œå› ä¸º p1 ç¦»å¼€äº†ä½œç”¨åŸŸ</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="std-weak-ptrç¤ºä¾‹"><a href="#std-weak-ptrç¤ºä¾‹" class="headerlink" title="std::weak_ptrç¤ºä¾‹"></a><code>std::weak_ptr</code>ç¤ºä¾‹</h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;memory></span></span><span class="token keyword">struct</span> <span class="token class-name">Foo</span> <span class="token punctuation">&#123;</span>    <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Foo::Foo\n"</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>    <span class="token operator">~</span><span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Foo::~Foo\n"</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    std<span class="token double-colon punctuation">::</span>weak_ptr<span class="token operator">&lt;</span>Foo<span class="token operator">></span> weak<span class="token punctuation">;</span>    <span class="token punctuation">&#123;</span>        std<span class="token double-colon punctuation">::</span>shared_ptr<span class="token operator">&lt;</span>Foo<span class="token operator">></span> shared <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">make_shared</span><span class="token generic class-name"><span class="token operator">&lt;</span>Foo<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        weak <span class="token operator">=</span> shared<span class="token punctuation">;</span>        <span class="token comment">// åœ¨ shared å­˜åœ¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ weak æ¥è·å–ä¸€ä¸ªæ–°çš„ shared_ptr å®ä¾‹</span>        <span class="token keyword">auto</span> p <span class="token operator">=</span> weak<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Object has not been deleted\n"</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// è¿™é‡Œï¼Œshared è¢«é”€æ¯ï¼Œå› æ­¤ Foo è¢«åˆ é™¤</span>    <span class="token comment">// å› ä¸º Foo å·²ç»è¢«åˆ é™¤ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½å†ä» weak ä¸­è·å–ä¸€ä¸ª shared_ptr</span>    <span class="token keyword">auto</span> p <span class="token operator">=</span> weak<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>p<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Object has been deleted\n"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å¸¸ç”¨æ–¹æ³•"><a href="#å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h1><h2 id="reset"><a href="#reset" class="headerlink" title="reset"></a>reset</h2><p>æ™ºèƒ½æŒ‡é’ˆçš„ reset æ–¹æ³•æ˜¯ç”¨äºé‡Šæ”¾æ™ºèƒ½æŒ‡é’ˆå½“å‰æ‹¥æœ‰çš„å¯¹è±¡ï¼Œå¹¶å¯èƒ½æ¥ç®¡æ–°çš„å¯¹è±¡ã€‚</p><p>ä»¥ä¸‹æ˜¯ std::unique_ptr å’Œ std::shared_ptr çš„ reset æ–¹æ³•çš„ä½¿ç”¨ï¼š</p><ul><li><code>std::unique_ptr</code> çš„ <code>reset</code> æ–¹æ³•</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;memory></span></span><span class="token keyword">struct</span> <span class="token class-name">Foo</span> <span class="token punctuation">&#123;</span>    <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">value</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Foo "</span> <span class="token operator">&lt;&lt;</span> value <span class="token operator">&lt;&lt;</span> <span class="token string">" constructed.\n"</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>    <span class="token operator">~</span><span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Foo "</span> <span class="token operator">&lt;&lt;</span> value <span class="token operator">&lt;&lt;</span> <span class="token string">" destructed.\n"</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> value<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    std<span class="token double-colon punctuation">::</span>unique_ptr<span class="token operator">&lt;</span>Foo<span class="token operator">></span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// p ç°åœ¨æŒ‡å‘ä¸€ä¸ªæ–°çš„ Foo å¯¹è±¡</span>    p<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// p é‡Šæ”¾æ—§çš„ Foo å¯¹è±¡å¹¶æŒ‡å‘ä¸€ä¸ªæ–°çš„ Foo å¯¹è±¡</span>    <span class="token comment">// åœ¨è¿™ä¸€æ­¥ï¼Œ"Foo 1 destructed." è¢«æ‰“å°åˆ°æ§åˆ¶å°</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>std::shared_ptr</code> çš„ <code>reset</code> æ–¹æ³•</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;memory></span></span><span class="token keyword">struct</span> <span class="token class-name">Foo</span> <span class="token punctuation">&#123;</span>    <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">value</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Foo "</span> <span class="token operator">&lt;&lt;</span> value <span class="token operator">&lt;&lt;</span> <span class="token string">" constructed.\n"</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>    <span class="token operator">~</span><span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Foo "</span> <span class="token operator">&lt;&lt;</span> value <span class="token operator">&lt;&lt;</span> <span class="token string">" destructed.\n"</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> value<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    std<span class="token double-colon punctuation">::</span>shared_ptr<span class="token operator">&lt;</span>Foo<span class="token operator">></span> p1 <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">make_shared</span><span class="token generic class-name"><span class="token operator">&lt;</span>Foo<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// p1 ç°åœ¨æŒ‡å‘ä¸€ä¸ªæ–°çš„ Foo å¯¹è±¡</span>    std<span class="token double-colon punctuation">::</span>shared_ptr<span class="token operator">&lt;</span>Foo<span class="token operator">></span> p2 <span class="token operator">=</span> p1<span class="token punctuation">;</span>  <span class="token comment">// p2 ä¹ŸæŒ‡å‘åŒä¸€ä¸ª Foo å¯¹è±¡</span>    p1<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// p1 é‡Šæ”¾æ—§çš„ Foo å¯¹è±¡å¹¶æŒ‡å‘ä¸€ä¸ªæ–°çš„ Foo å¯¹è±¡</span>    <span class="token comment">// ä½†æ˜¯ï¼Œ"Foo 1 destructed." å¹¶æœªè¢«æ‰“å°åˆ°æ§åˆ¶å°ï¼Œå› ä¸º p2 ä»ç„¶æ‹¥æœ‰å®ƒ</span>    p2<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// p2 é‡Šæ”¾å®ƒçš„ Foo å¯¹è±¡</span>    <span class="token comment">// åœ¨è¿™ä¸€æ­¥ï¼Œ"Foo 1 destructed." è¢«æ‰“å°åˆ°æ§åˆ¶å°</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> æ™ºèƒ½æŒ‡é’ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç±»çš„å°è£…ä¸å‡½æ•°ç»‘å®šç”¨æ³•è§£æ</title>
      <link href="/2023/05/10/lei-de-feng-zhuang-yu-han-shu-bang-ding-yong-fa-jie-xi/"/>
      <url>/2023/05/10/lei-de-feng-zhuang-yu-han-shu-bang-ding-yong-fa-jie-xi/</url>
      
        <content type="html"><![CDATA[<h1 id="ç±»çš„å°è£…"><a href="#ç±»çš„å°è£…" class="headerlink" title="ç±»çš„å°è£…"></a>ç±»çš„å°è£…</h1><h2 id="ä½ç½®"><a href="#ä½ç½®" class="headerlink" title="ä½ç½®"></a>ä½ç½®</h2><p>src&#x2F;adas_proc&#x2F;adas_app&#x2F;adas_app.cpp â€”&gt; 629è¡Œ</p><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">using</span> AdasProcWrapper <span class="token operator">=</span> ac<span class="token double-colon punctuation">::</span>ObjWrapper<span class="token operator">&lt;</span>ac<span class="token double-colon punctuation">::</span>AdasProcInterface<span class="token punctuation">,</span> HAC_CreateAdasProc<span class="token punctuation">,</span> HAC_DestroyAdasProc<span class="token operator">></span><span class="token punctuation">;</span>AdasProcWrapper                        adas_proc_<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><code>AdasProcWrapper</code> æ˜¯ä¸€ä¸ªç±»å‹åˆ«åï¼ˆusing å£°æ˜ï¼‰ï¼Œç”¨äºå®šä¹‰ <code>adas_proc_</code>å¯¹è±¡ã€‚å®ƒæ˜¯ç”± <code>ac::ObjWrapper</code> æ¨¡æ¿ç±»å®ä¾‹åŒ–è€Œæ¥ã€‚  </li><li><code>ac::ObjWrapper</code> æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œæ¥å—ä¸‰ä¸ªæ¨¡æ¿å‚æ•°ï¼š<code>ac::AdasProcInterfaceã€HAC_CreateAdasProc å’Œ HAC_DestroyAdasProc</code>ã€‚</li></ul><p>ObjWrapperæ¨¡æ¿ç±»çš„å®šä¹‰å¦‚ä¸‹:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">/** * @brief ä¸€ä¸ªç®€å•çš„wrapper */</span><span class="token keyword">using</span> ObjCreateType  <span class="token operator">=</span> <span class="token function">HAC_Handle</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">using</span> ObjDestroyType <span class="token operator">=</span> <span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>HAC_Handle<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token punctuation">,</span> ObjCreateType Create<span class="token punctuation">,</span> ObjDestroyType Destroy<span class="token operator">></span><span class="token keyword">class</span> <span class="token class-name">ObjWrapper</span> <span class="token keyword">final</span><span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">explicit</span> <span class="token function">ObjWrapper</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>config<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        obj_ <span class="token operator">=</span> <span class="token generic-function"><span class="token function">reinterpret_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>T <span class="token operator">*</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">Create</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj_ <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">throw</span> <span class="token function">StringException</span><span class="token punctuation">(</span><span class="token function">StringFormatWithPrefix</span><span class="token punctuation">(</span><span class="token string">"error: Create obj failed."</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">ObjWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token operator">~</span><span class="token function">ObjWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">reinterpret_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>HAC_Handle<span class="token operator">></span></span></span><span class="token punctuation">(</span>obj_<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    T <span class="token operator">*</span><span class="token keyword">operator</span><span class="token operator">-></span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj_ <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">throw</span> <span class="token function">StringException</span><span class="token punctuation">(</span><span class="token function">StringFormatWithPrefix</span><span class="token punctuation">(</span><span class="token string">"error: obj is nullptr."</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> obj_<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    T <span class="token operator">*</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> obj_<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">void</span> <span class="token function">Reset</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>config<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">auto</span> obj <span class="token operator">=</span> <span class="token generic-function"><span class="token function">reinterpret_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>T <span class="token operator">*</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">Create</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">throw</span> <span class="token function">StringException</span><span class="token punctuation">(</span><span class="token function">StringFormatWithPrefix</span><span class="token punctuation">(</span><span class="token string">"error: Create obj failed."</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">reinterpret_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>HAC_Handle<span class="token operator">></span></span></span><span class="token punctuation">(</span>obj_<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        obj_ <span class="token operator">=</span> obj<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">ObjWrapper</span><span class="token punctuation">(</span><span class="token keyword">const</span> ObjWrapper <span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span>    ObjWrapper<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> ObjWrapper <span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span><span class="token keyword">private</span><span class="token operator">:</span>    T <span class="token operator">*</span>obj_ <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”±æ¨¡æ¿ç±»çš„å®šä¹‰å¯çŸ¥ï¼Œè¯¥æ¨¡æ¿ç±»æœ‰ä¸‰ä¸ªæ¨¡æ¿å‚æ•°ï¼š</p><ul><li><code>typename T</code>ï¼šè¿™æ˜¯ä¸€ä¸ªç±»å‹å‚æ•°ï¼Œç”¨äºæŒ‡å®šè¢«åŒ…è£…çš„å¯¹è±¡çš„ç±»å‹ã€‚</li><li><code>ObjCreateType Create</code>ï¼šè¿™æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆç±»å‹ï¼Œç”¨äºæŒ‡å®šåˆ›å»ºå¯¹è±¡çš„å‡½æ•°ã€‚</li><li><code>ObjDestroyType Destroy</code>ï¼šè¿™æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆç±»å‹ï¼Œç”¨äºæŒ‡å®šé”€æ¯å¯¹è±¡çš„å‡½æ•°ã€‚</li></ul><p>å› æ­¤ï¼Œ<code>AdasProcWrapper</code> ç±»å‹çš„ <code>adas_proc_</code> å¯¹è±¡æ˜¯ä¸€ä¸ªä½¿ç”¨ <code>ac::ObjWrapper</code> å°è£…çš„ ADAS å¤„ç†å®ä¾‹ã€‚è¿™ä¸ªå°è£…æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼æ¥åˆ›å»ºå’Œé”€æ¯ ADAS å¤„ç†å®ä¾‹ï¼Œå¹¶æä¾›äº† ADAS å¤„ç†æ¥å£çš„è®¿é—®ã€‚<code>adas_proc_</code>ä¸ºå°è£…ç±»<code>ac::ObjWrapper</code>å®ä¾‹åŒ–åçš„å¯¹è±¡ã€‚</p><h2 id="å°è£…ç±»çš„ä½¿ç”¨1"><a href="#å°è£…ç±»çš„ä½¿ç”¨1" class="headerlink" title="å°è£…ç±»çš„ä½¿ç”¨1"></a>å°è£…ç±»çš„ä½¿ç”¨1</h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">adas_proc_<span class="token punctuation">.</span><span class="token function">Reset</span><span class="token punctuation">(</span>json_config_str<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å°è£…ç±»å¯¹è±¡adas_proc_è°ƒç”¨äº†æ¨¡æ¿ç±»<code>ac::ObjWrapper</code>ä¸­çš„<code>Reset</code>å‡½æ•°ï¼Œè¯¥å‡½æ•°è°ƒç”¨äº†æ¨¡æ¿ç±»åˆ›å»ºæ—¶ä¼ å…¥çš„å‚æ•°2ï¼š<code>HAC_CreateAdasProc</code>,è¯¥å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆç±»å‹ï¼Œç”¨äºæŒ‡å®šåˆ›å»ºå¯¹è±¡çš„å‡½æ•°ã€‚è¯¥å‡½æ•°çš„å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">/** * @brief åˆ›é€ å¯¹è±¡ * @param config jsonå­—ç¬¦ä¸²ï¼Œå‚è€ƒï¼Œassetsç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶,ä¼šä»ä¸­è¯»å–å„ç§é…ç½®ä¿¡æ¯ï¼Œ *               åŒ…æ‹¬æ‘„åƒå¤´ä¿¡æ¯ï¼Œæ¨¡å‹æ–‡ä»¶è·¯å¾„,ä»¥åŠå…¶ä»–é…ç½®ä¿¡æ¯ç­‰ç­‰ * @note å½“å¥æŸ„ä¸ä¸ºNULLæ—¶å€™ï¼Œæœ€åä¸€å®šè¦è°ƒç”¨HAC_DestroyAdasProcè¿›è¡Œé”€æ¯ï¼Œ *       å¦‚æœä¸ºNULLï¼Œè°ƒç”¨æˆ–è€…ä¸è°ƒç”¨HAC_DestroyAdasProcéƒ½å¯ä»¥ã€‚ * @return HAC_Handle å¥æŸ„,éœ€è¦åˆ¤æ–­è¿”å›å€¼æ˜¯å¦æ˜¯NULL */</span><span class="token keyword">extern</span> <span class="token string">"C"</span> HQ_FLAG_DLL_API HAC_Handle <span class="token function">HAC_CreateAdasProc</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>config<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token generic-function"><span class="token function">reinterpret_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>HAC_Handle<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> ac<span class="token double-colon punctuation">::</span><span class="token function">AdasProcImpl</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å°è£…ç±»çš„ä½¿ç”¨2"><a href="#å°è£…ç±»çš„ä½¿ç”¨2" class="headerlink" title="å°è£…ç±»çš„ä½¿ç”¨2"></a>å°è£…ç±»çš„ä½¿ç”¨2</h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">adas_proc_<span class="token operator">-></span><span class="token function">SetAdasInfoEvent</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>Impl<span class="token double-colon punctuation">::</span>OnAdasInfo<span class="token punctuation">,</span>            <span class="token keyword">this</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>placeholders<span class="token double-colon punctuation">::</span>_1<span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>placeholders<span class="token double-colon punctuation">::</span>_2<span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>placeholders<span class="token double-colon punctuation">::</span>_3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å…¶ä¸­ï¼Œ<code>SetAdasInfoEvent</code>å‡½æ•°çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token class-name">AdasProcImpl</span><span class="token double-colon punctuation">::</span><span class="token function">SetAdasInfoEvent</span><span class="token punctuation">(</span><span class="token keyword">const</span> AdasInfoEvent <span class="token operator">&amp;</span>event<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    on_adas_info_ <span class="token operator">=</span> event<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­ï¼Œ<code>OnAdasInfo</code>å‡½æ•°çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">OnAdasInfo</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">uint8_t</span> <span class="token operator">*</span>buffer<span class="token punctuation">,</span> <span class="token keyword">uint32_t</span> size<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> tickcount<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>     <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œå°±æœ‰ç‚¹ç»•äº†ï¼Œæ¨¡æ¿ç±»ä¸­å¹¶æ²¡æœ‰SetAdasInfoEventå‡½æ•°ï¼Œè¿™é‡Œæ€ä¹ˆèƒ½ä½¿ç”¨å‘¢ï¼Ÿå…¶å®è¿™ä¸ªå‡½æ•°çš„å®šä¹‰åœ¨<code>ac::AdasProcInterface</code>ç±»ä¸­ï¼Œç”±äºåœ¨æ¨¡æ¿ç±»ä¸­é‡è½½äº†<code>-&gt;</code>è¿ç®—ç¬¦ï¼Œå› æ­¤<code>adas_proc_-&gt;SetAdasInfoEvent</code>ä¸­çš„<code>-&gt;</code>æ˜¯è¢«é‡è½½åçš„è¿ç®—ç¬¦ï¼Œ<code>adas_proc_-&gt;</code>ç­‰åŒäº<code>adas_proc_.obj_</code>,æ•…<code>adas_proc_-&gt;SetAdasInfoEvent</code>ç­‰åŒäº<code>adas_proc_.obj_.SetAdasInfoEvent</code>ã€‚</p><p>è¿™é‡Œå°è£…ç±»é‡è½½äº†<code>-&gt;</code>è¿ç®—ç¬¦ï¼Œå› æ­¤çœ‹èµ·æ¥å°è£…åçš„ç±»å¯ä»¥ç›´æ¥è®¿é—®æ¨¡æ¿å‚æ•°1æŒ‡å‘ç±»<code>ac::AdasProcInterface</code>çš„æˆå‘˜å‡½æ•°ã€‚</p><p>åˆ°æ­¤ä¸ºæ­¢ï¼Œå¯ä»¥åŸºæœ¬äº†è§£å°è£…ç±»çš„å®šä¹‰å’Œä½¿ç”¨ç¤ºä¾‹ã€‚</p><h1 id="å‡½æ•°çš„ç»‘å®š"><a href="#å‡½æ•°çš„ç»‘å®š" class="headerlink" title="å‡½æ•°çš„ç»‘å®š"></a>å‡½æ•°çš„ç»‘å®š</h1><p>ç´§æ¥ä¸Šæ–‡ï¼Œåœ¨è°ƒç”¨<code>SetAdasInfoEvent</code>å‡½æ•°æ—¶ä½¿ç”¨äº†<code>std::bind</code>è¿›è¡Œäº†å‡½æ•°çš„ç»‘å®šã€‚<code>std::bind</code> æ˜¯ C++ æ ‡å‡†åº“ä¸­çš„ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ï¼Œå®ƒå…è®¸ä½ åˆ›å»ºä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå°†å‚æ•°ç»‘å®šåˆ°å¯è°ƒç”¨å¯¹è±¡ä¸Šã€‚å®ƒä½äº <code>&lt;functional&gt;</code> å¤´æ–‡ä»¶ä¸­ï¼Œç”¨äºæ³›åŒ–å‡½æ•°è°ƒç”¨ã€‚</p><p>std::bind å‡½æ•°å¯ä»¥å°†ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡å’Œä¸€äº›å‚æ•°ç»‘å®šåœ¨ä¸€èµ·ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„å‡½æ•°å¯¹è±¡ã€‚è¿™ä¸ªæ–°çš„å‡½æ•°å¯¹è±¡å¯ä»¥å»¶è¿Ÿæ‰§è¡Œæˆ–è€…åœ¨éœ€è¦æ—¶è¿›è¡Œè°ƒç”¨ï¼Œè€Œä¸”å¯ä»¥è‡ªå®šä¹‰ç»‘å®šçš„å‚æ•°ã€‚</p><p>å› æ­¤,è¿™é‡Œæ˜¯å°†<code>Impl::OnAdasInfo</code>ä¸å…¶å‚æ•°è¿›è¡Œç»‘å®šåç”Ÿæˆä¸€ä¸ªæ–°çš„å¯è°ƒç”¨å¯¹è±¡ï¼ŒåŒæ—¶å°†å…¶ä½œä¸ºå‡½æ•°<code>SetAdasInfoEvent</code>çš„å‚æ•°ä¼ é€’ç»™<code>on_adas_info_</code>,ä¹Ÿå°±æ˜¯è¯´<code>on_adas_info_=std::bind(&amp;Impl::OnAdasInfo, this, std::placeholders::_1, std::placeholders::_2, std::placeholders::_3)</code>ã€‚è¿™æ ·<code>on_adas_info_</code>å°±å¯ä»¥åœ¨ä½¿ç”¨æ—¶ä¼ é€’å‚æ•°å¹¶æ‰§è¡Œ<code>OnAdasInfo</code>å‡½æ•°ã€‚</p><p><code>on_adas_info_</code>çš„è°ƒç”¨åœºæ™¯å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token class-name">AdasProcImpl</span><span class="token double-colon punctuation">::</span><span class="token function">OnAlarmInfo</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">uint8_t</span> <span class="token operator">*</span>buffer<span class="token punctuation">,</span> <span class="token keyword">uint32_t</span> size<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> tickcount<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// è®¾ç½®è¾“å‡ºä¿¡æ¯åˆ°bufferä¸­</span>    <span class="token comment">// æŠŠå†³ç­–æ¨¡å—ä¼šæ‰å‡ºæ¥çš„å†…å®¹æ·»åŠ åˆ°out_buffer_ä¸­ï¼Œç„¶åå›è°ƒåˆ°å¤–é¢</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>on_adas_info_ <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">decltype</span><span class="token punctuation">(</span>out_buffer_<span class="token punctuation">)</span>  tmp<span class="token punctuation">;</span>        <span class="token punctuation">&#123;</span>                        std<span class="token double-colon punctuation">::</span>lock_guard<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>mutex<span class="token operator">></span> <span class="token function">lck</span><span class="token punctuation">(</span>buf_mutex_<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// æŠŠbufferä¸­å†…å®¹æ”¾å…¥out_bufferä¸­</span>            <span class="token keyword">const</span> <span class="token keyword">auto</span> out_buffer_length <span class="token operator">=</span> out_buffer_<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out_buffer_<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>out_buffer_length <span class="token operator">+</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>            std<span class="token double-colon punctuation">::</span><span class="token function">memcpy</span><span class="token punctuation">(</span>out_buffer_<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> out_buffer_length<span class="token punctuation">,</span> buffer<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>            tmp <span class="token operator">=</span> out_buffer_<span class="token punctuation">;</span>            out_buffer_<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token function">on_adas_info_</span><span class="token punctuation">(</span>tmp<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> tmp<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> tickcount<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ°æ­¤ä¸ºæ­¢ï¼Œå¯ä»¥åŸºæœ¬äº†è§£å‡½æ•°ç»‘å®šçš„å®šä¹‰å’Œä½¿ç”¨ç¤ºä¾‹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> ç±»çš„å°è£… </tag>
            
            <tag> å‡½æ•°ç»‘å®š </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++æ¥å£å®šä¹‰</title>
      <link href="/2023/05/10/c-jie-kou-ding-yi/"/>
      <url>/2023/05/10/c-jie-kou-ding-yi/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸ºä»€ä¹ˆè¦å®šä¹‰æ¥å£ç±»"><a href="#ä¸ºä»€ä¹ˆè¦å®šä¹‰æ¥å£ç±»" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å®šä¹‰æ¥å£ç±»?"></a>ä¸ºä»€ä¹ˆè¦å®šä¹‰æ¥å£ç±»?</h1><p>åœ¨è½¯ä»¶å¼€å‘è¿™ä¸ªè¡Œä¸šä¸­ï¼Œä¸€ä¸ªè¾ƒå¤§çš„è½¯ä»¶é¡¹ç›®ï¼Œä¸€èˆ¬ç”±å‡ ä¸ªå°ç»„å…±åŒå¼€å‘å®Œæˆï¼Œä¸ºäº†å°†å°ç»„ä¹‹é—´çš„å½±å“é™ä½åˆ°æœ€ä½ï¼Œå®šä¹‰å¥½æ¥å£è½¯ä»¶æˆä¸ºåŒæ–¹å…³æ³¨çš„ç„¦ç‚¹ï¼Œå¯¹äºè¦æ±‚åœ¨çŸ­æ—¶é—´å¼€å‘å®Œæˆçš„æ¥å£æ›´æ˜¯å¦‚æ­¤ã€‚é‚£ä¹ˆå¦‚ä½•æ‰èƒ½å®šä¹‰å¥½çš„æ¥å£å‘¢? ç¬¬ä¸€ï¼Œæ¥å£åå­—å’Œå®é™…çš„åŠŸèƒ½ç›¸ç¬¦åˆï¼›ç¬¬äºŒã€æ¥å£è¦å¯¹æ•°æ®è¿›è¡Œå°è£…ï¼Œä¸å…è®¸å®¢æˆ·ç›´æ¥æ“ä½œæ¥å£ä¹‹ä¸‹çš„æ•°æ®ï¼Œå°¤å…¶æ˜¯ä½¿ç”¨newå’Œdeleteåœ¨å †ä¸Šæ“ä½œå†…å­˜æ•°æ®ã€‚å› ä¸ºå®¢æˆ·å¾ˆå®¹æ˜“ç”±äºæ“ä½œä¸å½“é€ æˆé”™è¯¯ï¼Œè¯¯ä»¥ä¸ºæ˜¯è®¾è®¡çš„æ¥å£æœ‰é—®é¢˜ã€‚</p><h1 id="ä¸¤ç§å¸¸è§çš„æ¥å£å®šä¹‰æ–¹æ³•ï¼Ÿ"><a href="#ä¸¤ç§å¸¸è§çš„æ¥å£å®šä¹‰æ–¹æ³•ï¼Ÿ" class="headerlink" title="ä¸¤ç§å¸¸è§çš„æ¥å£å®šä¹‰æ–¹æ³•ï¼Ÿ"></a>ä¸¤ç§å¸¸è§çš„æ¥å£å®šä¹‰æ–¹æ³•ï¼Ÿ</h1><p>c++ä¸­å®ç°å¯¹æ¥å£ä¸å®ç°è¿›è¡Œåˆ†ç¦»æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯å°†å¯¹è±¡çš„å®ç°ç»†ç›®éšè—äºæŒ‡é’ˆèƒŒåï¼Œç®€å•çš„è¯´å°±æ˜¯å°†å…¶åˆ†æˆä¸¤ä¸ªç±»ï¼Œä¸€ä¸ªç±»åªæä¾›æ¥å£ï¼Œå¦ä¸€ä¸ªè´Ÿè´£å®ç°è¯¥æ¥å£ï¼Œè¿™ç§è®¾è®¡æ‰‹æ³•å¸¸ç§°ä¸ºPimpl Idiom(pointer to implementation)ã€‚<br>å¦ä¸€ç§æ–¹æ³•å°±æ˜¯å°†æ¥å£å®šä¹‰ä¸ºæŠ½è±¡ç±»ï¼Œæ¥å£å…¨è¢«å®šä¹‰ä¸ºçº¯è™šå‡½æ•°çš„å½¢å¼ï¼ˆçº¯è™šå‡½æ•°æ²¡æœ‰å…·ä½“çš„å®ç°æ–¹æ³•ï¼‰ï¼Œæ´¾ç”Ÿç±»çš„æˆå‘˜å‡½æ•°è´Ÿè´£å®ç°è¿™äº›æ¥å£ã€‚è¿™ç§è®¾è®¡æ‰‹æ³•ç§°ä¸ºå¯¹è±¡æ¥å£ï¼ˆObject Interfaceï¼‰ã€‚åƒä¸‡ä¸è¦å¿˜è®°æŠŠæŠ½è±¡æ¥å£ç±»çš„ææ„å‡½æ•°å®šä¹‰ä¸ºvirtualå‡½æ•°ï¼Œå¯èƒ½ä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚</p><h1 id="â€œå¯¹è±¡æ¥å£â€æ–¹å¼"><a href="#â€œå¯¹è±¡æ¥å£â€æ–¹å¼" class="headerlink" title="â€œå¯¹è±¡æ¥å£â€æ–¹å¼"></a>â€œå¯¹è±¡æ¥å£â€æ–¹å¼</h1><h2 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h2><h3 id="å¦‚ä½•å®šä¹‰"><a href="#å¦‚ä½•å®šä¹‰" class="headerlink" title="å¦‚ä½•å®šä¹‰?"></a>å¦‚ä½•å®šä¹‰?</h3><p>é¦–å…ˆç»™æ¥å£ç±»ä¸‹äº†å®šä¹‰ï¼šæ¥å£ç±»åº”è¯¥æ˜¯åªæä¾›æ–¹æ³•å£°æ˜ï¼Œè€Œè‡ªèº«ä¸æä¾›æ–¹æ³•å®šä¹‰çš„æŠ½è±¡ç±»ã€‚æ¥å£ç±»è‡ªèº«ä¸èƒ½å®ä¾‹åŒ–ï¼Œæ¥å£ç±»çš„æ–¹æ³•å®šä¹‰&#x2F;å®ç°åªèƒ½ç”±æ¥å£ç±»çš„å­ç±»æ¥å®Œæˆã€‚</p><p>è€Œå¯¹äºC++ï¼Œå…¶æ¥å£ç±»ä¸€èˆ¬å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</p><ul><li>1.æœ€å¥½ä¸è¦æœ‰æˆå‘˜å˜é‡ï¼Œä½†å¯ä»¥æœ‰é™æ€å¸¸é‡ï¼ˆstatic constæˆ–enumï¼‰</li><li>2.è¦æœ‰çº¯è™šæ¥å£æ–¹æ³•</li><li>3.è¦æœ‰è™šææ„å‡½æ•°ï¼Œå¹¶æä¾›é»˜è®¤å®ç°</li><li>4.ä¸è¦å£°æ˜æ„é€ å‡½æ•°</li></ul><p>å¦‚ä¸‹å°±æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Testable</span><span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">int</span> START <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// #1</span>    <span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">int</span> STOP <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>     <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">// #2ï¼š æ¥å£æ–¹æ³•</span>     <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">Testable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>   <span class="token comment">// #3ï¼š ä»C++11å¼€å§‹å¯ä»¥ï¼š virtual ~Testable() = default;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>#1.</code><br>å¦‚æœæˆå‘˜å˜é‡ï¼Œå°¤å…¶æ˜¯å¯å˜çš„æˆå‘˜å˜é‡ï¼Œå®šä¹‰åœ¨æ¥å£ä¸­ï¼Œç­‰äºæ˜¯æŠŠå®ç°ç»†èŠ‚æš´éœ²å‡ºæ¥äº†ï¼Œä¸ç¬¦åˆæ¥å£å®šä¹‰çš„è¦æ±‚ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸åœ¨æ¥å£ä¸­å®šä¹‰å¯å˜çš„æˆå‘˜å˜é‡ã€‚<br>è€Œå¸¸é‡å¯ä»¥å®šä¹‰åœ¨æ¥å£ä¸­ï¼Œå› ä¸ºæœ‰æ—¶æ¥å£éœ€è¦è¿”å›çŠ¶æ€ï¼Œè€Œè¿™äº›çŠ¶æ€å¯ä»¥å®šä¹‰æˆå¸¸é‡æ”¾åœ¨æ¥å£ä¸­ã€‚</p><p><code>#2.</code><br>ç”±äºä¸èƒ½è®©æ¥å£ç±»è‡ªèº«èƒ½å¤Ÿå®ä¾‹åŒ–ï¼Œå¹¶ä¸”éœ€è¦å­ç±»å¿…é¡»å®ç°æ¥å£æš´éœ²çš„æ–¹æ³•ï¼Œæ‰€ä»¥æ¥å£æ–¹æ³•éƒ½è¦å£°æ˜æˆçº¯è™šå‡½æ•°ã€‚<br>å£°æ˜æˆçº¯è™šå‡½æ•°æ„å‘³ç€æ¥å£ç±»è‡ªèº«ä¸éœ€è¦æä¾›æ–¹æ³•çš„å®šä¹‰ï¼Œæ–¹æ³•çš„å®šä¹‰éœ€è¦ç”±æ¥å£ç±»çš„å­ç±»æä¾›ï¼Œå¹¶ä¸”æ¥å£ç±»è‡ªèº«ä¹Ÿå› æ­¤å˜æˆäº†æŠ½è±¡ç±»è€Œä¸èƒ½è¢«å®ä¾‹åŒ–ã€‚</p><p><code>#3.</code><br>a). åœ¨ä½¿ç”¨æ¥å£ç±»çš„æŒ‡é’ˆè®¿é—®æ¥å£ç±»çš„å­ç±»çš„å®ä¾‹æ—¶ï¼Œå½“å¯¹æ¥å£ç±»çš„æŒ‡é’ˆåšdeleteæ—¶ï¼Œå¦‚æœæ¥å£ç±»çš„ææ„å‡½æ•°ä¸æ˜¯è™šææ„å‡½æ•°çš„è¯ï¼Œå°†åªä¼šè°ƒç”¨æ¥å£ç±»çš„ææ„å‡½æ•°ï¼Œæ¥å£ç±»çš„å­ç±»çš„ææ„å‡½æ•°å°†ä¸ä¼šè¢«è°ƒç”¨ï¼Œå†…å­˜æ³„éœ²å°†ä¼šäº§ç”Ÿï¼Œæ‰€ä»¥æ¥å£ç±»çš„ææ„å‡½æ•°å¿…é¡»å®šä¹‰æˆè™šææ„å‡½æ•°ã€‚<br>b). å¦‚æœæ¥å£ç±»çš„ææ„å‡½æ•°ä¸æä¾›é»˜è®¤å®ç°ï¼Œå³å¦‚æœæ¥å£ç±»çš„ææ„å‡½æ•°æ˜¯çº¯è™šææ„å‡½æ•°çš„è¯ï¼Œæ¥å£ç±»çš„å­ç±»å°†è¢«è¿«å¿…é¡»æä¾›ææ„å‡½æ•°çš„å®ç°ï¼Œè¿™æ ·å¯¹æ¥å£ç±»çš„å­ç±»ä¸å‹å¥½ã€‚<br>c). åœ¨C++11ä¸­ä¹Ÿå¯ä»¥ç”¨ï¼š  virtual ~Testable() &#x3D; default; æ›¿ä»£ virtual ~Testable() {};</p><p><code>#4.</code><br>ä¸è¦æ˜¾å¼å®šä¹‰ä»»ä½•çš„æ„é€ å‡½æ•°ï¼Œä½†ä¹Ÿä¸è¦åœ¨æ¥å£ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç æ¥ç¦æ­¢ç”Ÿæˆæ„é€ å‡½æ•°ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token function">Testable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span><span class="token function">Testable</span><span class="token punctuation">(</span><span class="token keyword">const</span> Testable<span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å› ä¸ºC++çš„è°ƒç”¨æœºåˆ¶è¦æ±‚å­ç±»çš„æ„é€ å‡½æ•°è°ƒç”¨æ—¶ä¸€å®šä¼šå…ˆè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå¦‚æœç¦æ­¢ç”Ÿæˆæ„é€ å‡½æ•°ï¼Œä»£ç ç¼–è¯‘æ—¶ä¼šæŠ¥é”™ã€‚å¦‚æœç¨‹åºå‘˜ä¸æ˜¾å¼çš„æä¾›æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šéšå¼çš„åŠ ä¸Šæ„é€ å‡½æ•°çš„ï¼Œè™½ç„¶è¿™äº›æ„é€ å‡½æ•°å¯¹äºæ¥å£ç±»æ¥è¯´å®é™…æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚</p><p>C++ä¸­å¦‚ä½•å®šä¹‰æ ‡è¯†æ¥å£ï¼ˆmarker interfaceï¼‰ç±»?<br>æ ‡è¯†æ¥å£æ˜¯æ²¡æœ‰ä»»ä½•æ–¹æ³•å’Œå±æ€§çš„æ¥å£ã€‚è¿™ç§æ¥å£åœ¨javaä¸­å‡ºç°çš„è¾ƒå¤šï¼Œæ¯”å¦‚ï¼šjava.io.Serializableã€java.rmi.Remoteã€java.util.EventListenerã€java.util.RandomAccess</p><p>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Testable</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">Testable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// #5</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><code>#5.</code><br>åªè¦å¯¹çº¯è™šææ„å‡½æ•°æä¾›ä¸€ä¸ªé»˜è®¤å®ç°å°±å¯ä»¥äº†ã€‚è¿™ç§å¯¹çº¯è™šå‡½æ•°æä¾›å®ç°çš„å†™æ³•çœ‹ä¼¼å¾ˆå¥‡æ€ªï¼Œä½†C++çš„ç¡®æ˜¯æ”¯æŒçš„ã€‚</p><h3 id="å¦‚ä½•æ­£ç¡®çš„ä½¿ç”¨æ¥å£ç±»"><a href="#å¦‚ä½•æ­£ç¡®çš„ä½¿ç”¨æ¥å£ç±»" class="headerlink" title="å¦‚ä½•æ­£ç¡®çš„ä½¿ç”¨æ¥å£ç±»"></a>å¦‚ä½•æ­£ç¡®çš„ä½¿ç”¨æ¥å£ç±»</h3><p>æä¾›æ¥å£ä¸å®ç°<br>é¦–å…ˆï¼Œå£°æ˜ä¸€ä¸ªæ¥å£ï¼š</p><ul><li><code>circle.h</code></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// circle.h</span><span class="token comment">// åœ†çš„æ¥å£ç±»</span><span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span><span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// æ¥å£æ–¹æ³•ï¼šé¢ç§¯</span><span class="token keyword">virtual</span> <span class="token keyword">double</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€šè¿‡ç»§æ‰¿çš„æ–¹å¼å®ç°è¿™ä¸ªæ¥å£ï¼š</p><ul><li><code>circle_impl.h</code></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// circle_impl.h</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"circle.h"</span></span> <span class="token comment">// åœ†çš„å…·ä½“å®ç°ç±»</span><span class="token keyword">class</span> <span class="token class-name">CircleImpl</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Circle</span></span> <span class="token punctuation">&#123;</span> <span class="token keyword">private</span><span class="token operator">:</span><span class="token keyword">double</span> radius<span class="token punctuation">;</span><span class="token keyword">public</span><span class="token operator">:</span><span class="token function">CircleImpl</span><span class="token punctuation">(</span><span class="token keyword">double</span> radius<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">double</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>circle_impl.cpp</code></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// circle_impl.cpp</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cmath></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"circle_impl.h"</span></span> <span class="token keyword">inline</span> <span class="token keyword">double</span> <span class="token function">pi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> std<span class="token double-colon punctuation">::</span><span class="token function">atan</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token class-name">CircleImpl</span><span class="token double-colon punctuation">::</span><span class="token function">CircleImpl</span><span class="token punctuation">(</span><span class="token keyword">double</span> _radius<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">radius</span><span class="token punctuation">(</span>_radius<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token keyword">double</span> <span class="token class-name">CircleImpl</span><span class="token double-colon punctuation">::</span><span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token function">pi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> radius <span class="token operator">*</span> radius<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åï¼Œé€šè¿‡ç®¡ç†ç±»åˆ›å»ºæ¥å£æ´¾ç”Ÿç±»çš„å®ä¾‹ï¼Œæˆ–è€…é”€æ¯æ¥å£æ´¾ç”Ÿç±»çš„å®ä¾‹ï¼š</p><ul><li><code>circle_manager.h</code></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// circle_manager.h</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"circle.h"</span></span> <span class="token comment">// åœ†çš„åˆ›å»ºå·¥å‚ç±»</span><span class="token keyword">class</span> <span class="token class-name">CircleManager</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">static</span> Circle<span class="token operator">*</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">double</span> radius<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// åˆ›å»ºcircleå®ä¾‹</span>    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span>Circle<span class="token operator">*</span> circlePtr<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// é”€æ¯circleå®ä¾‹</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>circle_manager.cpp</code></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// circle_manager.cpp</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"circle_manager.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"circle_impl.h"</span></span> Circle<span class="token operator">*</span> <span class="token class-name">CircleManager</span><span class="token double-colon punctuation">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">double</span> radius<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    Circle<span class="token operator">*</span> circlePtr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">CircleImpl</span><span class="token punctuation">(</span>radius<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">return</span> circlePtr<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token keyword">void</span> <span class="token class-name">CircleManager</span><span class="token double-colon punctuation">::</span><span class="token function">destroy</span><span class="token punctuation">(</span>Circle<span class="token operator">*</span> circlePtr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">delete</span> circlePtr<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ä»£ç ç›®å½•ç»“æ„</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">proj-+     <span class="token operator">|</span>-inc-+     <span class="token operator">|</span>     <span class="token operator">|</span>-circle.h     <span class="token operator">|</span>     <span class="token operator">|</span>-circle_manager.h     <span class="token operator">|</span>     <span class="token operator">|</span>-src-+           <span class="token operator">|</span>-circle_impl.h           <span class="token operator">|</span>-circle_impl.cpp           <span class="token operator">|</span>-circle_manager.cpp<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­incç›®å½•ç”¨äºå­˜æ”¾Circleæ¥å£ç±»å’ŒCircleç®¡ç†ç±»çš„å£°æ˜ï¼Œsrcç›®å½•ä¸­å­˜æ”¾Circleå®ç°ç±»CircleImplçš„å£°æ˜å’Œå®šä¹‰ã€Circleç®¡ç†ç±»CircleManagerçš„å®šä¹‰ã€‚</p><p>ç„¶åï¼Œå¯ä»¥å°†ä»¥ä¸Šä»£ç ç¼–è¯‘æˆé™æ€åº“circle.libï¼Œå¹¶å’Œincç›®å½•ä¸­çš„å¤´æ–‡ä»¶ä¸€èµ·æä¾›ç»™å¤–éƒ¨è°ƒç”¨ï¼š</p><blockquote><ul><li><code>å¦‚ä½•ä½¿ç”¨é™æ€åº“ï¼Ÿ</code><br>å¤–éƒ¨ä½¿ç”¨è€…ç¼–è¯‘æ—¶ï¼Œéœ€è¦åšå¦‚ä¸‹é…ç½®ï¼š</li></ul><ul><li><p>1 æŠŠincç›®å½•æ·»åŠ åˆ°â€œé™„åŠ åŒ…å«ç›®å½•â€ä¸­ã€‚</p></li><li><p>2 â€œé™„åŠ ä¾èµ–é¡¹â€ä¸­æ·»åŠ circle.libã€‚</p></li><li><p>3 æŠŠcircle.libæ‰€åœ¨ç›®å½•çš„è·¯å¾„æ·»åŠ åˆ°â€œé™„åŠ åº“ç›®å½•â€ä¸­ã€‚</p></li></ul></blockquote><p>å¤–éƒ¨ä½¿ç”¨è€…çš„ä»£ç å¦‚ä¸‹ï¼š</p><ul><li><code>main.cpp</code></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// main.cpp</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"circle_manager.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"circle.h"</span></span> <span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    Circle<span class="token operator">*</span> circlePtr <span class="token operator">=</span> <span class="token class-name">CircleManager</span><span class="token double-colon punctuation">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cout <span class="token operator">&lt;&lt;</span> circlePtr<span class="token operator">-></span><span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>    <span class="token class-name">CircleManager</span><span class="token double-colon punctuation">::</span><span class="token function">destroy</span><span class="token punctuation">(</span>circlePtr<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»¥ä¸Šä»£ç åªæä¾›ç»™å¤–éƒ¨circleçš„æ¥å£ï¼Œcircleçš„å®ç°å®Œå…¨è¢«éšè—äº†èµ·æ¥ï¼Œå¤–éƒ¨å°†æ— ä»çŸ¥æ™“ï¼Œå¤–éƒ¨ä½¿ç”¨è€…åªèƒ½é€šè¿‡circleç®¡ç†ç±»ç”Ÿæˆcircleçš„æ´¾ç”Ÿç±»çš„å®ä¾‹ã€‚å¤–éƒ¨ä½¿ç”¨è€…å¾—åˆ°circleæ´¾ç”Ÿç±»çš„å®ä¾‹åï¼Œé™¤äº†èƒ½è°ƒç”¨æ¥å£æš´éœ²çš„æ–¹æ³•area()å¤–ï¼Œå…¶å®ƒä»€ä¹ˆä¹Ÿåšä¸äº†ï¼Œè¿™æ ·å°±å®Œå…¨è¾¾åˆ°äº†ä½¿ç”¨æ¥å£çš„æœ€ç»ˆç›®æ ‡ã€‚</p><p><code>å¦‚ä½•ç¼–è¯‘æˆåŠ¨æ€åº“ï¼Ÿ</code><br>é¦–å…ˆï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„å¤´æ–‡ä»¶ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// dll_export.h </span><span class="token comment">// if windows .dll </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">_WINDLL </span></span> <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">DLL_API_EXPORTS </span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">DLL_API</span> <span class="token expression"><span class="token function">__declspec</span><span class="token punctuation">(</span>dllexport<span class="token punctuation">)</span> </span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span> </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">DLL_API</span> <span class="token expression"><span class="token function">__declspec</span><span class="token punctuation">(</span>dllimport<span class="token punctuation">)</span> </span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> </span> <span class="token comment">// else if Linux or macOS .so </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span> </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">DLL_API</span> </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ·»åŠ æ­¤å¤´æ–‡ä»¶åï¼Œä»£ç å¯ä»¥åœ¨windowsã€Linuxä¸‹éƒ½å¯ç¼–è¯‘ç”ŸæˆåŠ¨æ€åº“ï¼Œåªéœ€åœ¨ç¼–è¯‘æ—¶è®¾ç½®ä¸åŒå‚æ•°å°±è¡Œäº†ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">windowsï¼š /D <span class="token string">"DLL_API_EXPORTS"</span> /D <span class="token string">"_WINDLL"</span>Linuxï¼š ä¸ç”¨é…ç½®é¢å¤–å‚æ•°circle.hå’Œcircle_manager.hä¹Ÿè¦åšç›¸åº”æ”¹åŠ¨ï¼š<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ç¼–è¯‘å®Œæˆåå°†ç”Ÿæˆâ€circle.libâ€œå’Œâ€circle.dllâ€œæ–‡ä»¶ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">proj-+     <span class="token operator">|</span>-inc-+     <span class="token operator">|</span>     <span class="token operator">|</span>-circle.h     <span class="token operator">|</span>     <span class="token operator">|</span>-circle_manager.h     <span class="token operator">|</span>     <span class="token operator">|</span>-src-+     <span class="token operator">|</span>     <span class="token operator">|</span>-circle_impl.h     <span class="token operator">|</span>     <span class="token operator">|</span>-circle_impl.cpp     <span class="token operator">|</span>     <span class="token operator">|</span>-circle_manager.cpp     <span class="token operator">|</span>     <span class="token operator">|</span>-bin-+           <span class="token operator">|</span>-circle.lib           <span class="token operator">|</span>-circlr.dll<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>å¦‚ä½•ä½¿ç”¨åŠ¨æ€åº“ï¼Ÿ</code><br>å¤–éƒ¨ä½¿ç”¨è€…ç¼–è¯‘æ—¶ï¼Œéœ€è¦åšå¦‚ä¸‹é…ç½®ï¼š</p><ul><li><p>1 ä»£ç ä¸­æ·»åŠ #pragma comment(lib,â€circle.libâ€)ï¼Œ è¿™é‡Œæ˜¯circle.libï¼Œä¸æ˜¯circle.dllã€‚</p></li><li><p>2 æŠŠincç›®å½•æ·»åŠ åˆ°â€œé™„åŠ åŒ…å«ç›®å½•â€ä¸­ã€‚</p></li><li><p>3 é™„åŠ ä¾èµ–é¡¹â€ä¸­æ·»åŠ circle.libï¼Œè¿™é‡Œä¹Ÿæ˜¯circle.libï¼Œä¸æ˜¯circle.dllã€‚</p></li><li><p>4 æŠŠbinç›®å½•æ‰€åœ¨è·¯å¾„æ·»åŠ åˆ°â€é™„åŠ åº“ç›®å½•â€œä¸­ã€‚</p></li></ul><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>è¿™é‡Œæœ‰å‡ ç‚¹éœ€è¦è¯´æ˜ä¸€ä¸‹ï¼š</p><p>1ã€ä¸ºä»€ä¹ˆCircleManagerç±»å³åœ¨æä¾›åˆ›å»ºå®ä¾‹çš„æ–¹æ³•åˆè¦æä¾›é”€æ¯å®ä¾‹çš„æ–¹æ³•ï¼Ÿ</p><p>ç”±äºç¼–è¯‘å™¨çš„å®ç°æ–¹å¼ä¸åŒï¼Œdllçš„å †ç©ºé—´å¯èƒ½è·Ÿè°ƒç”¨æ–¹çš„å †ç©ºé—´ä¸åŒï¼Œå®ƒå¯èƒ½æ˜¯ç”±dllè‡ªå·±å•ç‹¬ç®¡ç†çš„ï¼Œæ‰€ä»¥ä»dllä¸­åˆ›å»ºçš„å®ä¾‹ï¼Œæœ€å¥½è¿˜æ˜¯åœ¨dllä¸­é”€æ¯ã€‚</p><p>2ã€å¯¹åŠ¨æ€åº“çš„è°ƒç”¨æœ¬æ–‡æ˜¯é€šè¿‡éšå¼è°ƒç”¨çš„æ–¹å¼å®Œæˆçš„ï¼Œå¯¹åŠ¨æ€åº“çš„è°ƒç”¨ä¹Ÿå¯ä»¥ä½¿ç”¨æ˜¾å¼è°ƒç”¨çš„æ–¹å¼ï¼Œä½†ç”±äºwindowså’ŒLinuxåœ¨ä½¿ç”¨æ˜¾å¼è°ƒç”¨æ—¶çš„APIæ˜¯ä¸åŒçš„ï¼Œä¸å¥½æä¾›ç»Ÿä¸€çš„ä»£ç ï¼Œæ‰€ä»¥æœ¬æ–‡æ²¡æœ‰ä¸¾ä¾‹ï¼Œä»¥åæœ‰æœºä¼šå†å•ç‹¬è¡Œæ–‡ä»‹ç»ã€‚</p><h2 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h2><ul><li><code>Animal.h</code></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span><span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token function">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>     <span class="token keyword">virtual</span> string<span class="token operator">&amp;</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> name<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> Animal<span class="token operator">*</span> <span class="token function">creat</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>RealAnimal.h</code></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Animal.h"</span></span> <span class="token keyword">class</span> <span class="token class-name">RealAnimal</span><span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Animal</span></span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token function">RealAnimal</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">RealAnimal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     string<span class="token operator">&amp;</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">private</span><span class="token operator">:</span>    <span class="token keyword">friend</span> Animal<span class="token operator">*</span> <span class="token function">creat</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">private</span><span class="token operator">:</span>    string<span class="token operator">&amp;</span> mName<span class="token punctuation">;</span>    <span class="token keyword">int</span> mAge<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>RealAnimal.cpp</code><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"RealAnimal.h"</span></span> <span class="token class-name">RealAnimal</span><span class="token double-colon punctuation">::</span><span class="token function">RealAnimal</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span><span class="token operator">:</span>    <span class="token function">mName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">mAge</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span> <span class="token class-name">RealAnimal</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">RealAnimal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span> string<span class="token operator">&amp;</span> <span class="token class-name">RealAnimal</span><span class="token double-colon punctuation">::</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> mName<span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">void</span> <span class="token class-name">RealAnimal</span><span class="token double-colon punctuation">::</span><span class="token function">setName</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> name<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    mName <span class="token operator">=</span> name<span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">int</span> <span class="token class-name">RealAnimal</span><span class="token double-colon punctuation">::</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> mAge<span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">void</span> <span class="token class-name">RealAnimal</span><span class="token double-colon punctuation">::</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    mAge <span class="token operator">=</span> age<span class="token punctuation">;</span><span class="token punctuation">&#125;</span> Animal<span class="token operator">*</span> <span class="token function">creat</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token function">RealAnimal</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p>å¦‚å‰é¢æ‰€è¯´ï¼ŒAnimal* creat(string&amp; name, int age)ç¡®å®åªæ˜¯å®ä¾‹åŒ–ä¸€ä¸ªRealAnimalå¯¹è±¡ï¼Œè¿”å›çš„å´æ˜¯Animalæ¥å£å¯¹è±¡ï¼Œæ‰€ä»¥å¿…é¡»å°†ç±»Animal çš„ææ„å‡½æ•°å£°æ˜ä¸ºè™šå‡½æ•°ï¼Œä¸ç„¶ä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚</p><h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å¯¹è±¡æ¥å£çš„å½¢å¼å°±æ˜¯å®šä¹‰ä¸€ä¸ªæ¥å£ç±»ï¼Œç±»å†…å‡½æ•°ä¸ºçº¯è™šå‡½æ•°(ç»§æ‰¿è€…å¿…é¡»å®ç°)ï¼Œæ”¾åœ¨ä¸€ä¸ªæ¥å£å¤´æ–‡ä»¶ä¸­ï¼Œå¯¹å¤–å¼€æ”¾ï¼›ç„¶åå®šä¹‰ä¸€ä¸ªå®ç°ä¸Šè¿°æ¥å£çš„ç±»ï¼Œè¿™ä¸ªç±»ç»§æ‰¿äº†æ¥å£ç±»ï¼Œå¿…é¡»å¯¹ç±»å†…çš„å‡½æ•°è¿›è¡Œå®ç°ã€‚è¿™ä¸ªå¤–éƒ¨åªèƒ½çœ‹åˆ°æ¥å£å¤´æ–‡ä»¶ä¸­å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨æ¥å£ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œä½†æ˜¯æ— æ³•ä¿®æ”¹å’Œè®¿é—®æ–¹æ³•å®ç°çš„ç»†èŠ‚ã€‚</p><h1 id="â€œæŒ‡é’ˆå®ç°â€æ–¹å¼"><a href="#â€œæŒ‡é’ˆå®ç°â€æ–¹å¼" class="headerlink" title="â€œæŒ‡é’ˆå®ç°â€æ–¹å¼"></a>â€œæŒ‡é’ˆå®ç°â€æ–¹å¼</h1><h2 id="ç¤ºä¾‹1-1"><a href="#ç¤ºä¾‹1-1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h2><ul><li><code>personImpl.h</code></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span> <span class="token keyword">class</span> <span class="token class-name">PersonImpl</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token function">PersonImpl</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">PersonImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     string<span class="token operator">&amp;</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">private</span><span class="token operator">:</span>    string<span class="token operator">&amp;</span> mName<span class="token punctuation">;</span>    <span class="token keyword">int</span> mAge<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>personImpl.cpp</code></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"personImpl.h"</span></span> <span class="token class-name">PersonImpl</span><span class="token double-colon punctuation">::</span><span class="token function">PersonImpl</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">mName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">mAge</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span> <span class="token class-name">PersonImpl</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">PersonImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span> string<span class="token operator">&amp;</span> <span class="token class-name">PersonImpl</span><span class="token double-colon punctuation">::</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> mName<span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">void</span> <span class="token class-name">PersonImpl</span><span class="token double-colon punctuation">::</span><span class="token function">setName</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    mName <span class="token operator">=</span> name<span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">int</span> <span class="token class-name">PersonImpl</span><span class="token double-colon punctuation">::</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> mAge<span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">void</span> <span class="token class-name">PersonImpl</span><span class="token double-colon punctuation">::</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    mAge <span class="token operator">=</span> age<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>person.h</code></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string></span></span><span class="token keyword">class</span> <span class="token class-name">PersonImpl</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token function">Person</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     string<span class="token operator">&amp;</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>     PersonImpl <span class="token operator">*</span> <span class="token function">getImp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">private</span><span class="token operator">:</span>    PersonImpl <span class="token operator">*</span>mPersonImpl<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>person.cpp</code></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"person.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"personImpl.h"</span></span> <span class="token class-name">Person</span><span class="token double-colon punctuation">::</span><span class="token function">Person</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">mPersonImpl</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">PersonImpl</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"construct Person"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token class-name">Person</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">delete</span> mPersonImpl<span class="token punctuation">;</span>    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"deconstruct Person"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span><span class="token punctuation">&#125;</span> string<span class="token operator">&amp;</span> <span class="token class-name">Person</span><span class="token double-colon punctuation">::</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> mPersonImpl<span class="token operator">-></span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">void</span> <span class="token class-name">Person</span><span class="token double-colon punctuation">::</span><span class="token function">setName</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    mPersonImpl<span class="token operator">-></span><span class="token function">setName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">int</span> <span class="token class-name">Person</span><span class="token double-colon punctuation">::</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> mPersonImpl<span class="token operator">-></span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">void</span> <span class="token class-name">Person</span><span class="token double-colon punctuation">::</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    mPersonImpl<span class="token operator">-></span><span class="token function">setAge</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> PersonImpl<span class="token operator">*</span> <span class="token class-name">Person</span><span class="token double-colon punctuation">::</span> <span class="token function">getImp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> mPersonImpl<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>main.cpp</code></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"person.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"personImpl.h"</span></span>  <span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        string str<span class="token operator">=</span> <span class="token string">"abcdefg"</span><span class="token punctuation">;</span>    Person <span class="token function">person</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     PersonImpl <span class="token operator">*</span>personImp <span class="token operator">=</span> person<span class="token punctuation">.</span><span class="token function">getImp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     string name <span class="token operator">=</span> personImp<span class="token operator">-></span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> age <span class="token operator">=</span>personImp<span class="token operator">-></span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cout<span class="token operator">&lt;&lt;</span>name<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>    cout<span class="token operator">&lt;&lt;</span>age<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>     <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç¤ºä¾‹2-1"><a href="#ç¤ºä¾‹2-1" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h2><ul><li><p><code>adas_app.h</code></p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">AdasApp</span><span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token comment">// jsonå­—ç¬¦ä¸²</span>    <span class="token function">AdasApp</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string <span class="token operator">&amp;</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">AdasApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">private</span><span class="token operator">:</span>    <span class="token keyword">class</span> <span class="token class-name">Impl</span><span class="token punctuation">;</span>    std<span class="token double-colon punctuation">::</span>unique_ptr<span class="token operator">&lt;</span>Impl<span class="token operator">></span> impl_<span class="token comment">/* = nullptr*/</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><code>adas_app.cpp</code></p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">AdasApp</span><span class="token operator">:</span><span class="token base-clause"><span class="token operator">:</span><span class="token class-name">Impl</span> <span class="token keyword">final</span></span><span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token comment">/**     * @brief è§£æå¾—åˆ°å‰å‘ç›®æ ‡     */</span>    std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>ac<span class="token double-colon punctuation">::</span>ObstacleInfo<span class="token operator">></span> <span class="token function">DecodeObjects</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">uint8_t</span> <span class="token operator">*</span>buffer<span class="token punctuation">,</span> <span class="token keyword">uint32_t</span> size<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>å…·ä½“å®ç°<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * @brief è§£æå¾—åˆ°è½¦é“çº¿     */</span>    std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>ac<span class="token double-colon punctuation">::</span>CurveInfo<span class="token operator">></span> <span class="token function">DecodeCurves</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">uint8_t</span> <span class="token operator">*</span>buffer<span class="token punctuation">,</span> <span class="token keyword">uint32_t</span> size<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>å…·ä½“å®ç°<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token punctuation">&#125;</span>    <span class="token function">Impl</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string <span class="token operator">&amp;</span>config<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>å…·ä½“å®ç°<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token function">DecodeObjects</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">DecodeCurves</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>      <span class="token operator">~</span><span class="token function">Impl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>å…·ä½“å®ç°<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token punctuation">&#125;</span>    <span class="token function">AdasApp</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string <span class="token operator">&amp;</span>config<span class="token punctuation">)</span>    <span class="token operator">:</span> <span class="token function">impl_</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">Impl</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token operator">~</span><span class="token function">AdasApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><code>main.cpp</code></p></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>   AdasApp <span class="token function">obj</span><span class="token punctuation">(</span>ac<span class="token double-colon punctuation">::</span><span class="token function">LoadTextFile</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ä¸ªä¾‹å­ä½¿ç”¨äº†æ™ºèƒ½æŒ‡é’ˆå®ç°adadçš„å®ç°ç±»<code>class Impl;</code> <code>std::unique_ptr&lt;Impl&gt; impl_/* = nullptr*/;</code>åœ¨adas_app.hä¸­çœ‹ä¸åˆ°çœŸæ­£çš„å®ç°ï¼Œä½†å®é™…å£°æ˜äº†ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆ<code>impl_</code>ï¼Œåœ¨adas_app.cppä¸­å°†è¯¥æŒ‡é’ˆæŒ‡é’ˆæŒ‡å‘äº†ä¸€ä¸ªnewå¯¹è±¡<code>impl_(new Impl(config)</code>ï¼Œå¹¶å°†å…¶newå¯¹è±¡çš„æ„é€ å‡½æ•°<code>Impl&#123;&#125;</code>è¿›è¡Œäº†çœŸæ­£çš„å®ç°ã€‚</p><hr><blockquote><p>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œnetyeaxiã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC4.0BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚<br>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/netyeaxi/article/details/80887646">https://blog.csdn.net/netyeaxi/article/details/80887646</a><br>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/netyeaxi/article/details/80724557">https://blog.csdn.net/netyeaxi/article/details/80724557</a><br>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/qq_20853741/article/details/121244189">https://blog.csdn.net/qq_20853741/article/details/121244189</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> æ¥å£å®šä¹‰ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰å“OpenGLæ¸²æŸ“ç”»é¢é—ªçƒåŸå› åˆ†æ</title>
      <link href="/2023/03/16/an-zhuo-opengl-xuan-ran-hua-mian-shan-shuo-yuan-yin-fen-xi/"/>
      <url>/2023/03/16/an-zhuo-opengl-xuan-ran-hua-mian-shan-shuo-yuan-yin-fen-xi/</url>
      
        <content type="html"><![CDATA[<p>1.ç¡¬ä»¶æ¥è§¦ä¸è‰¯<br>2.openglåŒç¼“å­˜æœªå¼€å¯<br>3.openglåŒç¼“å­˜å¼€å¯ä½†ç¦»å±æ•°æ®ä¸ºæ›´æ–°<br>4.ç›¸æœºæ•°æ®è¢«è¦†ç›–<br>4.1ç›¸æœºæ•°æ®æ ¼å¼ä¸å¯¹<br>4.2ç”³è¯·å†…å­˜ä¸è®¿é—®å†…å­˜è¶Šç•Œé—®é¢˜</p>]]></content>
      
      
      <categories>
          
          <category> å¾…æ•´ç†android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> android </tag>
            
            <tag> opengl </tag>
            
            <tag> ç”»é¢é—ªçƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitä½¿ç”¨æŒ‡å—</title>
      <link href="/2023/02/28/git-shi-yong-zhi-nan/"/>
      <url>/2023/02/28/git-shi-yong-zhi-nan/</url>
      
        <content type="html"><![CDATA[<h1 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h1><h2 id="git-config-è®¾ç½®ç”¨æˆ·åç§°å’Œé‚®ä»¶åœ°å€"><a href="#git-config-è®¾ç½®ç”¨æˆ·åç§°å’Œé‚®ä»¶åœ°å€" class="headerlink" title="git config è®¾ç½®ç”¨æˆ·åç§°å’Œé‚®ä»¶åœ°å€"></a><code>git config</code> è®¾ç½®ç”¨æˆ·åç§°å’Œé‚®ä»¶åœ°å€</h2><ul><li>è®¾ç½®ç”¨æˆ·åç§°<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config <span class="token parameter variable">--global</span> user.name <span class="token string">"goto456"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li>è®¾ç½®é‚®ä»¶åœ°å€<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config <span class="token parameter variable">--global</span> user.email <span class="token string">"goto456@126.com"</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li>åˆ—å‡ºå½“å‰Gitæ‰€æœ‰çš„é…ç½®ä¿¡æ¯<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config <span class="token parameter variable">--list</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><h2 id="git-init-åˆå§‹åŒ–æœ¬åœ°ä»“åº“"><a href="#git-init-åˆå§‹åŒ–æœ¬åœ°ä»“åº“" class="headerlink" title="git init åˆå§‹åŒ–æœ¬åœ°ä»“åº“"></a><code>git init</code> åˆå§‹åŒ–æœ¬åœ°ä»“åº“</h2><p>è·å–ä¸€ä¸ª Git ä»“åº“æœ‰ä¸¤ç§æ–¹æ³•ï¼š<br>1.æœ¬åœ°åˆå§‹åŒ–ä¸€ä¸ªä»“åº“<br>2.ä»è¿œç¨‹å…‹éš†ä¸€ä¸ªä»“åº“åˆ°æœ¬åœ°<br>å¯¹äºç¬¬1ç§æ–¹å¼ï¼Œå¦‚æœæƒ³å¯¹æœ¬åœ°ç°æœ‰çš„ä¸€ä¸ªé¡¹ç›®ç”¨ Git æ¥ç®¡ç†ï¼Œå¯ä»¥ç›´æ¥è¿›å…¥è¯¥é¡¹ç›®çš„ç›®å½•ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå°±å¯ä»¥å°†å…¶åˆå§‹åŒ–æˆä¸€ä¸ª Git ä»“åº“äº†ã€‚  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> init<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="git-clone-å…‹éš†è¿œç¨‹ä»“åº“åˆ°æœ¬åœ°"><a href="#git-clone-å…‹éš†è¿œç¨‹ä»“åº“åˆ°æœ¬åœ°" class="headerlink" title="git clone å…‹éš†è¿œç¨‹ä»“åº“åˆ°æœ¬åœ°"></a><code>git clone</code> å…‹éš†è¿œç¨‹ä»“åº“åˆ°æœ¬åœ°</h2><ul><li>é€šè¿‡sshæ–¹å¼å…‹éš†<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone git@github.com:goto456/leetcode.git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li>é€šè¿‡httpsæ–¹å¼å…‹éš†<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/goto456/leetcode.git <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>httpsæ–¹å¼ï¼šä¸ç®¡æ˜¯è°ï¼Œåªè¦æ‹¿åˆ°è¯¥é¡¹ç›®çš„ url å¯ä»¥éšä¾¿ cloneï¼Œä½†æ˜¯åœ¨ push åˆ°è¿œç¨‹çš„æ—¶å€™éœ€è¦éªŒè¯ç”¨æˆ·åå’Œå¯†ç ï¼›<br>sshæ–¹å¼ï¼šéœ€è¦ç°å°†ä½ ç”µè„‘çš„SSH keyï¼ˆSSHå…¬é’¥ï¼‰æ·»åŠ åˆ°GitHubï¼ˆæˆ–è€…å…¶ä»–ä»£ç æ‰˜ç®¡ç½‘ç«™ï¼‰ä¸Šï¼Œè¿™æ ·åœ¨ clone é¡¹ç›®å’Œ push é¡¹ç›®åˆ°è¿œç¨‹æ—¶éƒ½ä¸éœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚</p></blockquote></li></ul><h1 id="gitå°†æœ¬åœ°ä»“åº“çš„å…¨éƒ¨å†å²è®°å½•éƒ½æäº¤åˆ°æŒ‡å®šè¿œç¨‹ä»“åº“"><a href="#gitå°†æœ¬åœ°ä»“åº“çš„å…¨éƒ¨å†å²è®°å½•éƒ½æäº¤åˆ°æŒ‡å®šè¿œç¨‹ä»“åº“" class="headerlink" title="gitå°†æœ¬åœ°ä»“åº“çš„å…¨éƒ¨å†å²è®°å½•éƒ½æäº¤åˆ°æŒ‡å®šè¿œç¨‹ä»“åº“"></a>gitå°†æœ¬åœ°ä»“åº“çš„å…¨éƒ¨å†å²è®°å½•éƒ½æäº¤åˆ°æŒ‡å®šè¿œç¨‹ä»“åº“</h1><h1 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h1><p><a href="https://github.com/geiyiren/MyBlogFile1/blob/pdf/git%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/git%E6%95%99%E7%A8%8B.pdf">å‚è€ƒæ–‡æ¡£</a><br><a href="https://git-scm.com/book/zh/v2">Pro Git ç¬¬äºŒç‰ˆ</a></p>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> gitlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++çš„lambdaè¡¨è¾¾å¼ä½¿ç”¨æ–¹æ³•</title>
      <link href="/2023/02/14/c-de-lambda-biao-da-shi-shi-yong-fang-fa/"/>
      <url>/2023/02/14/c-de-lambda-biao-da-shi-shi-yong-fang-fa/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> å‡½æ•°å‚æ•°ä¼ é€’ </tag>
            
            <tag> lambdaè¡¨è¾¾å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªå®šä¹‰é±¼çœ¼å›¾åƒå»ç•¸å˜</title>
      <link href="/2023/02/14/zi-ding-yi-yu-yan-tu-xiang-qu-ji-bian/"/>
      <url>/2023/02/14/zi-ding-yi-yu-yan-tu-xiang-qu-ji-bian/</url>
      
        <content type="html"><![CDATA[<h1 id="ç•¸å˜å›¾åƒ-è½¬æ¢ä¸º-å»ç•¸å˜å›¾åƒ"><a href="#ç•¸å˜å›¾åƒ-è½¬æ¢ä¸º-å»ç•¸å˜å›¾åƒ" class="headerlink" title="ç•¸å˜å›¾åƒ è½¬æ¢ä¸º å»ç•¸å˜å›¾åƒ"></a>ç•¸å˜å›¾åƒ è½¬æ¢ä¸º å»ç•¸å˜å›¾åƒ</h1><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> cv<span class="token double-colon punctuation">::</span>fisheye<span class="token double-colon punctuation">::</span><span class="token function">undistortImage</span><span class="token punctuation">(</span>    InputArray distorted<span class="token punctuation">,</span>            <span class="token comment">// è¾“å…¥çš„ç•¸å˜å›¾åƒ</span>    OutputArray undistorted<span class="token punctuation">,</span>         <span class="token comment">// è¾“å‡ºçš„å»ç•¸å˜å›¾åƒ</span>    InputArray K<span class="token punctuation">,</span>                    <span class="token comment">// ç›¸æœºå†…å‚çŸ©é˜µ(3x3)</span>    InputArray D<span class="token punctuation">,</span>                    <span class="token comment">// ç›¸æœºç•¸å˜ç³»æ•°</span>    InputArray Knew <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">noArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// æ–°çš„ç›¸æœºå†…å‚çŸ©é˜µ(3x3)</span>    <span class="token keyword">const</span> Size<span class="token operator">&amp;</span> new_size <span class="token operator">=</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// æ–°çš„å»ç•¸å˜å›¾åƒå°ºå¯¸</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>new_size</code>ä¸€èˆ¬è®¾ç½®ä¸ºç©ºï¼Œé»˜è®¤è¾“å‡ºå»ç•¸å˜å›¾åƒå’Œç•¸å˜å›¾åƒçš„å°ºå¯¸ç›¸åŒã€‚</li><li><code>Knew </code>ä¸ºæ–°çš„ç›¸æœºå†…å‚çŸ©é˜µï¼Œå½±å“è€…å»ç•¸å˜ä¹‹åå›¾åƒçš„èŒƒå›´ï¼Œå‚æ•°æœ‰ï¼š<code>fx</code>ã€<code>fy</code>ã€<code>cx</code>ã€<code>cy</code>ã€‚<ul><li><code>fx</code>ä¸ºæ°´å¹³æ–¹å‘çš„ç„¦è·ï¼Œå€¼è¶Šå¤§ï¼Œæ°´å¹³æ–¹å‘æ˜¾ç¤ºå›¾åƒèŒƒå›´è¶Šå¤§ã€‚</li><li><code>fy</code>ä¸ºå‚ç›´æ–¹å‘çš„ç„¦è·ï¼Œå€¼è¶Šå¤§ï¼Œå‚ç›´æ–¹å‘æ˜¾ç¤ºå›¾åƒèŒƒå›´è¶Šå¤§ã€‚</li><li><code>cx</code>ä¸»ç‚¹åæ ‡çš„xå€¼ï¼Œå€¼è¶Šå¤§ï¼Œæ˜¾ç¤ºå›¾åƒèŒƒå›´æ•´ä½“è¶Šåå·¦</li><li><code>cy</code>ä¸»ç‚¹åæ ‡çš„yå€¼ï¼Œå€¼è¶Šå¤§ï¼Œæ˜¾ç¤ºå›¾åƒèŒƒå›´æ•´ä½“è¶Šåä¸‹<blockquote><p><code>cx</code>ã€<code>cy</code>ä¸€èˆ¬å’ŒåŸåº”ç›¸æœºçš„å‚æ•°ä¸€æ ·ï¼Œè¿™æ ·å»ç•¸å˜åçš„å›¾åƒå’Œç•¸å˜å›¾åƒçš„ä¸­å¿ƒå¯ä»¥å¯¹é½ï¼›<code>fx</code>ã€<code>fy</code>éœ€è¦æ ¹æ®å»ç•¸å˜å›¾åƒçš„è§†é‡éœ€æ±‚è¿›è¡Œè°ƒæ•´ï¼Œä¸€èˆ¬åœ¨åŸç›¸æœºçš„å‚æ•°çš„åŸºç¡€ä¸Šè¿›è¡Œç¼©æ”¾ã€‚</p></blockquote></li></ul></li><li>æ•ˆæœå±•ç¤º<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E8%87%AA%E5%AE%9A%E4%B9%89%E9%B1%BC%E7%9C%BC%E5%9B%BE%E5%83%8F%E5%8E%BB%E7%95%B8%E5%8F%98/0.0-0.0.png" alt="åŸå§‹ç•¸å˜å›¾åƒ"><style>th, td {  text-align: center; /* è®¾ç½®è¡¨å¤´å’Œå•å…ƒæ ¼ä¸­çš„æ–‡æœ¬å±…ä¸­ */}</style><table><colgroup>  <col style="width: 20%;">  <col style="width: 20%;">  <col style="width: 60%;"></colgroup><tr>  <th>fxç¼©å°å€æ•°</th>  <th>fyç¼©å°å€æ•°</th>  <th>å»ç•¸å˜å›¾åƒ</th></tr><tr>  <td>1.0</td>  <td>1.0</td>  <td><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/è‡ªå®šä¹‰é±¼çœ¼å›¾åƒå»ç•¸å˜/1.0-1.0.png""></td></tr><tr>  <td>1.3</td>  <td>1.0</td>  <td><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/è‡ªå®šä¹‰é±¼çœ¼å›¾åƒå»ç•¸å˜/1.3-1.0.png""></td></tr><tr>  <td>1.5</td>  <td>1.0</td>  <td><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/è‡ªå®šä¹‰é±¼çœ¼å›¾åƒå»ç•¸å˜/1.5-1.0.png""></td></tr><tr>  <td>3.0</td>  <td>1.0</td>  <td><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/è‡ªå®šä¹‰é±¼çœ¼å›¾åƒå»ç•¸å˜/3.0-1.0.png""></td></tr><tr>  <td>5.0</td>  <td>1.0</td>  <td><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/è‡ªå®šä¹‰é±¼çœ¼å›¾åƒå»ç•¸å˜/5.0-1.0.png""></td></tr><tr>  <td>5.0</td>  <td>1.5</td>  <td><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/è‡ªå®šä¹‰é±¼çœ¼å›¾åƒå»ç•¸å˜/5.0-1.5.png""></td></tr><tr>  <td>5.0</td>  <td>3.0</td>  <td><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/è‡ªå®šä¹‰é±¼çœ¼å›¾åƒå»ç•¸å˜/5.0-3.0.png""></td></tr></table></li></ul><h1 id="ç•¸å˜ç‚¹-è½¬æ¢ä¸º-å»ç•¸å˜ç‚¹"><a href="#ç•¸å˜ç‚¹-è½¬æ¢ä¸º-å»ç•¸å˜ç‚¹" class="headerlink" title="ç•¸å˜ç‚¹ è½¬æ¢ä¸º å»ç•¸å˜ç‚¹"></a>ç•¸å˜ç‚¹ è½¬æ¢ä¸º å»ç•¸å˜ç‚¹</h1><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> cv<span class="token double-colon punctuation">::</span>fisheye<span class="token double-colon punctuation">::</span><span class="token function">undistortPoints</span><span class="token punctuation">(</span>    InputArray distorted<span class="token punctuation">,</span>          <span class="token comment">// è¾“å…¥çš„ç•¸å˜åæ ‡ç‚¹</span>    OutputArray undistorted<span class="token punctuation">,</span>      <span class="token comment">// è¾“å‡ºçš„å»ç•¸å˜åæ ‡ç‚¹</span>    InputArray K<span class="token punctuation">,</span>                  <span class="token comment">// ç›¸æœºå†…å‚çŸ©é˜µ(3x3)</span>    InputArray D<span class="token punctuation">,</span>                  <span class="token comment">// ç•¸å˜å‚æ•°å‘é‡</span>    InputArray R <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">noArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">// æ—‹è½¬çŸ©é˜µ(3x3)ï¼Œé€šå¸¸æ˜¯å•ä½çŸ©é˜µ</span>    InputArray P <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">noArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// æŠ•å½±çŸ©é˜µ(3x3)æˆ–æ–°ç›¸æœºå†…å‚çŸ©é˜µKnew(3x3)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>è¿™ä¸ªå‡½æ•°å¯ä»¥ç›´æ¥å‘ç•¸å˜å›¾åƒä¸Šçš„ç‚¹è½¬æ¢ä¸ºå»ç•¸å˜å›¾åƒä¸Šçš„ç‚¹ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨<code>R</code>,<code>P</code>çŸ©é˜µå°†ç•¸å˜å›¾åƒä¸Šçš„ç‚¹è½¬æ¢ä¸ºä¸–ç•Œåæ ‡ç³»ä¸­ã€‚</p></blockquote><p><strong>æ³¨æ„</strong>ï¼šè¿™é‡Œè½¬æ¢ä¸ºå»ç•¸å˜å›¾åƒä¸Šçš„ç‚¹æ—¶ï¼Œä¸æ”¯æŒå›¾åƒç¼©æ”¾ï¼Œä»…æ”¯æŒæ–°çš„å†…å‚çŸ©é˜µï¼Œå› æ­¤å›¾åƒåœ¨å»ç•¸å˜æ—¶ï¼Œä¸€èˆ¬ä¸æ”¹å˜å›¾åƒçš„å¤§å°ï¼Œä¿è¯ç‚¹å»ç•¸å˜æ—¶å¯ä»¥ä¸ä¹‹å¯¹åº”ã€‚</p><h1 id="å»ç•¸å˜ç‚¹-è½¬æ¢ä¸º-ç•¸å˜ç‚¹"><a href="#å»ç•¸å˜ç‚¹-è½¬æ¢ä¸º-ç•¸å˜ç‚¹" class="headerlink" title="å»ç•¸å˜ç‚¹ è½¬æ¢ä¸º ç•¸å˜ç‚¹"></a>å»ç•¸å˜ç‚¹ è½¬æ¢ä¸º ç•¸å˜ç‚¹</h1><p>æ²¡æœ‰ç›´æ¥çš„å‡½æ•°å°†ç•¸å˜ç‚¹è½¬æ¢ä¸ºå»ç•¸å˜ç‚¹ï¼Œä½†æ˜¯å¯ä»¥åˆ©ç”¨mapæ˜ å°„å‡½æ•°è·å¾—æ˜ å°„ç‚¹æ¥è¿›è¡Œè½¬æ¢ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> cv<span class="token double-colon punctuation">::</span>fisheye<span class="token double-colon punctuation">::</span><span class="token function">initUndistortRectifyMap</span><span class="token punctuation">(</span>    InputArray K<span class="token punctuation">,</span>              <span class="token comment">// ç›¸æœºå†…å‚çŸ©é˜µ (3x3)</span>    InputArray D<span class="token punctuation">,</span>              <span class="token comment">// ç•¸å˜å‚æ•°å‘é‡</span>    InputArray R<span class="token punctuation">,</span>              <span class="token comment">// æ—‹è½¬çŸ©é˜µ (3x3)</span>    InputArray P<span class="token punctuation">,</span>              <span class="token comment">// æ–°ç›¸æœºçŸ©é˜µ (3x3)</span>    <span class="token keyword">const</span> Size<span class="token operator">&amp;</span> size<span class="token punctuation">,</span>          <span class="token comment">// è¾“å‡ºæ˜ å°„çš„å›¾åƒå°ºå¯¸</span>    <span class="token keyword">int</span> m1type<span class="token punctuation">,</span>                <span class="token comment">// æ˜ å°„çŸ©é˜µçš„æ•°æ®ç±»å‹ (ä¾‹å¦‚ï¼šCV_32FC1)</span>    OutputArray map1<span class="token punctuation">,</span>          <span class="token comment">// è¾“å‡ºçš„ç¬¬ä¸€ä¸ªæ˜ å°„</span>    OutputArray map2           <span class="token comment">// è¾“å‡ºçš„ç¬¬äºŒä¸ªæ˜ å°„</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œ<code>map1</code>ã€<code>map2</code>ä¸ºæ˜ å°„çŸ©é˜µï¼Œç±»å‹ä¸º<code>cv::Mat</code>,å°ºå¯¸ä¸º<code>size</code>ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ª<code>Mat</code>çš„å°ºå¯¸å°±æ˜¯å»ç•¸å˜å›¾åƒçš„å°ºå¯¸ï¼Œæ¯ä¸ªä½ç½®å­˜å‚¨çš„å€¼ä¸ºå¯¹åº”ç•¸å˜å›¾åƒä¸Šç‚¹çš„<code>x</code>å€¼æˆ–è€…<code>y</code>å€¼ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è®¿é—®è¿™ä¸ª<code>Mat</code>ä¸­æ¯ä¸ªåƒç´ å€¼ï¼Œè¿›è€Œå¾—åˆ°å»ç•¸å˜ç‚¹å¯¹åº”çš„ç•¸å˜ç‚¹åæ ‡ã€‚</p><blockquote><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œmapæ˜ å°„æ—¶å­˜å‚¨çš„æ˜ å°„å…³ç³»ä¸€èˆ¬ä¸ºç›¸åçš„</p></blockquote><ul><li>ä½¿ç”¨æ–¹æ³•<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// åˆå§‹åŒ–æ˜ å°„è¡¨</span>cv<span class="token double-colon punctuation">::</span>Mat map_x<span class="token punctuation">,</span> map_y<span class="token punctuation">;</span>std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>cv<span class="token double-colon punctuation">::</span>Point2f<span class="token operator">></span> image_points_dist<span class="token punctuation">,</span> image_points_undist_new<span class="token punctuation">;</span>cv<span class="token double-colon punctuation">::</span>fisheye<span class="token double-colon punctuation">::</span><span class="token function">initUndistortRectifyMap</span><span class="token punctuation">(</span>cam_K<span class="token punctuation">[</span>cam_index<span class="token punctuation">]</span><span class="token punctuation">,</span> cam_D<span class="token punctuation">[</span>cam_index<span class="token punctuation">]</span><span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token class-name">Mat</span><span class="token double-colon punctuation">::</span><span class="token function">eye</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> CV_32FC1<span class="token punctuation">)</span><span class="token punctuation">,</span> cam_K_new<span class="token punctuation">[</span>cam_index<span class="token punctuation">]</span><span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Size</span><span class="token punctuation">(</span>CAMERA_WIDTH<span class="token punctuation">,</span> CAMERA_HEIGHT<span class="token punctuation">)</span><span class="token punctuation">,</span> CV_32FC1<span class="token punctuation">,</span> map_x<span class="token punctuation">,</span> map_y<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> point <span class="token operator">:</span> image_points_undist<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    cv<span class="token double-colon punctuation">::</span>Point2f point_undist <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Point2f</span><span class="token punctuation">(</span>point<span class="token punctuation">.</span>x<span class="token punctuation">,</span>                                           point<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>    image_points_dist<span class="token punctuation">.</span><span class="token function">emplace_back</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span><span class="token function">Point2f</span><span class="token punctuation">(</span>map_x<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>point_undist<span class="token punctuation">)</span><span class="token punctuation">,</span> map_y<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>point_undist<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p><strong>æ³¨æ„</strong>: è¿™é‡Œçš„è¾“å‡ºæ˜ å°„çš„å›¾åƒå°ºå¯¸éœ€è¦ä¸ºç•¸å˜å›¾åƒçš„åŸå§‹å°ºå¯¸<code>cv::Size(CAMERA_WIDTH, CAMERA_HEIGHT)</code>,æ—‹è½¬çŸ©é˜µåº”è¯¥ä¸ºå•ä½çŸ©é˜µï¼Œæ–°ç›¸æœºçŸ©é˜µä¸å»ç•¸å˜æ—¶çš„è®¾ç½®ä¿æŒä¸€ç›´å³å¯ã€‚</p><h1 id="ä»£ç -undist-cpp"><a href="#ä»£ç -undist-cpp" class="headerlink" title="ä»£ç : undist.cpp"></a>ä»£ç : <code>undist.cpp</code></h1><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/opencv.hpp></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui/highgui.hpp></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc/imgproc.hpp></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">UNDIST_SCALE</span> <span class="token expression"><span class="token punctuation">(</span><span class="token number">2.5</span><span class="token punctuation">)</span></span></span><span class="token comment">/** * @description: è¾“å…¥ç•¸å˜å›¾ï¼Œè¾“å‡ºå»ç•¸å˜å›¾ * @param &#123;Mat&#125; &amp;img_dist * @param &#123;Mat&#125; &amp;img_undist * @return &#123;*&#125; * @author: wangshuaiyang */</span><span class="token keyword">int</span> <span class="token function">DistToUndistImage</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>Mat img_dist<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>Mat <span class="token operator">&amp;</span>img_undist<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat cam_K <span class="token operator">=</span> <span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">Mat_</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">319.307046915</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">640</span><span class="token punctuation">,</span>                <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">319.715597621</span><span class="token punctuation">,</span> <span class="token number">360</span><span class="token punctuation">,</span>                <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat cam_D <span class="token operator">=</span> <span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">Mat_</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">0.07218855</span><span class="token punctuation">,</span> <span class="token number">0.02228145</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.015075182</span><span class="token punctuation">,</span> <span class="token number">0.002351672</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ–°çš„ç›¸æœºå†…å‚çŸ©é˜µå’Œå›¾åƒå°ºå¯¸ï¼ˆå¯é€‰ï¼‰</span>    cv<span class="token double-colon punctuation">::</span>Mat cam_K_new <span class="token operator">=</span> cam_K<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cam_K_new<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> cam_K_new<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">5.0</span><span class="token punctuation">;</span>     <span class="token comment">// fx</span>    cam_K_new<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> cam_K_new<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">1.5</span><span class="token punctuation">;</span>     <span class="token comment">// fy</span>    cam_K_new<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span> cam_K_new<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// cx</span>    cam_K_new<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span> cam_K_new<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// cy</span>    cv<span class="token double-colon punctuation">::</span>fisheye<span class="token double-colon punctuation">::</span><span class="token function">undistortImage</span><span class="token punctuation">(</span>img_dist<span class="token punctuation">,</span> img_undist<span class="token punctuation">,</span> cam_K<span class="token punctuation">,</span> cam_D<span class="token punctuation">,</span> cam_K_new<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">resize</span><span class="token punctuation">(</span>img_undist<span class="token punctuation">,</span> img_undist<span class="token punctuation">,</span> img_dist<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"image_remap_fish"</span><span class="token punctuation">,</span> img_undist<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> ret<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span>  <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    cv<span class="token double-colon punctuation">::</span>Mat img <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">imread</span><span class="token punctuation">(</span><span class="token string">"picture_back.png"</span><span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>IMREAD_COLOR<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat undist_img<span class="token punctuation">;</span>    <span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token function">DistToUndistImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> undist_img<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ç¼–è¯‘</li><li><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">g++ undist.cpp <span class="token parameter variable">-o</span> undist <span class="token parameter variable">-lopencv_core</span> <span class="token parameter variable">-lopencv_highgui</span> <span class="token parameter variable">-lopencv_imgproc</span> <span class="token parameter variable">-lopencv_imgcodecs</span> <span class="token parameter variable">-lopencv_calib3d</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul>]]></content>
      
      
      <categories>
          
          <category> opencv </category>
          
      </categories>
      
      
        <tags>
            
            <tag> opencv </tag>
            
            <tag> c++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¼–ç è§„èŒƒ</title>
      <link href="/2023/02/14/bian-ma-gui-fan/"/>
      <url>/2023/02/14/bian-ma-gui-fan/</url>
      
        <content type="html"><![CDATA[<h1 id="C-ç¼–ç è§„èŒƒ"><a href="#C-ç¼–ç è§„èŒƒ" class="headerlink" title="C++ç¼–ç è§„èŒƒ"></a>C++ç¼–ç è§„èŒƒ</h1><p>&#x2F;&#x2F; æ–‡ä»¶: å•è¯å°å†™, å•è¯ä¹‹é—´ä½¿ç”¨ä¸‹åˆ’çº¿</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"a.h"</span></span><span class="token comment">// å‘½åç©ºé—´: å°å†™å­—æ¯</span><span class="token keyword">namespace</span> mynamespace <span class="token punctuation">&#123;</span><span class="token comment">// å¸¸é‡: kå¼€å¤´, æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™</span><span class="token keyword">const</span> <span class="token keyword">int</span> kDaysInAWeek <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token comment">// ç±»å‹å®šä¹‰</span><span class="token keyword">typedef</span> hash_map<span class="token operator">&lt;</span>TUrlTableProperties <span class="token operator">*</span><span class="token punctuation">,</span> string<span class="token operator">></span> TPropertiesMap<span class="token punctuation">;</span><span class="token keyword">using</span> PropertiesMap <span class="token operator">=</span> hash_map<span class="token operator">&lt;</span>TUrlTableProperties <span class="token operator">*</span><span class="token punctuation">,</span> string<span class="token operator">></span><span class="token punctuation">;</span><span class="token comment">// å…¨å±€å˜é‡ã€å±€éƒ¨å˜é‡: å•è¯å°å†™, å•è¯ä¹‹é—´ä½¿ç”¨ä¸‹åˆ’çº¿</span><span class="token keyword">int</span> my_name<span class="token punctuation">;</span><span class="token comment">// ç±»: Tå¼€å¤´, æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™</span><span class="token keyword">class</span> <span class="token class-name">TMyClass</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span><span class="token operator">:</span><span class="token comment">// ç»“æ„ä½“: Tå¼€å¤´, æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™</span><span class="token keyword">struct</span> <span class="token class-name">TMyStruct</span> <span class="token punctuation">&#123;</span><span class="token comment">// æ™®é€šå˜é‡: å•è¯å°å†™, å•è¯ä¹‹é—´ä½¿ç”¨ä¸‹åˆ’çº¿</span><span class="token keyword">int</span> my_name<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// å‡½æ•°: æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™, å‡½æ•°åé¦–å­—æ¯å¤§å†™</span><span class="token function">MyExcitingFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">private</span><span class="token operator">:</span><span class="token comment">// ç±»æˆå‘˜å˜é‡: å•è¯å°å†™, å•è¯ä¹‹é—´ä½¿ç”¨ä¸‹åˆ’çº¿, æœ€åä»¥ä¸‹åˆ’çº¿ç»“æŸ</span><span class="token keyword">int</span> my_name_<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h2><p><a href="https://github.com/geiyiren/MyBlogFile1/blob/pdf/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/C%2B%2B%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83.pdf">C++ç¼–ç è§„èŒƒ</a></p><blockquote><p>C++ç¼–ç è§„èŒƒ.pdfçš„å‡çº§ç‰ˆæœ¬</p></blockquote><p><a href="https://github.com/geiyiren/MyBlogFile1/blob/pdf/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/C%2B%2B%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83C1.pdf">C++ç¼–ç è§„èŒƒ.pdfçš„å‡çº§ç‰ˆæœ¬</a></p><h1 id="Cç¼–ç è§„èŒƒ"><a href="#Cç¼–ç è§„èŒƒ" class="headerlink" title="Cç¼–ç è§„èŒƒ"></a>Cç¼–ç è§„èŒƒ</h1><p><a href="https://github.com/geiyiren/MyBlogFile1/blob/pdf/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/%E5%B5%8C%E5%85%A5%E5%BC%8FC%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83.pdf">Cç¼–ç è§„èŒƒ</a></p><h1 id="c"><a href="#c" class="headerlink" title="c"></a>c</h1><p><a href="https://github.com/geiyiren/MyBlogFile1/blob/pdf/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Java%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83.pdf">C#ç¼–ç è§„èŒƒ</a></p><h1 id="C-ç¼–ç è§„èŒƒ-1"><a href="#C-ç¼–ç è§„èŒƒ-1" class="headerlink" title="C#ç¼–ç è§„èŒƒ"></a>C#ç¼–ç è§„èŒƒ</h1><p><a href="https://github.com/geiyiren/MyBlogFile1/blob/pdf/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/C%E4%BA%95%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83C1.pdf">C#ç¼–ç è§„èŒƒ</a></p><h1 id="googleç¼–ç¨‹é£æ ¼æŒ‡å—"><a href="#googleç¼–ç¨‹é£æ ¼æŒ‡å—" class="headerlink" title="googleç¼–ç¨‹é£æ ¼æŒ‡å—"></a>googleç¼–ç¨‹é£æ ¼æŒ‡å—</h1><p><a href="https://github.com/geiyiren/MyBlogFile1/blob/pdf/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/google%E7%BC%96%E7%A8%8B%E9%A3%8E%E6%A0%BC%E6%8C%87%E5%8D%97.pdf">googleç¼–ç¨‹é£æ ¼æŒ‡å—</a></p><h1 id="ç§»åŠ¨æœºå™¨äººå¼€å‘ä»£ç è§„èŒƒè¯´æ˜ä¹¦"><a href="#ç§»åŠ¨æœºå™¨äººå¼€å‘ä»£ç è§„èŒƒè¯´æ˜ä¹¦" class="headerlink" title="ç§»åŠ¨æœºå™¨äººå¼€å‘ä»£ç è§„èŒƒè¯´æ˜ä¹¦"></a>ç§»åŠ¨æœºå™¨äººå¼€å‘ä»£ç è§„èŒƒè¯´æ˜ä¹¦</h1><p><a href="https://github.com/geiyiren/MyBlogFile1/blob/pdf/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/%E7%A7%BB%E5%8A%A8%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%BC%80%E5%8F%91%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%E8%AF%B4%E6%98%8E%E4%B9%A6.pdf">ç§»åŠ¨æœºå™¨äººå¼€å‘ä»£ç è§„èŒƒè¯´æ˜ä¹¦</a></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç è§„èŒƒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> java </tag>
            
            <tag> C </tag>
            
            <tag> C# </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Activityå’ŒSurfaceViewçš„ç”Ÿå‘½å‘¨æœŸ</title>
      <link href="/2023/02/10/activity-he-surfaceview-de-sheng-ming-zhou-qi/"/>
      <url>/2023/02/10/activity-he-surfaceview-de-sheng-ming-zhou-qi/</url>
      
        <content type="html"><![CDATA[<p>å½“ç”¨æˆ·æµè§ˆã€é€€å‡ºå’Œè¿”å›åˆ°æ‚¨çš„åº”ç”¨æ—¶ï¼Œæ‚¨åº”ç”¨ä¸­çš„ Activity å®ä¾‹ä¼šåœ¨å…¶ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒçŠ¶æ€é—´è½¬æ¢ã€‚Activity ç±»ä¼šæä¾›è®¸å¤šå›è°ƒï¼Œè¿™äº›å›è°ƒä¼šè®© Activity çŸ¥æ™“æŸä¸ªçŠ¶æ€å·²ç»æ›´æ”¹ï¼šç³»ç»Ÿæ­£åœ¨åˆ›å»ºã€åœæ­¢æˆ–æ¢å¤æŸä¸ª Activityï¼Œæˆ–è€…æ­£åœ¨é”€æ¯è¯¥ Activity æ‰€åœ¨çš„è¿›ç¨‹ã€‚</p><p>åœ¨ç”Ÿå‘½å‘¨æœŸå›è°ƒæ–¹æ³•ä¸­ï¼Œæ‚¨å¯ä»¥å£°æ˜ç”¨æˆ·ç¦»å¼€å’Œå†æ¬¡è¿›å…¥ Activity æ—¶ Activity çš„è¡Œä¸ºæ–¹å¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æ­£æ„å»ºæµåª’ä½“è§†é¢‘æ’­æ”¾å™¨ï¼Œå½“ç”¨æˆ·åˆ‡æ¢è‡³å¦ä¸€åº”ç”¨æ—¶ï¼Œæ‚¨å¯èƒ½è¦æš‚åœè§†é¢‘æˆ–ç»ˆæ­¢ç½‘ç»œè¿æ¥ã€‚å½“ç”¨æˆ·è¿”å›æ—¶ï¼Œæ‚¨å¯ä»¥é‡æ–°è¿æ¥ç½‘ç»œå¹¶å…è®¸ç”¨æˆ·ä»åŒä¸€ä½ç½®ç»§ç»­æ’­æ”¾è§†é¢‘ã€‚æ¢è¨€ä¹‹ï¼Œæ¯ä¸ªå›è°ƒéƒ½æ”¯æŒæ‚¨æ‰§è¡Œé€‚åˆç»™å®šçŠ¶æ€å˜æ›´çš„ç‰¹å®šä½œä¸šã€‚åœ¨åˆé€‚çš„æ—¶é—´æ‰§è¡Œæ­£ç¡®çš„ä½œä¸šï¼Œå¹¶å¦¥å–„å¤„ç†è½¬æ¢ï¼Œè¿™å°†æå‡åº”ç”¨çš„ç¨³å¥æ€§å’Œæ€§èƒ½ã€‚ä¾‹å¦‚ï¼Œè‰¯å¥½çš„ç”Ÿå‘½å‘¨æœŸå›è°ƒå®ç°æœ‰åŠ©äºé˜²æ­¢åº”ç”¨å‡ºç°ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li>å½“ç”¨æˆ·åœ¨ä½¿ç”¨åº”ç”¨æ—¶æ¥å¬æ¥ç”µï¼Œæˆ–åˆ‡æ¢è‡³å¦ä¸€åº”ç”¨æ—¶å´©æºƒã€‚</li><li>å½“ç”¨æˆ·æœªä¸»åŠ¨ä½¿ç”¨å®ƒæ—¶ï¼Œæ¶ˆè€—å®è´µçš„ç³»ç»Ÿèµ„æºã€‚</li><li>å½“ç”¨æˆ·ç¦»å¼€åº”ç”¨å¹¶åœ¨ç¨åè¿”å›æ—¶ï¼Œä¸¢å¤±ç”¨æˆ·çš„è¿›åº¦ã€‚</li><li>å½“å±å¹•åœ¨æ¨ªå‘å’Œçºµå‘ä¹‹é—´æ—‹è½¬æ—¶ï¼Œå´©æºƒæˆ–ä¸¢å¤±ç”¨æˆ·çš„è¿›åº¦ã€‚</li></ul><h1 id="Activity-ç”Ÿå‘½å‘¨æœŸæ¦‚å¿µ"><a href="#Activity-ç”Ÿå‘½å‘¨æœŸæ¦‚å¿µ" class="headerlink" title="Activity ç”Ÿå‘½å‘¨æœŸæ¦‚å¿µ"></a>Activity ç”Ÿå‘½å‘¨æœŸæ¦‚å¿µ</h1><p>ä¸ºäº†åœ¨ Activity ç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªé˜¶æ®µä¹‹é—´å¯¼èˆªè½¬æ¢ï¼ŒActivity ç±»æä¾›å…­ä¸ªæ ¸å¿ƒå›è°ƒï¼šonCreate()ã€onStart()ã€onResume()ã€onPause()ã€onStop() å’Œ onDestroy()ã€‚å½“ Activity è¿›å…¥æ–°çŠ¶æ€æ—¶ï¼Œç³»ç»Ÿä¼šè°ƒç”¨å…¶ä¸­æ¯ä¸ªå›è°ƒã€‚</p><p>ä¸‹å›¾æ˜¯å¯¹æ­¤èŒƒä¾‹çš„ç›´è§‚å±•ç°ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/Activity%E5%92%8CSurfaceView%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/activity_surfaceView.png">  </p><p>å½“ç”¨æˆ·å¼€å§‹ç¦»å¼€ Activity æ—¶ï¼Œç³»ç»Ÿä¼šè°ƒç”¨æ–¹æ³•æ¥é”€æ¯è¯¥ Activityã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ­¤é”€æ¯åªæ˜¯éƒ¨åˆ†é”€æ¯ï¼›Activity ä»ç„¶é©»ç•™åœ¨å†…å­˜ä¸­ï¼ˆä¾‹å¦‚å½“ç”¨æˆ·åˆ‡æ¢è‡³å¦ä¸€åº”ç”¨æ—¶ï¼‰ï¼Œå¹¶ä¸”ä»ç„¶å¯ä»¥è¿”å›åˆ°å‰å°ã€‚å¦‚æœç”¨æˆ·è¿”å›åˆ°è¯¥ Activityï¼ŒActivity ä¼šä»ç”¨æˆ·ç¦»å¼€æ—¶çš„ä½ç½®ç»§ç»­è¿è¡Œã€‚é™¤äº†å°‘æ•°ä¾‹å¤–ï¼Œåº”ç”¨åœ¨åå°è¿è¡Œæ—¶ä¼šå—åˆ°é™åˆ¶ï¼Œæ— æ³•å¯åŠ¨ Activityã€‚</p><p>ç³»ç»Ÿç»ˆæ­¢ç»™å®šè¿›ç¨‹åŠå…¶ä¸­ Activity çš„å¯èƒ½æ€§å–å†³äºå½“æ—¶ Activity çš„çŠ¶æ€ã€‚Activity çŠ¶æ€å’Œä»å†…å­˜ä¸­å¼¹å‡º ä¼šæ›´è¯¦ç»†åœ°ä»‹ç»çŠ¶æ€ä¸å¼¹å‡ºæ¼æ´ä¹‹é—´çš„å…³ç³»ã€‚</p><p>æ ¹æ® Activity çš„å¤æ‚ç¨‹åº¦ï¼Œæ‚¨å¯èƒ½ä¸éœ€è¦å®ç°æ‰€æœ‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚ä½†æ˜¯ï¼Œè¯·åŠ¡å¿…äº†è§£æ¯ä¸ªæ–¹æ³•ï¼Œå¹¶å®ç°èƒ½å¤Ÿç¡®ä¿åº”ç”¨æŒ‰ç”¨æˆ·é¢„æœŸæ–¹å¼è¿è¡Œçš„æ–¹æ³•ï¼Œè¿™éå¸¸é‡è¦ã€‚</p><blockquote><p>å…·ä½“ç»†èŠ‚å‚è€ƒï¼š<a href="https://developer.android.google.cn/guide/components/activities/activity-lifecycle?hl=zh-cn#java">https://developer.android.google.cn/guide/components/activities/activity-lifecycle?hl=zh-cn#java</a></p></blockquote><h1 id="Activityå’ŒSurfaceViewçš„ç”Ÿå‘½å‘¨æœŸ"><a href="#Activityå’ŒSurfaceViewçš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Activityå’ŒSurfaceViewçš„ç”Ÿå‘½å‘¨æœŸ"></a>Activityå’ŒSurfaceViewçš„ç”Ÿå‘½å‘¨æœŸ</h1><ul><li><p>ç¨‹åºæ‰“å¼€<br>Activity è°ƒç”¨é¡ºåº:<code>onCreate()</code>-&gt;<code>onStart()</code>-&gt;<code>onResume()</code><br>SurfaceView è°ƒç”¨é¡ºåº: <code>surfaceCreated()</code>-&gt;<code>surfaceChanged()</code>  </p></li><li><p>ç¨‹åºå…³é—­ï¼ˆæŒ‰ BACK é”®ï¼‰<br>Activity è°ƒç”¨é¡ºåº:<code>onPause()</code>-&gt;<code>onStop()</code>-&gt;<code>onDestory()</code><br>SurfaceView è°ƒç”¨é¡ºåº: <code>surfaceDestroyed()</code>  </p></li><li><p>ç¨‹åºåˆ‡åˆ°åå°ï¼ˆæŒ‰ HOME é”®ï¼‰<br>Activity è°ƒç”¨é¡ºåº:<code>onPause()</code>-&gt;<code>onStop()</code><br>SurfaceView è°ƒç”¨é¡ºåº: <code>surfaceDestroyed()</code>  </p></li><li><p>ç¨‹åºåˆ‡åˆ°å‰å°<br>Activity è°ƒç”¨é¡ºåº: <code>onRestart()</code>-&gt;<code>onStart()</code>-&gt;<code>onResume()</code><br>SurfaceView è°ƒç”¨é¡ºåº: <code>surfaceChanged()</code>-&gt;<code>surfaceCreated()</code>  </p></li><li><p>å±å¹•é”å®šï¼ˆæŒ‚æ–­é”®æˆ–é”å®šå±å¹•ï¼‰<br>Activity è°ƒç”¨é¡ºåº: <code>onPause()</code><br>SurfaceView ä»€ä¹ˆæ–¹æ³•éƒ½ä¸è°ƒç”¨  </p></li><li><p>å±å¹•è§£é”<br>Activity è°ƒç”¨é¡ºåº:<code>onResume()</code><br>SurfaceView ä»€ä¹ˆæ–¹æ³•éƒ½ä¸è°ƒç”¨</p></li></ul><blockquote><p>æ€»ç»“SurfaceViewåœ¨é¡µé¢å¯è§æˆ–è€…ä¸å¯è§æ—¶è§¦å‘  </p></blockquote><p>ç¤ºä¾‹å›¾å¦‚ä¸‹æ‰€ç¤º:  </p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/Activity%E5%92%8CSurfaceView%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/activity_lifecycle.png"></p>]]></content>
      
      
      <categories>
          
          <category> android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> android </tag>
            
            <tag> activity </tag>
            
            <tag> surfaceView </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ubuntuå®‰è£…opencvä¸opencv_contrib</title>
      <link href="/2023/01/31/ubuntu-an-zhuang-opencv-yu-opencv-contrib/"/>
      <url>/2023/01/31/ubuntu-an-zhuang-opencv-yu-opencv-contrib/</url>
      
        <content type="html"><![CDATA[<h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><h2 id="ä¾èµ–åŒ…å®‰è£…"><a href="#ä¾èµ–åŒ…å®‰è£…" class="headerlink" title="ä¾èµ–åŒ…å®‰è£…"></a>ä¾èµ–åŒ…å®‰è£…</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> build-essential  <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> cmake <span class="token function">git</span> libgtk2.0-dev pkg-config libavcodec-dev libavformat-dev libswscale-dev  <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> python-dev python-numpy libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff-dev libjasper-dev libdc1394-22-dev  <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> build-essential qt5-default ccache libv4l-dev libavresample-dev  libgphoto2-dev libopenblas-base libopenblas-dev doxygen  openjdk-8-jdk pylint libvtk6-dev<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> pkg-config<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="ä¸‹è½½æºæ–‡ä»¶"><a href="#ä¸‹è½½æºæ–‡ä»¶" class="headerlink" title="ä¸‹è½½æºæ–‡ä»¶"></a>ä¸‹è½½æºæ–‡ä»¶</h2><p><a href="https://github.com/opencv/opencv">opencv</a><br><a href="https://github.com/opencv/opencv_contrib">opencv_contrib</a></p><h2 id="è§£å‹"><a href="#è§£å‹" class="headerlink" title="è§£å‹"></a>è§£å‹</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">unzip</span> opencv-x.x.x.zip<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">unzip</span> opencv_contrib-x.x.x.zip<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="å°†opencv-contribç§»åŠ¨åˆ°opencvç›®å½•ä¸‹ï¼ŒåŒæ—¶åœ¨è¯¥ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹build"><a href="#å°†opencv-contribç§»åŠ¨åˆ°opencvç›®å½•ä¸‹ï¼ŒåŒæ—¶åœ¨è¯¥ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹build" class="headerlink" title="å°†opencv_contribç§»åŠ¨åˆ°opencvç›®å½•ä¸‹ï¼ŒåŒæ—¶åœ¨è¯¥ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹build"></a>å°†opencv_contribç§»åŠ¨åˆ°opencvç›®å½•ä¸‹ï¼ŒåŒæ—¶åœ¨è¯¥ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹build</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cp</span> <span class="token parameter variable">-r</span> opencv_contrib-x.x.x opencv-x.x.x  <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> opencv-x.x.x<span class="token function">mkdir</span> build                             <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="ç°åœ¨è¿›å…¥åˆ°opencv-x-x-xç›®å½•ä¸‹ï¼ŒæŸ¥çœ‹æ–‡ä»¶ç»“æ„"><a href="#ç°åœ¨è¿›å…¥åˆ°opencv-x-x-xç›®å½•ä¸‹ï¼ŒæŸ¥çœ‹æ–‡ä»¶ç»“æ„" class="headerlink" title="ç°åœ¨è¿›å…¥åˆ°opencv-x.x.xç›®å½•ä¸‹ï¼ŒæŸ¥çœ‹æ–‡ä»¶ç»“æ„"></a>ç°åœ¨è¿›å…¥åˆ°opencv-x.x.xç›®å½•ä¸‹ï¼ŒæŸ¥çœ‹æ–‡ä»¶ç»“æ„</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ls</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">3rdpartycmakedataLICENSEplatformsappsCMakeLists.txtdocmodulesREADME.mdbuildCONTRIBUTING.mdincludepencv_contrib-x.x.xsamples<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è¿›å…¥buildç›®å½•ï¼Œå¹¶ä¸”æ‰§è¡Œcmakeç”Ÿæˆmakefileæ–‡ä»¶"><a href="#è¿›å…¥buildç›®å½•ï¼Œå¹¶ä¸”æ‰§è¡Œcmakeç”Ÿæˆmakefileæ–‡ä»¶" class="headerlink" title="è¿›å…¥buildç›®å½•ï¼Œå¹¶ä¸”æ‰§è¡Œcmakeç”Ÿæˆmakefileæ–‡ä»¶"></a>è¿›å…¥buildç›®å½•ï¼Œå¹¶ä¸”æ‰§è¡Œcmakeç”Ÿæˆmakefileæ–‡ä»¶</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> build  <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cmake <span class="token parameter variable">-D</span> <span class="token assign-left variable">CMAKE_BUILD_TYPE</span><span class="token operator">=</span>Release <span class="token parameter variable">-D</span> <span class="token assign-left variable">CMAKE_INSTALL_PREFIX</span><span class="token operator">=</span>/usr/local <span class="token parameter variable">-D</span> <span class="token assign-left variable">OPENCV_EXTRA_MODULES_PATH</span><span class="token operator">=</span>/home/files/opencv-x.x.x/opencv_contrib-x.x.x/modules/ <span class="token punctuation">..</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>æ³¨æ„ï¼šOPENCV_EXTRA_MODULES_PATHå°±æ˜¯ä½  opencv_contrib-3.3.1ä¸‹é¢çš„modulesç›®å½•ï¼Œè¯·æŒ‰ç…§è‡ªå·±çš„å®é™…ç›®å½•ä¿®æ”¹åœ°å€ã€‚<br>æ¥ä¸‹æ¥å°±æ˜¯æ¼«é•¿çš„ç­‰å¾…äº†â€¦<br>ç”Ÿæˆå®Œæ¯•æç¤ºï¼š</p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">--   Install path:                  /usr/local-- --   cvconfig.h is in:              /home/files/opencv-x.x.x/build-- ------------------------------------------------------------------- -- Configuring <span class="token keyword">done</span>-- Generating <span class="token keyword">done</span>-- Build files have been written to: /home/files/opencv-x.x.x/build<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åœ¨cmakeæˆåŠŸä¹‹åï¼Œå°±å¯ä»¥åœ¨buildæ–‡ä»¶ä¸‹makeäº†"><a href="#åœ¨cmakeæˆåŠŸä¹‹åï¼Œå°±å¯ä»¥åœ¨buildæ–‡ä»¶ä¸‹makeäº†" class="headerlink" title="åœ¨cmakeæˆåŠŸä¹‹åï¼Œå°±å¯ä»¥åœ¨buildæ–‡ä»¶ä¸‹makeäº†"></a>åœ¨cmakeæˆåŠŸä¹‹åï¼Œå°±å¯ä»¥åœ¨buildæ–‡ä»¶ä¸‹makeäº†</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">make</span> <span class="token parameter variable">-j8</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">make</span> <span class="token function">install</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¥ä¸‹æ¥å°±æ˜¯æ›´æ¼«é•¿çš„ç­‰å¾… â€¦ å…·ä½“æ—¶é—´å› äººè€Œå¼‚</p><h2 id="é“¾æ¥åº“å…±äº«"><a href="#é“¾æ¥åº“å…±äº«" class="headerlink" title="é“¾æ¥åº“å…±äº«"></a>é“¾æ¥åº“å…±äº«</h2><p>ç¼–è¯‘å®‰è£…å®Œæ¯•ä¹‹åï¼Œä¸ºäº†è®©ä½ çš„é“¾æ¥åº“è¢«ç³»ç»Ÿå…±äº«ï¼Œè®©ç¼–è¯‘å™¨å‘ç°ï¼Œéœ€è¦æ‰§è¡Œç®¡ç†å‘½ä»¤ldconfigï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> ldconfig <span class="token parameter variable">-v</span>  <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="bugè§£å†³"><a href="#bugè§£å†³" class="headerlink" title="bugè§£å†³"></a>bugè§£å†³</h1><h2 id="è§£å†³ç¼–è¯‘opencvæ—¶ï¼Œå¡åœ¨IPPICV"><a href="#è§£å†³ç¼–è¯‘opencvæ—¶ï¼Œå¡åœ¨IPPICV" class="headerlink" title="è§£å†³ç¼–è¯‘opencvæ—¶ï¼Œå¡åœ¨IPPICV"></a>è§£å†³ç¼–è¯‘opencvæ—¶ï¼Œå¡åœ¨IPPICV</h2><h3 id="æ‰‹åŠ¨ä¸‹è½½ç¼ºå°‘æ–‡ä»¶"><a href="#æ‰‹åŠ¨ä¸‹è½½ç¼ºå°‘æ–‡ä»¶" class="headerlink" title="æ‰‹åŠ¨ä¸‹è½½ç¼ºå°‘æ–‡ä»¶"></a>æ‰‹åŠ¨ä¸‹è½½ç¼ºå°‘æ–‡ä»¶</h3><p><a href="https://github.com/geiyiren/MyBlog/blob/main/source/_posts/ubuntu%E5%AE%89%E8%A3%85opencv%E4%B8%8Eopencv_contrib/.cache/ippicv/7421de0095c7a39162ae13a6098782f9-ippicv_2020_lnx_intel64_20191018_general.tgz">ippicv_2020_lnx_intel64_20191018_general.tgz</a></p><h3 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> gedit opencv-x.x.x/3rdparty/ippicv.cmake<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ‰¾åˆ°<code>&quot;https://raw.githubusercontent.com/opencv/opencv_3rdparty/$&#123;IPPICV_COMMIT&#125;/ippicv/&quot;</code></p><p>å°†å…¶æ”¹ä¸ºippicv_2020_lnx_intel64_20191018_general.tgzä¿å­˜çš„ç›®å½•ã€‚æ¯”å¦‚ï¼š<code>&quot;file:///home/downloads/&quot;</code>,æ ¼å¼ä¸º<code>&quot;file://è·¯å¾„&quot;</code><br>æœ€åé‡æ–°æ‰§è¡Œç¼–è¯‘å‘½ä»¤å³å¯ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">make</span> <span class="token parameter variable">-j8</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="ç»ˆææ–¹æ³•ï¼šè§£å†³ç¼–è¯‘opencvæ—¶ï¼Œå¡åœ¨IPPICVã€boostdescã€vggç­‰æ–‡ä»¶ä¸‹è½½é—®é¢˜"><a href="#ç»ˆææ–¹æ³•ï¼šè§£å†³ç¼–è¯‘opencvæ—¶ï¼Œå¡åœ¨IPPICVã€boostdescã€vggç­‰æ–‡ä»¶ä¸‹è½½é—®é¢˜" class="headerlink" title="ç»ˆææ–¹æ³•ï¼šè§£å†³ç¼–è¯‘opencvæ—¶ï¼Œå¡åœ¨IPPICVã€boostdescã€vggç­‰æ–‡ä»¶ä¸‹è½½é—®é¢˜"></a>ç»ˆææ–¹æ³•ï¼šè§£å†³ç¼–è¯‘opencvæ—¶ï¼Œå¡åœ¨IPPICVã€boostdescã€vggç­‰æ–‡ä»¶ä¸‹è½½é—®é¢˜</h2><p>å¡åœ¨è¿™é‡Œçš„åŸå› æ˜¯å› ä¸ºåœ¨cmakeç¼–è¯‘çš„æ—¶å€™æ²¡æœ‰ä¸‹è½½æˆåŠŸï¼Œè¿™é‡Œä½¿ç”¨æ‰‹åŠ¨ä¸‹è½½ä¸æ›¿æ¢è¿›è¡Œè¡¥æ•‘</p><h2 id="æ‰‹åŠ¨ä¸‹è½½ç¼ºå°‘æ–‡ä»¶-1"><a href="#æ‰‹åŠ¨ä¸‹è½½ç¼ºå°‘æ–‡ä»¶-1" class="headerlink" title="æ‰‹åŠ¨ä¸‹è½½ç¼ºå°‘æ–‡ä»¶"></a>æ‰‹åŠ¨ä¸‹è½½ç¼ºå°‘æ–‡ä»¶</h2><p><a href="https://pan.baidu.com/s/1OrfTdsNczKlNvJPg_gD0VA?pwd=1633">ç™¾åº¦ç½‘ç›˜:ubuntuå®‰è£…opencvä¸opencv_contrib</a></p><h2 id="æ›¿æ¢æœ¬åœ°æ–‡ä»¶"><a href="#æ›¿æ¢æœ¬åœ°æ–‡ä»¶" class="headerlink" title="æ›¿æ¢æœ¬åœ°æ–‡ä»¶"></a>æ›¿æ¢æœ¬åœ°æ–‡ä»¶</h2><p>åœ¨<code>opencvæºæ–‡ä»¶ç›®å½•</code>ä¸‹æ‰¾åˆ°éšè—æ–‡ä»¶å¤¹<code>.cache</code>ï¼Œç„¶ååˆ†åˆ«æ›¿æ¢å…¶ä¸­çš„æ–‡ä»¶ã€‚æ³¨æ„ä¸‹è½½çš„æ–‡ä»¶ä¸­æ¯ä¸ªå¯¹åº”æ–‡ä»¶çš„å¼€å¤´å­—ç¬¦ä¸²ä¸ºä¸´æ—¶æ ¡éªŒç ï¼Œéœ€è¦ä»¥è‡ªå·±æœ¬æ¬¡å®‰è£…æ—¶ç”Ÿæˆçš„æ ¡éªŒç ä¸ºå‡†ã€‚ä¾‹å¦‚<code>7421de0095c7a39162ae13a6098782f9-ippicv_2020_lnx_intel64_20191018_general.tgz</code>ä¸­<code>7421de0095c7a39162ae13a6098782f9</code>ä¸ºå®‰è£…æ ¡éªŒç ï¼Œè¿™ä¸ªåœ¨æ›¿æ¢æ–‡ä»¶æ—¶å€™éœ€è¦æ”¹ä¸ºæœ¬æ¬¡å®‰è£…è‡ªåŠ¨ç”Ÿæˆçš„æ ¡éªŒç ã€‚</p><h2 id="cacheæ–‡ä»¶ç›®å½•"><a href="#cacheæ–‡ä»¶ç›®å½•" class="headerlink" title=".cacheæ–‡ä»¶ç›®å½•"></a>.cacheæ–‡ä»¶ç›®å½•</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">.cacheâ”œâ”€â”€ dataâ”‚   â””â”€â”€ 7505c44ca4eb54b4ab1e4777cb96ac05-face_landmark_model.datâ”œâ”€â”€ ippicvâ”‚   â””â”€â”€ 7421de0095c7a39162ae13a6098782f9-ippicv_2020_lnx_intel64_20191018_general.tgzâ””â”€â”€ xfeatures2d    â”œâ”€â”€ boostdesc    â”‚   â”œâ”€â”€ 0ae0675534aa318d9668f2a179c2a052-boostdesc_lbgm.i    â”‚   â”œâ”€â”€ 0ea90e7a8f3f7876d450e4149c97c74f-boostdesc_bgm.i    â”‚   â”œâ”€â”€ 202e1b3e9fec871b04da31f7f016679f-boostdesc_binboost_064.i    â”‚   â”œâ”€â”€ 232c966b13651bd0e46a1497b0852191-boostdesc_bgm_bi.i    â”‚   â”œâ”€â”€ 324426a24fa56ad9c5b8e3e0b3e5303e-boostdesc_bgm_hd.i    â”‚   â”œâ”€â”€ 98ea99d399965c03d555cef3ea502a0b-boostdesc_binboost_128.i    â”‚   â””â”€â”€ e6dcfa9f647779eb1ce446a8d759b6ea-boostdesc_binboost_256.i    â””â”€â”€ vgg        â”œâ”€â”€ 151805e03568c9f490a5e3a872777b75-vgg_generated_120.i        â”œâ”€â”€ 7126a5d9a8884ebca5aea5d63d677225-vgg_generated_64.i        â”œâ”€â”€ 7cd47228edec52b6d82f46511af325c5-vgg_generated_80.i        â””â”€â”€ e8d0dcd54d1bcfdc29203d011a797179-vgg_generated_48.i<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p><a href="https://blog.csdn.net/qq_39936818/article/details/104951448">ä¸€æ¬¡æ€§è§£å†³opencvæºç å®‰è£…æ–‡ä»¶ä¸‹è½½é—®é¢˜ï¼šippicv_2017u3_lnx, face_landmark_model.dat, tiny-dnn</a><br><a href="https://blog.csdn.net/weixin_45846977/article/details/112396739">ubuntuå®‰è£…opencvé—®é¢˜è§£å†³â€”â€”ç¼ºå°‘boostdesc_bgm.iæ–‡ä»¶</a></p>]]></content>
      
      
      <categories>
          
          <category> å¾…æ•´ç†opencv </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
            <tag> opencv </tag>
            
            <tag> opencv_contrib </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†™åšå®¢å¸¸ç”¨æ¨¡æ¿</title>
      <link href="/2023/01/31/xie-bo-ke-chang-yong-mo-ban/"/>
      <url>/2023/01/31/xie-bo-ke-chang-yong-mo-ban/</url>
      
        <content type="html"><![CDATA[<h1 id="æ’å…¥æ€ç»´å¯¼å›¾"><a href="#æ’å…¥æ€ç»´å¯¼å›¾" class="headerlink" title="æ’å…¥æ€ç»´å¯¼å›¾"></a>æ’å…¥æ€ç»´å¯¼å›¾</h1><p>åŸºäºç™¾åº¦è„‘å›¾çš„å¼€æºåº“ kityminder å¾ˆä¸é”™ï¼Œå®ç°äº†markdownæ–‡æ¡£ä¸­ä½¿ç”¨æ€ç»´å¯¼å›¾çš„æ–¹æ³•ã€‚ä½¿ç”¨ Hexo çš„ pullquote å°†æ€ç»´å¯¼å›¾çš„å†…å®¹åŒ…è£¹èµ·æ¥ï¼Œmindmap æ˜¯æ€ç»´å¯¼å›¾æ¸²æŸ“çš„æ ‡å¿—ï¼Œå°ºå¯¸æœ‰ä¸‰ç§è§„æ ¼ï¼šmindmap-smã€mindmap-md å’Œ mindmap-lgã€‚<br>æ€ç»´å¯¼å›¾çš„å†…å®¹å’Œå±‚çº§å…³ç³»é€šè¿‡æ— åºåˆ—è¡¨è¡¨ç¤ºï¼Œæ”¯æŒåŸºæœ¬çš„æ–‡å­—å’Œè¶…é“¾æ¥ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ’°å†™æ–‡ç« æ—¶åœ¨éœ€è¦çš„ä½ç½®æ·»åŠ å¦‚ä¸‹å†…å®¹:  </p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% pullquote mindmap mindmap-md %&#125;<span class="token list punctuation">-</span> <span class="token url">[<span class="token content">åœ¨ Hexo ä¸­ä½¿ç”¨æ€ç»´å¯¼å›¾</span>](<span class="token url">https://hunterx.xyz/use-mindmap-in-hexo.html</span>)</span>  <span class="token list punctuation">-</span> å‰è¨€  <span class="token list punctuation">-</span> æ“ä½œæŒ‡å—    <span class="token list punctuation">-</span> å‡†å¤‡éœ€è¦çš„æ–‡ä»¶    <span class="token list punctuation">-</span> ä¸ºä¸»é¢˜æ·»åŠ  CSS/JS æ–‡ä»¶  <span class="token list punctuation">-</span> ä½¿ç”¨æ–¹æ³•&#123;% endpullquote %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹ï¼š  </p><blockquote class="pullquote mindmap mindmap-md"><ul><li><a href="https://hunterx.xyz/use-mindmap-in-hexo.html">åœ¨ Hexo ä¸­ä½¿ç”¨æ€ç»´å¯¼å›¾</a><ul><li>å‰è¨€</li><li>æ“ä½œæŒ‡å—<ul><li>å‡†å¤‡éœ€è¦çš„æ–‡ä»¶</li><li>ä¸ºä¸»é¢˜æ·»åŠ  CSS&#x2F;JS æ–‡ä»¶</li></ul></li><li>ä½¿ç”¨æ–¹æ³•</li></ul></li></ul></blockquote><h1 id="æ’å…¥å›¾åƒ"><a href="#æ’å…¥å›¾åƒ" class="headerlink" title="æ’å…¥å›¾åƒ"></a>æ’å…¥å›¾åƒ</h1><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">![](https://cdn.jsdelivr.net/gh/ç”¨æˆ·å/ä»“åº“åç§°/ä»“åº“ä¸‹çš„å›¾åƒè·¯å¾„)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>ä¾‹å¦‚ï¼š</li></ul><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">![](https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/è½¦è¾†åŠ¨æ€è¾…åŠ©è½¨è¿¹çº¿ç”Ÿæˆæ–¹æ³•8.png)  <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="æ’å…¥pdf"><a href="#æ’å…¥pdf" class="headerlink" title="æ’å…¥pdf"></a>æ’å…¥pdf</h1><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>object</span> <span class="token attr-name">data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ä»“åº“è·¯å¾„<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>application/pdf<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ä»“åº“ä¸‹pdfè·¯å¾„<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000px<span class="token punctuation">"</span></span> <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">scrolling</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>object</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ä¾‹å¦‚ï¼š</li></ul><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>object</span> <span class="token attr-name">data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://github.com/geiyiren/MyBlogFile1/blob/pdf/git%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>application/pdf<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>git%E6%95%99%E7%A8%8B.pdf<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000px<span class="token punctuation">"</span></span> <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">scrolling</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>object</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šè¿°æ–¹æ³•é€‚ç”¨ç”¨ç§äººgithubä»“åº“ä¸­çš„pdfæ–‡ä»¶ï¼›å¦‚æœæ’å…¥å…¶ä»–é“¾æ¥ç›´è¾¾çš„pdfæ–‡æ¡£ï¼Œå¯ä»¥ä½¿ç”¨ï¼š</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% pdf PDFç›´è¾¾é“¾æ¥ %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ€ç»´å¯¼å›¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mallocç”³è¯·å†…å­˜è®¿é—®æ—¶å®¹æ˜“å‡ºç°çš„è®¿é—®è¶Šç•Œé—®é¢˜</title>
      <link href="/2022/12/15/malloc-shen-qing-nei-cun-fang-wen-shi-rong-yi-chu-xian-de-fang-wen-yue-jie-wen-ti/"/>
      <url>/2022/12/15/malloc-shen-qing-nei-cun-fang-wen-shi-rong-yi-chu-xian-de-fang-wen-yue-jie-wen-ti/</url>
      
        <content type="html"><![CDATA[<h1 id="mallocç›¸å…³"><a href="#mallocç›¸å…³" class="headerlink" title="mallocç›¸å…³"></a>mallocç›¸å…³</h1><h2 id="mallocç”³è¯·å†…å­˜è®¿é—®bug"><a href="#mallocç”³è¯·å†…å­˜è®¿é—®bug" class="headerlink" title="mallocç”³è¯·å†…å­˜è®¿é—®bug"></a>mallocç”³è¯·å†…å­˜è®¿é—®bug</h2><ul><li>åœ¨è®¿é—®mallocç”³è¯·çš„å†…å­˜æ—¶ï¼Œå¦‚æœè®¿é—®è¶Šç•Œæ—¶ä¸ä¼šæç¤ºé”™è¯¯ï¼Œè€Œæ˜¯ç»§ç»­æ“ä½œé”™è¯¯çš„å†…å­˜å—ï¼Œè¿™ä¸€ç±»çš„é”™è¯¯è¾ƒä¸ºéšç§˜ã€‚</li><li>ä¾‹å¦‚ï¼šåœ¨æ„å»ºå›¾åƒå˜æ¢çš„mapæ˜ å°„è¡¨æ—¶ï¼Œç”³è¯·å­˜æ”¾mapæ˜ å°„å…³ç³»çš„å†…å­˜å—çš„å¤§å°å¹¶ä¸æ˜¯è¾“å‡ºå›¾åƒå¯¹åº”çš„å¤§å°ï¼Œè€Œæ˜¯è¾“å‡ºå›¾åƒå¤§å°çš„2å€ï¼Œå› æ­¤æ­¤æ—¶å­˜å‚¨çš„æ˜¯åƒç´ ä½ç½®(x,y)çš„æ˜ å°„å…³ç³»ã€‚  <pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">//æ„å»º4è·¯YUVé±¼çœ¼å›¾åƒå»ç•¸å˜æ˜ å°„å…³ç³»</span><span class="token keyword">void</span> <span class="token function">dist2undist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">float</span> point_u_tmp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> point_d_tmp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">float</span> sf <span class="token operator">=</span> <span class="token number">1.5</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> img_out_height <span class="token operator">=</span> <span class="token number">720</span> <span class="token operator">*</span> img_out_h_scale<span class="token punctuation">;</span>    <span class="token keyword">int</span> img_out_width <span class="token operator">=</span> <span class="token number">1280</span> <span class="token operator">*</span> img_out_w_scale<span class="token punctuation">;</span>    <span class="token function">LOGI</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"dist2undist begin !,img_out size(%d,%d)"</span><span class="token punctuation">,</span> img_out_height<span class="token punctuation">,</span> img_out_width<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> NUM_CAMERAS<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token comment">// è¿™é‡Œå°±æ˜¯bugæ‰€åœ¨</span>        undist_map<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>undistView_width <span class="token operator">*</span> undistView_height <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>undist_map<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token function">LOGI</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"undist_map malloc failed!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> img_out_height<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> img_out_width<span class="token punctuation">;</span> j <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                point_u_tmp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> j <span class="token operator">/</span> img_out_w_scale<span class="token punctuation">;</span>                point_u_tmp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> i <span class="token operator">/</span> img_out_h_scale<span class="token punctuation">;</span>                <span class="token function">LDC_UndistToDistExt</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ldc<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> point_u_tmp<span class="token punctuation">,</span> point_d_tmp<span class="token punctuation">,</span> sf<span class="token punctuation">)</span><span class="token punctuation">;</span>                undist_map<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">*</span> img_out_width <span class="token operator">+</span> j<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> point_d_tmp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> img_in_w_scale<span class="token punctuation">;</span>                undist_map<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">*</span> img_out_width <span class="token operator">+</span> j<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> point_d_tmp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> img_in_h_scale<span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">int</span><span class="token punctuation">(</span>j <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">&#123;</span>                    undist_map<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">*</span> img_out_width <span class="token operator">+</span> j <span class="token operator">+</span> img_out_width <span class="token operator">*</span> img_out_height<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">(</span>point_d_tmp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> img_in_w_scale <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>                    undist_map<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">*</span> img_out_width <span class="token operator">+</span> j <span class="token operator">+</span> img_out_width <span class="token operator">*</span> img_out_height<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">(</span>point_d_tmp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> img_in_h_scale <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">720</span> <span class="token operator">*</span> img_in_h_scale<span class="token punctuation">;</span>                    undist_map<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">*</span> img_out_width <span class="token operator">+</span> j <span class="token operator">+</span> img_out_width <span class="token operator">*</span> img_out_height <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">(</span>point_d_tmp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> img_in_w_scale <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>                    undist_map<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">*</span> img_out_width <span class="token operator">+</span> j <span class="token operator">+</span> img_out_width <span class="token operator">*</span> img_out_height <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">(</span>point_d_tmp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> img_in_h_scale <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">720</span> <span class="token operator">*</span> img_in_h_scale<span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>å¦‚æœ #18 è¡Œä¸­ç”³è¯·å†…å­˜ä¸º:<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">undist_map<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>undistView_width <span class="token operator">*</span> undistView_height <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>é‚£ä¹ˆï¼Œåé¢æ„å»ºmapæ˜ å°„å…³ç³»æ—¶å¹¶ä¸ä¼šå‡ºç°è¶Šç•Œè®¿é—®æç¤ºï¼Œç”šè‡³åé¢å¦‚æœä¸å†ç”³è¯·å†…å­˜å—çš„æƒ…å†µä¸‹ï¼Œç»§ç»­è¶Šç•Œè®¿é—®undist_mapä¸­çš„å†…å®¹ä¹Ÿä¸ä¼šæŠ¥é”™ï¼›ä½†æ˜¯ï¼Œå¦‚æœåé¢ç»§ç»­ç”³è¯·å†…å­˜å—æ¥ä½¿ç”¨çš„æ—¶å€™ï¼Œåç»­çš„å†…å­˜å—å¯èƒ½å°±ä¼šå’Œundist_mapå†…å­˜å†²çªã€‚</li></ul><hr><p><font color=Red><strong>æ€»ç»“</strong></font><br>ä½¿ç”¨mallocç”³è¯·å†…å­˜å¹¶è®¿é—®æ—¶ï¼Œæ³¨æ„è®¿é—®æ˜¯å¦è¶Šç•Œï¼Œä¸”è®¿é—®è¶Šç•Œä¸æŠ¥é”™ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> malloc </tag>
            
            <tag> å†…å­˜è®¿é—® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>androidå¼¹çª—ç•Œé¢è®¾ç½®æ–¹æ³•</title>
      <link href="/2022/12/14/android-dan-chuang-jie-mian-she-zhi-fang-fa/"/>
      <url>/2022/12/14/android-dan-chuang-jie-mian-she-zhi-fang-fa/</url>
      
        <content type="html"><![CDATA[<h1 id="åŠŸèƒ½æè¿°"><a href="#åŠŸèƒ½æè¿°" class="headerlink" title="åŠŸèƒ½æè¿°"></a>åŠŸèƒ½æè¿°</h1><p>ç‚¹å‡»ä¸»ç•Œé¢çš„ä¸€ä¸ªæŒ‰é’®ï¼Œç„¶åè·³è½¬å¦ä¸€ä¸ªè®¾ç½®ç•Œé¢ï¼Œè¿›è¡Œå‚æ•°è®¾ç½®ï¼ŒåŒ…æ‹¬ï¼šå‚æ•°è¾“å…¥ã€å¼€å…³æŒ‰é’®ã€ä¿å­˜ã€é€€å‡ºç­‰åŠŸèƒ½ã€‚ç•Œé¢çš„å¸ƒå±€é‡‡ç”¨è¡¨æ ¼å¸ƒå±€ï¼Œå¹³å‡åˆ†å¸ƒå„ä¸ªè¡Œåˆ—ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p><h1 id="MainActivity-javaç¤ºä¾‹"><a href="#MainActivity-javaç¤ºä¾‹" class="headerlink" title="MainActivity.javaç¤ºä¾‹"></a>MainActivity.javaç¤ºä¾‹</h1><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// ä¸»ç•Œé¢æŒ‰é’®å®šä¹‰</span><span class="token keyword">private</span> <span class="token class-name">ImageButton</span> mImage_set_btn<span class="token punctuation">;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ä¸»ç•Œé¢æŒ‰é’®äº‹ä»¶</span><span class="token comment">// R.id.image_set_btnä¸ºä¸»ç•Œé¢æŒ‰é’®ID</span>mImage_set_btn <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ImageButton</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>image_set_btn<span class="token punctuation">)</span><span class="token punctuation">;</span>mImage_set_btn<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> view<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">final</span> <span class="token class-name">LayoutInflater</span> layoutInflater <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">LayoutInflater</span><span class="token punctuation">)</span><span class="token function">getBaseContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSystemService</span><span class="token punctuation">(</span><span class="token constant">LAYOUT_INFLATER_SERVICE</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//R.id.avm_parm_viewä¸ºè·³è½¬ç•Œé¢IDï¼ˆandroid:id="@+id/avm_parm_view"ï¼‰</span><span class="token class-name">View</span> popupView <span class="token operator">=</span> layoutInflater<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>layout_avm_parm<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">ViewGroup</span><span class="token punctuation">)</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>avm_parm_view<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>mPopupWindow_register <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PopupWindow</span><span class="token punctuation">(</span>popupView<span class="token punctuation">,</span> <span class="token class-name">WindowManager<span class="token punctuation">.</span>LayoutParams</span><span class="token punctuation">.</span><span class="token constant">MATCH_PARENT</span><span class="token punctuation">,</span> <span class="token class-name">WindowManager<span class="token punctuation">.</span>LayoutParams</span><span class="token punctuation">.</span><span class="token constant">MATCH_PARENT</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>mPopupWindow_register<span class="token punctuation">.</span><span class="token function">setTouchable</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>mPopupWindow_register<span class="token punctuation">.</span><span class="token function">setOutsideTouchable</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>mPopupWindow_register<span class="token punctuation">.</span><span class="token function">setBackgroundDrawable</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BitmapDrawable</span><span class="token punctuation">(</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">Bitmap</span><span class="token punctuation">)</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>mPopupWindow_register<span class="token punctuation">.</span><span class="token function">showAsDropDown</span><span class="token punctuation">(</span>view<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//------ è·å–è¾“å…¥æ§ä»¶çš„è¾“å…¥å†…å®¹ ------</span><span class="token comment">//è½¦é•¿</span>editText_car_length <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">EditText</span><span class="token punctuation">)</span> mPopupWindow_register<span class="token punctuation">.</span><span class="token function">getContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>EditText_car_length<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è½¦å®½</span>editText_car_width <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">EditText</span><span class="token punctuation">)</span> mPopupWindow_register<span class="token punctuation">.</span><span class="token function">getContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>EditText_car_width<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å‰æ‚¬</span>editText_suspension_front <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">EditText</span><span class="token punctuation">)</span> mPopupWindow_register<span class="token punctuation">.</span><span class="token function">getContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>EditText_suspension_front<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åæ‚¬</span>editText_suspension_back <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">EditText</span><span class="token punctuation">)</span> mPopupWindow_register<span class="token punctuation">.</span><span class="token function">getContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>EditText_suspension_back<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä¿å­˜æŒ‰é’®</span>delok_btn <span class="token operator">=</span> popupView<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>avm_parameter_save<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿”å›æŒ‰é’®</span>delcancel_btn <span class="token operator">=</span> popupView<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>avm_parameter_return<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è½¦é“çº¿å¼€å…³</span>mTrajectory_Switch<span class="token operator">=</span>popupView<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>TrajectoryLine_Switch<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//BSDå¼€å…³</span>mBSD_Switch<span class="token operator">=</span>popupView<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>BSD_Switch<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//äº®åº¦å‡è¡¡å¼€å…³</span>mBE_Switch<span class="token operator">=</span>popupView<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>BE_Switch<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–é»˜è®¤å¼€å…³å‚æ•°</span>carParameter carParm_history <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">carParameter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">try</span> <span class="token punctuation">&#123;</span>carParm_history<span class="token operator">=</span>avmSetParm<span class="token punctuation">.</span><span class="token function">readJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//------ è®¾ç½®è¾“å…¥æ§ä»¶çš„æ˜¾ç¤ºå†å²æ•°æ® ------</span>editText_car_length<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>carParm_history<span class="token punctuation">.</span>car_length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>editText_car_width<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>carParm_history<span class="token punctuation">.</span>car_width<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>editText_suspension_front<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>carParm_history<span class="token punctuation">.</span>suspension_front<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>editText_suspension_back<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>carParm_history<span class="token punctuation">.</span>suspension_back<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">switch</span> <span class="token punctuation">(</span>carParm_history<span class="token punctuation">.</span>on_TrajectoryLine<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span>mTrajectory_Switch<span class="token punctuation">.</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>mTrajectory_Switch<span class="token punctuation">.</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">switch</span> <span class="token punctuation">(</span>carParm_history<span class="token punctuation">.</span>on_BSD<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span>mBSD_Switch<span class="token punctuation">.</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>mBSD_Switch<span class="token punctuation">.</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">switch</span> <span class="token punctuation">(</span>carParm_history<span class="token punctuation">.</span>on_Bright<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span>mBE_Switch<span class="token punctuation">.</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>mBE_Switch<span class="token punctuation">.</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//------ è®¾ç½®ä¿å­˜æŒ‰é’®è§¦å‘äº‹ä»¶ ------</span>delok_btn<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">String</span> car_length <span class="token operator">=</span> editText_car_length<span class="token punctuation">.</span><span class="token function">getEditableText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> car_width <span class="token operator">=</span> editText_car_width<span class="token punctuation">.</span><span class="token function">getEditableText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> suspension_front <span class="token operator">=</span> editText_suspension_front<span class="token punctuation">.</span><span class="token function">getEditableText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> suspension_back <span class="token operator">=</span> editText_suspension_back<span class="token punctuation">.</span><span class="token function">getEditableText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>carParameter carParm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">carParameter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"filename_avm_set_json"</span><span class="token punctuation">,</span><span class="token string">"filename_avm_set_json"</span><span class="token operator">+</span>avmSetParm<span class="token punctuation">.</span>jsonFileName<span class="token punctuation">)</span><span class="token punctuation">;</span>carParm<span class="token punctuation">.</span>car_length<span class="token operator">=</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>car_length<span class="token punctuation">)</span><span class="token punctuation">;</span>carParm<span class="token punctuation">.</span>car_width<span class="token operator">=</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>car_width<span class="token punctuation">)</span><span class="token punctuation">;</span>carParm<span class="token punctuation">.</span>suspension_front<span class="token operator">=</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>suspension_front<span class="token punctuation">)</span><span class="token punctuation">;</span>carParm<span class="token punctuation">.</span>suspension_back<span class="token operator">=</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>suspension_back<span class="token punctuation">)</span><span class="token punctuation">;</span>carParm<span class="token punctuation">.</span>on_BSD<span class="token operator">=</span>mView<span class="token punctuation">.</span>mBSDViewID<span class="token punctuation">;</span>carParm<span class="token punctuation">.</span>on_Bright<span class="token operator">=</span>mView<span class="token punctuation">.</span>mBrightID<span class="token punctuation">;</span>carParm<span class="token punctuation">.</span>on_TrajectoryLine<span class="token operator">=</span>mView<span class="token punctuation">.</span>mTrajectoryLineViewID<span class="token punctuation">;</span><span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token constant">TAG</span><span class="token punctuation">,</span> <span class="token string">"car_length"</span><span class="token operator">+</span>carParm<span class="token punctuation">.</span>car_length<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token constant">TAG</span><span class="token punctuation">,</span> <span class="token string">"car_width"</span><span class="token operator">+</span>carParm<span class="token punctuation">.</span>car_width<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token constant">TAG</span><span class="token punctuation">,</span> <span class="token string">"suspension_front"</span><span class="token operator">+</span>carParm<span class="token punctuation">.</span>suspension_front<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token constant">TAG</span><span class="token punctuation">,</span> <span class="token string">"suspension_back"</span><span class="token operator">+</span>carParm<span class="token punctuation">.</span>suspension_back<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token constant">TAG</span><span class="token punctuation">,</span> <span class="token string">"on_BSD"</span><span class="token operator">+</span>carParm<span class="token punctuation">.</span>on_BSD<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token constant">TAG</span><span class="token punctuation">,</span> <span class="token string">"on_Bright"</span><span class="token operator">+</span>carParm<span class="token punctuation">.</span>on_Bright<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token constant">TAG</span><span class="token punctuation">,</span> <span class="token string">"on_TrajectoryLine"</span><span class="token operator">+</span>carParm<span class="token punctuation">.</span>on_TrajectoryLine<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">try</span> <span class="token punctuation">&#123;</span>avmSetParm<span class="token punctuation">.</span><span class="token function">writeJson</span><span class="token punctuation">(</span>carParm<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>mPopupWindow_register<span class="token punctuation">.</span><span class="token function">dismiss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//------ è®¾ç½®æŒ‰é’®è§¦å‘äº‹ä»¶ ------</span><span class="token comment">//è½¦é“çº¿</span>mTrajectory_Switch<span class="token punctuation">.</span><span class="token function">setOnCheckedChangeListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CompoundButton<span class="token punctuation">.</span>OnCheckedChangeListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCheckedChanged</span><span class="token punctuation">(</span><span class="token class-name">CompoundButton</span> buttonView<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isChecked<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>buttonView<span class="token punctuation">.</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>mView<span class="token punctuation">.</span>mTrajectoryLineViewID<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>mView<span class="token punctuation">.</span>mTrajectoryLineViewID<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>mView<span class="token punctuation">.</span><span class="token function">avmTrajectoryLineView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//BSD</span>mBSD_Switch<span class="token punctuation">.</span><span class="token function">setOnCheckedChangeListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CompoundButton<span class="token punctuation">.</span>OnCheckedChangeListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCheckedChanged</span><span class="token punctuation">(</span><span class="token class-name">CompoundButton</span> buttonView<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isChecked<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>buttonView<span class="token punctuation">.</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>mView<span class="token punctuation">.</span>mBSDViewID<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token function">avmStartBSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>mView<span class="token punctuation">.</span>mBSDViewID<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token function">avmStopBSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>mView<span class="token punctuation">.</span><span class="token function">avmBSDView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//äº®åº¦å‡è¡¡</span>mBE_Switch<span class="token punctuation">.</span><span class="token function">setOnCheckedChangeListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CompoundButton<span class="token punctuation">.</span>OnCheckedChangeListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCheckedChanged</span><span class="token punctuation">(</span><span class="token class-name">CompoundButton</span> buttonView<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isChecked<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>buttonView<span class="token punctuation">.</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>mView<span class="token punctuation">.</span>mBrightID<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>mView<span class="token punctuation">.</span>mBrightID<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>mView<span class="token punctuation">.</span><span class="token function">avmBrightView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿”å›</span>delcancel_btn<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>mPopupWindow_register<span class="token punctuation">.</span><span class="token function">dismiss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ä¸»ç•Œé¢xmlæ–‡ä»¶"><a href="#ä¸»ç•Œé¢xmlæ–‡ä»¶" class="headerlink" title="ä¸»ç•Œé¢xmlæ–‡ä»¶"></a>ä¸»ç•Œé¢xmlæ–‡ä»¶</h1><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FrameLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.MainActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.drawerlayout.widget.DrawerLayout</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/drawer_layout<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/layout_root<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@android:color/black<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/tv_no_camera<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@string/no_camera_info<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#FFFF0000<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>36sp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>visibility</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gone<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">layout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@layout/settings_layout<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>androidx.drawerlayout.widget.DrawerLayout</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SurfaceView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/surface_view<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fill_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fill_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginLeft</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginRight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ImageButton</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/image_set_btn<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>55dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>55dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom|left<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginLeft</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>420dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/btn_bg_round<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/icon_set<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ImageButton</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/image_3d_360_btn<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>55dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>55dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom|left<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginLeft</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>60dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/btn_bg_round<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/icon_3d_360_normal<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ImageButton</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/image_front_btn<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>55dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>55dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom|left<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginLeft</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>120dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/btn_bg_round<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/icon_3d_front_normal<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ImageButton</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/image_back_btn<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>55dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>55dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom|left<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginLeft</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>180dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/btn_bg_round<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/icon_3d_back_normal<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!--       android:visibility="gone" /> --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ImageButton</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/image_left_btn<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>55dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>55dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom|left<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginLeft</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>240dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/btn_bg_round<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/icon_3d_left_normal<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ImageButton</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/image_right_btn<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>55dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>55dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom|left<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginLeft</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>300dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/btn_bg_round<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/icon_3d_right_normal<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ImageButton</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/image_narrow_btn<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>55dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>55dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom|left<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginLeft</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>360dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/btn_bg_round<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/icon_narrow_normal<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ImageButton</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/image_3d_normal_btn<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>55dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>55dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom|left<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/btn_bg_round<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/icon_3d_normal<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FrameLayout</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="è·³è½¬ç•Œé¢xmlæ–‡ä»¶"><a href="#è·³è½¬ç•Œé¢xmlæ–‡ä»¶" class="headerlink" title="è·³è½¬ç•Œé¢xmlæ–‡ä»¶"></a>è·³è½¬ç•Œé¢xmlæ–‡ä»¶</h1><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/avm_parm_view<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>visibility</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>visible<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>>    <span class="token comment">&lt;!-- è¡¨æ ¼1 --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TableLayout</span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#2B2B2B<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>stretchColumns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1,3<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TableRow</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>                <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/Text_car_width<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>  è½¦è¾†å®½åº¦:  <span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@color/color_ffffff<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EditText</span>                <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/EditText_car_width<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#CCCFD1<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>hint</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æ¯«ç±³/mm<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>inputType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>number<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>selectAllOnFocus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>                <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/Text_suspension_front<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>  è½¦å‰æ‚¬æŒ‚:  <span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@color/color_ffffff<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EditText</span>                <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/EditText_suspension_front<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#CCCFD1<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>hint</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æ¯«ç±³/mm<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>inputType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>number<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>selectAllOnFocus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>TableRow</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- åˆ†å‰²çº¿ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#000000<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TableRow</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>                <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/Text_car_length<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>  è½¦è¾†é•¿åº¦:  <span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@color/color_ffffff<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EditText</span>                <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/EditText_car_length<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#CCCFD1<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>hint</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æ¯«ç±³/mm<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>inputType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>number<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>selectAllOnFocus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>                <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/Text_suspension_back<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>  è½¦åæ‚¬æŒ‚:  <span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@color/color_ffffff<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EditText</span>                <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/EditText_suspension_back<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#CCCFD1<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>hint</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æ¯«ç±³/mm<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>inputType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>number<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>selectAllOnFocus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>TableRow</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- åˆ†å‰²çº¿ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#000000<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TableRow</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>                <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/Text_BE_Switch<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>  äº®åº¦å‡è¡¡:  <span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@color/color_ffffff<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Switch</span>                <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/BE_Switch<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>                <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/Text_BSD_Switch<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>  BSDå¼€å…³:  <span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@color/color_ffffff<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Switch</span>                <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/BSD_Switch<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>TableRow</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- åˆ†å‰²çº¿ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#000000<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TableRow</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>                <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/Text_TrajectoryLine_Switch<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>  åŠ¨æ€è¾…åŠ©çº¿:  <span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@color/color_ffffff<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Switch</span>                <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/TrajectoryLine_Switch<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>TableRow</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/avm_parameter_save<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ä¿å­˜<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/avm_parameter_return<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>è¿”å›<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>TableLayout</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> android </tag>
            
            <tag> å®‰å“å¼¹çª— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JNIä¸­æˆå‘˜å˜é‡å’Œæ–¹æ³•çš„ç›¸äº’è®¿é—®</title>
      <link href="/2022/12/14/jni-zhong-cheng-yuan-bian-liang-he-fang-fa-de-xiang-hu-fang-wen/"/>
      <url>/2022/12/14/jni-zhong-cheng-yuan-bian-liang-he-fang-fa-de-xiang-hu-fang-wen/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯JNI"><a href="#ä»€ä¹ˆæ˜¯JNI" class="headerlink" title="ä»€ä¹ˆæ˜¯JNI"></a>ä»€ä¹ˆæ˜¯JNI</h1><p>è¯´æ˜ï¼šJNI æ˜¯ Java Native Interface çš„ç¼©å†™ï¼Œå®ƒæä¾›äº†è‹¥å¹²çš„APIå®ç°äº†Javaå’Œå…¶ä»–è¯­è¨€çš„é€šä¿¡ï¼ˆä¸»è¦æ˜¯C&amp;C++ï¼Œä½†æ˜¯å®ƒå¹¶ä¸å¦¨ç¢ä½ ä½¿ç”¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ï¼Œåªè¦è°ƒç”¨çº¦å®šå—æ”¯æŒå°±å¯ä»¥äº†ï¼‰ã€‚ä»Java1.1å¼€å§‹ï¼ŒJNI æ ‡å‡†æˆä¸º java å¹³å°çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå…è®¸ Java ä»£ç å’Œå…¶ä»–è¯­è¨€å†™çš„ä»£ç è¿›è¡Œäº¤äº’ã€‚æ€»çš„æ¥è¯´ï¼ŒJNI å°±æ˜¯ä¸€ä¸ªå…è®¸Javaè¯­è¨€å’Œå…¶ä»–ç¼–ç¨‹è¯­è¨€ï¼ˆä¸»è¦æ˜¯C&#x2F;C++ï¼‰é€šä¿¡çš„æ¥å£ã€‚</p><p>åŸå› ï¼šC&#x2F;C++ æ˜¯ç³»ç»Ÿçº§çš„ç¼–ç¨‹è¯­è¨€ï¼Œå¯ä»¥ç”¨æ¥å¼€å‘ä»»ä½•å’Œç³»ç»Ÿç›¸å…³çš„ç¨‹åºå’Œç±»åº“ï¼Œæ•ˆç‡ä¹Ÿå¾ˆé«˜ã€‚è€Œ Java æœ¬èº«ç¼–å†™åº•å±‚çš„åº”ç”¨æ¯”è¾ƒéš¾ä»¥å®ç°ï¼Œä½¿ç”¨ JNI å¯ä»¥è°ƒç”¨ç°æœ‰çš„æœ¬åœ°åº“ï¼Œæå¤§åœ°çµæ´»äº† Java çš„å¼€å‘ã€‚</p><ul><li><p>ç¼ºç‚¹ï¼š</p><ul><li><p>1ã€ä½¿ç”¨javaä¸æœ¬åœ°å·²ç¼–è¯‘çš„ä»£ç äº¤äº’ï¼Œé€šå¸¸ä¼šä¸§å¤±å¹³å°å¯ç§»æ¤æ€§ã€‚</p></li><li><p>2ã€ç¨‹åºä¸å†æ˜¯ç»å¯¹å®‰å…¨çš„ï¼Œæœ¬åœ°ä»£ç çš„ä¸å½“ä½¿ç”¨å¯èƒ½å¯¼è‡´æ•´ä¸ªç¨‹åºå´©æºƒã€‚</p></li></ul></li></ul><p>æ³¨ï¼šå¯¹äºä¸Šé¢æ‰€è¯´çš„javaä½¿ç”¨äº†JNI æ¥å£ä¼šä¸§å¤±å¹³å°çš„å¯ç§»æ¤æ€§è§£é‡Šå¦‚ä¸‹</p><p>JNI æä¾›å‡ºæ¥ä¸€ä¸ªåŠŸèƒ½æ¥å£ï¼Œä½†æ˜¯è¿™ä¸ªåŠŸèƒ½æ˜¯ä½¿ç”¨æœ¬åœ°è¯­è¨€è¿›è¡Œå®ç°çš„ï¼Œé€šå¸¸æ˜¯Cæˆ–è€…C++ã€‚</p><p>ä»¥ linux ç³»ç»Ÿå’Œ window ç³»ç»Ÿçš„ printf å‡½æ•°ä¸ºä¾‹ï¼Œè™½ç„¶è¿™ä¸¤ä¸ªç³»ç»Ÿéƒ½æä¾›äº†è¿™ä¸ªæ‰“å°å‡½æ•°ï¼Œå¹¶ä¸”åå­—ä¹Ÿä¸€æ ·ï¼Œä½†æ˜¯åœ¨å®ç°ä¸Šå¯èƒ½ä¼šæœ‰å„è‡ªçš„ä¸åŒç‚¹ã€‚åŒæ—¶åœ¨ window ä¸‹çš„åŠ¨æ€åº“ä¸º dll æ–‡ä»¶ï¼Œlinux ä¸‹çš„åŠ¨æ€åº“ä¸º so æ–‡ä»¶ã€‚</p><p>æ‰€ä»¥æˆ‘åŸæœ¬åœ¨ linux ä¸‹å¯ä»¥æ­£å¸¸ä½¿ç”¨çš„ä¸€å¥— JNI åŠŸèƒ½ï¼Œä¸€æ—¦éœ€è¦è½¬ç§»åˆ° windows ä¸Šæ‰§è¡Œçš„æ—¶å€™å°±éœ€è¦é‡æ–°ç¼–è¯‘å®ç°æ¥å£çš„åŠ¨æ€åº“ã€‚è™½ç„¶ java æ˜¯è·¨å¹³å°çš„ï¼Œä½†æ˜¯ä½¿ç”¨ jni è°ƒç”¨çš„æœ¬åœ°æ–¹æ³•å´æ˜¯ä¸å¹³å°ç›¸ä¾èµ–çš„ï¼Œä¼šåœ¨è¿›è¡Œç¼–è¯‘çš„è¿‡ç¨‹ä¸­ä¼šå‡ºç°è¿™æ ·æˆ–è€…é‚£æ ·çš„å…¼å®¹æ€§é—®é¢˜ï¼Œä¸€èˆ¬ä¸èƒ½ç›´æ¥æ‹¿æ¥å³ç”¨ã€‚</p><ul><li>å®ç°JNIçš„åŸºæœ¬æ­¥éª¤<ul><li>ç¼–å†™å¸¦æœ‰ native å£°æ˜çš„æ–¹æ³•çš„javaç±»ã€‚</li><li>ä½¿ç”¨ javah + ç±»åç”Ÿæˆæ‰©å±•åä¸º.hçš„å¤´æ–‡ä»¶ã€‚</li><li>ä½¿ç”¨ C&#x2F;C++ å®ç°æœ¬åœ°æ–¹æ³•ã€‚</li><li>å°† C&#x2F;C++ ç¼–å†™çš„æ–‡ä»¶ç”ŸæˆåŠ¨æ€é“¾æ¥åº“ã€‚</li><li>åœ¨ java ç±»ä¸­å¼•ç”¨è¯¥åŠ¨æ€é“¾æ¥åº“å¹¶å®Œæˆè°ƒç”¨ã€‚</li><li>æ³¨ï¼šå¯ä»¥å…ˆå†™ java çš„è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥å…ˆå†™ C&#x2F;C++ çš„å®ç°ï¼Œåªè¦ä¸¤è¾¹çº¦å®šå¥½æ¥å£çš„åç§°ï¼Œå‚æ•°ï¼Œè¿”å›å€¼ç­‰ä¿¡æ¯å³å¯ã€‚</li></ul></li></ul><h1 id="æ¶‰åŠæ•°æ®ç±»å‹å¯¹ç…§è¡¨"><a href="#æ¶‰åŠæ•°æ®ç±»å‹å¯¹ç…§è¡¨" class="headerlink" title="æ¶‰åŠæ•°æ®ç±»å‹å¯¹ç…§è¡¨"></a>æ¶‰åŠæ•°æ®ç±»å‹å¯¹ç…§è¡¨</h1><h2 id="åŸºæœ¬ç±»å‹"><a href="#åŸºæœ¬ç±»å‹" class="headerlink" title="åŸºæœ¬ç±»å‹"></a>åŸºæœ¬ç±»å‹</h2><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/JNI%E4%B8%AD%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F%E5%92%8C%E6%96%B9%E6%B3%95%E7%9A%84%E7%9B%B8%E4%BA%92%E8%AE%BF%E9%97%AE/1.png"> </p><h2 id="å¼•ç”¨ç±»å‹"><a href="#å¼•ç”¨ç±»å‹" class="headerlink" title="å¼•ç”¨ç±»å‹"></a>å¼•ç”¨ç±»å‹</h2><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/JNI%E4%B8%AD%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F%E5%92%8C%E6%96%B9%E6%B3%95%E7%9A%84%E7%9B%B8%E4%BA%92%E8%AE%BF%E9%97%AE/2.png"> </p><h1 id="javaè®¿é—®C-çš„å˜é‡"><a href="#javaè®¿é—®C-çš„å˜é‡" class="headerlink" title="javaè®¿é—®C++çš„å˜é‡"></a><code>java</code>è®¿é—®<code>C++</code>çš„å˜é‡</h1><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">JNIEXPORT jint JNICALL<span class="token function">Java_com_fibocom_multicamera_AvmSurfaceViewNative_nativeGetViewInfo</span><span class="token punctuation">(</span>JNIEnv <span class="token operator">*</span>env<span class="token punctuation">,</span>                                                                                    jclass type<span class="token punctuation">,</span>                                                                                    jint cmd<span class="token punctuation">,</span>                                                                                    jobject output<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    jclass objectClass <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">GetObjectClass</span><span class="token punctuation">(</span>output<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// é€šè¿‡GetFieldIDæ–¹æ³•å¾—åˆ°è¿™ä¸ªå¯¹è±¡çš„distå±æ€§</span>    jfieldID m3DBtnOn <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">GetFieldID</span><span class="token punctuation">(</span>objectClass<span class="token punctuation">,</span> <span class="token string">"m3DBtnOn"</span><span class="token punctuation">,</span> <span class="token string">"I"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    jfieldID viewID <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">GetFieldID</span><span class="token punctuation">(</span>objectClass<span class="token punctuation">,</span> <span class="token string">"viewID"</span><span class="token punctuation">,</span> <span class="token string">"I"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    jfieldID wheelViewID <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">GetFieldID</span><span class="token punctuation">(</span>objectClass<span class="token punctuation">,</span> <span class="token string">"wheelViewID"</span><span class="token punctuation">,</span> <span class="token string">"I"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    jfieldID trajectoryLineViewID <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">GetFieldID</span><span class="token punctuation">(</span>objectClass<span class="token punctuation">,</span> <span class="token string">"trajectoryLineViewID"</span><span class="token punctuation">,</span> <span class="token string">"I"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    jfieldID bsdViewID <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">GetFieldID</span><span class="token punctuation">(</span>objectClass<span class="token punctuation">,</span> <span class="token string">"bsdViewID"</span><span class="token punctuation">,</span> <span class="token string">"I"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    jfieldID brightID <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">GetFieldID</span><span class="token punctuation">(</span>objectClass<span class="token punctuation">,</span> <span class="token string">"brightID"</span><span class="token punctuation">,</span> <span class="token string">"I"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//</span>    jfieldID dist_l <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">GetFieldID</span><span class="token punctuation">(</span>objectClass<span class="token punctuation">,</span> <span class="token string">"dist_l"</span><span class="token punctuation">,</span> <span class="token string">"F"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    jfieldID dist_r <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">GetFieldID</span><span class="token punctuation">(</span>objectClass<span class="token punctuation">,</span> <span class="token string">"dist_r"</span><span class="token punctuation">,</span> <span class="token string">"F"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    jfieldID upon <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">GetFieldID</span><span class="token punctuation">(</span>objectClass<span class="token punctuation">,</span> <span class="token string">"upon"</span><span class="token punctuation">,</span> <span class="token string">"F"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    jfieldID angle <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">GetFieldID</span><span class="token punctuation">(</span>objectClass<span class="token punctuation">,</span> <span class="token string">"angle"</span><span class="token punctuation">,</span> <span class="token string">"F"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    jfieldID viewPointX <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">GetFieldID</span><span class="token punctuation">(</span>objectClass<span class="token punctuation">,</span> <span class="token string">"viewPointX"</span><span class="token punctuation">,</span> <span class="token string">"F"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    jfieldID viewPointY <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">GetFieldID</span><span class="token punctuation">(</span>objectClass<span class="token punctuation">,</span> <span class="token string">"viewPointY"</span><span class="token punctuation">,</span> <span class="token string">"F"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ParametersInit <span class="token operator">*</span>m_Instance <span class="token operator">=</span> <span class="token class-name">ParametersInit</span><span class="token double-colon punctuation">::</span><span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    avmmanager<span class="token double-colon punctuation">::</span>TAvmViewTag m_view_info<span class="token punctuation">;</span>    m_Instance<span class="token operator">-></span><span class="token function">getViewInfo</span><span class="token punctuation">(</span>m_view_info<span class="token punctuation">)</span><span class="token punctuation">;</span>    env<span class="token operator">-></span><span class="token function">SetIntField</span><span class="token punctuation">(</span>output<span class="token punctuation">,</span> m3DBtnOn<span class="token punctuation">,</span> m_view_info<span class="token punctuation">.</span>m3DBtnOn<span class="token punctuation">)</span><span class="token punctuation">;</span>    env<span class="token operator">-></span><span class="token function">SetIntField</span><span class="token punctuation">(</span>output<span class="token punctuation">,</span> viewID<span class="token punctuation">,</span> m_view_info<span class="token punctuation">.</span>viewID<span class="token punctuation">)</span><span class="token punctuation">;</span>    env<span class="token operator">-></span><span class="token function">SetIntField</span><span class="token punctuation">(</span>output<span class="token punctuation">,</span> wheelViewID<span class="token punctuation">,</span> m_view_info<span class="token punctuation">.</span>wheelViewID<span class="token punctuation">)</span><span class="token punctuation">;</span>    env<span class="token operator">-></span><span class="token function">SetIntField</span><span class="token punctuation">(</span>output<span class="token punctuation">,</span> trajectoryLineViewID<span class="token punctuation">,</span> m_view_info<span class="token punctuation">.</span>trajectoryLineViewID<span class="token punctuation">)</span><span class="token punctuation">;</span>    env<span class="token operator">-></span><span class="token function">SetIntField</span><span class="token punctuation">(</span>output<span class="token punctuation">,</span> bsdViewID<span class="token punctuation">,</span> m_view_info<span class="token punctuation">.</span>bsdViewID<span class="token punctuation">)</span><span class="token punctuation">;</span>    env<span class="token operator">-></span><span class="token function">SetIntField</span><span class="token punctuation">(</span>output<span class="token punctuation">,</span> brightID<span class="token punctuation">,</span> m_view_info<span class="token punctuation">.</span>brightID<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//</span>    env<span class="token operator">-></span><span class="token function">SetFloatField</span><span class="token punctuation">(</span>output<span class="token punctuation">,</span> dist_l<span class="token punctuation">,</span> m_view_info<span class="token punctuation">.</span>dist_l<span class="token punctuation">)</span><span class="token punctuation">;</span>    env<span class="token operator">-></span><span class="token function">SetFloatField</span><span class="token punctuation">(</span>output<span class="token punctuation">,</span> dist_r<span class="token punctuation">,</span> m_view_info<span class="token punctuation">.</span>dist_r<span class="token punctuation">)</span><span class="token punctuation">;</span>    env<span class="token operator">-></span><span class="token function">SetFloatField</span><span class="token punctuation">(</span>output<span class="token punctuation">,</span> upon<span class="token punctuation">,</span> m_view_info<span class="token punctuation">.</span>upon<span class="token punctuation">)</span><span class="token punctuation">;</span>    env<span class="token operator">-></span><span class="token function">SetFloatField</span><span class="token punctuation">(</span>output<span class="token punctuation">,</span> angle<span class="token punctuation">,</span> m_view_info<span class="token punctuation">.</span>angle<span class="token punctuation">)</span><span class="token punctuation">;</span>    env<span class="token operator">-></span><span class="token function">SetFloatField</span><span class="token punctuation">(</span>output<span class="token punctuation">,</span> viewPointX<span class="token punctuation">,</span> m_view_info<span class="token punctuation">.</span>viewPointX<span class="token punctuation">)</span><span class="token punctuation">;</span>    env<span class="token operator">-></span><span class="token function">SetFloatField</span><span class="token punctuation">(</span>output<span class="token punctuation">,</span> viewPointY<span class="token punctuation">,</span> m_view_info<span class="token punctuation">.</span>viewPointY<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="C-è®¿é—®javaçš„å˜é‡"><a href="#C-è®¿é—®javaçš„å˜é‡" class="headerlink" title="C++è®¿é—®javaçš„å˜é‡"></a><code>C++</code>è®¿é—®<code>java</code>çš„å˜é‡</h1><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">JNIEXPORT jint JNICALL<span class="token function">Java_com_fibocom_multicamera_AvmSurfaceViewNative_nativeBSDInfo</span><span class="token punctuation">(</span>JNIEnv <span class="token operator">*</span>env<span class="token punctuation">,</span>                                                                jobject obj<span class="token punctuation">,</span>                                                                 jobjectArray objectArray<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    jint ret <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token comment">// 1. è·å–æ•°ç»„çš„é•¿åº¦</span>    jsize length <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">GetArrayLength</span><span class="token punctuation">(</span>objectArray<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// XXX:æ•°æ®é•¿åº¦æ°¸è¿œä¸º7ï¼Œç›®å‰æµ‹è¯•æš‚æ—¶æ”¯å–ç¬¬ä¸€ä¸ªç»“æœ</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>length<span class="token punctuation">)</span>        length <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">// 2. è·å–Personç±»çš„Classå¯¹è±¡</span>    jclass class_Rect <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">FindClass</span><span class="token punctuation">(</span><span class="token string">"com/fibocom/aidl/Rect"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>class_Rect <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> ret<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">else</span>    <span class="token punctuation">&#123;</span>        <span class="token function">LOGI</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"====FindClass success===== \n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 3. è·å–Personçš„sayHelloæ–¹æ³•å­—æ®µ</span>    jmethodID getX1 <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">GetMethodID</span><span class="token punctuation">(</span>class_Rect<span class="token punctuation">,</span> <span class="token string">"getX1"</span><span class="token punctuation">,</span> <span class="token string">"()I"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//(A)B---Aä¸ºè¾“å…¥å‚æ•°ï¼ŒBä¸ºè¾“å‡ºå‚æ•°</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>getX1 <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> ret<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    jmethodID getX2 <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">GetMethodID</span><span class="token punctuation">(</span>class_Rect<span class="token punctuation">,</span> <span class="token string">"getX2"</span><span class="token punctuation">,</span> <span class="token string">"()I"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//(A)B---Aä¸ºè¾“å…¥å‚æ•°ï¼ŒBä¸ºè¾“å‡ºå‚æ•°</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>getX2 <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> ret<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    jmethodID getY1 <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">GetMethodID</span><span class="token punctuation">(</span>class_Rect<span class="token punctuation">,</span> <span class="token string">"getY1"</span><span class="token punctuation">,</span> <span class="token string">"()I"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//(A)B---Aä¸ºè¾“å…¥å‚æ•°ï¼ŒBä¸ºè¾“å‡ºå‚æ•°</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>getY1 <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> ret<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    jmethodID getY2 <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">GetMethodID</span><span class="token punctuation">(</span>class_Rect<span class="token punctuation">,</span> <span class="token string">"getY2"</span><span class="token punctuation">,</span> <span class="token string">"()I"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//(A)B---Aä¸ºè¾“å…¥å‚æ•°ï¼ŒBä¸ºè¾“å‡ºå‚æ•°</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>getY2 <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> ret<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    jmethodID getCamID <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">GetMethodID</span><span class="token punctuation">(</span>class_Rect<span class="token punctuation">,</span> <span class="token string">"getCamID"</span><span class="token punctuation">,</span> <span class="token string">"()I"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//(A)B---Aä¸ºè¾“å…¥å‚æ•°ï¼ŒBä¸ºè¾“å‡ºå‚æ•°</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>getCamID <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> ret<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    jmethodID getTimestamp <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">GetMethodID</span><span class="token punctuation">(</span>class_Rect<span class="token punctuation">,</span> <span class="token string">"getTimestamp"</span><span class="token punctuation">,</span> <span class="token string">"()J"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//(A)B---Aä¸ºè¾“å…¥å‚æ•°ï¼ŒBä¸ºè¾“å‡ºå‚æ•°</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>getTimestamp <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> ret<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 4. å¾ªç¯è°ƒç”¨æ¯ä¸ªæ–¹æ³•</span>    jint aaa<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>    avmmanager<span class="token double-colon punctuation">::</span>TBsdBox <span class="token operator">*</span>avm_bsd <span class="token operator">=</span> <span class="token keyword">new</span> avmmanager<span class="token double-colon punctuation">::</span>TBsdBox<span class="token punctuation">[</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token comment">// è·å–å¼•ç”¨ç±»å‹æ•°ç»„çš„å¯¹è±¡</span>        jobject element <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">GetObjectArrayElement</span><span class="token punctuation">(</span>objectArray<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ¤æ–­æ•°ç»„å…ƒç´ æ˜¯å¦æ˜¯Personç±»å¯¹è±¡</span>        <span class="token function">LOGI</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"====nativeBSDInfo==== [%d] ===== \n"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>element <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token comment">// è°ƒç”¨Personå¯¹è±¡çš„sayHello()æ–¹æ³•</span>            avm_bsd<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>left <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">CallIntMethod</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> getX1<span class="token punctuation">)</span><span class="token punctuation">;</span>            avm_bsd<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>right <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">CallIntMethod</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> getX2<span class="token punctuation">)</span><span class="token punctuation">;</span>            avm_bsd<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>top <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">CallIntMethod</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> getY1<span class="token punctuation">)</span><span class="token punctuation">;</span>            avm_bsd<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>bottom <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">CallIntMethod</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> getY2<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> camID <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">CallIntMethod</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> getCamID<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">LOGI</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"CallIntMethod %d \n"</span><span class="token punctuation">,</span> camID<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">switch</span> <span class="token punctuation">(</span>camID<span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>            <span class="token keyword">case</span> <span class="token number">7</span><span class="token operator">:</span>                avm_bsd<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>cam_index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>                avm_bsd<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>cam_index <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token number">6</span><span class="token operator">:</span>                avm_bsd<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>cam_index <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token number">5</span><span class="token operator">:</span>                avm_bsd<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>cam_index <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">default</span><span class="token operator">:</span>                <span class="token function">LOGI</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"nativeBSDInfo cam_index %d \n"</span><span class="token punctuation">,</span> camID<span class="token punctuation">)</span><span class="token punctuation">;</span>                avm_bsd<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>cam_index <span class="token operator">=</span> camID<span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            avm_bsd<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>timestamp <span class="token operator">=</span> env<span class="token operator">-></span><span class="token function">CallLongMethod</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> getTimestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>            avm_bsd<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>size <span class="token operator">=</span> length<span class="token punctuation">;</span>            <span class="token function">LOGI</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"====nativeBSDInfo==== X1[%d] %d  \n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> avm_bsd<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">LOGI</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"====nativeBSDInfo==== X2[%d] %d  \n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> avm_bsd<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">LOGI</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"====nativeBSDInfo==== Y1[%d] %d  \n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> avm_bsd<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>top<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">LOGI</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"====nativeBSDInfo==== Y2[%d] %d  \n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> avm_bsd<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">LOGI</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"====nativeBSDInfo==== id[%d] %d  \n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> avm_bsd<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>cam_index<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">LOGI</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"====nativeBSDInfo==== timestamp[%d] %ld  \n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> avm_bsd<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">LOGI</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"====nativeBSDInfo==== size[%d] %d  \n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> avm_bsd<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token class-name">EventSystem</span><span class="token double-colon punctuation">::</span><span class="token function">Instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">SendEvent</span><span class="token punctuation">(</span><span class="token string">"avm_get_bsd_info"</span><span class="token punctuation">,</span> avm_bsd<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>ptr_event<span class="token punctuation">)</span>                                       <span class="token punctuation">&#123;</span>        Event <span class="token operator">*</span>event <span class="token operator">=</span> <span class="token punctuation">(</span>Event <span class="token operator">*</span><span class="token punctuation">)</span> ptr_event<span class="token punctuation">;</span>        <span class="token keyword">bool</span> <span class="token operator">*</span>buf <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">bool</span> <span class="token operator">*</span><span class="token punctuation">)</span> event<span class="token operator">-></span><span class="token function">Parameter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">delete</span> buf<span class="token punctuation">;</span>        <span class="token keyword">delete</span> event<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> ret<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> jni </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> jni </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jsonæ–‡ä»¶è¯»å†™</title>
      <link href="/2022/12/14/json-wen-jian-du-xie/"/>
      <url>/2022/12/14/json-wen-jian-du-xie/</url>
      
        <content type="html"><![CDATA[<h1 id="javaè¯»å†™Jsonæ–‡ä»¶"><a href="#javaè¯»å†™Jsonæ–‡ä»¶" class="headerlink" title="javaè¯»å†™Jsonæ–‡ä»¶"></a>javaè¯»å†™Jsonæ–‡ä»¶</h1><h2 id="jsonæ ¼å¼ä»‹ç»"><a href="#jsonæ ¼å¼ä»‹ç»" class="headerlink" title="jsonæ ¼å¼ä»‹ç»"></a>jsonæ ¼å¼ä»‹ç»</h2><p>jsonä¸xmlç›¸æ¯”, å¯¹æ•°æ®çš„æè¿°æ€§æ¯”XMLè¾ƒå·®,ä½†æ˜¯æ•°æ®ä½“ç§¯å°,ä¼ é€’é€Ÿåº¦æ›´å¿«.  </p><p>jsonæ•°æ®çš„ä¹¦å†™æ ¼å¼æ˜¯â€åç§°:å€¼å¯¹â€,æ¯”å¦‚:</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token property">"Name"</span> <span class="token operator">:</span> <span class="token string">"John"</span>                        <span class="token comment">//nameä¸ºåç§°,å€¼å¯¹ä¸º"john"å­—ç¬¦ä¸²</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å€¼å¯¹ç±»å‹å…±åˆ†ä¸º:  </p><ul><li>æ•°å­—ï¼ˆæ•´æ•°æˆ–æµ®ç‚¹æ•°ï¼‰</li><li>å­—ç¬¦ä¸²ï¼ˆåœ¨åŒå¼•å·ä¸­ï¼‰</li><li>é€»è¾‘å€¼ï¼ˆtrue æˆ– falseï¼‰</li><li>æ•°ç»„ï¼ˆåœ¨æ–¹æ‹¬å·[]ä¸­ï¼‰</li><li>å¯¹è±¡ï¼ˆåœ¨èŠ±æ‹¬å·{}ä¸­ï¼‰</li><li>null<br>å½“ç„¶æ•°ç»„ä¹Ÿå¯ä»¥åŒ…å«å¤šå¯¹è±¡:  <pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>    <span class="token property">"employees"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">&#123;</span> <span class="token property">"Name"</span><span class="token operator">:</span><span class="token string">"John"</span> <span class="token punctuation">,</span> <span class="token property">"Age"</span><span class="token operator">:</span><span class="token number">19</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token punctuation">&#123;</span> <span class="token property">"Name"</span><span class="token operator">:</span><span class="token string">"Anna"</span> <span class="token punctuation">,</span> <span class="token property">"Age"</span><span class="token operator">:</span><span class="token number">22</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token punctuation">&#123;</span> <span class="token property">"Name"</span><span class="token operator">:</span><span class="token string">"Peter"</span><span class="token punctuation">,</span> <span class="token property">"Age"</span><span class="token operator">:</span><span class="token number">23</span> <span class="token punctuation">&#125;</span>    <span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>è¡¨ç¤ºâ€employeesâ€å¯¹è±¡ä¸­æœ‰3ä¸ªå¯¹è±¡æ•°ç»„(æ¯ä¸ªå¯¹è±¡æ•°ç»„è¡¨ç¤ºä¸€æ¡å‘˜å·¥ä¿¡æ¯),å…¶ä¸­å¹¶åˆ—çš„æ•°æ®éƒ½å¿…é¡»ç”¨é€—å·â€,â€éš”å¼€.</li></ul><h2 id="jsonæ–‡ä»¶è¯»å†™ç¤ºä¾‹"><a href="#jsonæ–‡ä»¶è¯»å†™ç¤ºä¾‹" class="headerlink" title="jsonæ–‡ä»¶è¯»å†™ç¤ºä¾‹"></a>jsonæ–‡ä»¶è¯»å†™ç¤ºä¾‹</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fibocom<span class="token punctuation">.</span>multicamera</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Log</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>json<span class="token punctuation">.</span></span><span class="token class-name">JSONArray</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>json<span class="token punctuation">.</span></span><span class="token class-name">JSONException</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>json<span class="token punctuation">.</span></span><span class="token class-name">JSONObject</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileNotFoundException</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileOutputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStreamReader</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">OutputStreamWriter</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">UnsupportedEncodingException</span></span><span class="token punctuation">;</span><span class="token keyword">class</span> carParameter  <span class="token keyword">extends</span> <span class="token class-name">Object</span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> on_TrajectoryLine<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> on_BSD<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> on_Bright<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">double</span> scale_size<span class="token punctuation">;</span> <span class="token comment">// ç¼©æ”¾</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> car_length<span class="token punctuation">;</span><span class="token comment">//è½¦è¾†é•¿åº¦</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> car_width<span class="token punctuation">;</span><span class="token comment">//è½¦è¾†å®½åº¦</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> suspension_front<span class="token punctuation">;</span><span class="token comment">//å‰æ‚¬æŒ‚</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> suspension_back<span class="token punctuation">;</span><span class="token comment">//åæ‚¬æŒ‚</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AvmSetParm</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> jsonFileName<span class="token punctuation">;</span>    <span class="token keyword">public</span> carParameter <span class="token function">readJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>            carParameter carParm<span class="token operator">=</span><span class="token keyword">new</span> <span class="token function">carParameter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">char</span> cbuf<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token number">10000</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token class-name">InputStreamReader</span> input <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>jsonFileName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> len <span class="token operator">=</span>input<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>cbuf<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> text <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>cbuf<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//1.æ„é€ ä¸€ä¸ªjsonå¯¹è±¡</span>            <span class="token class-name">JSONObject</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"&#123;"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//è¿‡æ»¤è¯»å‡ºçš„utf-8å‰ä¸‰ä¸ªæ ‡ç­¾å­—èŠ‚,ä»&#123;å¼€å§‹è¯»å–</span>            <span class="token comment">//è·å–æ•°ç»„</span>            <span class="token class-name">JSONArray</span> dataArr <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">getJSONArray</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">JSONObject</span> carParameterObj <span class="token operator">=</span>dataArr<span class="token punctuation">.</span><span class="token function">getJSONObject</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">JSONObject</span> carParameter<span class="token operator">=</span>carParameterObj<span class="token punctuation">.</span><span class="token function">getJSONObject</span><span class="token punctuation">(</span><span class="token string">"carParameter"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            carParm<span class="token punctuation">.</span>car_length<span class="token operator">=</span>carParameter<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"car_length"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            carParm<span class="token punctuation">.</span>car_width<span class="token operator">=</span>carParameter<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"car_width"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            carParm<span class="token punctuation">.</span>suspension_front<span class="token operator">=</span>carParameter<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"suspension_front"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            carParm<span class="token punctuation">.</span>suspension_back<span class="token operator">=</span>carParameter<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"suspension_back"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            carParm<span class="token punctuation">.</span>scale_size<span class="token operator">=</span>carParameter<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token string">"scale_size"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            carParm<span class="token punctuation">.</span>on_Bright<span class="token operator">=</span>carParameter<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"BE_Switch"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            carParm<span class="token punctuation">.</span>on_BSD<span class="token operator">=</span>carParameter<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"BSD_Switch"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            carParm<span class="token punctuation">.</span>on_TrajectoryLine<span class="token operator">=</span>carParameter<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"TrajectoryLine_Switch"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"AvmSetParm"</span><span class="token punctuation">,</span><span class="token string">"car_length:"</span><span class="token operator">+</span>carParm<span class="token punctuation">.</span>car_length<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"AvmSetParm"</span><span class="token punctuation">,</span><span class="token string">"car_width:"</span><span class="token operator">+</span>carParm<span class="token punctuation">.</span>car_width<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"AvmSetParm"</span><span class="token punctuation">,</span><span class="token string">"suspension_front:"</span><span class="token operator">+</span>carParm<span class="token punctuation">.</span>suspension_front<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"AvmSetParm"</span><span class="token punctuation">,</span><span class="token string">"suspension_back:"</span><span class="token operator">+</span>carParm<span class="token punctuation">.</span>suspension_back<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"AvmSetParm"</span><span class="token punctuation">,</span><span class="token string">"scale_size:"</span><span class="token operator">+</span>carParm<span class="token punctuation">.</span>scale_size<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> carParm<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeJson</span><span class="token punctuation">(</span>carParameter carParm<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">char</span> cbuf<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token number">10000</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token class-name">InputStreamReader</span> input <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>jsonFileName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> len <span class="token operator">=</span>input<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>cbuf<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> text <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>cbuf<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//1.æ„é€ ä¸€ä¸ªjsonå¯¹è±¡</span>        <span class="token class-name">JSONObject</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"&#123;"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//è¿‡æ»¤è¯»å‡ºçš„utf-8å‰ä¸‰ä¸ªæ ‡ç­¾å­—èŠ‚,ä»&#123;å¼€å§‹è¯»å–</span>        <span class="token comment">//è·å–æ•°ç»„</span>        <span class="token class-name">JSONArray</span> data <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">getJSONArray</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">JSONObject</span> carParameterObj <span class="token operator">=</span>data<span class="token punctuation">.</span><span class="token function">getJSONObject</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">JSONObject</span> carParameter<span class="token operator">=</span>carParameterObj<span class="token punctuation">.</span><span class="token function">getJSONObject</span><span class="token punctuation">(</span><span class="token string">"carParameter"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        carParameter<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"car_length"</span><span class="token punctuation">,</span>carParm<span class="token punctuation">.</span>car_length<span class="token punctuation">)</span><span class="token punctuation">;</span>        carParameter<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"car_width"</span><span class="token punctuation">,</span>carParm<span class="token punctuation">.</span>car_width<span class="token punctuation">)</span><span class="token punctuation">;</span>        carParameter<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"suspension_front"</span><span class="token punctuation">,</span>carParm<span class="token punctuation">.</span>suspension_front<span class="token punctuation">)</span><span class="token punctuation">;</span>        carParameter<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"suspension_back"</span><span class="token punctuation">,</span>carParm<span class="token punctuation">.</span>suspension_back<span class="token punctuation">)</span><span class="token punctuation">;</span>        carParameter<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"BE_Switch"</span><span class="token punctuation">,</span>carParm<span class="token punctuation">.</span>on_Bright<span class="token punctuation">)</span><span class="token punctuation">;</span>        carParameter<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"BSD_Switch"</span><span class="token punctuation">,</span>carParm<span class="token punctuation">.</span>on_BSD<span class="token punctuation">)</span><span class="token punctuation">;</span>        carParameter<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"TrajectoryLine_Switch"</span><span class="token punctuation">,</span>carParm<span class="token punctuation">.</span>on_TrajectoryLine<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"AvmSetParm"</span><span class="token punctuation">,</span> <span class="token string">"car_length"</span><span class="token operator">+</span>carParm<span class="token punctuation">.</span>car_length<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"AvmSetParm"</span><span class="token punctuation">,</span> <span class="token string">"car_width"</span><span class="token operator">+</span>carParm<span class="token punctuation">.</span>car_width<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"AvmSetParm"</span><span class="token punctuation">,</span> <span class="token string">"suspension_front"</span><span class="token operator">+</span>carParm<span class="token punctuation">.</span>suspension_front<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"AvmSetParm"</span><span class="token punctuation">,</span> <span class="token string">"suspension_back"</span><span class="token operator">+</span>carParm<span class="token punctuation">.</span>suspension_back<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"AvmSetParm"</span><span class="token punctuation">,</span> <span class="token string">"BE_Switch"</span><span class="token operator">+</span>carParm<span class="token punctuation">.</span>on_Bright<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"AvmSetParm"</span><span class="token punctuation">,</span> <span class="token string">"BSD_Switch"</span><span class="token operator">+</span>carParm<span class="token punctuation">.</span>on_BSD<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"AvmSetParm"</span><span class="token punctuation">,</span> <span class="token string">"TrajectoryLine_Switch"</span><span class="token operator">+</span>carParm<span class="token punctuation">.</span>on_TrajectoryLine<span class="token punctuation">)</span><span class="token punctuation">;</span>        carParameterObj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"carParameter"</span><span class="token punctuation">,</span>carParameter<span class="token punctuation">)</span><span class="token punctuation">;</span>        data<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span>carParameterObj<span class="token punctuation">)</span><span class="token punctuation">;</span>        obj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">OutputStreamWriter</span> osw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>jsonFileName<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        osw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        osw<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ¸…ç©ºç¼“å†²åŒºï¼Œå¼ºåˆ¶è¾“å‡ºæ•°æ®</span>        osw<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å…³é—­è¾“å‡ºæµ</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="c-è¯»å†™Jsonæ–‡ä»¶"><a href="#c-è¯»å†™Jsonæ–‡ä»¶" class="headerlink" title="c++è¯»å†™Jsonæ–‡ä»¶"></a>c++è¯»å†™Jsonæ–‡ä»¶</h1><ul><li><p>æ¨¡æ¿å‡½æ•°å®šä¹‰</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">/** * @brief ä»æ–‡æœ¬ä¸­åŠ è½½json * @tparam R jsonç±»å‹ * @tparam T è‡ªåŠ¨æ¨æ–­çš„å­—ç¬¦ä¸²ç±»å‹ * @param config jsonå­—ç¬¦ä¸² * @return R */</span><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span><span class="token keyword">inline</span> R <span class="token function">LoadJsonFromText</span><span class="token punctuation">(</span><span class="token keyword">const</span> T <span class="token operator">&amp;</span>config<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// static_assert(JsonHasParse&lt;R>::value,</span>    <span class="token comment">//               "error: the type must has static method [parse].");</span>    <span class="token comment">// nlohmann json</span>    <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token double-colon punctuation">::</span><span class="token function">parse</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * @brief é€šç”¨ç±»å‹ * @tparam R * @tparam T * @tparam U * @param config * @param key * @param val * @return R */</span><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">typename</span> <span class="token class-name">U</span><span class="token operator">></span><span class="token keyword">inline</span> R <span class="token function">OptionalContain</span><span class="token punctuation">(</span><span class="token keyword">const</span> T <span class="token operator">&amp;</span>config<span class="token punctuation">,</span> <span class="token keyword">const</span> U <span class="token operator">&amp;</span>key<span class="token punctuation">,</span> <span class="token keyword">const</span> R <span class="token operator">&amp;</span>val<span class="token punctuation">,</span> JsonGenericType<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> config<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> val<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>ä½¿ç”¨</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span><span class="token string">"json.hpp"</span></span><span class="token keyword">using</span> nlohmann<span class="token double-colon punctuation">::</span>json<span class="token punctuation">;</span>std<span class="token double-colon punctuation">::</span>string config<span class="token operator">=</span> <span class="token string">"example.jsonc"</span><span class="token punctuation">;</span><span class="token keyword">auto</span> json_config <span class="token operator">=</span> <span class="token generic-function"><span class="token function">LoadJsonFromText</span><span class="token generic class-name"><span class="token operator">&lt;</span>json<span class="token operator">></span></span></span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">auto</span> <span class="token operator">&amp;</span>vs_config <span class="token operator">=</span> json_config<span class="token punctuation">[</span><span class="token string">"video_source"</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">auto</span> width  <span class="token operator">=</span> vs_config<span class="token punctuation">[</span><span class="token string">"width"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">auto</span> height <span class="token operator">=</span> vs_config<span class="token punctuation">[</span><span class="token string">"height"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">auto</span> width1  <span class="token operator">=</span> json_config<span class="token punctuation">[</span><span class="token string">"video_source"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"width"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">auto</span> height1 <span class="token operator">=</span> json_config<span class="token punctuation">[</span><span class="token string">"video_source"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"height"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>json_config<span class="token punctuation">[</span><span class="token string">"video_source"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"width"</span><span class="token punctuation">]</span>  <span class="token operator">=</span> <span class="token number">720</span><span class="token punctuation">;</span>json_config<span class="token punctuation">[</span><span class="token string">"video_source"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"height"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">480</span><span class="token punctuation">;</span><span class="token comment">// å°†jsoncæ–‡ä»¶è½¬æ¢ä¸ºstring</span><span class="token keyword">const</span> <span class="token keyword">auto</span> <span class="token operator">&amp;</span>json_config_str <span class="token operator">=</span> json_config<span class="token punctuation">.</span><span class="token function">dump</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">auto</span> <span class="token operator">&amp;</span>fake_config <span class="token operator">=</span> vs_config<span class="token punctuation">[</span><span class="token string">"fake"</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">auto</span> fake_enable <span class="token operator">=</span> ac<span class="token double-colon punctuation">::</span><span class="token function">OptionalContain</span><span class="token punctuation">(</span>fake_config<span class="token punctuation">,</span> <span class="token string">"enable"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><code>json.hpp</code><br><img src="https://github.com/geiyiren/MyBlogFile1/blob/other/json%E6%96%87%E4%BB%B6%E8%AF%BB%E5%86%99/json.hpp" alt="json.hpp"></p></li><li><p><code>example.jsonc</code></p><pre class="line-numbers language-jsonc" data-language="jsonc"><code class="language-jsonc">&#123;    &#x2F;&#x2F; å½“å‰é…ç½®æ–‡ä»¶çš„ç‰ˆæœ¬ï¼Œæ­¤ç‰ˆæœ¬ç”¨äºå…¼å®¹æ€§å¤„ç†    &quot;version&quot;: &quot;1.0.0.0&quot;,    &quot;camera_id&quot;: &quot;camera_1&quot;,    &quot;video_source&quot;: &#123;        &quot;width&quot; : 1280,                        &#x2F;&#x2F; éœ€è¦è®¾ç½®ä¸ºå¹³å°ç›¸åº”çš„åˆ†è¾¨ç‡        &quot;height&quot;: 720,        &quot;format&quot;: &quot;kRGB888&quot;,                  &#x2F;&#x2F; å†…éƒ¨è‡ªè¡Œç”Ÿæˆ, è¿™é‡Œå®é™…ä¸Šæ— æ•ˆ        &quot;device&quot;: &quot;&#x2F;dev&#x2F;video0&quot;,        &quot;fps&quot;   : 20,        &quot;connect&quot;: true,                      &#x2F;&#x2F; trueï¼šæŠŠå›è°ƒçš„å›¾åƒé€å…¥ç®—æ³•ï¼› falseï¼šä¸ç»™ç®—æ³•é€å…¥å›¾åƒã€‚                                              &#x2F;&#x2F; è¿™ä¸ªé€‰é¡¹å¯¹å‡è§†é¢‘æºä¾ç„¶æœ‰æ•ˆ        &quot;fake&quot;: &#123;            &quot;enable&quot;: false,                  &#x2F;&#x2F; trueè¡¨ç¤ºå¯ç”¨å‡è§†é¢‘æº            &quot;img&quot;: &quot;assets&#x2F;ssd_test_img.jpg&quot;, &#x2F;&#x2F; ä½¿ç”¨è¿™å¼ å›¾ç‰‡æ¥å†’å……ï¼Œæ³¨æ„ä»…æ”¯æŒjpgæ ¼å¼å›¾ç‰‡ï¼Œä¸”æœ€å¥½æ˜¯720æˆ–1080På›¾åƒ            &quot;out_fmt&quot;: &quot;kYUV422SP&quot;            &#x2F;&#x2F; å‡è§†é¢‘æºçš„è¾“å‡ºæ ¼å¼ï¼ˆæ¨¡æ‹Ÿè¾“å‡ºçš„è§†é¢‘æ ¼å¼ï¼‰        &#125;    &#125;,&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><blockquote><p>å‚è€ƒè¿æ¥ï¼š <a href="https://cloud.tencent.com/developer/article/1556944">https://cloud.tencent.com/developer/article/1556944</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> jsonæ–‡ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è½¦è¾†åŠ¨æ€è¾…åŠ©è½¨è¿¹çº¿ç”Ÿæˆæ–¹æ³•</title>
      <link href="/2022/12/14/che-liang-dong-tai-fu-zhu-gui-ji-xian-sheng-cheng-fang-fa/"/>
      <url>/2022/12/14/che-liang-dong-tai-fu-zhu-gui-ji-xian-sheng-cheng-fang-fa/</url>
      
        <content type="html"><![CDATA[<h1 id="æ±½è½¦åŠ¨åŠ›å­¦åŸç†"><a href="#æ±½è½¦åŠ¨åŠ›å­¦åŸç†" class="headerlink" title="æ±½è½¦åŠ¨åŠ›å­¦åŸç†"></a>æ±½è½¦åŠ¨åŠ›å­¦åŸç†</h1><p>åœ¨ç ”ç©¶è¾…åŠ©æ³Šè½¦æ—¶ï¼Œç¬¬ä¸€è¦ç ”ç©¶ä¸€ä¸‹æ±½è½¦åœ¨è¿åŠ¨çš„æ—¶å€™çš„è½¨è¿¹ï¼Œè¦å»ºç«‹ä¸€ä¸ªæ±½è½¦åœ¨æ³Šè½¦æ—¶çš„è¿åŠ¨å­¦æ¨¡å‹æ¥ä½œä¸ºåé¢ç ”ç©¶çš„ç†è®ºåŸºç¡€ã€‚è½¦è¾†åœ¨æ³Šè½¦çš„è¿‡ç¨‹ä¸­æœ‰ä¸€ä¸ªç‰¹ç‚¹å³å®ƒæ˜¯ä½é€Ÿè¡Œé©¶çš„ï¼Œè¿™æ—¶<strong>è½¦è½®åœ¨æ»šåŠ¨è¿‡ç¨‹ä¸­ä¸ä¼šå‘ç”Ÿä¾§æ–¹å‘çš„æ»‘åŠ¨</strong>ï¼Œç”±äºæ±½è½¦åœ¨ç¼“æ…¢è¡Œé©¶çš„è¿‡ç¨‹ä¸­ä¸ä¼šæœ‰ä¾§å‘åŠ›ï¼Œè¿™æ—¶ç³»ç»Ÿçš„çº¦æŸæ¡ä»¶æ˜¯å…è®¸è½¦è½®å‘ç”Ÿæ»šåŠ¨å’Œä¾§è½¬ï¼Œä½†ä¸ä¼šæœ‰æ»‘åŠ¨çš„å‘ç”Ÿï¼Œç”±æ­¤å»ºç«‹äº†è½¦è¾†çš„è¿åŠ¨å­¦æ¨¡å‹ã€‚ä¸‹é¢æ˜¯å€’è½¦çš„æ—¶å€™æ±½è½¦çš„è¿åŠ¨å­¦æ¨¡å‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E8%BD%A6%E8%BE%86%E5%8A%A8%E6%80%81%E8%BE%85%E5%8A%A9%E8%BD%A8%E8%BF%B9%E7%BA%BF%E7%94%9F%E6%88%90%E6%96%B9%E6%B3%95/Vehicle_dynamics_model.png"> </p><p>å…¶ä¸­ï¼š(x_{f},y_{f})ä¸ºæ±½è½¦å‰è½´ä¸­å¿ƒç‚¹çš„åæ ‡ï¼›(x_{r},y_{r})ä¸ºæ±½è½¦çš„åè½´ä¸­å¿ƒç‚¹çš„åæ ‡ï¼›væŒ‡å‰è½´ä¸­å¿ƒç‚¹çš„é€Ÿåº¦ï¼›l_{m}ä¸ºè½´è·ï¼›h_{r}ä¸ºåè½®è·ï¼›Ï†ä¸ºå‰è½´ä¸­å¿ƒçš„è½¬å‘è§’ï¼›Î¸ä¸ºæ±½è½¦çš„èˆªå‘è§’ï¼ŒæŒ‡æ±½è½¦çš„ä¸­å¿ƒè½´ä¸å‚è€ƒæ–¹å‘ä¸Šçš„å¤¹è§’ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E8%BD%A6%E8%BE%86%E5%8A%A8%E6%80%81%E8%BE%85%E5%8A%A9%E8%BD%A8%E8%BF%B9%E7%BA%BF%E7%94%9F%E6%88%90%E6%96%B9%E6%B3%95/1.png"> </p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E8%BD%A6%E8%BE%86%E5%8A%A8%E6%80%81%E8%BE%85%E5%8A%A9%E8%BD%A8%E8%BF%B9%E7%BA%BF%E7%94%9F%E6%88%90%E6%96%B9%E6%B3%95/2.png"> </p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E8%BD%A6%E8%BE%86%E5%8A%A8%E6%80%81%E8%BE%85%E5%8A%A9%E8%BD%A8%E8%BF%B9%E7%BA%BF%E7%94%9F%E6%88%90%E6%96%B9%E6%B3%95/3.png"> </p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E8%BD%A6%E8%BE%86%E5%8A%A8%E6%80%81%E8%BE%85%E5%8A%A9%E8%BD%A8%E8%BF%B9%E7%BA%BF%E7%94%9F%E6%88%90%E6%96%B9%E6%B3%95/4.png"> </p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E8%BD%A6%E8%BE%86%E5%8A%A8%E6%80%81%E8%BE%85%E5%8A%A9%E8%BD%A8%E8%BF%B9%E7%BA%BF%E7%94%9F%E6%88%90%E6%96%B9%E6%B3%95/5.png"> </p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E8%BD%A6%E8%BE%86%E5%8A%A8%E6%80%81%E8%BE%85%E5%8A%A9%E8%BD%A8%E8%BF%B9%E7%BA%BF%E7%94%9F%E6%88%90%E6%96%B9%E6%B3%95/6.png"> </p><p>æ€»ç»“ï¼š</p><ul><li>è½¨è¿¹å’Œé€Ÿåº¦æ²¡æœ‰å…³ç³»</li><li>è½¦è¾†çš„ä¸¤ä¸ªåè½®æ˜¯æ²¿ç€åœ†åœ¨è¿åŠ¨çš„</li><li><strong>æ±½è½¦åœ¨ä½é€Ÿè¡Œé©¶ä¸”ä¸è€ƒè™‘æœ‰ä¾§æ»‘çš„æƒ…å†µä¸‹ï¼Œæ±½è½¦çš„è½¦èº«ä¸Šæ¯ä¸€ç‚¹çš„è¿åŠ¨è½¨è¿¹éƒ½æ˜¯æŒ‡å‘åŒæ ·çš„ä¸€ä¸ªåœ†å¿ƒçš„åœ†ï¼Œå¹¶ä¸”åªå’Œæ±½è½¦çš„è½¬å‘è§’æœ‰å…³ç³»ï¼Œå’Œæ±½è½¦çš„è½¦é€Ÿæ²¡æœ‰å…³ç³»</strong></li></ul><h2 id="é˜¿å…‹æ›¼è½¬å¼¯å‡ ä½•åŸç†"><a href="#é˜¿å…‹æ›¼è½¬å¼¯å‡ ä½•åŸç†" class="headerlink" title="é˜¿å…‹æ›¼è½¬å¼¯å‡ ä½•åŸç†"></a>é˜¿å…‹æ›¼è½¬å¼¯å‡ ä½•åŸç†</h2><ul><li><p>ç¤ºæ„å›¾ï¼š<br><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E8%BD%A6%E8%BE%86%E5%8A%A8%E6%80%81%E8%BE%85%E5%8A%A9%E8%BD%A8%E8%BF%B9%E7%BA%BF%E7%94%9F%E6%88%90%E6%96%B9%E6%B3%95/Ackerman_turning_geometry.png"></p></li><li><p>è®²è§£è§†é¢‘ï¼š<a href="https://www.youtube.com/watch?v=8AimxDPWKcM">https://www.youtube.com/watch?v=8AimxDPWKcM</a></p></li></ul><h1 id="å‚è€ƒä¸“åˆ©"><a href="#å‚è€ƒä¸“åˆ©" class="headerlink" title="å‚è€ƒä¸“åˆ©"></a>å‚è€ƒä¸“åˆ©</h1><p><a href="https://github.com/geiyiren/MyBlogFile1/blob/pdf/%E8%BD%A6%E8%BE%86%E5%8A%A8%E6%80%81%E8%BE%85%E5%8A%A9%E8%BD%A8%E8%BF%B9%E7%BA%BF%E7%94%9F%E6%88%90%E6%96%B9%E6%B3%95/%E4%B9%98%E7%94%A8%E8%BD%A6%E5%8A%A8%E6%80%81%E5%80%92%E8%BD%A6%E8%BE%85%E5%8A%A9%E7%BA%BF%E8%AE%BE%E8%AE%A1.pdf">å‚è€ƒä¸“åˆ©</a></p>]]></content>
      
      
      <categories>
          
          <category> è¾…åŠ©é©¾é©¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 360ç¯è§† </tag>
            
            <tag> è¾…åŠ©é©¾é©¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linuxå¸¸ç”¨å‘½ä»¤</title>
      <link href="/2022/12/12/linux-chang-yong-ming-ling/"/>
      <url>/2022/12/12/linux-chang-yong-ming-ling/</url>
      
        <content type="html"><![CDATA[<h1 id="findå‘½ä»¤"><a href="#findå‘½ä»¤" class="headerlink" title="findå‘½ä»¤"></a>findå‘½ä»¤</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">find</span> ä½ç½® <span class="token parameter variable">-name</span> <span class="token string">'åç§°'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="æŸ¥çœ‹ä¸è½¬æ¢YUVå›¾åƒï¼š"><a href="#æŸ¥çœ‹ä¸è½¬æ¢YUVå›¾åƒï¼š" class="headerlink" title="æŸ¥çœ‹ä¸è½¬æ¢YUVå›¾åƒï¼š"></a>æŸ¥çœ‹ä¸è½¬æ¢YUVå›¾åƒï¼š</h1><ul><li>YUVæŸ¥çœ‹<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ffplay <span class="token parameter variable">-pixel_format</span> nv12 <span class="token parameter variable">-f</span> rawvideo <span class="token parameter variable">-video_size</span> 240x576 stitch_view.yuv<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li>YUVè½¬PNG<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ffmpeg <span class="token parameter variable">-pix_fmt</span> nv12 <span class="token parameter variable">-video_size</span> 1280x720 <span class="token parameter variable">-i</span> src_1.yuv <span class="token parameter variable">-y</span> src_1.jpgffmpeg <span class="token parameter variable">-s</span> <span class="token number">1280</span>*720 <span class="token parameter variable">-i</span> front0.bmp <span class="token parameter variable">-pix_fmt</span> nv12 front0.yuv<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ul><h1 id="ubuntuç»ˆç«¯æŸ¥çœ‹å†å²å‘½ä»¤"><a href="#ubuntuç»ˆç«¯æŸ¥çœ‹å†å²å‘½ä»¤" class="headerlink" title="ubuntuç»ˆç«¯æŸ¥çœ‹å†å²å‘½ä»¤"></a>ubuntuç»ˆç«¯æŸ¥çœ‹å†å²å‘½ä»¤</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">history</span> <span class="token operator">|</span> <span class="token function">grep</span> some_command<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="æŸ¥çœ‹cupé™åˆ¶"><a href="#æŸ¥çœ‹cupé™åˆ¶" class="headerlink" title="æŸ¥çœ‹cupé™åˆ¶"></a>æŸ¥çœ‹cupé™åˆ¶</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ps</span> <span class="token operator">|</span> <span class="token function">grep</span> limit <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="å¼ºåˆ¶å…³é—­çª—å£"><a href="#å¼ºåˆ¶å…³é—­çª—å£" class="headerlink" title="å¼ºåˆ¶å…³é—­çª—å£"></a>å¼ºåˆ¶å…³é—­çª—å£</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">xkill<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>ç„¶åç§»åŠ¨é¼ æ ‡ç‚¹å‡»éœ€è¦å…³é—­çš„çª—å£å³å¯</li></ul><h1 id="æœ¬åœ°gitlabåº“æ·»åŠ è¿œç¨‹åº“ä¿¡ä»»"><a href="#æœ¬åœ°gitlabåº“æ·»åŠ è¿œç¨‹åº“ä¿¡ä»»" class="headerlink" title="æœ¬åœ°gitlabåº“æ·»åŠ è¿œç¨‹åº“ä¿¡ä»»"></a>æœ¬åœ°gitlabåº“æ·»åŠ è¿œç¨‹åº“ä¿¡ä»»</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config <span class="token parameter variable">--global</span> <span class="token parameter variable">--add</span> safe.directory /media/geiyiren/MyCode/AVM/avm_2d/master/avm_cpu_algo<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="ä¿å­˜yuv-bufå›¾åƒ"><a href="#ä¿å­˜yuv-bufå›¾åƒ" class="headerlink" title="ä¿å­˜yuv bufå›¾åƒ"></a>ä¿å­˜yuv bufå›¾åƒ</h1><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">FILE <span class="token operator">*</span>fp_dump <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"bsd_1.yuv"</span><span class="token punctuation">,</span> <span class="token string">"wb+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>fp_dump <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"fp_dump open fail\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"fp_dump cam  yuv open success\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>size_t bytes_write <span class="token operator">=</span> <span class="token function">fwrite</span><span class="token punctuation">(</span>p_yuv_buf<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> width <span class="token operator">*</span> height <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> fp_dump<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>bytes_write <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"write raw_stream fail !!!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">fclose</span><span class="token punctuation">(</span>fp_dump<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="æ‰¹é‡å°†jpgè½¬æ¢ä¸ºyuv"><a href="#æ‰¹é‡å°†jpgè½¬æ¢ä¸ºyuv" class="headerlink" title="æ‰¹é‡å°†jpgè½¬æ¢ä¸ºyuv"></a>æ‰¹é‡å°†jpgè½¬æ¢ä¸ºyuv</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#! /bin/bash</span><span class="token assign-left variable">files</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span> $folder<span class="token variable">)</span></span><span class="token assign-left variable">yuv</span><span class="token operator">=</span><span class="token string">"yuv"</span><span class="token keyword">for</span> <span class="token for-or-select variable">file</span> <span class="token keyword">in</span> <span class="token variable">$files</span><span class="token keyword">do</span>  <span class="token builtin class-name">echo</span> <span class="token variable">$&#123;file<span class="token operator">:</span>0<span class="token operator">:</span>13&#125;</span>  <span class="token assign-left variable">file_name</span><span class="token operator">=</span><span class="token variable">$&#123;file<span class="token operator">:</span>0<span class="token operator">:</span>13&#125;</span>  <span class="token assign-left variable">str</span><span class="token operator">=</span><span class="token variable">$file_name</span><span class="token variable">$yuv</span>  ffmpeg <span class="token parameter variable">-i</span> <span class="token variable">$file</span> <span class="token parameter variable">-s</span> <span class="token number">1280</span>*720 <span class="token parameter variable">-pix_fmt</span> nv12 <span class="token variable">$str</span><span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="abd-å¸¸ç”¨å‘½ä»¤"><a href="#abd-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="abd å¸¸ç”¨å‘½ä»¤"></a>abd å¸¸ç”¨å‘½ä»¤</h1><h2 id="æ‰“å¼€è°ƒè¯•ç«¯å£"><a href="#æ‰“å¼€è°ƒè¯•ç«¯å£" class="headerlink" title="æ‰“å¼€è°ƒè¯•ç«¯å£"></a>æ‰“å¼€è°ƒè¯•ç«¯å£</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">adb tcpip <span class="token number">5555</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="è¿æ¥"><a href="#è¿æ¥" class="headerlink" title="è¿æ¥"></a>è¿æ¥</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">adb connect <span class="token number">10.10</span>.200.140<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="è¿›å…¥è¿œç¨‹ç»ˆç«¯"><a href="#è¿›å…¥è¿œç¨‹ç»ˆç«¯" class="headerlink" title="è¿›å…¥è¿œç¨‹ç»ˆç«¯"></a>è¿›å…¥è¿œç¨‹ç»ˆç«¯</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">adb shell<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="å…³é—­æœåŠ¡"><a href="#å…³é—­æœåŠ¡" class="headerlink" title="å…³é—­æœåŠ¡"></a>å…³é—­æœåŠ¡</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">adb kill-server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="å¯åŠ¨æœåŠ¡"><a href="#å¯åŠ¨æœåŠ¡" class="headerlink" title="å¯åŠ¨æœåŠ¡"></a>å¯åŠ¨æœåŠ¡</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">adb start-server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="é‡æ–°æŒ‚è½½"><a href="#é‡æ–°æŒ‚è½½" class="headerlink" title="é‡æ–°æŒ‚è½½"></a>é‡æ–°æŒ‚è½½</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">adb remount<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="è·å–rootæƒé™"><a href="#è·å–rootæƒé™" class="headerlink" title="è·å–rootæƒé™"></a>è·å–rootæƒé™</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">adb root<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="å®‰å“å½•åˆ¶å±å¹•"><a href="#å®‰å“å½•åˆ¶å±å¹•" class="headerlink" title="å®‰å“å½•åˆ¶å±å¹•"></a>å®‰å“å½•åˆ¶å±å¹•</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">adb shell screenrecord  --time-limit <span class="token number">12</span> /sdcard/name.mp4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id=""><a href="#" class="headerlink" title=""></a></h2><h1 id="å®‰å“è®¾å¤‡å¼€å¯USB"><a href="#å®‰å“è®¾å¤‡å¼€å¯USB" class="headerlink" title="å®‰å“è®¾å¤‡å¼€å¯USB"></a>å®‰å“è®¾å¤‡å¼€å¯USB</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">setprop persist.otg.mode device<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>è¿œç¨‹ç™»å½•åä½¿ç”¨ä¸Šè¿°å‘½ä»¤</li></ul><h1 id="è¿œç¨‹ä¸ºå®‰å“è®¾å¤‡å®‰è£…è½¯ä»¶"><a href="#è¿œç¨‹ä¸ºå®‰å“è®¾å¤‡å®‰è£…è½¯ä»¶" class="headerlink" title="è¿œç¨‹ä¸ºå®‰å“è®¾å¤‡å®‰è£…è½¯ä»¶"></a>è¿œç¨‹ä¸ºå®‰å“è®¾å¤‡å®‰è£…è½¯ä»¶</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">adb <span class="token function">install</span> Launcher3.apk<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>åœ¨æœ¬åœ°æ‰§è¡Œä¸Šè¿°å‘½ä»¤</li></ul><h1 id="æŸ¥çœ‹å½“å‰æ–‡ä»¶ä¸‹æ‰€æœ‰æ–‡ä»¶å¤§å°"><a href="#æŸ¥çœ‹å½“å‰æ–‡ä»¶ä¸‹æ‰€æœ‰æ–‡ä»¶å¤§å°" class="headerlink" title="æŸ¥çœ‹å½“å‰æ–‡ä»¶ä¸‹æ‰€æœ‰æ–‡ä»¶å¤§å°"></a>æŸ¥çœ‹å½“å‰æ–‡ä»¶ä¸‹æ‰€æœ‰æ–‡ä»¶å¤§å°</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#ä»¥Mä¸ºå•ä½æŸ¥çœ‹å½“å‰æ–‡ä»¶ä¸‹æ‰€æœ‰æ–‡ä»¶çš„å¤§å°ï¼ŒåŒ…å«éšè—æ–‡ä»¶</span><span class="token function">du</span> <span class="token parameter variable">-sm</span> .<span class="token punctuation">[</span><span class="token operator">!</span>.<span class="token punctuation">]</span>* * <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-hr</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h1 id="æŸ¥çœ‹ç£ç›˜å‰©ä½™ç©ºé—´"><a href="#æŸ¥çœ‹ç£ç›˜å‰©ä½™ç©ºé—´" class="headerlink" title="æŸ¥çœ‹ç£ç›˜å‰©ä½™ç©ºé—´"></a>æŸ¥çœ‹ç£ç›˜å‰©ä½™ç©ºé—´</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">df</span> <span class="token parameter variable">-hl</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="githubè®¿é—®åŠ é€Ÿ"><a href="#githubè®¿é—®åŠ é€Ÿ" class="headerlink" title="githubè®¿é—®åŠ é€Ÿ"></a>githubè®¿é—®åŠ é€Ÿ</h1><h2 id="æŸ¥è¯¢IP"><a href="#æŸ¥è¯¢IP" class="headerlink" title="æŸ¥è¯¢IP"></a>æŸ¥è¯¢IP</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#github.global.ssl.fastly.net ç½‘ç«™IP</span><span class="token function">nslookup</span> github.global.ssl.fastly.net<span class="token comment">#github.com ç½‘ç«™IP</span><span class="token function">nslookup</span> github.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ›´æ”¹hostæ–‡ä»¶"><a href="#æ›´æ”¹hostæ–‡ä»¶" class="headerlink" title="æ›´æ”¹hostæ–‡ä»¶"></a>æ›´æ”¹hostæ–‡ä»¶</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> gedit /etc/hosts<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>å°†ä¸Šè¿°æŸ¥è¯¢åˆ°çš„IPå¤åˆ¶åˆ°å¯¹åº”ä½ç½®</li></ul><h2 id="æ›´æ–°hostæ–‡ä»¶"><a href="#æ›´æ–°hostæ–‡ä»¶" class="headerlink" title="æ›´æ–°hostæ–‡ä»¶"></a>æ›´æ–°hostæ–‡ä»¶</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> /etc/init.d/network-manager restart<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="sshç›¸å…³"><a href="#sshç›¸å…³" class="headerlink" title="sshç›¸å…³"></a>sshç›¸å…³</h1><h2 id="ä¸»æœºAå…å¯†ç™»å½•ä¸»æœºB"><a href="#ä¸»æœºAå…å¯†ç™»å½•ä¸»æœºB" class="headerlink" title="ä¸»æœºAå…å¯†ç™»å½•ä¸»æœºB"></a>ä¸»æœºAå…å¯†ç™»å½•ä¸»æœºB</h2><p>åœ¨ä¸»æœºAæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ssh-copy-id ä¸»æœºBçš„ç”¨æˆ·å@ä¸»æœºBçš„IPåœ°å€<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="YUVå›¾åƒè½¬æ¢"><a href="#YUVå›¾åƒè½¬æ¢" class="headerlink" title="YUVå›¾åƒè½¬æ¢"></a>YUVå›¾åƒè½¬æ¢</h2><ul><li><p>å®‰è£…ffmpeg</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> ffmpeg<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>yuvæŸ¥çœ‹</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ffplay <span class="token parameter variable">-pixel_format</span> nv12 <span class="token parameter variable">-f</span> rawvideo <span class="token parameter variable">-video_size</span> 1920x1080 test.yuv<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>jpg â€“&gt; yuv</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ffmpeg <span class="token parameter variable">-i</span> front0.jpg <span class="token parameter variable">-s</span> <span class="token number">1280</span>*720 <span class="token parameter variable">-pix_fmt</span> nv12 front0.yuv<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>yuv â€“&gt; jpg</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ffmpeg <span class="token parameter variable">-pix_fmt</span> nv12 <span class="token parameter variable">-video_size</span> 1280x800 <span class="token parameter variable">-i</span> src_1.yuv <span class="token parameter variable">-y</span> src_1.jpg<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><h1 id="æ€§èƒ½åˆ†æå¸¸ç”¨å‘½ä»¤"><a href="#æ€§èƒ½åˆ†æå¸¸ç”¨å‘½ä»¤" class="headerlink" title="æ€§èƒ½åˆ†æå¸¸ç”¨å‘½ä»¤"></a>æ€§èƒ½åˆ†æå¸¸ç”¨å‘½ä»¤</h1><ul><li>æŸ¥çœ‹å„ä¸ªåˆ†åŒºå­˜å‚¨ä½¿ç”¨æƒ…å†µ<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">df</span> <span class="token parameter variable">-h</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li>æŸ¥çœ‹IOä½¿ç”¨æƒ…å†µ<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">apt-get</span> <span class="token function">install</span> sysstatiostat <span class="token parameter variable">-x</span> <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ul><h1 id="git-æ–°å»ºä»“åº“æ¨é€"><a href="#git-æ–°å»ºä»“åº“æ¨é€" class="headerlink" title="git æ–°å»ºä»“åº“æ¨é€"></a>git æ–°å»ºä»“åº“æ¨é€</h1><ul><li><p>Git å…¨å±€è®¾ç½®</p><pre class="line-numbers language-none"><code class="language-none">git config --global user.name &quot;ç‹å¸…ç‚€&quot;git config --global user.email &quot;wangshuaiyang@hopechart.com&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>åˆ›å»ºä¸€ä¸ªæ–°ä»“åº“</p><pre class="line-numbers language-none"><code class="language-none">git clone git@172.20.1.10:wangshuaiyang&#x2F;test.gitcd testtouch README.mdgit add README.mdgit commit -m &quot;add README&quot;git push -u origin master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>æ¨é€ç°æœ‰æ–‡ä»¶å¤¹</p><pre class="line-numbers language-none"><code class="language-none">cd existing_foldergit initgit remote add origin git@172.20.1.10:wangshuaiyang&#x2F;test.gitgit add .git commit -m &quot;Initial commit&quot;git push -u origin master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>æ¨é€ç°æœ‰çš„ Git ä»“åº“</p><pre class="line-numbers language-none"><code class="language-none">cd existing_repogit remote rename origin old-origingit remote add origin git@172.20.1.10:wangshuaiyang&#x2F;test.gitgit push -u origin --allgit push -u origin --tags<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ç»ˆç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++å˜é‡å‘½åå¸¸ç”¨ç¼©å†™è¡¨</title>
      <link href="/2022/12/12/c-bian-liang-ming-ming-chang-yong-suo-xie-biao/"/>
      <url>/2022/12/12/c-bian-liang-ming-ming-chang-yong-suo-xie-biao/</url>
      
        <content type="html"><![CDATA[<table><thead><tr><th align="center">å…¨ ç§°</th><th align="center">ç¼© å†™</th></tr></thead><tbody><tr><td align="center">Address</td><td align="center">addr</td></tr><tr><td align="center">Administrator</td><td align="center">adm</td></tr><tr><td align="center">average</td><td align="center">avg</td></tr><tr><td align="center">Application</td><td align="center">app</td></tr><tr><td align="center">Argument</td><td align="center">arg</td></tr><tr><td align="center">Database</td><td align="center">DB</td></tr><tr><td align="center">assemble</td><td align="center">asm</td></tr><tr><td align="center">Bitmap</td><td align="center">bmp</td></tr><tr><td align="center">back</td><td align="center">bk</td></tr><tr><td align="center">asynchronization</td><td align="center">asyn</td></tr><tr><td align="center">Button</td><td align="center">btn</td></tr><tr><td align="center">Buffer</td><td align="center">buf</td></tr><tr><td align="center">Calculate</td><td align="center">calc</td></tr><tr><td align="center">Character</td><td align="center">char</td></tr><tr><td align="center">Change</td><td align="center">chg</td></tr><tr><td align="center">Click</td><td align="center">clk</td></tr><tr><td align="center">color</td><td align="center">clr</td></tr><tr><td align="center">Command</td><td align="center">cmd</td></tr><tr><td align="center">Compare</td><td align="center">cmp</td></tr><tr><td align="center">Column</td><td align="center">col</td></tr><tr><td align="center">coordinates</td><td align="center">coord</td></tr><tr><td align="center">copy</td><td align="center">cpy</td></tr><tr><td align="center">Control</td><td align="center">ctl &#x2F; ctrl</td></tr><tr><td align="center">Current</td><td align="center">cur</td></tr><tr><td align="center">Cylinder</td><td align="center">cyl</td></tr><tr><td align="center">Debug</td><td align="center">dbg</td></tr><tr><td align="center">Double</td><td align="center">dbl</td></tr><tr><td align="center">Decrease</td><td align="center">dec</td></tr><tr><td align="center">default</td><td align="center">def</td></tr><tr><td align="center">Delete</td><td align="center">del</td></tr><tr><td align="center">Destination</td><td align="center">dest &#x2F; dst</td></tr><tr><td align="center">Device</td><td align="center">dev</td></tr><tr><td align="center">dictionary</td><td align="center">dict</td></tr><tr><td align="center">different</td><td align="center">diff</td></tr><tr><td align="center">directory</td><td align="center">dir</td></tr><tr><td align="center">Display</td><td align="center">disp</td></tr><tr><td align="center">Divide</td><td align="center">div</td></tr><tr><td align="center">Dialog</td><td align="center">dlg</td></tr><tr><td align="center">Document</td><td align="center">doc</td></tr><tr><td align="center">Driver</td><td align="center">drv</td></tr><tr><td align="center">Dynamic</td><td align="center">dyna</td></tr><tr><td align="center">Environment</td><td align="center">env</td></tr><tr><td align="center">error</td><td align="center">err</td></tr><tr><td align="center">Extend</td><td align="center">ex&#x2F;ext</td></tr><tr><td align="center">execute</td><td align="center">exec</td></tr><tr><td align="center">flag</td><td align="center">flg</td></tr><tr><td align="center">Frame</td><td align="center">frm</td></tr><tr><td align="center">Function</td><td align="center">func &#x2F; fn</td></tr><tr><td align="center">group</td><td align="center">grp</td></tr><tr><td align="center">Horizontal</td><td align="center">horz</td></tr><tr><td align="center">Index</td><td align="center">idx &#x2F; ndx</td></tr><tr><td align="center">Image</td><td align="center">img</td></tr><tr><td align="center">Implement</td><td align="center">Impl</td></tr><tr><td align="center">Increase</td><td align="center">inc</td></tr><tr><td align="center">Information</td><td align="center">info</td></tr><tr><td align="center">Initial&#x2F;Initialize&#x2F;Initialization</td><td align="center">init</td></tr><tr><td align="center">Insert</td><td align="center">ins</td></tr><tr><td align="center">Instance</td><td align="center">inst</td></tr><tr><td align="center">Interrupt</td><td align="center">INT &#x2F; intr</td></tr><tr><td align="center">Length</td><td align="center">len</td></tr><tr><td align="center">Library</td><td align="center">lib</td></tr><tr><td align="center">Link</td><td align="center">lnk</td></tr><tr><td align="center">logical</td><td align="center">log</td></tr><tr><td align="center">List</td><td align="center">lst</td></tr><tr><td align="center">maximum</td><td align="center">max</td></tr><tr><td align="center">Memory</td><td align="center">mem</td></tr><tr><td align="center">Manage &#x2F; Manager</td><td align="center">mgr &#x2F; man</td></tr><tr><td align="center">middle</td><td align="center">mid</td></tr><tr><td align="center">minimum</td><td align="center">min</td></tr><tr><td align="center">Message</td><td align="center">msg</td></tr><tr><td align="center">Multiply</td><td align="center">mul</td></tr><tr><td align="center">Number</td><td align="center">num</td></tr><tr><td align="center">Object</td><td align="center">obj</td></tr><tr><td align="center">Offset</td><td align="center">ofs</td></tr><tr><td align="center">Origin &#x2F; Original</td><td align="center">org</td></tr><tr><td align="center">Parameter</td><td align="center">param</td></tr><tr><td align="center">picture</td><td align="center">pic</td></tr><tr><td align="center">package</td><td align="center">pkg</td></tr><tr><td align="center">Point</td><td align="center">pnt &#x2F; pt</td></tr><tr><td align="center">Position</td><td align="center">pos</td></tr><tr><td align="center">previous</td><td align="center">pre &#x2F; prev</td></tr><tr><td align="center">program</td><td align="center">prg</td></tr><tr><td align="center">Print</td><td align="center">prn</td></tr><tr><td align="center">Process &#x2F; Procedure</td><td align="center">proc</td></tr><tr><td align="center">Properties</td><td align="center">prop</td></tr><tr><td align="center">Password</td><td align="center">psw</td></tr><tr><td align="center">Pointer</td><td align="center">ptr</td></tr><tr><td align="center">Public</td><td align="center">pub</td></tr><tr><td align="center">rect</td><td align="center">rc</td></tr><tr><td align="center">Reference</td><td align="center">ref</td></tr><tr><td align="center">Register</td><td align="center">reg</td></tr><tr><td align="center">request</td><td align="center">req</td></tr><tr><td align="center">Resource</td><td align="center">res</td></tr><tr><td align="center">return</td><td align="center">ret</td></tr><tr><td align="center">region</td><td align="center">rgn</td></tr><tr><td align="center">screen</td><td align="center">scr</td></tr><tr><td align="center">Second</td><td align="center">sec</td></tr><tr><td align="center">Segment</td><td align="center">seg</td></tr><tr><td align="center">Select</td><td align="center">sel</td></tr><tr><td align="center">Source</td><td align="center">src</td></tr><tr><td align="center">Standard</td><td align="center">std</td></tr><tr><td align="center">Storage</td><td align="center">stg</td></tr><tr><td align="center">Stream</td><td align="center">stm</td></tr><tr><td align="center">String</td><td align="center">str</td></tr><tr><td align="center">Subtract</td><td align="center">sub</td></tr><tr><td align="center">summation</td><td align="center">sum</td></tr><tr><td align="center">Server</td><td align="center">svr</td></tr><tr><td align="center">Synchronization</td><td align="center">sync</td></tr><tr><td align="center">System</td><td align="center">sys</td></tr><tr><td align="center">Table</td><td align="center">tbl</td></tr><tr><td align="center">Temporary</td><td align="center">temp &#x2F; tmp</td></tr><tr><td align="center">translate&#x2F;transation&#x2F;transparent</td><td align="center">tran &#x2F; trans</td></tr><tr><td align="center">Test</td><td align="center">tst</td></tr><tr><td align="center">text</td><td align="center">txt</td></tr><tr><td align="center">Unknown</td><td align="center">unk</td></tr><tr><td align="center">Update</td><td align="center">upd</td></tr><tr><td align="center">Upgrade</td><td align="center">upg</td></tr><tr><td align="center">Utility</td><td align="center">util</td></tr><tr><td align="center">Variable</td><td align="center">var</td></tr><tr><td align="center">Version</td><td align="center">ver</td></tr><tr><td align="center">Vertical</td><td align="center">vert</td></tr><tr><td align="center">Virus</td><td align="center">vir</td></tr><tr><td align="center">Window</td><td align="center">wnd</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> å˜é‡å‘½å </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ubuntu 16.04 LTSä¸‹å®‰è£…dockerå¹¶åˆ›å»ºæ·±åº¦å­¦ä¹ ç¯å¢ƒ</title>
      <link href="/2022/11/23/ubuntu16-04-lts-xia-an-zhuang-docker-bing-chuang-jian-shen-du-xue-xi-huan-jing/"/>
      <url>/2022/11/23/ubuntu16-04-lts-xia-an-zhuang-docker-bing-chuang-jian-shen-du-xue-xi-huan-jing/</url>
      
        <content type="html"><![CDATA[<h2 id="1-å®‰è£…docker"><a href="#1-å®‰è£…docker" class="headerlink" title="1.å®‰è£…docker"></a>1.å®‰è£…docker</h2><p>ubuntuä¸‹å®‰è£…dockerçš„å®˜æ–¹æ•™ç¨‹ï¼š<a href="https://docs.docker.com/engine/install/ubuntu/">ç‚¹æˆ‘æŸ¥çœ‹</a></p><p>ubuntuä¸‹å®‰è£…å‚è€ƒæ•™ç¨‹ï¼š<a href="https://yeasy.gitbook.io/docker_practice/install/ubuntu">ç‚¹æˆ‘æŸ¥çœ‹</a></p><h3 id="1-1å¸è½½æ—§ç‰ˆæœ¬"><a href="#1-1å¸è½½æ—§ç‰ˆæœ¬" class="headerlink" title="1.1å¸è½½æ—§ç‰ˆæœ¬"></a>1.1å¸è½½æ—§ç‰ˆæœ¬</h3><pre class="line-numbers language-none"><code class="language-none">sudo apt-get remove docker docker-engine docker.io containerd runc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="1-2ä½¿ç”¨aptå®‰è£…"><a href="#1-2ä½¿ç”¨aptå®‰è£…" class="headerlink" title="1.2ä½¿ç”¨aptå®‰è£…"></a>1.2ä½¿ç”¨aptå®‰è£…</h3><p>å®˜ç½‘æä¾›å¤šç§å®‰è£…æ–¹å¼ï¼Œè¿™é‡Œä½¿ç”¨aptå®‰è£…</p><p>ç”±äº <code>apt</code> æºä½¿ç”¨ HTTPS ä»¥ç¡®ä¿è½¯ä»¶ä¸‹è½½è¿‡ç¨‹ä¸­ä¸è¢«ç¯¡æ”¹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æ·»åŠ ä½¿ç”¨ HTTPS ä¼ è¾“çš„è½¯ä»¶åŒ…ä»¥åŠ CA è¯ä¹¦ã€‚</p><pre class="line-numbers language-none"><code class="language-none">sudo apt-get updatesudo apt-get install \    apt-transport-https \    ca-certificates \    curl \    gnupg \    lsb-release<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ·»åŠ dockerå¯†åŒ™ï¼š</p><pre class="line-numbers language-none"><code class="language-none">curl -fsSL https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;docker-ce&#x2F;linux&#x2F;ubuntu&#x2F;gpg | sudo gpg --dearmor -o &#x2F;usr&#x2F;share&#x2F;keyrings&#x2F;docker-archive-keyring.gpg# å®˜æ–¹å¯†åŒ™curl -fsSL https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;ubuntu&#x2F;gpg | sudo gpg --dearmor -o &#x2F;usr&#x2F;share&#x2F;keyrings&#x2F;docker-archive-keyring.gpg<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åï¼Œæˆ‘ä»¬éœ€è¦å‘ <code>sources.list</code> ä¸­æ·»åŠ  Docker è½¯ä»¶æºï¼š</p><pre class="line-numbers language-none"><code class="language-none">echo \  &quot;deb [arch&#x3D;amd64 signed-by&#x3D;&#x2F;usr&#x2F;share&#x2F;keyrings&#x2F;docker-archive-keyring.gpg] https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;docker-ce&#x2F;linux&#x2F;ubuntu \  $(lsb_release -cs) stable&quot; | sudo tee &#x2F;etc&#x2F;apt&#x2F;sources.list.d&#x2F;docker.list &gt; &#x2F;dev&#x2F;null# å®˜æ–¹æºecho \   &quot;deb [arch&#x3D;amd64 signed-by&#x3D;&#x2F;usr&#x2F;share&#x2F;keyrings&#x2F;docker-archive-keyring.gpg] https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;ubuntu \   $(lsb_release -cs) stable&quot; | sudo tee &#x2F;etc&#x2F;apt&#x2F;sources.list.d&#x2F;docker.list &gt; &#x2F;dev&#x2F;null<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»¥ä¸Šå‘½ä»¤ä¼šæ·»åŠ ç¨³å®šç‰ˆæœ¬çš„ Docker APT é•œåƒæºï¼Œå¦‚æœéœ€è¦æµ‹è¯•ç‰ˆæœ¬çš„ Docker è¯·å°† stable æ”¹ä¸º testã€‚</p><p>å®‰è£…docker:</p><pre class="line-numbers language-none"><code class="language-none">sudo apt-get updatesudo apt-get install docker-ce docker-ce-cli containerd.io<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="1-3é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿå™¨"><a href="#1-3é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿå™¨" class="headerlink" title="1.3é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿå™¨"></a>1.3é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿå™¨</h3><p>å‚è€ƒç½‘å€ï¼š<a href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors">ç‚¹æˆ‘æŸ¥çœ‹</a></p><p>éœ€è¦ä¸ªäººæ³¨å†Œé˜¿é‡Œäº‘è´¦å·å¹¶å¼€å¯å®¹å™¨é•œåƒæœåŠ¡ï¼Œè¯¥æœåŠ¡å…è´¹ã€‚</p><p>ç„¶åæŸ¥çœ‹é•œåƒåŠ é€Ÿåœ°å€ï¼Œä¾‹å¦‚æˆ‘çš„é•œåƒåŠ é€Ÿåœ°å€ä¸ºï¼š</p><pre class="line-numbers language-none"><code class="language-none">https:&#x2F;&#x2F;znrurdgu.mirror.aliyuncs.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ³¨æ„ï¼šè¿™é‡Œéœ€è¦æ˜¯è‡ªå·±çš„é•œåƒåŠ é€Ÿå™¨ï¼Œå¦åˆ™æ²¡æœ‰æƒé™è®¿é—®ã€‚</p><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤é…ç½®dockerï¼š</p><pre class="line-numbers language-none"><code class="language-none"># ç”Ÿæˆé…ç½®æ–‡ä»¶docker-machine ssh default# è®¾ç½®åŠ é€Ÿå™¨åœ°å€ï¼š# sed -i &quot;s|EXTRA_ARGS&#x3D;&#39;|EXTRA_ARGS&#x3D;&#39;--registry-mirror&#x3D;è‡ªå·±çš„é•œåƒåŠ é€Ÿåœ°å€|g&quot; &#x2F;var&#x2F;lib&#x2F;boot2docker&#x2F;profilesed -i &quot;s|EXTRA_ARGS&#x3D;&#39;|EXTRA_ARGS&#x3D;&#39;--registry-mirror&#x3D;https:&#x2F;&#x2F;znrurdgu.mirror.aliyuncs.com|g&quot; &#x2F;var&#x2F;lib&#x2F;boot2docker&#x2F;profile# é€€å‡ºdockerexit# é‡å¯docker-machine restart default# æŸ¥çœ‹docker info<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æŸ¥çœ‹dockerä¿¡æ¯åï¼Œå¯ä»¥å‘ç° Registory mirrors é¡¹çš„å†…å®¹ä¸ºåˆšåˆšè®¾ç½®çš„é˜¿é‡Œäº‘é•œåƒåœ°å€ã€‚</p><pre class="line-numbers language-none"><code class="language-none">sudo mkdir -p &#x2F;etc&#x2F;dockersudo tee &#x2F;etc&#x2F;docker&#x2F;daemon.json &lt;&lt;-&#39;EOF&#39;&#123;  &quot;registry-mirrors&quot;: [&quot;https:&#x2F;&#x2F;znrurdgu.mirror.aliyuncs.com&quot;]&#125;EOFsudo systemctl daemon-reloadsudo systemctl restart docker<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-å®‰è£…-nvidia-docker"><a href="#2-å®‰è£…-nvidia-docker" class="headerlink" title="2.å®‰è£… nvidia-docker"></a>2.å®‰è£… nvidia-docker</h2><p>docker é»˜è®¤æ˜¯ä¸æ”¯æŒåœ¨å®¹å™¨å†… GPU åŠ é€Ÿçš„ï¼ŒNVIDIA å®˜æ–¹åšäº†ä¸ªå·¥å…·ç®±æ¥æ”¯æŒå®¹å™¨å†… GPU åŠ é€Ÿè¿ç®—ï¼Œè¿™å¤§å¤§æ–¹ä¾¿äº†æ·±åº¦å­¦ä¹ å¼€å‘è€…ã€‚</p><p>å®˜æ–¹æ•™ç¨‹ï¼š<a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html#installing-on-ubuntu-and-debian">ç‚¹æˆ‘æŸ¥çœ‹</a></p><p>å‚è€ƒæ•™ç¨‹ï¼š<a href="https://blog.csdn.net/zhouchen1998/article/details/110679750">ç‚¹æˆ‘æŸ¥çœ‹</a></p><p>ä¾æ¬¡æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯ï¼š</p><pre class="line-numbers language-none"><code class="language-none">distribution&#x3D;$(. &#x2F;etc&#x2F;os-release;echo $ID$VERSION_ID) \   &amp;&amp; curl -s -L https:&#x2F;&#x2F;nvidia.github.io&#x2F;nvidia-docker&#x2F;gpgkey | sudo apt-key add - \   &amp;&amp; curl -s -L https:&#x2F;&#x2F;nvidia.github.io&#x2F;nvidia-docker&#x2F;$distribution&#x2F;nvidia-docker.list | sudo tee &#x2F;etc&#x2F;apt&#x2F;sources.list.d&#x2F;nvidia-docker.listcurl -s -L https:&#x2F;&#x2F;nvidia.github.io&#x2F;nvidia-container-runtime&#x2F;experimental&#x2F;$distribution&#x2F;nvidia-container-runtime.list | sudo tee &#x2F;etc&#x2F;apt&#x2F;sources.list.d&#x2F;nvidia-container-runtime.listsudo apt-get updatesudo apt-get install -y nvidia-docker2sudo systemctl restart docker<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-æ‹‰å–cudaã€cudnnçš„é•œåƒ"><a href="#3-æ‹‰å–cudaã€cudnnçš„é•œåƒ" class="headerlink" title="3.æ‹‰å–cudaã€cudnnçš„é•œåƒ"></a>3.æ‹‰å–cudaã€cudnnçš„é•œåƒ</h2><p>docker hubåœ°å€ï¼š<a href="https://hub.docker.com/r/nvidia/cuda">ç‚¹æˆ‘æŸ¥çœ‹</a></p><p>å®˜ç½‘ç»™å‡ºå¤šä¸ªç‰ˆæœ¬å¯ä¾›æ‹‰å–ï¼Œè¿™é‡Œä½¿ç”¨cuda:10.0-cudnn7-devel-ubuntu16.04</p><pre class="line-numbers language-none"><code class="language-none">docker pull nvidia&#x2F;cuda:10.0-cudnn7-devel-ubuntu16.04<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="4-æ–°å»ºå®¹å™¨"><a href="#4-æ–°å»ºå®¹å™¨" class="headerlink" title="4.æ–°å»ºå®¹å™¨"></a>4.æ–°å»ºå®¹å™¨</h2><p>å®¹å™¨ä¸é•œåƒçš„å…³ç³»å¥½æ¯”ï¼šé•œåƒä¸ºC++ä¸­çš„ç±»ï¼Œè€Œå®¹å™¨ä¸ºé•œåƒçš„å®ä¾‹è¯ï¼Œè¿™é‡ŒåŸºäºæ‹‰å»çš„cuda:10.0-cudnn7-devel-ubuntu16.04é•œåƒåˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨å¹¶è¿›å…¥å®¹å™¨ä¸­ï¼š</p><pre class="line-numbers language-none"><code class="language-none">docker container run --name pytorch1.1-gpu -it --gpus all  nvidia&#x2F;cuda:10.0-cudnn7-devel-ubuntu16.04 &#x2F;bin&#x2F;bash<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è§£é‡Šï¼š</p><ul><li>docker container runï¼šå®¹å™¨å¯åŠ¨å‘½ä»¤ï¼ŒåŒæ—¶ä¼šæ–°å»ºä¸€ä¸ªå®¹å™¨ï¼Œå› æ­¤è¯¥å‘½ä»¤æ˜¯åœ¨æ–°å»ºå®¹å™¨æ—¶ä½¿ç”¨</li><li>â€“name ï¼šåçš„å‚æ•°ä¸ºæ–°å»ºå®¹å™¨çš„åç§°</li><li>-itï¼šå…¶å®æ˜¯ -i -t çš„ç¼©å†™ï¼Œè¯¥å‚æ•°ä½¿å¾—å®¹å™¨å…·å¤‡äº¤äº’æ€§å¹¶ä¸ç»ˆç«¯è¿›è¡Œè¿æ¥ï¼Œå°†shellåˆ‡æ¢è‡³ç»ˆç«¯</li><li>â€“gpu allï¼šè¡¨ç¤ºå…è®¸å®¹å™¨ä½¿ç”¨å®¿ä¸»æœºçš„æ‰€æœ‰GPU</li><li>nvidia&#x2F;cuda:10.0-cudnn7-devel-ubuntu16.04ï¼šåˆ›å»ºæ–°çš„å®¹å™¨æ‰€åŸºäºçš„é•œåƒåç§°</li><li>&#x2F;bin&#x2F;bashï¼šæŒ‡å®šåœ¨å®¹å™¨å†…éƒ¨è¿è¡Œçš„è¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹æ˜¯é€šè¿‡docker container runå‘½ä»¤æ¥é€šçŸ¥å®¹å™¨è¿è¡Œçš„</li></ul><p>ä»¥è¯¥å‘½ä»¤åˆ›å»ºå¹¶è¿›å…¥å®¹å™¨åï¼Œè¯¥å®¹å™¨å°±å…·æœ‰äº†nvidia&#x2F;cuda:10.0-cudnn7-devel-ubuntu16.04é•œåƒçš„é…ç½®ï¼Œç›¸å½“äºå®ç°äº†â€œå®ä¾‹è¯â€</p><p>é€€å‡ºè¯¥å®¹å™¨åï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡ŒæŸ¥çœ‹ï¼š</p><ul><li>æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼š</li></ul><pre class="line-numbers language-none"><code class="language-none">docker container ls<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>æŸ¥çœ‹å®¹å™¨è¿è¡Œå†å²ï¼š</li></ul><pre class="line-numbers language-none"><code class="language-none">docker container ls -a<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™é‡Œå¯ä»¥çœ‹åˆ°åˆšæ‰è¿è¡Œçš„å®¹å™¨pytorch1.1-gpuçš„ä¿¡æ¯ã€‚</p><h3 id="4-1-é‡å¯å®¹å™¨"><a href="#4-1-é‡å¯å®¹å™¨" class="headerlink" title="4.1.é‡å¯å®¹å™¨"></a>4.1.é‡å¯å®¹å™¨</h3><p>docker container start + å®¹å™¨åæˆ–å®¹å™¨IDï¼Œå¯åŠ¨ä¸€ä¸ªå·²ç»å®Œæˆåˆ›å»ºå¹¶åœæ­¢è¿è¡Œçš„å®¹å™¨ï¼š</p><pre class="line-numbers language-none"><code class="language-none">docker container start pytorch1.1-gpu<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼š</p><pre class="line-numbers language-none"><code class="language-none">docker container ls<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>docker container exec   å‘½ä»¤ç”¨äºè¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼š</p><pre class="line-numbers language-none"><code class="language-none">docker container exec -it pytorch1.1-gpu &#x2F;bin&#x2F;bash<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="4-2åœæ­¢å®¹å™¨"><a href="#4-2åœæ­¢å®¹å™¨" class="headerlink" title="4.2åœæ­¢å®¹å™¨"></a>4.2åœæ­¢å®¹å™¨</h3><p>docker container stop   ç”¨äºåœæ­¢æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼š</p><pre class="line-numbers language-none"><code class="language-none">docker container stop pytorch1.1-gpu<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="4-3åˆ é™¤å®¹å™¨"><a href="#4-3åˆ é™¤å®¹å™¨" class="headerlink" title="4.3åˆ é™¤å®¹å™¨"></a>4.3åˆ é™¤å®¹å™¨</h3><pre class="line-numbers language-none"><code class="language-none">docker container rm  å¾…åˆ é™¤çš„å®¹å™¨å‘½ä»¤æˆ–ID<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ³¨æ„ï¼šåˆ é™¤å®¹å™¨ä¹‹å‰éœ€è¦åœæ­¢å®¹å™¨ï¼Œé¿å…æŠ¥é”™ã€‚</p><h2 id="5-å®‰è£…å¸¸ç”¨å·¥å…·"><a href="#5-å®‰è£…å¸¸ç”¨å·¥å…·" class="headerlink" title="5.å®‰è£…å¸¸ç”¨å·¥å…·"></a>5.å®‰è£…å¸¸ç”¨å·¥å…·</h2><pre class="line-numbers language-none"><code class="language-none"># å®‰è£…gitapt-get install git -y# å®‰è£…vimapt install vim# å®‰è£…cmakeapt install cmake# å®‰è£…updatedbapt-get install mlocate# å®‰è£…wgetapt-get install wget# å®‰è£…curlapt-get install curl<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="6-åœ¨å®¹å™¨ä¸­å®‰è£…python"><a href="#6-åœ¨å®¹å™¨ä¸­å®‰è£…python" class="headerlink" title="6.åœ¨å®¹å™¨ä¸­å®‰è£…python"></a>6.åœ¨å®¹å™¨ä¸­å®‰è£…python</h2><p>æ–°å»ºçš„å®¹å™¨é»˜è®¤æ²¡æœ‰pythonæˆ–pipã€vimç­‰å·¥å…·ï¼Œé™¤éæ–°å»ºå®¹å™¨æ—¶å°†è¿™äº›åŒ…ä¸€å¹¶è£…å…¥ï¼Œå› æ­¤éœ€è¦æ‰‹åŠ¨å®‰è£…ä¸€äº›éœ€è¦çš„åŒ…ã€‚æ–°çš„å®¹å™¨ä¸­ apt-get æˆ– apt å‘½ä»¤æ˜¯å¯ä»¥ä½¿ç”¨çš„ï¼š</p><p>å‚è€ƒç½‘ç«™ï¼š<a href="https://www.digitalocean.com/community/questions/unable-to-install-pyhton-3-7-version-on-ubuntu-16-04-error-couldn-t-find-any-package-by-regex-python3-7">ç‚¹æˆ‘æŸ¥çœ‹</a></p><pre class="line-numbers language-none"><code class="language-none">#æ›´æ–°æºapt update#å®‰è£…pythonä¾èµ–apt install software-properties-common#æ·»åŠ æºadd-apt-repository ppa:deadsnakes&#x2F;ppa#æ›´æ–°æºapt update#å®‰è£…pythonapt install python3.7#æŸ¥çœ‹pythonç‰ˆæœ¬python --version æˆ– python -Vpython3 --version æˆ– python3 -V<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®‰è£…å®Œpython3.7å¯èƒ½éœ€è¦ä¿®æ”¹é»˜è®¤pythonæŒ‡å‘æ‰èƒ½æ­£å¸¸ä½¿ç”¨python3.7ï¼š</p><p>å‚è€ƒç½‘ç«™ï¼š<a href="https://blog.csdn.net/qq_33188180/article/details/109723636">ç‚¹æˆ‘æŸ¥çœ‹</a></p><p>æŸ¥çœ‹é»˜è®¤pythonæŒ‡å‘ï¼š</p><pre class="line-numbers language-none"><code class="language-none">ls -l &#x2F;usr&#x2F;bin | grep python <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åˆ é™¤åŸæœ‰pythonè½¯è¿æ¥ï¼š</p><pre class="line-numbers language-none"><code class="language-none">rm &#x2F;usr&#x2F;bin&#x2F;python<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å»ºç«‹pythonåˆ°æ–°çš„è½¯é“¾æ¥python3.7ï¼š</p><pre class="line-numbers language-none"><code class="language-none">ln -s &#x2F;usr&#x2F;bin&#x2F;python3.7  &#x2F;usr&#x2F;bin&#x2F;python<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="7-åœ¨å®¹å™¨ä¸­å®‰è£…pip"><a href="#7-åœ¨å®¹å™¨ä¸­å®‰è£…pip" class="headerlink" title="7.åœ¨å®¹å™¨ä¸­å®‰è£…pip"></a>7.åœ¨å®¹å™¨ä¸­å®‰è£…pip</h2><p>è¿™é‡Œä¹Ÿæœ‰ä¸ªå°å‘ï¼å¦‚æœä½ å†™çš„æ˜¯python3-pip æ‰§è¡Œå®‰è£…åï¼Œå¦‚æœç³»ç»Ÿè‡ªå¸¦äº†python3.5ï¼Œå…¶å®pipè¿™æ—¶æ˜¯è£…åœ¨äº†python3.5ç¯å¢ƒä¸‹äº†ï¼ï¼æ­£ç¡®çš„æŒ‡å®šæ–¹å¼ï¼Œåº”è¯¥æŠŠå°ç‰ˆæœ¬å·ä¹ŸåŠ ä¸Šï¼</p><pre class="line-numbers language-none"><code class="language-none">apt-get install python3.7-pip<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä½†æ˜¯æ‰§è¡Œä¸Šè¿°å‘½ä»¤å¯èƒ½ä¼šæŠ¥é”™ï¼Œå¦‚æœæŠ¥é”™éœ€è¦å®‰è£…ä¸‹é¢çš„æ–¹æ³•æ·»åŠ pipå®‰è£…æºï¼š</p><pre class="line-numbers language-none"><code class="language-none">curl https:&#x2F;&#x2F;bootstrap.pypa.io&#x2F;get-pip.py -o get-pip.py<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç”±äºä¸Šé¢å·²ç»å°†pythonæŒ‡å‘äº†python3ï¼Œå› æ­¤ä¸‹é¢ç›´æ¥ä½¿ç”¨pythonå®‰è£…å³å¯ï¼Œå¦è€…è¦ä½¿ç”¨python3å®‰è£…ï¼š</p><pre class="line-numbers language-none"><code class="language-none">python get-pip.py --force-reinstall<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æŸ¥çœ‹pipä½ç½®ï¼š</p><pre class="line-numbers language-none"><code class="language-none">which pip<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æˆ‘åœ¨å®‰è£…åæ˜¾ç¤ºå®‰è£…åœ¨ï¼š&#x2F;usr&#x2F;local&#x2F;bin&#x2F;pip</p><p>å»ºç«‹pipè½¯é“¾æ¥ï¼š</p><pre class="line-numbers language-none"><code class="language-none">ln -s &#x2F;usr&#x2F;local&#x2F;bin&#x2F;pip &#x2F;usr&#x2F;bin&#x2F;pip<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ³¨æ„ï¼šç¬¬ä¸€ä¸ªåœ°å€  &#x2F;usr&#x2F;local&#x2F;bin&#x2F;pip  ä¸º  which pip  çš„æ˜¾ç¤ºåœ°å€</p><p>æŸ¥çœ‹pipç‰ˆæœ¬ï¼š</p><pre class="line-numbers language-none"><code class="language-none">pip -V æˆ– pip --version<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æˆ‘çš„æ˜¾ç¤ºä½ç½®ä¸ºï¼špip 20.3.4 from &#x2F;usr&#x2F;local&#x2F;lib&#x2F;python3.7&#x2F;dist-packages&#x2F;pip (python 3.7)</p><p>è‡³æ­¤ï¼Œpythonå°†æŒ‡å‘python3.7ï¼Œpipå°†æŒ‡å‘python 3.7çš„pip 20.3.4ï¼Œå®ç°pythonå’Œpipçš„ç‰ˆæœ¬å¯¹åº”ï¼Œä¸”ç›®æ ‡å®¹å™¨å†…äºŒè€…éƒ½æ˜¯å”¯ä¸€å­˜åœ¨ï¼Œä¸éœ€è¦å†ä½¿ç”¨python3å’Œpip3è°ƒç”¨python3çš„å¯¹åº”ç‰ˆæœ¬ï¼Œè¿™æ ·ä½¿ç”¨pipå®‰è£…çš„åŒ…å°†é»˜è®¤å­˜æ”¾åœ¨  &#x2F;usr&#x2F;local&#x2F;lib&#x2F;python3.7&#x2F;dist-packages  ä¸­ã€‚</p><h2 id="8-å®‰è£…PyTorch"><a href="#8-å®‰è£…PyTorch" class="headerlink" title="8.å®‰è£…PyTorch"></a>8.å®‰è£…PyTorch</h2><p>æœ€æ–°ç‰ˆæœ¬å®‰è£…æ–¹æ³•ï¼š<a href="https://pytorch.org/get-started/locally/">ç‚¹æˆ‘æŸ¥çœ‹</a></p><p>å†å²ç‰ˆæœ¬å®‰è£…æ–¹æ³•ï¼š<a href="https://pytorch.org/get-started/previous-versions/">ç‚¹æˆ‘æŸ¥çœ‹</a></p><pre class="line-numbers language-none"><code class="language-none">pip install torch&#x3D;&#x3D;1.1.0 torchvision&#x3D;&#x3D;0.3.0<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="9-å®‰è£…eigen3"><a href="#9-å®‰è£…eigen3" class="headerlink" title="9.å®‰è£…eigen3"></a>9.å®‰è£…eigen3</h2><p>å‚è€ƒç½‘å€ï¼š<a href="https://blog.csdn.net/xiangxianghehe/article/details/81236299?utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-4.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-4.control">ç‚¹æˆ‘æŸ¥çœ‹</a></p><h3 id="9-1å®‰è£…ä¾èµ–"><a href="#9-1å®‰è£…ä¾èµ–" class="headerlink" title="9.1å®‰è£…ä¾èµ–"></a>9.1å®‰è£…ä¾èµ–</h3><pre class="line-numbers language-none"><code class="language-none">apt-get install libopenblas-devapt-get install --no-install-recommends libboost1.58-all-devapt-get install libx11-devapt-get install libgl1-mesa-dev apt-get install libglu1-mesa-dev apt-get install freeglut3-devapt-get install doxygenwget https:&#x2F;&#x2F;nchc.dl.sourceforge.net&#x2F;project&#x2F;glew&#x2F;glew&#x2F;2.1.0&#x2F;glew-2.1.0.tgz --no-check-certificatetar -xzvf glew-2.1.0.tgzcd glew-2.1.0&#x2F;make make installldconfig -v<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="9-2å®‰è£…Eigen3-3-5"><a href="#9-2å®‰è£…Eigen3-3-5" class="headerlink" title="9.2å®‰è£…Eigen3.3.5"></a>9.2å®‰è£…Eigen3.3.5</h3><pre class="line-numbers language-none"><code class="language-none">wget https:&#x2F;&#x2F;github.com&#x2F;eigenteam&#x2F;eigen-git-mirror&#x2F;archive&#x2F;3.3.5.tar.gztar -xzvf 3.3.5.tar.gz mv eigen-git-mirror-3.3.5&#x2F; eigen-3.3.5&#x2F;cd eigen-3.3.5&#x2F;mkdir buildcd buildcmake ..makemake install ldconfig -v<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="9-3æµ‹è¯•"><a href="#9-3æµ‹è¯•" class="headerlink" title="9.3æµ‹è¯•"></a>9.3æµ‹è¯•</h3><p>åœ¨å®¹å™¨ä¸­åˆ›å»ºæµ‹è¯•æ–‡ä»¶å¤¹ï¼š</p><pre class="line-numbers language-none"><code class="language-none">mkdir install_test<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨å®¿ä¸»æœºä¸Šåˆ›å»ºå¦‚ä¸‹æ–‡ä»¶ï¼š</p><ul><li>CMakeLists.txt</li></ul><pre class="line-numbers language-none"><code class="language-none">cmake_minimum_required( VERSION 2.8 )project(useEigen)set( CMAKE_BUILD_TYPE &quot;Release&quot; )set( CMAKE_CXX_FLAGS &quot;-O3&quot; )set( CMAKE_CXX_FLAGS &quot;-std&#x3D;c++11&quot;)# æ·»åŠ Eigenå¤´æ–‡ä»¶include_directories( &quot;&#x2F;usr&#x2F;local&#x2F;include&#x2F;eigen3&quot; )add_executable(useEigen  main.cpp)find_package(Eigen3 REQUIRED)target_link_libraries($&#123;PROJECT_NAME&#125;  $&#123;EIGEN3_LIBS&#125;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>main.cpp</li></ul><pre class="line-numbers language-none"><code class="language-none">#include &lt;iostream&gt;#include &lt;fstream&gt;#include &lt;vector&gt;#include &lt;Eigen&#x2F;Core&gt;#include &lt;Eigen&#x2F;Dense&gt;#include &lt;Eigen&#x2F;Geometry&gt;#include &lt;Eigen&#x2F;StdVector&gt;using namespace std;int main()&#123;    &#x2F;&#x2F;1.rotation vector to  rotation matrix    Eigen::AngleAxisd rotationVector(M_PI&#x2F;4,Eigen::Vector3d(0,0,1));    Eigen::Matrix3d rotationMatrix&#x3D;Eigen::Matrix3d::Identity();    rotationMatrix&#x3D;rotationVector.toRotationMatrix();    cout&lt;&lt;&quot;rotationMatrix \n&quot;&lt;&lt;rotationMatrix&lt;&lt;endl;    &#x2F;&#x2F;2.rotation vector to quaterniond    Eigen::Quaterniond q&#x3D;Eigen::Quaterniond( rotationVector );    cout&lt;&lt;&quot;rotation quaternion \n&quot;&lt;&lt;q.coeffs()&lt;&lt;endl;    &#x2F;&#x2F;3.rotaion vector to eulerAngles    Eigen::Vector3d eulerAngle&#x3D;rotationVector.matrix().eulerAngles(0,1,2);    cout&lt;&lt;&quot;eulerAngle roll pitch yaw\n&quot;&lt;&lt;180*eulerAngle&#x2F;M_PI&lt;&lt;endl;    return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å°†å®¿ä¸»æœºä¸Šçš„ä¸¤ä¸ªæ–‡ä»¶æ‹·è´è‡³å®¹å™¨ä¸­çš„install_testé‡Œè¿›è¡Œæµ‹è¯•ï¼š</p><pre class="line-numbers language-none"><code class="language-none">docker cp CMakeLists.txt pytorch1.1-gpu:&#x2F;home&#x2F;eigen-3.3.5&#x2F;install_testdocker cp main.cpp  pytorch1.1-gpu:&#x2F;home&#x2F;eigen-3.3.5&#x2F;install_test<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æµ‹è¯•ï¼š</p><pre class="line-numbers language-none"><code class="language-none">cd install_testcmake  .make.&#x2F;useEigen<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è‹¥æ˜¾ç¤ºç»“æœå¦‚ä¸‹ï¼Œåˆ™è¯´æ˜æµ‹è¯•æˆåŠŸã€‚</p><pre class="line-numbers language-none"><code class="language-none">rotationMatrix  0.707107 -0.707107         0 0.707107  0.707107         0        0         0         1rotation quaternion        0       00.382683 0.92388eulerAngle roll pitch yaw-0 045<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="10-å®‰è£…tensorflow"><a href="#10-å®‰è£…tensorflow" class="headerlink" title="10.å®‰è£…tensorflow"></a>10.å®‰è£…tensorflow</h2><ul><li>tensorflowä¸cudaçš„ç‰ˆæœ¬å¯¹åº”å…³ç³»</li></ul><p><img src="https://i.loli.net/2021/05/21/PEoKmlhbcXisCWt.png"></p><p>å®‰è£…å‘½ä»¤ï¼š</p><pre class="line-numbers language-none"><code class="language-none">pip install tensorflow-gpu&#x3D;&#x3D;2.0 -i http:&#x2F;&#x2F;pypi.douban.com&#x2F;simple --trusted-host pypi.douban.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> docker </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu16-04-LTSï¼šanaconda3å®‰è£…</title>
      <link href="/2022/11/23/ubuntu16-04-lts-anaconda3-an-zhuang/"/>
      <url>/2022/11/23/ubuntu16-04-lts-anaconda3-an-zhuang/</url>
      
        <content type="html"><![CDATA[<h1 id="1-ä¸‹è½½æ¸…åæºé•œåƒæ–‡ä»¶"><a href="#1-ä¸‹è½½æ¸…åæºé•œåƒæ–‡ä»¶" class="headerlink" title="1. ä¸‹è½½æ¸…åæºé•œåƒæ–‡ä»¶"></a>1. ä¸‹è½½æ¸…åæºé•œåƒæ–‡ä»¶</h1><p>ç½‘å€ï¼š<a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/">https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/</a></p><p>ç‰ˆæœ¬ï¼šå»ºè®®å®‰è£…Anaconda3-5.2.0-Linux-x86_64.sh</p><h1 id="2-è¿›å…¥ä¸‹è½½ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…"><a href="#2-è¿›å…¥ä¸‹è½½ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…" class="headerlink" title="2. è¿›å…¥ä¸‹è½½ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…"></a>2. è¿›å…¥ä¸‹è½½ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…</h1><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">bash Anaconda3<span class="token operator">-</span><span class="token number">5.2</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token operator">-</span>Linux<span class="token operator">-</span>x86_64<span class="token punctuation">.</span>sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://i.loli.net/2021/05/16/9curYTMUWmveogb.png"></p><ul><li>ä¸€è·¯æŒ‰å›è½¦è‡³åº•éƒ¨ï¼Œå‡ºç°æç¤ºï¼šæ˜¯å¦æ¥å—å®‰è£…åè®®æ—¶ï¼šå›å¤yes:</li></ul><p><img src="https://i.loli.net/2021/05/16/JU2iRojd3vH4fsY.png"></p><ul><li>é»˜è®¤çš„è·¯å¾„ä¸º&#x2F;home&#x2F;username&#x2F;anaconda3ï¼Œé»˜è®¤çš„è¯ç›´æ¥æŒ‰ENTERå³å¯ï¼Œç­‰å¾…å®‰è£…è¿‡ç¨‹å®Œæˆå³å¯ã€‚</li></ul><p><img src="https://i.loli.net/2021/05/16/iVDa14zUNREPYKs.png"></p><ul><li>è¯¢é—®æ˜¯å¦å°†Anaconda3åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œé€‰ï¼šyes</li></ul><p><img src="https://i.loli.net/2021/05/16/DBj5P8VMTzgYu2s.png"></p><ul><li>é»˜è®¤çš„è¯ç›´æ¥æŒ‰ENTERå³å¯ï¼Œç­‰å¾…å®‰è£…è¿‡ç¨‹å®Œæˆå³å¯ã€‚</li></ul><h1 id="3-æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ"><a href="#3-æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ" class="headerlink" title="3.æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ"></a>3.æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ</h1><p>  ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹å·²ç»å­˜åœ¨çš„condaè™šæ‹Ÿç¯å¢ƒ</p>  <pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">conda env list<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>  ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹condaçš„è·¯å¾„æ˜¯å¦æ·»åŠ æˆåŠŸ</p>  <pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">sudo gedit <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>bashrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>  ä½¿å…¶ç«‹å³ç”Ÿæ•ˆï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œï¼š</p>  <pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">source <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>bashrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>  <strong>4.è¿›å…¥ä»»æ„ä¸€ä¸ªåˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒé‡Œé¢æ£€æŸ¥python</strong></p><p>  åœ¨è™šæ‹Ÿç¯å¢ƒä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p>  <pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">python<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>  ä¼šå‡ºç°ç±»ä¼¼ä»¥ä¸‹å«æœ‰anacondaçš„å­—æ ·ï¼š</p>  <pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">Python <span class="token number">3.6</span><span class="token punctuation">.</span><span class="token number">5</span> <span class="token operator">|</span>Anaconda<span class="token punctuation">,</span> Inc<span class="token punctuation">.</span><span class="token operator">|</span> <span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">,</span> Apr <span class="token number">29</span> <span class="token number">2018</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">14</span><span class="token operator">:</span><span class="token number">56</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>GCC <span class="token number">7.2</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token punctuation">]</span> on linuxType <span class="token string">"help"</span><span class="token punctuation">,</span> <span class="token string">"copyright"</span><span class="token punctuation">,</span> <span class="token string">"credits"</span> <span class="token operator">or</span> <span class="token string">"license"</span> <span class="token keyword">for</span> more information<span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>  å¦‚æœæ²¡æœ‰å‡ºç°ä»¥ä¸‹å­—æ ·ï¼Œè¯´æ˜ç³»ç»Ÿçš„pythonç‰ˆæœ¬éœ€è¦æŒ‡å®šï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p>  <pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">sudo gedit <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>bashrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>  åœ¨bashrcä¸­æ·»åŠ ä¸€è¡Œï¼š</p>  <pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">alias python<span class="token operator">=</span>python3<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>  (æ³¨æ„è¿™é‡Œçš„python3æ˜¯å’Œå®‰è£…çš„anaconda3å¯¹åº”çš„é»˜è®¤pyrhonå¯¹åº”çš„ï¼Œå¯ä»¥åœ¨condaè™šæ‹Ÿç¯å¢ƒä¸­çš„baseç¯å¢ƒä¸­æŸ¥çœ‹å¯¹åº”çš„pythonç‰ˆæœ¬)</p><p>  ç„¶åæ¿€æ´»bashrc</p>  <pre class="line-numbers language-none"><code class="language-none">source ~&#x2F;.bashrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>  è¿™æ ·å°±å¯ä»¥ä½¿ç”¨condaåˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒå¯¹åº”çš„pythonã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> anaconda </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu16-04æ‰‹åŠ¨å®‰è£…è‹±ä¼Ÿè¾¾æ˜¾å¡é©±åŠ¨</title>
      <link href="/2022/11/23/ubuntu16-04-shou-dong-an-zhuang-ying-wei-da-xian-qia-qu-dong/"/>
      <url>/2022/11/23/ubuntu16-04-shou-dong-an-zhuang-ying-wei-da-xian-qia-qu-dong/</url>
      
        <content type="html"><![CDATA[<h2 id="1-å±è”½å¼€æºé©±åŠ¨"><a href="#1-å±è”½å¼€æºé©±åŠ¨" class="headerlink" title="1.å±è”½å¼€æºé©±åŠ¨"></a>1.å±è”½å¼€æºé©±åŠ¨</h2><p>å±è”½å¼€æºé©±åŠ¨nouveauå®‰è£…è¿‡ç¨‹ä¼šè¯¢é—®æ˜¯å¦å±è”½ï¼Œæ‰‹åŠ¨å±è”½ä¹Ÿæœ‰å¤šç§æ“ä½œæ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> gedit /etc/modprobe.d/blacklist.conf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç„¶åæ·»åŠ å†…å®¹åˆ°æœ€åº•æ®µï¼Œè¦å›è½¦å¦èµ·ä¸€è¡Œã€‚æ·»åŠ çš„å†…å®¹ä¸ºï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">blacklist nouveau options nouveau <span class="token assign-left variable">modeset</span><span class="token operator">=</span><span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¿å­˜å†ç»ˆç«¯æ›´æ–°å†…æ ¸å‘½ä»¤ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> update-initramfs <span class="token parameter variable">-u</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹è­¦å‘Šï¼Œå¿½ç•¥å³å¯ï¼š</p><img src="https://i.loli.net/2021/06/22/lkPBpOvA3MIsfXq.png" style="zoom:50%;" /><h2 id="2-ä¸‹è½½é©±åŠ¨"><a href="#2-ä¸‹è½½é©±åŠ¨" class="headerlink" title="2.ä¸‹è½½é©±åŠ¨"></a>2.ä¸‹è½½é©±åŠ¨</h2><p>ç„¶åï¼Œé‡å¯ç”µè„‘ã€‚ä¸‹è½½NVIDIAçš„é©±åŠ¨å½¢å¦‚ï¼šNVIDIA-Linux-x86_64-384.run ä¸‹è½½ç½‘å€ä¸ºï¼š<a href="https://www.geforce.cn/drivers%E3%80%82">https://www.geforce.cn/driversã€‚</a></p><p>åœ¨win10ä¸‹çš„è®¾å¤‡ç®¡ç†å™¨ä¸­å¯ä»¥æŸ¥çœ‹æ˜¾å¡çš„å‹å·ã€‚å‹å·ä¸ºï¼šNVIDIA GeForce GTX 1050 Tiç”µè„‘ç±»å‹ä¸ºï¼šç¬”è®°æœ¬</p><p>æ‰€ä»¥æ‰‹åŠ¨æœç´¢é©±åŠ¨ç¨‹åºæ—¶ï¼Œåº”è¯¥è¿™æ ·é€‰æ‹©ï¼š</p><p><img src="https://i.loli.net/2021/06/22/S69TiRpgEc3ydPk.png"></p><p>é€‰æ‹©ç¬¬ä¸€ä¸ªé©±åŠ¨ç‰ˆæœ¬ä¸€èˆ¬å¯ä»¥å®‰è£…æˆåŠŸçš„ï¼Œä½†ä¸åŒç”µè„‘å¯èƒ½ç»“æœä¸åŒï¼Œå®‰è£…å¤±è´¥çš„è¯è¿˜éœ€è¦æ›´æ¢ç‰ˆæœ¬å°è¯•å®‰è£…ã€‚</p><p>ä¸‹å¥½çš„â€.runâ€æ–‡ä»¶æ”¾åœ¨home ï¼Œç›®å½•ä¸‹ï¼Œæœ€å¥½å°†æ–‡ä»¶åç§°è¯¥ä¸ºç®€å•ç‚¹çš„ã€‚</p><h2 id="3-è¿›å…¥rootçš„å‘½ä»¤è¡Œæ¨¡å‹"><a href="#3-è¿›å…¥rootçš„å‘½ä»¤è¡Œæ¨¡å‹" class="headerlink" title="3.è¿›å…¥rootçš„å‘½ä»¤è¡Œæ¨¡å‹"></a>3.è¿›å…¥rootçš„å‘½ä»¤è¡Œæ¨¡å‹</h2><p>å®‰è£…é©±åŠ¨é‡å¯ç”µè„‘ï¼Œè¿›å…¥ubuntué«˜çº§æ¨¡å¼ï¼Œç„¶åé€‰æ‹©ä¸‹å›¾ä¸­çš„ root é€‰é¡¹ï¼š</p><img src="https://i.loli.net/2021/06/22/rnKMFl81T4giEUf.png" style="zoom:50%;" /><p>ç„¶åæŒ‰â€å›è½¦â€ï¼š</p><img src="https://i.loli.net/2021/06/22/I1ZeWDCaTcEx5X2.png" style="zoom:50%;" /><h2 id="4-å®‰è£…é©±åŠ¨"><a href="#4-å®‰è£…é©±åŠ¨" class="headerlink" title="4.å®‰è£…é©±åŠ¨"></a>4.å®‰è£…é©±åŠ¨</h2><p>ç„¶åï¼ŒæŒ‰â€å›è½¦â€ï¼Œè¿›å…¥ç³»ç»Ÿç›®å½•ã€‚å®‰è£…é©±åŠ¨ç¨‹åºï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> /home/ç”¨æˆ·å<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å…³é—­å½“å‰å›¾å½¢ç¯å¢ƒ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">service</span> lightdm stop<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å› ä¸ºä¹‹å‰çš„åç¼€ä¸ºâ€.runâ€çš„é©±åŠ¨æ–‡ä»¶æ”¾åœ¨homeç›®å½•ä¸‹ï¼Œæ‰€ä»¥ï¼Œ åˆ°é©±åŠ¨æ‰€åœ¨æ–‡ä»¶å¤¹å æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä¿®æ”¹æƒé™å¹¶è¿è¡Œï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">chmod</span> a+x NVIDIA-Linux-x86_64-xxx.run <span class="token function">sudo</span> <span class="token function">sh</span> NVIDIA-Linux-x86_64-xxx.run -no-opengl-files<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç„¶åå‰©ä½™æ­¥éª¤å‡ä¸ºé»˜è®¤å³å¯ï¼Œç›´æ¥å›è½¦æ‰§è¡Œä¸‹ä¸€æ­¥ã€‚</p><ul><li>æç¤ºâ€dkmsâ€å®‰è£…æ—¶ï¼Œéœ€è¦å®‰è£…ã€‚</li><li>ä¼šæç¤ºæœ‰â€32â€å­—æ ·ï¼Œé€‰æ‹©â€OKâ€ç»§ç»­å³å¯ã€‚</li></ul><p>æœ€åé‡æ–°å¯åŠ¨å›¾å½¢ç¯å¢ƒï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">service</span> lightdm start<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="5-æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ"><a href="#5-æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ" class="headerlink" title="5.æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ"></a>5.æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</h2><p>æ£€æŸ¥å®‰è£…æ˜¯å¦æˆåŠŸå¹¶é‡å¯ç”µè„‘ï¼Œæ­£å¸¸è¿›å…¥ç³»ç»Ÿã€‚</p><p>å¦‚æœå‡ºç°å¾ªç¯è¾“å…¥ç™»å½•å¯†ç ä½†æ˜¯æ— æ³•ç™»å½•æˆåŠŸçš„æƒ…å†µï¼Œåˆ™ä¸ºé©±åŠ¨ç‰ˆæœ¬å’Œè‡ªå·±çš„ç”µè„‘ä¸åŒ¹é…ï¼Œéœ€è¦ä¸‹è½½å…¶ä»–æ˜¾å¡é©±åŠ¨ç‰ˆæœ¬å°è¯•ã€‚</p><p>è¿›ä¸€æ­¥æ£€æŸ¥ï¼Œæ‰“å¼€ç»ˆç«¯è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nvidia-smi<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å‡ºç°å¦‚ä¸‹æ‰€ç¤ºä¿¡æ¯ï¼Œå³ä¸ºå®‰è£…æˆåŠŸ:</p><img src="https://i.loli.net/2021/06/22/gZB9FKjSl2T8wGV.png" style="zoom:50%;" />]]></content>
      
      
      <categories>
          
          <category> ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
            <tag> æ˜¾å¡é©±åŠ¨å®‰è£… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>win10ä¸ubuntu16-04-LTSåŒç³»ç»Ÿå®‰è£…æ•™ç¨‹</title>
      <link href="/2022/11/23/win10-yu-ubuntu16-04-lts-shuang-xi-tong-an-zhuang-jiao-cheng/"/>
      <url>/2022/11/23/win10-yu-ubuntu16-04-lts-shuang-xi-tong-an-zhuang-jiao-cheng/</url>
      
        <content type="html"><![CDATA[<h2 id="1-åˆ›å»ºç©ºé—²åˆ†åŒº"><a href="#1-åˆ›å»ºç©ºé—²åˆ†åŒº" class="headerlink" title="1.åˆ›å»ºç©ºé—²åˆ†åŒº"></a>1.åˆ›å»ºç©ºé—²åˆ†åŒº</h2><p>åœ¨winç³»ç»Ÿä¸‹ï¼Œåœ¨â€æ­¤ç”µè„‘â€â†’å³é”®â€ç®¡ç†â€œâ†’â€œç£ç›˜ç®¡ç†â€â†’å³é”®ä¸€ä¸ªä¸ç”¨çš„ç£ç›˜å¹¶â€æ ¼å¼åŒ–â€œâ†’â€åˆ é™¤å·â€œï¼Œåˆ†å‡ºä¸€ä¸ªçŠ¶æ€ä¸ºâ€œæœªåˆ†é…â€çš„ç£ç›˜ç”¨äºå®‰è£…ubuntu16.04 LTS</p><h2 id="2-å¼€å§‹å®‰è£…"><a href="#2-å¼€å§‹å®‰è£…" class="headerlink" title="2.å¼€å§‹å®‰è£…"></a>2.å¼€å§‹å®‰è£…</h2><p>æ’å…¥å…·æœ‰ubuntu16.04 LTSç³»ç»Ÿçš„Uç›˜å¼€å§‹å®‰è£…ç³»ç»Ÿ</p><ul><li>é€‰æ‹©ç³»ç»Ÿè¯­è¨€ï¼Œå¯ä»¥æ˜¯ä¸­æ–‡æˆ–è‹±æ–‡ã€‚å¦‚éœ€è¦å®‰è£…tensflowçš„è¯å»ºè®®å®‰è£…è‹±æ–‡ç‰ˆæœ¬</li><li>é€‰æ‹©å®‰è£…ç±»å‹ä¸ºå…¶å®ƒé€‰é¡¹</li></ul><img src="https://i.loli.net/2021/06/22/9FEvKkQmATYq7Ip.jpg" style="zoom: 67%;" /><h2 id="3-åŒå‡»ç©ºé—²ç›˜è¿›è¡Œåˆ†åŒº"><a href="#3-åŒå‡»ç©ºé—²ç›˜è¿›è¡Œåˆ†åŒº" class="headerlink" title="3.åŒå‡»ç©ºé—²ç›˜è¿›è¡Œåˆ†åŒº"></a>3.åŒå‡»ç©ºé—²ç›˜è¿›è¡Œåˆ†åŒº</h2><h3 id="3-1-x2F-bootåˆ†åŒº"><a href="#3-1-x2F-bootåˆ†åŒº" class="headerlink" title="3.1   &#x2F;bootåˆ†åŒº"></a>3.1   &#x2F;bootåˆ†åŒº</h3><p>&#x2F;bootï¼šè¿™ä¸ªå°±æ˜¯å®ç°ä½ åŒç³»ç»Ÿçš„åŸå› äº†ï¼Œè¿™ä¸ªå°±æ˜¯ç”¨äºå¯åŠ¨ ubuntu çš„ç›®å½•ï¼Œé‡Œé¢ä¼šæœ‰ç³»ç»Ÿçš„å¼•å¯¼ï¼Œè¿™ä¸ªæ–‡ä»¶å…¶å®åªæœ‰å‡ åå…†ï¼Œä½†æ˜¯æˆ‘ä»¬å»ºè®®å°†å…¶åˆ’åˆ†ä¸º 200M æ–‡ä»¶æ ¼å¼ä¸º ext4ï¼Œè¿™ä¸ªåˆ†åŒºå¿…ä¸å¯å°‘ï¼Œå¦åˆ™åæœä½ æ‡‚å¾—ï¼</p><h3 id="3-2-swapåˆ†åŒº"><a href="#3-2-swapåˆ†åŒº" class="headerlink" title="3.2   swapåˆ†åŒº"></a>3.2   swapåˆ†åŒº</h3><p>swap:è¿™ä¸ªæ˜¯ Linux ä¹Ÿå°±æ˜¯ ubuntu çš„äº¤æ¢åŒºç›®å½•ï¼Œè¿™ä¸ªä¸€èˆ¬çš„å¤§å°ä¸ºå†…å­˜çš„ 2 å€å·¦å³ï¼Œ ä¸»è¦æ˜¯ç”¨æ¥åœ¨ç”µè„‘å†…å­˜ä¸è¶³çš„æƒ…å†µä¸‹ï¼Œç³»ç»Ÿä¼šè°ƒç”¨è¿™ç‰‡åŒºåŸŸï¼Œæ¥è¿è¡Œç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åˆ†ä¸º 4Gï¼Œ è¿™ä¸ªæŠŠext4æ¢æˆäº¤æ¢ç©ºé—´ï¼Œè‹±æ–‡swap</p><h3 id="3-3-x2F-åˆ†åŒº"><a href="#3-3-x2F-åˆ†åŒº" class="headerlink" title="3.3    &#x2F;åˆ†åŒº"></a>3.3    &#x2F;åˆ†åŒº</h3><p>&#x2F;:è¿™æ˜¯ linux ä¹Ÿå°±æ˜¯ ubuntu çš„æ ¹ç›®å½•å°±ä¸€ä¸ªåæ–œæ è¡¨ç¤ºï¼Œç›¸å½“äºwindowsçš„Cç›˜ï¼Œ æˆ‘ä»¬å°†å…¶åˆ†ä¸º 10Gï¼Œæ–‡ä»¶æ ¼å¼ä¸º ext4ï¼Œæ¡ä»¶å…è®¸å¯ä»¥å¤§ä¸€ç‚¹ï¼Œå¯ä»¥20Gï¼Œæ¯•ç«Ÿubuntuè£…è½¯ä»¶é»˜è®¤æ˜¯è£…åœ¨è¿™é‡Œçš„ï¼Œå¤§ä¸€ç‚¹å¯èƒ½ä¼šçœå»åé¢éšè—çš„éº»çƒ¦ã€‚</p><h3 id="3-4-x2F-homeåˆ†åŒº"><a href="#3-4-x2F-homeåˆ†åŒº" class="headerlink" title="3.4   &#x2F;homeåˆ†åŒº"></a>3.4   &#x2F;homeåˆ†åŒº</h3><p>&#x2F;home:è¿™æ˜¯ ubuntu çš„â€œå…¶ä»–ç›˜â€ï¼Œ è¿™ä¸ªä¹Ÿå¯ä»¥è¯´æ˜¯æˆ‘ä»¬çš„ä¸ªäººç›®å½•ï¼Œç›¸å½“äºwindowsçš„å…¶ä»–ç›˜ï¼Œæ‰€ä»¥ä¸ºäº†è®©æˆ‘ä»¬è‡ªå·±çš„ç›®å½•å¤§ä¸€ç‚¹ï¼Œå‰©ä¸‹çš„å…¨åˆ†ç»™å®ƒï¼Œæ–‡ä»¶æ ¼å¼ä¸º ext4</p><img src="https://i.loli.net/2021/06/22/IZixlEy6FC8vRKn.png" style="zoom: 67%;" /><p>ä»¥ä¸Šä¸¤æ­¥æ–°å»ºåˆ†åŒºåçš„ç±»ä¼¼æ•ˆæœï¼š</p><img src="https://i.loli.net/2021/06/22/KxGUtJWhYPMRS3p.png" style="zoom:67%;" /><h2 id="4-é€‰æ‹©å®‰è£…å¯åŠ¨å¼•å¯¼çš„è®¾å¤‡"><a href="#4-é€‰æ‹©å®‰è£…å¯åŠ¨å¼•å¯¼çš„è®¾å¤‡" class="headerlink" title="4.é€‰æ‹©å®‰è£…å¯åŠ¨å¼•å¯¼çš„è®¾å¤‡"></a>4.é€‰æ‹©å®‰è£…å¯åŠ¨å¼•å¯¼çš„è®¾å¤‡</h2><p>å®‰è£…å¯åŠ¨å¼•å¯¼çš„è®¾å¤‡ï¼šwindows boot manager</p><img src="https://i.loli.net/2021/06/22/v2JbClS7IwjU46a.png" style="zoom:50%;" /><h2 id="5-è‡ªåŠ¨å®‰è£…"><a href="#5-è‡ªåŠ¨å®‰è£…" class="headerlink" title="5.è‡ªåŠ¨å®‰è£…"></a>5.è‡ªåŠ¨å®‰è£…</h2><img src="https://i.loli.net/2021/06/22/oMECN25eyXsIAKS.jpg" style="zoom: 50%;" /><img src="https://i.loli.net/2021/06/22/T7CP1BcVWb9wxIR.jpg" style="zoom:50%;" /><p>å®‰è£…å®Œæˆåå¯èƒ½æ˜¾ç¤ºç”»é¢æ¨¡ç³Šï¼Œè¿™æ˜¯å› ä¸ºæ²¡æœ‰å®‰è£…æ˜¾å¡é©±åŠ¨ï¼Œå¯ä»¥æŒ‰ç…§æ•™ç¨‹â€Ubuntu16.04æ‰‹åŠ¨å®‰è£…è‹±ä¼Ÿè¾¾æ˜¾å¡é©±åŠ¨â€å®‰è£…å³å¯</p>]]></content>
      
      
      <categories>
          
          <category> ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹çœ¼æ ‡å®š-Ros-Kinetic-Realsense-D435-AUBOi5-Ubuntu-16-04</title>
      <link href="/2022/11/23/shou-yan-biao-ding-ros-kinetic-realsense-d435-auboi5-ubuntu-16-04/"/>
      <url>/2022/11/23/shou-yan-biao-ding-ros-kinetic-realsense-d435-auboi5-ubuntu-16-04/</url>
      
        <content type="html"><![CDATA[<h2 id="1-å®‰è£…AUBOi5çš„MoveitåŠŸèƒ½åŒ…"><a href="#1-å®‰è£…AUBOi5çš„MoveitåŠŸèƒ½åŒ…" class="headerlink" title="1.å®‰è£…AUBOi5çš„MoveitåŠŸèƒ½åŒ…"></a>1.å®‰è£…AUBOi5çš„MoveitåŠŸèƒ½åŒ…</h2><h3 id="1-1ç¯å¢ƒé…ç½®"><a href="#1-1ç¯å¢ƒé…ç½®" class="headerlink" title="1.1ç¯å¢ƒé…ç½®"></a>1.1ç¯å¢ƒé…ç½®</h3><p>ä¸‹è½½Move-it package</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> ros-kinetic-moveit<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¸‹è½½moveit_visual_tools</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> ros-kinetic-moveit-visual-tools<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¸‹è½½industrial_core package</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> ros-kinetic-industrial-core<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="1-2å»ºç«‹ROSå·¥ä½œç©ºé—´"><a href="#1-2å»ºç«‹ROSå·¥ä½œç©ºé—´" class="headerlink" title="1.2å»ºç«‹ROSå·¥ä½œç©ºé—´"></a>1.2å»ºç«‹ROSå·¥ä½œç©ºé—´</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">source</span> /opt/ros/kinetic/setup.bash<span class="token comment"># catkin_wsä¸ºå·¥ä½œç©ºé—´åç§°</span><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> ~/catkin_ws/src<span class="token builtin class-name">cd</span> ~/catkin_ws/catkin_make<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-2-åœ¨-x2F-catkin-ws-x2F-src-ç›®å½•ä¸­ä¸‹è½½MoveitåŠŸèƒ½åŒ…ï¼Œå¹¶ç¼–è¯‘"><a href="#1-2-åœ¨-x2F-catkin-ws-x2F-src-ç›®å½•ä¸­ä¸‹è½½MoveitåŠŸèƒ½åŒ…ï¼Œå¹¶ç¼–è¯‘" class="headerlink" title="1.2 åœ¨  ~&#x2F;catkin_ws&#x2F;src  ç›®å½•ä¸­ä¸‹è½½MoveitåŠŸèƒ½åŒ…ï¼Œå¹¶ç¼–è¯‘"></a>1.2 åœ¨  ~&#x2F;catkin_ws&#x2F;src  ç›®å½•ä¸­ä¸‹è½½MoveitåŠŸèƒ½åŒ…ï¼Œå¹¶ç¼–è¯‘</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> ~/catkin_ws/src<span class="token function">git</span> clone https://github.com/lg609/aubo_robot.git<span class="token builtin class-name">cd</span> ~/catkin_ws/catkin_make<span class="token builtin class-name">source</span> ~/catkin_ws/devel/setup.bash<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨é‡Šï¼šå¦‚æœæç¤ºä¸‹åˆ—é”™è¯¯ï¼Œåˆ™è¯´æ˜åœ¨å®‰è£…Rosçš„æ—¶å€™æ²¡æœ‰å®‰è£…Ros-moveitåŠŸèƒ½åŒ…ï¼š</p><p><img src="https://i.loli.net/2021/05/28/jShBMoz9apcKVXE.png"></p><p>è§£å†³åŠæ³•ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> ros-kinetic-moveit*<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ³¨ï¼šå‚è€ƒç½‘å€ï¼š<a href="https://github.com/tahsinkose/hector-moveit/issues/4">ç‚¹æˆ‘æŸ¥çœ‹</a></p><h2 id="2-å®‰è£…Realsense-D435ç›¸æœºé©±åŠ¨ä¸åŠŸèƒ½åŒ…"><a href="#2-å®‰è£…Realsense-D435ç›¸æœºé©±åŠ¨ä¸åŠŸèƒ½åŒ…" class="headerlink" title="2.å®‰è£…Realsense D435ç›¸æœºé©±åŠ¨ä¸åŠŸèƒ½åŒ…"></a>2.å®‰è£…Realsense D435ç›¸æœºé©±åŠ¨ä¸åŠŸèƒ½åŒ…</h2><h3 id="2-1é©±åŠ¨å®‰è£…"><a href="#2-1é©±åŠ¨å®‰è£…" class="headerlink" title="2.1é©±åŠ¨å®‰è£…"></a>2.1é©±åŠ¨å®‰è£…</h3><p>å®˜æ–¹å®‰è£…æ•™ç¨‹ï¼š<a href="https://github.com/IntelRealSense/librealsense/blob/master/doc/distribution_linux.md">ç‚¹æˆ‘æŸ¥çœ‹</a></p><p>å‚è€ƒæ•™ç¨‹ï¼š<a href="https://zhuanlan.zhihu.com/p/93127918">ç‚¹æˆ‘æŸ¥çœ‹</a></p><p>æ³¨å†Œå…¬åŒ™ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> apt-key adv <span class="token parameter variable">--keyserver</span> keys.gnupg.net --recv-key F6E65AC044F831AC80A06380C8B3A55A6F3EFCDE <span class="token operator">||</span> <span class="token function">sudo</span> apt-key adv <span class="token parameter variable">--keyserver</span> hkp://keyserver.ubuntu.com:80 --recv-key F6E65AC044F831AC80A06380C8B3A55A6F3EFCDE<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ·»åŠ æœåŠ¡å™¨è‡³å­˜å‚¨åˆ—è¡¨ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> add-apt-repository <span class="token string">"deb https://librealsense.intel.com/Debian/apt-repo xenial main"</span> <span class="token parameter variable">-u</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å®‰è£…æ‰€éœ€åº“ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> librealsense2-dkms<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> librealsense2-utils<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å®‰è£…åŠŸèƒ½åŒ…ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> librealsense2-dev<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> librealsense2-dbg<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¯åŠ¨è¿æ¥ç•Œé¢ï¼Œè¿›è¡Œæµ‹è¯•ï¼Œè‹¥å¯ä»¥çœ‹åˆ°ç›¸æœºå›¾åƒåˆ™è¯æ˜é©±åŠ¨å®‰è£…æˆåŠŸï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">realsense-viewer<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="2-2åŠŸèƒ½åŒ…å®‰è£…"><a href="#2-2åŠŸèƒ½åŒ…å®‰è£…" class="headerlink" title="2.2åŠŸèƒ½åŒ…å®‰è£…"></a>2.2åŠŸèƒ½åŒ…å®‰è£…</h3><p>åˆ›å»ºå·¥ä½œç©ºé—´ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> ~/catkin_ws/src <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> ~/catkin_ws/src<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¸‹è½½æºç ï¼Œå¹¶æ£€æŸ¥ä¾èµ–:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone <span class="token parameter variable">-b</span> <span class="token number">2.2</span>.7 https://github.com/IntelRealSense/realsense-ros.git <span class="token builtin class-name">cd</span> realsense-ros/realsense2_camera <span class="token function">git</span> checkout <span class="token variable"><span class="token variable">`</span><span class="token function">git</span> tag <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-V</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-P</span> <span class="token string">"^\d+\.\d+\.\d+"</span> <span class="token operator">|</span> <span class="token function">tail</span> <span class="token parameter variable">-1</span><span class="token variable">`</span></span><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> ros-kinetic-ddynamic-reconfigure<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ç¼–è¯‘ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> ~/catkin_wscatkin_make <span class="token parameter variable">-DCATKIN_ENABLE_TESTING</span><span class="token operator">=</span>False <span class="token parameter variable">-DCMAKE_BUILD_TYPE</span><span class="token operator">=</span>Release catkin_make <span class="token function">install</span> <span class="token builtin class-name">echo</span> <span class="token string">"source ~/catkin_ws/devel/setup.bash"</span> <span class="token operator">>></span> ~/.bashrc <span class="token builtin class-name">source</span> ~/.bashrc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµ‹è¯•ï¼Œå¯åŠ¨ç›¸æœºèŠ‚ç‚¹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">roslaunch realsense2_camera rs_camera.launch<span class="token comment"># æŸ¥çœ‹å‘å¸ƒçš„è¯é¢˜</span>rostopic list<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-å®‰è£…ros-kinetic-vispä¾èµ–åŒ…"><a href="#3-å®‰è£…ros-kinetic-vispä¾èµ–åŒ…" class="headerlink" title="3.å®‰è£…ros-kinetic-vispä¾èµ–åŒ…"></a>3.å®‰è£…ros-kinetic-vispä¾èµ–åŒ…</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> ros-kinetic-visp<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="4-å®‰è£…aruco-rosäºŒç»´ç æ£€æµ‹åŠŸèƒ½åŒ…"><a href="#4-å®‰è£…aruco-rosäºŒç»´ç æ£€æµ‹åŠŸèƒ½åŒ…" class="headerlink" title="4.å®‰è£…aruco_rosäºŒç»´ç æ£€æµ‹åŠŸèƒ½åŒ…"></a>4.å®‰è£…aruco_rosäºŒç»´ç æ£€æµ‹åŠŸèƒ½åŒ…</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> ~/catkin_ws/src<span class="token function">git</span> clone <span class="token parameter variable">-b</span> kinetic-devel https://github.com/pal-robotics/aruco_ros.git<span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>catkin_make<span class="token builtin class-name">source</span> ~/catkin_ws/devel/setup.bash<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-å®‰è£…visp-hand2eye-calibration"><a href="#5-å®‰è£…visp-hand2eye-calibration" class="headerlink" title="5.å®‰è£…visp_hand2eye_calibration"></a>5.å®‰è£…visp_hand2eye_calibration</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> ~/catkin_ws/src<span class="token function">git</span> clone <span class="token parameter variable">-b</span> kinetic-devel https://github.com/lagadic/vision_visp.git<span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>catkin_make <span class="token parameter variable">--pkg</span> visp_hand2eye_calibration<span class="token builtin class-name">source</span> ~/catkin_ws/devel/setup.bash<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="6-å®‰è£…easy-handeyeæ‰‹çœ¼æ ‡å®šåŠŸèƒ½åŒ…"><a href="#6-å®‰è£…easy-handeyeæ‰‹çœ¼æ ‡å®šåŠŸèƒ½åŒ…" class="headerlink" title="6.å®‰è£…easy_handeyeæ‰‹çœ¼æ ‡å®šåŠŸèƒ½åŒ…"></a>6.å®‰è£…easy_handeyeæ‰‹çœ¼æ ‡å®šåŠŸèƒ½åŒ…</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> ~/catkin_ws/src<span class="token function">git</span> clone https://github.com/IFL-CAMP/easy_handeye<span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>catkin_make<span class="token builtin class-name">source</span> ~/catkin_ws/devel/setup.bash<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="7-æ ‡å®šæ–¹æ³•"><a href="#7-æ ‡å®šæ–¹æ³•" class="headerlink" title="7.æ ‡å®šæ–¹æ³•"></a>7.æ ‡å®šæ–¹æ³•</h2><h3 id="7-1çœ¼åœ¨æ‰‹ä¸Š-eye-in-handæ ‡å®šæ–¹æ³•"><a href="#7-1çœ¼åœ¨æ‰‹ä¸Š-eye-in-handæ ‡å®šæ–¹æ³•" class="headerlink" title="7.1çœ¼åœ¨æ‰‹ä¸Š eye-in-handæ ‡å®šæ–¹æ³•"></a>7.1çœ¼åœ¨æ‰‹ä¸Š eye-in-handæ ‡å®šæ–¹æ³•</h3><h4 id="7-1-1ä¿®æ”¹launchæ–‡ä»¶"><a href="#7-1-1ä¿®æ”¹launchæ–‡ä»¶" class="headerlink" title="7.1.1ä¿®æ”¹launchæ–‡ä»¶"></a>7.1.1ä¿®æ”¹launchæ–‡ä»¶</h4><p>æ ‡å®šè¿‡ç¨‹éœ€å¯åŠ¨ ur5 æœºæ¢°è‡‚çš„ç›¸å…³èŠ‚ç‚¹ï¼Œrealsense èŠ‚ç‚¹ï¼Œaruco èŠ‚ç‚¹ï¼Œeasy_handeye èŠ‚ç‚¹ï¼Œå¯ä»¥å†™ä¸€ä¸ª launch æ–‡ä»¶åŒæ—¶å¯åŠ¨ä¸Šè¿°èŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥åˆ†åˆ«å¯åŠ¨ã€‚easy_handeye åŒ…ä¸­ç»™å‡ºäº†ç”¨ä¸€ä¸ª launch æ–‡ä»¶å®ç°çš„ç¤ºä¾‹ï¼Œåœ¨å¦‚ä¸‹çš„ç›®å½•ä¸­ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> ~/catkin_ws/src/easy_handeye/docs/example_launch/ur5_kinect_calibration.launch<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æˆ‘ä»¬å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å°† launch æ–‡ä»¶æ‹·è´åˆ° easy_handeye åŠŸèƒ½åŒ…çš„ launch ç›®å½•ä¸­ï¼Œé¡ºä¾¿æ”¹ä¸ªåå­—</span><span class="token builtin class-name">cd</span> ~/catkin_ws/src/easy_handeye/docs/example_launch<span class="token function">cp</span> ur5_kinect_calibration.launch ~/catkin_ws/src/easy_handeye/easy_handeye/launch/eye_in_hand_calibration.launchgedit  ~/catkin_ws/src/easy_handeye/easy_handeye/launch/eye_in_hand_calibration.launch<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä¿®æ”¹ launch æ–‡ä»¶å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>launch</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>namespace_prefix<span class="token punctuation">"</span></span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aubo_i5_kinect_handeyecalibration<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token comment">&lt;!-- 169.254.3.20ä¸ºAUBOi5æœºæ¢°è‡‚çš„IPåœ°å€,æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>robot_ip<span class="token punctuation">"</span></span> <span class="token attr-name">doc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>The IP address of the UR5 robot<span class="token punctuation">"</span></span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>169.254.3.20<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>marker_size<span class="token punctuation">"</span></span> <span class="token attr-name">doc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Size of the ArUco marker used, in meters<span class="token punctuation">"</span></span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.1<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>marker_id<span class="token punctuation">"</span></span> <span class="token attr-name">doc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>The ID of the ArUco marker used<span class="token punctuation">"</span></span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- 1. start the Realsense435 --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">file</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(find realsense2_camera)/launch/rs_camera.launch<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- 2. start ArUco --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aruco_tracker<span class="token punctuation">"</span></span> <span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aruco_ros<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>single<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>remap</span> <span class="token attr-name">from</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/camera_info<span class="token punctuation">"</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/camera/color/camera_info<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>remap</span> <span class="token attr-name">from</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/image<span class="token punctuation">"</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/camera/color/image_raw<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image_is_rectified<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>marker_size<span class="token punctuation">"</span></span>        <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg marker_size)<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>marker_id<span class="token punctuation">"</span></span>          <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg marker_id)<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>reference_frame<span class="token punctuation">"</span></span>    <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>camera_color_frame<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>camera_frame<span class="token punctuation">"</span></span>       <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>camera_color_frame<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>marker_frame<span class="token punctuation">"</span></span>       <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>camera_marker<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>node</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- 3. start the robot --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">file</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(find aubo_i5_moveit_config)/launch/moveit_planning_execution.launch<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- 4. start easy_handeye --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">file</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(find easy_handeye)/launch/calibrate.launch<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>namespace_prefix<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg namespace_prefix)<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- trueï¼šç›¸æœºå®‰è£…åœ¨æœºæ¢°è‡‚æœ«ç«¯ false: ç›¸æœºå®‰è£…åœ¨æœºæ¢°è‡‚å¤–--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eye_on_hand<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token comment">&lt;!-- tracking_base_frame ä¸ºç›¸æœºåæ ‡ç³» camera_color_frame --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tracking_base_frame<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>camera_color_frame<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tracking_marker_frame<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>camera_marker<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- robot_base_frame ä¸ºæœºå™¨äººåŸºåº§åæ ‡ç³» --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>robot_base_frame<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>base_link<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- robot_effector_frame ä¸ºå·¥å…·åæ ‡ç³»ï¼Œå³ï¼šä¸ç›¸æœºç›¸è¿çš„å…³èŠ‚åç§° --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>robot_effector_frame<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrist3_Link<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>freehand_robot_movement<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>robot_velocity_scaling<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.5<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>robot_acceleration_scaling<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.2<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>move_group<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>manipulator_i5<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>launch</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="7-1-2å¯åŠ¨-launch-æ–‡ä»¶ï¼Œå¼€å§‹æ ‡å®š"><a href="#7-1-2å¯åŠ¨-launch-æ–‡ä»¶ï¼Œå¼€å§‹æ ‡å®š" class="headerlink" title="7.1.2å¯åŠ¨ launch æ–‡ä»¶ï¼Œå¼€å§‹æ ‡å®š"></a>7.1.2å¯åŠ¨ launch æ–‡ä»¶ï¼Œå¼€å§‹æ ‡å®š</h4><p>å¯åŠ¨ launch æ–‡ä»¶ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">roslaunch easy_handeye eye_to_hand_calibration.launch<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æˆåŠŸè¿è¡Œåï¼Œä¼šåŒæ—¶æ‰“å¼€ä¸‰ä¸ªç•Œé¢ï¼š</p><img src="https://i.loli.net/2021/05/28/4Xmzb3hFrnd5R7c.jpg" alt="ç•Œé¢1" style="zoom:50%;" /><img src="https://i.loli.net/2021/05/28/Av7F6K9Gu8pfZs3.jpg"  alt="ç•Œé¢2" style="zoom: 67%;" /><p><img src="https://i.loli.net/2021/05/28/2ydewHu76InBqfs.jpg" alt="ç•Œé¢3"></p><p>åœ¨ç•Œé¢ 2 ä¸­ï¼Œç‚¹å‡»èœå•æ (èœå•æ åœ¨å±å¹•å·¦ä¸Šè§’)çš„ Plugins -&gt; Visulization -&gt; Image Viewï¼Œé€‰æ‹© &#x2F;aruco_tracker&#x2F;result è¯é¢˜ï¼Œç•Œé¢ä¼šå¦‚ä¸‹æ‰€ç¤ºï¼š</p><img src="https://i.loli.net/2021/05/28/YTKPw46HouZGpk9.jpg" style="zoom: 50%;" /><h4 id="7-1-3æ ‡å®šæ­¥éª¤"><a href="#7-1-3æ ‡å®šæ­¥éª¤" class="headerlink" title="7.1.3æ ‡å®šæ­¥éª¤"></a>7.1.3æ ‡å®šæ­¥éª¤</h4><ol><li>æ‰‹åŠ¨è°ƒèŠ‚æœºæ¢°è‡‚ï¼Œä½¿ aruco äºŒç»´ç ç§»åŠ¨è‡³ç›¸æœºè§†é‡ä¸­å¿ƒå¤„é™„è¿‘ï¼Œä½œä¸º home configã€‚åœ¨ç•Œé¢ 3 ä¸­ï¼Œç‚¹å‡» check starting poseï¼Œè‹¥æ£€æŸ¥æˆåŠŸï¼Œç•Œé¢ä¼šå‡ºç°ï¼š 0&#x2F;17ï¼Œready to start</li><li>ç•Œé¢ 3 ä¸­ä¾æ¬¡ç‚¹å‡» Next Poseï¼ŒPlanï¼ŒExecuteï¼Œæœºæ¢°è‡‚ä¼šç§»åŠ¨è‡³æ–°çš„ä½ç½®ï¼Œè‹¥äºŒç»´ç åœ¨ç›¸æœºè§†é‡èŒƒå›´å†…ï¼Œä¸”èƒ½æ£€æµ‹æˆåŠŸï¼Œåˆ™è¿›è¡Œä¸‹ä¸€æ­¥</li><li>ç•Œé¢ 2 ä¸­ç‚¹å‡» Take Sampleï¼Œè‹¥ Samples å¯¹è¯æ¡†ä¸­å‡ºç°æœ‰æ•ˆä¿¡æ¯ï¼Œè¯´æ˜ç¬¬ä¸€ä¸ªç‚¹æ ‡å®šæˆåŠŸ</li><li>é‡å¤æ‰§è¡Œæ­¥éª¤ 2 å’Œæ­¥éª¤ 3ï¼Œç›´è‡³ 17 ä¸ªç‚¹å…¨éƒ¨æ ‡å®šå®Œæ¯•</li><li>ç•Œé¢ 2 ä¸­ç‚¹å‡» Computeï¼Œåˆ™ Result å¯¹è¯æ¡†ä¸­ä¼šå‡ºç°ç»“æœ</li><li>ç•Œé¢ 2 ä¸­ Saveï¼Œä¼šå°†ç»“æœä¿å­˜ä¸ºä¸€ä¸ª YAML æ–‡ä»¶ï¼Œè·¯å¾„ä¸º <code>~/.ros/easy_handeye</code></li></ol><p><img src="https://i.loli.net/2021/05/28/gV9AWphbyU5mFlP.jpg"></p><h3 id="7-2çœ¼åœ¨æ‰‹å¤–-eye-to-handæ ‡å®šæ–¹æ³•"><a href="#7-2çœ¼åœ¨æ‰‹å¤–-eye-to-handæ ‡å®šæ–¹æ³•" class="headerlink" title="7.2çœ¼åœ¨æ‰‹å¤– eye-to-handæ ‡å®šæ–¹æ³•"></a>7.2çœ¼åœ¨æ‰‹å¤– eye-to-handæ ‡å®šæ–¹æ³•</h3><p>æ–¹æ³•ä¸â€œçœ¼åœ¨æ‰‹ä¸Šâ€åŸºæœ¬ç›¸åŒï¼Œéœ€è¦ä¿®æ”¹ä¸€ä¸‹ launch æ–‡ä»¶ï¼Œæ³¨æ„ä¸¤ä¸ª launch æ–‡ä»¶ä¸è¦é‡åã€‚</p><p>å”¯ä¸€ä¿®æ”¹çš„åœ°æ–¹æ˜¯ easy_handeye åŠŸèƒ½åŒ… calibrate.launch æ–‡ä»¶ä¸­ â€œeye_on_handâ€ å‚æ•°æ”¹æˆ trueï¼Œå¦‚ä¸‹æ‰€ç¤º</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å°† launch æ–‡ä»¶æ‹·è´åˆ° easy_handeye åŠŸèƒ½åŒ…çš„ launch ç›®å½•ä¸­ï¼Œé¡ºä¾¿æ”¹ä¸ªåå­—</span><span class="token builtin class-name">cd</span> ~/catkin_ws/src/easy_handeye/docs/example_launch<span class="token function">cp</span> ur5_kinect_calibration.launch ~/catkin_ws/src/easy_handeye/easy_handeye/launch/eye_to_hand_calibration.launchgedit  ~/catkin_ws/src/easy_handeye/easy_handeye/launch/eye_to_hand_calibration.launch<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="8-å°†æ ‡å®šç»“æœå‘é€è‡³TFæ ‘"><a href="#8-å°†æ ‡å®šç»“æœå‘é€è‡³TFæ ‘" class="headerlink" title="8.å°†æ ‡å®šç»“æœå‘é€è‡³TFæ ‘"></a>8.å°†æ ‡å®šç»“æœå‘é€è‡³TFæ ‘</h2><p>easy_handeye åŠŸèƒ½åŒ…æä¾›äº† publish.launch æ–‡ä»¶ï¼Œå¯ä»¥å°†æ ‡å®šå¥½çš„ TF å‘å¸ƒå‡ºå»</p><h3 id="8-1çœ¼åœ¨æ‰‹ä¸Šeye-in-hand"><a href="#8-1çœ¼åœ¨æ‰‹ä¸Šeye-in-hand" class="headerlink" title="8.1çœ¼åœ¨æ‰‹ä¸Šeye-in-hand"></a>8.1çœ¼åœ¨æ‰‹ä¸Šeye-in-hand</h3><p>ä¿®æ”¹publish.launch æ–‡ä»¶,è¦ä¿®æ”¹ â€œnamespace_prefixâ€ å‚æ•°ï¼Œä¸çœ¼åœ¨æ‰‹ä¸Šæ ‡å®š launch æ–‡ä»¶ä¸­çš„ â€œnamespace_prefixâ€ ä¸€è‡´ï¼Œè¿™æ ·æ‰èƒ½æ‰¾åˆ°æ ‡å®šå¥½çš„ YAML æ–‡ä»¶</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>launch</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eye_on_hand<span class="token punctuation">"</span></span> <span class="token attr-name">doc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eye-on-hand instead of eye-on-base<span class="token punctuation">"</span></span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>namespace_prefix<span class="token punctuation">"</span></span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ur5_realsense_handeyecalibration<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg eye_on_hand)<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>namespace<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg namespace_prefix)_eye_on_hand<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">unless</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg eye_on_hand)<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>namespace<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg namespace_prefix)_eye_on_base<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token comment">&lt;!--it is possible to override the link names saved in the yaml file in case of name clashes, for example--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg eye_on_hand)<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>robot_effector_frame<span class="token punctuation">"</span></span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">unless</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg eye_on_hand)<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>robot_base_frame<span class="token punctuation">"</span></span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tracking_base_frame<span class="token punctuation">"</span></span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>inverse<span class="token punctuation">"</span></span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment">&lt;!--publish hand-eye calibration--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>group</span> <span class="token attr-name">ns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg namespace)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eye_on_hand<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg eye_on_hand)<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">unless</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg eye_on_hand)<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>robot_base_frame<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg robot_base_frame)<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg eye_on_hand)<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>robot_effector_frame<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg robot_effector_frame)<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tracking_base_frame<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg tracking_base_frame)<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>inverse<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg inverse)<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(anon handeye_publisher)<span class="token punctuation">"</span></span> <span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>easy_handeye<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>publish.py<span class="token punctuation">"</span></span> <span class="token attr-name">output</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>screen<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>group</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>launch</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="8-2çœ¼åœ¨æ‰‹å¤–-eye-to-hand"><a href="#8-2çœ¼åœ¨æ‰‹å¤–-eye-to-hand" class="headerlink" title="8.2çœ¼åœ¨æ‰‹å¤– eye-to-hand"></a>8.2çœ¼åœ¨æ‰‹å¤– eye-to-hand</h3><p>ä¿®æ”¹ â€œnamespace_prefixâ€ å¤–ï¼ˆåŒä¸Šï¼‰ï¼Œè¿˜è¦å°† â€œeye_on_handâ€ å‚æ•°è®¾ä¸ºfalse</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>launch</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eye_on_hand<span class="token punctuation">"</span></span> <span class="token attr-name">doc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eye-on-hand instead of eye-on-base<span class="token punctuation">"</span></span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>namespace_prefix<span class="token punctuation">"</span></span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ur5_realsense_handeyecalibration<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg eye_on_hand)<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>namespace<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg namespace_prefix)_eye_on_hand<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">unless</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg eye_on_hand)<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>namespace<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg namespace_prefix)_eye_on_base<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token comment">&lt;!--it is possible to override the link names saved in the yaml file in case of name clashes, for example--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg eye_on_hand)<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>robot_effector_frame<span class="token punctuation">"</span></span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">unless</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg eye_on_hand)<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>robot_base_frame<span class="token punctuation">"</span></span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tracking_base_frame<span class="token punctuation">"</span></span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>inverse<span class="token punctuation">"</span></span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment">&lt;!--publish hand-eye calibration--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>group</span> <span class="token attr-name">ns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg namespace)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eye_on_hand<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg eye_on_hand)<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">unless</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg eye_on_hand)<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>robot_base_frame<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg robot_base_frame)<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg eye_on_hand)<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>robot_effector_frame<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg robot_effector_frame)<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tracking_base_frame<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg tracking_base_frame)<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>inverse<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg inverse)<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(anon handeye_publisher)<span class="token punctuation">"</span></span> <span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>easy_handeye<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>publish.py<span class="token punctuation">"</span></span> <span class="token attr-name">output</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>screen<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>group</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>launch</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="9-æµ‹è¯•"><a href="#9-æµ‹è¯•" class="headerlink" title="9.æµ‹è¯•"></a>9.æµ‹è¯•</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å¼€å¯ publish.luanch æ–‡ä»¶ï¼Œä»¥çœ¼åœ¨æ‰‹ä¸Šä¸ºä¾‹</span>roslaunch easy_handeye publish.launch<span class="token comment"># æŸ¥çœ‹ TFï¼ˆæ”¹æˆè‡ªå·±çš„å·¥å…·åæ ‡ç³»ä¸ç›¸æœºåæ ‡ç³»ï¼‰</span>rosrun tf tf_echo /tool0_controller /camera_color_frame<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://i.loli.net/2021/05/28/BgCzvN85MxAsUJV.jpg"></p><p>æ³¨æ„ï¼šè¿™é‡Œå››å…ƒæ•°çš„é¡ºåºæ˜¯ [qx, qy, qz, qw]</p>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨äºº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ‰‹çœ¼æ ‡å®š </tag>
            
            <tag> AUBOi5 </tag>
            
            <tag> Realsense </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pycharmä½¿ç”¨sshè¿æ¥æœåŠ¡å™¨ä¸­çš„dockerå®¹å™¨</title>
      <link href="/2022/11/23/pycharm-shi-yong-ssh-lian-jie-fu-wu-qi-zhong-de-docker-rong-qi/"/>
      <url>/2022/11/23/pycharm-shi-yong-ssh-lian-jie-fu-wu-qi-zhong-de-docker-rong-qi/</url>
      
        <content type="html"><![CDATA[<h2 id="1-æ‹‰å–cudaã€cudnnçš„dockeré•œåƒ"><a href="#1-æ‹‰å–cudaã€cudnnçš„dockeré•œåƒ" class="headerlink" title="1.æ‹‰å–cudaã€cudnnçš„dockeré•œåƒ"></a>1.æ‹‰å–cudaã€cudnnçš„dockeré•œåƒ</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> pull nvidia/cuda:10.0-cudnn7-devel-ubuntu16.04<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="2-æ–°å»ºå¹¶å¯åŠ¨äº¤äº’å¼å®¹å™¨"><a href="#2-æ–°å»ºå¹¶å¯åŠ¨äº¤äº’å¼å®¹å™¨" class="headerlink" title="2.æ–°å»ºå¹¶å¯åŠ¨äº¤äº’å¼å®¹å™¨"></a>2.æ–°å»ºå¹¶å¯åŠ¨äº¤äº’å¼å®¹å™¨</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">--name</span> tensorflow1.2.1-gpu <span class="token parameter variable">-v</span> /home/docker_share/:/home/ <span class="token parameter variable">-p</span> <span class="token number">2201</span>:22 <span class="token parameter variable">--gpus</span> all nvidia/cuda:10.0-cudnn7-devel-ubuntu16.04 /bin/bash<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è§£é‡Šï¼š</p><p>â€“name ï¼šè®¾ç½®æ–°å®¹å™¨çš„åç§°ä¸ºtensorflow1.2.1-gpu</p><p>-v ï¼šè®¾ç½®æ–‡ä»¶æ˜ å°„ï¼Œå°†å®¿ä¸»æœºçš„æ–‡ä»¶&#x2F;home&#x2F;docker_share&#x2F;æ˜ å°„åˆ°è¯¥å®¹å™¨çš„&#x2F;home&#x2F;ç›®å½•ä¸‹</p><p>-p ï¼šè®¾ç½®å®¹å™¨çš„ç«¯å£ä¸å®¿ä¸»æœºçš„ç«¯å£æ˜ å°„ï¼Œæ ¼å¼ä¸ºï¼š<strong>ä¸»æœº(å®¿ä¸»)ç«¯å£:å®¹å™¨ç«¯å£</strong></p><p>â€“gpus all è®¸å®¹å™¨ä½¿ç”¨æ‰€æœ‰GPU</p><p>nvidia&#x2F;cuda:10.0-cudnn7-devel-ubuntu16.04ï¼šå®¹å™¨çš„ä¾èµ–é•œåƒ</p><p>&#x2F;bin&#x2F;bashï¼šæŒ‡å®šåœ¨å®¹å™¨å†…éƒ¨è¿è¡Œçš„è¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹æ˜¯é€šè¿‡docker container runå‘½ä»¤æ¥é€šçŸ¥å®¹å™¨è¿è¡Œçš„</p><p>æ³¨é‡Šï¼š</p><p>ä¸ºäº†æ„å»ºæœ‰åºä¸”è§„èŒƒçš„ç«¯å£æ˜ å°„å…³ç³»ï¼Œè¿™é‡Œè®¾ç½®ä¸€ä¸ªé»˜è®¤è§„åˆ™ç”¨äºè®¾ç½®å®¹å™¨çš„ç«¯å£ä¸å®¿ä¸»æœºçš„ç«¯å£æ˜ å°„ï¼šä¸»æœºç«¯å£å›ºå®šï¼Œå®¹å™¨ç«¯å£ä»¥ä¸»æœºç«¯å£ä¸ºèµ·å§‹ä½ä¾æ¬¡æ’å¼€</p><pre class="line-numbers language-none"><code class="language-none">å®¹å™¨ç«¯å£ä¸»æœºç«¯å£220122220222<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="3-è¿›å…¥å®¹å™¨åä¿®æ”¹å®¹å™¨çš„rootå¯†ç "><a href="#3-è¿›å…¥å®¹å™¨åä¿®æ”¹å®¹å™¨çš„rootå¯†ç " class="headerlink" title="3.è¿›å…¥å®¹å™¨åä¿®æ”¹å®¹å™¨çš„rootå¯†ç "></a>3.è¿›å…¥å®¹å™¨åä¿®æ”¹å®¹å™¨çš„rootå¯†ç </h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># è®¾ç½®ç”¨æˆ·åä¸ºroot,å¯†ç ä¸ºpasswd(å°†å…¶è¯¥ä¸ºè‡ªå·±æƒ³è¦çš„å¯†ç )</span><span class="token builtin class-name">echo</span> <span class="token string">'root:passwd'</span> <span class="token operator">|</span> chpasswd<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="4-å®‰è£…openssh-serverå¹¶å¯åŠ¨"><a href="#4-å®‰è£…openssh-serverå¹¶å¯åŠ¨" class="headerlink" title="4.å®‰è£…openssh-serverå¹¶å¯åŠ¨"></a>4.å®‰è£…openssh-serverå¹¶å¯åŠ¨</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#æ›´æ–°æº</span><span class="token function">apt-get</span> update<span class="token comment">#æˆ–</span><span class="token function">apt-get</span> <span class="token parameter variable">-y</span> update<span class="token comment"># å®‰è£…openssh-server</span><span class="token function">apt-get</span> <span class="token function">install</span> openssh-server<span class="token comment"># å¯åŠ¨ä¹‹å‰éœ€æ‰‹åŠ¨åˆ›å»º/var/run/sshdï¼Œä¸ç„¶å¯åŠ¨sshdçš„æ—¶å€™ä¼šæŠ¥é”™</span><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /var/run/sshd<span class="token comment"># sshdä»¥å®ˆæŠ¤è¿›ç¨‹è¿è¡Œ</span>/usr/sbin/sshd <span class="token parameter variable">-D</span> <span class="token operator">&amp;</span><span class="token comment"># å®‰è£…netstatï¼ŒæŸ¥çœ‹sshdæ˜¯å¦ç›‘å¬22ç«¯å£</span><span class="token function">apt-get</span> <span class="token function">install</span> net-tools<span class="token function">netstat</span> <span class="token parameter variable">-apn</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">ssh</span><span class="token comment"># æ˜¾ç¤ºå¦‚ä¸‹</span><span class="token comment"># root@a78aa2e72670:/# netstat -apn | grep ssh</span><span class="token comment"># tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      1266/sshd</span><span class="token comment"># tcp6       0      0 :::22                   :::*                    LISTEN      1266/sshd</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-sshç™»å½•è®¾ç½®"><a href="#5-sshç™»å½•è®¾ç½®" class="headerlink" title="5.sshç™»å½•è®¾ç½®"></a>5.sshç™»å½•è®¾ç½®</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ç”Ÿæˆssh key</span>ssh-keygen <span class="token parameter variable">-t</span> rsa <span class="token comment"># ç„¶åæç¤ºçš„è®¾ç½®ç”¨é»˜è®¤è®¾ç½®ï¼Œä¸€ç›´å›è½¦å³å¯</span><span class="token comment"># ä¿®æ”¹sshd-configå…è®¸rootç™»é™†</span><span class="token function">vim</span> /etc/ssh/sshd_config<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ£€æŸ¥ä¸‹é¢çš„å‘½ä»¤æ˜¯å¦è¢«æ³¨é‡Šï¼Œä¼šåé¢çš„å‚æ•°æ˜¯å¦ä¸ºyesï¼Œè‹¥æ²¡æœ‰è¯¥å‘½ä»¤éœ€è¦åœ¨æ–‡ä»¶å°¾éƒ¨æ–°å¢è¯¥å‘½ä»¤ä»¥å…è®¸rootç”¨æˆ·ä½¿ç”¨sshç™»å½•ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">PermitRootLogin <span class="token function">yes</span> <span class="token comment"># çº¦åœ¨28è¡Œï¼šå°†PermitRootLogin prohibit-passwordæ”¹ä¸ºPermitRootLogin yes</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¿®æ”¹å®Œsshd-configä¹‹åéœ€è¦é‡å¯sshdæœåŠ¡:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ‰¾åˆ°sshdçš„è¿›ç¨‹pid</span><span class="token function">ps</span> <span class="token parameter variable">-aux</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">ssh</span><span class="token comment"># æ€æ‰sshdçš„è¿›ç¨‹pid</span><span class="token function">kill</span> <span class="token parameter variable">-9</span> sshdçš„è¿›ç¨‹pidå·<span class="token comment"># é‡å¯</span>/usr/sbin/sshd <span class="token parameter variable">-D</span> <span class="token operator">&amp;</span><span class="token comment"># å†æ¬¡æŸ¥çœ‹</span><span class="token function">ps</span> <span class="token parameter variable">-aux</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">ssh</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¤ºä¾‹:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">root@a78aa2e72670:/<span class="token comment"># ps -aux | grep ssh</span>root      <span class="token number">1266</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>  <span class="token number">65512</span>  <span class="token number">5468</span> pts/0    S    01:14   <span class="token number">0</span>:00 /usr/sbin/sshd <span class="token parameter variable">-D</span>root      <span class="token number">1301</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>  <span class="token number">11284</span>   <span class="token number">932</span> pts/0    S+   01:18   <span class="token number">0</span>:00 <span class="token function">grep</span> <span class="token parameter variable">--color</span><span class="token operator">=</span>auto <span class="token function">ssh</span>root@a78aa2e72670:/<span class="token comment"># kill -9 1266</span>root@a78aa2e72670:/<span class="token comment"># /usr/sbin/sshd -D &amp;</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token number">1302</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>   Killed                  /usr/sbin/sshd <span class="token parameter variable">-D</span>root@a78aa2e72670:/<span class="token comment"># ps -aux | grep ssh</span>root      <span class="token number">1302</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>  <span class="token number">65512</span>  <span class="token number">5756</span> pts/0    S    01:19   <span class="token number">0</span>:00 /usr/sbin/sshd <span class="token parameter variable">-D</span>root      <span class="token number">1304</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>  <span class="token number">11284</span>   <span class="token number">944</span> pts/0    S+   01:19   <span class="token number">0</span>:00 <span class="token function">grep</span> <span class="token parameter variable">--color</span><span class="token operator">=</span>auto <span class="token function">ssh</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="6-é€€å‡ºå®¹å™¨ï¼Œä½†ä¸è¦åœæ­¢å®¹å™¨ï¼Œå¹¶è¿›è¡Œè¿æ¥æµ‹è¯•"><a href="#6-é€€å‡ºå®¹å™¨ï¼Œä½†ä¸è¦åœæ­¢å®¹å™¨ï¼Œå¹¶è¿›è¡Œè¿æ¥æµ‹è¯•" class="headerlink" title="6.é€€å‡ºå®¹å™¨ï¼Œä½†ä¸è¦åœæ­¢å®¹å™¨ï¼Œå¹¶è¿›è¡Œè¿æ¥æµ‹è¯•"></a>6.é€€å‡ºå®¹å™¨ï¼Œä½†ä¸è¦åœæ­¢å®¹å™¨ï¼Œå¹¶è¿›è¡Œè¿æ¥æµ‹è¯•</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åœ¨ä¸»æœºç™»å½•ï¼Œéœ€è¦è¾“å…¥çš„rootå¯†ç ä¸ºå‰é¢è®¾ç½®çš„rootå¯†ç </span><span class="token function">ssh</span> root@localhost <span class="token parameter variable">-p</span> <span class="token number">8080</span> <span class="token comment"># 8080ä¸ºåˆšå¼€å§‹åˆ›å»ºå®¹å™¨æ—¶å€™è®¾ç½®çš„ä¸»æœºç«¯å£æ˜ å°„ï¼Œä¸å®¹å™¨çš„22ç«¯å£å½¢æˆæ˜ å°„</span><span class="token comment"># åœ¨å…¶ä»–æœºå™¨ä¸Šå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç™»é™†ï¼Œå‡è®¾å®¿ä¸»æœºipä¸º10.12.11.xx</span><span class="token function">ssh</span> root@10.12.11.xx <span class="token parameter variable">-p</span> <span class="token number">8080</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œå¦‚æœæç¤ºï¼šssh_exchange_identification: read: Connection reset by peer</p><p>åˆ™ï¼šå¯èƒ½æ˜¯å®¹å™¨çš„ sshdæœåŠ¡æœªå¼€å¯ï¼Œå†æ¬¡è¿›å…¥å®¹å™¨é‡å¯sshdæœåŠ¡å³å¯ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/usr/sbin/sshd <span class="token parameter variable">-D</span> <span class="token operator">&amp;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">root@dc627a3adc4d:/<span class="token comment"># ps -aux | grep ssh</span>root        <span class="token number">32</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>  <span class="token number">11284</span>   <span class="token number">932</span> pts/1    S+   03:43   <span class="token number">0</span>:00 <span class="token function">grep</span> <span class="token parameter variable">--color</span><span class="token operator">=</span>auto <span class="token function">ssh</span>root@dc627a3adc4d:/<span class="token comment"># /usr/sbin/sshd -D &amp;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">33</span>root@dc627a3adc4d:/<span class="token comment"># ps -aux | grep ssh</span>root        <span class="token number">33</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>  <span class="token number">65512</span>  <span class="token number">5420</span> pts/1    S    03:43   <span class="token number">0</span>:00 /usr/sbin/sshd <span class="token parameter variable">-D</span>root        <span class="token number">35</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>  <span class="token number">11284</span>   <span class="token number">936</span> pts/1    S+   03:43   <span class="token number">0</span>:00 <span class="token function">grep</span> <span class="token parameter variable">--color</span><span class="token operator">=</span>auto <span class="token function">ssh</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨é‡Šï¼šé…ç½®å®Œæˆåå¯ä»¥å°†å®¹å™¨ä¿å­˜ä¸ºé•œåƒ</p><p>docker commit -a â€œæäº¤çš„é•œåƒä½œè€…åç§°â€ -m â€œæäº¤æ—¶çš„è¯´æ˜æ–‡å­—â€ å®¹å™¨IDæˆ–å®¹å™¨åç§°  ä¿å­˜é•œåƒåç§°:æ ‡ç­¾</p><p>ç¤ºä¾‹:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">root@dc627a3adc4d:/<span class="token comment"># docker commit -a "runoob.com" -m "my apache" a404c6c174a2  mymysql:v1</span>root@dc627a3adc4d:/<span class="token comment"># docker images mymysql:v1</span>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZEmymysql             v1                  37af1236adef        <span class="token number">15</span> seconds ago      <span class="token number">329</span> MB<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="7-é…ç½®pycharmå¹¶è¿æ¥dockerå®¹å™¨"><a href="#7-é…ç½®pycharmå¹¶è¿æ¥dockerå®¹å™¨" class="headerlink" title="7.é…ç½®pycharmå¹¶è¿æ¥dockerå®¹å™¨"></a>7.é…ç½®pycharmå¹¶è¿æ¥dockerå®¹å™¨</h2><p>å‚è€ƒç½‘å€ï¼š<a href="https://blog.csdn.net/Thanours/article/details/109265315">ç‚¹æˆ‘æŸ¥çœ‹</a></p><p>åœ¨ Tools &gt;&gt;&gt; Deployment &gt;&gt;&gt; Configurationé€‰é¡¹ä¸­æ–°å»º SFTP è¿æ¥ï¼š</p><p><img src="https://i.loli.net/2021/05/21/YMm8PE6Hd9ySQ2h.png"></p><img src="https://i.loli.net/2021/05/21/z4dMrhtOH8xvZCR.png"/><p><img src="https://i.loli.net/2021/06/10/TYq9sIE2aRfdyGC.png"></p><ul><li>è·¯å¾„æ˜ å°„(æœ¬åœ°ç¨‹åºæ–‡ä»¶ç›®å½•ä¸dockeræ–‡ä»¶ç›®å½•çš„æ˜ å°„)ï¼š</li></ul><p><img src="https://i.loli.net/2021/05/21/yigpdXIMG5QTaLw.png"></p><ul><li>åŒæ­¥æœ¬åœ°ä»£ç æ•°æ®åˆ°dockerå®¹å™¨ä¸­ï¼š</li></ul><p><img src="https://i.loli.net/2021/05/21/mQJGDp1xaB6EjO9.png"></p><ul><li>ä¸Šä¼ å®Œä»£ç æ•°æ®åï¼Œ éœ€è¦é€‰æ‹©è®¾ç½®pythonç¼–è¯‘å™¨ï¼š</li></ul><p><img src="https://i.loli.net/2021/05/21/htdvCb2qlnOas1Y.png"></p><p><img src="https://i.loli.net/2021/05/21/O3yU6kINc9AT8ea.png"></p><p><img src="https://i.loli.net/2021/05/21/bH5aVPAMXDIz42j.png"></p><p><img src="https://i.loli.net/2021/06/10/BH7mE9diJMrcWCp.png"></p><ul><li>è®¾ç½®å¥½pythonè§£é‡Šå™¨å°±å¯ä»¥runä»£ç äº†ï¼š</li></ul><p><img src="https://i.loli.net/2021/05/21/jDGmP8npQtaFCY7.png"></p><p>è¿™é‡Œè¦æ³¨æ„ä¸€ä¸‹ï¼Œä»£ç æ‰€è¦çš„è¿è¡Œç¯å¢ƒè¿˜éœ€è¦åœ¨dockerå®¹å™¨å®‰è£…é…ç½®å¥½ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œéœ€è¦pytorchç¯å¢ƒä»¥åŠpythonä»£ç è¿è¡Œæ‰€éœ€çš„ä¾èµ–åº“éƒ½å·²ç»åœ¨dockerå®¹å™¨ä¸­é€šè¿‡pipå®‰è£…å¥½äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> Pycharm </tag>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‡½æ•°å‚æ•°ä¼ é€’ä¹‹å¼•ç”¨ä¸æŒ‡é’ˆ</title>
      <link href="/2022/11/12/han-shu-can-shu-chuan-di-zhi-yin-yong-yu-zhi-zhen/"/>
      <url>/2022/11/12/han-shu-can-shu-chuan-di-zhi-yin-yong-yu-zhi-zhen/</url>
      
        <content type="html"><![CDATA[<h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><h2 id="å€¼ä¼ é€’"><a href="#å€¼ä¼ é€’" class="headerlink" title="å€¼ä¼ é€’"></a>å€¼ä¼ é€’</h2><p><strong>å½¢å‚æ˜¯å®å‚çš„æ‹·è´</strong>ï¼Œæ”¹å˜å½¢å‚çš„å€¼å¹¶ä¸ä¼šå½±å“å¤–éƒ¨å®å‚çš„å€¼ã€‚ä»è¢«è°ƒç”¨å‡½æ•°çš„è§’åº¦æ¥è¯´ï¼Œå€¼ä¼ é€’æ˜¯å•å‘çš„ï¼ˆå®å‚-&gt;å½¢å‚ï¼‰ï¼Œå‚æ•°çš„å€¼åªèƒ½ä¼ å…¥ï¼Œä¸èƒ½ä¼ å‡ºã€‚å½“å‡½æ•°å†…éƒ¨éœ€è¦ä¿®æ”¹å‚æ•°ï¼Œå¹¶ä¸”ä¸å¸Œæœ›è¿™ä¸ªæ”¹å˜å½±å“è°ƒç”¨è€…æ—¶ï¼Œé‡‡ç”¨å€¼ä¼ é€’ã€‚</p><h2 id="æŒ‡é’ˆä¼ é€’"><a href="#æŒ‡é’ˆä¼ é€’" class="headerlink" title="æŒ‡é’ˆä¼ é€’"></a>æŒ‡é’ˆä¼ é€’</h2><p><strong>å½¢å‚ä¸ºæŒ‡å‘å®å‚åœ°å€çš„æŒ‡é’ˆ</strong>ï¼Œå½“å¯¹å½¢å‚çš„æŒ‡å‘æ“ä½œæ—¶ï¼Œå°±ç›¸å½“äºå¯¹å®å‚æœ¬èº«è¿›è¡Œçš„æ“ä½œ</p><h2 id="å¼•ç”¨ä¼ é€’"><a href="#å¼•ç”¨ä¼ é€’" class="headerlink" title="å¼•ç”¨ä¼ é€’"></a>å¼•ç”¨ä¼ é€’</h2><p><strong>å½¢å‚ç›¸å½“äºæ˜¯å®å‚çš„â€œåˆ«åâ€</strong>ï¼Œå¯¹å½¢å‚çš„æ“ä½œå…¶å®å°±æ˜¯å¯¹å®å‚çš„æ“ä½œï¼Œåœ¨å¼•ç”¨ä¼ é€’è¿‡ç¨‹ä¸­ï¼Œè¢«è°ƒå‡½æ•°çš„å½¢å¼å‚æ•°è™½ç„¶ä¹Ÿä½œä¸ºå±€éƒ¨å˜é‡åœ¨æ ˆä¸­å¼€è¾Ÿäº†å†…å­˜ç©ºé—´ï¼Œä½†æ˜¯è¿™æ—¶å­˜æ”¾çš„æ˜¯ç”±ä¸»è°ƒå‡½æ•°æ”¾è¿›æ¥çš„å®å‚å˜é‡çš„åœ°å€ã€‚è¢«è°ƒå‡½æ•°å¯¹å½¢å‚çš„ä»»ä½•æ“ä½œéƒ½è¢«å¤„ç†æˆé—´æ¥å¯»å€ï¼Œå³é€šè¿‡æ ˆä¸­å­˜æ”¾çš„åœ°å€è®¿é—®ä¸»è°ƒå‡½æ•°ä¸­çš„å®å‚å˜é‡ã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œè¢«è°ƒå‡½æ•°å¯¹å½¢å‚åšçš„ä»»ä½•æ“ä½œéƒ½å½±å“äº†ä¸»è°ƒå‡½æ•°ä¸­çš„å®å‚å˜é‡ã€‚</p><p>å¼•ç”¨å¼•å…¥äº†å¯¹è±¡çš„ä¸€ä¸ªåŒä¹‰è¯ã€‚å®šä¹‰å¼•ç”¨çš„è¡¨ç¤ºæ–¹æ³•ä¸å®šä¹‰æŒ‡é’ˆç›¸ä¼¼ï¼Œåªæ˜¯ç”¨â€œ&amp;â€ä»£æ›¿äº†â€œ*â€ã€‚ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">Point <span class="token function">pt1</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Point <span class="token operator">&amp;</span>pt2<span class="token operator">=</span>pt1<span class="token punctuation">;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å®šä¹‰äº†pt2ä¸ºpt1çš„å¼•ç”¨ã€‚é€šè¿‡è¿™æ ·çš„å®šä¹‰ï¼Œpt1å’Œpt2è¡¨ç¤ºåŒä¸€å¯¹è±¡ã€‚éœ€è¦ç‰¹åˆ«å¼ºè°ƒçš„æ˜¯å¼•ç”¨å¹¶ä¸äº§ç”Ÿå¯¹è±¡çš„å‰¯æœ¬ï¼Œä»…ä»…æ˜¯å¯¹è±¡çš„åŒä¹‰è¯ã€‚å› æ­¤ï¼Œå½“ä¸‹é¢çš„è¯­å¥æ‰§è¡Œåï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">pt1<span class="token punctuation">.</span>offsetï¼ˆ<span class="token number">2</span>ï¼Œ<span class="token number">2</span>ï¼‰ï¼›<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>pt1å’Œpt2éƒ½å…·æœ‰ï¼ˆ12ï¼Œ12ï¼‰çš„å€¼ã€‚<br>å¼•ç”¨å¿…é¡»åœ¨å®šä¹‰æ—¶é©¬ä¸Šè¢«åˆå§‹åŒ–ï¼Œå› ä¸ºå®ƒå¿…é¡»æ˜¯æŸä¸ªä¸œè¥¿çš„åŒä¹‰è¯ã€‚ä½ ä¸èƒ½å…ˆå®šä¹‰ä¸€ä¸ªå¼•ç”¨åæ‰<br>åˆå§‹åŒ–å®ƒã€‚ä¾‹å¦‚ä¸‹é¢è¯­å¥æ˜¯éæ³•çš„ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">Point <span class="token operator">&amp;</span>pt3ï¼›pt3<span class="token operator">=</span>pt1ï¼›<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h1 id="å¼•ç”¨ä¼ é€’å’ŒæŒ‡é’ˆä¼ é€’çš„åŒºåˆ«ä¸è”ç³»"><a href="#å¼•ç”¨ä¼ é€’å’ŒæŒ‡é’ˆä¼ é€’çš„åŒºåˆ«ä¸è”ç³»" class="headerlink" title="å¼•ç”¨ä¼ é€’å’ŒæŒ‡é’ˆä¼ é€’çš„åŒºåˆ«ä¸è”ç³»"></a>å¼•ç”¨ä¼ é€’å’ŒæŒ‡é’ˆä¼ é€’çš„åŒºåˆ«ä¸è”ç³»</h1><h2 id="å¼•ç”¨çš„è§„åˆ™"><a href="#å¼•ç”¨çš„è§„åˆ™" class="headerlink" title="å¼•ç”¨çš„è§„åˆ™"></a>å¼•ç”¨çš„è§„åˆ™</h2><ul><li>å¼•ç”¨è¢«åˆ›å»ºçš„åŒæ—¶å¿…é¡»è¢«åˆå§‹åŒ–ï¼ˆæŒ‡é’ˆåˆ™å¯ä»¥åœ¨ä»»ä½•æ—¶å€™è¢«åˆå§‹åŒ–ï¼‰ã€‚ </li><li>ä¸èƒ½æœ‰NULLå¼•ç”¨ï¼Œå¼•ç”¨å¿…é¡»ä¸åˆæ³•çš„å­˜å‚¨å•å…ƒå…³è”ï¼ˆæŒ‡é’ˆåˆ™å¯ä»¥æ˜¯NULLï¼‰ã€‚ </li><li>ä¸€æ—¦å¼•ç”¨è¢«åˆå§‹åŒ–ï¼Œå°±ä¸èƒ½æ”¹å˜å¼•ç”¨çš„å…³ç³»ï¼ˆæŒ‡é’ˆåˆ™å¯ä»¥éšæ—¶æ”¹å˜æ‰€æŒ‡çš„å¯¹è±¡ï¼‰ã€‚</li></ul><h2 id="ç›¸åŒç‚¹"><a href="#ç›¸åŒç‚¹" class="headerlink" title="ç›¸åŒç‚¹"></a>ç›¸åŒç‚¹</h2><p>-éƒ½æ˜¯åœ°å€çš„æ¦‚å¿µï¼šæŒ‡é’ˆæŒ‡å‘ä¸€å—å†…å­˜ï¼Œå®ƒçš„å†…å®¹æ˜¯æ‰€æŒ‡å†…å­˜çš„åœ°å€ï¼›è€Œå¼•ç”¨åˆ™æ˜¯æŸå—å†…å­˜çš„åˆ«åã€‚</p><h2 id="ä¸åŒç‚¹"><a href="#ä¸åŒç‚¹" class="headerlink" title="ä¸åŒç‚¹"></a>ä¸åŒç‚¹</h2><ul><li><p>æŒ‡é’ˆæ˜¯ä¸€ä¸ªå®ä½“ï¼Œè€Œå¼•ç”¨ä»…æ˜¯ä¸ªåˆ«åï¼›</p></li><li><p>å¼•ç”¨åªèƒ½åœ¨å®šä¹‰æ—¶è¢«åˆå§‹åŒ–ä¸€æ¬¡ï¼Œä¹‹åä¸å¯å˜ï¼›æŒ‡é’ˆå¯å˜ï¼›å¼•ç”¨â€œä»ä¸€è€Œç»ˆâ€ï¼ŒæŒ‡é’ˆå¯ä»¥â€œè§å¼‚æ€è¿â€ï¼›</p></li><li><p>å¼•ç”¨æ²¡æœ‰constï¼ŒæŒ‡é’ˆæœ‰constï¼Œconstçš„æŒ‡é’ˆä¸å¯å˜ï¼›ï¼ˆå…·ä½“æŒ‡æ²¡æœ‰int&amp; const aè¿™ç§å½¢å¼ï¼Œè€Œconst int&amp; aæ˜¯æœ‰ çš„ï¼Œ å‰è€…æŒ‡å¼•ç”¨æœ¬èº«å³åˆ«åä¸å¯ä»¥æ”¹å˜ï¼Œè¿™æ˜¯å½“ç„¶çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦è¿™ç§å½¢å¼ï¼Œåè€…æŒ‡å¼•ç”¨æ‰€æŒ‡çš„å€¼ä¸å¯ä»¥æ”¹å˜ï¼‰</p></li><li><p>å¼•ç”¨ä¸èƒ½ä¸ºç©ºï¼ŒæŒ‡é’ˆå¯ä»¥ä¸ºç©ºï¼›</p></li><li><p>â€œsizeof å¼•ç”¨â€å¾—åˆ°çš„æ˜¯æ‰€æŒ‡å‘çš„å˜é‡(å¯¹è±¡)çš„å¤§å°ï¼Œè€Œâ€œsizeof æŒ‡é’ˆâ€å¾—åˆ°çš„æ˜¯æŒ‡é’ˆæœ¬èº«çš„å¤§å°ï¼›</p></li><li><p>æŒ‡é’ˆå’Œå¼•ç”¨çš„è‡ªå¢(++)è¿ç®—æ„ä¹‰ä¸ä¸€æ ·ï¼›</p></li><li><p>å¼•ç”¨æ˜¯ç±»å‹å®‰å…¨çš„ï¼Œè€ŒæŒ‡é’ˆä¸æ˜¯ (å¼•ç”¨æ¯”æŒ‡é’ˆå¤šäº†ç±»å‹æ£€æŸ¥</p></li></ul><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>ä»æ¦‚å¿µä¸Šè®²ï¼Œ<strong>æŒ‡é’ˆä»æœ¬è´¨ä¸Šè®²å°±æ˜¯å­˜æ”¾å˜é‡åœ°å€çš„ä¸€ä¸ªå˜é‡</strong>ï¼Œåœ¨é€»è¾‘ä¸Šæ˜¯ç‹¬ç«‹çš„ï¼Œå®ƒå¯ä»¥è¢«æ”¹å˜ï¼ŒåŒ…æ‹¬å…¶æ‰€æŒ‡å‘çš„åœ°å€çš„æ”¹å˜å’Œå…¶æŒ‡å‘çš„åœ°å€ä¸­æ‰€å­˜æ”¾çš„æ•°æ®çš„æ”¹å˜ã€‚</p><p>è€Œå¼•ç”¨æ˜¯ä¸€ä¸ªåˆ«åï¼Œå®ƒåœ¨é€»è¾‘ä¸Šä¸æ˜¯ç‹¬ç«‹çš„ï¼Œå®ƒçš„å­˜åœ¨å…·æœ‰ä¾é™„æ€§ï¼Œæ‰€ä»¥å¼•ç”¨å¿…é¡»åœ¨ä¸€å¼€å§‹å°±è¢«åˆå§‹åŒ–ï¼Œè€Œä¸”å…¶å¼•ç”¨çš„å¯¹è±¡åœ¨å…¶æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­æ˜¯ä¸èƒ½è¢«æ”¹å˜çš„ï¼ˆè‡ªå§‹è‡³ç»ˆåªèƒ½ä¾é™„äºåŒä¸€ä¸ªå˜é‡ï¼‰ã€‚</p><p>åœ¨C++ä¸­ï¼ŒæŒ‡é’ˆå’Œå¼•ç”¨ç»å¸¸ç”¨äºå‡½æ•°çš„å‚æ•°ä¼ é€’ï¼Œç„¶è€Œï¼ŒæŒ‡é’ˆä¼ é€’å‚æ•°å’Œå¼•ç”¨ä¼ é€’å‚æ•°æ˜¯æœ‰æœ¬è´¨ä¸Šçš„ä¸åŒçš„ï¼š</p><p>æŒ‡é’ˆä¼ é€’å‚æ•°æœ¬è´¨ä¸Šæ˜¯å€¼ä¼ é€’çš„æ–¹å¼ï¼Œå®ƒæ‰€ä¼ é€’çš„æ˜¯ä¸€ä¸ªåœ°å€å€¼ã€‚<em>å€¼ä¼ é€’è¿‡ç¨‹ä¸­ï¼Œè¢«è°ƒå‡½æ•°çš„å½¢å¼å‚æ•°ä½œä¸ºè¢«è°ƒå‡½æ•°çš„å±€éƒ¨å˜é‡å¤„ç†ï¼Œå³åœ¨æ ˆä¸­å¼€è¾Ÿäº†å†…å­˜ç©ºé—´ä»¥å­˜æ”¾ç”±ä¸»è°ƒå‡½æ•°æ”¾è¿›æ¥çš„å®å‚çš„å€¼ï¼Œä»è€Œæˆä¸ºäº†å®å‚çš„ä¸€ä¸ªå‰¯æœ¬ã€‚å€¼ä¼ é€’çš„ç‰¹ç‚¹æ˜¯è¢«è°ƒå‡½æ•°å¯¹å½¢å¼å‚æ•°çš„ä»»ä½•æ“ä½œéƒ½æ˜¯ä½œä¸ºå±€éƒ¨å˜é‡è¿›è¡Œï¼Œä¸ä¼šå½±å“ä¸»è°ƒå‡½æ•°çš„å®å‚å˜é‡çš„å€¼ã€‚ï¼ˆè¿™é‡Œæ˜¯åœ¨è¯´å®å‚æŒ‡é’ˆæœ¬èº«çš„åœ°å€å€¼ä¸ä¼šå˜ï¼‰</em></p><p>è€Œåœ¨å¼•ç”¨ä¼ é€’è¿‡ç¨‹ä¸­ï¼Œè¢«è°ƒå‡½æ•°çš„å½¢å¼å‚æ•°è™½ç„¶ä¹Ÿä½œä¸ºå±€éƒ¨å˜é‡åœ¨æ ˆä¸­å¼€è¾Ÿäº†å†…å­˜ç©ºé—´ï¼Œä½†æ˜¯è¿™æ—¶<strong>å­˜æ”¾çš„æ˜¯ç”±ä¸»è°ƒå‡½æ•°æ”¾è¿›æ¥çš„å®å‚å˜é‡çš„åœ°å€ã€‚è¢«è°ƒå‡½æ•°å¯¹å½¢å‚çš„ä»»ä½•æ“ä½œéƒ½è¢«å¤„ç†æˆé—´æ¥å¯»å€ï¼Œå³é€šè¿‡æ ˆä¸­å­˜æ”¾çš„åœ°å€è®¿é—®ä¸»è°ƒå‡½æ•°ä¸­çš„å®å‚å˜é‡</strong>ã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œè¢«è°ƒå‡½æ•°å¯¹å½¢å‚åšçš„ä»»ä½•æ“ä½œéƒ½å½±å“äº†ä¸»è°ƒå‡½æ•°ä¸­çš„å®å‚å˜é‡ã€‚</p><p><strong>å¼•ç”¨ä¼ é€’å’ŒæŒ‡é’ˆä¼ é€’æ˜¯ä¸åŒçš„ï¼Œè™½ç„¶å®ƒä»¬éƒ½æ˜¯åœ¨è¢«è°ƒå‡½æ•°æ ˆç©ºé—´ä¸Šçš„ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œä½†æ˜¯ä»»ä½•å¯¹äºå¼•ç”¨å‚æ•°çš„å¤„ç†éƒ½ä¼šé€šè¿‡ä¸€ä¸ªé—´æ¥å¯»å€çš„æ–¹å¼æ“ä½œåˆ°ä¸»è°ƒå‡½æ•°ä¸­çš„ç›¸å…³å˜é‡ã€‚è€Œå¯¹äºæŒ‡é’ˆä¼ é€’çš„å‚æ•°ï¼Œå¦‚æœæ”¹å˜è¢«è°ƒå‡½æ•°ä¸­çš„æŒ‡é’ˆåœ°å€ï¼Œå®ƒå°†å½±å“ä¸åˆ°ä¸»è°ƒå‡½æ•°çš„ç›¸å…³å˜é‡ã€‚å¦‚æœæƒ³é€šè¿‡æŒ‡é’ˆå‚æ•°ä¼ é€’æ¥æ”¹å˜ä¸»è°ƒå‡½æ•°ä¸­çš„ç›¸å…³å˜é‡ï¼Œé‚£å°±å¾—ä½¿ç”¨æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆï¼Œæˆ–è€…æŒ‡é’ˆå¼•ç”¨ã€‚</strong></p><p>ä¸ºäº†è¿›ä¸€æ­¥åŠ æ·±å¤§å®¶å¯¹æŒ‡é’ˆå’Œå¼•ç”¨çš„åŒºåˆ«ï¼Œä¸‹é¢æˆ‘ä»ç¼–è¯‘çš„è§’åº¦æ¥é˜è¿°å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ï¼š</p><p>ç¨‹åºåœ¨ç¼–è¯‘æ—¶åˆ†åˆ«å°†æŒ‡é’ˆå’Œå¼•ç”¨æ·»åŠ åˆ°ç¬¦å·è¡¨ä¸Šï¼Œç¬¦å·è¡¨ä¸Šè®°å½•çš„æ˜¯å˜é‡ååŠå˜é‡æ‰€å¯¹åº”åœ°å€ã€‚æŒ‡é’ˆå˜é‡åœ¨ç¬¦å·è¡¨ä¸Šå¯¹åº”çš„åœ°å€å€¼ä¸º<strong>æŒ‡é’ˆå˜é‡çš„åœ°å€å€¼</strong>ï¼ŒæŒ‡é’ˆå˜é‡ä¸­çš„å€¼ä¸ºå…¶æŒ‡å‘å˜é‡çš„åœ°å€ï¼›è€Œå¼•ç”¨åœ¨ç¬¦å·è¡¨ä¸Šå¯¹åº”çš„åœ°å€å€¼ä¸ºå¼•ç”¨å¯¹è±¡çš„åœ°å€å€¼ã€‚ç¬¦å·è¡¨ç”Ÿæˆåå°±ä¸ä¼šå†æ”¹ï¼Œå› æ­¤æŒ‡é’ˆå¯ä»¥æ”¹å˜å…¶æŒ‡å‘çš„å¯¹è±¡ï¼ˆæŒ‡é’ˆå˜é‡ä¸­çš„å€¼å¯ä»¥æ”¹ï¼‰ï¼Œè€Œå¼•ç”¨å¯¹è±¡åˆ™ä¸èƒ½ä¿®æ”¹.</p><h2 id="è§„èŒƒ"><a href="#è§„èŒƒ" class="headerlink" title="è§„èŒƒ"></a>è§„èŒƒ</h2><p>ä½¿ç”¨å¼•ç”¨ä¼ é€’å‚æ•°å’Œä½¿ç”¨æŒ‡é’ˆä¼ é€’å‚æ•°éƒ½å¯ä¼ é€’å˜é‡çš„åœ°å€ï¼Œä½†å¯¹äºint,floatç­‰å ç”¨å†…å­˜è¾ƒå°‘ï¼Œå…¶ä½œä¸ºå‡½æ•°å‚æ•°æ—¶ä¸€èˆ¬ä½¿ç”¨å¼•ç”¨ä¼ é€’å‚æ•°ï¼›è€Œå¯¹äºç»“æ„ä½“è€Œè¨€ä¸€èˆ¬é‡‡ç”¨æŒ‡é’ˆä¼ é€’ç»“æ„ä½“å˜é‡çš„åœ°å€ã€‚</p><h1 id="ä½¿ç”¨ç¤ºä¾‹"><a href="#ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ä½¿ç”¨ç¤ºä¾‹"></a>ä½¿ç”¨ç¤ºä¾‹</h1><h2 id="ä¼ é€’å¯å˜å‚æ•°"><a href="#ä¼ é€’å¯å˜å‚æ•°" class="headerlink" title="ä¼ é€’å¯å˜å‚æ•°"></a>ä¼ é€’å¯å˜å‚æ•°</h2><p>ä¼ ç»Ÿçš„cä¸­ï¼Œå‡½æ•°åœ¨è°ƒç”¨æ—¶å‚æ•°æ˜¯é€šè¿‡å€¼æ¥ä¼ é€’çš„ï¼Œè¿™å°±æ˜¯è¯´å‡½æ•°çš„å‚æ•°ä¸å…·å¤‡è¿”å›å€¼çš„èƒ½åŠ›ã€‚æ‰€ä»¥åœ¨ä¼ ç»Ÿçš„cä¸­ï¼Œå¦‚æœéœ€è¦å‡½æ•°çš„å‚æ•°å…·æœ‰è¿”å›å€¼çš„èƒ½åŠ›ï¼Œå¾€å¾€æ˜¯é€šè¿‡æŒ‡é’ˆæ¥å®ç°çš„ã€‚æ¯”å¦‚ï¼Œå®ç°ä¸¤æ•´æ•°å˜é‡å€¼äº¤æ¢çš„cç¨‹åºå¦‚ä¸‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">swap_int</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>a<span class="token punctuation">,</span><span class="token keyword">int</span> <span class="token operator">*</span>b<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> temp<span class="token punctuation">;</span>    temp<span class="token operator">=</span><span class="token operator">*</span>a<span class="token punctuation">;</span>    a<span class="token operator">=</span><span class="token operator">*</span>b<span class="token punctuation">;</span>    <span class="token operator">*</span>b<span class="token operator">=</span>temp<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨å¼•ç”¨æœºåˆ¶åï¼Œä»¥ä¸Šç¨‹åºçš„c++ç‰ˆæœ¬ä¸ºï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">swap_int</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;</span>a<span class="token punctuation">,</span><span class="token keyword">int</span> <span class="token operator">&amp;</span>b<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> temp<span class="token punctuation">;</span>    temp<span class="token operator">=</span>a<span class="token punctuation">;</span>    a<span class="token operator">=</span>b<span class="token punctuation">;</span>    b<span class="token operator">=</span>temp<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è°ƒç”¨è¯¥å‡½æ•°çš„c++æ–¹æ³•ä¸ºï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">swap_int<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>c++è‡ªåŠ¨æŠŠx,yçš„åœ°å€ä½œä¸ºå‚æ•°ä¼ é€’ç»™swap_intå‡½æ•°ã€‚</p><h2 id="ç»™å‡½æ•°ä¼ é€’å¤§å‹å¯¹è±¡"><a href="#ç»™å‡½æ•°ä¼ é€’å¤§å‹å¯¹è±¡" class="headerlink" title="ç»™å‡½æ•°ä¼ é€’å¤§å‹å¯¹è±¡"></a>ç»™å‡½æ•°ä¼ é€’å¤§å‹å¯¹è±¡</h2><p>å½“å¤§å‹å¯¹è±¡è¢«ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œä½¿ç”¨å¼•ç”¨å‚æ•°å¯ä½¿å‚æ•°ä¼ é€’æ•ˆç‡å¾—åˆ°æé«˜ï¼Œå› ä¸ºå¼•ç”¨å¹¶ä¸äº§ç”Ÿå¯¹è±¡çš„å‰¯æœ¬ï¼Œä¹Ÿå°±æ˜¯å‚æ•°ä¼ é€’æ—¶ï¼Œå¯¹è±¡æ— é¡»å¤åˆ¶ã€‚ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸€ä¸ªæœ‰é™æ•´æ•°é›†åˆçš„ç±»ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">const</span> maxCard<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>Class Set<span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> elems<span class="token punctuation">[</span>maxCard<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// é›†å’Œä¸­çš„å…ƒç´ ï¼ŒmaxCard è¡¨ç¤ºé›†åˆä¸­å…ƒç´ ä¸ªæ•°çš„æœ€å¤§å€¼ã€‚</span>    <span class="token keyword">int</span> card<span class="token punctuation">;</span> <span class="token comment">// é›†åˆä¸­å…ƒç´ çš„ä¸ªæ•°ã€‚</span>    <span class="token keyword">public</span><span class="token operator">:</span>    <span class="token function">Set</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>card<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token comment">//æ„é€ å‡½æ•°</span>    <span class="token keyword">friend</span> Set <span class="token keyword">operator</span> <span class="token operator">*</span> <span class="token punctuation">(</span>Set <span class="token punctuation">,</span>Set <span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">//é‡è½½è¿ç®—ç¬¦å·*ï¼Œç”¨äºè®¡ç®—é›†åˆçš„äº¤é›† ç”¨å¯¹è±¡ä½œä¸ºä¼ å€¼å‚æ•°</span>    <span class="token comment">// friend Set operator * (Set &amp; ,Set &amp; ) é‡è½½è¿ç®—ç¬¦å·*ï¼Œç”¨äºè®¡ç®—é›†åˆçš„äº¤é›† ç”¨å¯¹è±¡çš„å¼•ç”¨ä½œä¸ºä¼ å€¼å‚æ•°</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…ˆè€ƒè™‘é›†åˆäº¤é›†çš„å®ç°</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">Set <span class="token keyword">operator</span> <span class="token operator">*</span><span class="token punctuation">(</span> Set Set1<span class="token punctuation">,</span>Set Set2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    Set res<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>Set1<span class="token punctuation">.</span>card<span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">></span>Set2<span class="token punctuation">.</span>card<span class="token punctuation">;</span><span class="token operator">++</span>j<span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>Set1<span class="token punctuation">.</span>elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span>Set2<span class="token punctuation">.</span>elems<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token punctuation">&#123;</span>                    res<span class="token punctuation">.</span>elems<span class="token punctuation">[</span>res<span class="token punctuation">.</span>card<span class="token operator">++</span><span class="token punctuation">]</span><span class="token operator">=</span>Set1<span class="token punctuation">.</span>elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”±äºé‡è½½è¿ç®—ç¬¦ä¸èƒ½å¯¹æŒ‡é’ˆå•ç‹¬æ“ä½œï¼Œæˆ‘ä»¬å¿…é¡»æŠŠè¿ç®—æ•°å£°æ˜ä¸º Set ç±»å‹è€Œä¸æ˜¯ Set * ã€‚æ¯æ¬¡ä½¿ç”¨*åšäº¤é›†è¿ç®—æ—¶ï¼Œæ•´ä¸ªé›†åˆéƒ½è¢«å¤åˆ¶ï¼Œè¿™æ ·æ•ˆç‡å¾ˆä½ã€‚æˆ‘ä»¬å¯ä»¥ç”¨å¼•ç”¨æ¥é¿å…è¿™ç§æƒ…å†µã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">Set <span class="token keyword">operator</span> <span class="token operator">*</span><span class="token punctuation">(</span> Set <span class="token operator">&amp;</span>Set1<span class="token punctuation">,</span>Set <span class="token operator">&amp;</span>Set2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>     Set res<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>Set1<span class="token punctuation">.</span>card<span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">></span>Set2<span class="token punctuation">.</span>card<span class="token punctuation">;</span><span class="token operator">++</span>j<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>Set1<span class="token punctuation">.</span>elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span>Set2<span class="token punctuation">.</span>elems<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                res<span class="token punctuation">.</span>elems<span class="token punctuation">[</span>res<span class="token punctuation">.</span>card<span class="token operator">++</span><span class="token punctuation">]</span><span class="token operator">=</span>Set1<span class="token punctuation">.</span>elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¼•ç”¨è¿”å›å€¼"><a href="#å¼•ç”¨è¿”å›å€¼" class="headerlink" title="å¼•ç”¨è¿”å›å€¼"></a>å¼•ç”¨è¿”å›å€¼</h2><p>å¦‚æœä¸€ä¸ªå‡½æ•°è¿”å›äº†å¼•ç”¨ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°çš„è°ƒç”¨ä¹Ÿå¯ä»¥è¢«èµ‹å€¼ã€‚è¿™é‡Œæœ‰ä¸€å‡½æ•°ï¼Œå®ƒæ‹¥æœ‰ä¸¤ä¸ªå¼•ç”¨å‚æ•°å¹¶è¿”å›ä¸€ä¸ªåŒç²¾åº¦æ•°çš„å¼•ç”¨ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">double</span> <span class="token operator">&amp;</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token keyword">double</span> <span class="token operator">&amp;</span>d1<span class="token punctuation">,</span><span class="token keyword">double</span> <span class="token operator">&amp;</span>d2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> d1<span class="token operator">></span>d2<span class="token operator">?</span>d1<span class="token operator">:</span>d2<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç”±äºmax()å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹åŒç²¾åº¦æ•°çš„å¼•ç”¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç”¨max() æ¥å¯¹å…¶ä¸­è¾ƒå¤§çš„åŒç²¾åº¦æ•°åŠ 1ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token function">max</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token operator">+=</span><span class="token number">1.0</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="äºŒçº§æŒ‡é’ˆ"><a href="#äºŒçº§æŒ‡é’ˆ" class="headerlink" title="äºŒçº§æŒ‡é’ˆ"></a>äºŒçº§æŒ‡é’ˆ</h1><h2 id="å¼•å…¥"><a href="#å¼•å…¥" class="headerlink" title="å¼•å…¥"></a>å¼•å…¥</h2><p>åœ¨å‡½æ•°çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éƒ½æ˜ç™½ä¼ æŒ‡é’ˆå’Œä¼ å¼•ç”¨ä¼šä½¿å®å‚çš„å€¼å‘ç”Ÿæ”¹å˜ã€‚é‚£ä¹ˆèƒ½å¤Ÿé€šè¿‡ä¼ æŒ‡é’ˆæ”¹å˜æŒ‡é’ˆæ‰€æŒ‡å‘çš„åœ°å€å—ï¼Ÿ<br>åœ¨è§£å†³è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œä¹Ÿè®¸æˆ‘ä»¬åº”è¯¥å…ˆäº†è§£æŒ‡é’ˆéå¸¸å®¹æ˜“æ··æ·†çš„ä¸‰ä¸ªå±æ€§ï¼š</p><ul><li>æŒ‡é’ˆå˜é‡åœ°å€ï¼ˆ&amp;pï¼‰</li><li>æŒ‡é’ˆå˜é‡æŒ‡å‘çš„åœ°å€ï¼ˆpï¼Œå­˜å‚¨æ•°æ®çš„åœ°å€ï¼‰</li><li>æŒ‡é’ˆå˜é‡æŒ‡å‘çš„åœ°å€çš„å€¼ï¼ˆ*pï¼‰</li></ul><p>å½“æˆ‘ä»¬å°†æŒ‡é’ˆå˜é‡ä¸å…¶å®ƒå˜é‡æ¯”è¾ƒä¹‹åå°±ä¼šå‘ç°ï¼ŒæŒ‡é’ˆå˜é‡åŒå…¶å®ƒå˜é‡æ˜¯ç›¸ä¼¼çš„ï¼Œåªæ˜¯å¤šäº†æœ€åä¸€ç§æ“ä½œã€‚æ¯”å¦‚ä¸€ä¸ªintç±»å‹çš„å˜é‡,<code>int x=5;</code>,<code>&amp;x</code>å–å‡ºå­˜å‚¨<code>5</code>è¿™ä¸ªæ•°æ®çš„åœ°å€ï¼ŒåŒæ ·ï¼Œ<code>&amp;p</code>ä¹Ÿæ˜¯å­˜å‚¨æŒ‡é’ˆçš„åœ°å€ï¼Œ<code>p</code>å°±æ˜¯è¿™ä¸ªåœ°å€é‡Œé¢ä¿å­˜çš„å€¼ï¼Œä¹Ÿå°±æ˜¯æŒ‡å‘çš„åœ°å€ã€‚åªæ˜¯ä¸å…¶å®ƒå˜é‡ä¸åŒçš„æ˜¯ï¼Œå®ƒé™¤äº†è¿™ä¸¤ç§æ“ä½œä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªè§£å¼•ç”¨æ“ä½œç¬¦<code>*p</code>å»è·å–æŒ‡é’ˆå˜é‡æŒ‡å‘çš„åœ°å€é‡Œé¢ä¿å­˜çš„å€¼ã€‚</p><h2 id="æŒ‡é’ˆå¼•ç”¨"><a href="#æŒ‡é’ˆå¼•ç”¨" class="headerlink" title="æŒ‡é’ˆå¼•ç”¨"></a>æŒ‡é’ˆå¼•ç”¨</h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>pp<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    pp<span class="token operator">=</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">66</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è¯•å›¾æ”¹å˜pæŒ‡å‘çš„åœ°å€</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>     <span class="token keyword">int</span> a<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">;</span>     <span class="token keyword">int</span> <span class="token operator">*</span>p<span class="token operator">=</span><span class="token operator">&amp;</span>a<span class="token punctuation">;</span> <span class="token comment">//æŒ‡é’ˆå˜é‡æŒ‡å‘ä¸€ä¸ªintç±»å‹çš„åœ°å€</span>     cout<span class="token operator">&lt;&lt;</span><span class="token string">"address:"</span><span class="token operator">&lt;&lt;</span><span class="token operator">&amp;</span>a<span class="token operator">&lt;&lt;</span><span class="token string">"value:"</span><span class="token operator">&lt;&lt;</span>a<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>     cout<span class="token operator">&lt;&lt;</span><span class="token string">"address:"</span><span class="token operator">&lt;&lt;</span>p<span class="token operator">&lt;&lt;</span><span class="token string">"value:"</span><span class="token operator">&lt;&lt;</span><span class="token operator">*</span>p<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>     <span class="token function">make</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>     cout<span class="token operator">&lt;&lt;</span><span class="token string">"address:"</span><span class="token operator">&lt;&lt;</span>p<span class="token operator">&lt;&lt;</span><span class="token string">"value:"</span><span class="token operator">&lt;&lt;</span><span class="token operator">*</span>p<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼šæˆ‘ä»¬è¿™é‡Œè™½ç„¶ä½¿ç”¨çš„æ˜¯ä¼ æŒ‡é’ˆï¼Œä½†æ˜¯å´ä¸æ˜¯ç›´æ¥æ”¹å˜æŒ‡é’ˆå˜é‡æŒ‡å‘çš„åœ°å€çš„å€¼ï¼Œå´æ˜¯æƒ³é€šè¿‡æ”¹å˜æŒ‡é’ˆå˜é‡æŒ‡å‘çš„åœ°å€æ¥ä¿®æ”¹å®ƒçš„å€¼ï¼Œæ˜¾ç„¶è¿™æ ·å¤±è´¥äº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92%E4%B9%8B%E5%BC%95%E7%94%A8%E4%B8%8E%E6%8C%87%E9%92%88/no.png"></p><p>å¦‚æœæˆ‘ä»¬å¸Œæœ›åœ¨å‡½æ•°é‡Œé¢ä¿®æ”¹æŒ‡é’ˆå˜é‡å­˜å‚¨çš„åœ°å€è€Œä¸æ˜¯å®ƒçš„å€¼ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æŒ‡é’ˆå¼•ç”¨äº†ã€‚ç±»ä¼¼äºæ™®é€šå˜é‡ä¼ å…¥å˜é‡å¼•ç”¨ï¼Œæˆ‘ä»¬ä¹Ÿä¼ å…¥ä¸€ä¸ªæŒ‡é’ˆå¼•ç”¨ï¼Œåœ¨å‡½æ•°é‡Œé¢ï¼Œä½ å¯ä»¥å°†ppè®¤ä¸ºå’Œpéƒ½æ˜¯è¿™ä¸ªæŒ‡é’ˆå˜é‡ï¼ˆ&amp;p&#x3D;&#x3D;&amp;ppï¼‰ï¼Œä¸ä¼¼ä¼ å…¥æŒ‡é’ˆå‚æ•°çš„æ—¶å€™å½¢å‚å’Œå®å‚çš„å˜é‡ï¼ˆ&amp;pï¼&#x3D;&amp;ppï¼‰åœ°å€ä¸ä¸€æ ·ã€‚æ­¤æ—¶æˆ‘ä»¬æ“ä½œppçš„å€¼å°±æ˜¯æ›´æ”¹äº†pçš„å€¼ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token operator">&amp;</span>pp<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    pp<span class="token operator">=</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">66</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æ”¹å˜pæŒ‡å‘çš„åœ°å€</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼šå½“æˆ‘ä»¬ä¿®æ”¹ä¼ å…¥å‚æ•°ä¸ºæŒ‡é’ˆçš„å¼•ç”¨çš„æ—¶å€™å°±å¯ä»¥ä¿®æ”¹æŒ‡é’ˆå˜é‡æ‰€æŒ‡å‘çš„åœ°å€äº†ï¼Œå¯ä»¥çœ‹è§ï¼Œä¼ å…¥æŒ‡é’ˆå¼•ç”¨å¯ä»¥ä¿®æ”¹æŒ‡é’ˆå˜é‡çš„å€¼ï¼ˆpï¼‰å’ŒæŒ‡å‘çš„å€¼ï¼ˆ*pï¼‰ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92%E4%B9%8B%E5%BC%95%E7%94%A8%E4%B8%8E%E6%8C%87%E9%92%88/yes.png"></p><h2 id="äºŒçº§æŒ‡é’ˆ-1"><a href="#äºŒçº§æŒ‡é’ˆ-1" class="headerlink" title="äºŒçº§æŒ‡é’ˆ"></a>äºŒçº§æŒ‡é’ˆ</h2><p>æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆå˜é‡ç§°ä¸ºäºŒçº§æŒ‡é’ˆã€‚<br>å¦‚æœppæ˜¯ä¸€ä¸ªäºŒçº§æŒ‡é’ˆï¼Œé‚£ä¹ˆæœ‰å¦‚ä¸‹å±æ€§ï¼š</p><ul><li>äºŒçº§æŒ‡é’ˆçš„åœ°å€ï¼ˆ&amp;ppï¼‰</li><li>äºŒçº§æŒ‡é’ˆçš„åœ°å€ä¿å­˜çš„åœ°å€ï¼ˆppï¼‰</li><li>äºŒçº§æŒ‡é’ˆçš„åœ°å€ä¿å­˜çš„åœ°å€ï¼Œè¯¥åœ°å€é‡Œé¢ä¿å­˜çš„åœ°å€ï¼ˆ*ppï¼‰</li><li>äºŒçº§æŒ‡é’ˆçš„åœ°å€ä¿å­˜çš„åœ°å€ï¼Œè¯¥åœ°å€é‡Œé¢ä¿å­˜çš„åœ°å€é‡Œé¢çš„æ•°æ®ï¼ˆ**ppï¼‰</li></ul><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92%E4%B9%8B%E5%BC%95%E7%94%A8%E4%B8%8E%E6%8C%87%E9%92%88/kuangtu.png"> </p><p>é™¤äº†ä¸Šé¢ä¼ å…¥æŒ‡é’ˆå¼•ç”¨æ”¹å˜ä¸€çº§æŒ‡é’ˆæŒ‡å‘çš„åœ°å€ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ä¼ å…¥ä¸€ä¸ªäºŒçº§æŒ‡é’ˆå»ä¿®æ”¹å®ƒå¯¹åº”çš„ä¸€çº§æŒ‡é’ˆæŒ‡å‘çš„åœ°å€ï¼ŒåŒæ ·è¾¾åˆ°äº†ä¿®æ”¹æŒ‡é’ˆå˜é‡çš„æ•ˆæœã€‚äºŒçº§æŒ‡é’ˆçš„æŒ‡å‘çš„åœ°å€å­˜å‚¨çš„å€¼å°±æ˜¯ä¸€çº§æŒ‡é’ˆæŒ‡å‘çš„åœ°å€ã€‚å¯¹ä¸€çº§æŒ‡é’ˆå˜é‡è§£å¼•ç”¨å¾—åˆ°çš„æ˜¯æŒ‡é’ˆæŒ‡å‘çš„åœ°å€å­˜å‚¨çš„æ•°æ®ï¼ŒäºŒçº§æŒ‡é’ˆå˜é‡è§£å¼•ç”¨å¾—åˆ°çš„ä¹Ÿæ˜¯è¯¥äºŒçº§æŒ‡é’ˆæŒ‡å‘çš„åœ°å€å­˜å‚¨çš„åœ°å€å€¼ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token operator">*</span>pp<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>   <span class="token keyword">int</span> <span class="token operator">*</span> p<span class="token operator">=</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">66</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">*</span>pp<span class="token operator">=</span>p<span class="token punctuation">;</span> <span class="token comment">//äºŒçº§æŒ‡é’ˆçš„è§£å¼•ç”¨è¢«èµ‹å€¼éœ€è¦å¾—åˆ°ä¸€ä¸ªä¸€çº§æŒ‡é’ˆå˜é‡ï¼Œä¸Šå›¾ä¸­äºŒçº§æŒ‡é’ˆçš„ç¤ºæ„å›¾ä¸­*pp=p</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>     <span class="token keyword">int</span> a<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">;</span>     <span class="token keyword">int</span> <span class="token operator">*</span>q<span class="token operator">=</span><span class="token operator">&amp;</span>a<span class="token punctuation">;</span>     <span class="token keyword">int</span> <span class="token operator">*</span><span class="token operator">*</span>pp<span class="token operator">=</span><span class="token operator">&amp;</span>q<span class="token punctuation">;</span>     cout<span class="token operator">&lt;&lt;</span><span class="token string">"address:"</span><span class="token operator">&lt;&lt;</span><span class="token operator">&amp;</span>pp<span class="token operator">&lt;&lt;</span><span class="token string">"  "</span><span class="token operator">&lt;&lt;</span>pp<span class="token operator">&lt;&lt;</span><span class="token string">"    "</span><span class="token operator">&lt;&lt;</span><span class="token operator">&amp;</span>q<span class="token operator">&lt;&lt;</span><span class="token string">"   "</span><span class="token operator">&lt;&lt;</span>q<span class="token operator">&lt;&lt;</span><span class="token string">"       value:"</span><span class="token operator">&lt;&lt;</span><span class="token operator">*</span>q<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>     <span class="token function">make</span><span class="token punctuation">(</span>pp<span class="token punctuation">)</span><span class="token punctuation">;</span>     cout<span class="token operator">&lt;&lt;</span><span class="token string">"address:"</span><span class="token operator">&lt;&lt;</span><span class="token operator">&amp;</span>pp<span class="token operator">&lt;&lt;</span><span class="token string">"  "</span><span class="token operator">&lt;&lt;</span>pp<span class="token operator">&lt;&lt;</span><span class="token string">"    "</span><span class="token operator">&lt;&lt;</span><span class="token operator">&amp;</span>q<span class="token operator">&lt;&lt;</span><span class="token string">"   "</span><span class="token operator">&lt;&lt;</span>q<span class="token operator">&lt;&lt;</span><span class="token string">"       value:"</span><span class="token operator">&lt;&lt;</span><span class="token operator">*</span>q<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼šé€šè¿‡å¯¹äºŒçº§æŒ‡é’ˆçš„è§£å¼•ç”¨èµ‹å€¼æˆåŠŸä¿®æ”¹äº†ä¸€çº§æŒ‡é’ˆæŒ‡å‘çš„åœ°å€ã€‚å¦‚æœä»…ä»…åœ¨makeå‡½æ•°é‡Œé¢å¯¹**pp&#x3D;66;æ“ä½œï¼Œé‚£ä¹ˆæ‰€æœ‰çš„åœ°å€ä¸ä¼šæ”¹å˜ï¼Œä»…ä»…ä¼šæ”¹å˜å€¼ä¸º66ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/geiyiren/MyBlogImage1/%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92%E4%B9%8B%E5%BC%95%E7%94%A8%E4%B8%8E%E6%8C%87%E9%92%88/yes2.png"></p><h1 id="å„ç§ç±»å‹çš„å‡½æ•°å‚æ•°ä¼ é€’"><a href="#å„ç§ç±»å‹çš„å‡½æ•°å‚æ•°ä¼ é€’" class="headerlink" title="å„ç§ç±»å‹çš„å‡½æ•°å‚æ•°ä¼ é€’"></a>å„ç§ç±»å‹çš„å‡½æ•°å‚æ•°ä¼ é€’</h1><h2 id="å£°æ˜-h"><a href="#å£°æ˜-h" class="headerlink" title="å£°æ˜.h"></a>å£°æ˜.h</h2><pre class="line-numbers language-C" data-language="C"><div class="caption"><span>++</span></div><code class="language-C">&#x2F;&#x2F; ç»“æ„ä½“æ•°ç»„   (in_ldc)void getLdc(TLensDistortionCorrection (&amp;in_ldc)[NUM_CAMERAS]);&#x2F;&#x2F; cv::Mat  (in_MatK)void getMatK(cv::Mat *in_MatK);&#x2F;&#x2F; å†…å­˜å—(map)  (in_BEMap)void getBEMap(unsigned short *&amp;in_BEMap);&#x2F;&#x2F; cv::Rectæ•°ç»„ (in_BESetRoi)void getBESetRoi(cv::Rect *in_BESetRoi);&#x2F;&#x2F; cv::Mat æ•°ç»„ (in_wide_angle_map)void getWideAngleMap(float **in_wide_angle_map);&#x2F;&#x2F; æ•´æ•° (in_wide_angle_width,in_wide_angle_height)void getWideAngleSize(int &amp;in_wide_angle_width, int &amp;in_wide_angle_height);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å®šä¹‰-cpp"><a href="#å®šä¹‰-cpp" class="headerlink" title="å®šä¹‰.cpp"></a>å®šä¹‰.cpp</h2><ul><li><p>ç»“æ„ä½“æ•°ç»„</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">typedef</span> <span class="token keyword">struct</span><span class="token punctuation">&#123;</span>    <span class="token keyword">float</span> distCenterX<span class="token punctuation">;</span>    <span class="token keyword">float</span> distCenterY<span class="token punctuation">;</span>    <span class="token keyword">float</span> distFocalLength<span class="token punctuation">;</span>    <span class="token keyword">float</span> distFocalLengthInv<span class="token punctuation">;</span>    <span class="token keyword">float</span> <span class="token operator">*</span>lut_d2u<span class="token punctuation">;</span>    <span class="token keyword">int32_t</span> lut_d2u_indMax<span class="token punctuation">;</span>    <span class="token keyword">float</span> lut_d2u_step<span class="token punctuation">;</span>    <span class="token keyword">float</span> lut_d2u_stepInv<span class="token punctuation">;</span>    <span class="token keyword">float</span> <span class="token operator">*</span>lut_u2d<span class="token punctuation">;</span>    <span class="token keyword">int32_t</span> lut_u2d_indMax<span class="token punctuation">;</span>    <span class="token keyword">float</span> lut_u2d_step<span class="token punctuation">;</span>    <span class="token keyword">float</span> lut_u2d_stepInv<span class="token punctuation">;</span>    <span class="token keyword">bool</span> if_get_matrix <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat intrinsics <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Mat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> CV_32FC1<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token class-name">Scalar</span><span class="token double-colon punctuation">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat distortionCoeff <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Mat</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> CV_32FC1<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token class-name">Scalar</span><span class="token double-colon punctuation">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> TLensDistortionCorrection<span class="token punctuation">;</span>TLensDistortionCorrection TLdc<span class="token punctuation">[</span>NUM_CAMERAS<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token class-name">ParametersInit</span><span class="token double-colon punctuation">::</span><span class="token function">getLdc</span><span class="token punctuation">(</span><span class="token function">TLensDistortionCorrection</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>in_ldc<span class="token punctuation">)</span><span class="token punctuation">[</span>NUM_CAMERAS<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUM_CAMERAS<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        in_ldc<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> TLdc<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>map</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">unsigned</span> <span class="token keyword">short</span> <span class="token operator">*</span>BEMap <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>BEMap <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">short</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">short</span><span class="token punctuation">)</span> <span class="token operator">*</span> BEGetRoiSize <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">getBEMap</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">short</span> <span class="token operator">*</span><span class="token operator">&amp;</span>in_BEMap<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    in_BEMap <span class="token operator">=</span> BEMap<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// cv::Rect</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> rect_index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> rect_index <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> rect_index<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    BESetRoi<span class="token punctuation">[</span>rect_index<span class="token punctuation">]</span> <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Rect</span><span class="token punctuation">(</span>BE_set_roi<span class="token punctuation">[</span>rect_index <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> BE_set_roi<span class="token punctuation">[</span>rect_index <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                                        BE_set_roi<span class="token punctuation">[</span>rect_index <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> BE_set_roi<span class="token punctuation">[</span>rect_index <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">getBESetRoi</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>Rect <span class="token operator">*</span>in_BESetRoi<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUM_CAMERAS<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        in_BESetRoi<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> BESetRoi<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>cv::Mat []</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">float</span> <span class="token operator">*</span>wideAngleViewMap<span class="token punctuation">[</span>NUM_CAMERAS<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token constant">NULL</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> NUM_CAMERAS<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    wideAngleViewMap<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>wideAngle_width <span class="token operator">*</span> wideAngle_height <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token class-name">ParametersInit</span><span class="token double-colon punctuation">::</span><span class="token function">getWideAngleMap</span><span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token operator">*</span>in_wide_angle_map<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUM_CAMERAS<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>wideAngleViewMap<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            in_wide_angle_map<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> wideAngleViewMap<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span>        <span class="token punctuation">&#123;</span>            <span class="token function">LOGI</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"getWideAngleMap failed!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>int</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> wideAngle_width <span class="token operator">=</span> <span class="token number">720</span><span class="token punctuation">;</span> <span class="token comment">//å¹¿è§’è§†å›¾çš„å°ºå¯¸ï¼Œéœ€è¦ä¸ºå¶æ•°</span><span class="token keyword">int</span> wideAngle_height <span class="token operator">=</span> <span class="token number">720</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token class-name">ParametersInit</span><span class="token double-colon punctuation">::</span><span class="token function">getWideAngleSize</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;</span>in_wide_angle_width<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>in_wide_angle_height<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    in_wide_angle_width <span class="token operator">=</span> wideAngle_width<span class="token punctuation">;</span>    in_wide_angle_height <span class="token operator">=</span> wideAngle_height<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h2 id="ä½¿ç”¨-cpp"><a href="#ä½¿ç”¨-cpp" class="headerlink" title="ä½¿ç”¨.cpp"></a>ä½¿ç”¨.cpp</h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// </span>TLensDistortionCorrection m_ldc<span class="token punctuation">[</span>NUM_CAMERAS<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token function">getLdc</span><span class="token punctuation">(</span>my_avm_bsd<span class="token punctuation">.</span>m_ldc<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// </span>cv<span class="token double-colon punctuation">::</span>Mat m_MatK<span class="token punctuation">[</span>NUM_CAMERAS<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token function">getMatK</span><span class="token punctuation">(</span>my_avm_bsd<span class="token punctuation">.</span>m_MatK<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// </span><span class="token keyword">unsigned</span> <span class="token keyword">short</span> <span class="token operator">*</span>BE_Map<span class="token punctuation">;</span><span class="token function">getBEMap</span><span class="token punctuation">(</span>my_BB_YUV<span class="token punctuation">.</span>BE_Map<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// </span>cv<span class="token double-colon punctuation">::</span>Rect BE_SetRoi<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token function">getBESetRoi</span><span class="token punctuation">(</span>my_BB_YUV<span class="token punctuation">.</span>BE_SetRoi<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// </span><span class="token keyword">float</span> <span class="token operator">*</span>wide_angle_map<span class="token punctuation">[</span>NUM_CAMERAS<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token constant">NULL</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token function">getWideAngleMap</span><span class="token punctuation">(</span>g_avm_set<span class="token operator">-></span>wide_angle_map<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// </span><span class="token keyword">int</span> m_wideAngle_width<span class="token punctuation">;</span><span class="token keyword">int</span> m_wideAngle_height<span class="token punctuation">;</span><span class="token function">getWideAngleSize</span><span class="token punctuation">(</span>g_avm_set<span class="token operator">-></span>m_wideAngle_width<span class="token punctuation">,</span> g_avm_set<span class="token operator">-></span>m_wideAngle_height<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å‚è€ƒç½‘ç«™"><a href="#å‚è€ƒç½‘ç«™" class="headerlink" title="å‚è€ƒç½‘ç«™"></a>å‚è€ƒç½‘ç«™</h1><ul><li><a href="https://www.pudn.com/news/62615ba10e75e420124071b2.html">C++ä¸­å¼•ç”¨ä¼ é€’ä¸æŒ‡é’ˆä¼ é€’åŒºåˆ«ï¼ˆè¿›ä¸€æ­¥æ•´ç†ï¼‰</a> </li><li><a href="https://blog.csdn.net/qq_32483145/article/details/52901230">äºŒçº§æŒ‡é’ˆå’ŒæŒ‡é’ˆå¼•ç”¨å‡½æ•°ä¼ å‚ï¼ˆC++ï¼‰</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> å‡½æ•°å‚æ•°ä¼ é€’ </tag>
            
            <tag> å¼•ç”¨ä¸æŒ‡é’ˆ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
